function Hk(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(i,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const a of d.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(l){if(l.ep)return;l.ep=!0;const d=n(l);fetch(l.href,d)}})();function rp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s_={exports:{}},ay={};var BS;function YP(){if(BS)return ay;BS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,l,d){var a=null;if(d!==void 0&&(a=""+d),l.key!==void 0&&(a=""+l.key),"key"in l){d={};for(var g in l)g!=="key"&&(d[g]=l[g])}else d=l;return l=d.ref,{$$typeof:e,type:i,key:a,ref:l!==void 0?l:null,props:d}}return ay.Fragment=t,ay.jsx=n,ay.jsxs=n,ay}var FS;function WP(){return FS||(FS=1,s_.exports=YP()),s_.exports}var c=WP(),l_={exports:{}},oy={},c_={exports:{}},u_={};var US;function QP(){return US||(US=1,(function(e){function t(Ae,De){var ke=Ae.length;Ae.push(De);e:for(;0<ke;){var st=ke-1>>>1,me=Ae[st];if(0<l(me,De))Ae[st]=De,Ae[ke]=me,ke=st;else break e}}function n(Ae){return Ae.length===0?null:Ae[0]}function i(Ae){if(Ae.length===0)return null;var De=Ae[0],ke=Ae.pop();if(ke!==De){Ae[0]=ke;e:for(var st=0,me=Ae.length,Ce=me>>>1;st<Ce;){var pe=2*(st+1)-1,Q=Ae[pe],Ee=pe+1,Ge=Ae[Ee];if(0>l(Q,ke))Ee<me&&0>l(Ge,Q)?(Ae[st]=Ge,Ae[Ee]=ke,st=Ee):(Ae[st]=Q,Ae[pe]=ke,st=pe);else if(Ee<me&&0>l(Ge,ke))Ae[st]=Ge,Ae[Ee]=ke,st=Ee;else break e}}return De}function l(Ae,De){var ke=Ae.sortIndex-De.sortIndex;return ke!==0?ke:Ae.id-De.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var a=Date,g=a.now();e.unstable_now=function(){return a.now()-g}}var x=[],_=[],C=1,E=null,A=3,D=!1,I=!1,L=!1,B=!1,z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function W(Ae){for(var De=n(_);De!==null;){if(De.callback===null)i(_);else if(De.startTime<=Ae)i(_),De.sortIndex=De.expirationTime,t(x,De);else break;De=n(_)}}function ne(Ae){if(L=!1,W(Ae),!I)if(n(x)!==null)I=!0,re||(re=!0,Pe());else{var De=n(_);De!==null&&Je(ne,De.startTime-Ae)}}var re=!1,ee=-1,oe=5,he=-1;function we(){return B?!0:!(e.unstable_now()-he<oe)}function ye(){if(B=!1,re){var Ae=e.unstable_now();he=Ae;var De=!0;try{e:{I=!1,L&&(L=!1,q(ee),ee=-1),D=!0;var ke=A;try{t:{for(W(Ae),E=n(x);E!==null&&!(E.expirationTime>Ae&&we());){var st=E.callback;if(typeof st=="function"){E.callback=null,A=E.priorityLevel;var me=st(E.expirationTime<=Ae);if(Ae=e.unstable_now(),typeof me=="function"){E.callback=me,W(Ae),De=!0;break t}E===n(x)&&i(x),W(Ae)}else i(x);E=n(x)}if(E!==null)De=!0;else{var Ce=n(_);Ce!==null&&Je(ne,Ce.startTime-Ae),De=!1}}break e}finally{E=null,A=ke,D=!1}De=void 0}}finally{De?Pe():re=!1}}}var Pe;if(typeof H=="function")Pe=function(){H(ye)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,ze=Ke.port2;Ke.port1.onmessage=ye,Pe=function(){ze.postMessage(null)}}else Pe=function(){z(ye,0)};function Je(Ae,De){ee=z(function(){Ae(e.unstable_now())},De)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ae){Ae.callback=null},e.unstable_forceFrameRate=function(Ae){0>Ae||125<Ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<Ae?Math.floor(1e3/Ae):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_next=function(Ae){switch(A){case 1:case 2:case 3:var De=3;break;default:De=A}var ke=A;A=De;try{return Ae()}finally{A=ke}},e.unstable_requestPaint=function(){B=!0},e.unstable_runWithPriority=function(Ae,De){switch(Ae){case 1:case 2:case 3:case 4:case 5:break;default:Ae=3}var ke=A;A=Ae;try{return De()}finally{A=ke}},e.unstable_scheduleCallback=function(Ae,De,ke){var st=e.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?st+ke:st):ke=st,Ae){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ke+me,Ae={id:C++,callback:De,priorityLevel:Ae,startTime:ke,expirationTime:me,sortIndex:-1},ke>st?(Ae.sortIndex=ke,t(_,Ae),n(x)===null&&Ae===n(_)&&(L?(q(ee),ee=-1):L=!0,Je(ne,ke-st))):(Ae.sortIndex=me,t(x,Ae),I||D||(I=!0,re||(re=!0,Pe()))),Ae},e.unstable_shouldYield=we,e.unstable_wrapCallback=function(Ae){var De=A;return function(){var ke=A;A=De;try{return Ae.apply(this,arguments)}finally{A=ke}}}})(u_)),u_}var VS;function JP(){return VS||(VS=1,c_.exports=QP()),c_.exports}var d_={exports:{}},vr={};var qS;function eI(){if(qS)return vr;qS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),a=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function D(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=A&&Ce[A]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function z(Ce,pe,Q){this.props=Ce,this.context=pe,this.refs=B,this.updater=Q||I}z.prototype.isReactComponent={},z.prototype.setState=function(Ce,pe){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,pe,"setState")},z.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function q(){}q.prototype=z.prototype;function H(Ce,pe,Q){this.props=Ce,this.context=pe,this.refs=B,this.updater=Q||I}var W=H.prototype=new q;W.constructor=H,L(W,z.prototype),W.isPureReactComponent=!0;var ne=Array.isArray;function re(){}var ee={H:null,A:null,T:null,S:null},oe=Object.prototype.hasOwnProperty;function he(Ce,pe,Q){var Ee=Q.ref;return{$$typeof:e,type:Ce,key:pe,ref:Ee!==void 0?Ee:null,props:Q}}function we(Ce,pe){return he(Ce.type,pe,Ce.props)}function ye(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===e}function Pe(Ce){var pe={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(Q){return pe[Q]})}var Ke=/\/+/g;function ze(Ce,pe){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?Pe(""+Ce.key):pe.toString(36)}function Je(Ce){switch(Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason;default:switch(typeof Ce.status=="string"?Ce.then(re,re):(Ce.status="pending",Ce.then(function(pe){Ce.status==="pending"&&(Ce.status="fulfilled",Ce.value=pe)},function(pe){Ce.status==="pending"&&(Ce.status="rejected",Ce.reason=pe)})),Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason}}throw Ce}function Ae(Ce,pe,Q,Ee,Ge){var lt=typeof Ce;(lt==="undefined"||lt==="boolean")&&(Ce=null);var We=!1;if(Ce===null)We=!0;else switch(lt){case"bigint":case"string":case"number":We=!0;break;case"object":switch(Ce.$$typeof){case e:case t:We=!0;break;case C:return We=Ce._init,Ae(We(Ce._payload),pe,Q,Ee,Ge)}}if(We)return Ge=Ge(Ce),We=Ee===""?"."+ze(Ce,0):Ee,ne(Ge)?(Q="",We!=null&&(Q=We.replace(Ke,"$&/")+"/"),Ae(Ge,pe,Q,"",function(Mt){return Mt})):Ge!=null&&(ye(Ge)&&(Ge=we(Ge,Q+(Ge.key==null||Ce&&Ce.key===Ge.key?"":(""+Ge.key).replace(Ke,"$&/")+"/")+We)),pe.push(Ge)),1;We=0;var Nt=Ee===""?".":Ee+":";if(ne(Ce))for(var At=0;At<Ce.length;At++)Ee=Ce[At],lt=Nt+ze(Ee,At),We+=Ae(Ee,pe,Q,lt,Ge);else if(At=D(Ce),typeof At=="function")for(Ce=At.call(Ce),At=0;!(Ee=Ce.next()).done;)Ee=Ee.value,lt=Nt+ze(Ee,At++),We+=Ae(Ee,pe,Q,lt,Ge);else if(lt==="object"){if(typeof Ce.then=="function")return Ae(Je(Ce),pe,Q,Ee,Ge);throw pe=String(Ce),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return We}function De(Ce,pe,Q){if(Ce==null)return Ce;var Ee=[],Ge=0;return Ae(Ce,Ee,"","",function(lt){return pe.call(Q,lt,Ge++)}),Ee}function ke(Ce){if(Ce._status===-1){var pe=Ce._result;pe=pe(),pe.then(function(Q){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=Q)},function(Q){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=Q)}),Ce._status===-1&&(Ce._status=0,Ce._result=pe)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var st=typeof reportError=="function"?reportError:function(Ce){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ce=="object"&&Ce!==null&&typeof Ce.message=="string"?String(Ce.message):String(Ce),error:Ce});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ce);return}console.error(Ce)},me={map:De,forEach:function(Ce,pe,Q){De(Ce,function(){pe.apply(this,arguments)},Q)},count:function(Ce){var pe=0;return De(Ce,function(){pe++}),pe},toArray:function(Ce){return De(Ce,function(pe){return pe})||[]},only:function(Ce){if(!ye(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}};return vr.Activity=E,vr.Children=me,vr.Component=z,vr.Fragment=n,vr.Profiler=l,vr.PureComponent=H,vr.StrictMode=i,vr.Suspense=x,vr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,vr.__COMPILER_RUNTIME={__proto__:null,c:function(Ce){return ee.H.useMemoCache(Ce)}},vr.cache=function(Ce){return function(){return Ce.apply(null,arguments)}},vr.cacheSignal=function(){return null},vr.cloneElement=function(Ce,pe,Q){if(Ce==null)throw Error("The argument must be a React element, but you passed "+Ce+".");var Ee=L({},Ce.props),Ge=Ce.key;if(pe!=null)for(lt in pe.key!==void 0&&(Ge=""+pe.key),pe)!oe.call(pe,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&pe.ref===void 0||(Ee[lt]=pe[lt]);var lt=arguments.length-2;if(lt===1)Ee.children=Q;else if(1<lt){for(var We=Array(lt),Nt=0;Nt<lt;Nt++)We[Nt]=arguments[Nt+2];Ee.children=We}return he(Ce.type,Ge,Ee)},vr.createContext=function(Ce){return Ce={$$typeof:a,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null},Ce.Provider=Ce,Ce.Consumer={$$typeof:d,_context:Ce},Ce},vr.createElement=function(Ce,pe,Q){var Ee,Ge={},lt=null;if(pe!=null)for(Ee in pe.key!==void 0&&(lt=""+pe.key),pe)oe.call(pe,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Ge[Ee]=pe[Ee]);var We=arguments.length-2;if(We===1)Ge.children=Q;else if(1<We){for(var Nt=Array(We),At=0;At<We;At++)Nt[At]=arguments[At+2];Ge.children=Nt}if(Ce&&Ce.defaultProps)for(Ee in We=Ce.defaultProps,We)Ge[Ee]===void 0&&(Ge[Ee]=We[Ee]);return he(Ce,lt,Ge)},vr.createRef=function(){return{current:null}},vr.forwardRef=function(Ce){return{$$typeof:g,render:Ce}},vr.isValidElement=ye,vr.lazy=function(Ce){return{$$typeof:C,_payload:{_status:-1,_result:Ce},_init:ke}},vr.memo=function(Ce,pe){return{$$typeof:_,type:Ce,compare:pe===void 0?null:pe}},vr.startTransition=function(Ce){var pe=ee.T,Q={};ee.T=Q;try{var Ee=Ce(),Ge=ee.S;Ge!==null&&Ge(Q,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(re,st)}catch(lt){st(lt)}finally{pe!==null&&Q.types!==null&&(pe.types=Q.types),ee.T=pe}},vr.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},vr.use=function(Ce){return ee.H.use(Ce)},vr.useActionState=function(Ce,pe,Q){return ee.H.useActionState(Ce,pe,Q)},vr.useCallback=function(Ce,pe){return ee.H.useCallback(Ce,pe)},vr.useContext=function(Ce){return ee.H.useContext(Ce)},vr.useDebugValue=function(){},vr.useDeferredValue=function(Ce,pe){return ee.H.useDeferredValue(Ce,pe)},vr.useEffect=function(Ce,pe){return ee.H.useEffect(Ce,pe)},vr.useEffectEvent=function(Ce){return ee.H.useEffectEvent(Ce)},vr.useId=function(){return ee.H.useId()},vr.useImperativeHandle=function(Ce,pe,Q){return ee.H.useImperativeHandle(Ce,pe,Q)},vr.useInsertionEffect=function(Ce,pe){return ee.H.useInsertionEffect(Ce,pe)},vr.useLayoutEffect=function(Ce,pe){return ee.H.useLayoutEffect(Ce,pe)},vr.useMemo=function(Ce,pe){return ee.H.useMemo(Ce,pe)},vr.useOptimistic=function(Ce,pe){return ee.H.useOptimistic(Ce,pe)},vr.useReducer=function(Ce,pe,Q){return ee.H.useReducer(Ce,pe,Q)},vr.useRef=function(Ce){return ee.H.useRef(Ce)},vr.useState=function(Ce){return ee.H.useState(Ce)},vr.useSyncExternalStore=function(Ce,pe,Q){return ee.H.useSyncExternalStore(Ce,pe,Q)},vr.useTransition=function(){return ee.H.useTransition()},vr.version="19.2.0",vr}var HS;function Ew(){return HS||(HS=1,d_.exports=eI()),d_.exports}var h_={exports:{}},Jo={};var $S;function tI(){if($S)return Jo;$S=1;var e=Ew();function t(x){var _="https://react.dev/errors/"+x;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+x+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(x,_,C){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:x,containerInfo:_,implementation:C}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,_){if(x==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Jo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jo.createPortal=function(x,_){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return d(x,_,null,C)},Jo.flushSync=function(x){var _=a.T,C=i.p;try{if(a.T=null,i.p=2,x)return x()}finally{a.T=_,i.p=C,i.d.f()}},Jo.preconnect=function(x,_){typeof x=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,i.d.C(x,_))},Jo.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},Jo.preinit=function(x,_){if(typeof x=="string"&&_&&typeof _.as=="string"){var C=_.as,E=g(C,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,D=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;C==="style"?i.d.S(x,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:D}):C==="script"&&i.d.X(x,{crossOrigin:E,integrity:A,fetchPriority:D,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Jo.preinitModule=function(x,_){if(typeof x=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var C=g(_.as,_.crossOrigin);i.d.M(x,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&i.d.M(x)},Jo.preload=function(x,_){if(typeof x=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var C=_.as,E=g(C,_.crossOrigin);i.d.L(x,C,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Jo.preloadModule=function(x,_){if(typeof x=="string")if(_){var C=g(_.as,_.crossOrigin);i.d.m(x,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else i.d.m(x)},Jo.requestFormReset=function(x){i.d.r(x)},Jo.unstable_batchedUpdates=function(x,_){return x(_)},Jo.useFormState=function(x,_,C){return a.H.useFormState(x,_,C)},Jo.useFormStatus=function(){return a.H.useHostTransitionStatus()},Jo.version="19.2.0",Jo}var GS;function $k(){if(GS)return h_.exports;GS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),h_.exports=tI(),h_.exports}var ZS;function nI(){if(ZS)return oy;ZS=1;var e=JP(),t=Ew(),n=$k();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function d(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function g(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function x(o){if(d(o)!==o)throw Error(i(188))}function _(o){var u=o.alternate;if(!u){if(u=d(o),u===null)throw Error(i(188));return u!==o?null:o}for(var p=o,w=u;;){var M=p.return;if(M===null)break;var O=M.alternate;if(O===null){if(w=M.return,w!==null){p=w;continue}break}if(M.child===O.child){for(O=M.child;O;){if(O===p)return x(M),o;if(O===w)return x(M),u;O=O.sibling}throw Error(i(188))}if(p.return!==w.return)p=M,w=O;else{for(var X=!1,ge=M.child;ge;){if(ge===p){X=!0,p=M,w=O;break}if(ge===w){X=!0,w=M,p=O;break}ge=ge.sibling}if(!X){for(ge=O.child;ge;){if(ge===p){X=!0,p=O,w=M;break}if(ge===w){X=!0,w=O,p=M;break}ge=ge.sibling}if(!X)throw Error(i(189))}}if(p.alternate!==w)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?o:u}function C(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=C(o),u!==null)return u;o=o.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),H=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),we=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function Pe(o){return o===null||typeof o!="object"?null:(o=ye&&o[ye]||o["@@iterator"],typeof o=="function"?o:null)}var Ke=Symbol.for("react.client.reference");function ze(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Ke?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case L:return"Fragment";case z:return"Profiler";case B:return"StrictMode";case ne:return"Suspense";case re:return"SuspenseList";case he:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case I:return"Portal";case H:return o.displayName||"Context";case q:return(o._context.displayName||"Context")+".Consumer";case W:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ee:return u=o.displayName||null,u!==null?u:ze(o.type)||"Memo";case oe:u=o._payload,o=o._init;try{return ze(o(u))}catch{}}return null}var Je=Array.isArray,Ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},st=[],me=-1;function Ce(o){return{current:o}}function pe(o){0>me||(o.current=st[me],st[me]=null,me--)}function Q(o,u){me++,st[me]=o.current,o.current=u}var Ee=Ce(null),Ge=Ce(null),lt=Ce(null),We=Ce(null);function Nt(o,u){switch(Q(lt,u),Q(Ge,o),Q(Ee,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?pd(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=pd(u),o=Bs(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}pe(Ee),Q(Ee,o)}function At(){pe(Ee),pe(Ge),pe(lt)}function Mt(o){o.memoizedState!==null&&Q(We,o);var u=Ee.current,p=Bs(u,o.type);u!==p&&(Q(Ge,o),Q(Ee,p))}function Ut(o){Ge.current===o&&(pe(Ee),pe(Ge)),We.current===o&&(pe(We),ty._currentValue=ke)}var Pt,Rt;function vn(o){if(Pt===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);Pt=u&&u[1]||"",Rt=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pt+o+Rt}var er=!1;function $n(o,u){if(!o||er)return"";er=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(u){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(Et){var bt=Et}Reflect.construct(o,[],Ft)}else{try{Ft.call()}catch(Et){bt=Et}o.call(Ft.prototype)}}else{try{throw Error()}catch(Et){bt=Et}(Ft=o())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(Et){if(Et&&bt&&typeof Et.stack=="string")return[Et.stack,bt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=w.DetermineComponentFrameRoot(),X=O[0],ge=O[1];if(X&&ge){var Ze=X.split(`
`),gt=ge.split(`
`);for(M=w=0;w<Ze.length&&!Ze[w].includes("DetermineComponentFrameRoot");)w++;for(;M<gt.length&&!gt[M].includes("DetermineComponentFrameRoot");)M++;if(w===Ze.length||M===gt.length)for(w=Ze.length-1,M=gt.length-1;1<=w&&0<=M&&Ze[w]!==gt[M];)M--;for(;1<=w&&0<=M;w--,M--)if(Ze[w]!==gt[M]){if(w!==1||M!==1)do if(w--,M--,0>M||Ze[w]!==gt[M]){var Dt=`
`+Ze[w].replace(" at new "," at ");return o.displayName&&Dt.includes("<anonymous>")&&(Dt=Dt.replace("<anonymous>",o.displayName)),Dt}while(1<=w&&0<=M);break}}}finally{er=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?vn(p):""}function ir(o,u){switch(o.tag){case 26:case 27:case 5:return vn(o.type);case 16:return vn("Lazy");case 13:return o.child!==u&&u!==null?vn("Suspense Fallback"):vn("Suspense");case 19:return vn("SuspenseList");case 0:case 15:return $n(o.type,!1);case 11:return $n(o.type.render,!1);case 1:return $n(o.type,!0);case 31:return vn("Activity");default:return""}}function dt(o){try{var u="",p=null;do u+=ir(o,p),p=o,o=o.return;while(o);return u}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Xe=Object.prototype.hasOwnProperty,xe=e.unstable_scheduleCallback,Re=e.unstable_cancelCallback,Ve=e.unstable_shouldYield,Vt=e.unstable_requestPaint,Oe=e.unstable_now,Le=e.unstable_getCurrentPriorityLevel,Qe=e.unstable_ImmediatePriority,Tt=e.unstable_UserBlockingPriority,on=e.unstable_NormalPriority,Mn=e.unstable_LowPriority,Xn=e.unstable_IdlePriority,wr=e.log,Bi=e.unstable_setDisableYieldValue,Jr=null,Xr=null;function Ci(o){if(typeof wr=="function"&&Bi(o),Xr&&typeof Xr.setStrictMode=="function")try{Xr.setStrictMode(Jr,o)}catch{}}var Sr=Math.clz32?Math.clz32:Ks,ka=Math.log,qr=Math.LN2;function Ks(o){return o>>>=0,o===0?32:31-(ka(o)/qr|0)|0}var So=256,Eo=262144,qa=4194304;function da(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Co(o,u,p){var w=o.pendingLanes;if(w===0)return 0;var M=0,O=o.suspendedLanes,X=o.pingedLanes;o=o.warmLanes;var ge=w&134217727;return ge!==0?(w=ge&~O,w!==0?M=da(w):(X&=ge,X!==0?M=da(X):p||(p=ge&~o,p!==0&&(M=da(p))))):(ge=w&~O,ge!==0?M=da(ge):X!==0?M=da(X):p||(p=w&~o,p!==0&&(M=da(p)))),M===0?0:u!==0&&u!==M&&(u&O)===0&&(O=M&-M,p=u&-u,O>=p||O===32&&(p&4194048)!==0)?u:M}function Ra(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function ws(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $o(){var o=qa;return qa<<=1,(qa&62914560)===0&&(qa=4194304),o}function is(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function fr(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ti(o,u,p,w,M,O){var X=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var ge=o.entanglements,Ze=o.expirationTimes,gt=o.hiddenUpdates;for(p=X&~p;0<p;){var Dt=31-Sr(p),Ft=1<<Dt;ge[Dt]=0,Ze[Dt]=-1;var bt=gt[Dt];if(bt!==null)for(gt[Dt]=null,Dt=0;Dt<bt.length;Dt++){var Et=bt[Dt];Et!==null&&(Et.lane&=-536870913)}p&=~Ft}w!==0&&Fr(o,w,0),O!==0&&M===0&&o.tag!==0&&(o.suspendedLanes|=O&~(X&~u))}function Fr(o,u,p){o.pendingLanes|=u,o.suspendedLanes&=~u;var w=31-Sr(u);o.entangledLanes|=u,o.entanglements[w]=o.entanglements[w]|1073741824|p&261930}function vt(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var w=31-Sr(p),M=1<<w;M&u|o[w]&u&&(o[w]|=u),p&=~M}}function Yt(o,u){var p=u&-u;return p=(p&42)!==0?1:Ja(p),(p&(o.suspendedLanes|u))!==0?0:p}function Ja(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function eo(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function gi(){var o=De.p;return o!==0?o:(o=window.event,o===void 0?32:DS(o.type))}function Hr(o,u){var p=De.p;try{return De.p=o,u()}finally{De.p=p}}var Z=Math.random().toString(36).slice(2),Y="__reactFiber$"+Z,ie="__reactProps$"+Z,se="__reactContainer$"+Z,je="__reactEvents$"+Z,Ne="__reactListeners$"+Z,Ye="__reactHandles$"+Z,He="__reactResources$"+Z,Be="__reactMarker$"+Z;function nt(o){delete o[Y],delete o[ie],delete o[je],delete o[Ne],delete o[Ye]}function xt(o){var u=o[Y];if(u)return u;for(var p=o.parentNode;p;){if(u=p[se]||p[Y]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(o=gd(o);o!==null;){if(p=o[Y])return p;o=gd(o)}return u}o=p,p=o.parentNode}return null}function Ot(o){if(o=o[Y]||o[se]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function yt(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function It(o){var u=o[He];return u||(u=o[He]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Lt(o){o[Be]=!0}var en=new Set,dn={};function qt(o,u){Dn(o,u),Dn(o+"Capture",u)}function Dn(o,u){for(dn[o]=u,o=0;o<u.length;o++)en.add(u[o])}var qn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kn={},zn={};function Lr(o){return Xe.call(zn,o)?!0:Xe.call(kn,o)?!1:qn.test(o)?zn[o]=!0:(kn[o]=!0,!1)}function Bn(o,u,p){if(Lr(u))if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var w=u.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+p)}}function nr(o,u,p){if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+p)}}function pr(o,u,p,w){if(w===null)o.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(u,p,""+w)}}function Hn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Qi(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function lr(o,u,p){var w=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var M=w.get,O=w.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return M.call(this)},set:function(X){p=""+X,O.call(this,X)}}),Object.defineProperty(o,u,{enumerable:w.enumerable}),{getValue:function(){return p},setValue:function(X){p=""+X},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Kr(o){if(!o._valueTracker){var u=Qi(o)?"checked":"value";o._valueTracker=lr(o,u,""+o[u])}}function Jn(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var p=u.getValue(),w="";return o&&(w=Qi(o)?o.checked?"true":"false":o.value),o=w,o!==p?(u.setValue(o),!0):!1}function ii(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var aa=/[\n"\\]/g;function ki(o){return o.replace(aa,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function uo(o,u,p,w,M,O,X,ge){o.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?o.type=X:o.removeAttribute("type"),u!=null?X==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Hn(u)):o.value!==""+Hn(u)&&(o.value=""+Hn(u)):X!=="submit"&&X!=="reset"||o.removeAttribute("value"),u!=null?To(o,X,Hn(u)):p!=null?To(o,X,Hn(p)):w!=null&&o.removeAttribute("value"),M==null&&O!=null&&(o.defaultChecked=!!O),M!=null&&(o.checked=M&&typeof M!="function"&&typeof M!="symbol"),ge!=null&&typeof ge!="function"&&typeof ge!="symbol"&&typeof ge!="boolean"?o.name=""+Hn(ge):o.removeAttribute("name")}function Ji(o,u,p,w,M,O,X,ge){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(o.type=O),u!=null||p!=null){if(!(O!=="submit"&&O!=="reset"||u!=null)){Kr(o);return}p=p!=null?""+Hn(p):"",u=u!=null?""+Hn(u):p,ge||u===o.value||(o.value=u),o.defaultValue=u}w=w??M,w=typeof w!="function"&&typeof w!="symbol"&&!!w,o.checked=ge?o.checked:!!w,o.defaultChecked=!!w,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(o.name=X),Kr(o)}function To(o,u,p){u==="number"&&ii(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function ko(o,u,p,w){if(o=o.options,u){u={};for(var M=0;M<p.length;M++)u["$"+p[M]]=!0;for(p=0;p<o.length;p++)M=u.hasOwnProperty("$"+o[p].value),o[p].selected!==M&&(o[p].selected=M),M&&w&&(o[p].defaultSelected=!0)}else{for(p=""+Hn(p),u=null,M=0;M<o.length;M++){if(o[M].value===p){o[M].selected=!0,w&&(o[M].defaultSelected=!0);return}u!==null||o[M].disabled||(u=o[M])}u!==null&&(u.selected=!0)}}function ce(o,u,p){if(u!=null&&(u=""+Hn(u),u!==o.value&&(o.value=u),p==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=p!=null?""+Hn(p):""}function Se(o,u,p,w){if(u==null){if(w!=null){if(p!=null)throw Error(i(92));if(Je(w)){if(1<w.length)throw Error(i(93));w=w[0]}p=w}p==null&&(p=""),u=p}p=Hn(u),o.defaultValue=p,w=o.textContent,w===p&&w!==""&&w!==null&&(o.value=w),Kr(o)}function qe(o,u){if(u){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=u;return}}o.textContent=u}var pt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ht(o,u,p){var w=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":w?o.setProperty(u,p):typeof p!="number"||p===0||pt.has(u)?u==="float"?o.cssFloat=p:o[u]=(""+p).trim():o[u]=p+"px"}function hn(o,u,p){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||u!=null&&u.hasOwnProperty(w)||(w.indexOf("--")===0?o.setProperty(w,""):w==="float"?o.cssFloat="":o[w]="");for(var M in u)w=u[M],u.hasOwnProperty(M)&&p[M]!==w&&Ht(o,M,w)}else for(var O in u)u.hasOwnProperty(O)&&Ht(o,O,u[O])}function Pn(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ea(o){return oa.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function $i(){}var Rd=null;function fl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var pl=null,Ss=null;function Au(o){var u=Ot(o);if(u&&(o=u.stateNode)){var p=o[ie]||null;e:switch(o=u.stateNode,u.type){case"input":if(uo(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+ki(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var w=p[u];if(w!==o&&w.form===o.form){var M=w[ie]||null;if(!M)throw Error(i(90));uo(w,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(u=0;u<p.length;u++)w=p[u],w.form===o.form&&Jn(w)}break e;case"textarea":ce(o,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&ko(o,!!p.multiple,u,!1)}}}var ml=!1;function jc(o,u,p){if(ml)return o(u,p);ml=!0;try{var w=o(u);return w}finally{if(ml=!1,(pl!==null||Ss!==null)&&(Ir(),pl&&(u=pl,o=Ss,Ss=pl=null,Au(u),o)))for(u=0;u<o.length;u++)Au(o[u])}}function gl(o,u){var p=o.stateNode;if(p===null)return null;var w=p[ie]||null;if(w===null)return null;p=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(o=o.type,w=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!w;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(i(231,u,typeof p));return p}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zl=!1;if(jo)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){zl=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{zl=!1}var ei=null,yl=null,Ao=null;function Ys(){if(Ao)return Ao;var o,u=yl,p=u.length,w,M="value"in ei?ei.value:ei.textContent,O=M.length;for(o=0;o<p&&u[o]===M[o];o++);var X=p-o;for(w=1;w<=X&&u[p-w]===M[O-w];w++);return Ao=M.slice(o,1<w?1-w:void 0)}function Es(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Cs(){return!0}function vl(){return!1}function ha(o){function u(p,w,M,O,X){this._reactName=p,this._targetInst=M,this.type=w,this.nativeEvent=O,this.target=X,this.currentTarget=null;for(var ge in o)o.hasOwnProperty(ge)&&(p=o[ge],this[ge]=p?p(O):O[ge]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Cs:vl,this.isPropagationStopped=vl,this}return E(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),u}var xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=ha(xl),Ts=E({},xl,{view:0,detail:0}),sg=ha(Ts),Qh,Jh,Mu,Ld=E({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Mu&&(Mu&&o.type==="mousemove"?(Qh=o.screenX-Mu.screenX,Jh=o.screenY-Mu.screenY):Jh=Qh=0,Mu=o),Qh)},movementY:function(o){return"movementY"in o?o.movementY:Jh}}),hp=ha(Ld),Bl=E({},Ld,{dataTransfer:0}),Fl=ha(Bl),Nc=E({},Ts,{relatedTarget:0}),zd=ha(Nc),fp=E({},xl,{animationName:0,elapsedTime:0,pseudoElement:0}),ef=ha(fp),Ul=E({},xl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),tf=ha(Ul),Mc=E({},xl,{data:0}),Vl=ha(Mc),pp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ui={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},di={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ql(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=di[o])?!!u[o]:!1}function Bd(){return ql}var Dc=E({},Ts,{key:function(o){if(o.key){var u=pp[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Es(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?ui[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bd,charCode:function(o){return o.type==="keypress"?Es(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Es(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),mp=ha(Dc),lg=E({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=ha(lg),gp=E({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bd}),Du=ha(gp),Ud=E({},xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vd=ha(Ud),Pc=E({},Ld,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ic=ha(Pc),qd=E({},xl,{newState:0,oldState:0}),Oc=ha(qd),as=[9,13,27,32],Hd=jo&&"CompositionEvent"in window,bl=null;jo&&"documentMode"in document&&(bl=document.documentMode);var yp=jo&&"TextEvent"in window&&!bl,Hl=jo&&(!Hd||bl&&8<bl&&11>=bl),Pu=" ",Iu=!1;function nf(o,u){switch(o){case"keyup":return as.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ou(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Rc=!1;function Ru(o,u){switch(o){case"compositionend":return Ou(u);case"keypress":return u.which!==32?null:(Iu=!0,Pu);case"textInput":return o=u.data,o===Pu&&Iu?null:o;default:return null}}function $d(o,u){if(Rc)return o==="compositionend"||!Hd&&nf(o,u)?(o=Ys(),Ao=yl=ei=null,Rc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Hl&&u.locale!=="ko"?null:u.data;default:return null}}var vp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rf(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!vp[o.type]:u==="textarea"}function Lu(o,u,p,w){pl?Ss?Ss.push(w):Ss=[w]:pl=w,u=Pl(u,"onChange"),0<u.length&&(p=new Nu("onChange","change",null,p,w),o.push({event:p,listeners:u}))}var $l=null,Gl=null;function af(o){ld(o,0)}function zu(o){var u=yt(o);if(Jn(u))return o}function of(o,u){if(o==="change")return u}var Zl=!1;if(jo){var Gd;if(jo){var Bu="oninput"in document;if(!Bu){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),Bu=typeof Zd.oninput=="function"}Gd=Bu}else Gd=!1;Zl=Gd&&(!document.documentMode||9<document.documentMode)}function Xd(){$l&&($l.detachEvent("onpropertychange",ho),Gl=$l=null)}function ho(o){if(o.propertyName==="value"&&zu(Gl)){var u=[];Lu(u,Gl,o,fl(o)),jc(af,u)}}function cg(o,u,p){o==="focusin"?(Xd(),$l=u,Gl=p,$l.attachEvent("onpropertychange",ho)):o==="focusout"&&Xd()}function Xl(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return zu(Gl)}function xp(o,u){if(o==="click")return zu(u)}function Lc(o,u){if(o==="input"||o==="change")return zu(u)}function Fu(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var fo=typeof Object.is=="function"?Object.is:Fu;function ai(o,u){if(fo(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),w=Object.keys(u);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var M=p[w];if(!Xe.call(u,M)||!fo(o[M],u[M]))return!1}return!0}function Kd(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Yd(o,u){var p=Kd(o);o=0;for(var w;p;){if(p.nodeType===3){if(w=o+p.textContent.length,o<=u&&w>=u)return{node:p,offset:u-o};o=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Kd(p)}}function _l(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?_l(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function xr(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=ii(o.document);u instanceof o.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)o=u.contentWindow;else break;u=ii(o.document)}return u}function oi(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var wl=jo&&"documentMode"in document&&11>=document.documentMode,sa=null,fn=null,Kl=null,Ha=!1;function No(o,u,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Ha||sa==null||sa!==ii(w)||(w=sa,"selectionStart"in w&&oi(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Kl&&ai(Kl,w)||(Kl=w,w=Pl(fn,"onSelect"),0<w.length&&(u=new Nu("onSelect","select",null,u,p),o.push({event:u,listeners:w}),u.target=sa)))}function Go(o,u){var p={};return p[o.toLowerCase()]=u.toLowerCase(),p["Webkit"+o]="webkit"+u,p["Moz"+o]="moz"+u,p}var ji={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionrun:Go("Transition","TransitionRun"),transitionstart:Go("Transition","TransitionStart"),transitioncancel:Go("Transition","TransitionCancel"),transitionend:Go("Transition","TransitionEnd")},zc={},$t={};jo&&($t=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function Mo(o){if(zc[o])return zc[o];if(!ji[o])return o;var u=ji[o],p;for(p in u)if(u.hasOwnProperty(p)&&p in $t)return zc[o]=u[p];return o}var bp=Mo("animationend"),Do=Mo("animationiteration"),sf=Mo("animationstart"),po=Mo("transitionrun"),_p=Mo("transitionstart"),ug=Mo("transitioncancel"),Zo=Mo("transitionend"),ks=new Map,Ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ws.push("scrollEnd");function Po(o,u){ks.set(o,u),qt(u,[o])}var ja=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ya=[],Xo=0,Uu=0;function Bc(){for(var o=Xo,u=Uu=Xo=0;u<o;){var p=ya[u];ya[u++]=null;var w=ya[u];ya[u++]=null;var M=ya[u];ya[u++]=null;var O=ya[u];if(ya[u++]=null,w!==null&&M!==null){var X=w.pending;X===null?M.next=M:(M.next=X.next,X.next=M),w.pending=M}O!==0&&ti(p,M,O)}}function Sl(o,u,p,w){ya[Xo++]=o,ya[Xo++]=u,ya[Xo++]=p,ya[Xo++]=w,Uu|=w,o.lanes|=w,o=o.alternate,o!==null&&(o.lanes|=w)}function Wd(o,u,p,w){return Sl(o,u,p,w),os(o)}function Pi(o,u){return Sl(o,null,null,u),os(o)}function ti(o,u,p){o.lanes|=p;var w=o.alternate;w!==null&&(w.lanes|=p);for(var M=!1,O=o.return;O!==null;)O.childLanes|=p,w=O.alternate,w!==null&&(w.childLanes|=p),O.tag===22&&(o=O.stateNode,o===null||o._visibility&1||(M=!0)),o=O,O=O.return;return o.tag===3?(O=o.stateNode,M&&u!==null&&(M=31-Sr(p),o=O.hiddenUpdates,w=o[M],w===null?o[M]=[u]:w.push(u),u.lane=p|536870912),O):null}function os(o){if(50<Ct)throw Ct=0,Jt=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var ss={};function mo(o,u,p,w){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $a(o,u,p,w){return new mo(o,u,p,w)}function Fc(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Io(o,u){var p=o.alternate;return p===null?(p=$a(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function to(o,u){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,u=p.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function ls(o,u,p,w,M,O){var X=0;if(w=o,typeof o=="function")Fc(o)&&(X=1);else if(typeof o=="string")X=zP(o,p,Ee.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case he:return o=$a(31,p,u,M),o.elementType=he,o.lanes=O,o;case L:return pn(p.children,M,O,u);case B:X=8,M|=24;break;case z:return o=$a(12,p,u,M|2),o.elementType=z,o.lanes=O,o;case ne:return o=$a(13,p,u,M),o.elementType=ne,o.lanes=O,o;case re:return o=$a(19,p,u,M),o.elementType=re,o.lanes=O,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case H:X=10;break e;case q:X=9;break e;case W:X=11;break e;case ee:X=14;break e;case oe:X=16,w=null;break e}X=29,p=Error(i(130,o===null?"null":typeof o,"")),w=null}return u=$a(X,p,u,M),u.elementType=o,u.type=w,u.lanes=O,u}function pn(o,u,p,w){return o=$a(7,o,w,u),o.lanes=p,o}function _n(o,u,p){return o=$a(6,o,null,u),o.lanes=p,o}function go(o){var u=$a(18,null,null,0);return u.stateNode=o,u}function El(o,u,p){return u=$a(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Uc=new WeakMap;function Ii(o,u){if(typeof o=="object"&&o!==null){var p=Uc.get(o);return p!==void 0?p:(u={value:o,source:u,stack:dt(u)},Uc.set(o,u),u)}return{value:o,source:u,stack:dt(u)}}var Ga=[],f=0,y=null,m=0,b=[],j=0,P=null,F=1,U="";function $(o,u){Ga[f++]=m,Ga[f++]=y,y=o,m=u}function J(o,u,p){b[j++]=F,b[j++]=U,b[j++]=P,P=o;var w=F;o=U;var M=32-Sr(w)-1;w&=~(1<<M),p+=1;var O=32-Sr(u)+M;if(30<O){var X=M-M%5;O=(w&(1<<X)-1).toString(32),w>>=X,M-=X,F=1<<32-Sr(u)+M|p<<M|w,U=O+o}else F=1<<O|p<<M|w,U=o}function te(o){o.return!==null&&($(o,1),J(o,1,0))}function ue(o){for(;o===y;)y=Ga[--f],Ga[f]=null,m=Ga[--f],Ga[f]=null;for(;o===P;)P=b[--j],b[j]=null,U=b[--j],b[j]=null,F=b[--j],b[j]=null}function Te(o,u){b[j++]=F,b[j++]=U,b[j++]=P,F=u.id,U=u.overflow,P=o}var be=null,_e=null,ve=!1,$e=null,Fe=!1,rt=Error(i(519));function et(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wt(Ii(u,o)),rt}function it(o){var u=o.stateNode,p=o.type,w=o.memoizedProps;switch(u[Y]=o,u[ie]=w,p){case"dialog":Cr("cancel",u),Cr("close",u);break;case"iframe":case"object":case"embed":Cr("load",u);break;case"video":case"audio":for(p=0;p<au.length;p++)Cr(au[p],u);break;case"source":Cr("error",u);break;case"img":case"image":case"link":Cr("error",u),Cr("load",u);break;case"details":Cr("toggle",u);break;case"input":Cr("invalid",u),Ji(u,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Cr("invalid",u);break;case"textarea":Cr("invalid",u),Se(u,w.value,w.defaultValue,w.children)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||w.suppressHydrationWarning===!0||am(u.textContent,p)?(w.popover!=null&&(Cr("beforetoggle",u),Cr("toggle",u)),w.onScroll!=null&&Cr("scroll",u),w.onScrollEnd!=null&&Cr("scrollend",u),w.onClick!=null&&(u.onclick=$i),u=!0):u=!1,u||et(o,!0)}function ft(o){for(be=o.return;be;)switch(be.tag){case 5:case 31:case 13:Fe=!1;return;case 27:case 3:Fe=!0;return;default:be=be.return}}function _t(o){if(o!==be)return!1;if(!ve)return ft(o),ve=!0,!1;var u=o.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||so(o.type,o.memoizedProps)),p=!p),p&&_e&&et(o),ft(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));_e=xh(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));_e=xh(o)}else u===27?(u=_e,uc(o.type)?(o=md,md=null,_e=o):_e=u):_e=be?wo(o.stateNode.nextSibling):null;return!0}function kt(){_e=be=null,ve=!1}function an(){var o=$e;return o!==null&&(G===null?G=o:G.push.apply(G,o),$e=null),o}function Wt(o){$e===null?$e=[o]:$e.push(o)}var un=Ce(null),Zt=null,xn=null;function Qt(o,u,p){Q(un,u._currentValue),u._currentValue=p}function jn(o){o._currentValue=un.current,pe(un)}function Gn(o,u,p){for(;o!==null;){var w=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),o===p)break;o=o.return}}function Fn(o,u,p,w){var M=o.child;for(M!==null&&(M.return=o);M!==null;){var O=M.dependencies;if(O!==null){var X=M.child;O=O.firstContext;e:for(;O!==null;){var ge=O;O=M;for(var Ze=0;Ze<u.length;Ze++)if(ge.context===u[Ze]){O.lanes|=p,ge=O.alternate,ge!==null&&(ge.lanes|=p),Gn(O.return,p,o),w||(X=null);break e}O=ge.next}}else if(M.tag===18){if(X=M.return,X===null)throw Error(i(341));X.lanes|=p,O=X.alternate,O!==null&&(O.lanes|=p),Gn(X,p,o),X=null}else X=M.child;if(X!==null)X.return=M;else for(X=M;X!==null;){if(X===o){X=null;break}if(M=X.sibling,M!==null){M.return=X.return,X=M;break}X=X.return}M=X}}function Rn(o,u,p,w){o=null;for(var M=u,O=!1;M!==null;){if(!O){if((M.flags&524288)!==0)O=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var X=M.alternate;if(X===null)throw Error(i(387));if(X=X.memoizedProps,X!==null){var ge=M.type;fo(M.pendingProps.value,X.value)||(o!==null?o.push(ge):o=[ge])}}else if(M===We.current){if(X=M.alternate,X===null)throw Error(i(387));X.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(o!==null?o.push(ty):o=[ty])}M=M.return}o!==null&&Fn(u,o,p,w),u.flags|=262144}function Mr(o){for(o=o.firstContext;o!==null;){if(!fo(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Zn(o){Zt=o,xn=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function wn(o){return Er(Zt,o)}function yi(o,u){return Zt===null&&Zn(o),Er(o,u)}function Er(o,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},xn===null){if(o===null)throw Error(i(308));xn=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else xn=xn.next=u;return p}var tr=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(p,w){o.push(w)}};this.abort=function(){u.aborted=!0,o.forEach(function(p){return p()})}},fa=e.unstable_scheduleCallback,Gi=e.unstable_NormalPriority,si={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Za(){return{controller:new tr,data:new Map,refCount:0}}function Oo(o){o.refCount--,o.refCount===0&&fa(Gi,function(){o.controller.abort()})}var cs=null,la=0,js=0,Ko=null;function Cl(o,u){if(cs===null){var p=cs=[];la=0,js=lc(),Ko={status:"pending",value:void 0,then:function(w){p.push(w)}}}return la++,u.then(yo,yo),u}function yo(){if(--la===0&&cs!==null){Ko!==null&&(Ko.status="fulfilled");var o=cs;cs=null,js=0,Ko=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function Qd(o,u){var p=[],w={status:"pending",value:null,reason:null,then:function(M){p.push(M)}};return o.then(function(){w.status="fulfilled",w.value=u;for(var M=0;M<p.length;M++)(0,p[M])(u)},function(M){for(w.status="rejected",w.reason=M,M=0;M<p.length;M++)(0,p[M])(void 0)}),w}var As=Ae.S;Ae.S=function(o,u){de=Oe(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&Cl(o,u),As!==null&&As(o,u)};var Yo=Ce(null);function Vc(){var o=Yo.current;return o!==null?o:ni.pooledCache}function Qs(o,u){u===null?Q(Yo,Yo.current):Q(Yo,u.pool)}function Tl(){var o=Vc();return o===null?null:{parent:si._currentValue,pool:o}}var Ns=Error(i(460)),li=Error(i(474)),kr=Error(i(542)),zr={then:function(){}};function La(o){return o=o.status,o==="fulfilled"||o==="rejected"}function no(o,u,p){switch(p=o[p],p===void 0?o.push(u):p!==u&&(u.then($i,$i),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Ro(o),o;default:if(typeof u.status=="string")u.then($i,$i);else{if(o=ni,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(w){if(u.status==="pending"){var M=u;M.status="fulfilled",M.value=w}},function(w){if(u.status==="pending"){var M=u;M.status="rejected",M.reason=w}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Ro(o),o}throw za=u,Ns}}function va(o){try{var u=o._init;return u(o._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(za=p,Ns):p}}var za=null;function xa(){if(za===null)throw Error(i(459));var o=za;return za=null,o}function Ro(o){if(o===Ns||o===kr)throw Error(i(483))}var Js=null,Yl=0;function qc(o){var u=Yl;return Yl+=1,Js===null&&(Js=[]),no(Js,o,u)}function vo(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Wl(o,u){throw u.$$typeof===A?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function lf(o){function u(ut,tt){if(o){var mt=ut.deletions;mt===null?(ut.deletions=[tt],ut.flags|=16):mt.push(tt)}}function p(ut,tt){if(!o)return null;for(;tt!==null;)u(ut,tt),tt=tt.sibling;return null}function w(ut){for(var tt=new Map;ut!==null;)ut.key!==null?tt.set(ut.key,ut):tt.set(ut.index,ut),ut=ut.sibling;return tt}function M(ut,tt){return ut=Io(ut,tt),ut.index=0,ut.sibling=null,ut}function O(ut,tt,mt){return ut.index=mt,o?(mt=ut.alternate,mt!==null?(mt=mt.index,mt<tt?(ut.flags|=67108866,tt):mt):(ut.flags|=67108866,tt)):(ut.flags|=1048576,tt)}function X(ut){return o&&ut.alternate===null&&(ut.flags|=67108866),ut}function ge(ut,tt,mt,zt){return tt===null||tt.tag!==6?(tt=_n(mt,ut.mode,zt),tt.return=ut,tt):(tt=M(tt,mt),tt.return=ut,tt)}function Ze(ut,tt,mt,zt){var Qn=mt.type;return Qn===L?Dt(ut,tt,mt.props.children,zt,mt.key):tt!==null&&(tt.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===oe&&va(Qn)===tt.type)?(tt=M(tt,mt.props),vo(tt,mt),tt.return=ut,tt):(tt=ls(mt.type,mt.key,mt.props,null,ut.mode,zt),vo(tt,mt),tt.return=ut,tt)}function gt(ut,tt,mt,zt){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==mt.containerInfo||tt.stateNode.implementation!==mt.implementation?(tt=El(mt,ut.mode,zt),tt.return=ut,tt):(tt=M(tt,mt.children||[]),tt.return=ut,tt)}function Dt(ut,tt,mt,zt,Qn){return tt===null||tt.tag!==7?(tt=pn(mt,ut.mode,zt,Qn),tt.return=ut,tt):(tt=M(tt,mt),tt.return=ut,tt)}function Ft(ut,tt,mt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=_n(""+tt,ut.mode,mt),tt.return=ut,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case D:return mt=ls(tt.type,tt.key,tt.props,null,ut.mode,mt),vo(mt,tt),mt.return=ut,mt;case I:return tt=El(tt,ut.mode,mt),tt.return=ut,tt;case oe:return tt=va(tt),Ft(ut,tt,mt)}if(Je(tt)||Pe(tt))return tt=pn(tt,ut.mode,mt,null),tt.return=ut,tt;if(typeof tt.then=="function")return Ft(ut,qc(tt),mt);if(tt.$$typeof===H)return Ft(ut,yi(ut,tt),mt);Wl(ut,tt)}return null}function bt(ut,tt,mt,zt){var Qn=tt!==null?tt.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Qn!==null?null:ge(ut,tt,""+mt,zt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case D:return mt.key===Qn?Ze(ut,tt,mt,zt):null;case I:return mt.key===Qn?gt(ut,tt,mt,zt):null;case oe:return mt=va(mt),bt(ut,tt,mt,zt)}if(Je(mt)||Pe(mt))return Qn!==null?null:Dt(ut,tt,mt,zt,null);if(typeof mt.then=="function")return bt(ut,tt,qc(mt),zt);if(mt.$$typeof===H)return bt(ut,tt,yi(ut,mt),zt);Wl(ut,mt)}return null}function Et(ut,tt,mt,zt,Qn){if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return ut=ut.get(mt)||null,ge(tt,ut,""+zt,Qn);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case D:return ut=ut.get(zt.key===null?mt:zt.key)||null,Ze(tt,ut,zt,Qn);case I:return ut=ut.get(zt.key===null?mt:zt.key)||null,gt(tt,ut,zt,Qn);case oe:return zt=va(zt),Et(ut,tt,mt,zt,Qn)}if(Je(zt)||Pe(zt))return ut=ut.get(mt)||null,Dt(tt,ut,zt,Qn,null);if(typeof zt.then=="function")return Et(ut,tt,mt,qc(zt),Qn);if(zt.$$typeof===H)return Et(ut,tt,mt,yi(tt,zt),Qn);Wl(tt,zt)}return null}function Nn(ut,tt,mt,zt){for(var Qn=null,pi=null,Un=tt,jr=tt=0,Zr=null;Un!==null&&jr<mt.length;jr++){Un.index>jr?(Zr=Un,Un=null):Zr=Un.sibling;var mi=bt(ut,Un,mt[jr],zt);if(mi===null){Un===null&&(Un=Zr);break}o&&Un&&mi.alternate===null&&u(ut,Un),tt=O(mi,tt,jr),pi===null?Qn=mi:pi.sibling=mi,pi=mi,Un=Zr}if(jr===mt.length)return p(ut,Un),ve&&$(ut,jr),Qn;if(Un===null){for(;jr<mt.length;jr++)Un=Ft(ut,mt[jr],zt),Un!==null&&(tt=O(Un,tt,jr),pi===null?Qn=Un:pi.sibling=Un,pi=Un);return ve&&$(ut,jr),Qn}for(Un=w(Un);jr<mt.length;jr++)Zr=Et(Un,ut,jr,mt[jr],zt),Zr!==null&&(o&&Zr.alternate!==null&&Un.delete(Zr.key===null?jr:Zr.key),tt=O(Zr,tt,jr),pi===null?Qn=Zr:pi.sibling=Zr,pi=Zr);return o&&Un.forEach(function(jh){return u(ut,jh)}),ve&&$(ut,jr),Qn}function ar(ut,tt,mt,zt){if(mt==null)throw Error(i(151));for(var Qn=null,pi=null,Un=tt,jr=tt=0,Zr=null,mi=mt.next();Un!==null&&!mi.done;jr++,mi=mt.next()){Un.index>jr?(Zr=Un,Un=null):Zr=Un.sibling;var jh=bt(ut,Un,mi.value,zt);if(jh===null){Un===null&&(Un=Zr);break}o&&Un&&jh.alternate===null&&u(ut,Un),tt=O(jh,tt,jr),pi===null?Qn=jh:pi.sibling=jh,pi=jh,Un=Zr}if(mi.done)return p(ut,Un),ve&&$(ut,jr),Qn;if(Un===null){for(;!mi.done;jr++,mi=mt.next())mi=Ft(ut,mi.value,zt),mi!==null&&(tt=O(mi,tt,jr),pi===null?Qn=mi:pi.sibling=mi,pi=mi);return ve&&$(ut,jr),Qn}for(Un=w(Un);!mi.done;jr++,mi=mt.next())mi=Et(Un,ut,jr,mi.value,zt),mi!==null&&(o&&mi.alternate!==null&&Un.delete(mi.key===null?jr:mi.key),tt=O(mi,tt,jr),pi===null?Qn=mi:pi.sibling=mi,pi=mi);return o&&Un.forEach(function(KP){return u(ut,KP)}),ve&&$(ut,jr),Qn}function qi(ut,tt,mt,zt){if(typeof mt=="object"&&mt!==null&&mt.type===L&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case D:e:{for(var Qn=mt.key;tt!==null;){if(tt.key===Qn){if(Qn=mt.type,Qn===L){if(tt.tag===7){p(ut,tt.sibling),zt=M(tt,mt.props.children),zt.return=ut,ut=zt;break e}}else if(tt.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===oe&&va(Qn)===tt.type){p(ut,tt.sibling),zt=M(tt,mt.props),vo(zt,mt),zt.return=ut,ut=zt;break e}p(ut,tt);break}else u(ut,tt);tt=tt.sibling}mt.type===L?(zt=pn(mt.props.children,ut.mode,zt,mt.key),zt.return=ut,ut=zt):(zt=ls(mt.type,mt.key,mt.props,null,ut.mode,zt),vo(zt,mt),zt.return=ut,ut=zt)}return X(ut);case I:e:{for(Qn=mt.key;tt!==null;){if(tt.key===Qn)if(tt.tag===4&&tt.stateNode.containerInfo===mt.containerInfo&&tt.stateNode.implementation===mt.implementation){p(ut,tt.sibling),zt=M(tt,mt.children||[]),zt.return=ut,ut=zt;break e}else{p(ut,tt);break}else u(ut,tt);tt=tt.sibling}zt=El(mt,ut.mode,zt),zt.return=ut,ut=zt}return X(ut);case oe:return mt=va(mt),qi(ut,tt,mt,zt)}if(Je(mt))return Nn(ut,tt,mt,zt);if(Pe(mt)){if(Qn=Pe(mt),typeof Qn!="function")throw Error(i(150));return mt=Qn.call(mt),ar(ut,tt,mt,zt)}if(typeof mt.then=="function")return qi(ut,tt,qc(mt),zt);if(mt.$$typeof===H)return qi(ut,tt,yi(ut,mt),zt);Wl(ut,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint"?(mt=""+mt,tt!==null&&tt.tag===6?(p(ut,tt.sibling),zt=M(tt,mt),zt.return=ut,ut=zt):(p(ut,tt),zt=_n(mt,ut.mode,zt),zt.return=ut,ut=zt),X(ut)):p(ut,tt)}return function(ut,tt,mt,zt){try{Yl=0;var Qn=qi(ut,tt,mt,zt);return Js=null,Qn}catch(Un){if(Un===Ns||Un===kr)throw Un;var pi=$a(29,Un,null,ut.mode);return pi.lanes=zt,pi.return=ut,pi}finally{}}}var xo=lf(!0),dg=lf(!1),Hc=!1;function wp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hg(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function kl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function $c(o,u,p){var w=o.updateQueue;if(w===null)return null;if(w=w.shared,(Wr&2)!==0){var M=w.pending;return M===null?u.next=u:(u.next=M.next,M.next=u),w.pending=u,u=os(o),ti(o,null,p),u}return Sl(o,w,u,p),os(o)}function Vu(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var w=u.lanes;w&=o.pendingLanes,p|=w,u.lanes=p,vt(o,p)}}function Sp(o,u){var p=o.updateQueue,w=o.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var M=null,O=null;if(p=p.firstBaseUpdate,p!==null){do{var X={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};O===null?M=O=X:O=O.next=X,p=p.next}while(p!==null);O===null?M=O=u:O=O.next=u}else M=O=u;p={baseState:w.baseState,firstBaseUpdate:M,lastBaseUpdate:O,shared:w.shared,callbacks:w.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}var Ep=!1;function jl(){if(Ep){var o=Ko;if(o!==null)throw o}}function cf(o,u,p,w){Ep=!1;var M=o.updateQueue;Hc=!1;var O=M.firstBaseUpdate,X=M.lastBaseUpdate,ge=M.shared.pending;if(ge!==null){M.shared.pending=null;var Ze=ge,gt=Ze.next;Ze.next=null,X===null?O=gt:X.next=gt,X=Ze;var Dt=o.alternate;Dt!==null&&(Dt=Dt.updateQueue,ge=Dt.lastBaseUpdate,ge!==X&&(ge===null?Dt.firstBaseUpdate=gt:ge.next=gt,Dt.lastBaseUpdate=Ze))}if(O!==null){var Ft=M.baseState;X=0,Dt=gt=Ze=null,ge=O;do{var bt=ge.lane&-536870913,Et=bt!==ge.lane;if(Et?(Pr&bt)===bt:(w&bt)===bt){bt!==0&&bt===js&&(Ep=!0),Dt!==null&&(Dt=Dt.next={lane:0,tag:ge.tag,payload:ge.payload,callback:null,next:null});e:{var Nn=o,ar=ge;bt=u;var qi=p;switch(ar.tag){case 1:if(Nn=ar.payload,typeof Nn=="function"){Ft=Nn.call(qi,Ft,bt);break e}Ft=Nn;break e;case 3:Nn.flags=Nn.flags&-65537|128;case 0:if(Nn=ar.payload,bt=typeof Nn=="function"?Nn.call(qi,Ft,bt):Nn,bt==null)break e;Ft=E({},Ft,bt);break e;case 2:Hc=!0}}bt=ge.callback,bt!==null&&(o.flags|=64,Et&&(o.flags|=8192),Et=M.callbacks,Et===null?M.callbacks=[bt]:Et.push(bt))}else Et={lane:bt,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},Dt===null?(gt=Dt=Et,Ze=Ft):Dt=Dt.next=Et,X|=bt;if(ge=ge.next,ge===null){if(ge=M.shared.pending,ge===null)break;Et=ge,ge=Et.next,Et.next=null,M.lastBaseUpdate=Et,M.shared.pending=null}}while(!0);Dt===null&&(Ze=Ft),M.baseState=Ze,M.firstBaseUpdate=gt,M.lastBaseUpdate=Dt,O===null&&(M.shared.lanes=0),v|=X,o.lanes=X,o.memoizedState=Ft}}function Jd(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function uf(o,u){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Jd(p[o],u)}var Ql=Ce(null),Cp=Ce(0);function Nv(o,u){o=s,Q(Cp,o),Q(Ql,u),s=o|u.baseLanes}function us(){Q(Cp,s),Q(Ql,Ql.current)}function eh(){s=Cp.current,pe(Ql),pe(Cp)}var bo=Ce(null),Ms=null;function Jl(o){var u=o.alternate;Q(Oi,Oi.current&1),Q(bo,o),Ms===null&&(u===null||Ql.current!==null||u.memoizedState!==null)&&(Ms=o)}function Tp(o){Q(Oi,Oi.current),Q(bo,o),Ms===null&&(Ms=o)}function kp(o){o.tag===22?(Q(Oi,Oi.current),Q(bo,o),Ms===null&&(Ms=o)):ec()}function ec(){Q(Oi,Oi.current),Q(bo,bo.current)}function Lo(o){pe(bo),Ms===o&&(Ms=null),pe(Oi)}var Oi=Ce(0);function Ba(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||cm(p)||Pf(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var tc=0,yr=null,Ai=null,Aa=null,jp=!1,qu=!1,nc=!1,Ap=0,Gc=0,Hu=null,Zc=0;function Fi(){throw Error(i(321))}function fg(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!fo(o[p],u[p]))return!1;return!0}function pg(o,u,p,w,M,O){return tc=O,yr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Ae.H=o===null||o.memoizedState===null?hf:Yr,nc=!1,O=p(w,M),nc=!1,qu&&(O=Dv(u,p,w,M)),Mv(o),O}function Mv(o){Ae.H=sh;var u=Ai!==null&&Ai.next!==null;if(tc=0,Aa=Ai=yr=null,jp=!1,Gc=0,Hu=null,u)throw Error(i(300));o===null||Na||(o=o.dependencies,o!==null&&Mr(o)&&(Na=!0))}function Dv(o,u,p,w){yr=o;var M=0;do{if(qu&&(Hu=null),Gc=0,qu=!1,25<=M)throw Error(i(301));if(M+=1,Aa=Ai=null,o.updateQueue!=null){var O=o.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Ae.H=Mg,O=u(p,w)}while(qu);return O}function Zb(){var o=Ae.H,u=o.useState()[0];return u=typeof u.then=="function"?Ri(u):u,o=o.useState()[0],(Ai!==null?Ai.memoizedState:null)!==o&&(yr.flags|=1024),u}function mg(){var o=Ap!==0;return Ap=0,o}function gg(o,u,p){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~p}function df(o){if(jp){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}jp=!1}tc=0,Aa=Ai=yr=null,qu=!1,Gc=Ap=0,Hu=null}function zo(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Aa===null?yr.memoizedState=Aa=o:Aa=Aa.next=o,Aa}function Ui(){if(Ai===null){var o=yr.alternate;o=o!==null?o.memoizedState:null}else o=Ai.next;var u=Aa===null?yr.memoizedState:Aa.next;if(u!==null)Aa=u,Ai=o;else{if(o===null)throw yr.alternate===null?Error(i(467)):Error(i(310));Ai=o,o={memoizedState:Ai.memoizedState,baseState:Ai.baseState,baseQueue:Ai.baseQueue,queue:Ai.queue,next:null},Aa===null?yr.memoizedState=Aa=o:Aa=Aa.next=o}return Aa}function Np(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ri(o){var u=Gc;return Gc+=1,Hu===null&&(Hu=[]),o=no(Hu,o,u),u=yr,(Aa===null?u.memoizedState:Aa.next)===null&&(u=u.alternate,Ae.H=u===null||u.memoizedState===null?hf:Yr),o}function $u(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ri(o);if(o.$$typeof===H)return wn(o)}throw Error(i(438,String(o)))}function Mp(o){var u=null,p=yr.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var w=yr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(u={data:w.data.map(function(M){return M.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Np(),yr.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(o),w=0;w<o;w++)p[w]=we;return u.index++,p}function Ds(o,u){return typeof u=="function"?u(o):u}function Gu(o){var u=Ui();return Zu(u,Ai,o)}function Zu(o,u,p){var w=o.queue;if(w===null)throw Error(i(311));w.lastRenderedReducer=p;var M=o.baseQueue,O=w.pending;if(O!==null){if(M!==null){var X=M.next;M.next=O.next,O.next=X}u.baseQueue=M=O,w.pending=null}if(O=o.baseState,M===null)o.memoizedState=O;else{u=M.next;var ge=X=null,Ze=null,gt=u,Dt=!1;do{var Ft=gt.lane&-536870913;if(Ft!==gt.lane?(Pr&Ft)===Ft:(tc&Ft)===Ft){var bt=gt.revertLane;if(bt===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,gesture:null,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),Ft===js&&(Dt=!0);else if((tc&bt)===bt){gt=gt.next,bt===js&&(Dt=!0);continue}else Ft={lane:0,revertLane:gt.revertLane,gesture:null,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},Ze===null?(ge=Ze=Ft,X=O):Ze=Ze.next=Ft,yr.lanes|=bt,v|=bt;Ft=gt.action,nc&&p(O,Ft),O=gt.hasEagerState?gt.eagerState:p(O,Ft)}else bt={lane:Ft,revertLane:gt.revertLane,gesture:gt.gesture,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},Ze===null?(ge=Ze=bt,X=O):Ze=Ze.next=bt,yr.lanes|=Ft,v|=Ft;gt=gt.next}while(gt!==null&&gt!==u);if(Ze===null?X=O:Ze.next=ge,!fo(O,o.memoizedState)&&(Na=!0,Dt&&(p=Ko,p!==null)))throw p;o.memoizedState=O,o.baseState=X,o.baseQueue=Ze,w.lastRenderedState=O}return M===null&&(w.lanes=0),[o.memoizedState,w.dispatch]}function Dp(o){var u=Ui(),p=u.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=o;var w=p.dispatch,M=p.pending,O=u.memoizedState;if(M!==null){p.pending=null;var X=M=M.next;do O=o(O,X.action),X=X.next;while(X!==M);fo(O,u.memoizedState)||(Na=!0),u.memoizedState=O,u.baseQueue===null&&(u.baseState=O),p.lastRenderedState=O}return[O,w]}function yg(o,u,p){var w=yr,M=Ui(),O=ve;if(O){if(p===void 0)throw Error(i(407));p=p()}else p=u();var X=!fo((Ai||M).memoizedState,p);if(X&&(M.memoizedState=p,Na=!0),M=M.queue,Sg(Ip.bind(null,w,M,o),[o]),M.getSnapshot!==u||X||Aa!==null&&Aa.memoizedState.tag&1){if(w.flags|=2048,Ku(9,{destroy:void 0},Pp.bind(null,w,M,p,u),null),ni===null)throw Error(i(349));O||(tc&127)!==0||th(w,u,p)}return p}function th(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=yr.updateQueue,u===null?(u=Np(),yr.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function Pp(o,u,p,w){u.value=p,u.getSnapshot=w,Pv(u)&&nh(o)}function Ip(o,u,p){return p(function(){Pv(u)&&nh(o)})}function Pv(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!fo(o,p)}catch{return!0}}function nh(o){var u=Pi(o,2);u!==null&&sn(u,o,2)}function vg(o){var u=zo();if(typeof o=="function"){var p=o;if(o=p(),nc){Ci(!0);try{p()}finally{Ci(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:o},u}function Op(o,u,p,w){return o.baseState=p,Zu(o,Ai,typeof w=="function"?w:Ds)}function Xb(o,u,p,w,M){if(qp(o))throw Error(i(485));if(o=u.action,o!==null){var O={payload:M,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){O.listeners.push(X)}};Ae.T!==null?p(!0):O.isTransition=!1,w(O),p=u.pending,p===null?(O.next=u.pending=O,Rp(u,O)):(O.next=p.next,u.pending=p.next=O)}}function Rp(o,u){var p=u.action,w=u.payload,M=o.state;if(u.isTransition){var O=Ae.T,X={};Ae.T=X;try{var ge=p(M,w),Ze=Ae.S;Ze!==null&&Ze(X,ge),Lp(o,u,ge)}catch(gt){xg(o,u,gt)}finally{O!==null&&X.types!==null&&(O.types=X.types),Ae.T=O}}else try{O=p(M,w),Lp(o,u,O)}catch(gt){xg(o,u,gt)}}function Lp(o,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){Ps(o,u,w)},function(w){return xg(o,u,w)}):Ps(o,u,p)}function Ps(o,u,p){u.status="fulfilled",u.value=p,Iv(u),o.state=p,u=o.pending,u!==null&&(p=u.next,p===u?o.pending=null:(p=p.next,u.next=p,Rp(o,p)))}function xg(o,u,p){var w=o.pending;if(o.pending=null,w!==null){w=w.next;do u.status="rejected",u.reason=p,Iv(u),u=u.next;while(u!==w)}o.action=null}function Iv(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Ov(o,u){return u}function bg(o,u){if(ve){var p=ni.formState;if(p!==null){e:{var w=yr;if(ve){if(_e){t:{for(var M=_e,O=Fe;M.nodeType!==8;){if(!O){M=null;break t}if(M=wo(M.nextSibling),M===null){M=null;break t}}O=M.data,M=O==="F!"||O==="F"?M:null}if(M){_e=wo(M.nextSibling),w=M.data==="F!";break e}}et(w)}w=!1}w&&(u=p[0])}}return p=zo(),p.memoizedState=p.baseState=u,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ov,lastRenderedState:u},p.queue=w,p=$v.bind(null,yr,w),w.dispatch=p,w=vg(!1),O=Vp.bind(null,yr,!1,w.queue),w=zo(),M={state:u,dispatch:null,action:o,pending:null},w.queue=M,p=Xb.bind(null,yr,M,O,p),M.dispatch=p,w.memoizedState=o,[u,p,!1]}function _g(o){var u=Ui();return Xu(u,Ai,o)}function Xu(o,u,p){if(u=Zu(o,u,Ov)[0],o=Gu(Ds)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var w=Ri(u)}catch(X){throw X===Ns?kr:X}else w=u;u=Ui();var M=u.queue,O=M.dispatch;return p!==u.memoizedState&&(yr.flags|=2048,Ku(9,{destroy:void 0},Kb.bind(null,M,p),null)),[w,O,o]}function Kb(o,u){o.action=u}function Rv(o){var u=Ui(),p=Ai;if(p!==null)return Xu(u,p,o);Ui(),u=u.memoizedState,p=Ui();var w=p.queue.dispatch;return p.memoizedState=o,[u,w,!1]}function Ku(o,u,p,w){return o={tag:o,create:p,deps:w,inst:u,next:null},u=yr.updateQueue,u===null&&(u=Np(),yr.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=o.next=o:(w=p.next,p.next=o,o.next=w,u.lastEffect=o),o}function wg(){return Ui().memoizedState}function zp(o,u,p,w){var M=zo();yr.flags|=o,M.memoizedState=Ku(1|u,{destroy:void 0},p,w===void 0?null:w)}function Bp(o,u,p,w){var M=Ui();w=w===void 0?null:w;var O=M.memoizedState.inst;Ai!==null&&w!==null&&fg(w,Ai.memoizedState.deps)?M.memoizedState=Ku(u,O,p,w):(yr.flags|=o,M.memoizedState=Ku(1|u,O,p,w))}function Yu(o,u){zp(8390656,8,o,u)}function Sg(o,u){Bp(2048,8,o,u)}function Eg(o){yr.flags|=4;var u=yr.updateQueue;if(u===null)u=Np(),yr.updateQueue=u,u.events=[o];else{var p=u.events;p===null?u.events=[o]:p.push(o)}}function rh(o){var u=Ui().memoizedState;return Eg({ref:u,nextImpl:o}),function(){if((Wr&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function Is(o,u){return Bp(4,2,o,u)}function Lv(o,u){return Bp(4,4,o,u)}function zv(o,u){if(typeof u=="function"){o=o();var p=u(o);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Bv(o,u,p){p=p!=null?p.concat([o]):null,Bp(4,4,zv.bind(null,u,o),p)}function Cg(){}function ih(o,u){var p=Ui();u=u===void 0?null:u;var w=p.memoizedState;return u!==null&&fg(u,w[1])?w[0]:(p.memoizedState=[o,u],o)}function Tg(o,u){var p=Ui();u=u===void 0?null:u;var w=p.memoizedState;if(u!==null&&fg(u,w[1]))return w[0];if(w=o(),nc){Ci(!0);try{o()}finally{Ci(!1)}}return p.memoizedState=[w,u],w}function Fp(o,u,p){return p===void 0||(tc&1073741824)!==0&&(Pr&261930)===0?o.memoizedState=u:(o.memoizedState=p,o=ln(),yr.lanes|=o,v|=o,p)}function Fv(o,u,p,w){return fo(p,u)?p:Ql.current!==null?(o=Fp(o,p,w),fo(o,u)||(Na=!0),o):(tc&42)===0||(tc&1073741824)!==0&&(Pr&261930)===0?(Na=!0,o.memoizedState=p):(o=ln(),yr.lanes|=o,v|=o,u)}function Uv(o,u,p,w,M){var O=De.p;De.p=O!==0&&8>O?O:8;var X=Ae.T,ge={};Ae.T=ge,Vp(o,!1,u,p);try{var Ze=M(),gt=Ae.S;if(gt!==null&&gt(ge,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Dt=Qd(Ze,w);ah(o,u,Dt,nn(o))}else ah(o,u,w,nn(o))}catch(Ft){ah(o,u,{then:function(){},status:"rejected",reason:Ft},nn())}finally{De.p=O,X!==null&&ge.types!==null&&(X.types=ge.types),Ae.T=X}}function Vv(){}function ro(o,u,p,w){if(o.tag!==5)throw Error(i(476));var M=qv(o).queue;Uv(o,M,u,ke,p===null?Vv:function(){return kg(o),p(w)})}function qv(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:ke},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:p},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function kg(o){var u=qv(o);u.next===null&&(u=o.alternate.memoizedState),ah(o,u.next.queue,{},nn())}function Up(){return wn(ty)}function Hv(){return Ui().memoizedState}function jg(){return Ui().memoizedState}function Ag(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var p=nn();o=kl(p);var w=$c(u,o,p);w!==null&&(sn(w,u,p),Vu(w,u,p)),u={cache:Za()},o.payload=u;return}u=u.return}}function Yb(o,u,p){var w=nn();p={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},qp(o)?oh(u,p):(p=Wd(o,u,p,w),p!==null&&(sn(p,o,w),Ng(p,u,w)))}function $v(o,u,p){var w=nn();ah(o,u,p,w)}function ah(o,u,p,w){var M={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(qp(o))oh(u,M);else{var O=o.alternate;if(o.lanes===0&&(O===null||O.lanes===0)&&(O=u.lastRenderedReducer,O!==null))try{var X=u.lastRenderedState,ge=O(X,p);if(M.hasEagerState=!0,M.eagerState=ge,fo(ge,X))return Sl(o,u,M,0),ni===null&&Bc(),!1}catch{}finally{}if(p=Wd(o,u,M,w),p!==null)return sn(p,o,w),Ng(p,u,w),!0}return!1}function Vp(o,u,p,w){if(w={lane:2,revertLane:lc(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},qp(o)){if(u)throw Error(i(479))}else u=Wd(o,p,w,2),u!==null&&sn(u,o,2)}function qp(o){var u=o.alternate;return o===yr||u!==null&&u===yr}function oh(o,u){qu=jp=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function Ng(o,u,p){if((p&4194048)!==0){var w=u.lanes;w&=o.pendingLanes,p|=w,u.lanes=p,vt(o,p)}}var sh={readContext:wn,use:$u,useCallback:Fi,useContext:Fi,useEffect:Fi,useImperativeHandle:Fi,useLayoutEffect:Fi,useInsertionEffect:Fi,useMemo:Fi,useReducer:Fi,useRef:Fi,useState:Fi,useDebugValue:Fi,useDeferredValue:Fi,useTransition:Fi,useSyncExternalStore:Fi,useId:Fi,useHostTransitionStatus:Fi,useFormState:Fi,useActionState:Fi,useOptimistic:Fi,useMemoCache:Fi,useCacheRefresh:Fi};sh.useEffectEvent=Fi;var hf={readContext:wn,use:$u,useCallback:function(o,u){return zo().memoizedState=[o,u===void 0?null:u],o},useContext:wn,useEffect:Yu,useImperativeHandle:function(o,u,p){p=p!=null?p.concat([o]):null,zp(4194308,4,zv.bind(null,u,o),p)},useLayoutEffect:function(o,u){return zp(4194308,4,o,u)},useInsertionEffect:function(o,u){zp(4,2,o,u)},useMemo:function(o,u){var p=zo();u=u===void 0?null:u;var w=o();if(nc){Ci(!0);try{o()}finally{Ci(!1)}}return p.memoizedState=[w,u],w},useReducer:function(o,u,p){var w=zo();if(p!==void 0){var M=p(u);if(nc){Ci(!0);try{p(u)}finally{Ci(!1)}}}else M=u;return w.memoizedState=w.baseState=M,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:M},w.queue=o,o=o.dispatch=Yb.bind(null,yr,o),[w.memoizedState,o]},useRef:function(o){var u=zo();return o={current:o},u.memoizedState=o},useState:function(o){o=vg(o);var u=o.queue,p=$v.bind(null,yr,u);return u.dispatch=p,[o.memoizedState,p]},useDebugValue:Cg,useDeferredValue:function(o,u){var p=zo();return Fp(p,o,u)},useTransition:function(){var o=vg(!1);return o=Uv.bind(null,yr,o.queue,!0,!1),zo().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,p){var w=yr,M=zo();if(ve){if(p===void 0)throw Error(i(407));p=p()}else{if(p=u(),ni===null)throw Error(i(349));(Pr&127)!==0||th(w,u,p)}M.memoizedState=p;var O={value:p,getSnapshot:u};return M.queue=O,Yu(Ip.bind(null,w,O,o),[o]),w.flags|=2048,Ku(9,{destroy:void 0},Pp.bind(null,w,O,p,u),null),p},useId:function(){var o=zo(),u=ni.identifierPrefix;if(ve){var p=U,w=F;p=(w&~(1<<32-Sr(w)-1)).toString(32)+p,u="_"+u+"R_"+p,p=Ap++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=Zc++,u="_"+u+"r_"+p.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Up,useFormState:bg,useActionState:bg,useOptimistic:function(o){var u=zo();u.memoizedState=u.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Vp.bind(null,yr,!0,p),p.dispatch=u,[o,u]},useMemoCache:Mp,useCacheRefresh:function(){return zo().memoizedState=Ag.bind(null,yr)},useEffectEvent:function(o){var u=zo(),p={impl:o};return u.memoizedState=p,function(){if((Wr&2)!==0)throw Error(i(440));return p.impl.apply(void 0,arguments)}}},Yr={readContext:wn,use:$u,useCallback:ih,useContext:wn,useEffect:Sg,useImperativeHandle:Bv,useInsertionEffect:Is,useLayoutEffect:Lv,useMemo:Tg,useReducer:Gu,useRef:wg,useState:function(){return Gu(Ds)},useDebugValue:Cg,useDeferredValue:function(o,u){var p=Ui();return Fv(p,Ai.memoizedState,o,u)},useTransition:function(){var o=Gu(Ds)[0],u=Ui().memoizedState;return[typeof o=="boolean"?o:Ri(o),u]},useSyncExternalStore:yg,useId:Hv,useHostTransitionStatus:Up,useFormState:_g,useActionState:_g,useOptimistic:function(o,u){var p=Ui();return Op(p,Ai,o,u)},useMemoCache:Mp,useCacheRefresh:jg};Yr.useEffectEvent=rh;var Mg={readContext:wn,use:$u,useCallback:ih,useContext:wn,useEffect:Sg,useImperativeHandle:Bv,useInsertionEffect:Is,useLayoutEffect:Lv,useMemo:Tg,useReducer:Dp,useRef:wg,useState:function(){return Dp(Ds)},useDebugValue:Cg,useDeferredValue:function(o,u){var p=Ui();return Ai===null?Fp(p,o,u):Fv(p,Ai.memoizedState,o,u)},useTransition:function(){var o=Dp(Ds)[0],u=Ui().memoizedState;return[typeof o=="boolean"?o:Ri(o),u]},useSyncExternalStore:yg,useId:Hv,useHostTransitionStatus:Up,useFormState:Rv,useActionState:Rv,useOptimistic:function(o,u){var p=Ui();return Ai!==null?Op(p,Ai,o,u):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:Mp,useCacheRefresh:jg};Mg.useEffectEvent=rh;function el(o,u,p,w){u=o.memoizedState,p=p(w,u),p=p==null?u:E({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var Xc={enqueueSetState:function(o,u,p){o=o._reactInternals;var w=nn(),M=kl(w);M.payload=u,p!=null&&(M.callback=p),u=$c(o,M,w),u!==null&&(sn(u,o,w),Vu(u,o,w))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var w=nn(),M=kl(w);M.tag=1,M.payload=u,p!=null&&(M.callback=p),u=$c(o,M,w),u!==null&&(sn(u,o,w),Vu(u,o,w))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=nn(),w=kl(p);w.tag=2,u!=null&&(w.callback=u),u=$c(o,w,p),u!==null&&(sn(u,o,p),Vu(u,o,p))}};function Dg(o,u,p,w,M,O,X){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(w,O,X):u.prototype&&u.prototype.isPureReactComponent?!ai(p,w)||!ai(M,O):!0}function Gv(o,u,p,w){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,w),u.state!==o&&Xc.enqueueReplaceState(u,u.state,null)}function Wu(o,u){var p=u;if("ref"in u){p={};for(var w in u)w!=="ref"&&(p[w]=u[w])}if(o=o.defaultProps){p===u&&(p=E({},p));for(var M in o)p[M]===void 0&&(p[M]=o[M])}return p}function Zv(o){ja(o)}function Xv(o){console.error(o)}function Kv(o){ja(o)}function Hp(o,u){try{var p=o.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(w){setTimeout(function(){throw w})}}function Yv(o,u,p){try{var w=o.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Pg(o,u,p){return p=kl(p),p.tag=3,p.payload={element:null},p.callback=function(){Hp(o,u)},p}function Wv(o){return o=kl(o),o.tag=3,o}function ff(o,u,p,w){var M=p.type.getDerivedStateFromError;if(typeof M=="function"){var O=w.value;o.payload=function(){return M(O)},o.callback=function(){Yv(u,p,w)}}var X=p.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(o.callback=function(){Yv(u,p,w),typeof M!="function"&&(Me===null?Me=new Set([this]):Me.add(this));var ge=w.stack;this.componentDidCatch(w.value,{componentStack:ge!==null?ge:""})})}function lh(o,u,p,w,M){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(u=p.alternate,u!==null&&Rn(u,p,M,!0),p=bo.current,p!==null){switch(p.tag){case 31:case 13:return Ms===null?_r():p.alternate===null&&h===0&&(h=3),p.flags&=-257,p.flags|=65536,p.lanes=M,w===zr?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([w]):u.add(w),xi(o,w,M)),!1;case 22:return p.flags|=65536,w===zr?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([w]):p.add(w)),xi(o,w,M)),!1}throw Error(i(435,p.tag))}return xi(o,w,M),_r(),!1}if(ve)return u=bo.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=M,w!==rt&&(o=Error(i(422),{cause:w}),Wt(Ii(o,p)))):(w!==rt&&(u=Error(i(423),{cause:w}),Wt(Ii(u,p))),o=o.current.alternate,o.flags|=65536,M&=-M,o.lanes|=M,w=Ii(w,p),M=Pg(o.stateNode,w,M),Sp(o,M),h!==4&&(h=2)),!1;var O=Error(i(520),{cause:w});if(O=Ii(O,p),V===null?V=[O]:V.push(O),h!==4&&(h=2),u===null)return!0;w=Ii(w,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,o=M&-M,p.lanes|=o,o=Pg(p.stateNode,w,o),Sp(p,o),!1;case 1:if(u=p.type,O=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Me===null||!Me.has(O))))return p.flags|=65536,M&=-M,p.lanes|=M,M=Wv(M),ff(M,o,p,w),Sp(p,M),!1}p=p.return}while(p!==null);return!1}var $p=Error(i(461)),Na=!1;function io(o,u,p,w){u.child=o===null?dg(u,null,p,w):xo(u,o.child,p,w)}function Qv(o,u,p,w,M){p=p.render;var O=u.ref;if("ref"in w){var X={};for(var ge in w)ge!=="ref"&&(X[ge]=w[ge])}else X=w;return Zn(u),w=pg(o,u,p,X,O,M),ge=mg(),o!==null&&!Na?(gg(o,u,M),Al(o,u,M)):(ve&&ge&&te(u),u.flags|=1,io(o,u,w,M),u.child)}function Ig(o,u,p,w,M){if(o===null){var O=p.type;return typeof O=="function"&&!Fc(O)&&O.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=O,pf(o,u,O,w,M)):(o=ls(p.type,null,w,u,u.mode,M),o.ref=u.ref,o.return=u,u.child=o)}if(O=o.child,!Yp(o,M)){var X=O.memoizedProps;if(p=p.compare,p=p!==null?p:ai,p(X,w)&&o.ref===u.ref)return Al(o,u,M)}return u.flags|=1,o=Io(O,w),o.ref=u.ref,o.return=u,u.child=o}function pf(o,u,p,w,M){if(o!==null){var O=o.memoizedProps;if(ai(O,w)&&o.ref===u.ref)if(Na=!1,u.pendingProps=w=O,Yp(o,M))(o.flags&131072)!==0&&(Na=!0);else return u.lanes=o.lanes,Al(o,u,M)}return ao(o,u,p,w,M)}function ch(o,u,p,w){var M=w.children,O=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((u.flags&128)!==0){if(O=O!==null?O.baseLanes|p:p,o!==null){for(w=u.child=o.child,M=0;w!==null;)M=M|w.lanes|w.childLanes,w=w.sibling;w=M&~O}else w=0,u.child=null;return Bo(o,u,O,p,w)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Qs(u,O!==null?O.cachePool:null),O!==null?Nv(u,O):us(),kp(u);else return w=u.lanes=536870912,Bo(o,u,O!==null?O.baseLanes|p:p,p,w)}else O!==null?(Qs(u,O.cachePool),Nv(u,O),ec(),u.memoizedState=null):(o!==null&&Qs(u,null),us(),ec());return io(o,u,M,p),u.child}function rc(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Bo(o,u,p,w,M){var O=Vc();return O=O===null?null:{parent:si._currentValue,pool:O},u.memoizedState={baseLanes:p,cachePool:O},o!==null&&Qs(u,null),us(),kp(u),o!==null&&Rn(o,u,w,!0),u.childLanes=M,null}function ic(o,u){return u=ac({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Fa(o,u,p){return xo(u,o.child,null,p),o=ic(u,u.pendingProps),o.flags|=2,Lo(u),u.memoizedState=null,o}function Gp(o,u,p){var w=u.pendingProps,M=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(ve){if(w.mode==="hidden")return o=ic(u,w),u.lanes=536870912,rc(null,o);if(Tp(u),(o=_e)?(o=Df(o,Fe),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:P!==null?{id:F,overflow:U}:null,retryLane:536870912,hydrationErrors:null},p=go(o),p.return=u,u.child=p,be=u,_e=null)):o=null,o===null)throw et(u);return u.lanes=536870912,null}return ic(u,w)}var O=o.memoizedState;if(O!==null){var X=O.dehydrated;if(Tp(u),M)if(u.flags&256)u.flags&=-257,u=Fa(o,u,p);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(Na||Rn(o,u,p,!1),M=(p&o.childLanes)!==0,Na||M){if(w=ni,w!==null&&(X=Yt(w,p),X!==0&&X!==O.retryLane))throw O.retryLane=X,Pi(o,X),sn(w,o,X),$p;_r(),u=Fa(o,u,p)}else o=O.treeContext,_e=wo(X.nextSibling),be=u,ve=!0,$e=null,Fe=!1,o!==null&&Te(u,o),u=ic(u,w),u.flags|=4096;return u}return o=Io(o.child,{mode:w.mode,children:w.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Qu(o,u){var p=u.ref;if(p===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(o===null||o.ref!==p)&&(u.flags|=4194816)}}function ao(o,u,p,w,M){return Zn(u),p=pg(o,u,p,w,void 0,M),w=mg(),o!==null&&!Na?(gg(o,u,M),Al(o,u,M)):(ve&&w&&te(u),u.flags|=1,io(o,u,p,M),u.child)}function Og(o,u,p,w,M,O){return Zn(u),u.updateQueue=null,p=Dv(u,w,p,M),Mv(o),w=mg(),o!==null&&!Na?(gg(o,u,O),Al(o,u,O)):(ve&&w&&te(u),u.flags|=1,io(o,u,p,O),u.child)}function Rg(o,u,p,w,M){if(Zn(u),u.stateNode===null){var O=ss,X=p.contextType;typeof X=="object"&&X!==null&&(O=wn(X)),O=new p(w,O),u.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Xc,u.stateNode=O,O._reactInternals=u,O=u.stateNode,O.props=w,O.state=u.memoizedState,O.refs={},wp(u),X=p.contextType,O.context=typeof X=="object"&&X!==null?wn(X):ss,O.state=u.memoizedState,X=p.getDerivedStateFromProps,typeof X=="function"&&(el(u,p,X,w),O.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(X=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),X!==O.state&&Xc.enqueueReplaceState(O,O.state,null),cf(u,w,O,M),jl(),O.state=u.memoizedState),typeof O.componentDidMount=="function"&&(u.flags|=4194308),w=!0}else if(o===null){O=u.stateNode;var ge=u.memoizedProps,Ze=Wu(p,ge);O.props=Ze;var gt=O.context,Dt=p.contextType;X=ss,typeof Dt=="object"&&Dt!==null&&(X=wn(Dt));var Ft=p.getDerivedStateFromProps;Dt=typeof Ft=="function"||typeof O.getSnapshotBeforeUpdate=="function",ge=u.pendingProps!==ge,Dt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ge||gt!==X)&&Gv(u,O,w,X),Hc=!1;var bt=u.memoizedState;O.state=bt,cf(u,w,O,M),jl(),gt=u.memoizedState,ge||bt!==gt||Hc?(typeof Ft=="function"&&(el(u,p,Ft,w),gt=u.memoizedState),(Ze=Hc||Dg(u,p,Ze,w,bt,gt,X))?(Dt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(u.flags|=4194308)):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=gt),O.props=w,O.state=gt,O.context=X,w=Ze):(typeof O.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{O=u.stateNode,hg(o,u),X=u.memoizedProps,Dt=Wu(p,X),O.props=Dt,Ft=u.pendingProps,bt=O.context,gt=p.contextType,Ze=ss,typeof gt=="object"&&gt!==null&&(Ze=wn(gt)),ge=p.getDerivedStateFromProps,(gt=typeof ge=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X!==Ft||bt!==Ze)&&Gv(u,O,w,Ze),Hc=!1,bt=u.memoizedState,O.state=bt,cf(u,w,O,M),jl();var Et=u.memoizedState;X!==Ft||bt!==Et||Hc||o!==null&&o.dependencies!==null&&Mr(o.dependencies)?(typeof ge=="function"&&(el(u,p,ge,w),Et=u.memoizedState),(Dt=Hc||Dg(u,p,Dt,w,bt,Et,Ze)||o!==null&&o.dependencies!==null&&Mr(o.dependencies))?(gt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(w,Et,Ze),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(w,Et,Ze)),typeof O.componentDidUpdate=="function"&&(u.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof O.componentDidUpdate!="function"||X===o.memoizedProps&&bt===o.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===o.memoizedProps&&bt===o.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=Et),O.props=w,O.state=Et,O.context=Ze,w=Dt):(typeof O.componentDidUpdate!="function"||X===o.memoizedProps&&bt===o.memoizedState||(u.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===o.memoizedProps&&bt===o.memoizedState||(u.flags|=1024),w=!1)}return O=w,Qu(o,u),w=(u.flags&128)!==0,O||w?(O=u.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:O.render(),u.flags|=1,o!==null&&w?(u.child=xo(u,o.child,null,M),u.child=xo(u,null,p,M)):io(o,u,p,M),u.memoizedState=O.state,o=u.child):o=Al(o,u,M),o}function Jv(o,u,p,w){return kt(),u.flags|=256,io(o,u,p,w),u.child}var Zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(o){return{baseLanes:o,cachePool:Tl()}}function gf(o,u,p){return o=o!==null?o.childLanes&~p:0,u&&(o|=N),o}function ex(o,u,p){var w=u.pendingProps,M=!1,O=(u.flags&128)!==0,X;if((X=O)||(X=o!==null&&o.memoizedState===null?!1:(Oi.current&2)!==0),X&&(M=!0,u.flags&=-129),X=(u.flags&32)!==0,u.flags&=-33,o===null){if(ve){if(M?Jl(u):ec(),(o=_e)?(o=Df(o,Fe),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:P!==null?{id:F,overflow:U}:null,retryLane:536870912,hydrationErrors:null},p=go(o),p.return=u,u.child=p,be=u,_e=null)):o=null,o===null)throw et(u);return Pf(o)?u.lanes=32:u.lanes=536870912,null}var ge=w.children;return w=w.fallback,M?(ec(),M=u.mode,ge=ac({mode:"hidden",children:ge},M),w=pn(w,M,p,null),ge.return=u,w.return=u,ge.sibling=w,u.child=ge,w=u.child,w.memoizedState=mf(p),w.childLanes=gf(o,X,p),u.memoizedState=Zp,rc(null,w)):(Jl(u),Xp(u,ge))}var Ze=o.memoizedState;if(Ze!==null&&(ge=Ze.dehydrated,ge!==null)){if(O)u.flags&256?(Jl(u),u.flags&=-257,u=yf(o,u,p)):u.memoizedState!==null?(ec(),u.child=o.child,u.flags|=128,u=null):(ec(),ge=w.fallback,M=u.mode,w=ac({mode:"visible",children:w.children},M),ge=pn(ge,M,p,null),ge.flags|=2,w.return=u,ge.return=u,w.sibling=ge,u.child=w,xo(u,o.child,null,p),w=u.child,w.memoizedState=mf(p),w.childLanes=gf(o,X,p),u.memoizedState=Zp,u=rc(null,w));else if(Jl(u),Pf(ge)){if(X=ge.nextSibling&&ge.nextSibling.dataset,X)var gt=X.dgst;X=gt,w=Error(i(419)),w.stack="",w.digest=X,Wt({value:w,source:null,stack:null}),u=yf(o,u,p)}else if(Na||Rn(o,u,p,!1),X=(p&o.childLanes)!==0,Na||X){if(X=ni,X!==null&&(w=Yt(X,p),w!==0&&w!==Ze.retryLane))throw Ze.retryLane=w,Pi(o,w),sn(X,o,w),$p;cm(ge)||_r(),u=yf(o,u,p)}else cm(ge)?(u.flags|=192,u.child=o.child,u=null):(o=Ze.treeContext,_e=wo(ge.nextSibling),be=u,ve=!0,$e=null,Fe=!1,o!==null&&Te(u,o),u=Xp(u,w.children),u.flags|=4096);return u}return M?(ec(),ge=w.fallback,M=u.mode,Ze=o.child,gt=Ze.sibling,w=Io(Ze,{mode:"hidden",children:w.children}),w.subtreeFlags=Ze.subtreeFlags&65011712,gt!==null?ge=Io(gt,ge):(ge=pn(ge,M,p,null),ge.flags|=2),ge.return=u,w.return=u,w.sibling=ge,u.child=w,rc(null,w),w=u.child,ge=o.child.memoizedState,ge===null?ge=mf(p):(M=ge.cachePool,M!==null?(Ze=si._currentValue,M=M.parent!==Ze?{parent:Ze,pool:Ze}:M):M=Tl(),ge={baseLanes:ge.baseLanes|p,cachePool:M}),w.memoizedState=ge,w.childLanes=gf(o,X,p),u.memoizedState=Zp,rc(o.child,w)):(Jl(u),p=o.child,o=p.sibling,p=Io(p,{mode:"visible",children:w.children}),p.return=u,p.sibling=null,o!==null&&(X=u.deletions,X===null?(u.deletions=[o],u.flags|=16):X.push(o)),u.child=p,u.memoizedState=null,p)}function Xp(o,u){return u=ac({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function ac(o,u){return o=$a(22,o,null,u),o.lanes=0,o}function yf(o,u,p){return xo(u,o.child,null,p),o=Xp(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Lg(o,u,p){o.lanes|=u;var w=o.alternate;w!==null&&(w.lanes|=u),Gn(o.return,u,p)}function Kp(o,u,p,w,M,O){var X=o.memoizedState;X===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:M,treeForkCount:O}:(X.isBackwards=u,X.rendering=null,X.renderingStartTime=0,X.last=w,X.tail=p,X.tailMode=M,X.treeForkCount=O)}function tx(o,u,p){var w=u.pendingProps,M=w.revealOrder,O=w.tail;w=w.children;var X=Oi.current,ge=(X&2)!==0;if(ge?(X=X&1|2,u.flags|=128):X&=1,Q(Oi,X),io(o,u,w,p),w=ve?m:0,!ge&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Lg(o,p,u);else if(o.tag===19)Lg(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(M){case"forwards":for(p=u.child,M=null;p!==null;)o=p.alternate,o!==null&&Ba(o)===null&&(M=p),p=p.sibling;p=M,p===null?(M=u.child,u.child=null):(M=p.sibling,p.sibling=null),Kp(u,!1,M,p,O,w);break;case"backwards":case"unstable_legacy-backwards":for(p=null,M=u.child,u.child=null;M!==null;){if(o=M.alternate,o!==null&&Ba(o)===null){u.child=M;break}o=M.sibling,M.sibling=p,p=M,M=o}Kp(u,!0,p,null,O,w);break;case"together":Kp(u,!1,null,null,void 0,w);break;default:u.memoizedState=null}return u.child}function Al(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),v|=u.lanes,(p&u.childLanes)===0)if(o!==null){if(Rn(o,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,p=Io(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=Io(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function Yp(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Mr(o)))}function nx(o,u,p){switch(u.tag){case 3:Nt(u,u.stateNode.containerInfo),Qt(u,si,o.memoizedState.cache),kt();break;case 27:case 5:Mt(u);break;case 4:Nt(u,u.stateNode.containerInfo);break;case 10:Qt(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Tp(u),null;break;case 13:var w=u.memoizedState;if(w!==null)return w.dehydrated!==null?(Jl(u),u.flags|=128,null):(p&u.child.childLanes)!==0?ex(o,u,p):(Jl(u),o=Al(o,u,p),o!==null?o.sibling:null);Jl(u);break;case 19:var M=(o.flags&128)!==0;if(w=(p&u.childLanes)!==0,w||(Rn(o,u,p,!1),w=(p&u.childLanes)!==0),M){if(w)return tx(o,u,p);u.flags|=128}if(M=u.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Q(Oi,Oi.current),w)break;return null;case 22:return u.lanes=0,ch(o,u,p,u.pendingProps);case 24:Qt(u,si,o.memoizedState.cache)}return Al(o,u,p)}function zg(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps)Na=!0;else{if(!Yp(o,p)&&(u.flags&128)===0)return Na=!1,nx(o,u,p);Na=(o.flags&131072)!==0}else Na=!1,ve&&(u.flags&1048576)!==0&&J(u,m,u.index);switch(u.lanes=0,u.tag){case 16:e:{var w=u.pendingProps;if(o=va(u.elementType),u.type=o,typeof o=="function")Fc(o)?(w=Wu(o,w),u.tag=1,u=Rg(null,u,o,w,p)):(u.tag=0,u=ao(null,u,o,w,p));else{if(o!=null){var M=o.$$typeof;if(M===W){u.tag=11,u=Qv(null,u,o,w,p);break e}else if(M===ee){u.tag=14,u=Ig(null,u,o,w,p);break e}}throw u=ze(o)||o,Error(i(306,u,""))}}return u;case 0:return ao(o,u,u.type,u.pendingProps,p);case 1:return w=u.type,M=Wu(w,u.pendingProps),Rg(o,u,w,M,p);case 3:e:{if(Nt(u,u.stateNode.containerInfo),o===null)throw Error(i(387));w=u.pendingProps;var O=u.memoizedState;M=O.element,hg(o,u),cf(u,w,null,p);var X=u.memoizedState;if(w=X.cache,Qt(u,si,w),w!==O.cache&&Fn(u,[si],p,!0),jl(),w=X.element,O.isDehydrated)if(O={element:w,isDehydrated:!1,cache:X.cache},u.updateQueue.baseState=O,u.memoizedState=O,u.flags&256){u=Jv(o,u,w,p);break e}else if(w!==M){M=Ii(Error(i(424)),u),Wt(M),u=Jv(o,u,w,p);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(_e=wo(o.firstChild),be=u,ve=!0,$e=null,Fe=!0,p=dg(u,null,w,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(kt(),w===M){u=Al(o,u,p);break e}io(o,u,w,p)}u=u.child}return u;case 26:return Qu(o,u),o===null?(p=wh(u.type,null,u.pendingProps,null))?u.memoizedState=p:ve||(p=u.type,o=u.pendingProps,w=Il(lt.current).createElement(p),w[Y]=u,w[ie]=o,Pa(w,p,o),Lt(w),u.stateNode=w):u.memoizedState=wh(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Mt(u),o===null&&ve&&(w=u.stateNode=Kg(u.type,u.pendingProps,lt.current),be=u,Fe=!0,M=_e,uc(u.type)?(md=M,_e=wo(w.firstChild)):_e=M),io(o,u,u.pendingProps.children,p),Qu(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&ve&&((M=w=_e)&&(w=ux(w,u.type,u.pendingProps,Fe),w!==null?(u.stateNode=w,be=u,_e=wo(w.firstChild),Fe=!1,M=!0):M=!1),M||et(u)),Mt(u),M=u.type,O=u.pendingProps,X=o!==null?o.memoizedProps:null,w=O.children,so(M,O)?w=null:X!==null&&so(M,X)&&(u.flags|=32),u.memoizedState!==null&&(M=pg(o,u,Zb,null,null,p),ty._currentValue=M),Qu(o,u),io(o,u,w,p),u.child;case 6:return o===null&&ve&&((o=p=_e)&&(p=Fs(p,u.pendingProps,Fe),p!==null?(u.stateNode=p,be=u,_e=null,o=!0):o=!1),o||et(u)),null;case 13:return ex(o,u,p);case 4:return Nt(u,u.stateNode.containerInfo),w=u.pendingProps,o===null?u.child=xo(u,null,w,p):io(o,u,w,p),u.child;case 11:return Qv(o,u,u.type,u.pendingProps,p);case 7:return io(o,u,u.pendingProps,p),u.child;case 8:return io(o,u,u.pendingProps.children,p),u.child;case 12:return io(o,u,u.pendingProps.children,p),u.child;case 10:return w=u.pendingProps,Qt(u,u.type,w.value),io(o,u,w.children,p),u.child;case 9:return M=u.type._context,w=u.pendingProps.children,Zn(u),M=wn(M),w=w(M),u.flags|=1,io(o,u,w,p),u.child;case 14:return Ig(o,u,u.type,u.pendingProps,p);case 15:return pf(o,u,u.type,u.pendingProps,p);case 19:return tx(o,u,p);case 31:return Gp(o,u,p);case 22:return ch(o,u,p,u.pendingProps);case 24:return Zn(u),w=wn(si),o===null?(M=Vc(),M===null&&(M=ni,O=Za(),M.pooledCache=O,O.refCount++,O!==null&&(M.pooledCacheLanes|=p),M=O),u.memoizedState={parent:w,cache:M},wp(u),Qt(u,si,M)):((o.lanes&p)!==0&&(hg(o,u),cf(u,null,null,p),jl()),M=o.memoizedState,O=u.memoizedState,M.parent!==w?(M={parent:w,cache:w},u.memoizedState=M,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=M),Qt(u,si,w)):(w=O.cache,Qt(u,si,w),w!==M.cache&&Fn(u,[si],p,!0))),io(o,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function oc(o){o.flags|=4}function Bg(o,u,p,w,M){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(M&335544128)===M)if(o.stateNode.complete)o.flags|=8192;else if(dr())o.flags|=8192;else throw za=zr,li}else o.flags&=-16777217}function Fg(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!CS(u))if(dr())o.flags|=8192;else throw za=zr,li}function Ju(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?$o():536870912,o.lanes|=u,R|=u)}function uh(o,u){if(!ve)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:w.sibling=null}}function Ni(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,w=0;if(u)for(var M=o.child;M!==null;)p|=M.lanes|M.childLanes,w|=M.subtreeFlags&65011712,w|=M.flags&65011712,M.return=o,M=M.sibling;else for(M=o.child;M!==null;)p|=M.lanes|M.childLanes,w|=M.subtreeFlags,w|=M.flags,M.return=o,M=M.sibling;return o.subtreeFlags|=w,o.childLanes=p,u}function Wp(o,u,p){var w=u.pendingProps;switch(ue(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(u),null;case 1:return Ni(u),null;case 3:return p=u.stateNode,w=null,o!==null&&(w=o.memoizedState.cache),u.memoizedState.cache!==w&&(u.flags|=2048),jn(si),At(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(_t(u)?oc(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,an())),Ni(u),null;case 26:var M=u.type,O=u.memoizedState;return o===null?(oc(u),O!==null?(Ni(u),Fg(u,O)):(Ni(u),Bg(u,M,null,w,p))):O?O!==o.memoizedState?(oc(u),Ni(u),Fg(u,O)):(Ni(u),u.flags&=-16777217):(o=o.memoizedProps,o!==w&&oc(u),Ni(u),Bg(u,M,o,w,p)),null;case 27:if(Ut(u),p=lt.current,M=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==w&&oc(u);else{if(!w){if(u.stateNode===null)throw Error(i(166));return Ni(u),null}o=Ee.current,_t(u)?it(u):(o=Kg(M,w,p),u.stateNode=o,oc(u))}return Ni(u),null;case 5:if(Ut(u),M=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==w&&oc(u);else{if(!w){if(u.stateNode===null)throw Error(i(166));return Ni(u),null}if(O=Ee.current,_t(u))it(u);else{var X=Il(lt.current);switch(O){case 1:O=X.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:O=X.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":O=X.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":O=X.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":O=X.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof w.is=="string"?X.createElement("select",{is:w.is}):X.createElement("select"),w.multiple?O.multiple=!0:w.size&&(O.size=w.size);break;default:O=typeof w.is=="string"?X.createElement(M,{is:w.is}):X.createElement(M)}}O[Y]=u,O[ie]=w;e:for(X=u.child;X!==null;){if(X.tag===5||X.tag===6)O.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===u)break e;for(;X.sibling===null;){if(X.return===null||X.return===u)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}u.stateNode=O;e:switch(Pa(O,M,w),M){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&oc(u)}}return Ni(u),Bg(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,p),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==w&&oc(u);else{if(typeof w!="string"&&u.stateNode===null)throw Error(i(166));if(o=lt.current,_t(u)){if(o=u.stateNode,p=u.memoizedProps,w=null,M=be,M!==null)switch(M.tag){case 27:case 5:w=M.memoizedProps}o[Y]=u,o=!!(o.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||am(o.nodeValue,p)),o||et(u,!0)}else o=Il(o).createTextNode(w),o[Y]=u,u.stateNode=o}return Ni(u),null;case 31:if(p=u.memoizedState,o===null||o.memoizedState!==null){if(w=_t(u),p!==null){if(o===null){if(!w)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[Y]=u}else kt(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ni(u),o=!1}else p=an(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=p),o=!0;if(!o)return u.flags&256?(Lo(u),u):(Lo(u),null);if((u.flags&128)!==0)throw Error(i(558))}return Ni(u),null;case 13:if(w=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(M=_t(u),w!==null&&w.dehydrated!==null){if(o===null){if(!M)throw Error(i(318));if(M=u.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[Y]=u}else kt(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ni(u),M=!1}else M=an(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=M),M=!0;if(!M)return u.flags&256?(Lo(u),u):(Lo(u),null)}return Lo(u),(u.flags&128)!==0?(u.lanes=p,u):(p=w!==null,o=o!==null&&o.memoizedState!==null,p&&(w=u.child,M=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(M=w.alternate.memoizedState.cachePool.pool),O=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(O=w.memoizedState.cachePool.pool),O!==M&&(w.flags|=2048)),p!==o&&p&&(u.child.flags|=8192),Ju(u,u.updateQueue),Ni(u),null);case 4:return At(),o===null&&ou(u.stateNode.containerInfo),Ni(u),null;case 10:return jn(u.type),Ni(u),null;case 19:if(pe(Oi),w=u.memoizedState,w===null)return Ni(u),null;if(M=(u.flags&128)!==0,O=w.rendering,O===null)if(M)uh(w,!1);else{if(h!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(O=Ba(o),O!==null){for(u.flags|=128,uh(w,!1),o=O.updateQueue,u.updateQueue=o,Ju(u,o),u.subtreeFlags=0,o=p,p=u.child;p!==null;)to(p,o),p=p.sibling;return Q(Oi,Oi.current&1|2),ve&&$(u,w.treeForkCount),u.child}o=o.sibling}w.tail!==null&&Oe()>le&&(u.flags|=128,M=!0,uh(w,!1),u.lanes=4194304)}else{if(!M)if(o=Ba(O),o!==null){if(u.flags|=128,M=!0,o=o.updateQueue,u.updateQueue=o,Ju(u,o),uh(w,!0),w.tail===null&&w.tailMode==="hidden"&&!O.alternate&&!ve)return Ni(u),null}else 2*Oe()-w.renderingStartTime>le&&p!==536870912&&(u.flags|=128,M=!0,uh(w,!1),u.lanes=4194304);w.isBackwards?(O.sibling=u.child,u.child=O):(o=w.last,o!==null?o.sibling=O:u.child=O,w.last=O)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=Oe(),o.sibling=null,p=Oi.current,Q(Oi,M?p&1|2:p&1),ve&&$(u,w.treeForkCount),o):(Ni(u),null);case 22:case 23:return Lo(u),eh(),w=u.memoizedState!==null,o!==null?o.memoizedState!==null!==w&&(u.flags|=8192):w&&(u.flags|=8192),w?(p&536870912)!==0&&(u.flags&128)===0&&(Ni(u),u.subtreeFlags&6&&(u.flags|=8192)):Ni(u),p=u.updateQueue,p!==null&&Ju(u,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),w=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(w=u.memoizedState.cachePool.pool),w!==p&&(u.flags|=2048),o!==null&&pe(Yo),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),jn(si),Ni(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function vf(o,u){switch(ue(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return jn(si),At(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Ut(u),null;case 31:if(u.memoizedState!==null){if(Lo(u),u.alternate===null)throw Error(i(340));kt()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Lo(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));kt()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return pe(Oi),null;case 4:return At(),null;case 10:return jn(u.type),null;case 22:case 23:return Lo(u),eh(),o!==null&&pe(Yo),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return jn(si),null;case 25:return null;default:return null}}function ed(o,u){switch(ue(u),u.tag){case 3:jn(si),At();break;case 26:case 27:case 5:Ut(u);break;case 4:At();break;case 31:u.memoizedState!==null&&Lo(u);break;case 13:Lo(u);break;case 19:pe(Oi);break;case 10:jn(u.type);break;case 22:case 23:Lo(u),eh(),o!==null&&pe(Yo);break;case 24:jn(si)}}function xf(o,u){try{var p=u.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var M=w.next;p=M;do{if((p.tag&o)===o){w=void 0;var O=p.create,X=p.inst;w=O(),X.destroy=w}p=p.next}while(p!==M)}}catch(ge){sr(u,u.return,ge)}}function Kc(o,u,p){try{var w=u.updateQueue,M=w!==null?w.lastEffect:null;if(M!==null){var O=M.next;w=O;do{if((w.tag&o)===o){var X=w.inst,ge=X.destroy;if(ge!==void 0){X.destroy=void 0,M=u;var Ze=p,gt=ge;try{gt()}catch(Dt){sr(M,Ze,Dt)}}}w=w.next}while(w!==O)}}catch(Dt){sr(u,u.return,Dt)}}function rx(o){var u=o.updateQueue;if(u!==null){var p=o.stateNode;try{uf(u,p)}catch(w){sr(o,o.return,w)}}}function td(o,u,p){p.props=Wu(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(w){sr(o,u,w)}}function nd(o,u){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var w=o.stateNode;break;case 30:w=o.stateNode;break;default:w=o.stateNode}typeof p=="function"?o.refCleanup=p(w):p.current=w}}catch(M){sr(o,u,M)}}function tl(o,u){var p=o.ref,w=o.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(M){sr(o,u,M)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(M){sr(o,u,M)}else p.current=null}function Qp(o){var u=o.type,p=o.memoizedProps,w=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(M){sr(o,o.return,M)}}function Jp(o,u,p){try{var w=o.stateNode;Qo(w,o.type,p,u),w[ie]=u}catch(M){sr(o,o.return,M)}}function Ug(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&uc(o.type)||o.tag===4}function Vg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ug(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&uc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function qg(o,u,p){var w=o.tag;if(w===5||w===6)o=o.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(o),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=$i));else if(w!==4&&(w===27&&uc(o.type)&&(p=o.stateNode,u=null),o=o.child,o!==null))for(qg(o,u,p),o=o.sibling;o!==null;)qg(o,u,p),o=o.sibling}function em(o,u,p){var w=o.tag;if(w===5||w===6)o=o.stateNode,u?p.insertBefore(o,u):p.appendChild(o);else if(w!==4&&(w===27&&uc(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(em(o,u,p),o=o.sibling;o!==null;)em(o,u,p),o=o.sibling}function bf(o){var u=o.stateNode,p=o.memoizedProps;try{for(var w=o.type,M=u.attributes;M.length;)u.removeAttributeNode(M[0]);Pa(u,w,p),u[Y]=o,u[ie]=p}catch(O){sr(o,o.return,O)}}var nl=!1,Ma=!1,rd=!1,Yc=typeof WeakSet=="function"?WeakSet:Set,rr=null;function Wb(o,u){if(o=o.containerInfo,_o=Ex,o=xr(o),oi(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var M=w.anchorOffset,O=w.focusNode;w=w.focusOffset;try{p.nodeType,O.nodeType}catch{p=null;break e}var X=0,ge=-1,Ze=-1,gt=0,Dt=0,Ft=o,bt=null;t:for(;;){for(var Et;Ft!==p||M!==0&&Ft.nodeType!==3||(ge=X+M),Ft!==O||w!==0&&Ft.nodeType!==3||(Ze=X+w),Ft.nodeType===3&&(X+=Ft.nodeValue.length),(Et=Ft.firstChild)!==null;)bt=Ft,Ft=Et;for(;;){if(Ft===o)break t;if(bt===p&&++gt===M&&(ge=X),bt===O&&++Dt===w&&(Ze=X),(Et=Ft.nextSibling)!==null)break;Ft=bt,bt=Ft.parentNode}Ft=Et}p=ge===-1||Ze===-1?null:{start:ge,end:Ze}}else p=null}p=p||{start:0,end:0}}else p=null;for(fs={focusedElem:o,selectionRange:p},Ex=!1,rr=u;rr!==null;)if(u=rr,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,rr=o;else for(;rr!==null;){switch(u=rr,O=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(p=0;p<o.length;p++)M=o[p],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&O!==null){o=void 0,p=u,M=O.memoizedProps,O=O.memoizedState,w=p.stateNode;try{var Nn=Wu(p.type,M);o=w.getSnapshotBeforeUpdate(Nn,O),w.__reactInternalSnapshotBeforeUpdate=o}catch(ar){sr(p,p.return,ar)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,p=o.nodeType,p===9)lm(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":lm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,rr=o;break}rr=u.return}}function _f(o,u,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:rl(o,p),w&4&&xf(5,p);break;case 1:if(rl(o,p),w&4)if(o=p.stateNode,u===null)try{o.componentDidMount()}catch(X){sr(p,p.return,X)}else{var M=Wu(p.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(M,u,o.__reactInternalSnapshotBeforeUpdate)}catch(X){sr(p,p.return,X)}}w&64&&rx(p),w&512&&nd(p,p.return);break;case 3:if(rl(o,p),w&64&&(o=p.updateQueue,o!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{uf(o,u)}catch(X){sr(p,p.return,X)}}break;case 27:u===null&&w&4&&bf(p);case 26:case 5:rl(o,p),u===null&&w&4&&Qp(p),w&512&&nd(p,p.return);break;case 12:rl(o,p);break;case 31:rl(o,p),w&4&&ax(o,p);break;case 13:rl(o,p),w&4&&ox(o,p),w&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=Xa.bind(null,p),vh(o,p))));break;case 22:if(w=p.memoizedState!==null||nl,!w){u=u!==null&&u.memoizedState!==null||Ma,M=nl;var O=Ma;nl=w,(Ma=u)&&!O?Nl(o,p,(p.subtreeFlags&8772)!==0):rl(o,p),nl=M,Ma=O}break;case 30:break;default:rl(o,p)}}function id(o){var u=o.alternate;u!==null&&(o.alternate=null,id(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&nt(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Zi=null,Wo=!1;function sc(o,u,p){for(p=p.child;p!==null;)ix(o,u,p),p=p.sibling}function ix(o,u,p){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Jr,p)}catch{}switch(p.tag){case 26:Ma||tl(p,u),sc(o,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Ma||tl(p,u);var w=Zi,M=Wo;uc(p.type)&&(Zi=p.stateNode,Wo=!1),sc(o,u,p),bh(p.stateNode),Zi=w,Wo=M;break;case 5:Ma||tl(p,u);case 6:if(w=Zi,M=Wo,Zi=null,sc(o,u,p),Zi=w,Wo=M,Zi!==null)if(Wo)try{(Zi.nodeType===9?Zi.body:Zi.nodeName==="HTML"?Zi.ownerDocument.body:Zi).removeChild(p.stateNode)}catch(O){sr(p,u,O)}else try{Zi.removeChild(p.stateNode)}catch(O){sr(p,u,O)}break;case 18:Zi!==null&&(Wo?(o=Zi,Zg(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),fm(o)):Zg(Zi,p.stateNode));break;case 4:w=Zi,M=Wo,Zi=p.stateNode.containerInfo,Wo=!0,sc(o,u,p),Zi=w,Wo=M;break;case 0:case 11:case 14:case 15:Kc(2,p,u),Ma||Kc(4,p,u),sc(o,u,p);break;case 1:Ma||(tl(p,u),w=p.stateNode,typeof w.componentWillUnmount=="function"&&td(p,u,w)),sc(o,u,p);break;case 21:sc(o,u,p);break;case 22:Ma=(w=Ma)||p.memoizedState!==null,sc(o,u,p),Ma=w;break;default:sc(o,u,p)}}function ax(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{fm(o)}catch(p){sr(u,u.return,p)}}}function ox(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{fm(o)}catch(p){sr(u,u.return,p)}}function Qb(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Yc),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Yc),u;default:throw Error(i(435,o.tag))}}function wf(o,u){var p=Qb(o);u.forEach(function(w){if(!p.has(w)){p.add(w);var M=ds.bind(null,o,w);w.then(M,M)}})}function Fo(o,u){var p=u.deletions;if(p!==null)for(var w=0;w<p.length;w++){var M=p[w],O=o,X=u,ge=X;e:for(;ge!==null;){switch(ge.tag){case 27:if(uc(ge.type)){Zi=ge.stateNode,Wo=!1;break e}break;case 5:Zi=ge.stateNode,Wo=!1;break e;case 3:case 4:Zi=ge.stateNode.containerInfo,Wo=!0;break e}ge=ge.return}if(Zi===null)throw Error(i(160));ix(O,X,M),Zi=null,Wo=!1,O=M.alternate,O!==null&&(O.return=null),M.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Hg(u,o),u=u.sibling}var Os=null;function Hg(o,u){var p=o.alternate,w=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Fo(u,o),oo(o),w&4&&(Kc(3,o,o.return),xf(3,o),Kc(5,o,o.return));break;case 1:Fo(u,o),oo(o),w&512&&(Ma||p===null||tl(p,p.return)),w&64&&nl&&(o=o.updateQueue,o!==null&&(w=o.callbacks,w!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var M=Os;if(Fo(u,o),oo(o),w&512&&(Ma||p===null||tl(p,p.return)),w&4){var O=p!==null?p.memoizedState:null;if(w=o.memoizedState,p===null)if(w===null)if(o.stateNode===null){e:{w=o.type,p=o.memoizedProps,M=M.ownerDocument||M;t:switch(w){case"title":O=M.getElementsByTagName("title")[0],(!O||O[Be]||O[Y]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=M.createElement(w),M.head.insertBefore(O,M.querySelector("head > title"))),Pa(O,w,p),O[Y]=o,Lt(O),w=O;break e;case"link":var X=xx("link","href",M).get(w+(p.href||""));if(X){for(var ge=0;ge<X.length;ge++)if(O=X[ge],O.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&O.getAttribute("rel")===(p.rel==null?null:p.rel)&&O.getAttribute("title")===(p.title==null?null:p.title)&&O.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){X.splice(ge,1);break t}}O=M.createElement(w),Pa(O,w,p),M.head.appendChild(O);break;case"meta":if(X=xx("meta","content",M).get(w+(p.content||""))){for(ge=0;ge<X.length;ge++)if(O=X[ge],O.getAttribute("content")===(p.content==null?null:""+p.content)&&O.getAttribute("name")===(p.name==null?null:p.name)&&O.getAttribute("property")===(p.property==null?null:p.property)&&O.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&O.getAttribute("charset")===(p.charSet==null?null:p.charSet)){X.splice(ge,1);break t}}O=M.createElement(w),Pa(O,w,p),M.head.appendChild(O);break;default:throw Error(i(468,w))}O[Y]=o,Lt(O),w=O}o.stateNode=w}else bx(M,o.type,o.stateNode);else o.stateNode=vx(M,w,o.memoizedProps);else O!==w?(O===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):O.count--,w===null?bx(M,o.type,o.stateNode):vx(M,w,o.memoizedProps)):w===null&&o.stateNode!==null&&Jp(o,o.memoizedProps,p.memoizedProps)}break;case 27:Fo(u,o),oo(o),w&512&&(Ma||p===null||tl(p,p.return)),p!==null&&w&4&&Jp(o,o.memoizedProps,p.memoizedProps);break;case 5:if(Fo(u,o),oo(o),w&512&&(Ma||p===null||tl(p,p.return)),o.flags&32){M=o.stateNode;try{qe(M,"")}catch(Nn){sr(o,o.return,Nn)}}w&4&&o.stateNode!=null&&(M=o.memoizedProps,Jp(o,M,p!==null?p.memoizedProps:M)),w&1024&&(rd=!0);break;case 6:if(Fo(u,o),oo(o),w&4){if(o.stateNode===null)throw Error(i(162));w=o.memoizedProps,p=o.stateNode;try{p.nodeValue=w}catch(Nn){sr(o,o.return,Nn)}}break;case 3:if(hm=null,M=Os,Os=_h(u.containerInfo),Fo(u,o),Os=M,oo(o),w&4&&p!==null&&p.memoizedState.isDehydrated)try{fm(u.containerInfo)}catch(Nn){sr(o,o.return,Nn)}rd&&(rd=!1,Wc(o));break;case 4:w=Os,Os=_h(o.stateNode.containerInfo),Fo(u,o),oo(o),Os=w;break;case 12:Fo(u,o),oo(o);break;case 31:Fo(u,o),oo(o),w&4&&(w=o.updateQueue,w!==null&&(o.updateQueue=null,wf(o,w)));break;case 13:Fo(u,o),oo(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ae=Oe()),w&4&&(w=o.updateQueue,w!==null&&(o.updateQueue=null,wf(o,w)));break;case 22:M=o.memoizedState!==null;var Ze=p!==null&&p.memoizedState!==null,gt=nl,Dt=Ma;if(nl=gt||M,Ma=Dt||Ze,Fo(u,o),Ma=Dt,nl=gt,oo(o),w&8192)e:for(u=o.stateNode,u._visibility=M?u._visibility&-2:u._visibility|1,M&&(p===null||Ze||nl||Ma||Rs(o)),p=null,u=o;;){if(u.tag===5||u.tag===26){if(p===null){Ze=p=u;try{if(O=Ze.stateNode,M)X=O.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{ge=Ze.stateNode;var Ft=Ze.memoizedProps.style,bt=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;ge.style.display=bt==null||typeof bt=="boolean"?"":(""+bt).trim()}}catch(Nn){sr(Ze,Ze.return,Nn)}}}else if(u.tag===6){if(p===null){Ze=u;try{Ze.stateNode.nodeValue=M?"":Ze.memoizedProps}catch(Nn){sr(Ze,Ze.return,Nn)}}}else if(u.tag===18){if(p===null){Ze=u;try{var Et=Ze.stateNode;M?Xg(Et,!0):Xg(Ze.stateNode,!1)}catch(Nn){sr(Ze,Ze.return,Nn)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}w&4&&(w=o.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,wf(o,p))));break;case 19:Fo(u,o),oo(o),w&4&&(w=o.updateQueue,w!==null&&(o.updateQueue=null,wf(o,w)));break;case 30:break;case 21:break;default:Fo(u,o),oo(o)}}function oo(o){var u=o.flags;if(u&2){try{for(var p,w=o.return;w!==null;){if(Ug(w)){p=w;break}w=w.return}if(p==null)throw Error(i(160));switch(p.tag){case 27:var M=p.stateNode,O=Vg(o);em(o,O,M);break;case 5:var X=p.stateNode;p.flags&32&&(qe(X,""),p.flags&=-33);var ge=Vg(o);em(o,ge,X);break;case 3:case 4:var Ze=p.stateNode.containerInfo,gt=Vg(o);qg(o,gt,Ze);break;default:throw Error(i(161))}}catch(Dt){sr(o,o.return,Dt)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Wc(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Wc(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function rl(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)_f(o,u.alternate,u),u=u.sibling}function Rs(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Kc(4,u,u.return),Rs(u);break;case 1:tl(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&td(u,u.return,p),Rs(u);break;case 27:bh(u.stateNode);case 26:case 5:tl(u,u.return),Rs(u);break;case 22:u.memoizedState===null&&Rs(u);break;case 30:Rs(u);break;default:Rs(u)}o=o.sibling}}function Nl(o,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var w=u.alternate,M=o,O=u,X=O.flags;switch(O.tag){case 0:case 11:case 15:Nl(M,O,p),xf(4,O);break;case 1:if(Nl(M,O,p),w=O,M=w.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(gt){sr(w,w.return,gt)}if(w=O,M=w.updateQueue,M!==null){var ge=w.stateNode;try{var Ze=M.shared.hiddenCallbacks;if(Ze!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Ze.length;M++)Jd(Ze[M],ge)}catch(gt){sr(w,w.return,gt)}}p&&X&64&&rx(O),nd(O,O.return);break;case 27:bf(O);case 26:case 5:Nl(M,O,p),p&&w===null&&X&4&&Qp(O),nd(O,O.return);break;case 12:Nl(M,O,p);break;case 31:Nl(M,O,p),p&&X&4&&ax(M,O);break;case 13:Nl(M,O,p),p&&X&4&&ox(M,O);break;case 22:O.memoizedState===null&&Nl(M,O,p),nd(O,O.return);break;case 30:break;default:Nl(M,O,p)}u=u.sibling}}function Xi(o,u){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Oo(p))}function hi(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Oo(o))}function Ls(o,u,p,w){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)$g(o,u,p,w),u=u.sibling}function $g(o,u,p,w){var M=u.flags;switch(u.tag){case 0:case 11:case 15:Ls(o,u,p,w),M&2048&&xf(9,u);break;case 1:Ls(o,u,p,w);break;case 3:Ls(o,u,p,w),M&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Oo(o)));break;case 12:if(M&2048){Ls(o,u,p,w),o=u.stateNode;try{var O=u.memoizedProps,X=O.id,ge=O.onPostCommit;typeof ge=="function"&&ge(X,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Ze){sr(u,u.return,Ze)}}else Ls(o,u,p,w);break;case 31:Ls(o,u,p,w);break;case 13:Ls(o,u,p,w);break;case 23:break;case 22:O=u.stateNode,X=u.alternate,u.memoizedState!==null?O._visibility&2?Ls(o,u,p,w):dh(o,u):O._visibility&2?Ls(o,u,p,w):(O._visibility|=2,ad(o,u,p,w,(u.subtreeFlags&10256)!==0||!1)),M&2048&&Xi(X,u);break;case 24:Ls(o,u,p,w),M&2048&&hi(u.alternate,u);break;default:Ls(o,u,p,w)}}function ad(o,u,p,w,M){for(M=M&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var O=o,X=u,ge=p,Ze=w,gt=X.flags;switch(X.tag){case 0:case 11:case 15:ad(O,X,ge,Ze,M),xf(8,X);break;case 23:break;case 22:var Dt=X.stateNode;X.memoizedState!==null?Dt._visibility&2?ad(O,X,ge,Ze,M):dh(O,X):(Dt._visibility|=2,ad(O,X,ge,Ze,M)),M&&gt&2048&&Xi(X.alternate,X);break;case 24:ad(O,X,ge,Ze,M),M&&gt&2048&&hi(X.alternate,X);break;default:ad(O,X,ge,Ze,M)}u=u.sibling}}function dh(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=o,w=u,M=w.flags;switch(w.tag){case 22:dh(p,w),M&2048&&Xi(w.alternate,w);break;case 24:dh(p,w),M&2048&&hi(w.alternate,w);break;default:dh(p,w)}u=u.sibling}}var hh=8192;function Qc(o,u,p){if(o.subtreeFlags&hh)for(o=o.child;o!==null;)Jc(o,u,p),o=o.sibling}function Jc(o,u,p){switch(o.tag){case 26:Qc(o,u,p),o.flags&hh&&o.memoizedState!==null&&BP(p,Os,o.memoizedState,o.memoizedProps);break;case 5:Qc(o,u,p);break;case 3:case 4:var w=Os;Os=_h(o.stateNode.containerInfo),Qc(o,u,p),Os=w;break;case 22:o.memoizedState===null&&(w=o.alternate,w!==null&&w.memoizedState!==null?(w=hh,hh=16777216,Qc(o,u,p),hh=w):Qc(o,u,p));break;default:Qc(o,u,p)}}function eu(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function fh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var w=u[p];rr=w,Ml(w,o)}eu(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ta(o),o=o.sibling}function ta(o){switch(o.tag){case 0:case 11:case 15:fh(o),o.flags&2048&&Kc(9,o,o.return);break;case 3:fh(o);break;case 12:fh(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,tu(o)):fh(o);break;default:fh(o)}}function tu(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var w=u[p];rr=w,Ml(w,o)}eu(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Kc(8,u,u.return),tu(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,tu(u));break;default:tu(u)}o=o.sibling}}function Ml(o,u){for(;rr!==null;){var p=rr;switch(p.tag){case 0:case 11:case 15:Kc(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Oo(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,rr=w;else e:for(p=o;rr!==null;){w=rr;var M=w.sibling,O=w.return;if(id(w),w===p){rr=null;break e}if(M!==null){M.return=O,rr=M;break e}rr=O}}}var tm={getCacheForType:function(o){var u=wn(si),p=u.data.get(o);return p===void 0&&(p=o(),u.data.set(o,p)),p},cacheSignal:function(){return wn(si).controller.signal}},nm=typeof WeakMap=="function"?WeakMap:Map,Wr=0,ni=null,ur=null,Pr=0,vi=0,Qr=null,Uo=!1,od=!1,r=!1,s=0,h=0,v=0,S=0,T=0,N=0,R=0,V=null,G=null,K=!1,ae=0,de=0,le=1/0,fe=null,Me=null,Ie=0,Ue=null,at=null,ot=0,ct=0,wt=null,jt=null,Ct=0,Jt=null;function nn(){return(Wr&2)!==0&&Pr!==0?Pr&-Pr:Ae.T!==null?lc():gi()}function ln(){if(N===0)if((Pr&536870912)===0||ve){var o=Eo;Eo<<=1,(Eo&3932160)===0&&(Eo=262144),N=o}else N=536870912;return o=bo.current,o!==null&&(o.flags|=32),N}function sn(o,u,p){(o===ni&&(vi===2||vi===9)||o.cancelPendingCommit!==null)&&(Ln(o,0),Kn(o,Pr,N,!1)),fr(o,p),((Wr&2)===0||o!==ni)&&(o===ni&&((Wr&2)===0&&(S|=p),h===4&&Kn(o,Pr,N,!1)),Ho(o))}function cn(o,u,p){if((Wr&6)!==0)throw Error(i(327));var w=!p&&(u&127)===0&&(u&o.expiredLanes)===0||Ra(o,u),M=w?Ua(o,u):ci(o,u,!0),O=w;do{if(M===0){od&&!w&&Kn(o,u,0,!1);break}else{if(p=o.current.alternate,O&&!Gt(p)){M=ci(o,u,!1),O=!1;continue}if(M===2){if(O=u,o.errorRecoveryDisabledLanes&O)var X=0;else X=o.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){u=X;e:{var ge=o;M=V;var Ze=ge.current.memoizedState.isDehydrated;if(Ze&&(Ln(ge,X).flags|=256),X=ci(ge,X,!1),X!==2){if(r&&!Ze){ge.errorRecoveryDisabledLanes|=O,S|=O,M=4;break e}O=G,G=M,O!==null&&(G===null?G=O:G.push.apply(G,O))}M=X}if(O=!1,M!==2)continue}}if(M===1){Ln(o,0),Kn(o,u,0,!0);break}e:{switch(w=o,O=M,O){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:Kn(w,u,N,!Uo);break e;case 2:G=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(M=ae+300-Oe(),10<M)){if(Kn(w,u,N,!Uo),Co(w,0,!0)!==0)break e;ot=u,w.timeoutHandle=Nf(rn.bind(null,w,p,G,fe,K,u,N,S,R,Uo,O,"Throttled",-0,0),M);break e}rn(w,p,G,fe,K,u,N,S,R,Uo,O,null,-0,0)}}break}while(!0);Ho(o)}function rn(o,u,p,w,M,O,X,ge,Ze,gt,Dt,Ft,bt,Et){if(o.timeoutHandle=-1,Ft=u.subtreeFlags,Ft&8192||(Ft&16785408)===16785408){Ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$i},Jc(u,O,Ft);var Nn=(O&62914560)===O?ae-Oe():(O&4194048)===O?de-Oe():0;if(Nn=FP(Ft,Nn),Nn!==null){ot=O,o.cancelPendingCommit=Nn(fi.bind(null,o,u,O,p,w,M,X,ge,Ze,Dt,Ft,null,bt,Et)),Kn(o,O,X,!gt);return}}fi(o,u,O,p,w,M,X,ge,Ze)}function Gt(o){for(var u=o;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var M=p[w],O=M.getSnapshot;M=M.value;try{if(!fo(O(),M))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Kn(o,u,p,w){u&=~T,u&=~S,o.suspendedLanes|=u,o.pingedLanes&=~u,w&&(o.warmLanes|=u),w=o.expirationTimes;for(var M=u;0<M;){var O=31-Sr(M),X=1<<O;w[O]=-1,M&=~X}p!==0&&Fr(o,p,u)}function Ir(){return(Wr&6)===0?(ru(0),!1):!0}function br(){if(ur!==null){if(vi===0)var o=ur.return;else o=ur,xn=Zt=null,df(o),Js=null,Yl=0,o=ur;for(;o!==null;)ed(o.alternate,o),o=o.return;ur=null}}function Ln(o,u){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,om(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),ot=0,br(),ni=o,ur=p=Io(o.current,null),Pr=u,vi=0,Qr=null,Uo=!1,od=Ra(o,u),r=!1,R=N=T=S=v=h=0,G=V=null,K=!1,(u&8)!==0&&(u|=u&32);var w=o.entangledLanes;if(w!==0)for(o=o.entanglements,w&=u;0<w;){var M=31-Sr(w),O=1<<M;u|=o[M],w&=~O}return s=u,Bc(),p}function or(o,u){yr=null,Ae.H=sh,u===Ns||u===kr?(u=xa(),vi=3):u===li?(u=xa(),vi=4):vi=u===$p?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Qr=u,ur===null&&(h=1,Hp(o,Ii(u,o.current)))}function dr(){var o=bo.current;return o===null?!0:(Pr&4194048)===Pr?Ms===null:(Pr&62914560)===Pr||(Pr&536870912)!==0?o===Ms:!1}function Yn(){var o=Ae.H;return Ae.H=sh,o===null?sh:o}function cr(){var o=Ae.A;return Ae.A=tm,o}function _r(){h=4,Uo||(Pr&4194048)!==Pr&&bo.current!==null||(od=!0),(v&134217727)===0&&(S&134217727)===0||ni===null||Kn(ni,Pr,N,!1)}function ci(o,u,p){var w=Wr;Wr|=2;var M=Yn(),O=cr();(ni!==o||Pr!==u)&&(fe=null,Ln(o,u)),u=!1;var X=h;e:do try{if(vi!==0&&ur!==null){var ge=ur,Ze=Qr;switch(vi){case 8:br(),X=6;break e;case 3:case 2:case 9:case 6:bo.current===null&&(u=!0);var gt=vi;if(vi=0,Qr=null,Yi(o,ge,Ze,gt),p&&od){X=0;break e}break;default:gt=vi,vi=0,Qr=null,Yi(o,ge,Ze,gt)}}Mi(),X=h;break}catch(Dt){or(o,Dt)}while(!0);return u&&o.shellSuspendCounter++,xn=Zt=null,Wr=w,Ae.H=M,Ae.A=O,ur===null&&(ni=null,Pr=0,Bc()),X}function Mi(){for(;ur!==null;)Ki(ur)}function Ua(o,u){var p=Wr;Wr|=2;var w=Yn(),M=cr();ni!==o||Pr!==u?(fe=null,le=Oe()+500,Ln(o,u)):od=Ra(o,u);e:do try{if(vi!==0&&ur!==null){u=ur;var O=Qr;t:switch(vi){case 1:vi=0,Qr=null,Yi(o,u,O,1);break;case 2:case 9:if(La(O)){vi=0,Qr=null,pa(u);break}u=function(){vi!==2&&vi!==9||ni!==o||(vi=7),Ho(o)},O.then(u,u);break e;case 3:vi=7;break e;case 4:vi=5;break e;case 7:La(O)?(vi=0,Qr=null,pa(u)):(vi=0,Qr=null,Yi(o,u,O,7));break;case 5:var X=null;switch(ur.tag){case 26:X=ur.memoizedState;case 5:case 27:var ge=ur;if(X?CS(X):ge.stateNode.complete){vi=0,Qr=null;var Ze=ge.sibling;if(Ze!==null)ur=Ze;else{var gt=ge.return;gt!==null?(ur=gt,ma(gt)):ur=null}break t}}vi=0,Qr=null,Yi(o,u,O,5);break;case 6:vi=0,Qr=null,Yi(o,u,O,6);break;case 8:br(),h=6;break e;default:throw Error(i(462))}}Va();break}catch(Dt){or(o,Dt)}while(!0);return xn=Zt=null,Ae.H=w,Ae.A=M,Wr=p,ur!==null?0:(ni=null,Pr=0,Bc(),h)}function Va(){for(;ur!==null&&!Ve();)Ki(ur)}function Ki(o){var u=zg(o.alternate,o,s);o.memoizedProps=o.pendingProps,u===null?ma(o):ur=u}function pa(o){var u=o,p=u.alternate;switch(u.tag){case 15:case 0:u=Og(p,u,u.pendingProps,u.type,void 0,Pr);break;case 11:u=Og(p,u,u.pendingProps,u.type.render,u.ref,Pr);break;case 5:df(u);default:ed(p,u),u=ur=to(u,s),u=zg(p,u,s)}o.memoizedProps=o.pendingProps,u===null?ma(o):ur=u}function Yi(o,u,p,w){xn=Zt=null,df(u),Js=null,Yl=0;var M=u.return;try{if(lh(o,M,u,p,Pr)){h=1,Hp(o,Ii(p,o.current)),ur=null;return}}catch(O){if(M!==null)throw ur=M,O;h=1,Hp(o,Ii(p,o.current)),ur=null;return}u.flags&32768?(ve||w===1?o=!0:od||(Pr&536870912)!==0?o=!1:(Uo=o=!0,(w===2||w===9||w===3||w===6)&&(w=bo.current,w!==null&&w.tag===13&&(w.flags|=16384))),ca(u,o)):ma(u)}function ma(o){var u=o;do{if((u.flags&32768)!==0){ca(u,Uo);return}o=u.return;var p=Wp(u.alternate,u,s);if(p!==null){ur=p;return}if(u=u.sibling,u!==null){ur=u;return}ur=u=o}while(u!==null);h===0&&(h=5)}function ca(o,u){do{var p=vf(o.alternate,o);if(p!==null){p.flags&=32767,ur=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(o=o.sibling,o!==null)){ur=o;return}ur=o=p}while(o!==null);h=6,ur=null}function fi(o,u,p,w,M,O,X,ge,Ze){o.cancelPendingCommit=null;do $r();while(Ie!==0);if((Wr&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(O=u.lanes|u.childLanes,O|=Uu,Ti(o,p,O,X,ge,Ze),o===ni&&(ur=ni=null,Pr=0),at=u,Ue=o,ot=p,ct=O,wt=M,jt=w,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,ba(on,function(){return ua(),null})):(o.callbackNode=null,o.callbackPriority=0),w=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||w){w=Ae.T,Ae.T=null,M=De.p,De.p=2,X=Wr,Wr|=4;try{Wb(o,u,p)}finally{Wr=X,De.p=M,Ae.T=w}}Ie=1,Vi(),mr(),Br()}}function Vi(){if(Ie===1){Ie=0;var o=Ue,u=at,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=Ae.T,Ae.T=null;var w=De.p;De.p=2;var M=Wr;Wr|=4;try{Hg(u,o);var O=fs,X=xr(o.containerInfo),ge=O.focusedElem,Ze=O.selectionRange;if(X!==ge&&ge&&ge.ownerDocument&&_l(ge.ownerDocument.documentElement,ge)){if(Ze!==null&&oi(ge)){var gt=Ze.start,Dt=Ze.end;if(Dt===void 0&&(Dt=gt),"selectionStart"in ge)ge.selectionStart=gt,ge.selectionEnd=Math.min(Dt,ge.value.length);else{var Ft=ge.ownerDocument||document,bt=Ft&&Ft.defaultView||window;if(bt.getSelection){var Et=bt.getSelection(),Nn=ge.textContent.length,ar=Math.min(Ze.start,Nn),qi=Ze.end===void 0?ar:Math.min(Ze.end,Nn);!Et.extend&&ar>qi&&(X=qi,qi=ar,ar=X);var ut=Yd(ge,ar),tt=Yd(ge,qi);if(ut&&tt&&(Et.rangeCount!==1||Et.anchorNode!==ut.node||Et.anchorOffset!==ut.offset||Et.focusNode!==tt.node||Et.focusOffset!==tt.offset)){var mt=Ft.createRange();mt.setStart(ut.node,ut.offset),Et.removeAllRanges(),ar>qi?(Et.addRange(mt),Et.extend(tt.node,tt.offset)):(mt.setEnd(tt.node,tt.offset),Et.addRange(mt))}}}}for(Ft=[],Et=ge;Et=Et.parentNode;)Et.nodeType===1&&Ft.push({element:Et,left:Et.scrollLeft,top:Et.scrollTop});for(typeof ge.focus=="function"&&ge.focus(),ge=0;ge<Ft.length;ge++){var zt=Ft[ge];zt.element.scrollLeft=zt.left,zt.element.scrollTop=zt.top}}Ex=!!_o,fs=_o=null}finally{Wr=M,De.p=w,Ae.T=p}}o.current=u,Ie=2}}function mr(){if(Ie===2){Ie=0;var o=Ue,u=at,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=Ae.T,Ae.T=null;var w=De.p;De.p=2;var M=Wr;Wr|=4;try{_f(o,u.alternate,u)}finally{Wr=M,De.p=w,Ae.T=p}}Ie=3}}function Br(){if(Ie===4||Ie===3){Ie=0,Vt();var o=Ue,u=at,p=ot,w=jt;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ie=5:(Ie=0,at=Ue=null,ri(o,o.pendingLanes));var M=o.pendingLanes;if(M===0&&(Me=null),eo(p),u=u.stateNode,Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Jr,u,void 0,(u.current.flags&128)===128)}catch{}if(w!==null){u=Ae.T,M=De.p,De.p=2,Ae.T=null;try{for(var O=o.onRecoverableError,X=0;X<w.length;X++){var ge=w[X];O(ge.value,{componentStack:ge.stack})}}finally{Ae.T=u,De.p=M}}(ot&3)!==0&&$r(),Ho(o),M=o.pendingLanes,(p&261930)!==0&&(M&42)!==0?o===Jt?Ct++:(Ct=0,Jt=o):Ct=0,ru(0)}}function ri(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Oo(u)))}function $r(){return Vi(),mr(),Br(),ua()}function ua(){if(Ie!==5)return!1;var o=Ue,u=ct;ct=0;var p=eo(ot),w=Ae.T,M=De.p;try{De.p=32>p?32:p,Ae.T=null,p=wt,wt=null;var O=Ue,X=ot;if(Ie=0,at=Ue=null,ot=0,(Wr&6)!==0)throw Error(i(331));var ge=Wr;if(Wr|=4,ta(O.current),$g(O,O.current,X,p),Wr=ge,ru(0,!1),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Jr,O)}catch{}return!0}finally{De.p=M,Ae.T=w,ri(o,u)}}function Gr(o,u,p){u=Ii(p,u),u=Pg(o.stateNode,u,2),o=$c(o,u,2),o!==null&&(fr(o,2),Ho(o))}function sr(o,u,p){if(o.tag===3)Gr(o,o,p);else for(;u!==null;){if(u.tag===3){Gr(u,o,p);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Me===null||!Me.has(w))){o=Ii(p,o),p=Wv(2),w=$c(u,p,2),w!==null&&(ff(p,w,u,o),fr(w,2),Ho(w));break}}u=u.return}}function xi(o,u,p){var w=o.pingCache;if(w===null){w=o.pingCache=new nm;var M=new Set;w.set(u,M)}else M=w.get(u),M===void 0&&(M=new Set,w.set(u,M));M.has(p)||(r=!0,M.add(p),o=il.bind(null,o,u,p),u.then(o,o))}function il(o,u,p){var w=o.pingCache;w!==null&&w.delete(u),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,ni===o&&(Pr&p)===p&&(h===4||h===3&&(Pr&62914560)===Pr&&300>Oe()-ae?(Wr&2)===0&&Ln(o,0):T|=p,R===Pr&&(R=0)),Ho(o)}function Da(o,u){u===0&&(u=$o()),o=Pi(o,u),o!==null&&(fr(o,u),Ho(o))}function Xa(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),Da(o,p)}function ds(o,u){var p=0;switch(o.tag){case 31:case 13:var w=o.stateNode,M=o.memoizedState;M!==null&&(p=M.retryLane);break;case 19:w=o.stateNode;break;case 22:w=o.stateNode._retryCache;break;default:throw Error(i(314))}w!==null&&w.delete(u),Da(o,p)}function ba(o,u){return xe(o,u)}var Vo=null,qo=null,hs=!1,nu=!1,zs=!1,Dl=0;function Ho(o){o!==qo&&o.next===null&&(qo===null?Vo=qo=o:qo=qo.next=o),nu=!0,hs||(hs=!0,iu())}function ru(o,u){if(!zs&&nu){zs=!0;do for(var p=!1,w=Vo;w!==null;){if(o!==0){var M=w.pendingLanes;if(M===0)var O=0;else{var X=w.suspendedLanes,ge=w.pingedLanes;O=(1<<31-Sr(42|o)+1)-1,O&=M&~(X&~ge),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(p=!0,gh(w,O))}else O=Pr,O=Co(w,w===ni?O:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(O&3)===0||Ra(w,O)||(p=!0,gh(w,O));w=w.next}while(p);zs=!1}}function ph(){mh()}function mh(){nu=hs=!1;var o=0;Dl!==0&&Ur()&&(o=Dl);for(var u=Oe(),p=null,w=Vo;w!==null;){var M=w.next,O=Sf(w,u);O===0?(w.next=null,p===null?Vo=M:p.next=M,M===null&&(qo=p)):(p=w,(o!==0||(O&3)!==0)&&(nu=!0)),w=M}Ie!==0&&Ie!==5||ru(o),Dl!==0&&(Dl=0)}function Sf(o,u){for(var p=o.suspendedLanes,w=o.pingedLanes,M=o.expirationTimes,O=o.pendingLanes&-62914561;0<O;){var X=31-Sr(O),ge=1<<X,Ze=M[X];Ze===-1?((ge&p)===0||(ge&w)!==0)&&(M[X]=ws(ge,u)):Ze<=u&&(o.expiredLanes|=ge),O&=~ge}if(u=ni,p=Pr,p=Co(o,o===u?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),w=o.callbackNode,p===0||o===u&&(vi===2||vi===9)||o.cancelPendingCommit!==null)return w!==null&&w!==null&&Re(w),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||Ra(o,p)){if(u=p&-p,u===o.callbackPriority)return u;switch(w!==null&&Re(w),eo(p)){case 2:case 8:p=Tt;break;case 32:p=on;break;case 268435456:p=Xn;break;default:p=on}return w=rm.bind(null,o),p=xe(p,w),o.callbackPriority=u,o.callbackNode=p,u}return w!==null&&w!==null&&Re(w),o.callbackPriority=2,o.callbackNode=null,2}function rm(o,u){if(Ie!==0&&Ie!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if($r()&&o.callbackNode!==p)return null;var w=Pr;return w=Co(o,o===ni?w:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),w===0?null:(cn(o,w,u),Sf(o,Oe()),o.callbackNode!=null&&o.callbackNode===p?rm.bind(null,o):null)}function gh(o,u){if($r())return null;cn(o,u,!0)}function iu(){cx(function(){(Wr&6)!==0?xe(Qe,ph):mh()})}function lc(){if(Dl===0){var o=js;o===0&&(o=So,So<<=1,(So&261888)===0&&(So=256)),Dl=o}return Dl}function cc(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ea(""+o)}function sd(o,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,o.id&&p.setAttribute("form",o.id),u.parentNode.insertBefore(p,u),o=new FormData(o),p.parentNode.removeChild(p),o}function Ef(o,u,p,w,M){if(u==="submit"&&p&&p.stateNode===M){var O=cc((M[ie]||null).action),X=w.submitter;X&&(u=(u=X[ie]||null)?cc(u.formAction):X.getAttribute("formAction"),u!==null&&(O=u,X=null));var ge=new Nu("action","action",null,w,M);o.push({event:ge,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Dl!==0){var Ze=X?sd(M,X):new FormData(M);ro(p,{pending:!0,data:Ze,method:M.method,action:O},null,Ze)}}else typeof O=="function"&&(ge.preventDefault(),Ze=X?sd(M,X):new FormData(M),ro(p,{pending:!0,data:Ze,method:M.method,action:O},O,Ze))},currentTarget:M}]})}}for(var yh=0;yh<Ws.length;yh++){var Cf=Ws[yh],Tf=Cf.toLowerCase(),kf=Cf[0].toUpperCase()+Cf.slice(1);Po(Tf,"on"+kf)}Po(bp,"onAnimationEnd"),Po(Do,"onAnimationIteration"),Po(sf,"onAnimationStart"),Po("dblclick","onDoubleClick"),Po("focusin","onFocus"),Po("focusout","onBlur"),Po(po,"onTransitionRun"),Po(_p,"onTransitionStart"),Po(ug,"onTransitionCancel"),Po(Zo,"onTransitionEnd"),Dn("onMouseEnter",["mouseout","mouseover"]),Dn("onMouseLeave",["mouseout","mouseover"]),Dn("onPointerEnter",["pointerout","pointerover"]),Dn("onPointerLeave",["pointerout","pointerover"]),qt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qt("onBeforeInput",["compositionend","keypress","textInput","paste"]),qt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),im=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(au));function ld(o,u){u=(u&4)!==0;for(var p=0;p<o.length;p++){var w=o[p],M=w.event;w=w.listeners;e:{var O=void 0;if(u)for(var X=w.length-1;0<=X;X--){var ge=w[X],Ze=ge.instance,gt=ge.currentTarget;if(ge=ge.listener,Ze!==O&&M.isPropagationStopped())break e;O=ge,M.currentTarget=gt;try{O(M)}catch(Dt){ja(Dt)}M.currentTarget=null,O=Ze}else for(X=0;X<w.length;X++){if(ge=w[X],Ze=ge.instance,gt=ge.currentTarget,ge=ge.listener,Ze!==O&&M.isPropagationStopped())break e;O=ge,M.currentTarget=gt;try{O(M)}catch(Dt){ja(Dt)}M.currentTarget=null,O=Ze}}}}function Cr(o,u){var p=u[je];p===void 0&&(p=u[je]=new Set);var w=o+"__bubble";p.has(w)||(dd(u,o,2,!1),p.add(w))}function cd(o,u,p){var w=0;u&&(w|=4),dd(p,o,w,u)}var ud="_reactListening"+Math.random().toString(36).slice(2);function ou(o){if(!o[ud]){o[ud]=!0,en.forEach(function(p){p!=="selectionchange"&&(im.has(p)||cd(p,!1,o),cd(p,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[ud]||(u[ud]=!0,cd("selectionchange",!1,u))}}function dd(o,u,p,w){switch(DS(u)){case 2:var M=qP;break;case 8:M=HP;break;default:M=n_}p=M.bind(null,u,p,o),M=void 0,!zl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(M=!0),w?M!==void 0?o.addEventListener(u,p,{capture:!0,passive:M}):o.addEventListener(u,p,!0):M!==void 0?o.addEventListener(u,p,{passive:M}):o.addEventListener(u,p,!1)}function hd(o,u,p,w,M){var O=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var X=w.tag;if(X===3||X===4){var ge=w.stateNode.containerInfo;if(ge===M)break;if(X===4)for(X=w.return;X!==null;){var Ze=X.tag;if((Ze===3||Ze===4)&&X.stateNode.containerInfo===M)return;X=X.return}for(;ge!==null;){if(X=xt(ge),X===null)return;if(Ze=X.tag,Ze===5||Ze===6||Ze===26||Ze===27){w=O=X;continue e}ge=ge.parentNode}}w=w.return}jc(function(){var gt=O,Dt=fl(p),Ft=[];e:{var bt=ks.get(o);if(bt!==void 0){var Et=Nu,Nn=o;switch(o){case"keypress":if(Es(p)===0)break e;case"keydown":case"keyup":Et=mp;break;case"focusin":Nn="focus",Et=zd;break;case"focusout":Nn="blur",Et=zd;break;case"beforeblur":case"afterblur":Et=zd;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=Du;break;case bp:case Do:case sf:Et=ef;break;case Zo:Et=Vd;break;case"scroll":case"scrollend":Et=sg;break;case"wheel":Et=Ic;break;case"copy":case"cut":case"paste":Et=tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=Fd;break;case"toggle":case"beforetoggle":Et=Oc}var ar=(u&4)!==0,qi=!ar&&(o==="scroll"||o==="scrollend"),ut=ar?bt!==null?bt+"Capture":null:bt;ar=[];for(var tt=gt,mt;tt!==null;){var zt=tt;if(mt=zt.stateNode,zt=zt.tag,zt!==5&&zt!==26&&zt!==27||mt===null||ut===null||(zt=gl(tt,ut),zt!=null&&ar.push(su(tt,zt,mt))),qi)break;tt=tt.return}0<ar.length&&(bt=new Et(bt,Nn,null,p,Dt),Ft.push({event:bt,listeners:ar}))}}if((u&7)===0){e:{if(bt=o==="mouseover"||o==="pointerover",Et=o==="mouseout"||o==="pointerout",bt&&p!==Rd&&(Nn=p.relatedTarget||p.fromElement)&&(xt(Nn)||Nn[se]))break e;if((Et||bt)&&(bt=Dt.window===Dt?Dt:(bt=Dt.ownerDocument)?bt.defaultView||bt.parentWindow:window,Et?(Nn=p.relatedTarget||p.toElement,Et=gt,Nn=Nn?xt(Nn):null,Nn!==null&&(qi=d(Nn),ar=Nn.tag,Nn!==qi||ar!==5&&ar!==27&&ar!==6)&&(Nn=null)):(Et=null,Nn=gt),Et!==Nn)){if(ar=hp,zt="onMouseLeave",ut="onMouseEnter",tt="mouse",(o==="pointerout"||o==="pointerover")&&(ar=Fd,zt="onPointerLeave",ut="onPointerEnter",tt="pointer"),qi=Et==null?bt:yt(Et),mt=Nn==null?bt:yt(Nn),bt=new ar(zt,tt+"leave",Et,p,Dt),bt.target=qi,bt.relatedTarget=mt,zt=null,xt(Dt)===gt&&(ar=new ar(ut,tt+"enter",Nn,p,Dt),ar.target=mt,ar.relatedTarget=qi,zt=ar),qi=zt,Et&&Nn)t:{for(ar=jf,ut=Et,tt=Nn,mt=0,zt=ut;zt;zt=ar(zt))mt++;zt=0;for(var Qn=tt;Qn;Qn=ar(Qn))zt++;for(;0<mt-zt;)ut=ar(ut),mt--;for(;0<zt-mt;)tt=ar(tt),zt--;for(;mt--;){if(ut===tt||tt!==null&&ut===tt.alternate){ar=ut;break t}ut=ar(ut),tt=ar(tt)}ar=null}else ar=null;Et!==null&&fd(Ft,bt,Et,ar,!1),Nn!==null&&qi!==null&&fd(Ft,qi,Nn,ar,!0)}}e:{if(bt=gt?yt(gt):window,Et=bt.nodeName&&bt.nodeName.toLowerCase(),Et==="select"||Et==="input"&&bt.type==="file")var pi=of;else if(rf(bt))if(Zl)pi=Lc;else{pi=Xl;var Un=cg}else Et=bt.nodeName,!Et||Et.toLowerCase()!=="input"||bt.type!=="checkbox"&&bt.type!=="radio"?gt&&Pn(gt.elementType)&&(pi=of):pi=xp;if(pi&&(pi=pi(o,gt))){Lu(Ft,pi,p,Dt);break e}Un&&Un(o,bt,gt),o==="focusout"&&gt&&bt.type==="number"&&gt.memoizedProps.value!=null&&To(bt,"number",bt.value)}switch(Un=gt?yt(gt):window,o){case"focusin":(rf(Un)||Un.contentEditable==="true")&&(sa=Un,fn=gt,Kl=null);break;case"focusout":Kl=fn=sa=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,No(Ft,p,Dt);break;case"selectionchange":if(wl)break;case"keydown":case"keyup":No(Ft,p,Dt)}var jr;if(Hd)e:{switch(o){case"compositionstart":var Zr="onCompositionStart";break e;case"compositionend":Zr="onCompositionEnd";break e;case"compositionupdate":Zr="onCompositionUpdate";break e}Zr=void 0}else Rc?nf(o,p)&&(Zr="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Zr="onCompositionStart");Zr&&(Hl&&p.locale!=="ko"&&(Rc||Zr!=="onCompositionStart"?Zr==="onCompositionEnd"&&Rc&&(jr=Ys()):(ei=Dt,yl="value"in ei?ei.value:ei.textContent,Rc=!0)),Un=Pl(gt,Zr),0<Un.length&&(Zr=new Vl(Zr,o,null,p,Dt),Ft.push({event:Zr,listeners:Un}),jr?Zr.data=jr:(jr=Ou(p),jr!==null&&(Zr.data=jr)))),(jr=yp?Ru(o,p):$d(o,p))&&(Zr=Pl(gt,"onBeforeInput"),0<Zr.length&&(Un=new Vl("onBeforeInput","beforeinput",null,p,Dt),Ft.push({event:Un,listeners:Zr}),Un.data=jr)),Ef(Ft,o,gt,p,Dt)}ld(Ft,u)})}function su(o,u,p){return{instance:o,listener:u,currentTarget:p}}function Pl(o,u){for(var p=u+"Capture",w=[];o!==null;){var M=o,O=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||O===null||(M=gl(o,p),M!=null&&w.unshift(su(o,M,O)),M=gl(o,u),M!=null&&w.push(su(o,M,O))),o.tag===3)return w;o=o.return}return[]}function jf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function fd(o,u,p,w,M){for(var O=u._reactName,X=[];p!==null&&p!==w;){var ge=p,Ze=ge.alternate,gt=ge.stateNode;if(ge=ge.tag,Ze!==null&&Ze===w)break;ge!==5&&ge!==26&&ge!==27||gt===null||(Ze=gt,M?(gt=gl(p,O),gt!=null&&X.unshift(su(p,gt,Ze))):M||(gt=gl(p,O),gt!=null&&X.push(su(p,gt,Ze)))),p=p.return}X.length!==0&&o.push({event:u,listeners:X})}var Gg=/\r\n?/g,sx=/\u0000|\uFFFD/g;function lx(o){return(typeof o=="string"?o:""+o).replace(Gg,`
`).replace(sx,"")}function am(o,u){return u=lx(u),lx(o)===u}function bi(o,u,p,w,M,O){switch(p){case"children":typeof w=="string"?u==="body"||u==="textarea"&&w===""||qe(o,w):(typeof w=="number"||typeof w=="bigint")&&u!=="body"&&qe(o,""+w);break;case"className":nr(o,"class",w);break;case"tabIndex":nr(o,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":nr(o,p,w);break;case"style":hn(o,w,O);break;case"data":if(u!=="object"){nr(o,"data",w);break}case"src":case"href":if(w===""&&(u!=="a"||p!=="href")){o.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){o.removeAttribute(p);break}w=ea(""+w),o.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(p==="formAction"?(u!=="input"&&bi(o,u,"name",M.name,M,null),bi(o,u,"formEncType",M.formEncType,M,null),bi(o,u,"formMethod",M.formMethod,M,null),bi(o,u,"formTarget",M.formTarget,M,null)):(bi(o,u,"encType",M.encType,M,null),bi(o,u,"method",M.method,M,null),bi(o,u,"target",M.target,M,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){o.removeAttribute(p);break}w=ea(""+w),o.setAttribute(p,w);break;case"onClick":w!=null&&(o.onclick=$i);break;case"onScroll":w!=null&&Cr("scroll",o);break;case"onScrollEnd":w!=null&&Cr("scrollend",o);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(p=w.__html,p!=null){if(M.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"multiple":o.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":o.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){o.removeAttribute("xlink:href");break}p=ea(""+w),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?o.setAttribute(p,""+w):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":w===!0?o.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?o.setAttribute(p,w):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?o.setAttribute(p,w):o.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?o.removeAttribute(p):o.setAttribute(p,w);break;case"popover":Cr("beforetoggle",o),Cr("toggle",o),Bn(o,"popover",w);break;case"xlinkActuate":pr(o,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":pr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":pr(o,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":pr(o,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":pr(o,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":pr(o,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":pr(o,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":pr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":pr(o,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Bn(o,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Hi.get(p)||p,Bn(o,p,w))}}function Af(o,u,p,w,M,O){switch(p){case"style":hn(o,w,O);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(p=w.__html,p!=null){if(M.children!=null)throw Error(i(60));o.innerHTML=p}}break;case"children":typeof w=="string"?qe(o,w):(typeof w=="number"||typeof w=="bigint")&&qe(o,""+w);break;case"onScroll":w!=null&&Cr("scroll",o);break;case"onScrollEnd":w!=null&&Cr("scrollend",o);break;case"onClick":w!=null&&(o.onclick=$i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dn.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(M=p.endsWith("Capture"),u=p.slice(2,M?p.length-7:void 0),O=o[ie]||null,O=O!=null?O[p]:null,typeof O=="function"&&o.removeEventListener(u,O,M),typeof w=="function")){typeof O!="function"&&O!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(u,w,M);break e}p in o?o[p]=w:w===!0?o.setAttribute(p,""):Bn(o,p,w)}}}function Pa(o,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cr("error",o),Cr("load",o);var w=!1,M=!1,O;for(O in p)if(p.hasOwnProperty(O)){var X=p[O];if(X!=null)switch(O){case"src":w=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:bi(o,u,O,X,p,null)}}M&&bi(o,u,"srcSet",p.srcSet,p,null),w&&bi(o,u,"src",p.src,p,null);return;case"input":Cr("invalid",o);var ge=O=X=M=null,Ze=null,gt=null;for(w in p)if(p.hasOwnProperty(w)){var Dt=p[w];if(Dt!=null)switch(w){case"name":M=Dt;break;case"type":X=Dt;break;case"checked":Ze=Dt;break;case"defaultChecked":gt=Dt;break;case"value":O=Dt;break;case"defaultValue":ge=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(i(137,u));break;default:bi(o,u,w,Dt,p,null)}}Ji(o,O,ge,Ze,gt,X,M,!1);return;case"select":Cr("invalid",o),w=X=O=null;for(M in p)if(p.hasOwnProperty(M)&&(ge=p[M],ge!=null))switch(M){case"value":O=ge;break;case"defaultValue":X=ge;break;case"multiple":w=ge;default:bi(o,u,M,ge,p,null)}u=O,p=X,o.multiple=!!w,u!=null?ko(o,!!w,u,!1):p!=null&&ko(o,!!w,p,!0);return;case"textarea":Cr("invalid",o),O=M=w=null;for(X in p)if(p.hasOwnProperty(X)&&(ge=p[X],ge!=null))switch(X){case"value":w=ge;break;case"defaultValue":M=ge;break;case"children":O=ge;break;case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(91));break;default:bi(o,u,X,ge,p,null)}Se(o,w,M,O);return;case"option":for(Ze in p)if(p.hasOwnProperty(Ze)&&(w=p[Ze],w!=null))switch(Ze){case"selected":o.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:bi(o,u,Ze,w,p,null)}return;case"dialog":Cr("beforetoggle",o),Cr("toggle",o),Cr("cancel",o),Cr("close",o);break;case"iframe":case"object":Cr("load",o);break;case"video":case"audio":for(w=0;w<au.length;w++)Cr(au[w],o);break;case"image":Cr("error",o),Cr("load",o);break;case"details":Cr("toggle",o);break;case"embed":case"source":case"link":Cr("error",o),Cr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(gt in p)if(p.hasOwnProperty(gt)&&(w=p[gt],w!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:bi(o,u,gt,w,p,null)}return;default:if(Pn(u)){for(Dt in p)p.hasOwnProperty(Dt)&&(w=p[Dt],w!==void 0&&Af(o,u,Dt,w,p,void 0));return}}for(ge in p)p.hasOwnProperty(ge)&&(w=p[ge],w!=null&&bi(o,u,ge,w,p,null))}function Qo(o,u,p,w){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,O=null,X=null,ge=null,Ze=null,gt=null,Dt=null;for(Et in p){var Ft=p[Et];if(p.hasOwnProperty(Et)&&Ft!=null)switch(Et){case"checked":break;case"value":break;case"defaultValue":Ze=Ft;default:w.hasOwnProperty(Et)||bi(o,u,Et,null,w,Ft)}}for(var bt in w){var Et=w[bt];if(Ft=p[bt],w.hasOwnProperty(bt)&&(Et!=null||Ft!=null))switch(bt){case"type":O=Et;break;case"name":M=Et;break;case"checked":gt=Et;break;case"defaultChecked":Dt=Et;break;case"value":X=Et;break;case"defaultValue":ge=Et;break;case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(i(137,u));break;default:Et!==Ft&&bi(o,u,bt,Et,w,Ft)}}uo(o,X,ge,Ze,gt,Dt,O,M);return;case"select":Et=X=ge=bt=null;for(O in p)if(Ze=p[O],p.hasOwnProperty(O)&&Ze!=null)switch(O){case"value":break;case"multiple":Et=Ze;default:w.hasOwnProperty(O)||bi(o,u,O,null,w,Ze)}for(M in w)if(O=w[M],Ze=p[M],w.hasOwnProperty(M)&&(O!=null||Ze!=null))switch(M){case"value":bt=O;break;case"defaultValue":ge=O;break;case"multiple":X=O;default:O!==Ze&&bi(o,u,M,O,w,Ze)}u=ge,p=X,w=Et,bt!=null?ko(o,!!p,bt,!1):!!w!=!!p&&(u!=null?ko(o,!!p,u,!0):ko(o,!!p,p?[]:"",!1));return;case"textarea":Et=bt=null;for(ge in p)if(M=p[ge],p.hasOwnProperty(ge)&&M!=null&&!w.hasOwnProperty(ge))switch(ge){case"value":break;case"children":break;default:bi(o,u,ge,null,w,M)}for(X in w)if(M=w[X],O=p[X],w.hasOwnProperty(X)&&(M!=null||O!=null))switch(X){case"value":bt=M;break;case"defaultValue":Et=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==O&&bi(o,u,X,M,w,O)}ce(o,bt,Et);return;case"option":for(var Nn in p)if(bt=p[Nn],p.hasOwnProperty(Nn)&&bt!=null&&!w.hasOwnProperty(Nn))switch(Nn){case"selected":o.selected=!1;break;default:bi(o,u,Nn,null,w,bt)}for(Ze in w)if(bt=w[Ze],Et=p[Ze],w.hasOwnProperty(Ze)&&bt!==Et&&(bt!=null||Et!=null))switch(Ze){case"selected":o.selected=bt&&typeof bt!="function"&&typeof bt!="symbol";break;default:bi(o,u,Ze,bt,w,Et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ar in p)bt=p[ar],p.hasOwnProperty(ar)&&bt!=null&&!w.hasOwnProperty(ar)&&bi(o,u,ar,null,w,bt);for(gt in w)if(bt=w[gt],Et=p[gt],w.hasOwnProperty(gt)&&bt!==Et&&(bt!=null||Et!=null))switch(gt){case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(i(137,u));break;default:bi(o,u,gt,bt,w,Et)}return;default:if(Pn(u)){for(var qi in p)bt=p[qi],p.hasOwnProperty(qi)&&bt!==void 0&&!w.hasOwnProperty(qi)&&Af(o,u,qi,void 0,w,bt);for(Dt in w)bt=w[Dt],Et=p[Dt],!w.hasOwnProperty(Dt)||bt===Et||bt===void 0&&Et===void 0||Af(o,u,Dt,bt,w,Et);return}}for(var ut in p)bt=p[ut],p.hasOwnProperty(ut)&&bt!=null&&!w.hasOwnProperty(ut)&&bi(o,u,ut,null,w,bt);for(Ft in w)bt=w[Ft],Et=p[Ft],!w.hasOwnProperty(Ft)||bt===Et||bt==null&&Et==null||bi(o,u,Ft,bt,w,Et)}function Or(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ia(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,p=performance.getEntriesByType("resource"),w=0;w<p.length;w++){var M=p[w],O=M.transferSize,X=M.initiatorType,ge=M.duration;if(O&&ge&&Or(X)){for(X=0,ge=M.responseEnd,w+=1;w<p.length;w++){var Ze=p[w],gt=Ze.startTime;if(gt>ge)break;var Dt=Ze.transferSize,Ft=Ze.initiatorType;Dt&&Or(Ft)&&(Ze=Ze.responseEnd,X+=Dt*(Ze<ge?1:(ge-gt)/(Ze-gt)))}if(--w,u+=8*(O+X)/(M.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var _o=null,fs=null;function Il(o){return o.nodeType===9?o:o.ownerDocument}function pd(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bs(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function so(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Wn=null;function Ur(){var o=window.event;return o&&o.type==="popstate"?o===Wn?!1:(Wn=o,!0):(Wn=null,!1)}var Nf=typeof setTimeout=="function"?setTimeout:void 0,om=typeof clearTimeout=="function"?clearTimeout:void 0,sm=typeof Promise=="function"?Promise:void 0,cx=typeof queueMicrotask=="function"?queueMicrotask:typeof sm<"u"?function(o){return sm.resolve(null).then(o).catch(Mf)}:Nf;function Mf(o){setTimeout(function(){throw o})}function uc(o){return o==="head"}function Zg(o,u){var p=u,w=0;do{var M=p.nextSibling;if(o.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"||p==="/&"){if(w===0){o.removeChild(M),fm(u);return}w--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")w++;else if(p==="html")bh(o.ownerDocument.documentElement);else if(p==="head"){p=o.ownerDocument.head,bh(p);for(var O=p.firstChild;O;){var X=O.nextSibling,ge=O.nodeName;O[Be]||ge==="SCRIPT"||ge==="STYLE"||ge==="LINK"&&O.rel.toLowerCase()==="stylesheet"||p.removeChild(O),O=X}}else p==="body"&&bh(o.ownerDocument.body);p=M}while(p);fm(u)}function Xg(o,u){var p=o;o=0;do{var w=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(o===0)break;o--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||o++;p=w}while(p)}function lm(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":lm(p),nt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function ux(o,u,p,w){for(;o.nodeType===1;){var M=p;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!w&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(w){if(!o[Be])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(O=o.getAttribute("rel"),O==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(O!==M.rel||o.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||o.getAttribute("title")!==(M.title==null?null:M.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(O=o.getAttribute("src"),(O!==(M.src==null?null:M.src)||o.getAttribute("type")!==(M.type==null?null:M.type)||o.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&O&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var O=M.name==null?null:""+M.name;if(M.type==="hidden"&&o.getAttribute("name")===O)return o}else return o;if(o=wo(o.nextSibling),o===null)break}return null}function Fs(o,u,p){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=wo(o.nextSibling),o===null))return null;return o}function Df(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=wo(o.nextSibling),o===null))return null;return o}function cm(o){return o.data==="$?"||o.data==="$~"}function Pf(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function vh(o,u){var p=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||p.readyState!=="loading")u();else{var w=function(){u(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),o._reactRetry=w}}function wo(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var md=null;function xh(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"||p==="/&"){if(u===0)return wo(o.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}o=o.nextSibling}return null}function gd(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return o;u--}else p!=="/$"&&p!=="/&"||u++}o=o.previousSibling}return null}function Kg(o,u,p){switch(u=Il(p),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function bh(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);nt(o)}var ps=new Map,Yg=new Set;function _h(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var al=De.d;De.d={f:dc,r:dx,D:hx,C:Jb,L:Wg,m:fx,X:Qg,S:px,M:mx};function dc(){var o=al.f(),u=Ir();return o||u}function dx(o){var u=Ot(o);u!==null&&u.tag===5&&u.type==="form"?kg(u):al.r(o)}var lu=typeof document>"u"?null:document;function um(o,u,p){var w=lu;if(w&&typeof u=="string"&&u){var M=ki(u);M='link[rel="'+o+'"][href="'+M+'"]',typeof p=="string"&&(M+='[crossorigin="'+p+'"]'),Yg.has(M)||(Yg.add(M),o={rel:o,crossOrigin:p,href:u},w.querySelector(M)===null&&(u=w.createElement("link"),Pa(u,"link",o),Lt(u),w.head.appendChild(u)))}}function hx(o){al.D(o),um("dns-prefetch",o,null)}function Jb(o,u){al.C(o,u),um("preconnect",o,u)}function Wg(o,u,p){al.L(o,u,p);var w=lu;if(w&&o&&u){var M='link[rel="preload"][as="'+ki(u)+'"]';u==="image"&&p&&p.imageSrcSet?(M+='[imagesrcset="'+ki(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(M+='[imagesizes="'+ki(p.imageSizes)+'"]')):M+='[href="'+ki(o)+'"]';var O=M;switch(u){case"style":O=yd(o);break;case"script":O=Sh(o)}ps.has(O)||(o=E({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:o,as:u},p),ps.set(O,o),w.querySelector(M)!==null||u==="style"&&w.querySelector(cu(O))||u==="script"&&w.querySelector(If(O))||(u=w.createElement("link"),Pa(u,"link",o),Lt(u),w.head.appendChild(u)))}}function fx(o,u){al.m(o,u);var p=lu;if(p&&o){var w=u&&typeof u.as=="string"?u.as:"script",M='link[rel="modulepreload"][as="'+ki(w)+'"][href="'+ki(o)+'"]',O=M;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Sh(o)}if(!ps.has(O)&&(o=E({rel:"modulepreload",href:o},u),ps.set(O,o),p.querySelector(M)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(If(O)))return}w=p.createElement("link"),Pa(w,"link",o),Lt(w),p.head.appendChild(w)}}}function px(o,u,p){al.S(o,u,p);var w=lu;if(w&&o){var M=It(w).hoistableStyles,O=yd(o);u=u||"default";var X=M.get(O);if(!X){var ge={loading:0,preload:null};if(X=w.querySelector(cu(O)))ge.loading=5;else{o=E({rel:"stylesheet",href:o,"data-precedence":u},p),(p=ps.get(O))&&Jg(o,p);var Ze=X=w.createElement("link");Lt(Ze),Pa(Ze,"link",o),Ze._p=new Promise(function(gt,Dt){Ze.onload=gt,Ze.onerror=Dt}),Ze.addEventListener("load",function(){ge.loading|=1}),Ze.addEventListener("error",function(){ge.loading|=2}),ge.loading|=4,dm(X,u,w)}X={type:"stylesheet",instance:X,count:1,state:ge},M.set(O,X)}}}function Qg(o,u){al.X(o,u);var p=lu;if(p&&o){var w=It(p).hoistableScripts,M=Sh(o),O=w.get(M);O||(O=p.querySelector(If(M)),O||(o=E({src:o,async:!0},u),(u=ps.get(M))&&ey(o,u),O=p.createElement("script"),Lt(O),Pa(O,"link",o),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},w.set(M,O))}}function mx(o,u){al.M(o,u);var p=lu;if(p&&o){var w=It(p).hoistableScripts,M=Sh(o),O=w.get(M);O||(O=p.querySelector(If(M)),O||(o=E({src:o,async:!0,type:"module"},u),(u=ps.get(M))&&ey(o,u),O=p.createElement("script"),Lt(O),Pa(O,"link",o),p.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},w.set(M,O))}}function wh(o,u,p,w){var M=(M=lt.current)?_h(M):null;if(!M)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=yd(p.href),p=It(M).hoistableStyles,w=p.get(u),w||(w={type:"style",instance:null,count:0,state:null},p.set(u,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=yd(p.href);var O=It(M).hoistableStyles,X=O.get(o);if(X||(M=M.ownerDocument||M,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(o,X),(O=M.querySelector(cu(o)))&&!O._p&&(X.instance=O,X.state.loading=5),ps.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ps.set(o,p),O||yx(M,o,p,X.state))),u&&w===null)throw Error(i(528,""));return X}if(u&&w!==null)throw Error(i(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Sh(p),p=It(M).hoistableScripts,w=p.get(u),w||(w={type:"script",instance:null,count:0,state:null},p.set(u,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function yd(o){return'href="'+ki(o)+'"'}function cu(o){return'link[rel="stylesheet"]['+o+"]"}function gx(o){return E({},o,{"data-precedence":o.precedence,precedence:null})}function yx(o,u,p,w){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?w.loading=1:(u=o.createElement("link"),w.preload=u,u.addEventListener("load",function(){return w.loading|=1}),u.addEventListener("error",function(){return w.loading|=2}),Pa(u,"link",p),Lt(u),o.head.appendChild(u))}function Sh(o){return'[src="'+ki(o)+'"]'}function If(o){return"script[async]"+o}function vx(o,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var w=o.querySelector('style[data-href~="'+ki(p.href)+'"]');if(w)return u.instance=w,Lt(w),w;var M=E({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(o.ownerDocument||o).createElement("style"),Lt(w),Pa(w,"style",M),dm(w,p.precedence,o),u.instance=w;case"stylesheet":M=yd(p.href);var O=o.querySelector(cu(M));if(O)return u.state.loading|=4,u.instance=O,Lt(O),O;w=gx(p),(M=ps.get(M))&&Jg(w,M),O=(o.ownerDocument||o).createElement("link"),Lt(O);var X=O;return X._p=new Promise(function(ge,Ze){X.onload=ge,X.onerror=Ze}),Pa(O,"link",w),u.state.loading|=4,dm(O,p.precedence,o),u.instance=O;case"script":return O=Sh(p.src),(M=o.querySelector(If(O)))?(u.instance=M,Lt(M),M):(w=p,(M=ps.get(O))&&(w=E({},p),ey(w,M)),o=o.ownerDocument||o,M=o.createElement("script"),Lt(M),Pa(M,"link",w),o.head.appendChild(M),u.instance=M);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(w=u.instance,u.state.loading|=4,dm(w,p.precedence,o));return u.instance}function dm(o,u,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=w.length?w[w.length-1]:null,O=M,X=0;X<w.length;X++){var ge=w[X];if(ge.dataset.precedence===u)O=ge;else if(O!==M)break}O?O.parentNode.insertBefore(o,O.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(o,u.firstChild))}function Jg(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function ey(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var hm=null;function xx(o,u,p){if(hm===null){var w=new Map,M=hm=new Map;M.set(p,w)}else M=hm,w=M.get(p),w||(w=new Map,M.set(p,w));if(w.has(o))return w;for(w.set(o,null),p=p.getElementsByTagName(o),M=0;M<p.length;M++){var O=p[M];if(!(O[Be]||O[Y]||o==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var X=O.getAttribute(u)||"";X=o+X;var ge=w.get(X);ge?ge.push(O):w.set(X,[O])}}return w}function bx(o,u,p){o=o.ownerDocument||o,o.head.insertBefore(p,u==="title"?o.querySelector("head > title"):null)}function zP(o,u,p){if(p===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function CS(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function BP(o,u,p,w){if(p.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var M=yd(w.href),O=u.querySelector(cu(M));if(O){u=O._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=_x.bind(o),u.then(o,o)),p.state.loading|=4,p.instance=O,Lt(O);return}O=u.ownerDocument||u,w=gx(w),(M=ps.get(M))&&Jg(w,M),O=O.createElement("link"),Lt(O);var X=O;X._p=new Promise(function(ge,Ze){X.onload=ge,X.onerror=Ze}),Pa(O,"link",w),p.instance=O}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(o.count++,p=_x.bind(o),u.addEventListener("load",p),u.addEventListener("error",p))}}var e_=0;function FP(o,u){return o.stylesheets&&o.count===0&&Sx(o,o.stylesheets),0<o.count||0<o.imgCount?function(p){var w=setTimeout(function(){if(o.stylesheets&&Sx(o,o.stylesheets),o.unsuspend){var O=o.unsuspend;o.unsuspend=null,O()}},6e4+u);0<o.imgBytes&&e_===0&&(e_=62500*Ia());var M=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Sx(o,o.stylesheets),o.unsuspend)){var O=o.unsuspend;o.unsuspend=null,O()}},(o.imgBytes>e_?50:800)+u);return o.unsuspend=p,function(){o.unsuspend=null,clearTimeout(w),clearTimeout(M)}}:null}function _x(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sx(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var wx=null;function Sx(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,wx=new Map,u.forEach(UP,o),wx=null,_x.call(o))}function UP(o,u){if(!(u.state.loading&4)){var p=wx.get(o);if(p)var w=p.get(null);else{p=new Map,wx.set(o,p);for(var M=o.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<M.length;O++){var X=M[O];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(p.set(X.dataset.precedence,X),w=X)}w&&p.set(null,w)}M=u.instance,X=M.getAttribute("data-precedence"),O=p.get(X)||w,O===w&&p.set(null,M),p.set(X,M),this.count++,w=_x.bind(this),M.addEventListener("load",w),M.addEventListener("error",w),O?O.parentNode.insertBefore(M,O.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(M,o.firstChild)),u.state.loading|=4}}var ty={$$typeof:H,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function VP(o,u,p,w,M,O,X,ge,Ze){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=is(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=is(0),this.hiddenUpdates=is(null),this.identifierPrefix=w,this.onUncaughtError=M,this.onCaughtError=O,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ze,this.incompleteTransitions=new Map}function TS(o,u,p,w,M,O,X,ge,Ze,gt,Dt,Ft){return o=new VP(o,u,p,X,Ze,gt,Dt,Ft,ge),u=1,O===!0&&(u|=24),O=$a(3,null,null,u),o.current=O,O.stateNode=o,u=Za(),u.refCount++,o.pooledCache=u,u.refCount++,O.memoizedState={element:w,isDehydrated:p,cache:u},wp(O),o}function kS(o){return o?(o=ss,o):ss}function jS(o,u,p,w,M,O){M=kS(M),w.context===null?w.context=M:w.pendingContext=M,w=kl(u),w.payload={element:p},O=O===void 0?null:O,O!==null&&(w.callback=O),p=$c(o,w,u),p!==null&&(sn(p,o,u),Vu(p,o,u))}function AS(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function t_(o,u){AS(o,u),(o=o.alternate)&&AS(o,u)}function NS(o){if(o.tag===13||o.tag===31){var u=Pi(o,67108864);u!==null&&sn(u,o,67108864),t_(o,67108864)}}function MS(o){if(o.tag===13||o.tag===31){var u=nn();u=Ja(u);var p=Pi(o,u);p!==null&&sn(p,o,u),t_(o,u)}}var Ex=!0;function qP(o,u,p,w){var M=Ae.T;Ae.T=null;var O=De.p;try{De.p=2,n_(o,u,p,w)}finally{De.p=O,Ae.T=M}}function HP(o,u,p,w){var M=Ae.T;Ae.T=null;var O=De.p;try{De.p=8,n_(o,u,p,w)}finally{De.p=O,Ae.T=M}}function n_(o,u,p,w){if(Ex){var M=r_(w);if(M===null)hd(o,u,w,Cx,p),PS(o,w);else if(GP(M,o,u,p,w))w.stopPropagation();else if(PS(o,w),u&4&&-1<$P.indexOf(o)){for(;M!==null;){var O=Ot(M);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var X=da(O.pendingLanes);if(X!==0){var ge=O;for(ge.pendingLanes|=2,ge.entangledLanes|=2;X;){var Ze=1<<31-Sr(X);ge.entanglements[1]|=Ze,X&=~Ze}Ho(O),(Wr&6)===0&&(le=Oe()+500,ru(0))}}break;case 31:case 13:ge=Pi(O,2),ge!==null&&sn(ge,O,2),Ir(),t_(O,2)}if(O=r_(w),O===null&&hd(o,u,w,Cx,p),O===M)break;M=O}M!==null&&w.stopPropagation()}else hd(o,u,w,null,p)}}function r_(o){return o=fl(o),i_(o)}var Cx=null;function i_(o){if(Cx=null,o=xt(o),o!==null){var u=d(o);if(u===null)o=null;else{var p=u.tag;if(p===13){if(o=a(u),o!==null)return o;o=null}else if(p===31){if(o=g(u),o!==null)return o;o=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Cx=o,null}function DS(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case Qe:return 2;case Tt:return 8;case on:case Mn:return 32;case Xn:return 268435456;default:return 32}default:return 32}}var a_=!1,Eh=null,Ch=null,Th=null,ny=new Map,ry=new Map,kh=[],$P="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PS(o,u){switch(o){case"focusin":case"focusout":Eh=null;break;case"dragenter":case"dragleave":Ch=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":ny.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ry.delete(u.pointerId)}}function iy(o,u,p,w,M,O){return o===null||o.nativeEvent!==O?(o={blockedOn:u,domEventName:p,eventSystemFlags:w,nativeEvent:O,targetContainers:[M]},u!==null&&(u=Ot(u),u!==null&&NS(u)),o):(o.eventSystemFlags|=w,u=o.targetContainers,M!==null&&u.indexOf(M)===-1&&u.push(M),o)}function GP(o,u,p,w,M){switch(u){case"focusin":return Eh=iy(Eh,o,u,p,w,M),!0;case"dragenter":return Ch=iy(Ch,o,u,p,w,M),!0;case"mouseover":return Th=iy(Th,o,u,p,w,M),!0;case"pointerover":var O=M.pointerId;return ny.set(O,iy(ny.get(O)||null,o,u,p,w,M)),!0;case"gotpointercapture":return O=M.pointerId,ry.set(O,iy(ry.get(O)||null,o,u,p,w,M)),!0}return!1}function IS(o){var u=xt(o.target);if(u!==null){var p=d(u);if(p!==null){if(u=p.tag,u===13){if(u=a(p),u!==null){o.blockedOn=u,Hr(o.priority,function(){MS(p)});return}}else if(u===31){if(u=g(p),u!==null){o.blockedOn=u,Hr(o.priority,function(){MS(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Tx(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var p=r_(o.nativeEvent);if(p===null){p=o.nativeEvent;var w=new p.constructor(p.type,p);Rd=w,p.target.dispatchEvent(w),Rd=null}else return u=Ot(p),u!==null&&NS(u),o.blockedOn=p,!1;u.shift()}return!0}function OS(o,u,p){Tx(o)&&p.delete(u)}function ZP(){a_=!1,Eh!==null&&Tx(Eh)&&(Eh=null),Ch!==null&&Tx(Ch)&&(Ch=null),Th!==null&&Tx(Th)&&(Th=null),ny.forEach(OS),ry.forEach(OS)}function kx(o,u){o.blockedOn===u&&(o.blockedOn=null,a_||(a_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ZP)))}var jx=null;function RS(o){jx!==o&&(jx=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){jx===o&&(jx=null);for(var u=0;u<o.length;u+=3){var p=o[u],w=o[u+1],M=o[u+2];if(typeof w!="function"){if(i_(w||p)===null)continue;break}var O=Ot(p);O!==null&&(o.splice(u,3),u-=3,ro(O,{pending:!0,data:M,method:p.method,action:w},w,M))}}))}function fm(o){function u(Ze){return kx(Ze,o)}Eh!==null&&kx(Eh,o),Ch!==null&&kx(Ch,o),Th!==null&&kx(Th,o),ny.forEach(u),ry.forEach(u);for(var p=0;p<kh.length;p++){var w=kh[p];w.blockedOn===o&&(w.blockedOn=null)}for(;0<kh.length&&(p=kh[0],p.blockedOn===null);)IS(p),p.blockedOn===null&&kh.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var M=p[w],O=p[w+1],X=M[ie]||null;if(typeof O=="function")X||RS(p);else if(X){var ge=null;if(O&&O.hasAttribute("formAction")){if(M=O,X=O[ie]||null)ge=X.formAction;else if(i_(M)!==null)continue}else ge=X.action;typeof ge=="function"?p[w+1]=ge:(p.splice(w,3),w-=3),RS(p)}}}function LS(){function o(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(X){return M=X})},focusReset:"manual",scroll:"manual"})}function u(){M!==null&&(M(),M=null),w||setTimeout(p,20)}function p(){if(!w&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,M=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){w=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),M!==null&&(M(),M=null)}}}function o_(o){this._internalRoot=o}Ax.prototype.render=o_.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var p=u.current,w=nn();jS(p,w,o,u,null,null)},Ax.prototype.unmount=o_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;jS(o.current,2,null,o,null,null),Ir(),u[se]=null}};function Ax(o){this._internalRoot=o}Ax.prototype.unstable_scheduleHydration=function(o){if(o){var u=gi();o={blockedOn:null,target:o,priority:u};for(var p=0;p<kh.length&&u!==0&&u<kh[p].priority;p++);kh.splice(p,0,o),p===0&&IS(o)}};var zS=t.version;if(zS!=="19.2.0")throw Error(i(527,zS,"19.2.0"));De.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=_(u),o=o!==null?C(o):null,o=o===null?null:o.stateNode,o};var XP={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ae,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nx.isDisabled&&Nx.supportsFiber)try{Jr=Nx.inject(XP),Xr=Nx}catch{}}return oy.createRoot=function(o,u){if(!l(o))throw Error(i(299));var p=!1,w="",M=Zv,O=Xv,X=Kv;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(M=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(X=u.onRecoverableError)),u=TS(o,1,!1,null,null,p,w,null,M,O,X,LS),o[se]=u.current,ou(o),new o_(u)},oy.hydrateRoot=function(o,u,p){if(!l(o))throw Error(i(299));var w=!1,M="",O=Zv,X=Xv,ge=Kv,Ze=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onUncaughtError!==void 0&&(O=p.onUncaughtError),p.onCaughtError!==void 0&&(X=p.onCaughtError),p.onRecoverableError!==void 0&&(ge=p.onRecoverableError),p.formState!==void 0&&(Ze=p.formState)),u=TS(o,1,!0,u,p??null,w,M,Ze,O,X,ge,LS),u.context=kS(null),p=u.current,w=nn(),w=Ja(w),M=kl(w),M.callback=null,$c(p,M,w),p=w,u.current.lanes=p,fr(u,p),Ho(u),o[se]=u.current,ou(o),new Ax(u)},oy.version="19.2.0",oy}var XS;function rI(){if(XS)return l_.exports;XS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),l_.exports=nI(),l_.exports}var iI=rI(),k=Ew();const Bt=rp(k),Cw=Hk({__proto__:null,default:Bt},[k]);var KS="popstate";function aI(e={}){function t(i,l){let{pathname:d,search:a,hash:g}=i.location;return c1("",{pathname:d,search:a,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:Py(l)}return sI(t,n,null,e)}function ga(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oI(){return Math.random().toString(36).substring(2,10)}function YS(e,t){return{usr:e.state,key:e.key,idx:t}}function c1(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vm(t):t,state:n,key:t&&t.key||i||oI()}}function Py({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Vm(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function sI(e,t,n,i={}){let{window:l=document.defaultView,v5Compat:d=!1}=i,a=l.history,g="POP",x=null,_=C();_==null&&(_=0,a.replaceState({...a.state,idx:_},""));function C(){return(a.state||{idx:null}).idx}function E(){g="POP";let B=C(),z=B==null?null:B-_;_=B,x&&x({action:g,location:L.location,delta:z})}function A(B,z){g="PUSH";let q=c1(L.location,B,z);_=C()+1;let H=YS(q,_),W=L.createHref(q);try{a.pushState(H,"",W)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;l.location.assign(W)}d&&x&&x({action:g,location:L.location,delta:1})}function D(B,z){g="REPLACE";let q=c1(L.location,B,z);_=C();let H=YS(q,_),W=L.createHref(q);a.replaceState(H,"",W),d&&x&&x({action:g,location:L.location,delta:0})}function I(B){return lI(B)}let L={get action(){return g},get location(){return e(l,a)},listen(B){if(x)throw new Error("A history only accepts one active listener");return l.addEventListener(KS,E),x=B,()=>{l.removeEventListener(KS,E),x=null}},createHref(B){return t(l,B)},createURL:I,encodeLocation(B){let z=I(B);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:A,replace:D,go(B){return a.go(B)}};return L}function lI(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ga(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Py(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Gk(e,t,n="/"){return cI(e,t,n,!1)}function cI(e,t,n,i){let l=typeof t=="string"?Vm(t):t,d=Ad(l.pathname||"/",n);if(d==null)return null;let a=Zk(e);uI(a);let g=null;for(let x=0;g==null&&x<a.length;++x){let _=_I(d);g=xI(a[x],_,i)}return g}function Zk(e,t=[],n=[],i="",l=!1){let d=(a,g,x=l,_)=>{let C={relativePath:_===void 0?a.path||"":_,caseSensitive:a.caseSensitive===!0,childrenIndex:g,route:a};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(i)&&x)return;ga(C.relativePath.startsWith(i),`Absolute route path "${C.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(i.length)}let E=Td([i,C.relativePath]),A=n.concat(C);a.children&&a.children.length>0&&(ga(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Zk(a.children,t,A,E,x)),!(a.path==null&&!a.index)&&t.push({path:E,score:yI(E,a.index),routesMeta:A})};return e.forEach((a,g)=>{if(a.path===""||!a.path?.includes("?"))d(a,g);else for(let x of Xk(a.path))d(a,g,!0,x)}),t}function Xk(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,l=n.endsWith("?"),d=n.replace(/\?$/,"");if(i.length===0)return l?[d,""]:[d];let a=Xk(i.join("/")),g=[];return g.push(...a.map(x=>x===""?d:[d,x].join("/"))),l&&g.push(...a),g.map(x=>e.startsWith("/")&&x===""?"/":x)}function uI(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vI(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var dI=/^:[\w-]+$/,hI=3,fI=2,pI=1,mI=10,gI=-2,WS=e=>e==="*";function yI(e,t){let n=e.split("/"),i=n.length;return n.some(WS)&&(i+=gI),t&&(i+=fI),n.filter(l=>!WS(l)).reduce((l,d)=>l+(dI.test(d)?hI:d===""?pI:mI),i)}function vI(e,t){return e.length===t.length&&e.slice(0,-1).every((i,l)=>i===t[l])?e[e.length-1]-t[t.length-1]:0}function xI(e,t,n=!1){let{routesMeta:i}=e,l={},d="/",a=[];for(let g=0;g<i.length;++g){let x=i[g],_=g===i.length-1,C=d==="/"?t:t.slice(d.length)||"/",E=m0({path:x.relativePath,caseSensitive:x.caseSensitive,end:_},C),A=x.route;if(!E&&_&&n&&!i[i.length-1].route.index&&(E=m0({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},C)),!E)return null;Object.assign(l,E.params),a.push({params:l,pathname:Td([d,E.pathname]),pathnameBase:TI(Td([d,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(d=Td([d,E.pathnameBase]))}return a}function m0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=bI(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let d=l[0],a=d.replace(/(.)\/+$/,"$1"),g=l.slice(1);return{params:i.reduce((_,{paramName:C,isOptional:E},A)=>{if(C==="*"){let I=g[A]||"";a=d.slice(0,d.length-I.length).replace(/(.)\/+$/,"$1")}const D=g[A];return E&&!D?_[C]=void 0:_[C]=(D||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:a,pattern:e}}function bI(e,t=!1,n=!0){hl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,g,x)=>(i.push({paramName:g,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),i]}function _I(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hl(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ad(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}var wI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SI=e=>wI.test(e);function EI(e,t="/"){let{pathname:n,search:i="",hash:l=""}=typeof e=="string"?Vm(e):e,d;if(n)if(SI(n))d=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),hl(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?d=QS(n.substring(1),"/"):d=QS(n,t)}else d=t;return{pathname:d,search:kI(i),hash:jI(l)}}function QS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function f_(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Tw(e){let t=CI(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function kw(e,t,n,i=!1){let l;typeof e=="string"?l=Vm(e):(l={...e},ga(!l.pathname||!l.pathname.includes("?"),f_("?","pathname","search",l)),ga(!l.pathname||!l.pathname.includes("#"),f_("#","pathname","hash",l)),ga(!l.search||!l.search.includes("#"),f_("#","search","hash",l)));let d=e===""||l.pathname==="",a=d?"/":l.pathname,g;if(a==null)g=n;else{let E=t.length-1;if(!i&&a.startsWith("..")){let A=a.split("/");for(;A[0]==="..";)A.shift(),E-=1;l.pathname=A.join("/")}g=E>=0?t[E]:"/"}let x=EI(l,g),_=a&&a!=="/"&&a.endsWith("/"),C=(d||a===".")&&n.endsWith("/");return!x.pathname.endsWith("/")&&(_||C)&&(x.pathname+="/"),x}var Td=e=>e.join("/").replace(/\/\/+/g,"/"),TI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function AI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Kk=["POST","PUT","PATCH","DELETE"];new Set(Kk);var NI=["GET",...Kk];new Set(NI);var qm=k.createContext(null);qm.displayName="DataRouter";var H0=k.createContext(null);H0.displayName="DataRouterState";k.createContext(!1);var Yk=k.createContext({isTransitioning:!1});Yk.displayName="ViewTransition";var MI=k.createContext(new Map);MI.displayName="Fetchers";var DI=k.createContext(null);DI.displayName="Await";var Sc=k.createContext(null);Sc.displayName="Navigation";var nv=k.createContext(null);nv.displayName="Location";var Ll=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ll.displayName="Route";var jw=k.createContext(null);jw.displayName="RouteError";function PI(e,{relative:t}={}){ga(Hm(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=k.useContext(Sc),{hash:l,pathname:d,search:a}=rv(e,{relative:t}),g=d;return n!=="/"&&(g=d==="/"?n:Td([n,d])),i.createHref({pathname:g,search:a,hash:l})}function Hm(){return k.useContext(nv)!=null}function Zs(){return ga(Hm(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(nv).location}var Wk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Qk(e){k.useContext(Sc).static||k.useLayoutEffect(e)}function Ta(){let{isDataRoute:e}=k.useContext(Ll);return e?XI():II()}function II(){ga(Hm(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(qm),{basename:t,navigator:n}=k.useContext(Sc),{matches:i}=k.useContext(Ll),{pathname:l}=Zs(),d=JSON.stringify(Tw(i)),a=k.useRef(!1);return Qk(()=>{a.current=!0}),k.useCallback((x,_={})=>{if(hl(a.current,Wk),!a.current)return;if(typeof x=="number"){n.go(x);return}let C=kw(x,JSON.parse(d),l,_.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:Td([t,C.pathname])),(_.replace?n.replace:n.push)(C,_.state,_)},[t,n,d,l,e])}var OI=k.createContext(null);function RI(e){let t=k.useContext(Ll).outlet;return k.useMemo(()=>t&&k.createElement(OI.Provider,{value:e},t),[t,e])}function Aw(){let{matches:e}=k.useContext(Ll),t=e[e.length-1];return t?t.params:{}}function rv(e,{relative:t}={}){let{matches:n}=k.useContext(Ll),{pathname:i}=Zs(),l=JSON.stringify(Tw(n));return k.useMemo(()=>kw(e,JSON.parse(l),i,t==="path"),[e,l,i,t])}function LI(e,t){return Jk(e,t)}function Jk(e,t,n,i,l){ga(Hm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=k.useContext(Sc),{matches:a}=k.useContext(Ll),g=a[a.length-1],x=g?g.params:{},_=g?g.pathname:"/",C=g?g.pathnameBase:"/",E=g&&g.route;{let q=E&&E.path||"";ej(_,!E||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let A=Zs(),D;if(t){let q=typeof t=="string"?Vm(t):t;ga(C==="/"||q.pathname?.startsWith(C),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${q.pathname}" was given in the \`location\` prop.`),D=q}else D=A;let I=D.pathname||"/",L=I;if(C!=="/"){let q=C.replace(/^\//,"").split("/");L="/"+I.replace(/^\//,"").split("/").slice(q.length).join("/")}let B=Gk(e,{pathname:L});hl(E||B!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),hl(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=VI(B&&B.map(q=>Object.assign({},q,{params:Object.assign({},x,q.params),pathname:Td([C,d.encodeLocation?d.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?C:Td([C,d.encodeLocation?d.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),a,n,i,l);return t&&z?k.createElement(nv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},z):z}function zI(){let e=ZI(),t=AI(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:d},"ErrorBoundary")," or"," ",k.createElement("code",{style:d},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:l},n):null,a)}var BI=k.createElement(zI,null),FI=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?k.createElement(Ll.Provider,{value:this.props.routeContext},k.createElement(jw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UI({routeContext:e,match:t,children:n}){let i=k.useContext(qm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Ll.Provider,{value:e},n)}function VI(e,t=[],n=null,i=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let d=e,a=n?.errors;if(a!=null){let C=d.findIndex(E=>E.route.id&&a?.[E.route.id]!==void 0);ga(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),d=d.slice(0,Math.min(d.length,C+1))}let g=!1,x=-1;if(n)for(let C=0;C<d.length;C++){let E=d[C];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(x=C),E.route.id){let{loaderData:A,errors:D}=n,I=E.route.loader&&!A.hasOwnProperty(E.route.id)&&(!D||D[E.route.id]===void 0);if(E.route.lazy||I){g=!0,x>=0?d=d.slice(0,x+1):d=[d[0]];break}}}let _=n&&i?(C,E)=>{i(C,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:E})}:void 0;return d.reduceRight((C,E,A)=>{let D,I=!1,L=null,B=null;n&&(D=a&&E.route.id?a[E.route.id]:void 0,L=E.route.errorElement||BI,g&&(x<0&&A===0?(ej("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,B=null):x===A&&(I=!0,B=E.route.hydrateFallbackElement||null)));let z=t.concat(d.slice(0,A+1)),q=()=>{let H;return D?H=L:I?H=B:E.route.Component?H=k.createElement(E.route.Component,null):E.route.element?H=E.route.element:H=C,k.createElement(UI,{match:E,routeContext:{outlet:C,matches:z,isDataRoute:n!=null},children:H})};return n&&(E.route.ErrorBoundary||E.route.errorElement||A===0)?k.createElement(FI,{location:n.location,revalidation:n.revalidation,component:L,error:D,children:q(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:_}):q()},null)}function Nw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qI(e){let t=k.useContext(qm);return ga(t,Nw(e)),t}function HI(e){let t=k.useContext(H0);return ga(t,Nw(e)),t}function $I(e){let t=k.useContext(Ll);return ga(t,Nw(e)),t}function Mw(e){let t=$I(e),n=t.matches[t.matches.length-1];return ga(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function GI(){return Mw("useRouteId")}function ZI(){let e=k.useContext(jw),t=HI("useRouteError"),n=Mw("useRouteError");return e!==void 0?e:t.errors?.[n]}function XI(){let{router:e}=qI("useNavigate"),t=Mw("useNavigate"),n=k.useRef(!1);return Qk(()=>{n.current=!0}),k.useCallback(async(l,d={})=>{hl(n.current,Wk),n.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...d}))},[e,t])}var JS={};function ej(e,t,n){!t&&!JS[e]&&(JS[e]=!0,hl(!1,n))}k.memo(KI);function KI({routes:e,future:t,state:n,unstable_onError:i}){return Jk(e,void 0,n,i,t)}function YI({to:e,replace:t,state:n,relative:i}){ga(Hm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=k.useContext(Sc);hl(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=k.useContext(Ll),{pathname:a}=Zs(),g=Ta(),x=kw(e,Tw(d),a,i==="path"),_=JSON.stringify(x);return k.useEffect(()=>{g(JSON.parse(_),{replace:t,state:n,relative:i})},[g,_,i,t,n]),null}function $0(e){return RI(e.context)}function _i(e){ga(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WI({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:l,static:d=!1}){ga(!Hm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:a,navigator:l,static:d,future:{}}),[a,l,d]);typeof n=="string"&&(n=Vm(n));let{pathname:x="/",search:_="",hash:C="",state:E=null,key:A="default"}=n,D=k.useMemo(()=>{let I=Ad(x,a);return I==null?null:{location:{pathname:I,search:_,hash:C,state:E,key:A},navigationType:i}},[a,x,_,C,E,A,i]);return hl(D!=null,`<Router basename="${a}"> is not able to match the URL "${x}${_}${C}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:k.createElement(Sc.Provider,{value:g},k.createElement(nv.Provider,{children:t,value:D}))}function QI({children:e,location:t}){return LI(u1(e),t)}function u1(e,t=[]){let n=[];return k.Children.forEach(e,(i,l)=>{if(!k.isValidElement(i))return;let d=[...t,l];if(i.type===k.Fragment){n.push.apply(n,u1(i.props.children,d));return}ga(i.type===_i,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ga(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=u1(i.props.children,d)),n.push(a)}),n}var n0="get",r0="application/x-www-form-urlencoded";function G0(e){return e!=null&&typeof e.tagName=="string"}function JI(e){return G0(e)&&e.tagName.toLowerCase()==="button"}function eO(e){return G0(e)&&e.tagName.toLowerCase()==="form"}function tO(e){return G0(e)&&e.tagName.toLowerCase()==="input"}function nO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rO(e,t){return e.button===0&&(!t||t==="_self")&&!nO(e)}function d1(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function iO(e,t){let n=d1(e);return t&&t.forEach((i,l)=>{n.has(l)||t.getAll(l).forEach(d=>{n.append(l,d)})}),n}var Mx=null;function aO(){if(Mx===null)try{new FormData(document.createElement("form"),0),Mx=!1}catch{Mx=!0}return Mx}var oO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function p_(e){return e!=null&&!oO.has(e)?(hl(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${r0}"`),null):e}function sO(e,t){let n,i,l,d,a;if(eO(e)){let g=e.getAttribute("action");i=g?Ad(g,t):null,n=e.getAttribute("method")||n0,l=p_(e.getAttribute("enctype"))||r0,d=new FormData(e)}else if(JI(e)||tO(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let x=e.getAttribute("formaction")||g.getAttribute("action");if(i=x?Ad(x,t):null,n=e.getAttribute("formmethod")||g.getAttribute("method")||n0,l=p_(e.getAttribute("formenctype"))||p_(g.getAttribute("enctype"))||r0,d=new FormData(g,e),!aO()){let{name:_,type:C,value:E}=e;if(C==="image"){let A=_?`${_}.`:"";d.append(`${A}x`,"0"),d.append(`${A}y`,"0")}else _&&d.append(_,E)}}else{if(G0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=n0,i=null,l=r0,a=e}return d&&l==="text/plain"&&(a=d,d=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:d,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lO(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&Ad(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function cO(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uO(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function dO(e,t,n){let i=await Promise.all(e.map(async l=>{let d=t.routes[l.route.id];if(d){let a=await cO(d,n);return a.links?a.links():[]}return[]}));return mO(i.flat(1).filter(uO).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function eE(e,t,n,i,l,d){let a=(x,_)=>n[_]?x.route.id!==n[_].route.id:!0,g=(x,_)=>n[_].pathname!==x.pathname||n[_].route.path?.endsWith("*")&&n[_].params["*"]!==x.params["*"];return d==="assets"?t.filter((x,_)=>a(x,_)||g(x,_)):d==="data"?t.filter((x,_)=>{let C=i.routes[x.route.id];if(!C||!C.hasLoader)return!1;if(a(x,_)||g(x,_))return!0;if(x.route.shouldRevalidate){let E=x.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:x.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function hO(e,t,{includeHydrateFallback:n}={}){return fO(e.map(i=>{let l=t.routes[i.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function fO(e){return[...new Set(e)]}function pO(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function mO(e,t){let n=new Set;return new Set(t),e.reduce((i,l)=>{let d=JSON.stringify(pO(l));return n.has(d)||(n.add(d),i.push({key:d,link:l})),i},[])}function tj(){let e=k.useContext(qm);return Dw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function gO(){let e=k.useContext(H0);return Dw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Pw=k.createContext(void 0);Pw.displayName="FrameworkContext";function nj(){let e=k.useContext(Pw);return Dw(e,"You must render this element inside a <HydratedRouter> element"),e}function yO(e,t){let n=k.useContext(Pw),[i,l]=k.useState(!1),[d,a]=k.useState(!1),{onFocus:g,onBlur:x,onMouseEnter:_,onMouseLeave:C,onTouchStart:E}=t,A=k.useRef(null);k.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let L=z=>{z.forEach(q=>{a(q.isIntersecting)})},B=new IntersectionObserver(L,{threshold:.5});return A.current&&B.observe(A.current),()=>{B.disconnect()}}},[e]),k.useEffect(()=>{if(i){let L=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(L)}}},[i]);let D=()=>{l(!0)},I=()=>{l(!1),a(!1)};return n?e!=="intent"?[d,A,{}]:[d,A,{onFocus:sy(g,D),onBlur:sy(x,I),onMouseEnter:sy(_,D),onMouseLeave:sy(C,I),onTouchStart:sy(E,D)}]:[!1,A,{}]}function sy(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function vO({page:e,...t}){let{router:n}=tj(),i=k.useMemo(()=>Gk(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?k.createElement(bO,{page:e,matches:i,...t}):null}function xO(e){let{manifest:t,routeModules:n}=nj(),[i,l]=k.useState([]);return k.useEffect(()=>{let d=!1;return dO(e,t,n).then(a=>{d||l(a)}),()=>{d=!0}},[e,t,n]),i}function bO({page:e,matches:t,...n}){let i=Zs(),{manifest:l,routeModules:d}=nj(),{basename:a}=tj(),{loaderData:g,matches:x}=gO(),_=k.useMemo(()=>eE(e,t,x,l,i,"data"),[e,t,x,l,i]),C=k.useMemo(()=>eE(e,t,x,l,i,"assets"),[e,t,x,l,i]),E=k.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let I=new Set,L=!1;if(t.forEach(z=>{let q=l.routes[z.route.id];!q||!q.hasLoader||(!_.some(H=>H.route.id===z.route.id)&&z.route.id in g&&d[z.route.id]?.shouldRevalidate||q.hasClientLoader?L=!0:I.add(z.route.id))}),I.size===0)return[];let B=lO(e,a,"data");return L&&I.size>0&&B.searchParams.set("_routes",t.filter(z=>I.has(z.route.id)).map(z=>z.route.id).join(",")),[B.pathname+B.search]},[a,g,i,l,_,t,e,d]),A=k.useMemo(()=>hO(C,l),[C,l]),D=xO(C);return k.createElement(k.Fragment,null,E.map(I=>k.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),A.map(I=>k.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),D.map(({key:I,link:L})=>k.createElement("link",{key:I,nonce:n.nonce,...L})))}function _O(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var rj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rj&&(window.__reactRouterVersion="7.9.6")}catch{}function wO({basename:e,children:t,window:n}){let i=k.useRef();i.current==null&&(i.current=aI({window:n,v5Compat:!0}));let l=i.current,[d,a]=k.useState({action:l.action,location:l.location}),g=k.useCallback(x=>{k.startTransition(()=>a(x))},[a]);return k.useLayoutEffect(()=>l.listen(g),[l,g]),k.createElement(WI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:l})}var ij=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wi=k.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:l,reloadDocument:d,replace:a,state:g,target:x,to:_,preventScrollReset:C,viewTransition:E,...A},D){let{basename:I}=k.useContext(Sc),L=typeof _=="string"&&ij.test(_),B,z=!1;if(typeof _=="string"&&L&&(B=_,rj))try{let he=new URL(window.location.href),we=_.startsWith("//")?new URL(he.protocol+_):new URL(_),ye=Ad(we.pathname,I);we.origin===he.origin&&ye!=null?_=ye+we.search+we.hash:z=!0}catch{hl(!1,`<Link to="${_}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=PI(_,{relative:l}),[H,W,ne]=yO(i,A),re=TO(_,{replace:a,state:g,target:x,preventScrollReset:C,relative:l,viewTransition:E});function ee(he){t&&t(he),he.defaultPrevented||re(he)}let oe=k.createElement("a",{...A,...ne,href:B||q,onClick:z||d?t:ee,ref:_O(D,W),target:x,"data-discover":!L&&n==="render"?"true":void 0});return H&&!L?k.createElement(k.Fragment,null,oe,k.createElement(vO,{page:q})):oe});wi.displayName="Link";var SO=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:l=!1,style:d,to:a,viewTransition:g,children:x,..._},C){let E=rv(a,{relative:_.relative}),A=Zs(),D=k.useContext(H0),{navigator:I,basename:L}=k.useContext(Sc),B=D!=null&&MO(E)&&g===!0,z=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,q=A.pathname,H=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(q=q.toLowerCase(),H=H?H.toLowerCase():null,z=z.toLowerCase()),H&&L&&(H=Ad(H,L)||H);const W=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ne=q===z||!l&&q.startsWith(z)&&q.charAt(W)==="/",re=H!=null&&(H===z||!l&&H.startsWith(z)&&H.charAt(z.length)==="/"),ee={isActive:ne,isPending:re,isTransitioning:B},oe=ne?t:void 0,he;typeof i=="function"?he=i(ee):he=[i,ne?"active":null,re?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let we=typeof d=="function"?d(ee):d;return k.createElement(wi,{..._,"aria-current":oe,className:he,ref:C,style:we,to:a,viewTransition:g},typeof x=="function"?x(ee):x)});SO.displayName="NavLink";var EO=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:l,state:d,method:a=n0,action:g,onSubmit:x,relative:_,preventScrollReset:C,viewTransition:E,...A},D)=>{let I=AO(),L=NO(g,{relative:_}),B=a.toLowerCase()==="get"?"get":"post",z=typeof g=="string"&&ij.test(g),q=H=>{if(x&&x(H),H.defaultPrevented)return;H.preventDefault();let W=H.nativeEvent.submitter,ne=W?.getAttribute("formmethod")||a;I(W||H.currentTarget,{fetcherKey:t,method:ne,navigate:n,replace:l,state:d,relative:_,preventScrollReset:C,viewTransition:E})};return k.createElement("form",{ref:D,method:B,action:L,onSubmit:i?x:q,...A,"data-discover":!z&&e==="render"?"true":void 0})});EO.displayName="Form";function CO(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aj(e){let t=k.useContext(qm);return ga(t,CO(e)),t}function TO(e,{target:t,replace:n,state:i,preventScrollReset:l,relative:d,viewTransition:a}={}){let g=Ta(),x=Zs(),_=rv(e,{relative:d});return k.useCallback(C=>{if(rO(C,t)){C.preventDefault();let E=n!==void 0?n:Py(x)===Py(_);g(e,{replace:E,state:i,preventScrollReset:l,relative:d,viewTransition:a})}},[x,g,_,n,i,t,e,l,d,a])}function iv(e){hl(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=k.useRef(d1(e)),n=k.useRef(!1),i=Zs(),l=k.useMemo(()=>iO(i.search,n.current?null:t.current),[i.search]),d=Ta(),a=k.useCallback((g,x)=>{const _=d1(typeof g=="function"?g(new URLSearchParams(l)):g);n.current=!0,d("?"+_,x)},[d,l]);return[l,a]}var kO=0,jO=()=>`__${String(++kO)}__`;function AO(){let{router:e}=aj("useSubmit"),{basename:t}=k.useContext(Sc),n=GI();return k.useCallback(async(i,l={})=>{let{action:d,method:a,encType:g,formData:x,body:_}=sO(i,t);if(l.navigate===!1){let C=l.fetcherKey||jO();await e.fetch(C,n,l.action||d,{preventScrollReset:l.preventScrollReset,formData:x,body:_,formMethod:l.method||a,formEncType:l.encType||g,flushSync:l.flushSync})}else await e.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:x,body:_,formMethod:l.method||a,formEncType:l.encType||g,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,n])}function NO(e,{relative:t}={}){let{basename:n}=k.useContext(Sc),i=k.useContext(Ll);ga(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),d={...rv(e||".",{relative:t})},a=Zs();if(e==null){d.search=a.search;let g=new URLSearchParams(d.search),x=g.getAll("index");if(x.some(C=>C==="")){g.delete("index"),x.filter(E=>E).forEach(E=>g.append("index",E));let C=g.toString();d.search=C?`?${C}`:""}}return(!e||e===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:Td([n,d.pathname])),Py(d)}function MO(e,{relative:t}={}){let n=k.useContext(Yk);ga(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=aj("useViewTransitionState"),l=rv(e,{relative:t});if(!n.isTransitioning)return!1;let d=Ad(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ad(n.nextLocation.pathname,i)||n.nextLocation.pathname;return m0(l.pathname,a)!=null||m0(l.pathname,d)!=null}var Lh=$k();const DO=rp(Lh);var av=e=>e.type==="checkbox",Uf=e=>e instanceof Date,Vs=e=>e==null;const oj=e=>typeof e=="object";var Wa=e=>!Vs(e)&&!Array.isArray(e)&&oj(e)&&!Uf(e),sj=e=>Wa(e)&&e.target?av(e.target)?e.target.checked:e.target.value:e,PO=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,lj=(e,t)=>e.has(PO(t)),IO=e=>{const t=e.constructor&&e.constructor.prototype;return Wa(t)&&t.hasOwnProperty("isPrototypeOf")},Iw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function co(e){let t;const n=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Iw&&(e instanceof Blob||i))&&(n||Wa(e)))if(t=n?[]:Object.create(Object.getPrototypeOf(e)),!n&&!IO(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=co(e[l]));else return e;return t}var Z0=e=>/^\w*$/.test(e),Oa=e=>e===void 0,Ow=e=>Array.isArray(e)?e.filter(Boolean):[],Rw=e=>Ow(e.replace(/["|']|\]/g,"").split(/\.|\[/)),yn=(e,t,n)=>{if(!t||!Wa(e))return n;const i=(Z0(t)?[t]:Rw(t)).reduce((l,d)=>Vs(l)?l:l[d],e);return Oa(i)||i===e?Oa(e[t])?n:e[t]:i},sl=e=>typeof e=="boolean",na=(e,t,n)=>{let i=-1;const l=Z0(t)?[t]:Rw(t),d=l.length,a=d-1;for(;++i<d;){const g=l[i];let x=n;if(i!==a){const _=e[g];x=Wa(_)||Array.isArray(_)?_:isNaN(+l[i+1])?{}:[]}if(g==="__proto__"||g==="constructor"||g==="prototype")return;e[g]=x,e=e[g]}};const g0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vd={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Lw=Bt.createContext(null);Lw.displayName="HookFormContext";const X0=()=>Bt.useContext(Lw),OO=e=>{const{children:t,...n}=e;return Bt.createElement(Lw.Provider,{value:n},t)};var cj=(e,t,n,i=!0)=>{const l={defaultValues:t._defaultValues};for(const d in e)Object.defineProperty(l,d,{get:()=>{const a=d;return t._proxyFormState[a]!==mc.all&&(t._proxyFormState[a]=!i||mc.all),n&&(n[a]=!0),e[a]}});return l};const zw=typeof window<"u"?Bt.useLayoutEffect:Bt.useEffect;function uj(e){const t=X0(),{control:n=t.control,disabled:i,name:l,exact:d}=e||{},[a,g]=Bt.useState(n._formState),x=Bt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return zw(()=>n._subscribe({name:l,formState:x.current,exact:d,callback:_=>{!i&&g({...n._formState,..._})}}),[l,i,d]),Bt.useEffect(()=>{x.current.isValid&&n._setValid(!0)},[n]),Bt.useMemo(()=>cj(a,n,x.current,!1),[a,n])}var cl=e=>typeof e=="string",h1=(e,t,n,i,l)=>cl(e)?(i&&t.watch.add(e),yn(n,e,l)):Array.isArray(e)?e.map(d=>(i&&t.watch.add(d),yn(n,d))):(i&&(t.watchAll=!0),n),f1=e=>Vs(e)||!oj(e);function gc(e,t,n=new WeakSet){if(f1(e)||f1(t))return Object.is(e,t);if(Uf(e)&&Uf(t))return e.getTime()===t.getTime();const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const d of i){const a=e[d];if(!l.includes(d))return!1;if(d!=="ref"){const g=t[d];if(Uf(a)&&Uf(g)||Wa(a)&&Wa(g)||Array.isArray(a)&&Array.isArray(g)?!gc(a,g,n):!Object.is(a,g))return!1}}return!0}function RO(e){const t=X0(),{control:n=t.control,name:i,defaultValue:l,disabled:d,exact:a,compute:g}=e||{},x=Bt.useRef(l),_=Bt.useRef(g),C=Bt.useRef(void 0),E=Bt.useRef(n),A=Bt.useRef(i);_.current=g;const[D,I]=Bt.useState(()=>{const W=n._getWatch(i,x.current);return _.current?_.current(W):W}),L=Bt.useCallback(W=>{const ne=h1(i,n._names,W||n._formValues,!1,x.current);return _.current?_.current(ne):ne},[n._formValues,n._names,i]),B=Bt.useCallback(W=>{if(!d){const ne=h1(i,n._names,W||n._formValues,!1,x.current);if(_.current){const re=_.current(ne);gc(re,C.current)||(I(re),C.current=re)}else I(ne)}},[n._formValues,n._names,d,i]);zw(()=>((E.current!==n||!gc(A.current,i))&&(E.current=n,A.current=i,B()),n._subscribe({name:i,formState:{values:!0},exact:a,callback:W=>{B(W.values)}})),[n,a,i,B]),Bt.useEffect(()=>n._removeUnmounted());const z=E.current!==n,q=A.current,H=Bt.useMemo(()=>{if(d)return null;const W=!z&&!gc(q,i);return z||W?L():null},[d,z,i,q,L]);return H!==null?H:D}function LO(e){const t=X0(),{name:n,disabled:i,control:l=t.control,shouldUnregister:d,defaultValue:a}=e,g=lj(l._names.array,n),x=Bt.useMemo(()=>yn(l._formValues,n,yn(l._defaultValues,n,a)),[l,n,a]),_=RO({control:l,name:n,defaultValue:x,exact:!0}),C=uj({control:l,name:n,exact:!0}),E=Bt.useRef(e),A=Bt.useRef(void 0),D=Bt.useRef(l.register(n,{...e.rules,value:_,...sl(e.disabled)?{disabled:e.disabled}:{}}));E.current=e;const I=Bt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!yn(C.errors,n)},isDirty:{enumerable:!0,get:()=>!!yn(C.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!yn(C.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!yn(C.validatingFields,n)},error:{enumerable:!0,get:()=>yn(C.errors,n)}}),[C,n]),L=Bt.useCallback(H=>D.current.onChange({target:{value:sj(H),name:n},type:g0.CHANGE}),[n]),B=Bt.useCallback(()=>D.current.onBlur({target:{value:yn(l._formValues,n),name:n},type:g0.BLUR}),[n,l._formValues]),z=Bt.useCallback(H=>{const W=yn(l._fields,n);W&&H&&(W._f.ref={focus:()=>H.focus&&H.focus(),select:()=>H.select&&H.select(),setCustomValidity:ne=>H.setCustomValidity(ne),reportValidity:()=>H.reportValidity()})},[l._fields,n]),q=Bt.useMemo(()=>({name:n,value:_,...sl(i)||C.disabled?{disabled:C.disabled||i}:{},onChange:L,onBlur:B,ref:z}),[n,i,C.disabled,L,B,z,_]);return Bt.useEffect(()=>{const H=l._options.shouldUnregister||d,W=A.current;W&&W!==n&&!g&&l.unregister(W),l.register(n,{...E.current.rules,...sl(E.current.disabled)?{disabled:E.current.disabled}:{}});const ne=(re,ee)=>{const oe=yn(l._fields,re);oe&&oe._f&&(oe._f.mount=ee)};if(ne(n,!0),H){const re=co(yn(l._options.defaultValues,n,E.current.defaultValue));na(l._defaultValues,n,re),Oa(yn(l._formValues,n))&&na(l._formValues,n,re)}return!g&&l.register(n),A.current=n,()=>{(g?H&&!l._state.action:H)?l.unregister(n):ne(n,!1)}},[n,l,g,d]),Bt.useEffect(()=>{l._setDisabledField({disabled:i,name:n})},[i,n,l]),Bt.useMemo(()=>({field:q,formState:C,fieldState:I}),[q,C,I])}const zO=e=>e.render(LO(e));var BO=(e,t,n,i,l)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[i]:l||!0}}:{},Ey=e=>Array.isArray(e)?e:[e],tE=()=>{let e=[];return{get observers(){return e},next:l=>{for(const d of e)d.next&&d.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(d=>d!==l)}}),unsubscribe:()=>{e=[]}}};function dj(e,t){const n={};for(const i in e)if(e.hasOwnProperty(i)){const l=e[i],d=t[i];if(l&&Wa(l)&&d){const a=dj(l,d);Wa(a)&&(n[i]=a)}else e[i]&&(n[i]=d)}return n}var ys=e=>Wa(e)&&!Object.keys(e).length,Bw=e=>e.type==="file",yc=e=>typeof e=="function",y0=e=>{if(!Iw)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},hj=e=>e.type==="select-multiple",Fw=e=>e.type==="radio",FO=e=>Fw(e)||av(e),m_=e=>y0(e)&&e.isConnected;function UO(e,t){const n=t.slice(0,-1).length;let i=0;for(;i<n;)e=Oa(e)?i++:e[t[i++]];return e}function VO(e){for(const t in e)if(e.hasOwnProperty(t)&&!Oa(e[t]))return!1;return!0}function Ka(e,t){const n=Array.isArray(t)?t:Z0(t)?[t]:Rw(t),i=n.length===1?e:UO(e,n),l=n.length-1,d=n[l];return i&&delete i[d],l!==0&&(Wa(i)&&ys(i)||Array.isArray(i)&&VO(i))&&Ka(e,n.slice(0,-1)),e}var qO=e=>{for(const t in e)if(yc(e[t]))return!0;return!1};function fj(e){return Array.isArray(e)||Wa(e)&&!qO(e)}function p1(e,t={}){for(const n in e){const i=e[n];fj(i)?(t[n]=Array.isArray(i)?[]:{},p1(i,t[n])):Oa(i)||(t[n]=!0)}return t}function Em(e,t,n){n||(n=p1(t));for(const i in e){const l=e[i];if(fj(l))Oa(t)||f1(n[i])?n[i]=p1(l,Array.isArray(l)?[]:{}):Em(l,Vs(t)?{}:t[i],n[i]);else{const d=t[i];n[i]=!gc(l,d)}}return n}const nE={value:!1,isValid:!1},rE={value:!0,isValid:!0};var pj=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Oa(e[0].attributes.value)?Oa(e[0].value)||e[0].value===""?rE:{value:e[0].value,isValid:!0}:rE:nE}return nE},mj=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:i})=>Oa(e)?e:t?e===""?NaN:e&&+e:n&&cl(e)?new Date(e):i?i(e):e;const iE={isValid:!1,value:null};var gj=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,iE):iE;function aE(e){const t=e.ref;return Bw(t)?t.files:Fw(t)?gj(e.refs).value:hj(t)?[...t.selectedOptions].map(({value:n})=>n):av(t)?pj(e.refs).value:mj(Oa(t.value)?e.ref.value:t.value,e)}var HO=(e,t,n,i)=>{const l={};for(const d of e){const a=yn(t,d);a&&na(l,d,a._f)}return{criteriaMode:n,names:[...e],fields:l,shouldUseNativeValidation:i}},v0=e=>e instanceof RegExp,ly=e=>Oa(e)?e:v0(e)?e.source:Wa(e)?v0(e.value)?e.value.source:e.value:e,oE=e=>({isOnSubmit:!e||e===mc.onSubmit,isOnBlur:e===mc.onBlur,isOnChange:e===mc.onChange,isOnAll:e===mc.all,isOnTouch:e===mc.onTouched});const sE="AsyncFunction";var $O=e=>!!e&&!!e.validate&&!!(yc(e.validate)&&e.validate.constructor.name===sE||Wa(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===sE)),GO=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),lE=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Cy=(e,t,n,i)=>{for(const l of n||Object.keys(e)){const d=yn(e,l);if(d){const{_f:a,...g}=d;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],l)&&!i)return!0;if(a.ref&&t(a.ref,a.name)&&!i)return!0;if(Cy(g,t))break}else if(Wa(g)&&Cy(g,t))break}}};function cE(e,t,n){const i=yn(e,n);if(i||Z0(n))return{error:i,name:n};const l=n.split(".");for(;l.length;){const d=l.join("."),a=yn(t,d),g=yn(e,d);if(a&&!Array.isArray(a)&&n!==d)return{name:n};if(g&&g.type)return{name:d,error:g};if(g&&g.root&&g.root.type)return{name:`${d}.root`,error:g.root};l.pop()}return{name:n}}var ZO=(e,t,n,i)=>{n(e);const{name:l,...d}=e;return ys(d)||Object.keys(d).length>=Object.keys(t).length||Object.keys(d).find(a=>t[a]===(!i||mc.all))},XO=(e,t,n)=>!e||!t||e===t||Ey(e).some(i=>i&&(n?i===t:i.startsWith(t)||t.startsWith(i))),KO=(e,t,n,i,l)=>l.isOnAll?!1:!n&&l.isOnTouch?!(t||e):(n?i.isOnBlur:l.isOnBlur)?!e:(n?i.isOnChange:l.isOnChange)?e:!0,YO=(e,t)=>!Ow(yn(e,t)).length&&Ka(e,t),WO=(e,t,n)=>{const i=Ey(yn(e,n));return na(i,"root",t[n]),na(e,n,i),e};function uE(e,t,n="validate"){if(cl(e)||Array.isArray(e)&&e.every(cl)||sl(e)&&!e)return{type:n,message:cl(e)?e:"",ref:t}}var pm=e=>Wa(e)&&!v0(e)?e:{value:e,message:""},dE=async(e,t,n,i,l,d)=>{const{ref:a,refs:g,required:x,maxLength:_,minLength:C,min:E,max:A,pattern:D,validate:I,name:L,valueAsNumber:B,mount:z}=e._f,q=yn(n,L);if(!z||t.has(L))return{};const H=g?g[0]:a,W=Pe=>{l&&H.reportValidity&&(H.setCustomValidity(sl(Pe)?"":Pe||""),H.reportValidity())},ne={},re=Fw(a),ee=av(a),oe=re||ee,he=(B||Bw(a))&&Oa(a.value)&&Oa(q)||y0(a)&&a.value===""||q===""||Array.isArray(q)&&!q.length,we=BO.bind(null,L,i,ne),ye=(Pe,Ke,ze,Je=vd.maxLength,Ae=vd.minLength)=>{const De=Pe?Ke:ze;ne[L]={type:Pe?Je:Ae,message:De,ref:a,...we(Pe?Je:Ae,De)}};if(d?!Array.isArray(q)||!q.length:x&&(!oe&&(he||Vs(q))||sl(q)&&!q||ee&&!pj(g).isValid||re&&!gj(g).isValid)){const{value:Pe,message:Ke}=cl(x)?{value:!!x,message:x}:pm(x);if(Pe&&(ne[L]={type:vd.required,message:Ke,ref:H,...we(vd.required,Ke)},!i))return W(Ke),ne}if(!he&&(!Vs(E)||!Vs(A))){let Pe,Ke;const ze=pm(A),Je=pm(E);if(!Vs(q)&&!isNaN(q)){const Ae=a.valueAsNumber||q&&+q;Vs(ze.value)||(Pe=Ae>ze.value),Vs(Je.value)||(Ke=Ae<Je.value)}else{const Ae=a.valueAsDate||new Date(q),De=me=>new Date(new Date().toDateString()+" "+me),ke=a.type=="time",st=a.type=="week";cl(ze.value)&&q&&(Pe=ke?De(q)>De(ze.value):st?q>ze.value:Ae>new Date(ze.value)),cl(Je.value)&&q&&(Ke=ke?De(q)<De(Je.value):st?q<Je.value:Ae<new Date(Je.value))}if((Pe||Ke)&&(ye(!!Pe,ze.message,Je.message,vd.max,vd.min),!i))return W(ne[L].message),ne}if((_||C)&&!he&&(cl(q)||d&&Array.isArray(q))){const Pe=pm(_),Ke=pm(C),ze=!Vs(Pe.value)&&q.length>+Pe.value,Je=!Vs(Ke.value)&&q.length<+Ke.value;if((ze||Je)&&(ye(ze,Pe.message,Ke.message),!i))return W(ne[L].message),ne}if(D&&!he&&cl(q)){const{value:Pe,message:Ke}=pm(D);if(v0(Pe)&&!q.match(Pe)&&(ne[L]={type:vd.pattern,message:Ke,ref:a,...we(vd.pattern,Ke)},!i))return W(Ke),ne}if(I){if(yc(I)){const Pe=await I(q,n),Ke=uE(Pe,H);if(Ke&&(ne[L]={...Ke,...we(vd.validate,Ke.message)},!i))return W(Ke.message),ne}else if(Wa(I)){let Pe={};for(const Ke in I){if(!ys(Pe)&&!i)break;const ze=uE(await I[Ke](q,n),H,Ke);ze&&(Pe={...ze,...we(Ke,ze.message)},W(ze.message),i&&(ne[L]=Pe))}if(!ys(Pe)&&(ne[L]={ref:H,...Pe},!i))return ne}}return W(!0),ne};const QO={mode:mc.onSubmit,reValidateMode:mc.onChange,shouldFocusError:!0};function JO(e={}){let t={...QO,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:yc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},l=Wa(t.defaultValues)||Wa(t.values)?co(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:co(l),a={action:!1,mount:!1,watch:!1},g={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},x,_=0;const C={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let E={...C};const A={array:tE(),state:tE()},D=t.criteriaMode===mc.all,I=xe=>Re=>{clearTimeout(_),_=setTimeout(xe,Re)},L=async xe=>{if(!t.disabled&&(C.isValid||E.isValid||xe)){const Re=t.resolver?ys((await ee()).errors):await he(i,!0);Re!==n.isValid&&A.state.next({isValid:Re})}},B=(xe,Re)=>{!t.disabled&&(C.isValidating||C.validatingFields||E.isValidating||E.validatingFields)&&((xe||Array.from(g.mount)).forEach(Ve=>{Ve&&(Re?na(n.validatingFields,Ve,Re):Ka(n.validatingFields,Ve))}),A.state.next({validatingFields:n.validatingFields,isValidating:!ys(n.validatingFields)}))},z=(xe,Re=[],Ve,Vt,Oe=!0,Le=!0)=>{if(Vt&&Ve&&!t.disabled){if(a.action=!0,Le&&Array.isArray(yn(i,xe))){const Qe=Ve(yn(i,xe),Vt.argA,Vt.argB);Oe&&na(i,xe,Qe)}if(Le&&Array.isArray(yn(n.errors,xe))){const Qe=Ve(yn(n.errors,xe),Vt.argA,Vt.argB);Oe&&na(n.errors,xe,Qe),YO(n.errors,xe)}if((C.touchedFields||E.touchedFields)&&Le&&Array.isArray(yn(n.touchedFields,xe))){const Qe=Ve(yn(n.touchedFields,xe),Vt.argA,Vt.argB);Oe&&na(n.touchedFields,xe,Qe)}(C.dirtyFields||E.dirtyFields)&&(n.dirtyFields=Em(l,d)),A.state.next({name:xe,isDirty:ye(xe,Re),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else na(d,xe,Re)},q=(xe,Re)=>{na(n.errors,xe,Re),A.state.next({errors:n.errors})},H=xe=>{n.errors=xe,A.state.next({errors:n.errors,isValid:!1})},W=(xe,Re,Ve,Vt)=>{const Oe=yn(i,xe);if(Oe){const Le=yn(d,xe,Oa(Ve)?yn(l,xe):Ve);Oa(Le)||Vt&&Vt.defaultChecked||Re?na(d,xe,Re?Le:aE(Oe._f)):ze(xe,Le),a.mount&&!a.action&&L()}},ne=(xe,Re,Ve,Vt,Oe)=>{let Le=!1,Qe=!1;const Tt={name:xe};if(!t.disabled){if(!Ve||Vt){(C.isDirty||E.isDirty)&&(Qe=n.isDirty,n.isDirty=Tt.isDirty=ye(),Le=Qe!==Tt.isDirty);const on=gc(yn(l,xe),Re);Qe=!!yn(n.dirtyFields,xe),on?Ka(n.dirtyFields,xe):na(n.dirtyFields,xe,!0),Tt.dirtyFields=n.dirtyFields,Le=Le||(C.dirtyFields||E.dirtyFields)&&Qe!==!on}if(Ve){const on=yn(n.touchedFields,xe);on||(na(n.touchedFields,xe,Ve),Tt.touchedFields=n.touchedFields,Le=Le||(C.touchedFields||E.touchedFields)&&on!==Ve)}Le&&Oe&&A.state.next(Tt)}return Le?Tt:{}},re=(xe,Re,Ve,Vt)=>{const Oe=yn(n.errors,xe),Le=(C.isValid||E.isValid)&&sl(Re)&&n.isValid!==Re;if(t.delayError&&Ve?(x=I(()=>q(xe,Ve)),x(t.delayError)):(clearTimeout(_),x=null,Ve?na(n.errors,xe,Ve):Ka(n.errors,xe)),(Ve?!gc(Oe,Ve):Oe)||!ys(Vt)||Le){const Qe={...Vt,...Le&&sl(Re)?{isValid:Re}:{},errors:n.errors,name:xe};n={...n,...Qe},A.state.next(Qe)}},ee=async xe=>{B(xe,!0);const Re=await t.resolver(d,t.context,HO(xe||g.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return B(xe),Re},oe=async xe=>{const{errors:Re}=await ee(xe);if(xe)for(const Ve of xe){const Vt=yn(Re,Ve);Vt?na(n.errors,Ve,Vt):Ka(n.errors,Ve)}else n.errors=Re;return Re},he=async(xe,Re,Ve={valid:!0})=>{for(const Vt in xe){const Oe=xe[Vt];if(Oe){const{_f:Le,...Qe}=Oe;if(Le){const Tt=g.array.has(Le.name),on=Oe._f&&$O(Oe._f);on&&C.validatingFields&&B([Le.name],!0);const Mn=await dE(Oe,g.disabled,d,D,t.shouldUseNativeValidation&&!Re,Tt);if(on&&C.validatingFields&&B([Le.name]),Mn[Le.name]&&(Ve.valid=!1,Re))break;!Re&&(yn(Mn,Le.name)?Tt?WO(n.errors,Mn,Le.name):na(n.errors,Le.name,Mn[Le.name]):Ka(n.errors,Le.name))}!ys(Qe)&&await he(Qe,Re,Ve)}}return Ve.valid},we=()=>{for(const xe of g.unMount){const Re=yn(i,xe);Re&&(Re._f.refs?Re._f.refs.every(Ve=>!m_(Ve)):!m_(Re._f.ref))&&We(xe)}g.unMount=new Set},ye=(xe,Re)=>!t.disabled&&(xe&&Re&&na(d,xe,Re),!gc(me(),l)),Pe=(xe,Re,Ve)=>h1(xe,g,{...a.mount?d:Oa(Re)?l:cl(xe)?{[xe]:Re}:Re},Ve,Re),Ke=xe=>Ow(yn(a.mount?d:l,xe,t.shouldUnregister?yn(l,xe,[]):[])),ze=(xe,Re,Ve={})=>{const Vt=yn(i,xe);let Oe=Re;if(Vt){const Le=Vt._f;Le&&(!Le.disabled&&na(d,xe,mj(Re,Le)),Oe=y0(Le.ref)&&Vs(Re)?"":Re,hj(Le.ref)?[...Le.ref.options].forEach(Qe=>Qe.selected=Oe.includes(Qe.value)):Le.refs?av(Le.ref)?Le.refs.forEach(Qe=>{(!Qe.defaultChecked||!Qe.disabled)&&(Array.isArray(Oe)?Qe.checked=!!Oe.find(Tt=>Tt===Qe.value):Qe.checked=Oe===Qe.value||!!Oe)}):Le.refs.forEach(Qe=>Qe.checked=Qe.value===Oe):Bw(Le.ref)?Le.ref.value="":(Le.ref.value=Oe,Le.ref.type||A.state.next({name:xe,values:co(d)})))}(Ve.shouldDirty||Ve.shouldTouch)&&ne(xe,Oe,Ve.shouldTouch,Ve.shouldDirty,!0),Ve.shouldValidate&&st(xe)},Je=(xe,Re,Ve)=>{for(const Vt in Re){if(!Re.hasOwnProperty(Vt))return;const Oe=Re[Vt],Le=xe+"."+Vt,Qe=yn(i,Le);(g.array.has(xe)||Wa(Oe)||Qe&&!Qe._f)&&!Uf(Oe)?Je(Le,Oe,Ve):ze(Le,Oe,Ve)}},Ae=(xe,Re,Ve={})=>{const Vt=yn(i,xe),Oe=g.array.has(xe),Le=co(Re);na(d,xe,Le),Oe?(A.array.next({name:xe,values:co(d)}),(C.isDirty||C.dirtyFields||E.isDirty||E.dirtyFields)&&Ve.shouldDirty&&A.state.next({name:xe,dirtyFields:Em(l,d),isDirty:ye(xe,Le)})):Vt&&!Vt._f&&!Vs(Le)?Je(xe,Le,Ve):ze(xe,Le,Ve),lE(xe,g)&&A.state.next({...n,name:xe}),A.state.next({name:a.mount?xe:void 0,values:co(d)})},De=async xe=>{a.mount=!0;const Re=xe.target;let Ve=Re.name,Vt=!0;const Oe=yn(i,Ve),Le=on=>{Vt=Number.isNaN(on)||Uf(on)&&isNaN(on.getTime())||gc(on,yn(d,Ve,on))},Qe=oE(t.mode),Tt=oE(t.reValidateMode);if(Oe){let on,Mn;const Xn=Re.type?aE(Oe._f):sj(xe),wr=xe.type===g0.BLUR||xe.type===g0.FOCUS_OUT,Bi=!GO(Oe._f)&&!t.resolver&&!yn(n.errors,Ve)&&!Oe._f.deps||KO(wr,yn(n.touchedFields,Ve),n.isSubmitted,Tt,Qe),Jr=lE(Ve,g,wr);na(d,Ve,Xn),wr?(!Re||!Re.readOnly)&&(Oe._f.onBlur&&Oe._f.onBlur(xe),x&&x(0)):Oe._f.onChange&&Oe._f.onChange(xe);const Xr=ne(Ve,Xn,wr),Ci=!ys(Xr)||Jr;if(!wr&&A.state.next({name:Ve,type:xe.type,values:co(d)}),Bi)return(C.isValid||E.isValid)&&(t.mode==="onBlur"?wr&&L():wr||L()),Ci&&A.state.next({name:Ve,...Jr?{}:Xr});if(!wr&&Jr&&A.state.next({...n}),t.resolver){const{errors:Sr}=await ee([Ve]);if(Le(Xn),Vt){const ka=cE(n.errors,i,Ve),qr=cE(Sr,i,ka.name||Ve);on=qr.error,Ve=qr.name,Mn=ys(Sr)}}else B([Ve],!0),on=(await dE(Oe,g.disabled,d,D,t.shouldUseNativeValidation))[Ve],B([Ve]),Le(Xn),Vt&&(on?Mn=!1:(C.isValid||E.isValid)&&(Mn=await he(i,!0)));Vt&&(Oe._f.deps&&(!Array.isArray(Oe._f.deps)||Oe._f.deps.length>0)&&st(Oe._f.deps),re(Ve,Mn,on,Xr))}},ke=(xe,Re)=>{if(yn(n.errors,Re)&&xe.focus)return xe.focus(),1},st=async(xe,Re={})=>{let Ve,Vt;const Oe=Ey(xe);if(t.resolver){const Le=await oe(Oa(xe)?xe:Oe);Ve=ys(Le),Vt=xe?!Oe.some(Qe=>yn(Le,Qe)):Ve}else xe?(Vt=(await Promise.all(Oe.map(async Le=>{const Qe=yn(i,Le);return await he(Qe&&Qe._f?{[Le]:Qe}:Qe)}))).every(Boolean),!(!Vt&&!n.isValid)&&L()):Vt=Ve=await he(i);return A.state.next({...!cl(xe)||(C.isValid||E.isValid)&&Ve!==n.isValid?{}:{name:xe},...t.resolver||!xe?{isValid:Ve}:{},errors:n.errors}),Re.shouldFocus&&!Vt&&Cy(i,ke,xe?Oe:g.mount),Vt},me=(xe,Re)=>{let Ve={...a.mount?d:l};return Re&&(Ve=dj(Re.dirtyFields?n.dirtyFields:n.touchedFields,Ve)),Oa(xe)?Ve:cl(xe)?yn(Ve,xe):xe.map(Vt=>yn(Ve,Vt))},Ce=(xe,Re)=>({invalid:!!yn((Re||n).errors,xe),isDirty:!!yn((Re||n).dirtyFields,xe),error:yn((Re||n).errors,xe),isValidating:!!yn(n.validatingFields,xe),isTouched:!!yn((Re||n).touchedFields,xe)}),pe=xe=>{xe&&Ey(xe).forEach(Re=>Ka(n.errors,Re)),A.state.next({errors:xe?n.errors:{}})},Q=(xe,Re,Ve)=>{const Vt=(yn(i,xe,{_f:{}})._f||{}).ref,Oe=yn(n.errors,xe)||{},{ref:Le,message:Qe,type:Tt,...on}=Oe;na(n.errors,xe,{...on,...Re,ref:Vt}),A.state.next({name:xe,errors:n.errors,isValid:!1}),Ve&&Ve.shouldFocus&&Vt&&Vt.focus&&Vt.focus()},Ee=(xe,Re)=>yc(xe)?A.state.subscribe({next:Ve=>"values"in Ve&&xe(Pe(void 0,Re),Ve)}):Pe(xe,Re,!0),Ge=xe=>A.state.subscribe({next:Re=>{XO(xe.name,Re.name,xe.exact)&&ZO(Re,xe.formState||C,ir,xe.reRenderRoot)&&xe.callback({values:{...d},...n,...Re,defaultValues:l})}}).unsubscribe,lt=xe=>(a.mount=!0,E={...E,...xe.formState},Ge({...xe,formState:E})),We=(xe,Re={})=>{for(const Ve of xe?Ey(xe):g.mount)g.mount.delete(Ve),g.array.delete(Ve),Re.keepValue||(Ka(i,Ve),Ka(d,Ve)),!Re.keepError&&Ka(n.errors,Ve),!Re.keepDirty&&Ka(n.dirtyFields,Ve),!Re.keepTouched&&Ka(n.touchedFields,Ve),!Re.keepIsValidating&&Ka(n.validatingFields,Ve),!t.shouldUnregister&&!Re.keepDefaultValue&&Ka(l,Ve);A.state.next({values:co(d)}),A.state.next({...n,...Re.keepDirty?{isDirty:ye()}:{}}),!Re.keepIsValid&&L()},Nt=({disabled:xe,name:Re})=>{(sl(xe)&&a.mount||xe||g.disabled.has(Re))&&(xe?g.disabled.add(Re):g.disabled.delete(Re))},At=(xe,Re={})=>{let Ve=yn(i,xe);const Vt=sl(Re.disabled)||sl(t.disabled);return na(i,xe,{...Ve||{},_f:{...Ve&&Ve._f?Ve._f:{ref:{name:xe}},name:xe,mount:!0,...Re}}),g.mount.add(xe),Ve?Nt({disabled:sl(Re.disabled)?Re.disabled:t.disabled,name:xe}):W(xe,!0,Re.value),{...Vt?{disabled:Re.disabled||t.disabled}:{},...t.progressive?{required:!!Re.required,min:ly(Re.min),max:ly(Re.max),minLength:ly(Re.minLength),maxLength:ly(Re.maxLength),pattern:ly(Re.pattern)}:{},name:xe,onChange:De,onBlur:De,ref:Oe=>{if(Oe){At(xe,Re),Ve=yn(i,xe);const Le=Oa(Oe.value)&&Oe.querySelectorAll&&Oe.querySelectorAll("input,select,textarea")[0]||Oe,Qe=FO(Le),Tt=Ve._f.refs||[];if(Qe?Tt.find(on=>on===Le):Le===Ve._f.ref)return;na(i,xe,{_f:{...Ve._f,...Qe?{refs:[...Tt.filter(m_),Le,...Array.isArray(yn(l,xe))?[{}]:[]],ref:{type:Le.type,name:xe}}:{ref:Le}}}),W(xe,!1,void 0,Le)}else Ve=yn(i,xe,{}),Ve._f&&(Ve._f.mount=!1),(t.shouldUnregister||Re.shouldUnregister)&&!(lj(g.array,xe)&&a.action)&&g.unMount.add(xe)}}},Mt=()=>t.shouldFocusError&&Cy(i,ke,g.mount),Ut=xe=>{sl(xe)&&(A.state.next({disabled:xe}),Cy(i,(Re,Ve)=>{const Vt=yn(i,Ve);Vt&&(Re.disabled=Vt._f.disabled||xe,Array.isArray(Vt._f.refs)&&Vt._f.refs.forEach(Oe=>{Oe.disabled=Vt._f.disabled||xe}))},0,!1))},Pt=(xe,Re)=>async Ve=>{let Vt;Ve&&(Ve.preventDefault&&Ve.preventDefault(),Ve.persist&&Ve.persist());let Oe=co(d);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:Le,values:Qe}=await ee();n.errors=Le,Oe=co(Qe)}else await he(i);if(g.disabled.size)for(const Le of g.disabled)Ka(Oe,Le);if(Ka(n.errors,"root"),ys(n.errors)){A.state.next({errors:{}});try{await xe(Oe,Ve)}catch(Le){Vt=Le}}else Re&&await Re({...n.errors},Ve),Mt(),setTimeout(Mt);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ys(n.errors)&&!Vt,submitCount:n.submitCount+1,errors:n.errors}),Vt)throw Vt},Rt=(xe,Re={})=>{yn(i,xe)&&(Oa(Re.defaultValue)?Ae(xe,co(yn(l,xe))):(Ae(xe,Re.defaultValue),na(l,xe,co(Re.defaultValue))),Re.keepTouched||Ka(n.touchedFields,xe),Re.keepDirty||(Ka(n.dirtyFields,xe),n.isDirty=Re.defaultValue?ye(xe,co(yn(l,xe))):ye()),Re.keepError||(Ka(n.errors,xe),C.isValid&&L()),A.state.next({...n}))},vn=(xe,Re={})=>{const Ve=xe?co(xe):l,Vt=co(Ve),Oe=ys(xe),Le=Oe?l:Vt;if(Re.keepDefaultValues||(l=Ve),!Re.keepValues){if(Re.keepDirtyValues){const Qe=new Set([...g.mount,...Object.keys(Em(l,d))]);for(const Tt of Array.from(Qe))yn(n.dirtyFields,Tt)?na(Le,Tt,yn(d,Tt)):Ae(Tt,yn(Le,Tt))}else{if(Iw&&Oa(xe))for(const Qe of g.mount){const Tt=yn(i,Qe);if(Tt&&Tt._f){const on=Array.isArray(Tt._f.refs)?Tt._f.refs[0]:Tt._f.ref;if(y0(on)){const Mn=on.closest("form");if(Mn){Mn.reset();break}}}}if(Re.keepFieldsRef)for(const Qe of g.mount)Ae(Qe,yn(Le,Qe));else i={}}d=t.shouldUnregister?Re.keepDefaultValues?co(l):{}:co(Le),A.array.next({values:{...Le}}),A.state.next({values:{...Le}})}g={mount:Re.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!C.isValid||!!Re.keepIsValid||!!Re.keepDirtyValues||!t.shouldUnregister&&!ys(Le),a.watch=!!t.shouldUnregister,A.state.next({submitCount:Re.keepSubmitCount?n.submitCount:0,isDirty:Oe?!1:Re.keepDirty?n.isDirty:!!(Re.keepDefaultValues&&!gc(xe,l)),isSubmitted:Re.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Oe?{}:Re.keepDirtyValues?Re.keepDefaultValues&&d?Em(l,d):n.dirtyFields:Re.keepDefaultValues&&xe?Em(l,xe):Re.keepDirty?n.dirtyFields:{},touchedFields:Re.keepTouched?n.touchedFields:{},errors:Re.keepErrors?n.errors:{},isSubmitSuccessful:Re.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:l})},er=(xe,Re)=>vn(yc(xe)?xe(d):xe,Re),$n=(xe,Re={})=>{const Ve=yn(i,xe),Vt=Ve&&Ve._f;if(Vt){const Oe=Vt.refs?Vt.refs[0]:Vt.ref;Oe.focus&&(Oe.focus(),Re.shouldSelect&&yc(Oe.select)&&Oe.select())}},ir=xe=>{n={...n,...xe}},Xe={control:{register:At,unregister:We,getFieldState:Ce,handleSubmit:Pt,setError:Q,_subscribe:Ge,_runSchema:ee,_focusError:Mt,_getWatch:Pe,_getDirty:ye,_setValid:L,_setFieldArray:z,_setDisabledField:Nt,_setErrors:H,_getFieldArray:Ke,_reset:vn,_resetDefaultValues:()=>yc(t.defaultValues)&&t.defaultValues().then(xe=>{er(xe,t.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:we,_disableForm:Ut,_subjects:A,_proxyFormState:C,get _fields(){return i},get _formValues(){return d},get _state(){return a},set _state(xe){a=xe},get _defaultValues(){return l},get _names(){return g},set _names(xe){g=xe},get _formState(){return n},get _options(){return t},set _options(xe){t={...t,...xe}}},subscribe:lt,trigger:st,register:At,handleSubmit:Pt,watch:Ee,setValue:Ae,getValues:me,reset:er,resetField:Rt,clearErrors:pe,unregister:We,setError:Q,setFocus:$n,getFieldState:Ce};return{...Xe,formControl:Xe}}function bu(e={}){const t=Bt.useRef(void 0),n=Bt.useRef(void 0),[i,l]=Bt.useState({isDirty:!1,isValidating:!1,isLoading:yc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:yc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:i},e.defaultValues&&!yc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:a,...g}=JO(e);t.current={...g,formState:i}}const d=t.current.control;return d._options=e,zw(()=>{const a=d._subscribe({formState:d._proxyFormState,callback:()=>l({...d._formState}),reRenderRoot:!0});return l(g=>({...g,isReady:!0})),d._formState.isReady=!0,a},[d]),Bt.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),Bt.useEffect(()=>{e.mode&&(d._options.mode=e.mode),e.reValidateMode&&(d._options.reValidateMode=e.reValidateMode)},[d,e.mode,e.reValidateMode]),Bt.useEffect(()=>{e.errors&&(d._setErrors(e.errors),d._focusError())},[d,e.errors]),Bt.useEffect(()=>{e.shouldUnregister&&d._subjects.state.next({values:d._getWatch()})},[d,e.shouldUnregister]),Bt.useEffect(()=>{if(d._proxyFormState.isDirty){const a=d._getDirty();a!==i.isDirty&&d._subjects.state.next({isDirty:a})}},[d,i.isDirty]),Bt.useEffect(()=>{var a;e.values&&!gc(e.values,n.current)?(d._reset(e.values,{keepFieldsRef:!0,...d._options.resetOptions}),!((a=d._options.resetOptions)===null||a===void 0)&&a.keepIsValid||d._setValid(),n.current=e.values,l(g=>({...g}))):d._resetDefaultValues()},[d,e.values]),Bt.useEffect(()=>{d._state.mount||(d._setValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),t.current.formState=cj(i,d),t.current}function yj(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=yj(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function kd(){for(var e,t,n=0,i="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=yj(e))&&(i&&(i+=" "),i+=t);return i}const eR=(e,t)=>{const n=new Array(e.length+t.length);for(let i=0;i<e.length;i++)n[i]=e[i];for(let i=0;i<t.length;i++)n[e.length+i]=t[i];return n},tR=(e,t)=>({classGroupId:e,validator:t}),vj=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),x0="-",hE=[],nR="arbitrary..",rR=e=>{const t=aR(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return iR(a);const g=a.split(x0),x=g[0]===""&&g.length>1?1:0;return xj(g,x,t)},getConflictingClassGroupIds:(a,g)=>{if(g){const x=i[a],_=n[a];return x?_?eR(_,x):x:_||hE}return n[a]||hE}}},xj=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const l=e[t],d=n.nextPart.get(l);if(d){const _=xj(e,t+1,d);if(_)return _}const a=n.validators;if(a===null)return;const g=t===0?e.join(x0):e.slice(t).join(x0),x=a.length;for(let _=0;_<x;_++){const C=a[_];if(C.validator(g))return C.classGroupId}},iR=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),i=t.slice(0,n);return i?nR+i:void 0})(),aR=e=>{const{theme:t,classGroups:n}=e;return oR(n,t)},oR=(e,t)=>{const n=vj();for(const i in e){const l=e[i];Uw(l,n,i,t)}return n},Uw=(e,t,n,i)=>{const l=e.length;for(let d=0;d<l;d++){const a=e[d];sR(a,t,n,i)}},sR=(e,t,n,i)=>{if(typeof e=="string"){lR(e,t,n);return}if(typeof e=="function"){cR(e,t,n,i);return}uR(e,t,n,i)},lR=(e,t,n)=>{const i=e===""?t:bj(t,e);i.classGroupId=n},cR=(e,t,n,i)=>{if(dR(e)){Uw(e(i),t,n,i);return}t.validators===null&&(t.validators=[]),t.validators.push(tR(n,e))},uR=(e,t,n,i)=>{const l=Object.entries(e),d=l.length;for(let a=0;a<d;a++){const[g,x]=l[a];Uw(x,bj(t,g),n,i)}},bj=(e,t)=>{let n=e;const i=t.split(x0),l=i.length;for(let d=0;d<l;d++){const a=i[d];let g=n.nextPart.get(a);g||(g=vj(),n.nextPart.set(a,g)),n=g}return n},dR=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,hR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),i=Object.create(null);const l=(d,a)=>{n[d]=a,t++,t>e&&(t=0,i=n,n=Object.create(null))};return{get(d){let a=n[d];if(a!==void 0)return a;if((a=i[d])!==void 0)return l(d,a),a},set(d,a){d in n?n[d]=a:l(d,a)}}},m1="!",fE=":",fR=[],pE=(e,t,n,i,l)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:i,isExternal:l}),pR=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=l=>{const d=[];let a=0,g=0,x=0,_;const C=l.length;for(let L=0;L<C;L++){const B=l[L];if(a===0&&g===0){if(B===fE){d.push(l.slice(x,L)),x=L+1;continue}if(B==="/"){_=L;continue}}B==="["?a++:B==="]"?a--:B==="("?g++:B===")"&&g--}const E=d.length===0?l:l.slice(x);let A=E,D=!1;E.endsWith(m1)?(A=E.slice(0,-1),D=!0):E.startsWith(m1)&&(A=E.slice(1),D=!0);const I=_&&_>x?_-x:void 0;return pE(d,D,A,I)};if(t){const l=t+fE,d=i;i=a=>a.startsWith(l)?d(a.slice(l.length)):pE(fR,!1,a,void 0,!0)}if(n){const l=i;i=d=>n({className:d,parseClassName:l})}return i},mR=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,i)=>{t.set(n,1e6+i)}),n=>{const i=[];let l=[];for(let d=0;d<n.length;d++){const a=n[d],g=a[0]==="[",x=t.has(a);g||x?(l.length>0&&(l.sort(),i.push(...l),l=[]),i.push(a)):l.push(a)}return l.length>0&&(l.sort(),i.push(...l)),i}},gR=e=>({cache:hR(e.cacheSize),parseClassName:pR(e),sortModifiers:mR(e),...rR(e)}),yR=/\s+/,vR=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:l,sortModifiers:d}=t,a=[],g=e.trim().split(yR);let x="";for(let _=g.length-1;_>=0;_-=1){const C=g[_],{isExternal:E,modifiers:A,hasImportantModifier:D,baseClassName:I,maybePostfixModifierPosition:L}=n(C);if(E){x=C+(x.length>0?" "+x:x);continue}let B=!!L,z=i(B?I.substring(0,L):I);if(!z){if(!B){x=C+(x.length>0?" "+x:x);continue}if(z=i(I),!z){x=C+(x.length>0?" "+x:x);continue}B=!1}const q=A.length===0?"":A.length===1?A[0]:d(A).join(":"),H=D?q+m1:q,W=H+z;if(a.indexOf(W)>-1)continue;a.push(W);const ne=l(z,B);for(let re=0;re<ne.length;++re){const ee=ne[re];a.push(H+ee)}x=C+(x.length>0?" "+x:x)}return x},xR=(...e)=>{let t=0,n,i,l="";for(;t<e.length;)(n=e[t++])&&(i=_j(n))&&(l&&(l+=" "),l+=i);return l},_j=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=_j(e[i]))&&(n&&(n+=" "),n+=t);return n},bR=(e,...t)=>{let n,i,l,d;const a=x=>{const _=t.reduce((C,E)=>E(C),e());return n=gR(_),i=n.cache.get,l=n.cache.set,d=g,g(x)},g=x=>{const _=i(x);if(_)return _;const C=vR(x,n);return l(x,C),C};return d=a,(...x)=>d(xR(...x))},_R=[],lo=e=>{const t=n=>n[e]||_R;return t.isThemeGetter=!0,t},wj=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Sj=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wR=/^\d+\/\d+$/,SR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ER=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,TR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mm=e=>wR.test(e),Rr=e=>!!e&&!Number.isNaN(Number(e)),Ah=e=>!!e&&Number.isInteger(Number(e)),g_=e=>e.endsWith("%")&&Rr(e.slice(0,-1)),xd=e=>SR.test(e),jR=()=>!0,AR=e=>ER.test(e)&&!CR.test(e),Ej=()=>!1,NR=e=>TR.test(e),MR=e=>kR.test(e),DR=e=>!In(e)&&!On(e),PR=e=>$m(e,kj,Ej),In=e=>wj.test(e),Of=e=>$m(e,jj,AR),y_=e=>$m(e,zR,Rr),mE=e=>$m(e,Cj,Ej),IR=e=>$m(e,Tj,MR),Dx=e=>$m(e,Aj,NR),On=e=>Sj.test(e),cy=e=>Gm(e,jj),OR=e=>Gm(e,BR),gE=e=>Gm(e,Cj),RR=e=>Gm(e,kj),LR=e=>Gm(e,Tj),Px=e=>Gm(e,Aj,!0),$m=(e,t,n)=>{const i=wj.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},Gm=(e,t,n=!1)=>{const i=Sj.exec(e);return i?i[1]?t(i[1]):n:!1},Cj=e=>e==="position"||e==="percentage",Tj=e=>e==="image"||e==="url",kj=e=>e==="length"||e==="size"||e==="bg-size",jj=e=>e==="length",zR=e=>e==="number",BR=e=>e==="family-name",Aj=e=>e==="shadow",FR=()=>{const e=lo("color"),t=lo("font"),n=lo("text"),i=lo("font-weight"),l=lo("tracking"),d=lo("leading"),a=lo("breakpoint"),g=lo("container"),x=lo("spacing"),_=lo("radius"),C=lo("shadow"),E=lo("inset-shadow"),A=lo("text-shadow"),D=lo("drop-shadow"),I=lo("blur"),L=lo("perspective"),B=lo("aspect"),z=lo("ease"),q=lo("animate"),H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ne=()=>[...W(),On,In],re=()=>["auto","hidden","clip","visible","scroll"],ee=()=>["auto","contain","none"],oe=()=>[On,In,x],he=()=>[mm,"full","auto",...oe()],we=()=>[Ah,"none","subgrid",On,In],ye=()=>["auto",{span:["full",Ah,On,In]},Ah,On,In],Pe=()=>[Ah,"auto",On,In],Ke=()=>["auto","min","max","fr",On,In],ze=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Je=()=>["start","end","center","stretch","center-safe","end-safe"],Ae=()=>["auto",...oe()],De=()=>[mm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...oe()],ke=()=>[e,On,In],st=()=>[...W(),gE,mE,{position:[On,In]}],me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ce=()=>["auto","cover","contain",RR,PR,{size:[On,In]}],pe=()=>[g_,cy,Of],Q=()=>["","none","full",_,On,In],Ee=()=>["",Rr,cy,Of],Ge=()=>["solid","dashed","dotted","double"],lt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],We=()=>[Rr,g_,gE,mE],Nt=()=>["","none",I,On,In],At=()=>["none",Rr,On,In],Mt=()=>["none",Rr,On,In],Ut=()=>[Rr,On,In],Pt=()=>[mm,"full",...oe()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xd],breakpoint:[xd],color:[jR],container:[xd],"drop-shadow":[xd],ease:["in","out","in-out"],font:[DR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xd],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xd],shadow:[xd],spacing:["px",Rr],text:[xd],"text-shadow":[xd],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mm,In,On,B]}],container:["container"],columns:[{columns:[Rr,In,On,g]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ne()}],overflow:[{overflow:re()}],"overflow-x":[{"overflow-x":re()}],"overflow-y":[{"overflow-y":re()}],overscroll:[{overscroll:ee()}],"overscroll-x":[{"overscroll-x":ee()}],"overscroll-y":[{"overscroll-y":ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:he()}],"inset-x":[{"inset-x":he()}],"inset-y":[{"inset-y":he()}],start:[{start:he()}],end:[{end:he()}],top:[{top:he()}],right:[{right:he()}],bottom:[{bottom:he()}],left:[{left:he()}],visibility:["visible","invisible","collapse"],z:[{z:[Ah,"auto",On,In]}],basis:[{basis:[mm,"full","auto",g,...oe()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Rr,mm,"auto","initial","none",In]}],grow:[{grow:["",Rr,On,In]}],shrink:[{shrink:["",Rr,On,In]}],order:[{order:[Ah,"first","last","none",On,In]}],"grid-cols":[{"grid-cols":we()}],"col-start-end":[{col:ye()}],"col-start":[{"col-start":Pe()}],"col-end":[{"col-end":Pe()}],"grid-rows":[{"grid-rows":we()}],"row-start-end":[{row:ye()}],"row-start":[{"row-start":Pe()}],"row-end":[{"row-end":Pe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ke()}],"auto-rows":[{"auto-rows":Ke()}],gap:[{gap:oe()}],"gap-x":[{"gap-x":oe()}],"gap-y":[{"gap-y":oe()}],"justify-content":[{justify:[...ze(),"normal"]}],"justify-items":[{"justify-items":[...Je(),"normal"]}],"justify-self":[{"justify-self":["auto",...Je()]}],"align-content":[{content:["normal",...ze()]}],"align-items":[{items:[...Je(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Je(),{baseline:["","last"]}]}],"place-content":[{"place-content":ze()}],"place-items":[{"place-items":[...Je(),"baseline"]}],"place-self":[{"place-self":["auto",...Je()]}],p:[{p:oe()}],px:[{px:oe()}],py:[{py:oe()}],ps:[{ps:oe()}],pe:[{pe:oe()}],pt:[{pt:oe()}],pr:[{pr:oe()}],pb:[{pb:oe()}],pl:[{pl:oe()}],m:[{m:Ae()}],mx:[{mx:Ae()}],my:[{my:Ae()}],ms:[{ms:Ae()}],me:[{me:Ae()}],mt:[{mt:Ae()}],mr:[{mr:Ae()}],mb:[{mb:Ae()}],ml:[{ml:Ae()}],"space-x":[{"space-x":oe()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":oe()}],"space-y-reverse":["space-y-reverse"],size:[{size:De()}],w:[{w:[g,"screen",...De()]}],"min-w":[{"min-w":[g,"screen","none",...De()]}],"max-w":[{"max-w":[g,"screen","none","prose",{screen:[a]},...De()]}],h:[{h:["screen","lh",...De()]}],"min-h":[{"min-h":["screen","lh","none",...De()]}],"max-h":[{"max-h":["screen","lh",...De()]}],"font-size":[{text:["base",n,cy,Of]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,On,y_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",g_,In]}],"font-family":[{font:[OR,In,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,On,In]}],"line-clamp":[{"line-clamp":[Rr,"none",On,y_]}],leading:[{leading:[d,...oe()]}],"list-image":[{"list-image":["none",On,In]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",On,In]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ke()}],"text-color":[{text:ke()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Rr,"from-font","auto",On,Of]}],"text-decoration-color":[{decoration:ke()}],"underline-offset":[{"underline-offset":[Rr,"auto",On,In]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:oe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",On,In]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",On,In]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:st()}],"bg-repeat":[{bg:me()}],"bg-size":[{bg:Ce()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ah,On,In],radial:["",On,In],conic:[Ah,On,In]},LR,IR]}],"bg-color":[{bg:ke()}],"gradient-from-pos":[{from:pe()}],"gradient-via-pos":[{via:pe()}],"gradient-to-pos":[{to:pe()}],"gradient-from":[{from:ke()}],"gradient-via":[{via:ke()}],"gradient-to":[{to:ke()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:Ee()}],"border-w-x":[{"border-x":Ee()}],"border-w-y":[{"border-y":Ee()}],"border-w-s":[{"border-s":Ee()}],"border-w-e":[{"border-e":Ee()}],"border-w-t":[{"border-t":Ee()}],"border-w-r":[{"border-r":Ee()}],"border-w-b":[{"border-b":Ee()}],"border-w-l":[{"border-l":Ee()}],"divide-x":[{"divide-x":Ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ge(),"hidden","none"]}],"divide-style":[{divide:[...Ge(),"hidden","none"]}],"border-color":[{border:ke()}],"border-color-x":[{"border-x":ke()}],"border-color-y":[{"border-y":ke()}],"border-color-s":[{"border-s":ke()}],"border-color-e":[{"border-e":ke()}],"border-color-t":[{"border-t":ke()}],"border-color-r":[{"border-r":ke()}],"border-color-b":[{"border-b":ke()}],"border-color-l":[{"border-l":ke()}],"divide-color":[{divide:ke()}],"outline-style":[{outline:[...Ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Rr,On,In]}],"outline-w":[{outline:["",Rr,cy,Of]}],"outline-color":[{outline:ke()}],shadow:[{shadow:["","none",C,Px,Dx]}],"shadow-color":[{shadow:ke()}],"inset-shadow":[{"inset-shadow":["none",E,Px,Dx]}],"inset-shadow-color":[{"inset-shadow":ke()}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ke()}],"ring-offset-w":[{"ring-offset":[Rr,Of]}],"ring-offset-color":[{"ring-offset":ke()}],"inset-ring-w":[{"inset-ring":Ee()}],"inset-ring-color":[{"inset-ring":ke()}],"text-shadow":[{"text-shadow":["none",A,Px,Dx]}],"text-shadow-color":[{"text-shadow":ke()}],opacity:[{opacity:[Rr,On,In]}],"mix-blend":[{"mix-blend":[...lt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":lt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Rr]}],"mask-image-linear-from-pos":[{"mask-linear-from":We()}],"mask-image-linear-to-pos":[{"mask-linear-to":We()}],"mask-image-linear-from-color":[{"mask-linear-from":ke()}],"mask-image-linear-to-color":[{"mask-linear-to":ke()}],"mask-image-t-from-pos":[{"mask-t-from":We()}],"mask-image-t-to-pos":[{"mask-t-to":We()}],"mask-image-t-from-color":[{"mask-t-from":ke()}],"mask-image-t-to-color":[{"mask-t-to":ke()}],"mask-image-r-from-pos":[{"mask-r-from":We()}],"mask-image-r-to-pos":[{"mask-r-to":We()}],"mask-image-r-from-color":[{"mask-r-from":ke()}],"mask-image-r-to-color":[{"mask-r-to":ke()}],"mask-image-b-from-pos":[{"mask-b-from":We()}],"mask-image-b-to-pos":[{"mask-b-to":We()}],"mask-image-b-from-color":[{"mask-b-from":ke()}],"mask-image-b-to-color":[{"mask-b-to":ke()}],"mask-image-l-from-pos":[{"mask-l-from":We()}],"mask-image-l-to-pos":[{"mask-l-to":We()}],"mask-image-l-from-color":[{"mask-l-from":ke()}],"mask-image-l-to-color":[{"mask-l-to":ke()}],"mask-image-x-from-pos":[{"mask-x-from":We()}],"mask-image-x-to-pos":[{"mask-x-to":We()}],"mask-image-x-from-color":[{"mask-x-from":ke()}],"mask-image-x-to-color":[{"mask-x-to":ke()}],"mask-image-y-from-pos":[{"mask-y-from":We()}],"mask-image-y-to-pos":[{"mask-y-to":We()}],"mask-image-y-from-color":[{"mask-y-from":ke()}],"mask-image-y-to-color":[{"mask-y-to":ke()}],"mask-image-radial":[{"mask-radial":[On,In]}],"mask-image-radial-from-pos":[{"mask-radial-from":We()}],"mask-image-radial-to-pos":[{"mask-radial-to":We()}],"mask-image-radial-from-color":[{"mask-radial-from":ke()}],"mask-image-radial-to-color":[{"mask-radial-to":ke()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":W()}],"mask-image-conic-pos":[{"mask-conic":[Rr]}],"mask-image-conic-from-pos":[{"mask-conic-from":We()}],"mask-image-conic-to-pos":[{"mask-conic-to":We()}],"mask-image-conic-from-color":[{"mask-conic-from":ke()}],"mask-image-conic-to-color":[{"mask-conic-to":ke()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:st()}],"mask-repeat":[{mask:me()}],"mask-size":[{mask:Ce()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",On,In]}],filter:[{filter:["","none",On,In]}],blur:[{blur:Nt()}],brightness:[{brightness:[Rr,On,In]}],contrast:[{contrast:[Rr,On,In]}],"drop-shadow":[{"drop-shadow":["","none",D,Px,Dx]}],"drop-shadow-color":[{"drop-shadow":ke()}],grayscale:[{grayscale:["",Rr,On,In]}],"hue-rotate":[{"hue-rotate":[Rr,On,In]}],invert:[{invert:["",Rr,On,In]}],saturate:[{saturate:[Rr,On,In]}],sepia:[{sepia:["",Rr,On,In]}],"backdrop-filter":[{"backdrop-filter":["","none",On,In]}],"backdrop-blur":[{"backdrop-blur":Nt()}],"backdrop-brightness":[{"backdrop-brightness":[Rr,On,In]}],"backdrop-contrast":[{"backdrop-contrast":[Rr,On,In]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Rr,On,In]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Rr,On,In]}],"backdrop-invert":[{"backdrop-invert":["",Rr,On,In]}],"backdrop-opacity":[{"backdrop-opacity":[Rr,On,In]}],"backdrop-saturate":[{"backdrop-saturate":[Rr,On,In]}],"backdrop-sepia":[{"backdrop-sepia":["",Rr,On,In]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":oe()}],"border-spacing-x":[{"border-spacing-x":oe()}],"border-spacing-y":[{"border-spacing-y":oe()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",On,In]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Rr,"initial",On,In]}],ease:[{ease:["linear","initial",z,On,In]}],delay:[{delay:[Rr,On,In]}],animate:[{animate:["none",q,On,In]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[L,On,In]}],"perspective-origin":[{"perspective-origin":ne()}],rotate:[{rotate:At()}],"rotate-x":[{"rotate-x":At()}],"rotate-y":[{"rotate-y":At()}],"rotate-z":[{"rotate-z":At()}],scale:[{scale:Mt()}],"scale-x":[{"scale-x":Mt()}],"scale-y":[{"scale-y":Mt()}],"scale-z":[{"scale-z":Mt()}],"scale-3d":["scale-3d"],skew:[{skew:Ut()}],"skew-x":[{"skew-x":Ut()}],"skew-y":[{"skew-y":Ut()}],transform:[{transform:[On,In,"","none","gpu","cpu"]}],"transform-origin":[{origin:ne()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Pt()}],"translate-x":[{"translate-x":Pt()}],"translate-y":[{"translate-y":Pt()}],"translate-z":[{"translate-z":Pt()}],"translate-none":["translate-none"],accent:[{accent:ke()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ke()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",On,In]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":oe()}],"scroll-mx":[{"scroll-mx":oe()}],"scroll-my":[{"scroll-my":oe()}],"scroll-ms":[{"scroll-ms":oe()}],"scroll-me":[{"scroll-me":oe()}],"scroll-mt":[{"scroll-mt":oe()}],"scroll-mr":[{"scroll-mr":oe()}],"scroll-mb":[{"scroll-mb":oe()}],"scroll-ml":[{"scroll-ml":oe()}],"scroll-p":[{"scroll-p":oe()}],"scroll-px":[{"scroll-px":oe()}],"scroll-py":[{"scroll-py":oe()}],"scroll-ps":[{"scroll-ps":oe()}],"scroll-pe":[{"scroll-pe":oe()}],"scroll-pt":[{"scroll-pt":oe()}],"scroll-pr":[{"scroll-pr":oe()}],"scroll-pb":[{"scroll-pb":oe()}],"scroll-pl":[{"scroll-pl":oe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",On,In]}],fill:[{fill:["none",...ke()]}],"stroke-w":[{stroke:[Rr,cy,Of,y_]}],stroke:[{stroke:["none",...ke()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UR=bR(FR);function Kt(...e){return UR(kd(e))}function Dr({className:e,type:t,...n}){return c.jsx("input",{type:t,"data-slot":"input",spellCheck:"false",className:Kt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","[&:-webkit-autofill]:bg-transparent","[&:-webkit-autofill]:shadow-[0_0_0px_1000px_white_inset]","[&:-webkit-autofill]:[background-clip:content-box]","[&:-webkit-autofill]:[-webkit-text-fill-color:#000000]","[-webkit-spell-check:none]","[&:not(disabled)]:[color-scheme:none]",e),...n})}function yE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Pd(...e){return t=>{let n=!1;const i=e.map(l=>{const d=yE(l,t);return!n&&typeof d=="function"&&(n=!0),d});if(n)return()=>{for(let l=0;l<i.length;l++){const d=i[l];typeof d=="function"?d():yE(e[l],null)}}}}function Vr(...e){return k.useCallback(Pd(...e),e)}var VR=Symbol.for("react.lazy"),b0=Cw[" use ".trim().toString()];function qR(e){return typeof e=="object"&&e!==null&&"then"in e}function Nj(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===VR&&"_payload"in e&&qR(e._payload)}function K0(e){const t=HR(e),n=k.forwardRef((i,l)=>{let{children:d,...a}=i;Nj(d)&&typeof b0=="function"&&(d=b0(d._payload));const g=k.Children.toArray(d),x=g.find(GR);if(x){const _=x.props.children,C=g.map(E=>E===x?k.Children.count(_)>1?k.Children.only(null):k.isValidElement(_)?_.props.children:null:E);return c.jsx(t,{...a,ref:l,children:k.isValidElement(_)?k.cloneElement(_,void 0,C):null})}return c.jsx(t,{...a,ref:l,children:d})});return n.displayName=`${e}.Slot`,n}var Mj=K0("Slot");function HR(e){const t=k.forwardRef((n,i)=>{let{children:l,...d}=n;if(Nj(l)&&typeof b0=="function"&&(l=b0(l._payload)),k.isValidElement(l)){const a=XR(l),g=ZR(d,l.props);return l.type!==k.Fragment&&(g.ref=i?Pd(i,a):a),k.cloneElement(l,g)}return k.Children.count(l)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $R=Symbol("radix.slottable");function GR(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$R}function ZR(e,t){const n={...t};for(const i in t){const l=e[i],d=t[i];/^on[A-Z]/.test(i)?l&&d?n[i]=(...g)=>{const x=d(...g);return l(...g),x}:l&&(n[i]=l):i==="style"?n[i]={...l,...d}:i==="className"&&(n[i]=[l,d].filter(Boolean).join(" "))}return{...e,...n}}function XR(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const vE=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,xE=kd,Dj=(e,t)=>n=>{var i;if(t?.variants==null)return xE(e,n?.class,n?.className);const{variants:l,defaultVariants:d}=t,a=Object.keys(l).map(_=>{const C=n?.[_],E=d?.[_];if(C===null)return null;const A=vE(C)||vE(E);return l[_][A]}),g=n&&Object.entries(n).reduce((_,C)=>{let[E,A]=C;return A===void 0||(_[E]=A),_},{}),x=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((_,C)=>{let{class:E,className:A,...D}=C;return Object.entries(D).every(I=>{let[L,B]=I;return Array.isArray(B)?B.includes({...d,...g}[L]):{...d,...g}[L]===B})?[..._,E,A]:_},[]);return xE(e,a,x,n?.class,n?.className)},Y0=Dj("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function Nr({className:e,variant:t,size:n,asChild:i=!1,...l}){const d=i?Mj:"button";return c.jsx(d,{"data-slot":"button",className:Kt(Y0({variant:t,size:n,className:e})),...l})}const KR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),bE=e=>{const t=YR(e);return t.charAt(0).toUpperCase()+t.slice(1)},Pj=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),WR=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var QR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const JR=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:a,...g},x)=>k.createElement("svg",{ref:x,...QR,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:Pj("lucide",l),...!d&&!WR(g)&&{"aria-hidden":"true"},...g},[...a.map(([_,C])=>k.createElement(_,C)),...Array.isArray(d)?d:[d]]));const gn=(e,t)=>{const n=k.forwardRef(({className:i,...l},d)=>k.createElement(JR,{ref:d,iconNode:t,className:Pj(`lucide-${KR(bE(e))}`,`lucide-${e}`,i),...l}));return n.displayName=bE(e),n};const e5=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],_E=gn("arrow-left-right",e5);const t5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ij=gn("arrow-left",t5);const n5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],r5=gn("arrow-right",n5);const i5=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],a5=gn("bath",i5);const o5=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],s5=gn("bed",o5);const l5=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Vw=gn("bot",l5);const c5=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],u5=gn("bus",c5);const d5=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],h5=gn("calculator",d5);const f5=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],p5=gn("calendar",f5);const m5=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],ov=gn("car",m5);const g5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Oj=gn("check",g5);const y5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qw=gn("chevron-down",y5);const v5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],x5=gn("chevron-left",v5);const b5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hw=gn("chevron-right",b5);const _5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Rj=gn("chevron-up",_5);const w5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Iy=gn("circle-alert",w5);const S5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],E5=gn("circle-check-big",S5);const C5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],v_=gn("circle-user",C5);const T5=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],g1=gn("clock",T5);const k5=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],j5=gn("cloud-rain",k5);const A5=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],N5=gn("compass",A5);const M5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],D5=gn("external-link",M5);const P5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I5=gn("eye-off",P5);const O5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],R5=gn("eye",O5);const L5=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],z5=gn("facebook",L5);const B5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Oy=gn("file-text",B5);const F5=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Zm=gn("graduation-cap",F5);const U5=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],V5=gn("hammer",U5);const q5=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],bc=gn("heart",q5);const H5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],y1=gn("history",H5);const $5=[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M14 9h-4",key:"1w2s2s"}],["path",{d:"M18 11h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"1tthqt"}],["path",{d:"M18 21V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16",key:"dw4p4i"}]],G5=gn("hospital",$5);const Z5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Gf=gn("house",Z5);const X5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Lj=gn("image",X5);const K5=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Y5=gn("instagram",K5);const W5=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],$w=gn("key",W5);const Q5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zj=gn("layers",Q5);const J5=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],sv=gn("leaf",J5);const e3=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],t3=gn("list",e3);const n3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xs=gn("loader-circle",n3);const r3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],v1=gn("lock",r3);const i3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],x1=gn("log-out",i3);const a3=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],o3=gn("log-in",a3);const s3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],l3=gn("mail",s3);const c3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bs=gn("map-pin",c3);const u3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Bj=gn("map",u3);const d3=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Fj=gn("maximize",d3);const h3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],f3=gn("menu",h3);const p3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],W0=gn("message-circle",p3);const m3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],g3=gn("message-square",m3);const y3=[["path",{d:"M5 12h14",key:"1ays0h"}]],v3=gn("minus",y3);const x3=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],lv=gn("music",x3);const b3=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],_3=gn("newspaper",b3);const w3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Uj=gn("phone",w3);const S3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],E3=gn("plus",S3);const C3=[["path",{d:"M18 8a2 2 0 0 0 0-4 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0 0 4",key:"10td1f"}],["path",{d:"M10 22 9 8",key:"yjptiv"}],["path",{d:"m14 22 1-14",key:"8jwc8b"}],["path",{d:"M20 8c.5 0 .9.4.8 1l-2.6 12c-.1.5-.7 1-1.2 1H7c-.6 0-1.1-.4-1.2-1L3.2 9c-.1-.6.3-1 .8-1Z",key:"1qo33t"}]],T3=gn("popcorn",C3);const k3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ry=gn("search",k3);const j3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],A3=gn("send",j3);const N3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],M3=gn("shield-check",N3);const D3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cv=gn("shield",D3);const P3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],uv=gn("shopping-bag",P3);const I3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],O3=gn("shopping-cart",I3);const R3=[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]],L3=gn("sofa",R3);const z3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],wE=gn("square-pen",z3);const B3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],F3=gn("star",B3);const U3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],V3=gn("trash-2",U3);const q3=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],H3=gn("tree-pine",q3);const $3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Gw=gn("trending-up",$3);const G3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z3=gn("triangle-alert",G3);const X3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Zw=gn("upload",X3);const K3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Y3=gn("user-plus",K3);const W3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],dv=gn("user",W3);const Q3=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],J3=gn("wind",Q3);const eL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zf=gn("x",eL);const tL=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],nL=gn("youtube",tL),Hf=({className:e,...t})=>{const[n,i]=k.useState(!1),l=n?"text":"password",d=n?I5:R5,a=()=>{i(g=>!g)};return c.jsxs("div",{className:"relative",children:[c.jsx(Dr,{type:l,className:Kt("pe-9",e),...t}),c.jsx("button",{type:"button",className:"absolute top-1/2 right-3 -translate-y-1/2 cursor-pointer",onClick:a,children:c.jsx(d,{className:"stroke-muted-foreground size-4"})})]})};var rL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],iL=rL.reduce((e,t)=>{const n=K0(`Primitive.${t}`),i=k.forwardRef((l,d)=>{const{asChild:a,...g}=l,x=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(x,{...g,ref:d})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),aL="Label",Vj=k.forwardRef((e,t)=>c.jsx(iL.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Vj.displayName=aL;var oL=Vj;function qj({className:e,...t}){return c.jsx(oL,{"data-slot":"label",className:Kt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const _u=OO,Hj=k.createContext({}),Sn=({...e})=>c.jsx(Hj.Provider,{value:{name:e.name},children:c.jsx(zO,{...e})}),Xw=()=>{const e=k.useContext(Hj),t=k.useContext($j),{getFieldState:n}=X0(),i=uj({name:e.name}),l=n(e.name,i);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:d}=t;return{id:d,name:e.name,formItemId:`${d}-form-item`,formDescriptionId:`${d}-form-item-description`,formMessageId:`${d}-form-item-message`,...l}},$j=k.createContext({});function En({className:e,...t}){const n=k.useId();return c.jsx($j.Provider,{value:{id:n},children:c.jsx("div",{"data-slot":"form-item",className:Kt("grid gap-2",e),...t})})}function An({className:e,...t}){const{error:n,formItemId:i}=Xw();return c.jsx(qj,{"data-slot":"form-label","data-error":!!n,className:Kt("data-[error=true]:text-destructive",e),htmlFor:i,...t})}function Cn({...e}){const{error:t,formItemId:n,formDescriptionId:i,formMessageId:l}=Xw();return c.jsx(Mj,{"data-slot":"form-control",id:n,"aria-describedby":t?`${i} ${l}`:`${i}`,"aria-invalid":!!t,...e})}function Vn({className:e,...t}){const{error:n,formMessageId:i}=Xw(),l=n?String(n?.message??""):t.children;return l?c.jsx("p",{"data-slot":"form-message",id:i,className:Kt("text-destructive text-sm text-start ml-1",e),...t,children:l}):null}function Xm({className:e,...t}){return c.jsx(xs,{role:"status","aria-label":"Loading",className:Kt("size-4 animate-spin",e),...t})}function Gj(e,t){return function(){return e.apply(t,arguments)}}const{toString:sL}=Object.prototype,{getPrototypeOf:Kw}=Object,{iterator:Q0,toStringTag:Zj}=Symbol,J0=(e=>t=>{const n=sL.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ec=e=>(e=e.toLowerCase(),t=>J0(t)===e),eb=e=>t=>typeof t===e,{isArray:Km}=Array,Om=eb("undefined");function hv(e){return e!==null&&!Om(e)&&e.constructor!==null&&!Om(e.constructor)&&Hs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Xj=Ec("ArrayBuffer");function lL(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Xj(e.buffer),t}const cL=eb("string"),Hs=eb("function"),Kj=eb("number"),fv=e=>e!==null&&typeof e=="object",uL=e=>e===!0||e===!1,i0=e=>{if(J0(e)!=="object")return!1;const t=Kw(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Zj in e)&&!(Q0 in e)},dL=e=>{if(!fv(e)||hv(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},hL=Ec("Date"),fL=Ec("File"),pL=Ec("Blob"),mL=Ec("FileList"),gL=e=>fv(e)&&Hs(e.pipe),yL=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Hs(e.append)&&((t=J0(e))==="formdata"||t==="object"&&Hs(e.toString)&&e.toString()==="[object FormData]"))},vL=Ec("URLSearchParams"),[xL,bL,_L,wL]=["ReadableStream","Request","Response","Headers"].map(Ec),SL=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pv(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,l;if(typeof e!="object"&&(e=[e]),Km(e))for(i=0,l=e.length;i<l;i++)t.call(null,e[i],i,e);else{if(hv(e))return;const d=n?Object.getOwnPropertyNames(e):Object.keys(e),a=d.length;let g;for(i=0;i<a;i++)g=d[i],t.call(null,e[g],g,e)}}function Yj(e,t){if(hv(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i=n.length,l;for(;i-- >0;)if(l=n[i],t===l.toLowerCase())return l;return null}const Vf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Wj=e=>!Om(e)&&e!==Vf;function b1(){const{caseless:e,skipUndefined:t}=Wj(this)&&this||{},n={},i=(l,d)=>{const a=e&&Yj(n,d)||d;i0(n[a])&&i0(l)?n[a]=b1(n[a],l):i0(l)?n[a]=b1({},l):Km(l)?n[a]=l.slice():(!t||!Om(l))&&(n[a]=l)};for(let l=0,d=arguments.length;l<d;l++)arguments[l]&&pv(arguments[l],i);return n}const EL=(e,t,n,{allOwnKeys:i}={})=>(pv(t,(l,d)=>{n&&Hs(l)?e[d]=Gj(l,n):e[d]=l},{allOwnKeys:i}),e),CL=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),TL=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},kL=(e,t,n,i)=>{let l,d,a;const g={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),d=l.length;d-- >0;)a=l[d],(!i||i(a,e,t))&&!g[a]&&(t[a]=e[a],g[a]=!0);e=n!==!1&&Kw(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},jL=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},AL=e=>{if(!e)return null;if(Km(e))return e;let t=e.length;if(!Kj(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},NL=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Kw(Uint8Array)),ML=(e,t)=>{const i=(e&&e[Q0]).call(e);let l;for(;(l=i.next())&&!l.done;){const d=l.value;t.call(e,d[0],d[1])}},DL=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},PL=Ec("HTMLFormElement"),IL=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,l){return i.toUpperCase()+l}),SE=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),OL=Ec("RegExp"),Qj=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};pv(n,(l,d)=>{let a;(a=t(l,d,e))!==!1&&(i[d]=a||l)}),Object.defineProperties(e,i)},RL=e=>{Qj(e,(t,n)=>{if(Hs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Hs(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},LL=(e,t)=>{const n={},i=l=>{l.forEach(d=>{n[d]=!0})};return Km(e)?i(e):i(String(e).split(t)),n},zL=()=>{},BL=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function FL(e){return!!(e&&Hs(e.append)&&e[Zj]==="FormData"&&e[Q0])}const UL=e=>{const t=new Array(10),n=(i,l)=>{if(fv(i)){if(t.indexOf(i)>=0)return;if(hv(i))return i;if(!("toJSON"in i)){t[l]=i;const d=Km(i)?[]:{};return pv(i,(a,g)=>{const x=n(a,l+1);!Om(x)&&(d[g]=x)}),t[l]=void 0,d}}return i};return n(e,0)},VL=Ec("AsyncFunction"),qL=e=>e&&(fv(e)||Hs(e))&&Hs(e.then)&&Hs(e.catch),Jj=((e,t)=>e?setImmediate:t?((n,i)=>(Vf.addEventListener("message",({source:l,data:d})=>{l===Vf&&d===n&&i.length&&i.shift()()},!1),l=>{i.push(l),Vf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Hs(Vf.postMessage)),HL=typeof queueMicrotask<"u"?queueMicrotask.bind(Vf):typeof process<"u"&&process.nextTick||Jj,$L=e=>e!=null&&Hs(e[Q0]),St={isArray:Km,isArrayBuffer:Xj,isBuffer:hv,isFormData:yL,isArrayBufferView:lL,isString:cL,isNumber:Kj,isBoolean:uL,isObject:fv,isPlainObject:i0,isEmptyObject:dL,isReadableStream:xL,isRequest:bL,isResponse:_L,isHeaders:wL,isUndefined:Om,isDate:hL,isFile:fL,isBlob:pL,isRegExp:OL,isFunction:Hs,isStream:gL,isURLSearchParams:vL,isTypedArray:NL,isFileList:mL,forEach:pv,merge:b1,extend:EL,trim:SL,stripBOM:CL,inherits:TL,toFlatObject:kL,kindOf:J0,kindOfTest:Ec,endsWith:jL,toArray:AL,forEachEntry:ML,matchAll:DL,isHTMLForm:PL,hasOwnProperty:SE,hasOwnProp:SE,reduceDescriptors:Qj,freezeMethods:RL,toObjectSet:LL,toCamelCase:IL,noop:zL,toFiniteNumber:BL,findKey:Yj,global:Vf,isContextDefined:Wj,isSpecCompliantForm:FL,toJSONObject:UL,isAsyncFn:VL,isThenable:qL,setImmediate:Jj,asap:HL,isIterable:$L};function Tr(e,t,n,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}St.inherits(Tr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:St.toJSONObject(this.config),code:this.code,status:this.status}}});const eA=Tr.prototype,tA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{tA[e]={value:e}});Object.defineProperties(Tr,tA);Object.defineProperty(eA,"isAxiosError",{value:!0});Tr.from=(e,t,n,i,l,d)=>{const a=Object.create(eA);St.toFlatObject(e,a,function(C){return C!==Error.prototype},_=>_!=="isAxiosError");const g=e&&e.message?e.message:"Error",x=t==null&&e?e.code:t;return Tr.call(a,g,x,n,i,l),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",d&&Object.assign(a,d),a};const GL=null;function _1(e){return St.isPlainObject(e)||St.isArray(e)}function nA(e){return St.endsWith(e,"[]")?e.slice(0,-2):e}function EE(e,t,n){return e?e.concat(t).map(function(l,d){return l=nA(l),!n&&d?"["+l+"]":l}).join(n?".":""):t}function ZL(e){return St.isArray(e)&&!e.some(_1)}const XL=St.toFlatObject(St,{},null,function(t){return/^is[A-Z]/.test(t)});function tb(e,t,n){if(!St.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=St.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,B){return!St.isUndefined(B[L])});const i=n.metaTokens,l=n.visitor||C,d=n.dots,a=n.indexes,x=(n.Blob||typeof Blob<"u"&&Blob)&&St.isSpecCompliantForm(t);if(!St.isFunction(l))throw new TypeError("visitor must be a function");function _(I){if(I===null)return"";if(St.isDate(I))return I.toISOString();if(St.isBoolean(I))return I.toString();if(!x&&St.isBlob(I))throw new Tr("Blob is not supported. Use a Buffer instead.");return St.isArrayBuffer(I)||St.isTypedArray(I)?x&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function C(I,L,B){let z=I;if(I&&!B&&typeof I=="object"){if(St.endsWith(L,"{}"))L=i?L:L.slice(0,-2),I=JSON.stringify(I);else if(St.isArray(I)&&ZL(I)||(St.isFileList(I)||St.endsWith(L,"[]"))&&(z=St.toArray(I)))return L=nA(L),z.forEach(function(H,W){!(St.isUndefined(H)||H===null)&&t.append(a===!0?EE([L],W,d):a===null?L:L+"[]",_(H))}),!1}return _1(I)?!0:(t.append(EE(B,L,d),_(I)),!1)}const E=[],A=Object.assign(XL,{defaultVisitor:C,convertValue:_,isVisitable:_1});function D(I,L){if(!St.isUndefined(I)){if(E.indexOf(I)!==-1)throw Error("Circular reference detected in "+L.join("."));E.push(I),St.forEach(I,function(z,q){(!(St.isUndefined(z)||z===null)&&l.call(t,z,St.isString(q)?q.trim():q,L,A))===!0&&D(z,L?L.concat(q):[q])}),E.pop()}}if(!St.isObject(e))throw new TypeError("data must be an object");return D(e),t}function CE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Yw(e,t){this._pairs=[],e&&tb(e,this,t)}const rA=Yw.prototype;rA.append=function(t,n){this._pairs.push([t,n])};rA.toString=function(t){const n=t?function(i){return t.call(this,i,CE)}:CE;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function KL(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function iA(e,t,n){if(!t)return e;const i=n&&n.encode||KL;St.isFunction(n)&&(n={serialize:n});const l=n&&n.serialize;let d;if(l?d=l(t,n):d=St.isURLSearchParams(t)?t.toString():new Yw(t,n).toString(i),d){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class TE{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){St.forEach(this.handlers,function(i){i!==null&&t(i)})}}const aA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},YL=typeof URLSearchParams<"u"?URLSearchParams:Yw,WL=typeof FormData<"u"?FormData:null,QL=typeof Blob<"u"?Blob:null,JL={isBrowser:!0,classes:{URLSearchParams:YL,FormData:WL,Blob:QL},protocols:["http","https","file","blob","url","data"]},Ww=typeof window<"u"&&typeof document<"u",w1=typeof navigator=="object"&&navigator||void 0,ez=Ww&&(!w1||["ReactNative","NativeScript","NS"].indexOf(w1.product)<0),tz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",nz=Ww&&window.location.href||"http://localhost",rz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ww,hasStandardBrowserEnv:ez,hasStandardBrowserWebWorkerEnv:tz,navigator:w1,origin:nz},Symbol.toStringTag,{value:"Module"})),ts={...rz,...JL};function iz(e,t){return tb(e,new ts.classes.URLSearchParams,{visitor:function(n,i,l,d){return ts.isNode&&St.isBuffer(n)?(this.append(i,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...t})}function az(e){return St.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function oz(e){const t={},n=Object.keys(e);let i;const l=n.length;let d;for(i=0;i<l;i++)d=n[i],t[d]=e[d];return t}function oA(e){function t(n,i,l,d){let a=n[d++];if(a==="__proto__")return!0;const g=Number.isFinite(+a),x=d>=n.length;return a=!a&&St.isArray(l)?l.length:a,x?(St.hasOwnProp(l,a)?l[a]=[l[a],i]:l[a]=i,!g):((!l[a]||!St.isObject(l[a]))&&(l[a]=[]),t(n,i,l[a],d)&&St.isArray(l[a])&&(l[a]=oz(l[a])),!g)}if(St.isFormData(e)&&St.isFunction(e.entries)){const n={};return St.forEachEntry(e,(i,l)=>{t(az(i),l,n,0)}),n}return null}function sz(e,t,n){if(St.isString(e))try{return(t||JSON.parse)(e),St.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const mv={transitional:aA,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",l=i.indexOf("application/json")>-1,d=St.isObject(t);if(d&&St.isHTMLForm(t)&&(t=new FormData(t)),St.isFormData(t))return l?JSON.stringify(oA(t)):t;if(St.isArrayBuffer(t)||St.isBuffer(t)||St.isStream(t)||St.isFile(t)||St.isBlob(t)||St.isReadableStream(t))return t;if(St.isArrayBufferView(t))return t.buffer;if(St.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return iz(t,this.formSerializer).toString();if((g=St.isFileList(t))||i.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return tb(g?{"files[]":t}:t,x&&new x,this.formSerializer)}}return d||l?(n.setContentType("application/json",!1),sz(t)):t}],transformResponse:[function(t){const n=this.transitional||mv.transitional,i=n&&n.forcedJSONParsing,l=this.responseType==="json";if(St.isResponse(t)||St.isReadableStream(t))return t;if(t&&St.isString(t)&&(i&&!this.responseType||l)){const a=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(g){if(a)throw g.name==="SyntaxError"?Tr.from(g,Tr.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ts.classes.FormData,Blob:ts.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};St.forEach(["delete","get","head","post","put","patch"],e=>{mv.headers[e]={}});const lz=St.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cz=e=>{const t={};let n,i,l;return e&&e.split(`
`).forEach(function(a){l=a.indexOf(":"),n=a.substring(0,l).trim().toLowerCase(),i=a.substring(l+1).trim(),!(!n||t[n]&&lz[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},kE=Symbol("internals");function uy(e){return e&&String(e).trim().toLowerCase()}function a0(e){return e===!1||e==null?e:St.isArray(e)?e.map(a0):String(e)}function uz(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const dz=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function x_(e,t,n,i,l){if(St.isFunction(i))return i.call(this,t,n);if(l&&(t=n),!!St.isString(t)){if(St.isString(i))return t.indexOf(i)!==-1;if(St.isRegExp(i))return i.test(t)}}function hz(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function fz(e,t){const n=St.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(l,d,a){return this[i].call(this,t,l,d,a)},configurable:!0})})}let $s=class{constructor(t){t&&this.set(t)}set(t,n,i){const l=this;function d(g,x,_){const C=uy(x);if(!C)throw new Error("header name must be a non-empty string");const E=St.findKey(l,C);(!E||l[E]===void 0||_===!0||_===void 0&&l[E]!==!1)&&(l[E||x]=a0(g))}const a=(g,x)=>St.forEach(g,(_,C)=>d(_,C,x));if(St.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(St.isString(t)&&(t=t.trim())&&!dz(t))a(cz(t),n);else if(St.isObject(t)&&St.isIterable(t)){let g={},x,_;for(const C of t){if(!St.isArray(C))throw TypeError("Object iterator must return a key-value pair");g[_=C[0]]=(x=g[_])?St.isArray(x)?[...x,C[1]]:[x,C[1]]:C[1]}a(g,n)}else t!=null&&d(n,t,i);return this}get(t,n){if(t=uy(t),t){const i=St.findKey(this,t);if(i){const l=this[i];if(!n)return l;if(n===!0)return uz(l);if(St.isFunction(n))return n.call(this,l,i);if(St.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=uy(t),t){const i=St.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||x_(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let l=!1;function d(a){if(a=uy(a),a){const g=St.findKey(i,a);g&&(!n||x_(i,i[g],g,n))&&(delete i[g],l=!0)}}return St.isArray(t)?t.forEach(d):d(t),l}clear(t){const n=Object.keys(this);let i=n.length,l=!1;for(;i--;){const d=n[i];(!t||x_(this,this[d],d,t,!0))&&(delete this[d],l=!0)}return l}normalize(t){const n=this,i={};return St.forEach(this,(l,d)=>{const a=St.findKey(i,d);if(a){n[a]=a0(l),delete n[d];return}const g=t?hz(d):String(d).trim();g!==d&&delete n[d],n[g]=a0(l),i[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return St.forEach(this,(i,l)=>{i!=null&&i!==!1&&(n[l]=t&&St.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(l=>i.set(l)),i}static accessor(t){const i=(this[kE]=this[kE]={accessors:{}}).accessors,l=this.prototype;function d(a){const g=uy(a);i[g]||(fz(l,a),i[g]=!0)}return St.isArray(t)?t.forEach(d):d(t),this}};$s.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);St.reduceDescriptors($s.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});St.freezeMethods($s);function b_(e,t){const n=this||mv,i=t||n,l=$s.from(i.headers);let d=i.data;return St.forEach(e,function(g){d=g.call(n,d,l.normalize(),t?t.status:void 0)}),l.normalize(),d}function sA(e){return!!(e&&e.__CANCEL__)}function Ym(e,t,n){Tr.call(this,e??"canceled",Tr.ERR_CANCELED,t,n),this.name="CanceledError"}St.inherits(Ym,Tr,{__CANCEL__:!0});function lA(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Tr("Request failed with status code "+n.status,[Tr.ERR_BAD_REQUEST,Tr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function pz(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function mz(e,t){e=e||10;const n=new Array(e),i=new Array(e);let l=0,d=0,a;return t=t!==void 0?t:1e3,function(x){const _=Date.now(),C=i[d];a||(a=_),n[l]=x,i[l]=_;let E=d,A=0;for(;E!==l;)A+=n[E++],E=E%e;if(l=(l+1)%e,l===d&&(d=(d+1)%e),_-a<t)return;const D=C&&_-C;return D?Math.round(A*1e3/D):void 0}}function gz(e,t){let n=0,i=1e3/t,l,d;const a=(_,C=Date.now())=>{n=C,l=null,d&&(clearTimeout(d),d=null),e(..._)};return[(..._)=>{const C=Date.now(),E=C-n;E>=i?a(_,C):(l=_,d||(d=setTimeout(()=>{d=null,a(l)},i-E)))},()=>l&&a(l)]}const _0=(e,t,n=3)=>{let i=0;const l=mz(50,250);return gz(d=>{const a=d.loaded,g=d.lengthComputable?d.total:void 0,x=a-i,_=l(x),C=a<=g;i=a;const E={loaded:a,total:g,progress:g?a/g:void 0,bytes:x,rate:_||void 0,estimated:_&&g&&C?(g-a)/_:void 0,event:d,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(E)},n)},jE=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},AE=e=>(...t)=>St.asap(()=>e(...t)),yz=ts.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ts.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ts.origin),ts.navigator&&/(msie|trident)/i.test(ts.navigator.userAgent)):()=>!0,vz=ts.hasStandardBrowserEnv?{write(e,t,n,i,l,d,a){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];St.isNumber(n)&&g.push(`expires=${new Date(n).toUTCString()}`),St.isString(i)&&g.push(`path=${i}`),St.isString(l)&&g.push(`domain=${l}`),d===!0&&g.push("secure"),St.isString(a)&&g.push(`SameSite=${a}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function xz(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function bz(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function cA(e,t,n){let i=!xz(t);return e&&(i||n==!1)?bz(e,t):t}const NE=e=>e instanceof $s?{...e}:e;function Xf(e,t){t=t||{};const n={};function i(_,C,E,A){return St.isPlainObject(_)&&St.isPlainObject(C)?St.merge.call({caseless:A},_,C):St.isPlainObject(C)?St.merge({},C):St.isArray(C)?C.slice():C}function l(_,C,E,A){if(St.isUndefined(C)){if(!St.isUndefined(_))return i(void 0,_,E,A)}else return i(_,C,E,A)}function d(_,C){if(!St.isUndefined(C))return i(void 0,C)}function a(_,C){if(St.isUndefined(C)){if(!St.isUndefined(_))return i(void 0,_)}else return i(void 0,C)}function g(_,C,E){if(E in t)return i(_,C);if(E in e)return i(void 0,_)}const x={url:d,method:d,data:d,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:g,headers:(_,C,E)=>l(NE(_),NE(C),E,!0)};return St.forEach(Object.keys({...e,...t}),function(C){const E=x[C]||l,A=E(e[C],t[C],C);St.isUndefined(A)&&E!==g||(n[C]=A)}),n}const uA=e=>{const t=Xf({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:d,headers:a,auth:g}=t;if(t.headers=a=$s.from(a),t.url=iA(cA(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&a.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),St.isFormData(n)){if(ts.hasStandardBrowserEnv||ts.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(St.isFunction(n.getHeaders)){const x=n.getHeaders(),_=["content-type","content-length"];Object.entries(x).forEach(([C,E])=>{_.includes(C.toLowerCase())&&a.set(C,E)})}}if(ts.hasStandardBrowserEnv&&(i&&St.isFunction(i)&&(i=i(t)),i||i!==!1&&yz(t.url))){const x=l&&d&&vz.read(d);x&&a.set(l,x)}return t},_z=typeof XMLHttpRequest<"u",wz=_z&&function(e){return new Promise(function(n,i){const l=uA(e);let d=l.data;const a=$s.from(l.headers).normalize();let{responseType:g,onUploadProgress:x,onDownloadProgress:_}=l,C,E,A,D,I;function L(){D&&D(),I&&I(),l.cancelToken&&l.cancelToken.unsubscribe(C),l.signal&&l.signal.removeEventListener("abort",C)}let B=new XMLHttpRequest;B.open(l.method.toUpperCase(),l.url,!0),B.timeout=l.timeout;function z(){if(!B)return;const H=$s.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),ne={data:!g||g==="text"||g==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:H,config:e,request:B};lA(function(ee){n(ee),L()},function(ee){i(ee),L()},ne),B=null}"onloadend"in B?B.onloadend=z:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(z)},B.onabort=function(){B&&(i(new Tr("Request aborted",Tr.ECONNABORTED,e,B)),B=null)},B.onerror=function(W){const ne=W&&W.message?W.message:"Network Error",re=new Tr(ne,Tr.ERR_NETWORK,e,B);re.event=W||null,i(re),B=null},B.ontimeout=function(){let W=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const ne=l.transitional||aA;l.timeoutErrorMessage&&(W=l.timeoutErrorMessage),i(new Tr(W,ne.clarifyTimeoutError?Tr.ETIMEDOUT:Tr.ECONNABORTED,e,B)),B=null},d===void 0&&a.setContentType(null),"setRequestHeader"in B&&St.forEach(a.toJSON(),function(W,ne){B.setRequestHeader(ne,W)}),St.isUndefined(l.withCredentials)||(B.withCredentials=!!l.withCredentials),g&&g!=="json"&&(B.responseType=l.responseType),_&&([A,I]=_0(_,!0),B.addEventListener("progress",A)),x&&B.upload&&([E,D]=_0(x),B.upload.addEventListener("progress",E),B.upload.addEventListener("loadend",D)),(l.cancelToken||l.signal)&&(C=H=>{B&&(i(!H||H.type?new Ym(null,e,B):H),B.abort(),B=null)},l.cancelToken&&l.cancelToken.subscribe(C),l.signal&&(l.signal.aborted?C():l.signal.addEventListener("abort",C)));const q=pz(l.url);if(q&&ts.protocols.indexOf(q)===-1){i(new Tr("Unsupported protocol "+q+":",Tr.ERR_BAD_REQUEST,e));return}B.send(d||null)})},Sz=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,l;const d=function(_){if(!l){l=!0,g();const C=_ instanceof Error?_:this.reason;i.abort(C instanceof Tr?C:new Ym(C instanceof Error?C.message:C))}};let a=t&&setTimeout(()=>{a=null,d(new Tr(`timeout ${t} of ms exceeded`,Tr.ETIMEDOUT))},t);const g=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(d):_.removeEventListener("abort",d)}),e=null)};e.forEach(_=>_.addEventListener("abort",d));const{signal:x}=i;return x.unsubscribe=()=>St.asap(g),x}},Ez=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,l;for(;i<n;)l=i+t,yield e.slice(i,l),i=l},Cz=async function*(e,t){for await(const n of Tz(e))yield*Ez(n,t)},Tz=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},ME=(e,t,n,i)=>{const l=Cz(e,t);let d=0,a,g=x=>{a||(a=!0,i&&i(x))};return new ReadableStream({async pull(x){try{const{done:_,value:C}=await l.next();if(_){g(),x.close();return}let E=C.byteLength;if(n){let A=d+=E;n(A)}x.enqueue(new Uint8Array(C))}catch(_){throw g(_),_}},cancel(x){return g(x),l.return()}},{highWaterMark:2})},DE=64*1024,{isFunction:Ix}=St,kz=(({Request:e,Response:t})=>({Request:e,Response:t}))(St.global),{ReadableStream:PE,TextEncoder:IE}=St.global,OE=(e,...t)=>{try{return!!e(...t)}catch{return!1}},jz=e=>{e=St.merge.call({skipUndefined:!0},kz,e);const{fetch:t,Request:n,Response:i}=e,l=t?Ix(t):typeof fetch=="function",d=Ix(n),a=Ix(i);if(!l)return!1;const g=l&&Ix(PE),x=l&&(typeof IE=="function"?(I=>L=>I.encode(L))(new IE):async I=>new Uint8Array(await new n(I).arrayBuffer())),_=d&&g&&OE(()=>{let I=!1;const L=new n(ts.origin,{body:new PE,method:"POST",get duplex(){return I=!0,"half"}}).headers.has("Content-Type");return I&&!L}),C=a&&g&&OE(()=>St.isReadableStream(new i("").body)),E={stream:C&&(I=>I.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(I=>{!E[I]&&(E[I]=(L,B)=>{let z=L&&L[I];if(z)return z.call(L);throw new Tr(`Response type '${I}' is not supported`,Tr.ERR_NOT_SUPPORT,B)})});const A=async I=>{if(I==null)return 0;if(St.isBlob(I))return I.size;if(St.isSpecCompliantForm(I))return(await new n(ts.origin,{method:"POST",body:I}).arrayBuffer()).byteLength;if(St.isArrayBufferView(I)||St.isArrayBuffer(I))return I.byteLength;if(St.isURLSearchParams(I)&&(I=I+""),St.isString(I))return(await x(I)).byteLength},D=async(I,L)=>{const B=St.toFiniteNumber(I.getContentLength());return B??A(L)};return async I=>{let{url:L,method:B,data:z,signal:q,cancelToken:H,timeout:W,onDownloadProgress:ne,onUploadProgress:re,responseType:ee,headers:oe,withCredentials:he="same-origin",fetchOptions:we}=uA(I),ye=t||fetch;ee=ee?(ee+"").toLowerCase():"text";let Pe=Sz([q,H&&H.toAbortSignal()],W),Ke=null;const ze=Pe&&Pe.unsubscribe&&(()=>{Pe.unsubscribe()});let Je;try{if(re&&_&&B!=="get"&&B!=="head"&&(Je=await D(oe,z))!==0){let Ce=new n(L,{method:"POST",body:z,duplex:"half"}),pe;if(St.isFormData(z)&&(pe=Ce.headers.get("content-type"))&&oe.setContentType(pe),Ce.body){const[Q,Ee]=jE(Je,_0(AE(re)));z=ME(Ce.body,DE,Q,Ee)}}St.isString(he)||(he=he?"include":"omit");const Ae=d&&"credentials"in n.prototype,De={...we,signal:Pe,method:B.toUpperCase(),headers:oe.normalize().toJSON(),body:z,duplex:"half",credentials:Ae?he:void 0};Ke=d&&new n(L,De);let ke=await(d?ye(Ke,we):ye(L,De));const st=C&&(ee==="stream"||ee==="response");if(C&&(ne||st&&ze)){const Ce={};["status","statusText","headers"].forEach(Ge=>{Ce[Ge]=ke[Ge]});const pe=St.toFiniteNumber(ke.headers.get("content-length")),[Q,Ee]=ne&&jE(pe,_0(AE(ne),!0))||[];ke=new i(ME(ke.body,DE,Q,()=>{Ee&&Ee(),ze&&ze()}),Ce)}ee=ee||"text";let me=await E[St.findKey(E,ee)||"text"](ke,I);return!st&&ze&&ze(),await new Promise((Ce,pe)=>{lA(Ce,pe,{data:me,headers:$s.from(ke.headers),status:ke.status,statusText:ke.statusText,config:I,request:Ke})})}catch(Ae){throw ze&&ze(),Ae&&Ae.name==="TypeError"&&/Load failed|fetch/i.test(Ae.message)?Object.assign(new Tr("Network Error",Tr.ERR_NETWORK,I,Ke),{cause:Ae.cause||Ae}):Tr.from(Ae,Ae&&Ae.code,I,Ke)}}},Az=new Map,dA=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:l}=t,d=[i,l,n];let a=d.length,g=a,x,_,C=Az;for(;g--;)x=d[g],_=C.get(x),_===void 0&&C.set(x,_=g?new Map:jz(t)),C=_;return _};dA();const Qw={http:GL,xhr:wz,fetch:{get:dA}};St.forEach(Qw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const RE=e=>`- ${e}`,Nz=e=>St.isFunction(e)||e===null||e===!1;function Mz(e,t){e=St.isArray(e)?e:[e];const{length:n}=e;let i,l;const d={};for(let a=0;a<n;a++){i=e[a];let g;if(l=i,!Nz(i)&&(l=Qw[(g=String(i)).toLowerCase()],l===void 0))throw new Tr(`Unknown adapter '${g}'`);if(l&&(St.isFunction(l)||(l=l.get(t))))break;d[g||"#"+a]=l}if(!l){const a=Object.entries(d).map(([x,_])=>`adapter ${x} `+(_===!1?"is not supported by the environment":"is not available in the build"));let g=n?a.length>1?`since :
`+a.map(RE).join(`
`):" "+RE(a[0]):"as no adapter specified";throw new Tr("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return l}const hA={getAdapter:Mz,adapters:Qw};function __(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ym(null,e)}function LE(e){return __(e),e.headers=$s.from(e.headers),e.data=b_.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hA.getAdapter(e.adapter||mv.adapter,e)(e).then(function(i){return __(e),i.data=b_.call(e,e.transformResponse,i),i.headers=$s.from(i.headers),i},function(i){return sA(i)||(__(e),i&&i.response&&(i.response.data=b_.call(e,e.transformResponse,i.response),i.response.headers=$s.from(i.response.headers))),Promise.reject(i)})}const fA="1.13.2",nb={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nb[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const zE={};nb.transitional=function(t,n,i){function l(d,a){return"[Axios v"+fA+"] Transitional option '"+d+"'"+a+(i?". "+i:"")}return(d,a,g)=>{if(t===!1)throw new Tr(l(a," has been removed"+(n?" in "+n:"")),Tr.ERR_DEPRECATED);return n&&!zE[a]&&(zE[a]=!0,console.warn(l(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,a,g):!0}};nb.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Dz(e,t,n){if(typeof e!="object")throw new Tr("options must be an object",Tr.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let l=i.length;for(;l-- >0;){const d=i[l],a=t[d];if(a){const g=e[d],x=g===void 0||a(g,d,e);if(x!==!0)throw new Tr("option "+d+" must be "+x,Tr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Tr("Unknown option "+d,Tr.ERR_BAD_OPTION)}}const o0={assertOptions:Dz,validators:nb},uu=o0.validators;let $f=class{constructor(t){this.defaults=t||{},this.interceptors={request:new TE,response:new TE}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?d&&!String(i.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+d):i.stack=d}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Xf(this.defaults,n);const{transitional:i,paramsSerializer:l,headers:d}=n;i!==void 0&&o0.assertOptions(i,{silentJSONParsing:uu.transitional(uu.boolean),forcedJSONParsing:uu.transitional(uu.boolean),clarifyTimeoutError:uu.transitional(uu.boolean)},!1),l!=null&&(St.isFunction(l)?n.paramsSerializer={serialize:l}:o0.assertOptions(l,{encode:uu.function,serialize:uu.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),o0.assertOptions(n,{baseUrl:uu.spelling("baseURL"),withXsrfToken:uu.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=d&&St.merge(d.common,d[n.method]);d&&St.forEach(["delete","get","head","post","put","patch","common"],I=>{delete d[I]}),n.headers=$s.concat(a,d);const g=[];let x=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(n)===!1||(x=x&&L.synchronous,g.unshift(L.fulfilled,L.rejected))});const _=[];this.interceptors.response.forEach(function(L){_.push(L.fulfilled,L.rejected)});let C,E=0,A;if(!x){const I=[LE.bind(this),void 0];for(I.unshift(...g),I.push(..._),A=I.length,C=Promise.resolve(n);E<A;)C=C.then(I[E++],I[E++]);return C}A=g.length;let D=n;for(;E<A;){const I=g[E++],L=g[E++];try{D=I(D)}catch(B){L.call(this,B);break}}try{C=LE.call(this,D)}catch(I){return Promise.reject(I)}for(E=0,A=_.length;E<A;)C=C.then(_[E++],_[E++]);return C}getUri(t){t=Xf(this.defaults,t);const n=cA(t.baseURL,t.url,t.allowAbsoluteUrls);return iA(n,t.params,t.paramsSerializer)}};St.forEach(["delete","get","head","options"],function(t){$f.prototype[t]=function(n,i){return this.request(Xf(i||{},{method:t,url:n,data:(i||{}).data}))}});St.forEach(["post","put","patch"],function(t){function n(i){return function(d,a,g){return this.request(Xf(g||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:a}))}}$f.prototype[t]=n(),$f.prototype[t+"Form"]=n(!0)});let Pz=class pA{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const i=this;this.promise.then(l=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](l);i._listeners=null}),this.promise.then=l=>{let d;const a=new Promise(g=>{i.subscribe(g),d=g}).then(l);return a.cancel=function(){i.unsubscribe(d)},a},t(function(d,a,g){i.reason||(i.reason=new Ym(d,a,g),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new pA(function(l){t=l}),cancel:t}}};function Iz(e){return function(n){return e.apply(null,n)}}function Oz(e){return St.isObject(e)&&e.isAxiosError===!0}const S1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(S1).forEach(([e,t])=>{S1[t]=e});function mA(e){const t=new $f(e),n=Gj($f.prototype.request,t);return St.extend(n,$f.prototype,t,{allOwnKeys:!0}),St.extend(n,t,null,{allOwnKeys:!0}),n.create=function(l){return mA(Xf(e,l))},n}const Di=mA(mv);Di.Axios=$f;Di.CanceledError=Ym;Di.CancelToken=Pz;Di.isCancel=sA;Di.VERSION=fA;Di.toFormData=tb;Di.AxiosError=Tr;Di.Cancel=Di.CanceledError;Di.all=function(t){return Promise.all(t)};Di.spread=Iz;Di.isAxiosError=Oz;Di.mergeConfig=Xf;Di.AxiosHeaders=$s;Di.formToJSON=e=>oA(St.isHTMLForm(e)?new FormData(e):e);Di.getAdapter=hA.getAdapter;Di.HttpStatusCode=S1;Di.default=Di;const{Axios:ite,AxiosError:ate,CanceledError:ote,isCancel:ste,CancelToken:lte,VERSION:cte,all:ute,Cancel:dte,isAxiosError:hte,spread:fte,toFormData:pte,AxiosHeaders:mte,HttpStatusCode:gte,formToJSON:yte,getAdapter:vte,mergeConfig:xte}=Di,Rz=async(e,t)=>(await Di.post("https://kltn-api-staging.sonata.io.vn/api/v1/user/login",{email:e,password:t})).data,gA=async(e,t,n,i)=>(await Di.post("https://kltn-api-staging.sonata.io.vn/api/v1/user/register",{email:e,password:t,fullName:n,phoneNumber:i})).data,Lz=async(e,t)=>(await Di.post("https://kltn-api-staging.sonata.io.vn/api/v1/user/register/verify-email",{email:e,otp:t})).data,yA=async e=>(await Di.post(`https://kltn-api-staging.sonata.io.vn/api/v1/user/forgot-password/${e}`)).data,zz=async e=>(await Di.post("https://kltn-api-staging.sonata.io.vn/api/v1/user/forgot-password/verify",e)).data,BE=e=>{let t;const n=new Set,i=(_,C)=>{const E=typeof _=="function"?_(t):_;if(!Object.is(E,t)){const A=t;t=C??(typeof E!="object"||E===null)?E:Object.assign({},t,E),n.forEach(D=>D(t,A))}},l=()=>t,g={setState:i,getState:l,getInitialState:()=>x,subscribe:_=>(n.add(_),()=>n.delete(_))},x=t=e(i,l,g);return g},Bz=(e=>e?BE(e):BE),Fz=e=>e;function Uz(e,t=Fz){const n=Bt.useSyncExternalStore(e.subscribe,Bt.useCallback(()=>t(e.getState()),[e,t]),Bt.useCallback(()=>t(e.getInitialState()),[e,t]));return Bt.useDebugValue(n),n}const FE=e=>{const t=Bz(e),n=i=>Uz(t,i);return Object.assign(n,t),n},rb=(e=>e?FE(e):FE);function Vz(e,t){let n;try{n=e()}catch{return}return{getItem:l=>{var d;const a=x=>x===null?null:JSON.parse(x,void 0),g=(d=n.getItem(l))!=null?d:null;return g instanceof Promise?g.then(a):a(g)},setItem:(l,d)=>n.setItem(l,JSON.stringify(d,void 0)),removeItem:l=>n.removeItem(l)}}const E1=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(i){return E1(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return E1(i)(n)}}}},qz=(e,t)=>(n,i,l)=>{let d={storage:Vz(()=>localStorage),partialize:L=>L,version:0,merge:(L,B)=>({...B,...L}),...t},a=!1;const g=new Set,x=new Set;let _=d.storage;if(!_)return e((...L)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),n(...L)},i,l);const C=()=>{const L=d.partialize({...i()});return _.setItem(d.name,{state:L,version:d.version})},E=l.setState;l.setState=(L,B)=>(E(L,B),C());const A=e((...L)=>(n(...L),C()),i,l);l.getInitialState=()=>A;let D;const I=()=>{var L,B;if(!_)return;a=!1,g.forEach(q=>{var H;return q((H=i())!=null?H:A)});const z=((B=d.onRehydrateStorage)==null?void 0:B.call(d,(L=i())!=null?L:A))||void 0;return E1(_.getItem.bind(_))(d.name).then(q=>{if(q)if(typeof q.version=="number"&&q.version!==d.version){if(d.migrate){const H=d.migrate(q.state,q.version);return H instanceof Promise?H.then(W=>[!0,W]):[!0,H]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,q.state];return[!1,void 0]}).then(q=>{var H;const[W,ne]=q;if(D=d.merge(ne,(H=i())!=null?H:A),n(D,!0),W)return C()}).then(()=>{z?.(D,void 0),D=i(),a=!0,x.forEach(q=>q(D))}).catch(q=>{z?.(void 0,q)})};return l.persist={setOptions:L=>{d={...d,...L},L.storage&&(_=L.storage)},clearStorage:()=>{_?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>I(),hasHydrated:()=>a,onHydrate:L=>(g.add(L),()=>{g.delete(L)}),onFinishHydration:L=>(x.add(L),()=>{x.delete(L)})},d.skipHydration||I(),D||A},Jw=qz,Li=rb()(Jw(e=>({isLoggedIn:!1,token:null,avatarUrl:null,userId:null,becomeSellerApproveStatus:null,login:t=>e({isLoggedIn:!0,token:t}),logout:()=>e({isLoggedIn:!1,token:null}),setUserInfo:(t,n,i)=>e({userId:t,avatarUrl:n,becomeSellerApproveStatus:i}),clearUserInfo:()=>e({userId:null,avatarUrl:null,becomeSellerApproveStatus:null})}),{name:"user-store"}));function Hz(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Hz(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var gv=e=>typeof e=="number"&&!isNaN(e),Kf=e=>typeof e=="string",Nd=e=>typeof e=="function",$z=e=>Kf(e)||gv(e),C1=e=>Kf(e)||Nd(e)?e:null,Gz=(e,t)=>e===!1||gv(e)&&e>0?e:t,T1=e=>k.isValidElement(e)||Kf(e)||Nd(e)||gv(e);function Zz(e,t,n=300){let{scrollHeight:i,style:l}=e;requestAnimationFrame(()=>{l.minHeight="initial",l.height=i+"px",l.transition=`all ${n}ms`,requestAnimationFrame(()=>{l.height="0",l.padding="0",l.margin="0",setTimeout(t,n)})})}function Xz({enter:e,exit:t,appendPosition:n=!1,collapse:i=!0,collapseDuration:l=300}){return function({children:d,position:a,preventExitTransition:g,done:x,nodeRef:_,isIn:C,playToast:E}){let A=n?`${e}--${a}`:e,D=n?`${t}--${a}`:t,I=k.useRef(0);return k.useLayoutEffect(()=>{let L=_.current,B=A.split(" "),z=q=>{q.target===_.current&&(E(),L.removeEventListener("animationend",z),L.removeEventListener("animationcancel",z),I.current===0&&q.type!=="animationcancel"&&L.classList.remove(...B))};L.classList.add(...B),L.addEventListener("animationend",z),L.addEventListener("animationcancel",z)},[]),k.useEffect(()=>{let L=_.current,B=()=>{L.removeEventListener("animationend",B),i?Zz(L,x,l):x()};C||(g?B():(I.current=1,L.className+=` ${D}`,L.addEventListener("animationend",B)))},[C]),Bt.createElement(Bt.Fragment,null,d)}}function UE(e,t){return{content:vA(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function vA(e,t,n=!1){return k.isValidElement(e)&&!Kf(e.type)?k.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):Nd(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function Kz({closeToast:e,theme:t,ariaLabel:n="close"}){return Bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),e(!0)},"aria-label":n},Bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Yz({delay:e,isRunning:t,closeToast:n,type:i="default",hide:l,className:d,controlledProgress:a,progress:g,rtl:x,isIn:_,theme:C}){let E=l||a&&g===0,A={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};a&&(A.transform=`scaleX(${g})`);let D=kd("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${C}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":x}),I=Nd(d)?d({rtl:x,type:i,defaultClassName:D}):kd(D,d),L={[a&&g>=1?"onTransitionEnd":"onAnimationEnd"]:a&&g<1?null:()=>{_&&n()}};return Bt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},Bt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${C} Toastify__progress-bar--${i}`}),Bt.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:I,style:A,...L}))}var Wz=1,xA=()=>`${Wz++}`;function Qz(e,t,n){let i=1,l=0,d=[],a=[],g=t,x=new Map,_=new Set,C=q=>(_.add(q),()=>_.delete(q)),E=()=>{a=Array.from(x.values()),_.forEach(q=>q())},A=({containerId:q,toastId:H,updateId:W})=>{let ne=q?q!==e:e!==1,re=x.has(H)&&W==null;return ne||re},D=(q,H)=>{x.forEach(W=>{var ne;(H==null||H===W.props.toastId)&&((ne=W.toggle)==null||ne.call(W,q))})},I=q=>{var H,W;(W=(H=q.props)==null?void 0:H.onClose)==null||W.call(H,q.removalReason),q.isActive=!1},L=q=>{if(q==null)x.forEach(I);else{let H=x.get(q);H&&I(H)}E()},B=()=>{l-=d.length,d=[]},z=q=>{var H,W;let{toastId:ne,updateId:re}=q.props,ee=re==null;q.staleId&&x.delete(q.staleId),q.isActive=!0,x.set(ne,q),E(),n(UE(q,ee?"added":"updated")),ee&&((W=(H=q.props).onOpen)==null||W.call(H))};return{id:e,props:g,observe:C,toggle:D,removeToast:L,toasts:x,clearQueue:B,buildToast:(q,H)=>{if(A(H))return;let{toastId:W,updateId:ne,data:re,staleId:ee,delay:oe}=H,he=ne==null;he&&l++;let we={...g,style:g.toastStyle,key:i++,...Object.fromEntries(Object.entries(H).filter(([Pe,Ke])=>Ke!=null)),toastId:W,updateId:ne,data:re,isIn:!1,className:C1(H.className||g.toastClassName),progressClassName:C1(H.progressClassName||g.progressClassName),autoClose:H.isLoading?!1:Gz(H.autoClose,g.autoClose),closeToast(Pe){x.get(W).removalReason=Pe,L(W)},deleteToast(){let Pe=x.get(W);if(Pe!=null){if(n(UE(Pe,"removed")),x.delete(W),l--,l<0&&(l=0),d.length>0){z(d.shift());return}E()}}};we.closeButton=g.closeButton,H.closeButton===!1||T1(H.closeButton)?we.closeButton=H.closeButton:H.closeButton===!0&&(we.closeButton=T1(g.closeButton)?g.closeButton:!0);let ye={content:q,props:we,staleId:ee};g.limit&&g.limit>0&&l>g.limit&&he?d.push(ye):gv(oe)?setTimeout(()=>{z(ye)},oe):z(ye)},setProps(q){g=q},setToggle:(q,H)=>{let W=x.get(q);W&&(W.toggle=H)},isToastActive:q=>{var H;return(H=x.get(q))==null?void 0:H.isActive},getSnapshot:()=>a}}var vs=new Map,Ly=[],k1=new Set,Jz=e=>k1.forEach(t=>t(e)),bA=()=>vs.size>0;function e6(){Ly.forEach(e=>wA(e.content,e.options)),Ly=[]}var t6=(e,{containerId:t})=>{var n;return(n=vs.get(t||1))==null?void 0:n.toasts.get(e)};function _A(e,t){var n;if(t)return!!((n=vs.get(t))!=null&&n.isToastActive(e));let i=!1;return vs.forEach(l=>{l.isToastActive(e)&&(i=!0)}),i}function n6(e){if(!bA()){Ly=Ly.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||$z(e))vs.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=vs.get(e.containerId);t?t.removeToast(e.id):vs.forEach(n=>{n.removeToast(e.id)})}}var r6=(e={})=>{vs.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function wA(e,t){T1(e)&&(bA()||Ly.push({content:e,options:t}),vs.forEach(n=>{n.buildToast(e,t)}))}function i6(e){var t;(t=vs.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function SA(e,t){vs.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function a6(e){let t=e.containerId||1;return{subscribe(n){let i=Qz(t,e,Jz);vs.set(t,i);let l=i.observe(n);return e6(),()=>{l(),vs.delete(t)}},setProps(n){var i;(i=vs.get(t))==null||i.setProps(n)},getSnapshot(){var n;return(n=vs.get(t))==null?void 0:n.getSnapshot()}}}function o6(e){return k1.add(e),()=>{k1.delete(e)}}function s6(e){return e&&(Kf(e.toastId)||gv(e.toastId))?e.toastId:xA()}function yv(e,t){return wA(e,t),t.toastId}function ib(e,t){return{...t,type:t&&t.type||e,toastId:s6(t)}}function ab(e){return(t,n)=>yv(t,ib(e,n))}function mn(e,t){return yv(e,ib("default",t))}mn.loading=(e,t)=>yv(e,ib("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function l6(e,{pending:t,error:n,success:i},l){let d;t&&(d=Kf(t)?mn.loading(t,l):mn.loading(t.render,{...l,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},g=(_,C,E)=>{if(C==null){mn.dismiss(d);return}let A={type:_,...a,...l,data:E},D=Kf(C)?{render:C}:C;return d?mn.update(d,{...A,...D}):mn(D.render,{...A,...D}),E},x=Nd(e)?e():e;return x.then(_=>g("success",i,_)).catch(_=>g("error",n,_)),x}mn.promise=l6;mn.success=ab("success");mn.info=ab("info");mn.error=ab("error");mn.warning=ab("warning");mn.warn=mn.warning;mn.dark=(e,t)=>yv(e,ib("default",{theme:"dark",...t}));function c6(e){n6(e)}mn.dismiss=c6;mn.clearWaitingQueue=r6;mn.isActive=_A;mn.update=(e,t={})=>{let n=t6(e,t);if(n){let{props:i,content:l}=n,d={delay:100,...i,...t,toastId:t.toastId||e,updateId:xA()};d.toastId!==e&&(d.staleId=e);let a=d.render||l;delete d.render,yv(a,d)}};mn.done=e=>{mn.update(e,{progress:1})};mn.onChange=o6;mn.play=e=>SA(!0,e);mn.pause=e=>SA(!1,e);function u6(e){var t;let{subscribe:n,getSnapshot:i,setProps:l}=k.useRef(a6(e)).current;l(e);let d=(t=k.useSyncExternalStore(n,i,i))==null?void 0:t.slice();function a(g){if(!d)return[];let x=new Map;return e.newestOnTop&&d.reverse(),d.forEach(_=>{let{position:C}=_.props;x.has(C)||x.set(C,[]),x.get(C).push(_)}),Array.from(x,_=>g(_[0],_[1]))}return{getToastToRender:a,isToastActive:_A,count:d?.length}}function d6(e){let[t,n]=k.useState(!1),[i,l]=k.useState(!1),d=k.useRef(null),a=k.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:g,pauseOnHover:x,closeToast:_,onClick:C,closeOnClick:E}=e;i6({id:e.toastId,containerId:e.containerId,fn:n}),k.useEffect(()=>{if(e.pauseOnFocusLoss)return A(),()=>{D()}},[e.pauseOnFocusLoss]);function A(){document.hasFocus()||z(),window.addEventListener("focus",B),window.addEventListener("blur",z)}function D(){window.removeEventListener("focus",B),window.removeEventListener("blur",z)}function I(ee){if(e.draggable===!0||e.draggable===ee.pointerType){q();let oe=d.current;a.canCloseOnClick=!0,a.canDrag=!0,oe.style.transition="none",e.draggableDirection==="x"?(a.start=ee.clientX,a.removalDistance=oe.offsetWidth*(e.draggablePercent/100)):(a.start=ee.clientY,a.removalDistance=oe.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function L(ee){let{top:oe,bottom:he,left:we,right:ye}=d.current.getBoundingClientRect();ee.nativeEvent.type!=="touchend"&&e.pauseOnHover&&ee.clientX>=we&&ee.clientX<=ye&&ee.clientY>=oe&&ee.clientY<=he?z():B()}function B(){n(!0)}function z(){n(!1)}function q(){a.didMove=!1,document.addEventListener("pointermove",W),document.addEventListener("pointerup",ne)}function H(){document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",ne)}function W(ee){let oe=d.current;if(a.canDrag&&oe){a.didMove=!0,t&&z(),e.draggableDirection==="x"?a.delta=ee.clientX-a.start:a.delta=ee.clientY-a.start,a.start!==ee.clientX&&(a.canCloseOnClick=!1);let he=e.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;oe.style.transform=`translate3d(${he},0)`,oe.style.opacity=`${1-Math.abs(a.delta/a.removalDistance)}`}}function ne(){H();let ee=d.current;if(a.canDrag&&a.didMove&&ee){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance){l(!0),e.closeToast(!0),e.collapseAll();return}ee.style.transition="transform 0.2s, opacity 0.2s",ee.style.removeProperty("transform"),ee.style.removeProperty("opacity")}}let re={onPointerDown:I,onPointerUp:L};return g&&x&&(re.onMouseEnter=z,e.stacked||(re.onMouseLeave=B)),E&&(re.onClick=ee=>{C&&C(ee),a.canCloseOnClick&&_(!0)}),{playToast:B,pauseToast:z,isRunning:t,preventExitTransition:i,toastRef:d,eventHandlers:re}}var h6=typeof window<"u"?k.useLayoutEffect:k.useEffect,ob=({theme:e,type:t,isLoading:n,...i})=>Bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function f6(e){return Bt.createElement(ob,{...e},Bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function p6(e){return Bt.createElement(ob,{...e},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function m6(e){return Bt.createElement(ob,{...e},Bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function g6(e){return Bt.createElement(ob,{...e},Bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function y6(){return Bt.createElement("div",{className:"Toastify__spinner"})}var j1={info:p6,warning:f6,success:m6,error:g6,spinner:y6},v6=e=>e in j1;function x6({theme:e,type:t,isLoading:n,icon:i}){let l=null,d={theme:e,type:t};return i===!1||(Nd(i)?l=i({...d,isLoading:n}):k.isValidElement(i)?l=k.cloneElement(i,d):n?l=j1.spinner():v6(t)&&(l=j1[t](d))),l}var b6=e=>{let{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:l,playToast:d}=d6(e),{closeButton:a,children:g,autoClose:x,onClick:_,type:C,hideProgressBar:E,closeToast:A,transition:D,position:I,className:L,style:B,progressClassName:z,updateId:q,role:H,progress:W,rtl:ne,toastId:re,deleteToast:ee,isIn:oe,isLoading:he,closeOnClick:we,theme:ye,ariaLabel:Pe}=e,Ke=kd("Toastify__toast",`Toastify__toast-theme--${ye}`,`Toastify__toast--${C}`,{"Toastify__toast--rtl":ne},{"Toastify__toast--close-on-click":we}),ze=Nd(L)?L({rtl:ne,position:I,type:C,defaultClassName:Ke}):kd(Ke,L),Je=x6(e),Ae=!!W||!x,De={closeToast:A,type:C,theme:ye},ke=null;return a===!1||(Nd(a)?ke=a(De):k.isValidElement(a)?ke=k.cloneElement(a,De):ke=Kz(De)),Bt.createElement(D,{isIn:oe,done:ee,position:I,preventExitTransition:n,nodeRef:i,playToast:d},Bt.createElement("div",{id:re,tabIndex:0,onClick:_,"data-in":oe,className:ze,...l,style:B,ref:i,...oe&&{role:H,"aria-label":Pe}},Je!=null&&Bt.createElement("div",{className:kd("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!he})},Je),vA(g,e,!t),ke,!e.customProgressBar&&Bt.createElement(Yz,{...q&&!Ae?{key:`p-${q}`}:{},rtl:ne,theme:ye,delay:x,isRunning:t,isIn:oe,closeToast:A,hide:E,type:C,className:z,controlledProgress:Ae,progress:W||0})))},_6=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),w6=Xz(_6("bounce",!0)),S6={position:"top-right",transition:w6,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function E6(e){let t={...S6,...e},n=e.stacked,[i,l]=k.useState(!0),d=k.useRef(null),{getToastToRender:a,isToastActive:g,count:x}=u6(t),{className:_,style:C,rtl:E,containerId:A,hotKeys:D}=t;function I(B){let z=kd("Toastify__toast-container",`Toastify__toast-container--${B}`,{"Toastify__toast-container--rtl":E});return Nd(_)?_({position:B,rtl:E,defaultClassName:z}):kd(z,C1(_))}function L(){n&&(l(!0),mn.play())}return h6(()=>{var B;if(n){let z=d.current.querySelectorAll('[data-in="true"]'),q=12,H=(B=t.position)==null?void 0:B.includes("top"),W=0,ne=0;Array.from(z).reverse().forEach((re,ee)=>{let oe=re;oe.classList.add("Toastify__toast--stacked"),ee>0&&(oe.dataset.collapsed=`${i}`),oe.dataset.pos||(oe.dataset.pos=H?"top":"bot");let he=W*(i?.2:1)+(i?0:q*ee);oe.style.setProperty("--y",`${H?he:he*-1}px`),oe.style.setProperty("--g",`${q}`),oe.style.setProperty("--s",`${1-(i?ne:0)}`),W+=oe.offsetHeight,ne+=.025})}},[i,x,n]),k.useEffect(()=>{function B(z){var q;let H=d.current;D(z)&&((q=H.querySelector('[tabIndex="0"]'))==null||q.focus(),l(!1),mn.pause()),z.key==="Escape"&&(document.activeElement===H||H!=null&&H.contains(document.activeElement))&&(l(!0),mn.play())}return document.addEventListener("keydown",B),()=>{document.removeEventListener("keydown",B)}},[D]),Bt.createElement("section",{ref:d,className:"Toastify",id:A,onMouseEnter:()=>{n&&(l(!1),mn.pause())},onMouseLeave:L,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a((B,z)=>{let q=z.length?{...C}:{...C,pointerEvents:"none"};return Bt.createElement("div",{tabIndex:-1,className:I(B),"data-stacked":n,style:q,key:`c-${B}`},z.map(({content:H,props:W})=>Bt.createElement(b6,{...W,stacked:n,collapseAll:L,isIn:g(W.toastId,W.containerId),key:`t-${W.key}`},H)))}))}const zi=Di.create({baseURL:"https://kltn-api-staging.sonata.io.vn/api/v1/",timeout:1e5}),C6=()=>{const e=Li.getState().token;return e?`Bearer ${e}`:""};zi.interceptors.request.use(e=>(e.headers.Authorization=C6(),e),e=>Promise.reject(e));zi.interceptors.response.use(function(e){return e},function(e){return console.log("API error",e),Promise.reject(e)});const EA=async()=>(await zi.get("user/me")).data,T6=async e=>(await zi.put("user/update/me",e)).data,k6=async e=>(await zi.put("user/change-password",e)).data,j6=async()=>(await zi.post("user/request-seller-role")).data,sb=async e=>(await zi.post(`properties/favorites/${e}`)).data,vv=async e=>(await zi.delete(`properties/favorites/${e}`)).data,lb=async e=>(await zi.get(`properties/favorites/${e}/check`)).data,A6=async e=>(await zi.post("properties/favorites/search",e)).data;function N6(e){try{if(!e)return null;const t=e.split(".")[1];if(!t)return null;let n=t.replace(/-/g,"+").replace(/_/g,"/");const i=n.length%4;i===2?n+="==":i===3&&(n+="=");const l=atob(n),d=JSON.parse(l);return d.user?JSON.parse(d.user).userId??null:null}catch{return null}}function VE(e){try{const t=e.split(".")[1];return JSON.parse(atob(t))}catch{return null}}const M6=()=>{const[e,t]=Bt.useState(!1),n=Ta(),i=bu({defaultValues:{email:"",password:""},mode:"onSubmit"}),l=Li(g=>g.login),d=Li(g=>g.setUserInfo),a=async g=>{t(!0);try{const x=await Rz(g.email,g.password);if(console.log(x),x.status==="200"){l(x.data.token),mn.success("ng nhp thnh cng!");const _=await EA();d(N6(x.data.token),_?.data.avatarUrl,_.data.becomeSellerApproveStatus),console.log(_),n("/")}}catch(x){mn.error("ng nhp tht bi! Vui lng kim tra li thng tin."),console.log(x)}finally{t(!1)}};return c.jsx("div",{className:"bg-[#fff] w-screen h-screen flex items-center justify-center",children:c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("img",{src:"/src/assets/timnha-icon.png",className:"w-[100px] h-[100px]",alt:"logo"})}),c.jsx("h2",{className:"text-4xl font-semibold text-center mb-6",children:"NG NHP"}),c.jsx(_u,{...i,children:c.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-4",children:[c.jsx(Sn,{control:i.control,name:"email",rules:{required:"Email khng c  trng!",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Email khng hp l!"}},render:({field:g})=>c.jsxs(En,{children:[c.jsx(An,{children:"Email"}),c.jsx(Cn,{children:c.jsx(Dr,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp email ca bn",...g})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:i.control,name:"password",rules:{required:"Mt khu khng c  trng!"},render:({field:g})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt khu"}),c.jsx(Cn,{children:c.jsx(Hf,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp mt khu ca bn",...g})}),c.jsx(Vn,{})]})}),c.jsx("div",{className:"flex justify-end",children:c.jsx("a",{href:"/quen-mat-khau",className:"text-sm mt-4 text-[#008DDA] hover:underline hover:text-[#0064A6]",children:"Qun mt khu?"})}),c.jsxs(Nr,{type:"submit",className:`w-full transition-colors duration-200 ${e?"bg-[#0064A6]":"bg-[#008DDA] cursor-pointer"} hover:bg-[#0064A6] `,children:[e?c.jsx(Xm,{}):null,"ng nhp"]})]})}),c.jsxs("div",{className:"mt-4 text-center text-sm",children:["Cha c ti khon?"," ",c.jsx("a",{href:"/dang-ky",className:"text-[#008DDA] hover:underline hover:text-[#0064A6]",children:"ng k ti y."})]})]})})},D6=()=>c.jsx("div",{className:"bg-[#fff] h-screen w-screen flex items-center justify-center",children:c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("img",{src:"/src/assets/timnha-icon.png",alt:"icon",className:"w-[100px] h-[100px]"})}),c.jsx("h2",{className:"text-4xl font-semibold text-center mb-6",children:"NG K"}),c.jsx($0,{})]})}),Bf=rb()(Jw(e=>({email:null,phoneNumber:null,fullName:null,password:null,register:(t,n,i,l)=>e({email:t,phoneNumber:n,fullName:i,password:l}),forgotPassword:(t,n)=>e({email:t,password:n}),clear:()=>e({email:null,phoneNumber:null,fullName:null,password:null})}),{name:"auth-store"})),P6=()=>{const e=bu({defaultValues:{email:"",password:"",phoneNumber:"",fullName:""},mode:"onSubmit"}),t=Ta(),[n,i]=Bt.useState(!1),l=Bf(a=>a.register),d=async a=>{i(!0),console.log(a);try{await gA(a.email,a.password,a.phoneNumber,a.fullName),l(a.email,a.phoneNumber,a.fullName,a.password),t("/dang-ky/otp")}catch(g){mn.error(" c li "),console.log(g)}finally{i(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx(_u,{...e,children:c.jsxs("form",{onSubmit:e.handleSubmit(d),className:"space-y-4",children:[c.jsx(Sn,{control:e.control,name:"email",rules:{required:"Email khng c  trng!",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Email khng hp l!"}},render:({field:a})=>c.jsxs(En,{children:[c.jsx(An,{children:"Email"}),c.jsx(Cn,{children:c.jsx(Dr,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp email ca bn",...a})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:e.control,name:"phoneNumber",rules:{required:"S in thoi khng c  trng!",pattern:{value:/^[0-9]{10}$/,message:"S in thoi phi c 10 ch s!"}},render:({field:a})=>c.jsxs(En,{children:[c.jsx(An,{children:"S in thoi"}),c.jsx(Cn,{children:c.jsx(Dr,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp s in thoi ca bn",...a})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:e.control,name:"fullName",rules:{required:"H tn khng c  trng!"},render:({field:a})=>c.jsxs(En,{children:[c.jsx(An,{children:"H tn"}),c.jsx(Cn,{children:c.jsx(Dr,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp h tn ca bn",...a})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:e.control,name:"password",rules:{required:"Mt khu khng c  trng!",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).{10,}$/,message:"Mt khu phi c t nht 10 k t gm ch thng, ch in hoa, s v k t c bit!"}},render:({field:a})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt khu"}),c.jsx(Cn,{children:c.jsx(Hf,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp mt khu ca bn",...a})}),c.jsx(Vn,{})]})}),c.jsx("div",{className:"h-2"}),c.jsxs(Nr,{type:"submit",className:`w-full transition-colors duration-200 ${n?"bg-[#0064A6]":"bg-[#008DDA] cursor-pointer"} hover:bg-[#0064A6] `,children:[n?c.jsx(Xm,{}):null,"Tip theo"]})]})}),c.jsxs("div",{className:"mt-4 text-center text-sm",children:[" c ti khon?"," ",c.jsx("a",{href:"/dang-nhap",className:"text-[#008DDA] hover:underline hover:text-[#0064A6]",children:"ng nhp ti y."})]})]})},qE=({from:e})=>{const[t,n]=Bt.useState(!1),[i,l]=k.useState(120),[d,a]=k.useState(!1),g=bu({defaultValues:{otp:""},mode:"onSubmit"}),x=Ta(),_=Bf(I=>I.email),C=Bf(I=>I.clear);k.useEffect(()=>{if(i>0){const I=setTimeout(()=>l(i-1),1e3);return()=>clearTimeout(I)}},[i]);const E=I=>{const L=Math.floor(I/60),B=I%60;return`${L}:${B.toString().padStart(2,"0")}`},A=async()=>{a(!0);try{if(e==="register"){const{email:I,phoneNumber:L,fullName:B,password:z}=Bf.getState();(await gA(I??"",z??"",B??"",L??"")).status==="200"&&(mn.success(" gi li m OTP!"),l(120))}else if(e==="forgot"){const{email:I}=Bf.getState();(await yA(I??"")).status==="200"&&(mn.success(" gi li m OTP!"),l(120))}}catch(I){console.log(I),mn.error("Gi li OTP tht bi!")}finally{a(!1)}},D=async I=>{n(!0);try{if(e==="register")console.log("data: ",I.otp," email: ",_??""),(await Lz(_??"",I.otp)).status==="200"&&(mn.success("ng k thnh cng!"),x("/dang-nhap"),C());else if(e==="forgot"){const{email:L,password:B}=Bf.getState();console.log("Reset password - email:",L,"otp:",I.otp),(await zz({otp:I.otp,newPassword:B??"",email:L??""})).status==="200"&&(mn.success("t li mt khu thnh cng!"),x("/dang-nhap"),C())}}catch(L){console.log(L);const B=L?.response?.data?.error?.code,z=L?.response?.data?.error?.message;let q="OTP  ht hn hoc khng chnh xc!";B==="USER_VERIFY_EMAIL_InvalidOtp"||B==="USER_FORGOT_PASSWORD_InvalidOtp"?q="OTP  ht hn hoc khng chnh xc!":z&&(q=z),mn.error(q)}finally{n(!1)}};return c.jsx(c.Fragment,{children:c.jsx(_u,{...g,children:c.jsxs("form",{onSubmit:g.handleSubmit(D),className:"space-y-4",children:[c.jsx(Sn,{control:g.control,name:"otp",rules:{required:"OTP khng c  trng!",pattern:{value:/^\d{6}$/,message:"OTP phi gm 6 ch s!"}},render:({field:I})=>c.jsxs(En,{children:[c.jsx(An,{children:"OTP"}),c.jsx(Cn,{children:c.jsx(Dr,{className:"focus-visible:ring-[#518EE6]",placeholder:"Nhp m OTP",...I})}),c.jsx(Vn,{}),c.jsx("div",{className:"mr-2 text-[0.825rem] text-end text-gray-600 mt-2",children:i>0?c.jsxs("span",{children:["Gi li OTP ",E(i)]}):c.jsx("button",{type:"button",onClick:A,disabled:d,className:"text-[#008DDA] hover:underline disabled:opacity-50 cursor-pointer",children:d?"ang gi...":"Gi li"})})]})}),c.jsx("div",{className:"h-2"}),c.jsxs(Nr,{type:"submit",className:`w-full transition-colors duration-200 ${t?"bg-[#0064A6]":"bg-[#008DDA] cursor-pointer"} hover:bg-[#0064A6] `,children:[t?c.jsx(Xm,{}):null,e==="register"?"ng k":"Xc nhn"]})]})})})},I6=()=>{const[e,t]=k.useState(!1),{forgotPassword:n}=Bf(),i=bu({defaultValues:{email:"",newPassword:"",confirmPassword:""},mode:"onChange"}),l=Ta(),d=async a=>{try{t(!0),await yA(a.email),n(a.email,a.newPassword),mn.success("M OTP  c gi n email ca bn!"),l("/quen-mat-khau/otp")}catch(g){console.error("Forgot password error:",g);const x=g?.response?.data?.error?.code,_=g?.response?.data?.error?.message;let C="Gi m OTP tht bi. Vui lng th li.";x==="USER_FORGOT_PASSWORD_UserNotFound"?C="Email ngi dng khng tn ti.":_&&(C=_),mn.error(C)}finally{t(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"mb-8",children:"Vui lng nhp email  lin kt vi ti khon ca bn  nhn m OTP."}),c.jsx(_u,{...i,children:c.jsxs("form",{onSubmit:i.handleSubmit(d),className:"space-y-4",children:[c.jsx(Sn,{control:i.control,name:"email",rules:{required:"Email khng c  trng!",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Email khng hp l!"}},render:({field:a})=>c.jsxs(En,{children:[c.jsx(An,{children:"Email"}),c.jsx(Cn,{children:c.jsx(Dr,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp email ca bn",...a})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:i.control,name:"newPassword",rules:{required:"Mt khu mi khng c  trng",minLength:{value:8,message:"Mt khu phi c t nht 8 k t"},maxLength:{value:30,message:"Mt khu ti a 30 k t"},validate:{hasDigit:a=>/\d/.test(a)||"Mt khu phi cha t nht 1 ch s",hasUppercase:a=>/[A-Z]/.test(a)||"Mt khu phi cha t nht 1 ch in hoa",noNewline:a=>!/[\n\r]/.test(a)||"Mt khu khng c cha k t xung dng"}},render:({field:a})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt khu mi"}),c.jsx(Cn,{children:c.jsx(Hf,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp mt khu mi",...a})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:i.control,name:"confirmPassword",rules:{required:"Mt khu xc nhn khng c  trng!",validate:(a,g)=>a===g.newPassword||"Mt khu xc nhn khng khp!"},render:({field:a})=>c.jsxs(En,{children:[c.jsx(An,{children:"Xc nhn mt khu"}),c.jsx(Cn,{children:c.jsx(Hf,{className:"focus-visible:ring-[#008DDA]",placeholder:"Nhp li mt khu mi",...a})}),c.jsx(Vn,{})]})}),c.jsx("div",{className:"h-2"}),c.jsxs(Nr,{type:"submit",className:`w-full transition-colors duration-200 ${e?"bg-[#0064A6]":"bg-[#008DDA] cursor-pointer"} hover:bg-[#0064A6] `,children:[e?c.jsx(Xm,{}):null,"Tip theo"]})]})}),c.jsxs("div",{className:"mt-4 text-center text-sm",children:[" c ti khon?"," ",c.jsx("a",{href:"/dang-nhap",className:"text-[#008DDA] hover:underline hover:text-[#0064A6]",children:"ng nhp ti y."})]})]})},O6=()=>c.jsx("div",{className:"bg-[#fff] h-screen w-screen flex items-center justify-center",children:c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("img",{src:"/src/assets/timnha-icon.png",alt:"icon",className:"w-[100px] h-[100px]"})}),c.jsx("h2",{className:"text-4xl font-semibold text-center mb-6",children:"QUN MT KHU"}),c.jsx($0,{})]})}),R6="/assets/timnha-landscape-HXmTFhRU.png";function Tn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(l){if(e?.(l),n===!1||!l.defaultPrevented)return t?.(l)}}function L6(e,t){const n=k.createContext(t),i=d=>{const{children:a,...g}=d,x=k.useMemo(()=>g,Object.values(g));return c.jsx(n.Provider,{value:x,children:a})};i.displayName=e+"Provider";function l(d){const a=k.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${d}\` must be used within \`${e}\``)}return[i,l]}function Cc(e,t=[]){let n=[];function i(d,a){const g=k.createContext(a),x=n.length;n=[...n,a];const _=E=>{const{scope:A,children:D,...I}=E,L=A?.[e]?.[x]||g,B=k.useMemo(()=>I,Object.values(I));return c.jsx(L.Provider,{value:B,children:D})};_.displayName=d+"Provider";function C(E,A){const D=A?.[e]?.[x]||g,I=k.useContext(D);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${E}\` must be used within \`${d}\``)}return[_,C]}const l=()=>{const d=n.map(a=>k.createContext(a));return function(g){const x=g?.[e]||d;return k.useMemo(()=>({[`__scope${e}`]:{...g,[e]:x}}),[g,x])}};return l.scopeName=e,[i,z6(l,...t)]}function z6(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(d){const a=i.reduce((g,{useScope:x,scopeName:_})=>{const E=x(d)[`__scope${_}`];return{...g,...E}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var ns=globalThis?.document?k.useLayoutEffect:()=>{},B6=Cw[" useInsertionEffect ".trim().toString()]||ns;function zh({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[l,d,a]=F6({defaultProp:t,onChange:n}),g=e!==void 0,x=g?e:l;{const C=k.useRef(e!==void 0);k.useEffect(()=>{const E=C.current;E!==g&&console.warn(`${i} is changing from ${E?"controlled":"uncontrolled"} to ${g?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),C.current=g},[g,i])}const _=k.useCallback(C=>{if(g){const E=U6(C)?C(e):C;E!==e&&a.current?.(E)}else d(C)},[g,e,d,a]);return[x,_]}function F6({defaultProp:e,onChange:t}){const[n,i]=k.useState(e),l=k.useRef(n),d=k.useRef(t);return B6(()=>{d.current=t},[t]),k.useEffect(()=>{l.current!==n&&(d.current?.(n),l.current=n)},[n,l]),[n,i,d]}function U6(e){return typeof e=="function"}function V6(e){const t=q6(e),n=k.forwardRef((i,l)=>{const{children:d,...a}=i,g=k.Children.toArray(d),x=g.find($6);if(x){const _=x.props.children,C=g.map(E=>E===x?k.Children.count(_)>1?k.Children.only(null):k.isValidElement(_)?_.props.children:null:E);return c.jsx(t,{...a,ref:l,children:k.isValidElement(_)?k.cloneElement(_,void 0,C):null})}return c.jsx(t,{...a,ref:l,children:d})});return n.displayName=`${e}.Slot`,n}function q6(e){const t=k.forwardRef((n,i)=>{const{children:l,...d}=n;if(k.isValidElement(l)){const a=Z6(l),g=G6(d,l.props);return l.type!==k.Fragment&&(g.ref=i?Pd(i,a):a),k.cloneElement(l,g)}return k.Children.count(l)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var H6=Symbol("radix.slottable");function $6(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===H6}function G6(e,t){const n={...t};for(const i in t){const l=e[i],d=t[i];/^on[A-Z]/.test(i)?l&&d?n[i]=(...g)=>{const x=d(...g);return l(...g),x}:l&&(n[i]=l):i==="style"?n[i]={...l,...d}:i==="className"&&(n[i]=[l,d].filter(Boolean).join(" "))}return{...e,...n}}function Z6(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var X6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gr=X6.reduce((e,t)=>{const n=V6(`Primitive.${t}`),i=k.forwardRef((l,d)=>{const{asChild:a,...g}=l,x=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(x,{...g,ref:d})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function CA(e,t){e&&Lh.flushSync(()=>e.dispatchEvent(t))}function HE(e){const t=K6(e),n=k.forwardRef((i,l)=>{const{children:d,...a}=i,g=k.Children.toArray(d),x=g.find(W6);if(x){const _=x.props.children,C=g.map(E=>E===x?k.Children.count(_)>1?k.Children.only(null):k.isValidElement(_)?_.props.children:null:E);return c.jsx(t,{...a,ref:l,children:k.isValidElement(_)?k.cloneElement(_,void 0,C):null})}return c.jsx(t,{...a,ref:l,children:d})});return n.displayName=`${e}.Slot`,n}function K6(e){const t=k.forwardRef((n,i)=>{const{children:l,...d}=n;if(k.isValidElement(l)){const a=J6(l),g=Q6(d,l.props);return l.type!==k.Fragment&&(g.ref=i?Pd(i,a):a),k.cloneElement(l,g)}return k.Children.count(l)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y6=Symbol("radix.slottable");function W6(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Y6}function Q6(e,t){const n={...t};for(const i in t){const l=e[i],d=t[i];/^on[A-Z]/.test(i)?l&&d?n[i]=(...g)=>{const x=d(...g);return l(...g),x}:l&&(n[i]=l):i==="style"?n[i]={...l,...d}:i==="className"&&(n[i]=[l,d].filter(Boolean).join(" "))}return{...e,...n}}function J6(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function cb(e){const t=e+"CollectionProvider",[n,i]=Cc(t),[l,d]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=L=>{const{scope:B,children:z}=L,q=Bt.useRef(null),H=Bt.useRef(new Map).current;return c.jsx(l,{scope:B,itemMap:H,collectionRef:q,children:z})};a.displayName=t;const g=e+"CollectionSlot",x=HE(g),_=Bt.forwardRef((L,B)=>{const{scope:z,children:q}=L,H=d(g,z),W=Vr(B,H.collectionRef);return c.jsx(x,{ref:W,children:q})});_.displayName=g;const C=e+"CollectionItemSlot",E="data-radix-collection-item",A=HE(C),D=Bt.forwardRef((L,B)=>{const{scope:z,children:q,...H}=L,W=Bt.useRef(null),ne=Vr(B,W),re=d(C,z);return Bt.useEffect(()=>(re.itemMap.set(W,{ref:W,...H}),()=>void re.itemMap.delete(W))),c.jsx(A,{[E]:"",ref:ne,children:q})});D.displayName=C;function I(L){const B=d(e+"CollectionConsumer",L);return Bt.useCallback(()=>{const q=B.collectionRef.current;if(!q)return[];const H=Array.from(q.querySelectorAll(`[${E}]`));return Array.from(B.itemMap.values()).sort((re,ee)=>H.indexOf(re.ref.current)-H.indexOf(ee.ref.current))},[B.collectionRef,B.itemMap])}return[{Provider:a,Slot:_,ItemSlot:D},I,i]}var e8=k.createContext(void 0);function xv(e){const t=k.useContext(e8);return e||t||"ltr"}function wu(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>t.current?.(...n),[])}function t8(e,t=globalThis?.document){const n=wu(e);k.useEffect(()=>{const i=l=>{l.key==="Escape"&&n(l)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var n8="DismissableLayer",A1="dismissableLayer.update",r8="dismissableLayer.pointerDownOutside",i8="dismissableLayer.focusOutside",$E,TA=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ub=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:a,onDismiss:g,...x}=e,_=k.useContext(TA),[C,E]=k.useState(null),A=C?.ownerDocument??globalThis?.document,[,D]=k.useState({}),I=Vr(t,ee=>E(ee)),L=Array.from(_.layers),[B]=[..._.layersWithOutsidePointerEventsDisabled].slice(-1),z=L.indexOf(B),q=C?L.indexOf(C):-1,H=_.layersWithOutsidePointerEventsDisabled.size>0,W=q>=z,ne=s8(ee=>{const oe=ee.target,he=[..._.branches].some(we=>we.contains(oe));!W||he||(l?.(ee),a?.(ee),ee.defaultPrevented||g?.())},A),re=l8(ee=>{const oe=ee.target;[..._.branches].some(we=>we.contains(oe))||(d?.(ee),a?.(ee),ee.defaultPrevented||g?.())},A);return t8(ee=>{q===_.layers.size-1&&(i?.(ee),!ee.defaultPrevented&&g&&(ee.preventDefault(),g()))},A),k.useEffect(()=>{if(C)return n&&(_.layersWithOutsidePointerEventsDisabled.size===0&&($E=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),_.layersWithOutsidePointerEventsDisabled.add(C)),_.layers.add(C),GE(),()=>{n&&_.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=$E)}},[C,A,n,_]),k.useEffect(()=>()=>{C&&(_.layers.delete(C),_.layersWithOutsidePointerEventsDisabled.delete(C),GE())},[C,_]),k.useEffect(()=>{const ee=()=>D({});return document.addEventListener(A1,ee),()=>document.removeEventListener(A1,ee)},[]),c.jsx(gr.div,{...x,ref:I,style:{pointerEvents:H?W?"auto":"none":void 0,...e.style},onFocusCapture:Tn(e.onFocusCapture,re.onFocusCapture),onBlurCapture:Tn(e.onBlurCapture,re.onBlurCapture),onPointerDownCapture:Tn(e.onPointerDownCapture,ne.onPointerDownCapture)})});ub.displayName=n8;var a8="DismissableLayerBranch",o8=k.forwardRef((e,t)=>{const n=k.useContext(TA),i=k.useRef(null),l=Vr(t,i);return k.useEffect(()=>{const d=i.current;if(d)return n.branches.add(d),()=>{n.branches.delete(d)}},[n.branches]),c.jsx(gr.div,{...e,ref:l})});o8.displayName=a8;function s8(e,t=globalThis?.document){const n=wu(e),i=k.useRef(!1),l=k.useRef(()=>{});return k.useEffect(()=>{const d=g=>{if(g.target&&!i.current){let x=function(){kA(r8,n,_,{discrete:!0})};const _={originalEvent:g};g.pointerType==="touch"?(t.removeEventListener("click",l.current),l.current=x,t.addEventListener("click",l.current,{once:!0})):x()}else t.removeEventListener("click",l.current);i.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",d),t.removeEventListener("click",l.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function l8(e,t=globalThis?.document){const n=wu(e),i=k.useRef(!1);return k.useEffect(()=>{const l=d=>{d.target&&!i.current&&kA(i8,n,{originalEvent:d},{discrete:!1})};return t.addEventListener("focusin",l),()=>t.removeEventListener("focusin",l)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function GE(){const e=new CustomEvent(A1);document.dispatchEvent(e)}function kA(e,t,n,{discrete:i}){const l=n.originalEvent.target,d=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&l.addEventListener(e,t,{once:!0}),i?CA(l,d):l.dispatchEvent(d)}var w_=0;function e2(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ZE()),document.body.insertAdjacentElement("beforeend",e[1]??ZE()),w_++,()=>{w_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),w_--}},[])}function ZE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var S_="focusScope.autoFocusOnMount",E_="focusScope.autoFocusOnUnmount",XE={bubbles:!1,cancelable:!0},c8="FocusScope",db=k.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:l,onUnmountAutoFocus:d,...a}=e,[g,x]=k.useState(null),_=wu(l),C=wu(d),E=k.useRef(null),A=Vr(t,L=>x(L)),D=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(i){let L=function(H){if(D.paused||!g)return;const W=H.target;g.contains(W)?E.current=W:Mh(E.current,{select:!0})},B=function(H){if(D.paused||!g)return;const W=H.relatedTarget;W!==null&&(g.contains(W)||Mh(E.current,{select:!0}))},z=function(H){if(document.activeElement===document.body)for(const ne of H)ne.removedNodes.length>0&&Mh(g)};document.addEventListener("focusin",L),document.addEventListener("focusout",B);const q=new MutationObserver(z);return g&&q.observe(g,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",L),document.removeEventListener("focusout",B),q.disconnect()}}},[i,g,D.paused]),k.useEffect(()=>{if(g){YE.add(D);const L=document.activeElement;if(!g.contains(L)){const z=new CustomEvent(S_,XE);g.addEventListener(S_,_),g.dispatchEvent(z),z.defaultPrevented||(u8(m8(jA(g)),{select:!0}),document.activeElement===L&&Mh(g))}return()=>{g.removeEventListener(S_,_),setTimeout(()=>{const z=new CustomEvent(E_,XE);g.addEventListener(E_,C),g.dispatchEvent(z),z.defaultPrevented||Mh(L??document.body,{select:!0}),g.removeEventListener(E_,C),YE.remove(D)},0)}}},[g,_,C,D]);const I=k.useCallback(L=>{if(!n&&!i||D.paused)return;const B=L.key==="Tab"&&!L.altKey&&!L.ctrlKey&&!L.metaKey,z=document.activeElement;if(B&&z){const q=L.currentTarget,[H,W]=d8(q);H&&W?!L.shiftKey&&z===W?(L.preventDefault(),n&&Mh(H,{select:!0})):L.shiftKey&&z===H&&(L.preventDefault(),n&&Mh(W,{select:!0})):z===q&&L.preventDefault()}},[n,i,D.paused]);return c.jsx(gr.div,{tabIndex:-1,...a,ref:A,onKeyDown:I})});db.displayName=c8;function u8(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Mh(i,{select:t}),document.activeElement!==n)return}function d8(e){const t=jA(e),n=KE(t,e),i=KE(t.reverse(),e);return[n,i]}function jA(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const l=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||l?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function KE(e,t){for(const n of e)if(!h8(n,{upTo:t}))return n}function h8(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function f8(e){return e instanceof HTMLInputElement&&"select"in e}function Mh(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&f8(e)&&t&&e.select()}}var YE=p8();function p8(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=WE(e,t),e.unshift(t)},remove(t){e=WE(e,t),e[0]?.resume()}}}function WE(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function m8(e){return e.filter(t=>t.tagName!=="A")}var g8=Cw[" useId ".trim().toString()]||(()=>{}),y8=0;function gu(e){const[t,n]=k.useState(g8());return ns(()=>{n(i=>i??String(y8++))},[e]),e||(t?`radix-${t}`:"")}const v8=["top","right","bottom","left"],Bh=Math.min,ll=Math.max,w0=Math.round,Ox=Math.floor,yu=e=>({x:e,y:e}),x8={left:"right",right:"left",bottom:"top",top:"bottom"},b8={start:"end",end:"start"};function N1(e,t,n){return ll(e,Bh(t,n))}function Md(e,t){return typeof e=="function"?e(t):e}function Dd(e){return e.split("-")[0]}function Wm(e){return e.split("-")[1]}function t2(e){return e==="x"?"y":"x"}function n2(e){return e==="y"?"height":"width"}const _8=new Set(["top","bottom"]);function mu(e){return _8.has(Dd(e))?"y":"x"}function r2(e){return t2(mu(e))}function w8(e,t,n){n===void 0&&(n=!1);const i=Wm(e),l=r2(e),d=n2(l);let a=l==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[d]>t.floating[d]&&(a=S0(a)),[a,S0(a)]}function S8(e){const t=S0(e);return[M1(e),t,M1(t)]}function M1(e){return e.replace(/start|end/g,t=>b8[t])}const QE=["left","right"],JE=["right","left"],E8=["top","bottom"],C8=["bottom","top"];function T8(e,t,n){switch(e){case"top":case"bottom":return n?t?JE:QE:t?QE:JE;case"left":case"right":return t?E8:C8;default:return[]}}function k8(e,t,n,i){const l=Wm(e);let d=T8(Dd(e),n==="start",i);return l&&(d=d.map(a=>a+"-"+l),t&&(d=d.concat(d.map(M1)))),d}function S0(e){return e.replace(/left|right|bottom|top/g,t=>x8[t])}function j8(e){return{top:0,right:0,bottom:0,left:0,...e}}function AA(e){return typeof e!="number"?j8(e):{top:e,right:e,bottom:e,left:e}}function E0(e){const{x:t,y:n,width:i,height:l}=e;return{width:i,height:l,top:n,left:t,right:t+i,bottom:n+l,x:t,y:n}}function eC(e,t,n){let{reference:i,floating:l}=e;const d=mu(t),a=r2(t),g=n2(a),x=Dd(t),_=d==="y",C=i.x+i.width/2-l.width/2,E=i.y+i.height/2-l.height/2,A=i[g]/2-l[g]/2;let D;switch(x){case"top":D={x:C,y:i.y-l.height};break;case"bottom":D={x:C,y:i.y+i.height};break;case"right":D={x:i.x+i.width,y:E};break;case"left":D={x:i.x-l.width,y:E};break;default:D={x:i.x,y:i.y}}switch(Wm(t)){case"start":D[a]-=A*(n&&_?-1:1);break;case"end":D[a]+=A*(n&&_?-1:1);break}return D}const A8=async(e,t,n)=>{const{placement:i="bottom",strategy:l="absolute",middleware:d=[],platform:a}=n,g=d.filter(Boolean),x=await(a.isRTL==null?void 0:a.isRTL(t));let _=await a.getElementRects({reference:e,floating:t,strategy:l}),{x:C,y:E}=eC(_,i,x),A=i,D={},I=0;for(let L=0;L<g.length;L++){const{name:B,fn:z}=g[L],{x:q,y:H,data:W,reset:ne}=await z({x:C,y:E,initialPlacement:i,placement:A,strategy:l,middlewareData:D,rects:_,platform:a,elements:{reference:e,floating:t}});C=q??C,E=H??E,D={...D,[B]:{...D[B],...W}},ne&&I<=50&&(I++,typeof ne=="object"&&(ne.placement&&(A=ne.placement),ne.rects&&(_=ne.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:l}):ne.rects),{x:C,y:E}=eC(_,A,x)),L=-1)}return{x:C,y:E,placement:A,strategy:l,middlewareData:D}};async function zy(e,t){var n;t===void 0&&(t={});const{x:i,y:l,platform:d,rects:a,elements:g,strategy:x}=e,{boundary:_="clippingAncestors",rootBoundary:C="viewport",elementContext:E="floating",altBoundary:A=!1,padding:D=0}=Md(t,e),I=AA(D),B=g[A?E==="floating"?"reference":"floating":E],z=E0(await d.getClippingRect({element:(n=await(d.isElement==null?void 0:d.isElement(B)))==null||n?B:B.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(g.floating)),boundary:_,rootBoundary:C,strategy:x})),q=E==="floating"?{x:i,y:l,width:a.floating.width,height:a.floating.height}:a.reference,H=await(d.getOffsetParent==null?void 0:d.getOffsetParent(g.floating)),W=await(d.isElement==null?void 0:d.isElement(H))?await(d.getScale==null?void 0:d.getScale(H))||{x:1,y:1}:{x:1,y:1},ne=E0(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:g,rect:q,offsetParent:H,strategy:x}):q);return{top:(z.top-ne.top+I.top)/W.y,bottom:(ne.bottom-z.bottom+I.bottom)/W.y,left:(z.left-ne.left+I.left)/W.x,right:(ne.right-z.right+I.right)/W.x}}const N8=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:l,rects:d,platform:a,elements:g,middlewareData:x}=t,{element:_,padding:C=0}=Md(e,t)||{};if(_==null)return{};const E=AA(C),A={x:n,y:i},D=r2(l),I=n2(D),L=await a.getDimensions(_),B=D==="y",z=B?"top":"left",q=B?"bottom":"right",H=B?"clientHeight":"clientWidth",W=d.reference[I]+d.reference[D]-A[D]-d.floating[I],ne=A[D]-d.reference[D],re=await(a.getOffsetParent==null?void 0:a.getOffsetParent(_));let ee=re?re[H]:0;(!ee||!await(a.isElement==null?void 0:a.isElement(re)))&&(ee=g.floating[H]||d.floating[I]);const oe=W/2-ne/2,he=ee/2-L[I]/2-1,we=Bh(E[z],he),ye=Bh(E[q],he),Pe=we,Ke=ee-L[I]-ye,ze=ee/2-L[I]/2+oe,Je=N1(Pe,ze,Ke),Ae=!x.arrow&&Wm(l)!=null&&ze!==Je&&d.reference[I]/2-(ze<Pe?we:ye)-L[I]/2<0,De=Ae?ze<Pe?ze-Pe:ze-Ke:0;return{[D]:A[D]+De,data:{[D]:Je,centerOffset:ze-Je-De,...Ae&&{alignmentOffset:De}},reset:Ae}}}),M8=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:l,middlewareData:d,rects:a,initialPlacement:g,platform:x,elements:_}=t,{mainAxis:C=!0,crossAxis:E=!0,fallbackPlacements:A,fallbackStrategy:D="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:L=!0,...B}=Md(e,t);if((n=d.arrow)!=null&&n.alignmentOffset)return{};const z=Dd(l),q=mu(g),H=Dd(g)===g,W=await(x.isRTL==null?void 0:x.isRTL(_.floating)),ne=A||(H||!L?[S0(g)]:S8(g)),re=I!=="none";!A&&re&&ne.push(...k8(g,L,I,W));const ee=[g,...ne],oe=await zy(t,B),he=[];let we=((i=d.flip)==null?void 0:i.overflows)||[];if(C&&he.push(oe[z]),E){const ze=w8(l,a,W);he.push(oe[ze[0]],oe[ze[1]])}if(we=[...we,{placement:l,overflows:he}],!he.every(ze=>ze<=0)){var ye,Pe;const ze=(((ye=d.flip)==null?void 0:ye.index)||0)+1,Je=ee[ze];if(Je&&(!(E==="alignment"?q!==mu(Je):!1)||we.every(ke=>mu(ke.placement)===q?ke.overflows[0]>0:!0)))return{data:{index:ze,overflows:we},reset:{placement:Je}};let Ae=(Pe=we.filter(De=>De.overflows[0]<=0).sort((De,ke)=>De.overflows[1]-ke.overflows[1])[0])==null?void 0:Pe.placement;if(!Ae)switch(D){case"bestFit":{var Ke;const De=(Ke=we.filter(ke=>{if(re){const st=mu(ke.placement);return st===q||st==="y"}return!0}).map(ke=>[ke.placement,ke.overflows.filter(st=>st>0).reduce((st,me)=>st+me,0)]).sort((ke,st)=>ke[1]-st[1])[0])==null?void 0:Ke[0];De&&(Ae=De);break}case"initialPlacement":Ae=g;break}if(l!==Ae)return{reset:{placement:Ae}}}return{}}}};function tC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function nC(e){return v8.some(t=>e[t]>=0)}const D8=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...l}=Md(e,t);switch(i){case"referenceHidden":{const d=await zy(t,{...l,elementContext:"reference"}),a=tC(d,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:nC(a)}}}case"escaped":{const d=await zy(t,{...l,altBoundary:!0}),a=tC(d,n.floating);return{data:{escapedOffsets:a,escaped:nC(a)}}}default:return{}}}}},NA=new Set(["left","top"]);async function P8(e,t){const{placement:n,platform:i,elements:l}=e,d=await(i.isRTL==null?void 0:i.isRTL(l.floating)),a=Dd(n),g=Wm(n),x=mu(n)==="y",_=NA.has(a)?-1:1,C=d&&x?-1:1,E=Md(t,e);let{mainAxis:A,crossAxis:D,alignmentAxis:I}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return g&&typeof I=="number"&&(D=g==="end"?I*-1:I),x?{x:D*C,y:A*_}:{x:A*_,y:D*C}}const I8=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:l,y:d,placement:a,middlewareData:g}=t,x=await P8(t,e);return a===((n=g.offset)==null?void 0:n.placement)&&(i=g.arrow)!=null&&i.alignmentOffset?{}:{x:l+x.x,y:d+x.y,data:{...x,placement:a}}}}},O8=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:l}=t,{mainAxis:d=!0,crossAxis:a=!1,limiter:g={fn:B=>{let{x:z,y:q}=B;return{x:z,y:q}}},...x}=Md(e,t),_={x:n,y:i},C=await zy(t,x),E=mu(Dd(l)),A=t2(E);let D=_[A],I=_[E];if(d){const B=A==="y"?"top":"left",z=A==="y"?"bottom":"right",q=D+C[B],H=D-C[z];D=N1(q,D,H)}if(a){const B=E==="y"?"top":"left",z=E==="y"?"bottom":"right",q=I+C[B],H=I-C[z];I=N1(q,I,H)}const L=g.fn({...t,[A]:D,[E]:I});return{...L,data:{x:L.x-n,y:L.y-i,enabled:{[A]:d,[E]:a}}}}}},R8=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:l,rects:d,middlewareData:a}=t,{offset:g=0,mainAxis:x=!0,crossAxis:_=!0}=Md(e,t),C={x:n,y:i},E=mu(l),A=t2(E);let D=C[A],I=C[E];const L=Md(g,t),B=typeof L=="number"?{mainAxis:L,crossAxis:0}:{mainAxis:0,crossAxis:0,...L};if(x){const H=A==="y"?"height":"width",W=d.reference[A]-d.floating[H]+B.mainAxis,ne=d.reference[A]+d.reference[H]-B.mainAxis;D<W?D=W:D>ne&&(D=ne)}if(_){var z,q;const H=A==="y"?"width":"height",W=NA.has(Dd(l)),ne=d.reference[E]-d.floating[H]+(W&&((z=a.offset)==null?void 0:z[E])||0)+(W?0:B.crossAxis),re=d.reference[E]+d.reference[H]+(W?0:((q=a.offset)==null?void 0:q[E])||0)-(W?B.crossAxis:0);I<ne?I=ne:I>re&&(I=re)}return{[A]:D,[E]:I}}}},L8=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:l,rects:d,platform:a,elements:g}=t,{apply:x=()=>{},..._}=Md(e,t),C=await zy(t,_),E=Dd(l),A=Wm(l),D=mu(l)==="y",{width:I,height:L}=d.floating;let B,z;E==="top"||E==="bottom"?(B=E,z=A===(await(a.isRTL==null?void 0:a.isRTL(g.floating))?"start":"end")?"left":"right"):(z=E,B=A==="end"?"top":"bottom");const q=L-C.top-C.bottom,H=I-C.left-C.right,W=Bh(L-C[B],q),ne=Bh(I-C[z],H),re=!t.middlewareData.shift;let ee=W,oe=ne;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(oe=H),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(ee=q),re&&!A){const we=ll(C.left,0),ye=ll(C.right,0),Pe=ll(C.top,0),Ke=ll(C.bottom,0);D?oe=I-2*(we!==0||ye!==0?we+ye:ll(C.left,C.right)):ee=L-2*(Pe!==0||Ke!==0?Pe+Ke:ll(C.top,C.bottom))}await x({...t,availableWidth:oe,availableHeight:ee});const he=await a.getDimensions(g.floating);return I!==he.width||L!==he.height?{reset:{rects:!0}}:{}}}};function hb(){return typeof window<"u"}function Qm(e){return MA(e)?(e.nodeName||"").toLowerCase():"#document"}function dl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ku(e){var t;return(t=(MA(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MA(e){return hb()?e instanceof Node||e instanceof dl(e).Node:!1}function _c(e){return hb()?e instanceof Element||e instanceof dl(e).Element:!1}function Su(e){return hb()?e instanceof HTMLElement||e instanceof dl(e).HTMLElement:!1}function rC(e){return!hb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof dl(e).ShadowRoot}const z8=new Set(["inline","contents"]);function bv(e){const{overflow:t,overflowX:n,overflowY:i,display:l}=wc(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!z8.has(l)}const B8=new Set(["table","td","th"]);function F8(e){return B8.has(Qm(e))}const U8=[":popover-open",":modal"];function fb(e){return U8.some(t=>{try{return e.matches(t)}catch{return!1}})}const V8=["transform","translate","scale","rotate","perspective"],q8=["transform","translate","scale","rotate","perspective","filter"],H8=["paint","layout","strict","content"];function i2(e){const t=a2(),n=_c(e)?wc(e):e;return V8.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||q8.some(i=>(n.willChange||"").includes(i))||H8.some(i=>(n.contain||"").includes(i))}function $8(e){let t=Fh(e);for(;Su(t)&&!Rm(t);){if(i2(t))return t;if(fb(t))return null;t=Fh(t)}return null}function a2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const G8=new Set(["html","body","#document"]);function Rm(e){return G8.has(Qm(e))}function wc(e){return dl(e).getComputedStyle(e)}function pb(e){return _c(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Fh(e){if(Qm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rC(e)&&e.host||ku(e);return rC(t)?t.host:t}function DA(e){const t=Fh(e);return Rm(t)?e.ownerDocument?e.ownerDocument.body:e.body:Su(t)&&bv(t)?t:DA(t)}function By(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const l=DA(e),d=l===((i=e.ownerDocument)==null?void 0:i.body),a=dl(l);if(d){const g=D1(a);return t.concat(a,a.visualViewport||[],bv(l)?l:[],g&&n?By(g):[])}return t.concat(l,By(l,[],n))}function D1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function PA(e){const t=wc(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const l=Su(e),d=l?e.offsetWidth:n,a=l?e.offsetHeight:i,g=w0(n)!==d||w0(i)!==a;return g&&(n=d,i=a),{width:n,height:i,$:g}}function o2(e){return _c(e)?e:e.contextElement}function km(e){const t=o2(e);if(!Su(t))return yu(1);const n=t.getBoundingClientRect(),{width:i,height:l,$:d}=PA(t);let a=(d?w0(n.width):n.width)/i,g=(d?w0(n.height):n.height)/l;return(!a||!Number.isFinite(a))&&(a=1),(!g||!Number.isFinite(g))&&(g=1),{x:a,y:g}}const Z8=yu(0);function IA(e){const t=dl(e);return!a2()||!t.visualViewport?Z8:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function X8(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==dl(e)?!1:t}function Yf(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),d=o2(e);let a=yu(1);t&&(i?_c(i)&&(a=km(i)):a=km(e));const g=X8(d,n,i)?IA(d):yu(0);let x=(l.left+g.x)/a.x,_=(l.top+g.y)/a.y,C=l.width/a.x,E=l.height/a.y;if(d){const A=dl(d),D=i&&_c(i)?dl(i):i;let I=A,L=D1(I);for(;L&&i&&D!==I;){const B=km(L),z=L.getBoundingClientRect(),q=wc(L),H=z.left+(L.clientLeft+parseFloat(q.paddingLeft))*B.x,W=z.top+(L.clientTop+parseFloat(q.paddingTop))*B.y;x*=B.x,_*=B.y,C*=B.x,E*=B.y,x+=H,_+=W,I=dl(L),L=D1(I)}}return E0({width:C,height:E,x,y:_})}function mb(e,t){const n=pb(e).scrollLeft;return t?t.left+n:Yf(ku(e)).left+n}function OA(e,t){const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-mb(e,n),l=n.top+t.scrollTop;return{x:i,y:l}}function K8(e){let{elements:t,rect:n,offsetParent:i,strategy:l}=e;const d=l==="fixed",a=ku(i),g=t?fb(t.floating):!1;if(i===a||g&&d)return n;let x={scrollLeft:0,scrollTop:0},_=yu(1);const C=yu(0),E=Su(i);if((E||!E&&!d)&&((Qm(i)!=="body"||bv(a))&&(x=pb(i)),Su(i))){const D=Yf(i);_=km(i),C.x=D.x+i.clientLeft,C.y=D.y+i.clientTop}const A=a&&!E&&!d?OA(a,x):yu(0);return{width:n.width*_.x,height:n.height*_.y,x:n.x*_.x-x.scrollLeft*_.x+C.x+A.x,y:n.y*_.y-x.scrollTop*_.y+C.y+A.y}}function Y8(e){return Array.from(e.getClientRects())}function W8(e){const t=ku(e),n=pb(e),i=e.ownerDocument.body,l=ll(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),d=ll(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let a=-n.scrollLeft+mb(e);const g=-n.scrollTop;return wc(i).direction==="rtl"&&(a+=ll(t.clientWidth,i.clientWidth)-l),{width:l,height:d,x:a,y:g}}const iC=25;function Q8(e,t){const n=dl(e),i=ku(e),l=n.visualViewport;let d=i.clientWidth,a=i.clientHeight,g=0,x=0;if(l){d=l.width,a=l.height;const C=a2();(!C||C&&t==="fixed")&&(g=l.offsetLeft,x=l.offsetTop)}const _=mb(i);if(_<=0){const C=i.ownerDocument,E=C.body,A=getComputedStyle(E),D=C.compatMode==="CSS1Compat"&&parseFloat(A.marginLeft)+parseFloat(A.marginRight)||0,I=Math.abs(i.clientWidth-E.clientWidth-D);I<=iC&&(d-=I)}else _<=iC&&(d+=_);return{width:d,height:a,x:g,y:x}}const J8=new Set(["absolute","fixed"]);function eB(e,t){const n=Yf(e,!0,t==="fixed"),i=n.top+e.clientTop,l=n.left+e.clientLeft,d=Su(e)?km(e):yu(1),a=e.clientWidth*d.x,g=e.clientHeight*d.y,x=l*d.x,_=i*d.y;return{width:a,height:g,x,y:_}}function aC(e,t,n){let i;if(t==="viewport")i=Q8(e,n);else if(t==="document")i=W8(ku(e));else if(_c(t))i=eB(t,n);else{const l=IA(e);i={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return E0(i)}function RA(e,t){const n=Fh(e);return n===t||!_c(n)||Rm(n)?!1:wc(n).position==="fixed"||RA(n,t)}function tB(e,t){const n=t.get(e);if(n)return n;let i=By(e,[],!1).filter(g=>_c(g)&&Qm(g)!=="body"),l=null;const d=wc(e).position==="fixed";let a=d?Fh(e):e;for(;_c(a)&&!Rm(a);){const g=wc(a),x=i2(a);!x&&g.position==="fixed"&&(l=null),(d?!x&&!l:!x&&g.position==="static"&&!!l&&J8.has(l.position)||bv(a)&&!x&&RA(e,a))?i=i.filter(C=>C!==a):l=g,a=Fh(a)}return t.set(e,i),i}function nB(e){let{element:t,boundary:n,rootBoundary:i,strategy:l}=e;const a=[...n==="clippingAncestors"?fb(t)?[]:tB(t,this._c):[].concat(n),i],g=a[0],x=a.reduce((_,C)=>{const E=aC(t,C,l);return _.top=ll(E.top,_.top),_.right=Bh(E.right,_.right),_.bottom=Bh(E.bottom,_.bottom),_.left=ll(E.left,_.left),_},aC(t,g,l));return{width:x.right-x.left,height:x.bottom-x.top,x:x.left,y:x.top}}function rB(e){const{width:t,height:n}=PA(e);return{width:t,height:n}}function iB(e,t,n){const i=Su(t),l=ku(t),d=n==="fixed",a=Yf(e,!0,d,t);let g={scrollLeft:0,scrollTop:0};const x=yu(0);function _(){x.x=mb(l)}if(i||!i&&!d)if((Qm(t)!=="body"||bv(l))&&(g=pb(t)),i){const D=Yf(t,!0,d,t);x.x=D.x+t.clientLeft,x.y=D.y+t.clientTop}else l&&_();d&&!i&&l&&_();const C=l&&!i&&!d?OA(l,g):yu(0),E=a.left+g.scrollLeft-x.x-C.x,A=a.top+g.scrollTop-x.y-C.y;return{x:E,y:A,width:a.width,height:a.height}}function C_(e){return wc(e).position==="static"}function oC(e,t){if(!Su(e)||wc(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ku(e)===n&&(n=n.ownerDocument.body),n}function LA(e,t){const n=dl(e);if(fb(e))return n;if(!Su(e)){let l=Fh(e);for(;l&&!Rm(l);){if(_c(l)&&!C_(l))return l;l=Fh(l)}return n}let i=oC(e,t);for(;i&&F8(i)&&C_(i);)i=oC(i,t);return i&&Rm(i)&&C_(i)&&!i2(i)?n:i||$8(e)||n}const aB=async function(e){const t=this.getOffsetParent||LA,n=this.getDimensions,i=await n(e.floating);return{reference:iB(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function oB(e){return wc(e).direction==="rtl"}const sB={convertOffsetParentRelativeRectToViewportRelativeRect:K8,getDocumentElement:ku,getClippingRect:nB,getOffsetParent:LA,getElementRects:aB,getClientRects:Y8,getDimensions:rB,getScale:km,isElement:_c,isRTL:oB};function zA(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function lB(e,t){let n=null,i;const l=ku(e);function d(){var g;clearTimeout(i),(g=n)==null||g.disconnect(),n=null}function a(g,x){g===void 0&&(g=!1),x===void 0&&(x=1),d();const _=e.getBoundingClientRect(),{left:C,top:E,width:A,height:D}=_;if(g||t(),!A||!D)return;const I=Ox(E),L=Ox(l.clientWidth-(C+A)),B=Ox(l.clientHeight-(E+D)),z=Ox(C),H={rootMargin:-I+"px "+-L+"px "+-B+"px "+-z+"px",threshold:ll(0,Bh(1,x))||1};let W=!0;function ne(re){const ee=re[0].intersectionRatio;if(ee!==x){if(!W)return a();ee?a(!1,ee):i=setTimeout(()=>{a(!1,1e-7)},1e3)}ee===1&&!zA(_,e.getBoundingClientRect())&&a(),W=!1}try{n=new IntersectionObserver(ne,{...H,root:l.ownerDocument})}catch{n=new IntersectionObserver(ne,H)}n.observe(e)}return a(!0),d}function cB(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:l=!0,ancestorResize:d=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:g=typeof IntersectionObserver=="function",animationFrame:x=!1}=i,_=o2(e),C=l||d?[..._?By(_):[],...By(t)]:[];C.forEach(z=>{l&&z.addEventListener("scroll",n,{passive:!0}),d&&z.addEventListener("resize",n)});const E=_&&g?lB(_,n):null;let A=-1,D=null;a&&(D=new ResizeObserver(z=>{let[q]=z;q&&q.target===_&&D&&(D.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var H;(H=D)==null||H.observe(t)})),n()}),_&&!x&&D.observe(_),D.observe(t));let I,L=x?Yf(e):null;x&&B();function B(){const z=Yf(e);L&&!zA(L,z)&&n(),L=z,I=requestAnimationFrame(B)}return n(),()=>{var z;C.forEach(q=>{l&&q.removeEventListener("scroll",n),d&&q.removeEventListener("resize",n)}),E?.(),(z=D)==null||z.disconnect(),D=null,x&&cancelAnimationFrame(I)}}const uB=I8,dB=O8,hB=M8,fB=L8,pB=D8,sC=N8,mB=R8,gB=(e,t,n)=>{const i=new Map,l={platform:sB,...n},d={...l.platform,_c:i};return A8(e,t,{...l,platform:d})};var yB=typeof document<"u",vB=function(){},s0=yB?k.useLayoutEffect:vB;function C0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,l;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!C0(e[i],t[i]))return!1;return!0}if(l=Object.keys(e),n=l.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,l[i]))return!1;for(i=n;i--!==0;){const d=l[i];if(!(d==="_owner"&&e.$$typeof)&&!C0(e[d],t[d]))return!1}return!0}return e!==e&&t!==t}function BA(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lC(e,t){const n=BA(e);return Math.round(t*n)/n}function T_(e){const t=k.useRef(e);return s0(()=>{t.current=e}),t}function xB(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:l,elements:{reference:d,floating:a}={},transform:g=!0,whileElementsMounted:x,open:_}=e,[C,E]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[A,D]=k.useState(i);C0(A,i)||D(i);const[I,L]=k.useState(null),[B,z]=k.useState(null),q=k.useCallback(ke=>{ke!==re.current&&(re.current=ke,L(ke))},[]),H=k.useCallback(ke=>{ke!==ee.current&&(ee.current=ke,z(ke))},[]),W=d||I,ne=a||B,re=k.useRef(null),ee=k.useRef(null),oe=k.useRef(C),he=x!=null,we=T_(x),ye=T_(l),Pe=T_(_),Ke=k.useCallback(()=>{if(!re.current||!ee.current)return;const ke={placement:t,strategy:n,middleware:A};ye.current&&(ke.platform=ye.current),gB(re.current,ee.current,ke).then(st=>{const me={...st,isPositioned:Pe.current!==!1};ze.current&&!C0(oe.current,me)&&(oe.current=me,Lh.flushSync(()=>{E(me)}))})},[A,t,n,ye,Pe]);s0(()=>{_===!1&&oe.current.isPositioned&&(oe.current.isPositioned=!1,E(ke=>({...ke,isPositioned:!1})))},[_]);const ze=k.useRef(!1);s0(()=>(ze.current=!0,()=>{ze.current=!1}),[]),s0(()=>{if(W&&(re.current=W),ne&&(ee.current=ne),W&&ne){if(we.current)return we.current(W,ne,Ke);Ke()}},[W,ne,Ke,we,he]);const Je=k.useMemo(()=>({reference:re,floating:ee,setReference:q,setFloating:H}),[q,H]),Ae=k.useMemo(()=>({reference:W,floating:ne}),[W,ne]),De=k.useMemo(()=>{const ke={position:n,left:0,top:0};if(!Ae.floating)return ke;const st=lC(Ae.floating,C.x),me=lC(Ae.floating,C.y);return g?{...ke,transform:"translate("+st+"px, "+me+"px)",...BA(Ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:st,top:me}},[n,g,Ae.floating,C.x,C.y]);return k.useMemo(()=>({...C,update:Ke,refs:Je,elements:Ae,floatingStyles:De}),[C,Ke,Je,Ae,De])}const bB=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:l}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?sC({element:i.current,padding:l}).fn(n):{}:i?sC({element:i,padding:l}).fn(n):{}}}},_B=(e,t)=>({...uB(e),options:[e,t]}),wB=(e,t)=>({...dB(e),options:[e,t]}),SB=(e,t)=>({...mB(e),options:[e,t]}),EB=(e,t)=>({...hB(e),options:[e,t]}),CB=(e,t)=>({...fB(e),options:[e,t]}),TB=(e,t)=>({...pB(e),options:[e,t]}),kB=(e,t)=>({...bB(e),options:[e,t]});var jB="Arrow",FA=k.forwardRef((e,t)=>{const{children:n,width:i=10,height:l=5,...d}=e;return c.jsx(gr.svg,{...d,ref:t,width:i,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});FA.displayName=jB;var AB=FA;function s2(e){const[t,n]=k.useState(void 0);return ns(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const d=l[0];let a,g;if("borderBoxSize"in d){const x=d.borderBoxSize,_=Array.isArray(x)?x[0]:x;a=_.inlineSize,g=_.blockSize}else a=e.offsetWidth,g=e.offsetHeight;n({width:a,height:g})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var l2="Popper",[UA,gb]=Cc(l2),[NB,VA]=UA(l2),qA=e=>{const{__scopePopper:t,children:n}=e,[i,l]=k.useState(null);return c.jsx(NB,{scope:t,anchor:i,onAnchorChange:l,children:n})};qA.displayName=l2;var HA="PopperAnchor",$A=k.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...l}=e,d=VA(HA,n),a=k.useRef(null),g=Vr(t,a),x=k.useRef(null);return k.useEffect(()=>{const _=x.current;x.current=i?.current||a.current,_!==x.current&&d.onAnchorChange(x.current)}),i?null:c.jsx(gr.div,{...l,ref:g})});$A.displayName=HA;var c2="PopperContent",[MB,DB]=UA(c2),GA=k.forwardRef((e,t)=>{const{__scopePopper:n,side:i="bottom",sideOffset:l=0,align:d="center",alignOffset:a=0,arrowPadding:g=0,avoidCollisions:x=!0,collisionBoundary:_=[],collisionPadding:C=0,sticky:E="partial",hideWhenDetached:A=!1,updatePositionStrategy:D="optimized",onPlaced:I,...L}=e,B=VA(c2,n),[z,q]=k.useState(null),H=Vr(t,We=>q(We)),[W,ne]=k.useState(null),re=s2(W),ee=re?.width??0,oe=re?.height??0,he=i+(d!=="center"?"-"+d:""),we=typeof C=="number"?C:{top:0,right:0,bottom:0,left:0,...C},ye=Array.isArray(_)?_:[_],Pe=ye.length>0,Ke={padding:we,boundary:ye.filter(IB),altBoundary:Pe},{refs:ze,floatingStyles:Je,placement:Ae,isPositioned:De,middlewareData:ke}=xB({strategy:"fixed",placement:he,whileElementsMounted:(...We)=>cB(...We,{animationFrame:D==="always"}),elements:{reference:B.anchor},middleware:[_B({mainAxis:l+oe,alignmentAxis:a}),x&&wB({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?SB():void 0,...Ke}),x&&EB({...Ke}),CB({...Ke,apply:({elements:We,rects:Nt,availableWidth:At,availableHeight:Mt})=>{const{width:Ut,height:Pt}=Nt.reference,Rt=We.floating.style;Rt.setProperty("--radix-popper-available-width",`${At}px`),Rt.setProperty("--radix-popper-available-height",`${Mt}px`),Rt.setProperty("--radix-popper-anchor-width",`${Ut}px`),Rt.setProperty("--radix-popper-anchor-height",`${Pt}px`)}}),W&&kB({element:W,padding:g}),OB({arrowWidth:ee,arrowHeight:oe}),A&&TB({strategy:"referenceHidden",...Ke})]}),[st,me]=KA(Ae),Ce=wu(I);ns(()=>{De&&Ce?.()},[De,Ce]);const pe=ke.arrow?.x,Q=ke.arrow?.y,Ee=ke.arrow?.centerOffset!==0,[Ge,lt]=k.useState();return ns(()=>{z&&lt(window.getComputedStyle(z).zIndex)},[z]),c.jsx("div",{ref:ze.setFloating,"data-radix-popper-content-wrapper":"",style:{...Je,transform:De?Je.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ge,"--radix-popper-transform-origin":[ke.transformOrigin?.x,ke.transformOrigin?.y].join(" "),...ke.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(MB,{scope:n,placedSide:st,onArrowChange:ne,arrowX:pe,arrowY:Q,shouldHideArrow:Ee,children:c.jsx(gr.div,{"data-side":st,"data-align":me,...L,ref:H,style:{...L.style,animation:De?void 0:"none"}})})})});GA.displayName=c2;var ZA="PopperArrow",PB={top:"bottom",right:"left",bottom:"top",left:"right"},XA=k.forwardRef(function(t,n){const{__scopePopper:i,...l}=t,d=DB(ZA,i),a=PB[d.placedSide];return c.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:c.jsx(AB,{...l,ref:n,style:{...l.style,display:"block"}})})});XA.displayName=ZA;function IB(e){return e!==null}var OB=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:i,middlewareData:l}=t,a=l.arrow?.centerOffset!==0,g=a?0:e.arrowWidth,x=a?0:e.arrowHeight,[_,C]=KA(n),E={start:"0%",center:"50%",end:"100%"}[C],A=(l.arrow?.x??0)+g/2,D=(l.arrow?.y??0)+x/2;let I="",L="";return _==="bottom"?(I=a?E:`${A}px`,L=`${-x}px`):_==="top"?(I=a?E:`${A}px`,L=`${i.floating.height+x}px`):_==="right"?(I=`${-x}px`,L=a?E:`${D}px`):_==="left"&&(I=`${i.floating.width+x}px`,L=a?E:`${D}px`),{data:{x:I,y:L}}}});function KA(e){const[t,n="center"]=e.split("-");return[t,n]}var YA=qA,WA=$A,QA=GA,JA=XA,RB="Portal",yb=k.forwardRef((e,t)=>{const{container:n,...i}=e,[l,d]=k.useState(!1);ns(()=>d(!0),[]);const a=n||l&&globalThis?.document?.body;return a?DO.createPortal(c.jsx(gr.div,{...i,ref:t}),a):null});yb.displayName=RB;function LB(e,t){return k.useReducer((n,i)=>t[n][i]??n,e)}var ju=e=>{const{present:t,children:n}=e,i=zB(t),l=typeof n=="function"?n({present:i.isPresent}):k.Children.only(n),d=Vr(i.ref,BB(l));return typeof n=="function"||i.isPresent?k.cloneElement(l,{ref:d}):null};ju.displayName="Presence";function zB(e){const[t,n]=k.useState(),i=k.useRef(null),l=k.useRef(e),d=k.useRef("none"),a=e?"mounted":"unmounted",[g,x]=LB(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const _=Rx(i.current);d.current=g==="mounted"?_:"none"},[g]),ns(()=>{const _=i.current,C=l.current;if(C!==e){const A=d.current,D=Rx(_);e?x("MOUNT"):D==="none"||_?.display==="none"?x("UNMOUNT"):x(C&&A!==D?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,x]),ns(()=>{if(t){let _;const C=t.ownerDocument.defaultView??window,E=D=>{const L=Rx(i.current).includes(CSS.escape(D.animationName));if(D.target===t&&L&&(x("ANIMATION_END"),!l.current)){const B=t.style.animationFillMode;t.style.animationFillMode="forwards",_=C.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=B)})}},A=D=>{D.target===t&&(d.current=Rx(i.current))};return t.addEventListener("animationstart",A),t.addEventListener("animationcancel",E),t.addEventListener("animationend",E),()=>{C.clearTimeout(_),t.removeEventListener("animationstart",A),t.removeEventListener("animationcancel",E),t.removeEventListener("animationend",E)}}else x("ANIMATION_END")},[t,x]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:k.useCallback(_=>{i.current=_?getComputedStyle(_):null,n(_)},[])}}function Rx(e){return e?.animationName||"none"}function BB(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var k_="rovingFocusGroup.onEntryFocus",FB={bubbles:!1,cancelable:!0},_v="RovingFocusGroup",[P1,eN,UB]=cb(_v),[VB,vb]=Cc(_v,[UB]),[qB,HB]=VB(_v),tN=k.forwardRef((e,t)=>c.jsx(P1.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(P1.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx($B,{...e,ref:t})})}));tN.displayName=_v;var $B=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:l=!1,dir:d,currentTabStopId:a,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:x,onEntryFocus:_,preventScrollOnEntryFocus:C=!1,...E}=e,A=k.useRef(null),D=Vr(t,A),I=xv(d),[L,B]=zh({prop:a,defaultProp:g??null,onChange:x,caller:_v}),[z,q]=k.useState(!1),H=wu(_),W=eN(n),ne=k.useRef(!1),[re,ee]=k.useState(0);return k.useEffect(()=>{const oe=A.current;if(oe)return oe.addEventListener(k_,H),()=>oe.removeEventListener(k_,H)},[H]),c.jsx(qB,{scope:n,orientation:i,dir:I,loop:l,currentTabStopId:L,onItemFocus:k.useCallback(oe=>B(oe),[B]),onItemShiftTab:k.useCallback(()=>q(!0),[]),onFocusableItemAdd:k.useCallback(()=>ee(oe=>oe+1),[]),onFocusableItemRemove:k.useCallback(()=>ee(oe=>oe-1),[]),children:c.jsx(gr.div,{tabIndex:z||re===0?-1:0,"data-orientation":i,...E,ref:D,style:{outline:"none",...e.style},onMouseDown:Tn(e.onMouseDown,()=>{ne.current=!0}),onFocus:Tn(e.onFocus,oe=>{const he=!ne.current;if(oe.target===oe.currentTarget&&he&&!z){const we=new CustomEvent(k_,FB);if(oe.currentTarget.dispatchEvent(we),!we.defaultPrevented){const ye=W().filter(Ae=>Ae.focusable),Pe=ye.find(Ae=>Ae.active),Ke=ye.find(Ae=>Ae.id===L),Je=[Pe,Ke,...ye].filter(Boolean).map(Ae=>Ae.ref.current);iN(Je,C)}}ne.current=!1}),onBlur:Tn(e.onBlur,()=>q(!1))})})}),nN="RovingFocusGroupItem",rN=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:l=!1,tabStopId:d,children:a,...g}=e,x=gu(),_=d||x,C=HB(nN,n),E=C.currentTabStopId===_,A=eN(n),{onFocusableItemAdd:D,onFocusableItemRemove:I,currentTabStopId:L}=C;return k.useEffect(()=>{if(i)return D(),()=>I()},[i,D,I]),c.jsx(P1.ItemSlot,{scope:n,id:_,focusable:i,active:l,children:c.jsx(gr.span,{tabIndex:E?0:-1,"data-orientation":C.orientation,...g,ref:t,onMouseDown:Tn(e.onMouseDown,B=>{i?C.onItemFocus(_):B.preventDefault()}),onFocus:Tn(e.onFocus,()=>C.onItemFocus(_)),onKeyDown:Tn(e.onKeyDown,B=>{if(B.key==="Tab"&&B.shiftKey){C.onItemShiftTab();return}if(B.target!==B.currentTarget)return;const z=XB(B,C.orientation,C.dir);if(z!==void 0){if(B.metaKey||B.ctrlKey||B.altKey||B.shiftKey)return;B.preventDefault();let H=A().filter(W=>W.focusable).map(W=>W.ref.current);if(z==="last")H.reverse();else if(z==="prev"||z==="next"){z==="prev"&&H.reverse();const W=H.indexOf(B.currentTarget);H=C.loop?KB(H,W+1):H.slice(W+1)}setTimeout(()=>iN(H))}}),children:typeof a=="function"?a({isCurrentTabStop:E,hasTabStop:L!=null}):a})})});rN.displayName=nN;var GB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ZB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function XB(e,t,n){const i=ZB(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return GB[i]}function iN(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function KB(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var aN=tN,oN=rN;function YB(e){const t=WB(e),n=k.forwardRef((i,l)=>{const{children:d,...a}=i,g=k.Children.toArray(d),x=g.find(JB);if(x){const _=x.props.children,C=g.map(E=>E===x?k.Children.count(_)>1?k.Children.only(null):k.isValidElement(_)?_.props.children:null:E);return c.jsx(t,{...a,ref:l,children:k.isValidElement(_)?k.cloneElement(_,void 0,C):null})}return c.jsx(t,{...a,ref:l,children:d})});return n.displayName=`${e}.Slot`,n}function WB(e){const t=k.forwardRef((n,i)=>{const{children:l,...d}=n;if(k.isValidElement(l)){const a=tF(l),g=eF(d,l.props);return l.type!==k.Fragment&&(g.ref=i?Pd(i,a):a),k.cloneElement(l,g)}return k.Children.count(l)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var QB=Symbol("radix.slottable");function JB(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QB}function eF(e,t){const n={...t};for(const i in t){const l=e[i],d=t[i];/^on[A-Z]/.test(i)?l&&d?n[i]=(...g)=>{const x=d(...g);return l(...g),x}:l&&(n[i]=l):i==="style"?n[i]={...l,...d}:i==="className"&&(n[i]=[l,d].filter(Boolean).join(" "))}return{...e,...n}}function tF(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var nF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},gm=new WeakMap,Lx=new WeakMap,zx={},j_=0,sN=function(e){return e&&(e.host||sN(e.parentNode))},rF=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=sN(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iF=function(e,t,n,i){var l=rF(t,Array.isArray(e)?e:[e]);zx[n]||(zx[n]=new WeakMap);var d=zx[n],a=[],g=new Set,x=new Set(l),_=function(E){!E||g.has(E)||(g.add(E),_(E.parentNode))};l.forEach(_);var C=function(E){!E||x.has(E)||Array.prototype.forEach.call(E.children,function(A){if(g.has(A))C(A);else try{var D=A.getAttribute(i),I=D!==null&&D!=="false",L=(gm.get(A)||0)+1,B=(d.get(A)||0)+1;gm.set(A,L),d.set(A,B),a.push(A),L===1&&I&&Lx.set(A,!0),B===1&&A.setAttribute(n,"true"),I||A.setAttribute(i,"true")}catch(z){console.error("aria-hidden: cannot operate on ",A,z)}})};return C(t),g.clear(),j_++,function(){a.forEach(function(E){var A=gm.get(E)-1,D=d.get(E)-1;gm.set(E,A),d.set(E,D),A||(Lx.has(E)||E.removeAttribute(i),Lx.delete(E)),D||E.removeAttribute(n)}),j_--,j_||(gm=new WeakMap,gm=new WeakMap,Lx=new WeakMap,zx={})}},u2=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),l=nF(e);return l?(i.push.apply(i,Array.from(l.querySelectorAll("[aria-live], script"))),iF(i,l,n,"aria-hidden")):function(){return null}},fu=function(){return fu=Object.assign||function(t){for(var n,i=1,l=arguments.length;i<l;i++){n=arguments[i];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(t[d]=n[d])}return t},fu.apply(this,arguments)};function lN(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(n[i[l]]=e[i[l]]);return n}function aF(e,t,n){if(n||arguments.length===2)for(var i=0,l=t.length,d;i<l;i++)(d||!(i in t))&&(d||(d=Array.prototype.slice.call(t,0,i)),d[i]=t[i]);return e.concat(d||Array.prototype.slice.call(t))}var l0="right-scroll-bar-position",c0="width-before-scroll-bar",oF="with-scroll-bars-hidden",sF="--removed-body-scroll-bar-size";function A_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function lF(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var l=n.value;l!==i&&(n.value=i,n.callback(i,l))}}}})[0];return n.callback=t,n.facade}var cF=typeof window<"u"?k.useLayoutEffect:k.useEffect,cC=new WeakMap;function uF(e,t){var n=lF(null,function(i){return e.forEach(function(l){return A_(l,i)})});return cF(function(){var i=cC.get(n);if(i){var l=new Set(i),d=new Set(e),a=n.current;l.forEach(function(g){d.has(g)||A_(g,null)}),d.forEach(function(g){l.has(g)||A_(g,a)})}cC.set(n,e)},[e]),n}function dF(e){return e}function hF(e,t){t===void 0&&(t=dF);var n=[],i=!1,l={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(d){var a=t(d,i);return n.push(a),function(){n=n.filter(function(g){return g!==a})}},assignSyncMedium:function(d){for(i=!0;n.length;){var a=n;n=[],a.forEach(d)}n={push:function(g){return d(g)},filter:function(){return n}}},assignMedium:function(d){i=!0;var a=[];if(n.length){var g=n;n=[],g.forEach(d),a=n}var x=function(){var C=a;a=[],C.forEach(d)},_=function(){return Promise.resolve().then(x)};_(),n={push:function(C){a.push(C),_()},filter:function(C){return a=a.filter(C),n}}}};return l}function fF(e){e===void 0&&(e={});var t=hF(null);return t.options=fu({async:!0,ssr:!1},e),t}var cN=function(e){var t=e.sideCar,n=lN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return k.createElement(i,fu({},n))};cN.isSideCarExport=!0;function pF(e,t){return e.useMedium(t),cN}var uN=fF(),N_=function(){},xb=k.forwardRef(function(e,t){var n=k.useRef(null),i=k.useState({onScrollCapture:N_,onWheelCapture:N_,onTouchMoveCapture:N_}),l=i[0],d=i[1],a=e.forwardProps,g=e.children,x=e.className,_=e.removeScrollBar,C=e.enabled,E=e.shards,A=e.sideCar,D=e.noRelative,I=e.noIsolation,L=e.inert,B=e.allowPinchZoom,z=e.as,q=z===void 0?"div":z,H=e.gapMode,W=lN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ne=A,re=uF([n,t]),ee=fu(fu({},W),l);return k.createElement(k.Fragment,null,C&&k.createElement(ne,{sideCar:uN,removeScrollBar:_,shards:E,noRelative:D,noIsolation:I,inert:L,setCallbacks:d,allowPinchZoom:!!B,lockRef:n,gapMode:H}),a?k.cloneElement(k.Children.only(g),fu(fu({},ee),{ref:re})):k.createElement(q,fu({},ee,{className:x,ref:re}),g))});xb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xb.classNames={fullWidth:c0,zeroRight:l0};var mF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mF();return t&&e.setAttribute("nonce",t),e}function yF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function vF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xF=function(){var e=0,t=null;return{add:function(n){e==0&&(t=gF())&&(yF(t,n),vF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},bF=function(){var e=xF();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},dN=function(){var e=bF(),t=function(n){var i=n.styles,l=n.dynamic;return e(i,l),null};return t},_F={left:0,top:0,right:0,gap:0},M_=function(e){return parseInt(e||"",10)||0},wF=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[M_(n),M_(i),M_(l)]},SF=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return _F;var t=wF(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},EF=dN(),jm="data-scroll-locked",CF=function(e,t,n,i){var l=e.left,d=e.top,a=e.right,g=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(oF,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(g,"px ").concat(i,`;
  }
  body[`).concat(jm,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(g,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(g,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(l0,` {
    right: `).concat(g,"px ").concat(i,`;
  }
  
  .`).concat(c0,` {
    margin-right: `).concat(g,"px ").concat(i,`;
  }
  
  .`).concat(l0," .").concat(l0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(c0," .").concat(c0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(jm,`] {
    `).concat(sF,": ").concat(g,`px;
  }
`)},uC=function(){var e=parseInt(document.body.getAttribute(jm)||"0",10);return isFinite(e)?e:0},TF=function(){k.useEffect(function(){return document.body.setAttribute(jm,(uC()+1).toString()),function(){var e=uC()-1;e<=0?document.body.removeAttribute(jm):document.body.setAttribute(jm,e.toString())}},[])},kF=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,l=i===void 0?"margin":i;TF();var d=k.useMemo(function(){return SF(l)},[l]);return k.createElement(EF,{styles:CF(d,!t,l,n?"":"!important")})},I1=!1;if(typeof window<"u")try{var Bx=Object.defineProperty({},"passive",{get:function(){return I1=!0,!0}});window.addEventListener("test",Bx,Bx),window.removeEventListener("test",Bx,Bx)}catch{I1=!1}var ym=I1?{passive:!1}:!1,jF=function(e){return e.tagName==="TEXTAREA"},hN=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jF(e)&&n[t]==="visible")},AF=function(e){return hN(e,"overflowY")},NF=function(e){return hN(e,"overflowX")},dC=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var l=fN(e,i);if(l){var d=pN(e,i),a=d[1],g=d[2];if(a>g)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},MF=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},DF=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},fN=function(e,t){return e==="v"?AF(t):NF(t)},pN=function(e,t){return e==="v"?MF(t):DF(t)},PF=function(e,t){return e==="h"&&t==="rtl"?-1:1},IF=function(e,t,n,i,l){var d=PF(e,window.getComputedStyle(t).direction),a=d*i,g=n.target,x=t.contains(g),_=!1,C=a>0,E=0,A=0;do{if(!g)break;var D=pN(e,g),I=D[0],L=D[1],B=D[2],z=L-B-d*I;(I||z)&&fN(e,g)&&(E+=z,A+=I);var q=g.parentNode;g=q&&q.nodeType===Node.DOCUMENT_FRAGMENT_NODE?q.host:q}while(!x&&g!==document.body||x&&(t.contains(g)||t===g));return(C&&Math.abs(E)<1||!C&&Math.abs(A)<1)&&(_=!0),_},Fx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},hC=function(e){return[e.deltaX,e.deltaY]},fC=function(e){return e&&"current"in e?e.current:e},OF=function(e,t){return e[0]===t[0]&&e[1]===t[1]},RF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},LF=0,vm=[];function zF(e){var t=k.useRef([]),n=k.useRef([0,0]),i=k.useRef(),l=k.useState(LF++)[0],d=k.useState(dN)[0],a=k.useRef(e);k.useEffect(function(){a.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var L=aF([e.lockRef.current],(e.shards||[]).map(fC),!0).filter(Boolean);return L.forEach(function(B){return B.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),L.forEach(function(B){return B.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var g=k.useCallback(function(L,B){if("touches"in L&&L.touches.length===2||L.type==="wheel"&&L.ctrlKey)return!a.current.allowPinchZoom;var z=Fx(L),q=n.current,H="deltaX"in L?L.deltaX:q[0]-z[0],W="deltaY"in L?L.deltaY:q[1]-z[1],ne,re=L.target,ee=Math.abs(H)>Math.abs(W)?"h":"v";if("touches"in L&&ee==="h"&&re.type==="range")return!1;var oe=dC(ee,re);if(!oe)return!0;if(oe?ne=ee:(ne=ee==="v"?"h":"v",oe=dC(ee,re)),!oe)return!1;if(!i.current&&"changedTouches"in L&&(H||W)&&(i.current=ne),!ne)return!0;var he=i.current||ne;return IF(he,B,L,he==="h"?H:W)},[]),x=k.useCallback(function(L){var B=L;if(!(!vm.length||vm[vm.length-1]!==d)){var z="deltaY"in B?hC(B):Fx(B),q=t.current.filter(function(ne){return ne.name===B.type&&(ne.target===B.target||B.target===ne.shadowParent)&&OF(ne.delta,z)})[0];if(q&&q.should){B.cancelable&&B.preventDefault();return}if(!q){var H=(a.current.shards||[]).map(fC).filter(Boolean).filter(function(ne){return ne.contains(B.target)}),W=H.length>0?g(B,H[0]):!a.current.noIsolation;W&&B.cancelable&&B.preventDefault()}}},[]),_=k.useCallback(function(L,B,z,q){var H={name:L,delta:B,target:z,should:q,shadowParent:BF(z)};t.current.push(H),setTimeout(function(){t.current=t.current.filter(function(W){return W!==H})},1)},[]),C=k.useCallback(function(L){n.current=Fx(L),i.current=void 0},[]),E=k.useCallback(function(L){_(L.type,hC(L),L.target,g(L,e.lockRef.current))},[]),A=k.useCallback(function(L){_(L.type,Fx(L),L.target,g(L,e.lockRef.current))},[]);k.useEffect(function(){return vm.push(d),e.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:A}),document.addEventListener("wheel",x,ym),document.addEventListener("touchmove",x,ym),document.addEventListener("touchstart",C,ym),function(){vm=vm.filter(function(L){return L!==d}),document.removeEventListener("wheel",x,ym),document.removeEventListener("touchmove",x,ym),document.removeEventListener("touchstart",C,ym)}},[]);var D=e.removeScrollBar,I=e.inert;return k.createElement(k.Fragment,null,I?k.createElement(d,{styles:RF(l)}):null,D?k.createElement(kF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function BF(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const FF=pF(uN,zF);var bb=k.forwardRef(function(e,t){return k.createElement(xb,fu({},e,{ref:t,sideCar:FF}))});bb.classNames=xb.classNames;var O1=["Enter"," "],UF=["ArrowDown","PageUp","Home"],mN=["ArrowUp","PageDown","End"],VF=[...UF,...mN],qF={ltr:[...O1,"ArrowRight"],rtl:[...O1,"ArrowLeft"]},HF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},wv="Menu",[Fy,$F,GF]=cb(wv),[ip,gN]=Cc(wv,[GF,gb,vb]),_b=gb(),yN=vb(),[ZF,ap]=ip(wv),[XF,Sv]=ip(wv),vN=e=>{const{__scopeMenu:t,open:n=!1,children:i,dir:l,onOpenChange:d,modal:a=!0}=e,g=_b(t),[x,_]=k.useState(null),C=k.useRef(!1),E=wu(d),A=xv(l);return k.useEffect(()=>{const D=()=>{C.current=!0,document.addEventListener("pointerdown",I,{capture:!0,once:!0}),document.addEventListener("pointermove",I,{capture:!0,once:!0})},I=()=>C.current=!1;return document.addEventListener("keydown",D,{capture:!0}),()=>{document.removeEventListener("keydown",D,{capture:!0}),document.removeEventListener("pointerdown",I,{capture:!0}),document.removeEventListener("pointermove",I,{capture:!0})}},[]),c.jsx(YA,{...g,children:c.jsx(ZF,{scope:t,open:n,onOpenChange:E,content:x,onContentChange:_,children:c.jsx(XF,{scope:t,onClose:k.useCallback(()=>E(!1),[E]),isUsingKeyboardRef:C,dir:A,modal:a,children:i})})})};vN.displayName=wv;var KF="MenuAnchor",d2=k.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e,l=_b(n);return c.jsx(WA,{...l,...i,ref:t})});d2.displayName=KF;var h2="MenuPortal",[YF,xN]=ip(h2,{forceMount:void 0}),bN=e=>{const{__scopeMenu:t,forceMount:n,children:i,container:l}=e,d=ap(h2,t);return c.jsx(YF,{scope:t,forceMount:n,children:c.jsx(ju,{present:n||d.open,children:c.jsx(yb,{asChild:!0,container:l,children:i})})})};bN.displayName=h2;var Rl="MenuContent",[WF,f2]=ip(Rl),_N=k.forwardRef((e,t)=>{const n=xN(Rl,e.__scopeMenu),{forceMount:i=n.forceMount,...l}=e,d=ap(Rl,e.__scopeMenu),a=Sv(Rl,e.__scopeMenu);return c.jsx(Fy.Provider,{scope:e.__scopeMenu,children:c.jsx(ju,{present:i||d.open,children:c.jsx(Fy.Slot,{scope:e.__scopeMenu,children:a.modal?c.jsx(QF,{...l,ref:t}):c.jsx(JF,{...l,ref:t})})})})}),QF=k.forwardRef((e,t)=>{const n=ap(Rl,e.__scopeMenu),i=k.useRef(null),l=Vr(t,i);return k.useEffect(()=>{const d=i.current;if(d)return u2(d)},[]),c.jsx(p2,{...e,ref:l,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Tn(e.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),JF=k.forwardRef((e,t)=>{const n=ap(Rl,e.__scopeMenu);return c.jsx(p2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),eU=YB("MenuContent.ScrollLock"),p2=k.forwardRef((e,t)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:l,onOpenAutoFocus:d,onCloseAutoFocus:a,disableOutsidePointerEvents:g,onEntryFocus:x,onEscapeKeyDown:_,onPointerDownOutside:C,onFocusOutside:E,onInteractOutside:A,onDismiss:D,disableOutsideScroll:I,...L}=e,B=ap(Rl,n),z=Sv(Rl,n),q=_b(n),H=yN(n),W=$F(n),[ne,re]=k.useState(null),ee=k.useRef(null),oe=Vr(t,ee,B.onContentChange),he=k.useRef(0),we=k.useRef(""),ye=k.useRef(0),Pe=k.useRef(null),Ke=k.useRef("right"),ze=k.useRef(0),Je=I?bb:k.Fragment,Ae=I?{as:eU,allowPinchZoom:!0}:void 0,De=st=>{const me=we.current+st,Ce=W().filter(We=>!We.disabled),pe=document.activeElement,Q=Ce.find(We=>We.ref.current===pe)?.textValue,Ee=Ce.map(We=>We.textValue),Ge=hU(Ee,me,Q),lt=Ce.find(We=>We.textValue===Ge)?.ref.current;(function We(Nt){we.current=Nt,window.clearTimeout(he.current),Nt!==""&&(he.current=window.setTimeout(()=>We(""),1e3))})(me),lt&&setTimeout(()=>lt.focus())};k.useEffect(()=>()=>window.clearTimeout(he.current),[]),e2();const ke=k.useCallback(st=>Ke.current===Pe.current?.side&&pU(st,Pe.current?.area),[]);return c.jsx(WF,{scope:n,searchRef:we,onItemEnter:k.useCallback(st=>{ke(st)&&st.preventDefault()},[ke]),onItemLeave:k.useCallback(st=>{ke(st)||(ee.current?.focus(),re(null))},[ke]),onTriggerLeave:k.useCallback(st=>{ke(st)&&st.preventDefault()},[ke]),pointerGraceTimerRef:ye,onPointerGraceIntentChange:k.useCallback(st=>{Pe.current=st},[]),children:c.jsx(Je,{...Ae,children:c.jsx(db,{asChild:!0,trapped:l,onMountAutoFocus:Tn(d,st=>{st.preventDefault(),ee.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:c.jsx(ub,{asChild:!0,disableOutsidePointerEvents:g,onEscapeKeyDown:_,onPointerDownOutside:C,onFocusOutside:E,onInteractOutside:A,onDismiss:D,children:c.jsx(aN,{asChild:!0,...H,dir:z.dir,orientation:"vertical",loop:i,currentTabStopId:ne,onCurrentTabStopIdChange:re,onEntryFocus:Tn(x,st=>{z.isUsingKeyboardRef.current||st.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(QA,{role:"menu","aria-orientation":"vertical","data-state":LN(B.open),"data-radix-menu-content":"",dir:z.dir,...q,...L,ref:oe,style:{outline:"none",...L.style},onKeyDown:Tn(L.onKeyDown,st=>{const Ce=st.target.closest("[data-radix-menu-content]")===st.currentTarget,pe=st.ctrlKey||st.altKey||st.metaKey,Q=st.key.length===1;Ce&&(st.key==="Tab"&&st.preventDefault(),!pe&&Q&&De(st.key));const Ee=ee.current;if(st.target!==Ee||!VF.includes(st.key))return;st.preventDefault();const lt=W().filter(We=>!We.disabled).map(We=>We.ref.current);mN.includes(st.key)&&lt.reverse(),uU(lt)}),onBlur:Tn(e.onBlur,st=>{st.currentTarget.contains(st.target)||(window.clearTimeout(he.current),we.current="")}),onPointerMove:Tn(e.onPointerMove,Uy(st=>{const me=st.target,Ce=ze.current!==st.clientX;if(st.currentTarget.contains(me)&&Ce){const pe=st.clientX>ze.current?"right":"left";Ke.current=pe,ze.current=st.clientX}}))})})})})})})});_N.displayName=Rl;var tU="MenuGroup",m2=k.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e;return c.jsx(gr.div,{role:"group",...i,ref:t})});m2.displayName=tU;var nU="MenuLabel",wN=k.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e;return c.jsx(gr.div,{...i,ref:t})});wN.displayName=nU;var T0="MenuItem",pC="menu.itemSelect",wb=k.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:i,...l}=e,d=k.useRef(null),a=Sv(T0,e.__scopeMenu),g=f2(T0,e.__scopeMenu),x=Vr(t,d),_=k.useRef(!1),C=()=>{const E=d.current;if(!n&&E){const A=new CustomEvent(pC,{bubbles:!0,cancelable:!0});E.addEventListener(pC,D=>i?.(D),{once:!0}),CA(E,A),A.defaultPrevented?_.current=!1:a.onClose()}};return c.jsx(SN,{...l,ref:x,disabled:n,onClick:Tn(e.onClick,C),onPointerDown:E=>{e.onPointerDown?.(E),_.current=!0},onPointerUp:Tn(e.onPointerUp,E=>{_.current||E.currentTarget?.click()}),onKeyDown:Tn(e.onKeyDown,E=>{const A=g.searchRef.current!=="";n||A&&E.key===" "||O1.includes(E.key)&&(E.currentTarget.click(),E.preventDefault())})})});wb.displayName=T0;var SN=k.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:i=!1,textValue:l,...d}=e,a=f2(T0,n),g=yN(n),x=k.useRef(null),_=Vr(t,x),[C,E]=k.useState(!1),[A,D]=k.useState("");return k.useEffect(()=>{const I=x.current;I&&D((I.textContent??"").trim())},[d.children]),c.jsx(Fy.ItemSlot,{scope:n,disabled:i,textValue:l??A,children:c.jsx(oN,{asChild:!0,...g,focusable:!i,children:c.jsx(gr.div,{role:"menuitem","data-highlighted":C?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...d,ref:_,onPointerMove:Tn(e.onPointerMove,Uy(I=>{i?a.onItemLeave(I):(a.onItemEnter(I),I.defaultPrevented||I.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Tn(e.onPointerLeave,Uy(I=>a.onItemLeave(I))),onFocus:Tn(e.onFocus,()=>E(!0)),onBlur:Tn(e.onBlur,()=>E(!1))})})})}),rU="MenuCheckboxItem",EN=k.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:i,...l}=e;return c.jsx(AN,{scope:e.__scopeMenu,checked:n,children:c.jsx(wb,{role:"menuitemcheckbox","aria-checked":k0(n)?"mixed":n,...l,ref:t,"data-state":y2(n),onSelect:Tn(l.onSelect,()=>i?.(k0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});EN.displayName=rU;var CN="MenuRadioGroup",[iU,aU]=ip(CN,{value:void 0,onValueChange:()=>{}}),TN=k.forwardRef((e,t)=>{const{value:n,onValueChange:i,...l}=e,d=wu(i);return c.jsx(iU,{scope:e.__scopeMenu,value:n,onValueChange:d,children:c.jsx(m2,{...l,ref:t})})});TN.displayName=CN;var kN="MenuRadioItem",jN=k.forwardRef((e,t)=>{const{value:n,...i}=e,l=aU(kN,e.__scopeMenu),d=n===l.value;return c.jsx(AN,{scope:e.__scopeMenu,checked:d,children:c.jsx(wb,{role:"menuitemradio","aria-checked":d,...i,ref:t,"data-state":y2(d),onSelect:Tn(i.onSelect,()=>l.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});jN.displayName=kN;var g2="MenuItemIndicator",[AN,oU]=ip(g2,{checked:!1}),NN=k.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:i,...l}=e,d=oU(g2,n);return c.jsx(ju,{present:i||k0(d.checked)||d.checked===!0,children:c.jsx(gr.span,{...l,ref:t,"data-state":y2(d.checked)})})});NN.displayName=g2;var sU="MenuSeparator",MN=k.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e;return c.jsx(gr.div,{role:"separator","aria-orientation":"horizontal",...i,ref:t})});MN.displayName=sU;var lU="MenuArrow",DN=k.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e,l=_b(n);return c.jsx(JA,{...l,...i,ref:t})});DN.displayName=lU;var cU="MenuSub",[bte,PN]=ip(cU),by="MenuSubTrigger",IN=k.forwardRef((e,t)=>{const n=ap(by,e.__scopeMenu),i=Sv(by,e.__scopeMenu),l=PN(by,e.__scopeMenu),d=f2(by,e.__scopeMenu),a=k.useRef(null),{pointerGraceTimerRef:g,onPointerGraceIntentChange:x}=d,_={__scopeMenu:e.__scopeMenu},C=k.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return k.useEffect(()=>C,[C]),k.useEffect(()=>{const E=g.current;return()=>{window.clearTimeout(E),x(null)}},[g,x]),c.jsx(d2,{asChild:!0,..._,children:c.jsx(SN,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":l.contentId,"data-state":LN(n.open),...e,ref:Pd(t,l.onTriggerChange),onClick:E=>{e.onClick?.(E),!(e.disabled||E.defaultPrevented)&&(E.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Tn(e.onPointerMove,Uy(E=>{d.onItemEnter(E),!E.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(d.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),C()},100))})),onPointerLeave:Tn(e.onPointerLeave,Uy(E=>{C();const A=n.content?.getBoundingClientRect();if(A){const D=n.content?.dataset.side,I=D==="right",L=I?-5:5,B=A[I?"left":"right"],z=A[I?"right":"left"];d.onPointerGraceIntentChange({area:[{x:E.clientX+L,y:E.clientY},{x:B,y:A.top},{x:z,y:A.top},{x:z,y:A.bottom},{x:B,y:A.bottom}],side:D}),window.clearTimeout(g.current),g.current=window.setTimeout(()=>d.onPointerGraceIntentChange(null),300)}else{if(d.onTriggerLeave(E),E.defaultPrevented)return;d.onPointerGraceIntentChange(null)}})),onKeyDown:Tn(e.onKeyDown,E=>{const A=d.searchRef.current!=="";e.disabled||A&&E.key===" "||qF[i.dir].includes(E.key)&&(n.onOpenChange(!0),n.content?.focus(),E.preventDefault())})})})});IN.displayName=by;var ON="MenuSubContent",RN=k.forwardRef((e,t)=>{const n=xN(Rl,e.__scopeMenu),{forceMount:i=n.forceMount,...l}=e,d=ap(Rl,e.__scopeMenu),a=Sv(Rl,e.__scopeMenu),g=PN(ON,e.__scopeMenu),x=k.useRef(null),_=Vr(t,x);return c.jsx(Fy.Provider,{scope:e.__scopeMenu,children:c.jsx(ju,{present:i||d.open,children:c.jsx(Fy.Slot,{scope:e.__scopeMenu,children:c.jsx(p2,{id:g.contentId,"aria-labelledby":g.triggerId,...l,ref:_,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:C=>{a.isUsingKeyboardRef.current&&x.current?.focus(),C.preventDefault()},onCloseAutoFocus:C=>C.preventDefault(),onFocusOutside:Tn(e.onFocusOutside,C=>{C.target!==g.trigger&&d.onOpenChange(!1)}),onEscapeKeyDown:Tn(e.onEscapeKeyDown,C=>{a.onClose(),C.preventDefault()}),onKeyDown:Tn(e.onKeyDown,C=>{const E=C.currentTarget.contains(C.target),A=HF[a.dir].includes(C.key);E&&A&&(d.onOpenChange(!1),g.trigger?.focus(),C.preventDefault())})})})})})});RN.displayName=ON;function LN(e){return e?"open":"closed"}function k0(e){return e==="indeterminate"}function y2(e){return k0(e)?"indeterminate":e?"checked":"unchecked"}function uU(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function dU(e,t){return e.map((n,i)=>e[(t+i)%e.length])}function hU(e,t,n){const l=t.length>1&&Array.from(t).every(_=>_===t[0])?t[0]:t,d=n?e.indexOf(n):-1;let a=dU(e,Math.max(d,0));l.length===1&&(a=a.filter(_=>_!==n));const x=a.find(_=>_.toLowerCase().startsWith(l.toLowerCase()));return x!==n?x:void 0}function fU(e,t){const{x:n,y:i}=e;let l=!1;for(let d=0,a=t.length-1;d<t.length;a=d++){const g=t[d],x=t[a],_=g.x,C=g.y,E=x.x,A=x.y;C>i!=A>i&&n<(E-_)*(i-C)/(A-C)+_&&(l=!l)}return l}function pU(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return fU(n,t)}function Uy(e){return t=>t.pointerType==="mouse"?e(t):void 0}var mU=vN,gU=d2,yU=bN,vU=_N,xU=m2,bU=wN,_U=wb,wU=EN,SU=TN,EU=jN,CU=NN,TU=MN,kU=DN,jU=IN,AU=RN,Sb="DropdownMenu",[NU]=Cc(Sb,[gN]),_s=gN(),[MU,zN]=NU(Sb),BN=e=>{const{__scopeDropdownMenu:t,children:n,dir:i,open:l,defaultOpen:d,onOpenChange:a,modal:g=!0}=e,x=_s(t),_=k.useRef(null),[C,E]=zh({prop:l,defaultProp:d??!1,onChange:a,caller:Sb});return c.jsx(MU,{scope:t,triggerId:gu(),triggerRef:_,contentId:gu(),open:C,onOpenChange:E,onOpenToggle:k.useCallback(()=>E(A=>!A),[E]),modal:g,children:c.jsx(mU,{...x,open:C,onOpenChange:E,dir:i,modal:g,children:n})})};BN.displayName=Sb;var FN="DropdownMenuTrigger",UN=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...l}=e,d=zN(FN,n),a=_s(n);return c.jsx(gU,{asChild:!0,...a,children:c.jsx(gr.button,{type:"button",id:d.triggerId,"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":d.open?d.contentId:void 0,"data-state":d.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...l,ref:Pd(t,d.triggerRef),onPointerDown:Tn(e.onPointerDown,g=>{!i&&g.button===0&&g.ctrlKey===!1&&(d.onOpenToggle(),d.open||g.preventDefault())}),onKeyDown:Tn(e.onKeyDown,g=>{i||(["Enter"," "].includes(g.key)&&d.onOpenToggle(),g.key==="ArrowDown"&&d.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(g.key)&&g.preventDefault())})})})});UN.displayName=FN;var DU="DropdownMenuPortal",VN=e=>{const{__scopeDropdownMenu:t,...n}=e,i=_s(t);return c.jsx(yU,{...i,...n})};VN.displayName=DU;var qN="DropdownMenuContent",HN=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=zN(qN,n),d=_s(n),a=k.useRef(!1);return c.jsx(vU,{id:l.contentId,"aria-labelledby":l.triggerId,...d,...i,ref:t,onCloseAutoFocus:Tn(e.onCloseAutoFocus,g=>{a.current||l.triggerRef.current?.focus(),a.current=!1,g.preventDefault()}),onInteractOutside:Tn(e.onInteractOutside,g=>{const x=g.detail.originalEvent,_=x.button===0&&x.ctrlKey===!0,C=x.button===2||_;(!l.modal||C)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HN.displayName=qN;var PU="DropdownMenuGroup",IU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(xU,{...l,...i,ref:t})});IU.displayName=PU;var OU="DropdownMenuLabel",RU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(bU,{...l,...i,ref:t})});RU.displayName=OU;var LU="DropdownMenuItem",$N=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(_U,{...l,...i,ref:t})});$N.displayName=LU;var zU="DropdownMenuCheckboxItem",BU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(wU,{...l,...i,ref:t})});BU.displayName=zU;var FU="DropdownMenuRadioGroup",UU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(SU,{...l,...i,ref:t})});UU.displayName=FU;var VU="DropdownMenuRadioItem",qU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(EU,{...l,...i,ref:t})});qU.displayName=VU;var HU="DropdownMenuItemIndicator",$U=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(CU,{...l,...i,ref:t})});$U.displayName=HU;var GU="DropdownMenuSeparator",GN=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(TU,{...l,...i,ref:t})});GN.displayName=GU;var ZU="DropdownMenuArrow",XU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(kU,{...l,...i,ref:t})});XU.displayName=ZU;var KU="DropdownMenuSubTrigger",YU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(jU,{...l,...i,ref:t})});YU.displayName=KU;var WU="DropdownMenuSubContent",QU=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,l=_s(n);return c.jsx(AU,{...l,...i,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QU.displayName=WU;var JU=BN,eV=UN,tV=VN,nV=HN,rV=$N,iV=GN;function mC({...e}){return c.jsx(JU,{"data-slot":"dropdown-menu",...e})}function gC({className:e,...t}){return c.jsx(eV,{"data-slot":"dropdown-menu-trigger",className:Kt("focus:outline-none focus-visible:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0",e),...t})}function yC({className:e,sideOffset:t=4,...n}){return c.jsx(tV,{children:c.jsx(nV,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Kt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function ms({className:e,inset:t,variant:n="default",...i}){return c.jsx(rV,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Kt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 transition-colors duration-150",e),...i})}function Ux({className:e,...t}){return c.jsx(iV,{"data-slot":"dropdown-menu-separator",className:Kt("bg-border -mx-1 my-1 h-px",e),...t})}const Jm=rb()(Jw(e=>({latitude:0,longitude:0,area:0,propertyType:"",address_district:"",setEstimationData:t=>e(n=>({...n,...t})),clearEstimationData:()=>e({latitude:0,longitude:0,area:0,propertyType:"",address_district:"",legal_status:void 0,house_direction:void 0,balcony_direction:void 0,furniture_status:void 0,num_bedrooms:void 0,num_bathrooms:void 0,num_floors:void 0,facade_width_m:void 0,road_width_m:void 0})}),{name:"estimation-store"})),aV=()=>{const e=Ta(),t=Li(_=>_.isLoggedIn),n=Li(_=>_.logout),i=Li(_=>_.avatarUrl),l=Li(_=>_.clearUserInfo),{clearEstimationData:d}=Jm(),a=[{label:"Mua nh",path:"/mua-nha",icon:c.jsx(Gf,{className:"w-4 h-4"})},{label:"Thu nh",path:"/thue-nha",icon:c.jsx($w,{className:"w-4 h-4"})}],g=t?[...a,{label:"nh gi nh",path:"/dinh-gia-nha/dia-chi",icon:c.jsx(h5,{className:"w-4 h-4"})},{label:"ng tin",path:"/dang-tin",icon:c.jsx(wE,{className:"w-4 h-4"})}]:a,x=()=>{n(),l(),d(),e("/"),mn.success("ng xut thnh cng!")};return c.jsx("header",{className:"sticky top-0 z-50 w-full bg-white shadow",children:c.jsx("div",{className:"container mx-auto px-4",children:c.jsxs("div",{className:"flex items-center justify-between h-16",children:[c.jsx(wi,{to:"/",className:"flex-shrink-0 cursor-pointer",children:c.jsx("img",{src:R6,alt:"TimNha",className:"h-8 w-auto"})}),c.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[g.map(_=>c.jsx(wi,{to:_.path,className:"text-gray-700 hover:text-[#008DDA] transition-colors font-semibold flex items-center gap-2",children:_.label},_.path)),c.jsx("div",{className:"pl-6",children:t?c.jsxs(mC,{children:[c.jsx(gC,{asChild:!0,className:"cursor-pointer",children:c.jsx("button",{className:"p-1 rounded-full overflow-hidden border-2 border-transparent hover:border-[#008DDA] transition-colors",children:i?c.jsx("img",{src:i,alt:"User avatar",className:"h-8 w-8 rounded-full object-cover"}):c.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-400",children:c.jsx(dv,{className:"w-5 h-5 text-gray-400"})})})}),c.jsxs(yC,{align:"end",className:"w-56",children:[c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/tin-dang",className:"w-full flex items-center gap-2",children:[c.jsx(Oy,{className:"w-4 h-4"}),"Qun l tin ng"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/tin-yeu-thich",className:"w-full flex items-center gap-2",children:[c.jsx(bc,{className:"w-4 h-4"}),"Tin yu thch"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/dinh-gia-nha/lich-su",className:"w-full flex items-center gap-2",children:[c.jsx(y1,{className:"w-4 h-4"}),"Lch s nh gi"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/thong-tin-ca-nhan",className:"w-full flex items-center gap-2",children:[c.jsx(v_,{className:"w-4 h-4"}),"Thng tin c nhn"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/doi-mat-khau",className:"w-full flex items-center gap-2",children:[c.jsx(v1,{className:"w-4 h-4"}),"i mt khu"]})}),c.jsx(Ux,{}),c.jsxs(ms,{onClick:x,variant:"destructive",className:"cursor-pointer hover:bg-red-600 hover:text-white focus:bg-red-600 focus:text-white flex items-center gap-2",children:[c.jsx(x1,{className:"w-4 h-4"}),"ng xut"]})]})]}):c.jsxs("div",{className:"flex items-center",children:[c.jsx(wi,{to:"/dang-nhap",className:"text-gray-700 hover:text-[#008DDA] transition-colors font-semibold flex items-center gap-2",children:"ng nhp"}),c.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),c.jsx(wi,{to:"/dang-ky",className:"text-gray-700 hover:text-[#008DDA] transition-colors font-semibold flex items-center gap-2",children:"ng k"})]})})]}),c.jsx("div",{className:"md:hidden",children:c.jsxs(mC,{children:[c.jsx(gC,{asChild:!0,children:c.jsx("button",{className:"p-2 cursor-pointer",children:c.jsx(f3,{className:"h-6 w-6 text-gray-700"})})}),c.jsxs(yC,{align:"end",className:"w-48",children:[g.map(_=>c.jsx(ms,{asChild:!0,children:c.jsxs(wi,{to:_.path,className:"w-full cursor-pointer flex items-center gap-2",children:[_.icon,_.label]})},_.path)),t?c.jsxs(c.Fragment,{children:[c.jsx(Ux,{}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/tin-dang",className:"w-full flex items-center gap-2",children:[c.jsx(Oy,{className:"w-4 h-4"}),"Qun l tin ng"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/tin-yeu-thich",className:"w-full flex items-center gap-2",children:[c.jsx(bc,{className:"w-4 h-4"}),"Tin yu thch"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/dinh-gia-nha/lich-su",className:"w-full flex items-center gap-2",children:[c.jsx(y1,{className:"w-4 h-4"}),"Lch s nh gi"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/thong-tin-ca-nhan",className:"w-full flex items-center gap-2",children:[c.jsx(v_,{className:"w-4 h-4"}),"Thng tin c nhn"]})}),c.jsx(ms,{asChild:!0,className:"cursor-pointer",children:c.jsxs(wi,{to:"/doi-mat-khau",className:"w-full flex items-center gap-2",children:[c.jsx(v1,{className:"w-4 h-4"}),"i mt khu"]})}),c.jsx(Ux,{}),c.jsxs(ms,{onClick:x,variant:"destructive",className:"cursor-pointer flex items-center gap-2",children:[c.jsx(x1,{className:"w-4 h-4"}),"ng xut"]})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ux,{}),c.jsx(ms,{asChild:!0,children:c.jsxs(wi,{to:"/dang-nhap",className:"w-full flex items-center gap-2",children:[c.jsx(v_,{className:"w-4 h-4"}),"ng nhp"]})}),c.jsx(ms,{asChild:!0,children:c.jsxs(wi,{to:"/dang-ky",className:"w-full flex items-center gap-2",children:[c.jsx(wE,{className:"w-4 h-4"}),"ng k"]})})]})]})]})})]})})})},oV="/assets/timnha-portrait-BAGevCSe.png",ZN=()=>c.jsxs("footer",{className:"bg-white border-t",children:[c.jsx("div",{className:"container mx-auto px-4 py-12",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[c.jsx("div",{className:"md:w-[30%] flex flex-col items-center md:items-start space-y-4",children:c.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[c.jsx("img",{src:oV,alt:"TimNha",className:"h-32 w-auto"}),c.jsx("p",{className:"text-[#4DB8F0] font-medium text-lg text-center md:text-left",children:"Tm ng nh, sng ng cch"}),c.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[c.jsx("a",{href:"#",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:c.jsx(z5,{className:"w-6 h-6"})}),c.jsx("a",{href:"#",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:c.jsx(Y5,{className:"w-6 h-6"})}),c.jsx("a",{href:"#",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:c.jsx(nL,{className:"w-6 h-6"})})]})]})}),c.jsxs("div",{className:"md:w-[70%] grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"space-y-5",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hng Dn"}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsx(wi,{to:"/ve-chung-toi",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"V chng ti"})}),c.jsx("li",{children:c.jsx(wi,{to:"/cau-hoi-thuong-gap",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"Cu hi thng gp"})}),c.jsx("li",{children:c.jsx(wi,{to:"/gop-y-bao-loi",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"Gp  bo li"})}),c.jsx("li",{children:c.jsx(wi,{to:"/chi-so-song",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"Ch s sng"})})]})]}),c.jsxs("div",{className:"space-y-5",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quy nh"}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsx(wi,{to:"/dieu-khoan-su-dung",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"iu khon s dng"})}),c.jsx("li",{children:c.jsx(wi,{to:"/quy-che-hoat-dong",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"Quy ch hot ng"})}),c.jsx("li",{children:c.jsx(wi,{to:"/chinh-sach-bao-mat",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"Chnh sch bo mt"})}),c.jsx("li",{children:c.jsx(wi,{to:"/quy-dinh-dang-tin",className:"text-gray-600 hover:text-[#008DDA] transition-colors",children:"Quy nh ng tin"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lin h"}),c.jsxs("div",{className:"space-y-3 text-gray-600",children:[c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(Uj,{className:"w-4 h-4 flex-shrink-0"}),c.jsx("span",{children:"0123456789"})]}),c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(l3,{className:"w-4 h-4 flex-shrink-0"}),c.jsx("span",{children:"support@timnha.com"})]}),c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(bs,{className:"w-4 h-4 flex-shrink-0"}),c.jsx("span",{children:"12/34 Minh Phng, P.3, Q.11, TP.HCM"})]}),c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(g1,{className:"w-4 h-4 flex-shrink-0"}),c.jsx("span",{children:"8:00 - 17:30 (Th 2 - Th 6)"})]})]})]})]})]})}),c.jsx("div",{className:"border-t",children:c.jsx("div",{className:"container mx-auto px-4 py-4",children:c.jsxs("p",{className:"text-center text-gray-600 text-sm",children:[" ",new Date().getFullYear()," timnha - Nn tng tm kim v gi  bt ng sn da trn Ch s sng. All rights reserved."]})})})]}),Wi=rb((e,t)=>({isOpen:!1,isTyping:!1,streamingMessageId:null,currentContext:"general",contextMetadata:{},generalMessages:[],insightMessages:[],predictionMessages:[],checkTokenExpired:null,setIsOpen:n=>e({isOpen:n}),toggleChat:()=>e(n=>({isOpen:!n.isOpen})),setIsTyping:n=>e({isTyping:n}),setStreamingMessageId:n=>e({streamingMessageId:n}),setCheckTokenExpired:n=>e({checkTokenExpired:n}),setContext:(n,i={})=>e({currentContext:n,contextMetadata:i}),addMessage:(n,i)=>{const l=i||t().currentContext;e(d=>{switch(l){case"general":return{generalMessages:[...d.generalMessages,n]};case"insight":return{insightMessages:[...d.insightMessages,n]};case"prediction":return{predictionMessages:[...d.predictionMessages,n]};default:return d}})},setMessages:(n,i)=>{const l=i||t().currentContext;e(d=>{switch(l){case"general":return{generalMessages:n};case"insight":return{insightMessages:n};case"prediction":return{predictionMessages:n};default:return d}})},clearMessages:n=>{const i=n||t().currentContext;e(l=>{switch(i){case"general":return{generalMessages:[]};case"insight":return{insightMessages:[]};case"prediction":return{predictionMessages:[]};default:return l}})},getCurrentMessages:()=>{const n=t();switch(n.currentContext){case"general":return n.generalMessages;case"insight":return n.insightMessages;case"prediction":return n.predictionMessages;default:return[]}},resetChat:()=>e({currentContext:"general",contextMetadata:{},generalMessages:[],insightMessages:[],predictionMessages:[],isTyping:!1,streamingMessageId:null})}));function XN(){const e=Li(E=>E.token),t=Li(E=>E.logout),n=Wi(E=>E.setIsOpen),i=Jm(E=>E.clearEstimationData),l=Ta(),d=Zs(),[a,g]=k.useState(!1);k.useEffect(()=>{if(!e)return;const E=VE(e);if(!E?.exp)return;const A=Date.now()/1e3;E.exp<A&&!a&&g(!0)},[e,d.pathname,a]);const x=k.useCallback(()=>{if(!e)return!1;const E=VE(e);if(!E?.exp)return!1;const A=Date.now()/1e3,D=E.exp<A;return D&&g(!0),D},[e]);return{showExpiredDialog:a,handleLoginRedirect:()=>{t(),i(),g(!1),n(!1),l("/dang-nhap",{replace:!0})},handleHomeRedirect:()=>{t(),i(),g(!1),n(!1),l("/",{replace:!0})},checkTokenExpired:x}}function sV(e){const t=lV(e),n=k.forwardRef((i,l)=>{const{children:d,...a}=i,g=k.Children.toArray(d),x=g.find(uV);if(x){const _=x.props.children,C=g.map(E=>E===x?k.Children.count(_)>1?k.Children.only(null):k.isValidElement(_)?_.props.children:null:E);return c.jsx(t,{...a,ref:l,children:k.isValidElement(_)?k.cloneElement(_,void 0,C):null})}return c.jsx(t,{...a,ref:l,children:d})});return n.displayName=`${e}.Slot`,n}function lV(e){const t=k.forwardRef((n,i)=>{const{children:l,...d}=n;if(k.isValidElement(l)){const a=hV(l),g=dV(d,l.props);return l.type!==k.Fragment&&(g.ref=i?Pd(i,a):a),k.cloneElement(l,g)}return k.Children.count(l)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var cV=Symbol("radix.slottable");function uV(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cV}function dV(e,t){const n={...t};for(const i in t){const l=e[i],d=t[i];/^on[A-Z]/.test(i)?l&&d?n[i]=(...g)=>{const x=d(...g);return l(...g),x}:l&&(n[i]=l):i==="style"?n[i]={...l,...d}:i==="className"&&(n[i]=[l,d].filter(Boolean).join(" "))}return{...e,...n}}function hV(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Eb="Dialog",[KN,YN]=Cc(Eb),[fV,Tc]=KN(Eb),WN=e=>{const{__scopeDialog:t,children:n,open:i,defaultOpen:l,onOpenChange:d,modal:a=!0}=e,g=k.useRef(null),x=k.useRef(null),[_,C]=zh({prop:i,defaultProp:l??!1,onChange:d,caller:Eb});return c.jsx(fV,{scope:t,triggerRef:g,contentRef:x,contentId:gu(),titleId:gu(),descriptionId:gu(),open:_,onOpenChange:C,onOpenToggle:k.useCallback(()=>C(E=>!E),[C]),modal:a,children:n})};WN.displayName=Eb;var QN="DialogTrigger",JN=k.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,l=Tc(QN,n),d=Vr(t,l.triggerRef);return c.jsx(gr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":b2(l.open),...i,ref:d,onClick:Tn(e.onClick,l.onOpenToggle)})});JN.displayName=QN;var v2="DialogPortal",[pV,eM]=KN(v2,{forceMount:void 0}),tM=e=>{const{__scopeDialog:t,forceMount:n,children:i,container:l}=e,d=Tc(v2,t);return c.jsx(pV,{scope:t,forceMount:n,children:k.Children.map(i,a=>c.jsx(ju,{present:n||d.open,children:c.jsx(yb,{asChild:!0,container:l,children:a})}))})};tM.displayName=v2;var j0="DialogOverlay",nM=k.forwardRef((e,t)=>{const n=eM(j0,e.__scopeDialog),{forceMount:i=n.forceMount,...l}=e,d=Tc(j0,e.__scopeDialog);return d.modal?c.jsx(ju,{present:i||d.open,children:c.jsx(gV,{...l,ref:t})}):null});nM.displayName=j0;var mV=sV("DialogOverlay.RemoveScroll"),gV=k.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,l=Tc(j0,n);return c.jsx(bb,{as:mV,allowPinchZoom:!0,shards:[l.contentRef],children:c.jsx(gr.div,{"data-state":b2(l.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),Wf="DialogContent",rM=k.forwardRef((e,t)=>{const n=eM(Wf,e.__scopeDialog),{forceMount:i=n.forceMount,...l}=e,d=Tc(Wf,e.__scopeDialog);return c.jsx(ju,{present:i||d.open,children:d.modal?c.jsx(yV,{...l,ref:t}):c.jsx(vV,{...l,ref:t})})});rM.displayName=Wf;var yV=k.forwardRef((e,t)=>{const n=Tc(Wf,e.__scopeDialog),i=k.useRef(null),l=Vr(t,n.contentRef,i);return k.useEffect(()=>{const d=i.current;if(d)return u2(d)},[]),c.jsx(iM,{...e,ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Tn(e.onCloseAutoFocus,d=>{d.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Tn(e.onPointerDownOutside,d=>{const a=d.detail.originalEvent,g=a.button===0&&a.ctrlKey===!0;(a.button===2||g)&&d.preventDefault()}),onFocusOutside:Tn(e.onFocusOutside,d=>d.preventDefault())})}),vV=k.forwardRef((e,t)=>{const n=Tc(Wf,e.__scopeDialog),i=k.useRef(!1),l=k.useRef(!1);return c.jsx(iM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{e.onCloseAutoFocus?.(d),d.defaultPrevented||(i.current||n.triggerRef.current?.focus(),d.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:d=>{e.onInteractOutside?.(d),d.defaultPrevented||(i.current=!0,d.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const a=d.target;n.triggerRef.current?.contains(a)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&l.current&&d.preventDefault()}})}),iM=k.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:d,...a}=e,g=Tc(Wf,n),x=k.useRef(null),_=Vr(t,x);return e2(),c.jsxs(c.Fragment,{children:[c.jsx(db,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:d,children:c.jsx(ub,{role:"dialog",id:g.contentId,"aria-describedby":g.descriptionId,"aria-labelledby":g.titleId,"data-state":b2(g.open),...a,ref:_,onDismiss:()=>g.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(bV,{titleId:g.titleId}),c.jsx(wV,{contentRef:x,descriptionId:g.descriptionId})]})]})}),x2="DialogTitle",aM=k.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,l=Tc(x2,n);return c.jsx(gr.h2,{id:l.titleId,...i,ref:t})});aM.displayName=x2;var oM="DialogDescription",sM=k.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,l=Tc(oM,n);return c.jsx(gr.p,{id:l.descriptionId,...i,ref:t})});sM.displayName=oM;var lM="DialogClose",cM=k.forwardRef((e,t)=>{const{__scopeDialog:n,...i}=e,l=Tc(lM,n);return c.jsx(gr.button,{type:"button",...i,ref:t,onClick:Tn(e.onClick,()=>l.onOpenChange(!1))})});cM.displayName=lM;function b2(e){return e?"open":"closed"}var uM="DialogTitleWarning",[xV,dM]=L6(uM,{contentName:Wf,titleName:x2,docsSlug:"dialog"}),bV=({titleId:e})=>{const t=dM(uM),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return k.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},_V="DialogDescriptionWarning",wV=({contentRef:e,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dM(_V).contentName}}.`;return k.useEffect(()=>{const l=e.current?.getAttribute("aria-describedby");t&&l&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},hM=WN,SV=JN,fM=tM,pM=nM,mM=rM,gM=aM,yM=sM,_2=cM;function EV({...e}){return c.jsx(hM,{"data-slot":"dialog",...e})}function CV({...e}){return c.jsx(fM,{"data-slot":"dialog-portal",...e})}function TV({className:e,...t}){return c.jsx(pM,{"data-slot":"dialog-overlay",className:Kt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function kV({className:e,children:t,showCloseButton:n=!0,...i}){return c.jsxs(CV,{"data-slot":"dialog-portal",children:[c.jsx(TV,{}),c.jsxs(mM,{"data-slot":"dialog-content",className:Kt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...i,children:[t,n&&c.jsxs(_2,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(Zf,{}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function jV({className:e,...t}){return c.jsx("div",{"data-slot":"dialog-header",className:Kt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function AV({className:e,...t}){return c.jsx("div",{"data-slot":"dialog-footer",className:Kt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function NV({className:e,...t}){return c.jsx(gM,{"data-slot":"dialog-title",className:Kt("text-lg leading-none font-semibold",e),...t})}function MV({className:e,...t}){return c.jsx(yM,{"data-slot":"dialog-description",className:Kt("text-muted-foreground text-sm",e),...t})}function vM({open:e,onLoginRedirect:t,onHomeRedirect:n}){return c.jsx(EV,{open:e,onOpenChange:()=>{},modal:!0,children:c.jsxs(kV,{showCloseButton:!1,onPointerDownOutside:i=>i.preventDefault(),onInteractOutside:i=>i.preventDefault(),onEscapeKeyDown:i=>i.preventDefault(),className:"sm:max-w-md",children:[c.jsxs(jV,{children:[c.jsx(NV,{className:"text-center",children:"Phin ng nhp ht hn"}),c.jsx(MV,{className:"text-center",children:"Phin ng nhp ca bn  ht hn. Vui lng ng nhp li  tip tc s dng."})]}),c.jsxs(AV,{className:"sm:justify-center",children:[c.jsx(Nr,{onClick:n,variant:"outline",className:"w-full lg:min-w-[160px] sm:w-auto cursor-pointer",children:"Quay v trang ch"}),c.jsx(Nr,{onClick:t,className:"w-full lg:min-w-[160px] sm:w-auto bg-[#008DDA] hover:bg-[#0077b6] cursor-pointer",children:"ng nhp"})]})]})})}function DV({isOpen:e,onClick:t}){return c.jsxs("div",{className:"fixed bottom-20 right-6 sm:bottom-6 z-50",children:[!e&&c.jsx("div",{className:"absolute inset-0 rounded-full bg-[#008DDA] animate-ping opacity-20"}),!e&&c.jsx("div",{className:"absolute inset-0 rounded-full blur-xl opacity-50 animate-pulse",style:{backgroundColor:"#008DDA"}}),c.jsx(Nr,{onClick:t,className:"relative cursor-pointer h-16 w-16 rounded-full shadow-2xl transition-all duration-500 hover:scale-110 hover:shadow-[0_0_30px_rgba(0,141,218,0.6)] group",style:{backgroundColor:e?"#0064A6":"#008DDA",background:e?"#0064A6":"linear-gradient(135deg, #008DDA 0%, #0064A6 100%)"},onMouseEnter:n=>{e||(n.currentTarget.style.background="linear-gradient(135deg, #0064A6 0%, #004d7a 100%)")},onMouseLeave:n=>{e||(n.currentTarget.style.background="linear-gradient(135deg, #008DDA 0%, #0064A6 100%)")},children:c.jsx("div",{className:Kt("transition-all duration-500",e?"rotate-90 scale-110":"rotate-0 scale-100"),children:e?c.jsx(Zf,{className:"h-10 w-10 text-white transition-transform duration-300 group-hover:rotate-90"}):c.jsx(W0,{className:"h-10 w-10 text-white transition-transform duration-300 group-hover:scale-110"})})})]})}const w2=()=>{const e=Wi(_=>_.currentContext),t=Wi(_=>_.contextMetadata),n=Wi(_=>_.setContext),i=Wi(_=>_.clearMessages),l=Wi(_=>_.checkTokenExpired),d=k.useCallback(()=>{l&&l()||(n("general",{}),i("general"))},[n,i,l]),a=k.useCallback(_=>{l&&l()||(n("insight",{propertyId:_}),i("insight"))},[n,i,l]),g=k.useCallback(_=>{l&&l()||(n("prediction",{predictionId:_}),i("prediction"))},[n,i,l]),x=k.useCallback((_,C)=>{l&&l()||(n(_,C),i(_))},[n,i,l]);return{currentContext:e,contextMetadata:t,switchToGeneral:d,switchToInsight:a,switchToPrediction:g,switchContext:x}},Cb=async({url:e,method:t="POST",payload:n,headers:i,onMessage:l,onDone:d,onError:a})=>{const g=Li.getState().token;try{const x=await fetch(e,{method:t,headers:{...n&&t!=="GET"?{"Content-Type":"application/json"}:{},...g?{Authorization:`Bearer ${g}`}:{},...i},...t!=="GET"&&n?{body:JSON.stringify(n)}:{}});if(!x.ok)throw new Error(`Stream request failed: ${x.status}`);if(!x.body)throw new Error("Response body is not readable (no stream)");const _=x.body.getReader(),C=new TextDecoder("utf-8");let E="";for(;;){const{value:A,done:D}=await _.read();if(D)break;E+=C.decode(A,{stream:!0});const I=E.split(`
`);E=I.pop()||"";for(const L of I)if(L.trim())try{const B=JSON.parse(L);l(B)}catch(B){throw console.error("Failed to parse stream chunk:",L),B}}d?.()}catch(x){a?.(x)}},PV=async(e,t,n,i)=>{await Cb({url:"https://kltn-api-staging.sonata.io.vn/api/v1/recommendation/chat/general/stream",method:"POST",payload:e,onMessage:t,onDone:n,onError:i})},IV=async(e,t,n,i)=>{await Cb({url:"https://kltn-api-staging.sonata.io.vn/api/v1/recommendation/prediction/property/chat/stream",method:"POST",payload:e,onMessage:t,onDone:n,onError:i})},OV=async(e,t,n,i)=>{await Cb({url:"https://kltn-api-staging.sonata.io.vn/api/v1/recommendation/insight/chat/stream",method:"POST",payload:e,onMessage:t,onDone:n,onError:i})},RV=async(e,t,n,i)=>{const l={url:`https://kltn-api-staging.sonata.io.vn/api/v1/recommendation/insight/analyze/stream/${e}`,method:"GET",onMessage:t,onDone:n,onError:i};await Cb(l)},LV=async()=>(await zi.get("recommendation/chat/general/history")).data,zV=async e=>(await zi.get(`recommendation/prediction/property/chat/history/${e}`)).data,BV=async e=>(await zi.get(`recommendation/insight/chat/history/${e}`)).data,op=e=>{if(e>=1e9){const t=e/1e9;return t%1===0?`${t} t`:`${t.toFixed(1)} t`}if(e>=1e6){const t=e/1e6;return t%1===0?`${t} triu`:`${t.toFixed(1)} triu`}if(e>=1e3){const t=e/1e3;return t%1===0?`${t} nghn`:`${t.toFixed(1)} nghn`}return`${e}`},xM=e=>{if(!e)return"";const t=new Date(e),i=Math.floor((new Date().getTime()-t.getTime())/1e3);return i<60?"Va xong":i<3600?`${Math.floor(i/60)} pht trc`:i<86400?`${Math.floor(i/3600)} gi trc`:i<2592e3?`${Math.floor(i/86400)} ngy trc`:i<31536e3?`${Math.floor(i/2592e3)} thng trc`:`${Math.floor(i/31536e3)} nm trc`},bM=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),l=t.getFullYear(),d=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return`${n}/${i}/${l} ${d}:${a}`},eg=e=>`${e} m`,D_=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),l=t.getFullYear();return`${n}/${i}/${l}`};function FV(e){const t=e.replace(/\D/g,"");return t.length!==10?e:`${t.slice(0,3)} ${t.slice(3,6)} ${t.slice(6)}`}const _y=e=>{if(!e)return"";let t=e;!e.endsWith("Z")&&!e.includes("+")&&!e.includes("T00:00:00")&&(t=e+"Z");const n=new Date(t),i=new Date,l=Math.floor((i.getTime()-n.getTime())/1e3),d=Math.floor(l/60),a=Math.floor(l/3600),g=Math.floor(l/86400);if(l<60)return"Va xong";if(d<60)return`${d} pht trc`;if(a<24)return`${a} gi trc`;const x=n.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"}),_=new Date(x),C=i.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"}),E=new Date(C);if(_.toDateString()===E.toDateString()){const q=String(_.getHours()).padStart(2,"0"),H=String(_.getMinutes()).padStart(2,"0");return`${q}:${H}`}const D=new Date(E);if(D.setDate(D.getDate()-1),_.toDateString()===D.toDateString()){const q=String(_.getHours()).padStart(2,"0"),H=String(_.getMinutes()).padStart(2,"0");return`Hm qua ${q}:${H}`}if(g<7){const q=["Ch nht","Th hai","Th ba","Th t","Th nm","Th su","Th by"],H=String(_.getHours()).padStart(2,"0"),W=String(_.getMinutes()).padStart(2,"0");return`${q[_.getDay()]} ${H}:${W}`}const L=String(_.getDate()).padStart(2,"0"),B=String(_.getMonth()+1).padStart(2,"0"),z=_.getFullYear();return _.getFullYear()===E.getFullYear()?`${L}/${B}`:`${L}/${B}/${z}`},S2=()=>{const[e,t]=k.useState(!1),[n,i]=k.useState(null),l=Wi(_=>_.setMessages),d=Wi(_=>_.currentContext),a=Wi(_=>_.contextMetadata),g=Wi(_=>_.checkTokenExpired);return{loadHistory:k.useCallback(async(_,C)=>{if(g&&g())return[];const E=_||d,A=C||a;t(!0),i(null);try{let D;switch(E){case"general":D=await LV();break;case"insight":if(!A.propertyId)throw new Error("propertyId is required for insight context");D=await BV(A.propertyId);break;case"prediction":if(!A.predictionId)throw new Error("predictionId is required for prediction context");D=await zV(Number(A.predictionId));break;default:throw new Error(`Unknown context: ${E}`)}if(D.status==="200"&&D.data?.items){console.log("created_at [0]",D.data.items[0]?.created_at);const I=D.data.items.map((L,B)=>({id:`${Date.now()}-${B}`,message:L.text||L.message||L.content||"",isBot:L.role==="model"||L.isBot||L.is_bot||!1,timestamp:_y(L.created_at||L.timestamp||new Date().toISOString())}));return l(I,E),I}return[]}catch(D){const I=D instanceof Error?D:new Error("Failed to load chat history");throw i(I),console.error(`Error loading chat history for ${E}:`,I),I}finally{t(!1)}},[d,a,l,g]),isLoading:e,error:n}},UV=()=>{const[e,t]=k.useState(!1),[n,i]=k.useState(null),l=Wi(E=>E.currentContext),d=Wi(E=>E.contextMetadata),a=Wi(E=>E.addMessage),g=Wi(E=>E.setIsTyping),x=Wi(E=>E.setStreamingMessageId),_=Wi(E=>E.checkTokenExpired);return{sendMessage:k.useCallback(async(E,A,D)=>{if(_&&_())return;const I=A||l,L=D||d;t(!0),i(null);const B={id:`user-${Date.now()}`,message:E,isBot:!1,timestamp:_y(new Date().toISOString())};a(B,I),g(!0);let z="";const q=`bot-${Date.now()}`;x(q);try{const H=re=>{if(re.text){z+=re.text;const ee={id:q,message:z,isBot:!0,timestamp:_y(new Date().toISOString())},oe=Wi.getState().getCurrentMessages(),he=oe.findIndex(we=>we.id===q);if(he===-1)a(ee,I);else{const we=[...oe];we[he]=ee,Wi.getState().setMessages(we,I)}}},W=()=>{g(!1),t(!1),x(null)},ne=re=>{const ee=re instanceof Error?re:new Error("Failed to send message");i(ee),g(!1),t(!1),x(null);const oe={id:`error-${Date.now()}`,message:"Xin li,  c li xy ra. Vui lng th li sau.",isBot:!0,timestamp:_y(new Date().toISOString())};a(oe,I)};switch(I){case"general":{const re=localStorage.getItem("userLocation");let ee=null,oe=null;if(re)try{const we=JSON.parse(re);ee=we.latitude,oe=we.longitude}catch{}await PV({message:E,latitude:ee,longitude:oe},H,W,ne);break}case"insight":{if(!L.propertyId)throw new Error("propertyId is required for insight context");const re={property_id:L.propertyId,message:E};await OV(re,H,W,ne);break}case"prediction":{if(!L.predictionId)throw new Error("predictionId is required for prediction context");const re={prediction_id:L.predictionId,message:E};await IV(re,H,W,ne);break}default:throw new Error(`Unknown context: ${I}`)}}catch(H){const W=H instanceof Error?H:new Error("Failed to send message");i(W),g(!1),t(!1),x(null);const ne={id:`error-${Date.now()}`,message:"Xin li,  c li xy ra. Vui lng th li sau.",isBot:!0,timestamp:_y(new Date().toISOString())};throw a(ne,I),W}},[l,d,a,g,x,_]),isSending:e,error:n}},VV=(e,t={})=>{const{speed:n=20,onComplete:i}=t,[l,d]=k.useState(""),a=k.useRef(0),g=k.useRef(null),x=k.useRef(e),_=k.useRef(i);k.useEffect(()=>{x.current=e,_.current=i}),k.useEffect(()=>{if(!e){d(""),a.current=0,g.current!==null&&(clearTimeout(g.current),g.current=null);return}if(a.current<e.length&&g.current===null){const E=()=>{const A=x.current;a.current<A.length?(a.current++,d(A.slice(0,a.current)),a.current<A.length?g.current=window.setTimeout(E,n):(g.current=null,_.current?.())):(g.current=null,_.current?.())};E()}return()=>{g.current!==null&&(clearTimeout(g.current),g.current=null)}},[e,n]);const C=()=>{g.current!==null&&(clearTimeout(g.current),g.current=null),a.current=e.length,d(e),i?.()};return{displayedText:l,isTyping:a.current<e.length,skipTyping:C}},qV={general:{icon:W0,label:"T vn chung",description:"Hi v bt ng sn",color:"#fff"},insight:{icon:Gf,label:"Phn tch BS",description:"Chi tit bt ng sn",color:"#FFD700"},prediction:{icon:Gw,label:"nh gi nh",description:"Phn tch nh gi",color:"#90EE90"}};function HV({onMinimize:e}){const t=Wi(g=>g.currentContext),{switchToGeneral:n}=w2(),i=qV[t],l=i.icon,d=t!=="general",a=()=>{n()};return c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-lg",style:{backgroundColor:"#008DDA"},children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[d&&c.jsx(Nr,{onClick:a,variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 cursor-pointer flex-shrink-0 h-8 w-8",title:"Quay v t vn chung",children:c.jsx(Ij,{className:"h-4 w-4"})}),c.jsx("div",{className:"h-10 w-10 rounded-full bg-white flex items-center justify-center flex-shrink-0",children:c.jsx(Vw,{className:"h-6 w-6",style:{color:"#008DDA"}})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-white font-semibold text-lg",children:"Tr l AI"}),c.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-white/20 backdrop-blur-sm",title:i.description,children:[c.jsx(l,{className:"h-3.5 w-3.5",style:{color:i.color}}),c.jsx("span",{className:"text-white/90 text-xs font-medium whitespace-nowrap",children:i.label})]})]}),c.jsx("p",{className:"text-white/80 text-xs truncate",children:i.description})]})]}),c.jsx(Nr,{onClick:e,variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 cursor-pointer flex-shrink-0",children:c.jsx(v3,{className:"h-5 w-5"})})]})}function $V(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const GV=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ZV=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,XV={};function vC(e,t){return(XV.jsx?ZV:GV).test(e)}const KV=/[ \t\n\f\r]/g;function YV(e){return typeof e=="object"?e.type==="text"?xC(e.value):!1:xC(e)}function xC(e){return e.replace(KV,"")===""}class Ev{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}Ev.prototype.normal={};Ev.prototype.property={};Ev.prototype.space=void 0;function _M(e,t){const n={},i={};for(const l of e)Object.assign(n,l.property),Object.assign(i,l.normal);return new Ev(n,i,t)}function R1(e){return e.toLowerCase()}class Xs{constructor(t,n){this.attribute=n,this.property=t}}Xs.prototype.attribute="";Xs.prototype.booleanish=!1;Xs.prototype.boolean=!1;Xs.prototype.commaOrSpaceSeparated=!1;Xs.prototype.commaSeparated=!1;Xs.prototype.defined=!1;Xs.prototype.mustUseProperty=!1;Xs.prototype.number=!1;Xs.prototype.overloadedBoolean=!1;Xs.prototype.property="";Xs.prototype.spaceSeparated=!1;Xs.prototype.space=void 0;let WV=0;const Ar=sp(),Ya=sp(),L1=sp(),tn=sp(),ra=sp(),Am=sp(),ol=sp();function sp(){return 2**++WV}const z1=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ar,booleanish:Ya,commaOrSpaceSeparated:ol,commaSeparated:Am,number:tn,overloadedBoolean:L1,spaceSeparated:ra},Symbol.toStringTag,{value:"Module"})),P_=Object.keys(z1);class E2 extends Xs{constructor(t,n,i,l){let d=-1;if(super(t,n),bC(this,"space",l),typeof i=="number")for(;++d<P_.length;){const a=P_[d];bC(this,P_[d],(i&z1[a])===z1[a])}}}E2.prototype.defined=!0;function bC(e,t,n){n&&(e[t]=n)}function tg(e){const t={},n={};for(const[i,l]of Object.entries(e.properties)){const d=new E2(i,e.transform(e.attributes||{},i),l,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(d.mustUseProperty=!0),t[i]=d,n[R1(i)]=i,n[R1(d.attribute)]=i}return new Ev(t,n,e.space)}const wM=tg({properties:{ariaActiveDescendant:null,ariaAtomic:Ya,ariaAutoComplete:null,ariaBusy:Ya,ariaChecked:Ya,ariaColCount:tn,ariaColIndex:tn,ariaColSpan:tn,ariaControls:ra,ariaCurrent:null,ariaDescribedBy:ra,ariaDetails:null,ariaDisabled:Ya,ariaDropEffect:ra,ariaErrorMessage:null,ariaExpanded:Ya,ariaFlowTo:ra,ariaGrabbed:Ya,ariaHasPopup:null,ariaHidden:Ya,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ra,ariaLevel:tn,ariaLive:null,ariaModal:Ya,ariaMultiLine:Ya,ariaMultiSelectable:Ya,ariaOrientation:null,ariaOwns:ra,ariaPlaceholder:null,ariaPosInSet:tn,ariaPressed:Ya,ariaReadOnly:Ya,ariaRelevant:null,ariaRequired:Ya,ariaRoleDescription:ra,ariaRowCount:tn,ariaRowIndex:tn,ariaRowSpan:tn,ariaSelected:Ya,ariaSetSize:tn,ariaSort:null,ariaValueMax:tn,ariaValueMin:tn,ariaValueNow:tn,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function SM(e,t){return t in e?e[t]:t}function EM(e,t){return SM(e,t.toLowerCase())}const QV=tg({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Am,acceptCharset:ra,accessKey:ra,action:null,allow:null,allowFullScreen:Ar,allowPaymentRequest:Ar,allowUserMedia:Ar,alt:null,as:null,async:Ar,autoCapitalize:null,autoComplete:ra,autoFocus:Ar,autoPlay:Ar,blocking:ra,capture:null,charSet:null,checked:Ar,cite:null,className:ra,cols:tn,colSpan:null,content:null,contentEditable:Ya,controls:Ar,controlsList:ra,coords:tn|Am,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ar,defer:Ar,dir:null,dirName:null,disabled:Ar,download:L1,draggable:Ya,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ar,formTarget:null,headers:ra,height:tn,hidden:L1,high:tn,href:null,hrefLang:null,htmlFor:ra,httpEquiv:ra,id:null,imageSizes:null,imageSrcSet:null,inert:Ar,inputMode:null,integrity:null,is:null,isMap:Ar,itemId:null,itemProp:ra,itemRef:ra,itemScope:Ar,itemType:ra,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ar,low:tn,manifest:null,max:null,maxLength:tn,media:null,method:null,min:null,minLength:tn,multiple:Ar,muted:Ar,name:null,nonce:null,noModule:Ar,noValidate:Ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ar,optimum:tn,pattern:null,ping:ra,placeholder:null,playsInline:Ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ar,referrerPolicy:null,rel:ra,required:Ar,reversed:Ar,rows:tn,rowSpan:tn,sandbox:ra,scope:null,scoped:Ar,seamless:Ar,selected:Ar,shadowRootClonable:Ar,shadowRootDelegatesFocus:Ar,shadowRootMode:null,shape:null,size:tn,sizes:null,slot:null,span:tn,spellCheck:Ya,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tn,step:null,style:null,tabIndex:tn,target:null,title:null,translate:null,type:null,typeMustMatch:Ar,useMap:null,value:Ya,width:tn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ra,axis:null,background:null,bgColor:null,border:tn,borderColor:null,bottomMargin:tn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ar,declare:Ar,event:null,face:null,frame:null,frameBorder:null,hSpace:tn,leftMargin:tn,link:null,longDesc:null,lowSrc:null,marginHeight:tn,marginWidth:tn,noResize:Ar,noHref:Ar,noShade:Ar,noWrap:Ar,object:null,profile:null,prompt:null,rev:null,rightMargin:tn,rules:null,scheme:null,scrolling:Ya,standby:null,summary:null,text:null,topMargin:tn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ar,disableRemotePlayback:Ar,prefix:null,property:null,results:tn,security:null,unselectable:null},space:"html",transform:EM}),JV=tg({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ol,accentHeight:tn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tn,amplitude:tn,arabicForm:null,ascent:tn,attributeName:null,attributeType:null,azimuth:tn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tn,by:null,calcMode:null,capHeight:tn,className:ra,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tn,diffuseConstant:tn,direction:null,display:null,dur:null,divisor:tn,dominantBaseline:null,download:Ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:tn,enableBackground:null,end:null,event:null,exponent:tn,externalResourcesRequired:null,fill:null,fillOpacity:tn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Am,g2:Am,glyphName:Am,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tn,horizOriginX:tn,horizOriginY:tn,id:null,ideographic:tn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tn,k:tn,k1:tn,k2:tn,k3:tn,k4:tn,kernelMatrix:ol,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tn,overlineThickness:tn,paintOrder:null,panose1:null,path:null,pathLength:tn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ra,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tn,pointsAtY:tn,pointsAtZ:tn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ol,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ol,rev:ol,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ol,requiredFeatures:ol,requiredFonts:ol,requiredFormats:ol,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tn,specularExponent:tn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tn,strikethroughThickness:tn,string:null,stroke:null,strokeDashArray:ol,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tn,strokeOpacity:tn,strokeWidth:null,style:null,surfaceScale:tn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ol,tabIndex:tn,tableValues:null,target:null,targetX:tn,targetY:tn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ol,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tn,underlineThickness:tn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tn,values:null,vAlphabetic:tn,vMathematical:tn,vectorEffect:null,vHanging:tn,vIdeographic:tn,version:null,vertAdvY:tn,vertOriginX:tn,vertOriginY:tn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:SM}),CM=tg({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),TM=tg({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:EM}),kM=tg({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),e9={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},t9=/[A-Z]/g,_C=/-[a-z]/g,n9=/^data[-\w.:]+$/i;function r9(e,t){const n=R1(t);let i=t,l=Xs;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&n9.test(t)){if(t.charAt(4)==="-"){const d=t.slice(5).replace(_C,a9);i="data"+d.charAt(0).toUpperCase()+d.slice(1)}else{const d=t.slice(4);if(!_C.test(d)){let a=d.replace(t9,i9);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}l=E2}return new l(i,t)}function i9(e){return"-"+e.toLowerCase()}function a9(e){return e.charAt(1).toUpperCase()}const o9=_M([wM,QV,CM,TM,kM],"html"),C2=_M([wM,JV,CM,TM,kM],"svg");function s9(e){return e.join(" ").trim()}var xm={},I_,wC;function l9(){if(wC)return I_;wC=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,d=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,g=/^\s+|\s+$/g,x=`
`,_="/",C="*",E="",A="comment",D="declaration";function I(B,z){if(typeof B!="string")throw new TypeError("First argument must be a string");if(!B)return[];z=z||{};var q=1,H=1;function W(ze){var Je=ze.match(t);Je&&(q+=Je.length);var Ae=ze.lastIndexOf(x);H=~Ae?ze.length-Ae:H+ze.length}function ne(){var ze={line:q,column:H};return function(Je){return Je.position=new re(ze),he(),Je}}function re(ze){this.start=ze,this.end={line:q,column:H},this.source=z.source}re.prototype.content=B;function ee(ze){var Je=new Error(z.source+":"+q+":"+H+": "+ze);if(Je.reason=ze,Je.filename=z.source,Je.line=q,Je.column=H,Je.source=B,!z.silent)throw Je}function oe(ze){var Je=ze.exec(B);if(Je){var Ae=Je[0];return W(Ae),B=B.slice(Ae.length),Je}}function he(){oe(n)}function we(ze){var Je;for(ze=ze||[];Je=ye();)Je!==!1&&ze.push(Je);return ze}function ye(){var ze=ne();if(!(_!=B.charAt(0)||C!=B.charAt(1))){for(var Je=2;E!=B.charAt(Je)&&(C!=B.charAt(Je)||_!=B.charAt(Je+1));)++Je;if(Je+=2,E===B.charAt(Je-1))return ee("End of comment missing");var Ae=B.slice(2,Je-2);return H+=2,W(Ae),B=B.slice(Je),H+=2,ze({type:A,comment:Ae})}}function Pe(){var ze=ne(),Je=oe(i);if(Je){if(ye(),!oe(l))return ee("property missing ':'");var Ae=oe(d),De=ze({type:D,property:L(Je[0].replace(e,E)),value:Ae?L(Ae[0].replace(e,E)):E});return oe(a),De}}function Ke(){var ze=[];we(ze);for(var Je;Je=Pe();)Je!==!1&&(ze.push(Je),we(ze));return ze}return he(),Ke()}function L(B){return B?B.replace(g,E):E}return I_=I,I_}var SC;function c9(){if(SC)return xm;SC=1;var e=xm&&xm.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(xm,"__esModule",{value:!0}),xm.default=n;const t=e(l9());function n(i,l){let d=null;if(!i||typeof i!="string")return d;const a=(0,t.default)(i),g=typeof l=="function";return a.forEach(x=>{if(x.type!=="declaration")return;const{property:_,value:C}=x;g?l(_,C,x):C&&(d=d||{},d[_]=C)}),d}return xm}var dy={},EC;function u9(){if(EC)return dy;EC=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,d=function(_){return!_||n.test(_)||e.test(_)},a=function(_,C){return C.toUpperCase()},g=function(_,C){return"".concat(C,"-")},x=function(_,C){return C===void 0&&(C={}),d(_)?_:(_=_.toLowerCase(),C.reactCompat?_=_.replace(l,g):_=_.replace(i,g),_.replace(t,a))};return dy.camelCase=x,dy}var hy,CC;function d9(){if(CC)return hy;CC=1;var e=hy&&hy.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},t=e(c9()),n=u9();function i(l,d){var a={};return!l||typeof l!="string"||(0,t.default)(l,function(g,x){g&&x&&(a[(0,n.camelCase)(g,d)]=x)}),a}return i.default=i,hy=i,hy}var h9=d9();const f9=rp(h9),jM=AM("end"),T2=AM("start");function AM(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function p9(e){const t=T2(e),n=jM(e);if(t&&n)return{start:t,end:n}}function Ty(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?TC(e.position):"start"in e||"end"in e?TC(e):"line"in e||"column"in e?B1(e):""}function B1(e){return kC(e&&e.line)+":"+kC(e&&e.column)}function TC(e){return B1(e&&e.start)+"-"+B1(e&&e.end)}function kC(e){return e&&typeof e=="number"?e:1}class rs extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let l="",d={},a=!1;if(n&&("line"in n&&"column"in n?d={place:n}:"start"in n&&"end"in n?d={place:n}:"type"in n?d={ancestors:[n],place:n.position}:d={...n}),typeof t=="string"?l=t:!d.cause&&t&&(a=!0,l=t.message,d.cause=t),!d.ruleId&&!d.source&&typeof i=="string"){const x=i.indexOf(":");x===-1?d.ruleId=i:(d.source=i.slice(0,x),d.ruleId=i.slice(x+1))}if(!d.place&&d.ancestors&&d.ancestors){const x=d.ancestors[d.ancestors.length-1];x&&(d.place=x.position)}const g=d.place&&"start"in d.place?d.place.start:d.place;this.ancestors=d.ancestors||void 0,this.cause=d.cause||void 0,this.column=g?g.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=g?g.line:void 0,this.name=Ty(d.place)||"1:1",this.place=d.place||void 0,this.reason=this.message,this.ruleId=d.ruleId||void 0,this.source=d.source||void 0,this.stack=a&&d.cause&&typeof d.cause.stack=="string"?d.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}rs.prototype.file="";rs.prototype.name="";rs.prototype.reason="";rs.prototype.message="";rs.prototype.stack="";rs.prototype.column=void 0;rs.prototype.line=void 0;rs.prototype.ancestors=void 0;rs.prototype.cause=void 0;rs.prototype.fatal=void 0;rs.prototype.place=void 0;rs.prototype.ruleId=void 0;rs.prototype.source=void 0;const k2={}.hasOwnProperty,m9=new Map,g9=/[A-Z]/g,y9=new Set(["table","tbody","thead","tfoot","tr"]),v9=new Set(["td","th"]),NM="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function x9(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=k9(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=T9(n,t.jsx,t.jsxs)}const l={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?C2:o9,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},d=MM(l,e,void 0);return d&&typeof d!="string"?d:l.create(e,l.Fragment,{children:d||void 0},void 0)}function MM(e,t,n){if(t.type==="element")return b9(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return _9(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return S9(e,t,n);if(t.type==="mdxjsEsm")return w9(e,t);if(t.type==="root")return E9(e,t,n);if(t.type==="text")return C9(e,t)}function b9(e,t,n){const i=e.schema;let l=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(l=C2,e.schema=l),e.ancestors.push(t);const d=PM(e,t.tagName,!1),a=j9(e,t);let g=A2(e,t);return y9.has(t.tagName)&&(g=g.filter(function(x){return typeof x=="string"?!YV(x):!0})),DM(e,a,d,t),j2(a,g),e.ancestors.pop(),e.schema=i,e.create(t,d,a,n)}function _9(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}Vy(e,t.position)}function w9(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Vy(e,t.position)}function S9(e,t,n){const i=e.schema;let l=i;t.name==="svg"&&i.space==="html"&&(l=C2,e.schema=l),e.ancestors.push(t);const d=t.name===null?e.Fragment:PM(e,t.name,!0),a=A9(e,t),g=A2(e,t);return DM(e,a,d,t),j2(a,g),e.ancestors.pop(),e.schema=i,e.create(t,d,a,n)}function E9(e,t,n){const i={};return j2(i,A2(e,t)),e.create(t,e.Fragment,i,n)}function C9(e,t){return t.value}function DM(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function j2(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function T9(e,t,n){return i;function i(l,d,a,g){const _=Array.isArray(a.children)?n:t;return g?_(d,a,g):_(d,a)}}function k9(e,t){return n;function n(i,l,d,a){const g=Array.isArray(d.children),x=T2(i);return t(l,d,a,g,{columnNumber:x?x.column-1:void 0,fileName:e,lineNumber:x?x.line:void 0},void 0)}}function j9(e,t){const n={};let i,l;for(l in t.properties)if(l!=="children"&&k2.call(t.properties,l)){const d=N9(e,l,t.properties[l]);if(d){const[a,g]=d;e.tableCellAlignToStyle&&a==="align"&&typeof g=="string"&&v9.has(t.tagName)?i=g:n[a]=g}}if(i){const d=n.style||(n.style={});d[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function A9(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const d=i.data.estree.body[0];d.type;const a=d.expression;a.type;const g=a.properties[0];g.type,Object.assign(n,e.evaluater.evaluateExpression(g.argument))}else Vy(e,t.position);else{const l=i.name;let d;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const g=i.value.data.estree.body[0];g.type,d=e.evaluater.evaluateExpression(g.expression)}else Vy(e,t.position);else d=i.value===null?!0:i.value;n[l]=d}return n}function A2(e,t){const n=[];let i=-1;const l=e.passKeys?new Map:m9;for(;++i<t.children.length;){const d=t.children[i];let a;if(e.passKeys){const x=d.type==="element"?d.tagName:d.type==="mdxJsxFlowElement"||d.type==="mdxJsxTextElement"?d.name:void 0;if(x){const _=l.get(x)||0;a=x+"-"+_,l.set(x,_+1)}}const g=MM(e,d,a);g!==void 0&&n.push(g)}return n}function N9(e,t,n){const i=r9(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?$V(n):s9(n)),i.property==="style"){let l=typeof n=="object"?n:M9(e,String(n));return e.stylePropertyNameCase==="css"&&(l=D9(l)),["style",l]}return[e.elementAttributeNameCase==="react"&&i.space?e9[i.property]||i.property:i.attribute,n]}}function M9(e,t){try{return f9(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,l=new rs("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=e.filePath||void 0,l.url=NM+"#cannot-parse-style-attribute",l}}function PM(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const l=t.split(".");let d=-1,a;for(;++d<l.length;){const g=vC(l[d])?{type:"Identifier",name:l[d]}:{type:"Literal",value:l[d]};a=a?{type:"MemberExpression",object:a,property:g,computed:!!(d&&g.type==="Literal"),optional:!1}:g}i=a}else i=vC(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const l=i.value;return k2.call(e.components,l)?e.components[l]:l}if(e.evaluater)return e.evaluater.evaluateExpression(i);Vy(e)}function Vy(e,t){const n=new rs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=NM+"#cannot-handle-mdx-estrees-without-createevaluater",n}function D9(e){const t={};let n;for(n in e)k2.call(e,n)&&(t[P9(n)]=e[n]);return t}function P9(e){let t=e.replace(g9,I9);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function I9(e){return"-"+e.toLowerCase()}const O_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},O9={};function R9(e,t){const n=O9,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,l=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return IM(e,i,l)}function IM(e,t,n){if(L9(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return jC(e.children,t,n)}return Array.isArray(e)?jC(e,t,n):""}function jC(e,t,n){const i=[];let l=-1;for(;++l<e.length;)i[l]=IM(e[l],t,n);return i.join("")}function L9(e){return!!(e&&typeof e=="object")}const AC=document.createElement("i");function N2(e){const t="&"+e+";";AC.innerHTML=t;const n=AC.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Eu(e,t,n,i){const l=e.length;let d=0,a;if(t<0?t=-t>l?0:l+t:t=t>l?l:t,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);d<i.length;)a=i.slice(d,d+1e4),a.unshift(t,0),e.splice(...a),d+=1e4,t+=1e4}function Ol(e,t){return e.length>0?(Eu(e,e.length,0,t),e):t}const NC={}.hasOwnProperty;function z9(e){const t={};let n=-1;for(;++n<e.length;)B9(t,e[n]);return t}function B9(e,t){let n;for(n in t){const l=(NC.call(e,n)?e[n]:void 0)||(e[n]={}),d=t[n];let a;if(d)for(a in d){NC.call(l,a)||(l[a]=[]);const g=d[a];F9(l[a],Array.isArray(g)?g:g?[g]:[])}}}function F9(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);Eu(e,0,0,i)}function OM(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Nm(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const pu=qh(/[A-Za-z]/),ul=qh(/[\dA-Za-z]/),U9=qh(/[#-'*+\--9=?A-Z^-~]/);function F1(e){return e!==null&&(e<32||e===127)}const U1=qh(/\d/),V9=qh(/[\dA-Fa-f]/),q9=qh(/[!-/:-@[-`{-~]/);function hr(e){return e!==null&&e<-2}function Gs(e){return e!==null&&(e<0||e===32)}function Ei(e){return e===-2||e===-1||e===32}const H9=qh(new RegExp("\\p{P}|\\p{S}","u")),$9=qh(/\s/);function qh(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ng(e){const t=[];let n=-1,i=0,l=0;for(;++n<e.length;){const d=e.charCodeAt(n);let a="";if(d===37&&ul(e.charCodeAt(n+1))&&ul(e.charCodeAt(n+2)))l=2;else if(d<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(d))||(a=String.fromCharCode(d));else if(d>55295&&d<57344){const g=e.charCodeAt(n+1);d<56320&&g>56319&&g<57344?(a=String.fromCharCode(d,g),l=1):a=""}else a=String.fromCharCode(d);a&&(t.push(e.slice(i,n),encodeURIComponent(a)),i=n+l+1,a=""),l&&(n+=l,l=0)}return t.join("")+e.slice(i)}function ia(e,t,n,i){const l=i?i-1:Number.POSITIVE_INFINITY;let d=0;return a;function a(x){return Ei(x)?(e.enter(n),g(x)):t(x)}function g(x){return Ei(x)&&d++<l?(e.consume(x),g):(e.exit(n),t(x))}}const G9={tokenize:Z9};function Z9(e){const t=e.attempt(this.parser.constructs.contentInitial,i,l);let n;return t;function i(g){if(g===null){e.consume(g);return}return e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),ia(e,t,"linePrefix")}function l(g){return e.enter("paragraph"),d(g)}function d(g){const x=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=x),n=x,a(g)}function a(g){if(g===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(g);return}return hr(g)?(e.consume(g),e.exit("chunkText"),d):(e.consume(g),a)}}const X9={tokenize:K9},MC={tokenize:Y9};function K9(e){const t=this,n=[];let i=0,l,d,a;return g;function g(H){if(i<n.length){const W=n[i];return t.containerState=W[1],e.attempt(W[0].continuation,x,_)(H)}return _(H)}function x(H){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,l&&q();const W=t.events.length;let ne=W,re;for(;ne--;)if(t.events[ne][0]==="exit"&&t.events[ne][1].type==="chunkFlow"){re=t.events[ne][1].end;break}z(i);let ee=W;for(;ee<t.events.length;)t.events[ee][1].end={...re},ee++;return Eu(t.events,ne+1,0,t.events.slice(W)),t.events.length=ee,_(H)}return g(H)}function _(H){if(i===n.length){if(!l)return A(H);if(l.currentConstruct&&l.currentConstruct.concrete)return I(H);t.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(MC,C,E)(H)}function C(H){return l&&q(),z(i),A(H)}function E(H){return t.parser.lazy[t.now().line]=i!==n.length,a=t.now().offset,I(H)}function A(H){return t.containerState={},e.attempt(MC,D,I)(H)}function D(H){return i++,n.push([t.currentConstruct,t.containerState]),A(H)}function I(H){if(H===null){l&&q(),z(0),e.consume(H);return}return l=l||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:d}),L(H)}function L(H){if(H===null){B(e.exit("chunkFlow"),!0),z(0),e.consume(H);return}return hr(H)?(e.consume(H),B(e.exit("chunkFlow")),i=0,t.interrupt=void 0,g):(e.consume(H),L)}function B(H,W){const ne=t.sliceStream(H);if(W&&ne.push(null),H.previous=d,d&&(d.next=H),d=H,l.defineSkip(H.start),l.write(ne),t.parser.lazy[H.start.line]){let re=l.events.length;for(;re--;)if(l.events[re][1].start.offset<a&&(!l.events[re][1].end||l.events[re][1].end.offset>a))return;const ee=t.events.length;let oe=ee,he,we;for(;oe--;)if(t.events[oe][0]==="exit"&&t.events[oe][1].type==="chunkFlow"){if(he){we=t.events[oe][1].end;break}he=!0}for(z(i),re=ee;re<t.events.length;)t.events[re][1].end={...we},re++;Eu(t.events,oe+1,0,t.events.slice(ee)),t.events.length=re}}function z(H){let W=n.length;for(;W-- >H;){const ne=n[W];t.containerState=ne[1],ne[0].exit.call(t,e)}n.length=H}function q(){l.write([null]),d=void 0,l=void 0,t.containerState._closeFlow=void 0}}function Y9(e,t,n){return ia(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function DC(e){if(e===null||Gs(e)||$9(e))return 1;if(H9(e))return 2}function M2(e,t,n){const i=[];let l=-1;for(;++l<e.length;){const d=e[l].resolveAll;d&&!i.includes(d)&&(t=d(t,n),i.push(d))}return t}const V1={name:"attention",resolveAll:W9,tokenize:Q9};function W9(e,t){let n=-1,i,l,d,a,g,x,_,C;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;x=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const E={...e[i][1].end},A={...e[n][1].start};PC(E,-x),PC(A,x),a={type:x>1?"strongSequence":"emphasisSequence",start:E,end:{...e[i][1].end}},g={type:x>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:A},d={type:x>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},l={type:x>1?"strong":"emphasis",start:{...a.start},end:{...g.end}},e[i][1].end={...a.start},e[n][1].start={...g.end},_=[],e[i][1].end.offset-e[i][1].start.offset&&(_=Ol(_,[["enter",e[i][1],t],["exit",e[i][1],t]])),_=Ol(_,[["enter",l,t],["enter",a,t],["exit",a,t],["enter",d,t]]),_=Ol(_,M2(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),_=Ol(_,[["exit",d,t],["enter",g,t],["exit",g,t],["exit",l,t]]),e[n][1].end.offset-e[n][1].start.offset?(C=2,_=Ol(_,[["enter",e[n][1],t],["exit",e[n][1],t]])):C=0,Eu(e,i-1,n-i+3,_),n=i+_.length-C-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Q9(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,l=DC(i);let d;return a;function a(x){return d=x,e.enter("attentionSequence"),g(x)}function g(x){if(x===d)return e.consume(x),g;const _=e.exit("attentionSequence"),C=DC(x),E=!C||C===2&&l||n.includes(x),A=!l||l===2&&C||n.includes(i);return _._open=!!(d===42?E:E&&(l||!A)),_._close=!!(d===42?A:A&&(C||!E)),t(x)}}function PC(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const J9={name:"autolink",tokenize:e7};function e7(e,t,n){let i=0;return l;function l(D){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(D),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),d}function d(D){return pu(D)?(e.consume(D),a):D===64?n(D):_(D)}function a(D){return D===43||D===45||D===46||ul(D)?(i=1,g(D)):_(D)}function g(D){return D===58?(e.consume(D),i=0,x):(D===43||D===45||D===46||ul(D))&&i++<32?(e.consume(D),g):(i=0,_(D))}function x(D){return D===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(D),e.exit("autolinkMarker"),e.exit("autolink"),t):D===null||D===32||D===60||F1(D)?n(D):(e.consume(D),x)}function _(D){return D===64?(e.consume(D),C):U9(D)?(e.consume(D),_):n(D)}function C(D){return ul(D)?E(D):n(D)}function E(D){return D===46?(e.consume(D),i=0,C):D===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(D),e.exit("autolinkMarker"),e.exit("autolink"),t):A(D)}function A(D){if((D===45||ul(D))&&i++<63){const I=D===45?A:E;return e.consume(D),I}return n(D)}}const Tb={partial:!0,tokenize:t7};function t7(e,t,n){return i;function i(d){return Ei(d)?ia(e,l,"linePrefix")(d):l(d)}function l(d){return d===null||hr(d)?t(d):n(d)}}const RM={continuation:{tokenize:r7},exit:i7,name:"blockQuote",tokenize:n7};function n7(e,t,n){const i=this;return l;function l(a){if(a===62){const g=i.containerState;return g.open||(e.enter("blockQuote",{_container:!0}),g.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),d}return n(a)}function d(a){return Ei(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function r7(e,t,n){const i=this;return l;function l(a){return Ei(a)?ia(e,d,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):d(a)}function d(a){return e.attempt(RM,t,n)(a)}}function i7(e){e.exit("blockQuote")}const LM={name:"characterEscape",tokenize:a7};function a7(e,t,n){return i;function i(d){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(d),e.exit("escapeMarker"),l}function l(d){return q9(d)?(e.enter("characterEscapeValue"),e.consume(d),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(d)}}const zM={name:"characterReference",tokenize:o7};function o7(e,t,n){const i=this;let l=0,d,a;return g;function g(E){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),x}function x(E){return E===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(E),e.exit("characterReferenceMarkerNumeric"),_):(e.enter("characterReferenceValue"),d=31,a=ul,C(E))}function _(E){return E===88||E===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(E),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),d=6,a=V9,C):(e.enter("characterReferenceValue"),d=7,a=U1,C(E))}function C(E){if(E===59&&l){const A=e.exit("characterReferenceValue");return a===ul&&!N2(i.sliceSerialize(A))?n(E):(e.enter("characterReferenceMarker"),e.consume(E),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(E)&&l++<d?(e.consume(E),C):n(E)}}const IC={partial:!0,tokenize:l7},OC={concrete:!0,name:"codeFenced",tokenize:s7};function s7(e,t,n){const i=this,l={partial:!0,tokenize:ne};let d=0,a=0,g;return x;function x(re){return _(re)}function _(re){const ee=i.events[i.events.length-1];return d=ee&&ee[1].type==="linePrefix"?ee[2].sliceSerialize(ee[1],!0).length:0,g=re,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),C(re)}function C(re){return re===g?(a++,e.consume(re),C):a<3?n(re):(e.exit("codeFencedFenceSequence"),Ei(re)?ia(e,E,"whitespace")(re):E(re))}function E(re){return re===null||hr(re)?(e.exit("codeFencedFence"),i.interrupt?t(re):e.check(IC,L,W)(re)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),A(re))}function A(re){return re===null||hr(re)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),E(re)):Ei(re)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ia(e,D,"whitespace")(re)):re===96&&re===g?n(re):(e.consume(re),A)}function D(re){return re===null||hr(re)?E(re):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),I(re))}function I(re){return re===null||hr(re)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),E(re)):re===96&&re===g?n(re):(e.consume(re),I)}function L(re){return e.attempt(l,W,B)(re)}function B(re){return e.enter("lineEnding"),e.consume(re),e.exit("lineEnding"),z}function z(re){return d>0&&Ei(re)?ia(e,q,"linePrefix",d+1)(re):q(re)}function q(re){return re===null||hr(re)?e.check(IC,L,W)(re):(e.enter("codeFlowValue"),H(re))}function H(re){return re===null||hr(re)?(e.exit("codeFlowValue"),q(re)):(e.consume(re),H)}function W(re){return e.exit("codeFenced"),t(re)}function ne(re,ee,oe){let he=0;return we;function we(Je){return re.enter("lineEnding"),re.consume(Je),re.exit("lineEnding"),ye}function ye(Je){return re.enter("codeFencedFence"),Ei(Je)?ia(re,Pe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Je):Pe(Je)}function Pe(Je){return Je===g?(re.enter("codeFencedFenceSequence"),Ke(Je)):oe(Je)}function Ke(Je){return Je===g?(he++,re.consume(Je),Ke):he>=a?(re.exit("codeFencedFenceSequence"),Ei(Je)?ia(re,ze,"whitespace")(Je):ze(Je)):oe(Je)}function ze(Je){return Je===null||hr(Je)?(re.exit("codeFencedFence"),ee(Je)):oe(Je)}}}function l7(e,t,n){const i=this;return l;function l(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),d)}function d(a){return i.parser.lazy[i.now().line]?n(a):t(a)}}const R_={name:"codeIndented",tokenize:u7},c7={partial:!0,tokenize:d7};function u7(e,t,n){const i=this;return l;function l(_){return e.enter("codeIndented"),ia(e,d,"linePrefix",5)(_)}function d(_){const C=i.events[i.events.length-1];return C&&C[1].type==="linePrefix"&&C[2].sliceSerialize(C[1],!0).length>=4?a(_):n(_)}function a(_){return _===null?x(_):hr(_)?e.attempt(c7,a,x)(_):(e.enter("codeFlowValue"),g(_))}function g(_){return _===null||hr(_)?(e.exit("codeFlowValue"),a(_)):(e.consume(_),g)}function x(_){return e.exit("codeIndented"),t(_)}}function d7(e,t,n){const i=this;return l;function l(a){return i.parser.lazy[i.now().line]?n(a):hr(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),l):ia(e,d,"linePrefix",5)(a)}function d(a){const g=i.events[i.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?t(a):hr(a)?l(a):n(a)}}const h7={name:"codeText",previous:p7,resolve:f7,tokenize:m7};function f7(e){let t=e.length-4,n=3,i,l;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)l===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(l=i):(i===t||e[i][1].type==="lineEnding")&&(e[l][1].type="codeTextData",i!==l+2&&(e[l][1].end=e[i-1][1].end,e.splice(l+2,i-l-2),t-=i-l-2,i=l+2),l=void 0);return e}function p7(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function m7(e,t,n){let i=0,l,d;return a;function a(E){return e.enter("codeText"),e.enter("codeTextSequence"),g(E)}function g(E){return E===96?(e.consume(E),i++,g):(e.exit("codeTextSequence"),x(E))}function x(E){return E===null?n(E):E===32?(e.enter("space"),e.consume(E),e.exit("space"),x):E===96?(d=e.enter("codeTextSequence"),l=0,C(E)):hr(E)?(e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),x):(e.enter("codeTextData"),_(E))}function _(E){return E===null||E===32||E===96||hr(E)?(e.exit("codeTextData"),x(E)):(e.consume(E),_)}function C(E){return E===96?(e.consume(E),l++,C):l===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(E)):(d.type="codeTextData",_(E))}}class g7{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const l=n||0;this.setCursor(Math.trunc(t));const d=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return i&&fy(this.left,i),d.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),fy(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),fy(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);fy(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);fy(this.left,n.reverse())}}}function fy(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function BM(e){const t={};let n=-1,i,l,d,a,g,x,_;const C=new g7(e);for(;++n<C.length;){for(;n in t;)n=t[n];if(i=C.get(n),n&&i[1].type==="chunkFlow"&&C.get(n-1)[1].type==="listItemPrefix"&&(x=i[1]._tokenizer.events,d=0,d<x.length&&x[d][1].type==="lineEndingBlank"&&(d+=2),d<x.length&&x[d][1].type==="content"))for(;++d<x.length&&x[d][1].type!=="content";)x[d][1].type==="chunkText"&&(x[d][1]._isInFirstContentOfListItem=!0,d++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,y7(C,n)),n=t[n],_=!0);else if(i[1]._container){for(d=n,l=void 0;d--;)if(a=C.get(d),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(l&&(C.get(l)[1].type="lineEndingBlank"),a[1].type="lineEnding",l=d);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;l&&(i[1].end={...C.get(l)[1].start},g=C.slice(l,n),g.unshift(i),C.splice(l,n-l+1,g))}}return Eu(e,0,Number.POSITIVE_INFINITY,C.slice(0)),!_}function y7(e,t){const n=e.get(t)[1],i=e.get(t)[2];let l=t-1;const d=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const g=a.events,x=[],_={};let C,E,A=-1,D=n,I=0,L=0;const B=[L];for(;D;){for(;e.get(++l)[1]!==D;);d.push(l),D._tokenizer||(C=i.sliceStream(D),D.next||C.push(null),E&&a.defineSkip(D.start),D._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(C),D._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),E=D,D=D.next}for(D=n;++A<g.length;)g[A][0]==="exit"&&g[A-1][0]==="enter"&&g[A][1].type===g[A-1][1].type&&g[A][1].start.line!==g[A][1].end.line&&(L=A+1,B.push(L),D._tokenizer=void 0,D.previous=void 0,D=D.next);for(a.events=[],D?(D._tokenizer=void 0,D.previous=void 0):B.pop(),A=B.length;A--;){const z=g.slice(B[A],B[A+1]),q=d.pop();x.push([q,q+z.length-1]),e.splice(q,2,z)}for(x.reverse(),A=-1;++A<x.length;)_[I+x[A][0]]=I+x[A][1],I+=x[A][1]-x[A][0]-1;return _}const v7={resolve:b7,tokenize:_7},x7={partial:!0,tokenize:w7};function b7(e){return BM(e),e}function _7(e,t){let n;return i;function i(g){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),l(g)}function l(g){return g===null?d(g):hr(g)?e.check(x7,a,d)(g):(e.consume(g),l)}function d(g){return e.exit("chunkContent"),e.exit("content"),t(g)}function a(g){return e.consume(g),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,l}}function w7(e,t,n){const i=this;return l;function l(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ia(e,d,"linePrefix")}function d(a){if(a===null||hr(a))return n(a);const g=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?t(a):e.interrupt(i.parser.constructs.flow,n,t)(a)}}function FM(e,t,n,i,l,d,a,g,x){const _=x||Number.POSITIVE_INFINITY;let C=0;return E;function E(z){return z===60?(e.enter(i),e.enter(l),e.enter(d),e.consume(z),e.exit(d),A):z===null||z===32||z===41||F1(z)?n(z):(e.enter(i),e.enter(a),e.enter(g),e.enter("chunkString",{contentType:"string"}),L(z))}function A(z){return z===62?(e.enter(d),e.consume(z),e.exit(d),e.exit(l),e.exit(i),t):(e.enter(g),e.enter("chunkString",{contentType:"string"}),D(z))}function D(z){return z===62?(e.exit("chunkString"),e.exit(g),A(z)):z===null||z===60||hr(z)?n(z):(e.consume(z),z===92?I:D)}function I(z){return z===60||z===62||z===92?(e.consume(z),D):D(z)}function L(z){return!C&&(z===null||z===41||Gs(z))?(e.exit("chunkString"),e.exit(g),e.exit(a),e.exit(i),t(z)):C<_&&z===40?(e.consume(z),C++,L):z===41?(e.consume(z),C--,L):z===null||z===32||z===40||F1(z)?n(z):(e.consume(z),z===92?B:L)}function B(z){return z===40||z===41||z===92?(e.consume(z),L):L(z)}}function UM(e,t,n,i,l,d){const a=this;let g=0,x;return _;function _(D){return e.enter(i),e.enter(l),e.consume(D),e.exit(l),e.enter(d),C}function C(D){return g>999||D===null||D===91||D===93&&!x||D===94&&!g&&"_hiddenFootnoteSupport"in a.parser.constructs?n(D):D===93?(e.exit(d),e.enter(l),e.consume(D),e.exit(l),e.exit(i),t):hr(D)?(e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),C):(e.enter("chunkString",{contentType:"string"}),E(D))}function E(D){return D===null||D===91||D===93||hr(D)||g++>999?(e.exit("chunkString"),C(D)):(e.consume(D),x||(x=!Ei(D)),D===92?A:E)}function A(D){return D===91||D===92||D===93?(e.consume(D),g++,E):E(D)}}function VM(e,t,n,i,l,d){let a;return g;function g(A){return A===34||A===39||A===40?(e.enter(i),e.enter(l),e.consume(A),e.exit(l),a=A===40?41:A,x):n(A)}function x(A){return A===a?(e.enter(l),e.consume(A),e.exit(l),e.exit(i),t):(e.enter(d),_(A))}function _(A){return A===a?(e.exit(d),x(a)):A===null?n(A):hr(A)?(e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),ia(e,_,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),C(A))}function C(A){return A===a||A===null||hr(A)?(e.exit("chunkString"),_(A)):(e.consume(A),A===92?E:C)}function E(A){return A===a||A===92?(e.consume(A),C):C(A)}}function ky(e,t){let n;return i;function i(l){return hr(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),n=!0,i):Ei(l)?ia(e,i,n?"linePrefix":"lineSuffix")(l):t(l)}}const S7={name:"definition",tokenize:C7},E7={partial:!0,tokenize:T7};function C7(e,t,n){const i=this;let l;return d;function d(D){return e.enter("definition"),a(D)}function a(D){return UM.call(i,e,g,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(D)}function g(D){return l=Nm(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),D===58?(e.enter("definitionMarker"),e.consume(D),e.exit("definitionMarker"),x):n(D)}function x(D){return Gs(D)?ky(e,_)(D):_(D)}function _(D){return FM(e,C,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(D)}function C(D){return e.attempt(E7,E,E)(D)}function E(D){return Ei(D)?ia(e,A,"whitespace")(D):A(D)}function A(D){return D===null||hr(D)?(e.exit("definition"),i.parser.defined.push(l),t(D)):n(D)}}function T7(e,t,n){return i;function i(g){return Gs(g)?ky(e,l)(g):n(g)}function l(g){return VM(e,d,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(g)}function d(g){return Ei(g)?ia(e,a,"whitespace")(g):a(g)}function a(g){return g===null||hr(g)?t(g):n(g)}}const k7={name:"hardBreakEscape",tokenize:j7};function j7(e,t,n){return i;function i(d){return e.enter("hardBreakEscape"),e.consume(d),l}function l(d){return hr(d)?(e.exit("hardBreakEscape"),t(d)):n(d)}}const A7={name:"headingAtx",resolve:N7,tokenize:M7};function N7(e,t){let n=e.length-2,i=3,l,d;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(l={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},d={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},Eu(e,i,n-i+1,[["enter",l,t],["enter",d,t],["exit",d,t],["exit",l,t]])),e}function M7(e,t,n){let i=0;return l;function l(C){return e.enter("atxHeading"),d(C)}function d(C){return e.enter("atxHeadingSequence"),a(C)}function a(C){return C===35&&i++<6?(e.consume(C),a):C===null||Gs(C)?(e.exit("atxHeadingSequence"),g(C)):n(C)}function g(C){return C===35?(e.enter("atxHeadingSequence"),x(C)):C===null||hr(C)?(e.exit("atxHeading"),t(C)):Ei(C)?ia(e,g,"whitespace")(C):(e.enter("atxHeadingText"),_(C))}function x(C){return C===35?(e.consume(C),x):(e.exit("atxHeadingSequence"),g(C))}function _(C){return C===null||C===35||Gs(C)?(e.exit("atxHeadingText"),g(C)):(e.consume(C),_)}}const D7=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],RC=["pre","script","style","textarea"],P7={concrete:!0,name:"htmlFlow",resolveTo:R7,tokenize:L7},I7={partial:!0,tokenize:B7},O7={partial:!0,tokenize:z7};function R7(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function L7(e,t,n){const i=this;let l,d,a,g,x;return _;function _(Q){return C(Q)}function C(Q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Q),E}function E(Q){return Q===33?(e.consume(Q),A):Q===47?(e.consume(Q),d=!0,L):Q===63?(e.consume(Q),l=3,i.interrupt?t:me):pu(Q)?(e.consume(Q),a=String.fromCharCode(Q),B):n(Q)}function A(Q){return Q===45?(e.consume(Q),l=2,D):Q===91?(e.consume(Q),l=5,g=0,I):pu(Q)?(e.consume(Q),l=4,i.interrupt?t:me):n(Q)}function D(Q){return Q===45?(e.consume(Q),i.interrupt?t:me):n(Q)}function I(Q){const Ee="CDATA[";return Q===Ee.charCodeAt(g++)?(e.consume(Q),g===Ee.length?i.interrupt?t:Pe:I):n(Q)}function L(Q){return pu(Q)?(e.consume(Q),a=String.fromCharCode(Q),B):n(Q)}function B(Q){if(Q===null||Q===47||Q===62||Gs(Q)){const Ee=Q===47,Ge=a.toLowerCase();return!Ee&&!d&&RC.includes(Ge)?(l=1,i.interrupt?t(Q):Pe(Q)):D7.includes(a.toLowerCase())?(l=6,Ee?(e.consume(Q),z):i.interrupt?t(Q):Pe(Q)):(l=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(Q):d?q(Q):H(Q))}return Q===45||ul(Q)?(e.consume(Q),a+=String.fromCharCode(Q),B):n(Q)}function z(Q){return Q===62?(e.consume(Q),i.interrupt?t:Pe):n(Q)}function q(Q){return Ei(Q)?(e.consume(Q),q):we(Q)}function H(Q){return Q===47?(e.consume(Q),we):Q===58||Q===95||pu(Q)?(e.consume(Q),W):Ei(Q)?(e.consume(Q),H):we(Q)}function W(Q){return Q===45||Q===46||Q===58||Q===95||ul(Q)?(e.consume(Q),W):ne(Q)}function ne(Q){return Q===61?(e.consume(Q),re):Ei(Q)?(e.consume(Q),ne):H(Q)}function re(Q){return Q===null||Q===60||Q===61||Q===62||Q===96?n(Q):Q===34||Q===39?(e.consume(Q),x=Q,ee):Ei(Q)?(e.consume(Q),re):oe(Q)}function ee(Q){return Q===x?(e.consume(Q),x=null,he):Q===null||hr(Q)?n(Q):(e.consume(Q),ee)}function oe(Q){return Q===null||Q===34||Q===39||Q===47||Q===60||Q===61||Q===62||Q===96||Gs(Q)?ne(Q):(e.consume(Q),oe)}function he(Q){return Q===47||Q===62||Ei(Q)?H(Q):n(Q)}function we(Q){return Q===62?(e.consume(Q),ye):n(Q)}function ye(Q){return Q===null||hr(Q)?Pe(Q):Ei(Q)?(e.consume(Q),ye):n(Q)}function Pe(Q){return Q===45&&l===2?(e.consume(Q),Ae):Q===60&&l===1?(e.consume(Q),De):Q===62&&l===4?(e.consume(Q),Ce):Q===63&&l===3?(e.consume(Q),me):Q===93&&l===5?(e.consume(Q),st):hr(Q)&&(l===6||l===7)?(e.exit("htmlFlowData"),e.check(I7,pe,Ke)(Q)):Q===null||hr(Q)?(e.exit("htmlFlowData"),Ke(Q)):(e.consume(Q),Pe)}function Ke(Q){return e.check(O7,ze,pe)(Q)}function ze(Q){return e.enter("lineEnding"),e.consume(Q),e.exit("lineEnding"),Je}function Je(Q){return Q===null||hr(Q)?Ke(Q):(e.enter("htmlFlowData"),Pe(Q))}function Ae(Q){return Q===45?(e.consume(Q),me):Pe(Q)}function De(Q){return Q===47?(e.consume(Q),a="",ke):Pe(Q)}function ke(Q){if(Q===62){const Ee=a.toLowerCase();return RC.includes(Ee)?(e.consume(Q),Ce):Pe(Q)}return pu(Q)&&a.length<8?(e.consume(Q),a+=String.fromCharCode(Q),ke):Pe(Q)}function st(Q){return Q===93?(e.consume(Q),me):Pe(Q)}function me(Q){return Q===62?(e.consume(Q),Ce):Q===45&&l===2?(e.consume(Q),me):Pe(Q)}function Ce(Q){return Q===null||hr(Q)?(e.exit("htmlFlowData"),pe(Q)):(e.consume(Q),Ce)}function pe(Q){return e.exit("htmlFlow"),t(Q)}}function z7(e,t,n){const i=this;return l;function l(a){return hr(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),d):n(a)}function d(a){return i.parser.lazy[i.now().line]?n(a):t(a)}}function B7(e,t,n){return i;function i(l){return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),e.attempt(Tb,t,n)}}const F7={name:"htmlText",tokenize:U7};function U7(e,t,n){const i=this;let l,d,a;return g;function g(me){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(me),x}function x(me){return me===33?(e.consume(me),_):me===47?(e.consume(me),ne):me===63?(e.consume(me),H):pu(me)?(e.consume(me),oe):n(me)}function _(me){return me===45?(e.consume(me),C):me===91?(e.consume(me),d=0,I):pu(me)?(e.consume(me),q):n(me)}function C(me){return me===45?(e.consume(me),D):n(me)}function E(me){return me===null?n(me):me===45?(e.consume(me),A):hr(me)?(a=E,De(me)):(e.consume(me),E)}function A(me){return me===45?(e.consume(me),D):E(me)}function D(me){return me===62?Ae(me):me===45?A(me):E(me)}function I(me){const Ce="CDATA[";return me===Ce.charCodeAt(d++)?(e.consume(me),d===Ce.length?L:I):n(me)}function L(me){return me===null?n(me):me===93?(e.consume(me),B):hr(me)?(a=L,De(me)):(e.consume(me),L)}function B(me){return me===93?(e.consume(me),z):L(me)}function z(me){return me===62?Ae(me):me===93?(e.consume(me),z):L(me)}function q(me){return me===null||me===62?Ae(me):hr(me)?(a=q,De(me)):(e.consume(me),q)}function H(me){return me===null?n(me):me===63?(e.consume(me),W):hr(me)?(a=H,De(me)):(e.consume(me),H)}function W(me){return me===62?Ae(me):H(me)}function ne(me){return pu(me)?(e.consume(me),re):n(me)}function re(me){return me===45||ul(me)?(e.consume(me),re):ee(me)}function ee(me){return hr(me)?(a=ee,De(me)):Ei(me)?(e.consume(me),ee):Ae(me)}function oe(me){return me===45||ul(me)?(e.consume(me),oe):me===47||me===62||Gs(me)?he(me):n(me)}function he(me){return me===47?(e.consume(me),Ae):me===58||me===95||pu(me)?(e.consume(me),we):hr(me)?(a=he,De(me)):Ei(me)?(e.consume(me),he):Ae(me)}function we(me){return me===45||me===46||me===58||me===95||ul(me)?(e.consume(me),we):ye(me)}function ye(me){return me===61?(e.consume(me),Pe):hr(me)?(a=ye,De(me)):Ei(me)?(e.consume(me),ye):he(me)}function Pe(me){return me===null||me===60||me===61||me===62||me===96?n(me):me===34||me===39?(e.consume(me),l=me,Ke):hr(me)?(a=Pe,De(me)):Ei(me)?(e.consume(me),Pe):(e.consume(me),ze)}function Ke(me){return me===l?(e.consume(me),l=void 0,Je):me===null?n(me):hr(me)?(a=Ke,De(me)):(e.consume(me),Ke)}function ze(me){return me===null||me===34||me===39||me===60||me===61||me===96?n(me):me===47||me===62||Gs(me)?he(me):(e.consume(me),ze)}function Je(me){return me===47||me===62||Gs(me)?he(me):n(me)}function Ae(me){return me===62?(e.consume(me),e.exit("htmlTextData"),e.exit("htmlText"),t):n(me)}function De(me){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(me),e.exit("lineEnding"),ke}function ke(me){return Ei(me)?ia(e,st,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(me):st(me)}function st(me){return e.enter("htmlTextData"),a(me)}}const D2={name:"labelEnd",resolveAll:$7,resolveTo:G7,tokenize:Z7},V7={tokenize:X7},q7={tokenize:K7},H7={tokenize:Y7};function $7(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const l=i.type==="labelImage"?4:2;i.type="data",t+=l}}return e.length!==n.length&&Eu(e,0,e.length,n),e}function G7(e,t){let n=e.length,i=0,l,d,a,g;for(;n--;)if(l=e[n][1],d){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;e[n][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(d=n,l.type!=="labelLink")){i=2;break}}else l.type==="labelEnd"&&(a=n);const x={type:e[d][1].type==="labelLink"?"link":"image",start:{...e[d][1].start},end:{...e[e.length-1][1].end}},_={type:"label",start:{...e[d][1].start},end:{...e[a][1].end}},C={type:"labelText",start:{...e[d+i+2][1].end},end:{...e[a-2][1].start}};return g=[["enter",x,t],["enter",_,t]],g=Ol(g,e.slice(d+1,d+i+3)),g=Ol(g,[["enter",C,t]]),g=Ol(g,M2(t.parser.constructs.insideSpan.null,e.slice(d+i+4,a-3),t)),g=Ol(g,[["exit",C,t],e[a-2],e[a-1],["exit",_,t]]),g=Ol(g,e.slice(a+1)),g=Ol(g,[["exit",x,t]]),Eu(e,d,e.length,g),e}function Z7(e,t,n){const i=this;let l=i.events.length,d,a;for(;l--;)if((i.events[l][1].type==="labelImage"||i.events[l][1].type==="labelLink")&&!i.events[l][1]._balanced){d=i.events[l][1];break}return g;function g(A){return d?d._inactive?E(A):(a=i.parser.defined.includes(Nm(i.sliceSerialize({start:d.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(A),e.exit("labelMarker"),e.exit("labelEnd"),x):n(A)}function x(A){return A===40?e.attempt(V7,C,a?C:E)(A):A===91?e.attempt(q7,C,a?_:E)(A):a?C(A):E(A)}function _(A){return e.attempt(H7,C,E)(A)}function C(A){return t(A)}function E(A){return d._balanced=!0,n(A)}}function X7(e,t,n){return i;function i(E){return e.enter("resource"),e.enter("resourceMarker"),e.consume(E),e.exit("resourceMarker"),l}function l(E){return Gs(E)?ky(e,d)(E):d(E)}function d(E){return E===41?C(E):FM(e,a,g,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(E)}function a(E){return Gs(E)?ky(e,x)(E):C(E)}function g(E){return n(E)}function x(E){return E===34||E===39||E===40?VM(e,_,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(E):C(E)}function _(E){return Gs(E)?ky(e,C)(E):C(E)}function C(E){return E===41?(e.enter("resourceMarker"),e.consume(E),e.exit("resourceMarker"),e.exit("resource"),t):n(E)}}function K7(e,t,n){const i=this;return l;function l(g){return UM.call(i,e,d,a,"reference","referenceMarker","referenceString")(g)}function d(g){return i.parser.defined.includes(Nm(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(g):n(g)}function a(g){return n(g)}}function Y7(e,t,n){return i;function i(d){return e.enter("reference"),e.enter("referenceMarker"),e.consume(d),e.exit("referenceMarker"),l}function l(d){return d===93?(e.enter("referenceMarker"),e.consume(d),e.exit("referenceMarker"),e.exit("reference"),t):n(d)}}const W7={name:"labelStartImage",resolveAll:D2.resolveAll,tokenize:Q7};function Q7(e,t,n){const i=this;return l;function l(g){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(g),e.exit("labelImageMarker"),d}function d(g){return g===91?(e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelImage"),a):n(g)}function a(g){return g===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(g):t(g)}}const J7={name:"labelStartLink",resolveAll:D2.resolveAll,tokenize:eq};function eq(e,t,n){const i=this;return l;function l(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),d}function d(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):t(a)}}const L_={name:"lineEnding",tokenize:tq};function tq(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),ia(e,t,"linePrefix")}}const u0={name:"thematicBreak",tokenize:nq};function nq(e,t,n){let i=0,l;return d;function d(_){return e.enter("thematicBreak"),a(_)}function a(_){return l=_,g(_)}function g(_){return _===l?(e.enter("thematicBreakSequence"),x(_)):i>=3&&(_===null||hr(_))?(e.exit("thematicBreak"),t(_)):n(_)}function x(_){return _===l?(e.consume(_),i++,x):(e.exit("thematicBreakSequence"),Ei(_)?ia(e,g,"whitespace")(_):g(_))}}const Us={continuation:{tokenize:oq},exit:lq,name:"list",tokenize:aq},rq={partial:!0,tokenize:cq},iq={partial:!0,tokenize:sq};function aq(e,t,n){const i=this,l=i.events[i.events.length-1];let d=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,a=0;return g;function g(D){const I=i.containerState.type||(D===42||D===43||D===45?"listUnordered":"listOrdered");if(I==="listUnordered"?!i.containerState.marker||D===i.containerState.marker:U1(D)){if(i.containerState.type||(i.containerState.type=I,e.enter(I,{_container:!0})),I==="listUnordered")return e.enter("listItemPrefix"),D===42||D===45?e.check(u0,n,_)(D):_(D);if(!i.interrupt||D===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),x(D)}return n(D)}function x(D){return U1(D)&&++a<10?(e.consume(D),x):(!i.interrupt||a<2)&&(i.containerState.marker?D===i.containerState.marker:D===41||D===46)?(e.exit("listItemValue"),_(D)):n(D)}function _(D){return e.enter("listItemMarker"),e.consume(D),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||D,e.check(Tb,i.interrupt?n:C,e.attempt(rq,A,E))}function C(D){return i.containerState.initialBlankLine=!0,d++,A(D)}function E(D){return Ei(D)?(e.enter("listItemPrefixWhitespace"),e.consume(D),e.exit("listItemPrefixWhitespace"),A):n(D)}function A(D){return i.containerState.size=d+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(D)}}function oq(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(Tb,l,d);function l(g){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ia(e,t,"listItemIndent",i.containerState.size+1)(g)}function d(g){return i.containerState.furtherBlankLines||!Ei(g)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(g)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(iq,t,a)(g))}function a(g){return i.containerState._closeFlow=!0,i.interrupt=void 0,ia(e,e.attempt(Us,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g)}}function sq(e,t,n){const i=this;return ia(e,l,"listItemIndent",i.containerState.size+1);function l(d){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?t(d):n(d)}}function lq(e){e.exit(this.containerState.type)}function cq(e,t,n){const i=this;return ia(e,l,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(d){const a=i.events[i.events.length-1];return!Ei(d)&&a&&a[1].type==="listItemPrefixWhitespace"?t(d):n(d)}}const LC={name:"setextUnderline",resolveTo:uq,tokenize:dq};function uq(e,t){let n=e.length,i,l,d;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(l=n)}else e[n][1].type==="content"&&e.splice(n,1),!d&&e[n][1].type==="definition"&&(d=n);const a={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[l][1].type="setextHeadingText",d?(e.splice(l,0,["enter",a,t]),e.splice(d+1,0,["exit",e[i][1],t]),e[i][1].end={...e[d][1].end}):e[i][1]=a,e.push(["exit",a,t]),e}function dq(e,t,n){const i=this;let l;return d;function d(_){let C=i.events.length,E;for(;C--;)if(i.events[C][1].type!=="lineEnding"&&i.events[C][1].type!=="linePrefix"&&i.events[C][1].type!=="content"){E=i.events[C][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||E)?(e.enter("setextHeadingLine"),l=_,a(_)):n(_)}function a(_){return e.enter("setextHeadingLineSequence"),g(_)}function g(_){return _===l?(e.consume(_),g):(e.exit("setextHeadingLineSequence"),Ei(_)?ia(e,x,"lineSuffix")(_):x(_))}function x(_){return _===null||hr(_)?(e.exit("setextHeadingLine"),t(_)):n(_)}}const hq={tokenize:fq};function fq(e){const t=this,n=e.attempt(Tb,i,e.attempt(this.parser.constructs.flowInitial,l,ia(e,e.attempt(this.parser.constructs.flow,l,e.attempt(v7,l)),"linePrefix")));return n;function i(d){if(d===null){e.consume(d);return}return e.enter("lineEndingBlank"),e.consume(d),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function l(d){if(d===null){e.consume(d);return}return e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const pq={resolveAll:HM()},mq=qM("string"),gq=qM("text");function qM(e){return{resolveAll:HM(e==="text"?yq:void 0),tokenize:t};function t(n){const i=this,l=this.parser.constructs[e],d=n.attempt(l,a,g);return a;function a(C){return _(C)?d(C):g(C)}function g(C){if(C===null){n.consume(C);return}return n.enter("data"),n.consume(C),x}function x(C){return _(C)?(n.exit("data"),d(C)):(n.consume(C),x)}function _(C){if(C===null)return!0;const E=l[C];let A=-1;if(E)for(;++A<E.length;){const D=E[A];if(!D.previous||D.previous.call(i,i.previous))return!0}return!1}}}function HM(e){return t;function t(n,i){let l=-1,d;for(;++l<=n.length;)d===void 0?n[l]&&n[l][1].type==="data"&&(d=l,l++):(!n[l]||n[l][1].type!=="data")&&(l!==d+2&&(n[d][1].end=n[l-1][1].end,n.splice(d+2,l-d-2),l=d+2),d=void 0);return e?e(n,i):n}}function yq(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],l=t.sliceStream(i);let d=l.length,a=-1,g=0,x;for(;d--;){const _=l[d];if(typeof _=="string"){for(a=_.length;_.charCodeAt(a-1)===32;)g++,a--;if(a)break;a=-1}else if(_===-2)x=!0,g++;else if(_!==-1){d++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(g=0),g){const _={type:n===e.length||x||g<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:d?a:i.start._bufferIndex+a,_index:i.start._index+d,line:i.end.line,column:i.end.column-g,offset:i.end.offset-g},end:{...i.end}};i.end={..._.start},i.start.offset===i.end.offset?Object.assign(i,_):(e.splice(n,0,["enter",_,t],["exit",_,t]),n+=2)}n++}return e}const vq={42:Us,43:Us,45:Us,48:Us,49:Us,50:Us,51:Us,52:Us,53:Us,54:Us,55:Us,56:Us,57:Us,62:RM},xq={91:S7},bq={[-2]:R_,[-1]:R_,32:R_},_q={35:A7,42:u0,45:[LC,u0],60:P7,61:LC,95:u0,96:OC,126:OC},wq={38:zM,92:LM},Sq={[-5]:L_,[-4]:L_,[-3]:L_,33:W7,38:zM,42:V1,60:[J9,F7],91:J7,92:[k7,LM],93:D2,95:V1,96:h7},Eq={null:[V1,pq]},Cq={null:[42,95]},Tq={null:[]},kq=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Cq,contentInitial:xq,disable:Tq,document:vq,flow:_q,flowInitial:bq,insideSpan:Eq,string:wq,text:Sq},Symbol.toStringTag,{value:"Module"}));function jq(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const l={},d=[];let a=[],g=[];const x={attempt:ee(ne),check:ee(re),consume:q,enter:H,exit:W,interrupt:ee(re,{interrupt:!0})},_={code:null,containerState:{},defineSkip:L,events:[],now:I,parser:e,previous:null,sliceSerialize:A,sliceStream:D,write:E};let C=t.tokenize.call(_,x);return t.resolveAll&&d.push(t),_;function E(ye){return a=Ol(a,ye),B(),a[a.length-1]!==null?[]:(oe(t,0),_.events=M2(d,_.events,_),_.events)}function A(ye,Pe){return Nq(D(ye),Pe)}function D(ye){return Aq(a,ye)}function I(){const{_bufferIndex:ye,_index:Pe,line:Ke,column:ze,offset:Je}=i;return{_bufferIndex:ye,_index:Pe,line:Ke,column:ze,offset:Je}}function L(ye){l[ye.line]=ye.column,we()}function B(){let ye;for(;i._index<a.length;){const Pe=a[i._index];if(typeof Pe=="string")for(ye=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===ye&&i._bufferIndex<Pe.length;)z(Pe.charCodeAt(i._bufferIndex));else z(Pe)}}function z(ye){C=C(ye)}function q(ye){hr(ye)?(i.line++,i.column=1,i.offset+=ye===-3?2:1,we()):ye!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),_.previous=ye}function H(ye,Pe){const Ke=Pe||{};return Ke.type=ye,Ke.start=I(),_.events.push(["enter",Ke,_]),g.push(Ke),Ke}function W(ye){const Pe=g.pop();return Pe.end=I(),_.events.push(["exit",Pe,_]),Pe}function ne(ye,Pe){oe(ye,Pe.from)}function re(ye,Pe){Pe.restore()}function ee(ye,Pe){return Ke;function Ke(ze,Je,Ae){let De,ke,st,me;return Array.isArray(ze)?pe(ze):"tokenize"in ze?pe([ze]):Ce(ze);function Ce(lt){return We;function We(Nt){const At=Nt!==null&&lt[Nt],Mt=Nt!==null&&lt.null,Ut=[...Array.isArray(At)?At:At?[At]:[],...Array.isArray(Mt)?Mt:Mt?[Mt]:[]];return pe(Ut)(Nt)}}function pe(lt){return De=lt,ke=0,lt.length===0?Ae:Q(lt[ke])}function Q(lt){return We;function We(Nt){return me=he(),st=lt,lt.partial||(_.currentConstruct=lt),lt.name&&_.parser.constructs.disable.null.includes(lt.name)?Ge():lt.tokenize.call(Pe?Object.assign(Object.create(_),Pe):_,x,Ee,Ge)(Nt)}}function Ee(lt){return ye(st,me),Je}function Ge(lt){return me.restore(),++ke<De.length?Q(De[ke]):Ae}}}function oe(ye,Pe){ye.resolveAll&&!d.includes(ye)&&d.push(ye),ye.resolve&&Eu(_.events,Pe,_.events.length-Pe,ye.resolve(_.events.slice(Pe),_)),ye.resolveTo&&(_.events=ye.resolveTo(_.events,_))}function he(){const ye=I(),Pe=_.previous,Ke=_.currentConstruct,ze=_.events.length,Je=Array.from(g);return{from:ze,restore:Ae};function Ae(){i=ye,_.previous=Pe,_.currentConstruct=Ke,_.events.length=ze,g=Je,we()}}function we(){i.line in l&&i.column<2&&(i.column=l[i.line],i.offset+=l[i.line]-1)}}function Aq(e,t){const n=t.start._index,i=t.start._bufferIndex,l=t.end._index,d=t.end._bufferIndex;let a;if(n===l)a=[e[n].slice(i,d)];else{if(a=e.slice(n,l),i>-1){const g=a[0];typeof g=="string"?a[0]=g.slice(i):a.shift()}d>0&&a.push(e[l].slice(0,d))}return a}function Nq(e,t){let n=-1;const i=[];let l;for(;++n<e.length;){const d=e[n];let a;if(typeof d=="string")a=d;else switch(d){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&l)continue;a=" ";break}default:a=String.fromCharCode(d)}l=d===-2,i.push(a)}return i.join("")}function Mq(e){const i={constructs:z9([kq,...(e||{}).extensions||[]]),content:l(G9),defined:[],document:l(X9),flow:l(hq),lazy:{},string:l(mq),text:l(gq)};return i;function l(d){return a;function a(g){return jq(i,d,g)}}}function Dq(e){for(;!BM(e););return e}const zC=/[\0\t\n\r]/g;function Pq(){let e=1,t="",n=!0,i;return l;function l(d,a,g){const x=[];let _,C,E,A,D;for(d=t+(typeof d=="string"?d.toString():new TextDecoder(a||void 0).decode(d)),E=0,t="",n&&(d.charCodeAt(0)===65279&&E++,n=void 0);E<d.length;){if(zC.lastIndex=E,_=zC.exec(d),A=_&&_.index!==void 0?_.index:d.length,D=d.charCodeAt(A),!_){t=d.slice(E);break}if(D===10&&E===A&&i)x.push(-3),i=void 0;else switch(i&&(x.push(-5),i=void 0),E<A&&(x.push(d.slice(E,A)),e+=A-E),D){case 0:{x.push(65533),e++;break}case 9:{for(C=Math.ceil(e/4)*4,x.push(-2);e++<C;)x.push(-1);break}case 10:{x.push(-4),e=1;break}default:i=!0,e=1}E=A+1}return g&&(i&&x.push(-5),t&&x.push(t),x.push(null)),x}}const Iq=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Oq(e){return e.replace(Iq,Rq)}function Rq(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const l=n.charCodeAt(1),d=l===120||l===88;return OM(n.slice(d?2:1),d?16:10)}return N2(n)||e}const $M={}.hasOwnProperty;function Lq(e,t,n){return typeof t!="string"&&(n=t,t=void 0),zq(n)(Dq(Mq(n).document().write(Pq()(e,t,!0))))}function zq(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:d(Xe),autolinkProtocol:he,autolinkEmail:he,atxHeading:d(er),blockQuote:d(Mt),characterEscape:he,characterReference:he,codeFenced:d(Ut),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:d(Ut,a),codeText:d(Pt,a),codeTextData:he,data:he,codeFlowValue:he,definition:d(Rt),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:d(vn),hardBreakEscape:d($n),hardBreakTrailing:d($n),htmlFlow:d(ir,a),htmlFlowData:he,htmlText:d(ir,a),htmlTextData:he,image:d(dt),label:a,link:d(Xe),listItem:d(Re),listItemValue:A,listOrdered:d(xe,E),listUnordered:d(xe),paragraph:d(Ve),reference:Q,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:d(er),strong:d(Vt),thematicBreak:d(Le)},exit:{atxHeading:x(),atxHeadingSequence:ne,autolink:x(),autolinkEmail:At,autolinkProtocol:Nt,blockQuote:x(),characterEscapeValue:we,characterReferenceMarkerHexadecimal:Ge,characterReferenceMarkerNumeric:Ge,characterReferenceValue:lt,characterReference:We,codeFenced:x(B),codeFencedFence:L,codeFencedFenceInfo:D,codeFencedFenceMeta:I,codeFlowValue:we,codeIndented:x(z),codeText:x(Je),codeTextData:we,data:we,definition:x(),definitionDestinationString:W,definitionLabelString:q,definitionTitleString:H,emphasis:x(),hardBreakEscape:x(Pe),hardBreakTrailing:x(Pe),htmlFlow:x(Ke),htmlFlowData:we,htmlText:x(ze),htmlTextData:we,image:x(De),label:st,labelText:ke,lineEnding:ye,link:x(Ae),listItem:x(),listOrdered:x(),listUnordered:x(),paragraph:x(),referenceString:Ee,resourceDestinationString:me,resourceTitleString:Ce,resource:pe,setextHeading:x(oe),setextHeadingLineSequence:ee,setextHeadingText:re,strong:x(),thematicBreak:x()}};GM(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(Qe){let Tt={type:"root",children:[]};const on={stack:[Tt],tokenStack:[],config:t,enter:g,exit:_,buffer:a,resume:C,data:n},Mn=[];let Xn=-1;for(;++Xn<Qe.length;)if(Qe[Xn][1].type==="listOrdered"||Qe[Xn][1].type==="listUnordered")if(Qe[Xn][0]==="enter")Mn.push(Xn);else{const wr=Mn.pop();Xn=l(Qe,wr,Xn)}for(Xn=-1;++Xn<Qe.length;){const wr=t[Qe[Xn][0]];$M.call(wr,Qe[Xn][1].type)&&wr[Qe[Xn][1].type].call(Object.assign({sliceSerialize:Qe[Xn][2].sliceSerialize},on),Qe[Xn][1])}if(on.tokenStack.length>0){const wr=on.tokenStack[on.tokenStack.length-1];(wr[1]||BC).call(on,void 0,wr[0])}for(Tt.position={start:Nh(Qe.length>0?Qe[0][1].start:{line:1,column:1,offset:0}),end:Nh(Qe.length>0?Qe[Qe.length-2][1].end:{line:1,column:1,offset:0})},Xn=-1;++Xn<t.transforms.length;)Tt=t.transforms[Xn](Tt)||Tt;return Tt}function l(Qe,Tt,on){let Mn=Tt-1,Xn=-1,wr=!1,Bi,Jr,Xr,Ci;for(;++Mn<=on;){const Sr=Qe[Mn];switch(Sr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Sr[0]==="enter"?Xn++:Xn--,Ci=void 0;break}case"lineEndingBlank":{Sr[0]==="enter"&&(Bi&&!Ci&&!Xn&&!Xr&&(Xr=Mn),Ci=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ci=void 0}if(!Xn&&Sr[0]==="enter"&&Sr[1].type==="listItemPrefix"||Xn===-1&&Sr[0]==="exit"&&(Sr[1].type==="listUnordered"||Sr[1].type==="listOrdered")){if(Bi){let ka=Mn;for(Jr=void 0;ka--;){const qr=Qe[ka];if(qr[1].type==="lineEnding"||qr[1].type==="lineEndingBlank"){if(qr[0]==="exit")continue;Jr&&(Qe[Jr][1].type="lineEndingBlank",wr=!0),qr[1].type="lineEnding",Jr=ka}else if(!(qr[1].type==="linePrefix"||qr[1].type==="blockQuotePrefix"||qr[1].type==="blockQuotePrefixWhitespace"||qr[1].type==="blockQuoteMarker"||qr[1].type==="listItemIndent"))break}Xr&&(!Jr||Xr<Jr)&&(Bi._spread=!0),Bi.end=Object.assign({},Jr?Qe[Jr][1].start:Sr[1].end),Qe.splice(Jr||Mn,0,["exit",Bi,Sr[2]]),Mn++,on++}if(Sr[1].type==="listItemPrefix"){const ka={type:"listItem",_spread:!1,start:Object.assign({},Sr[1].start),end:void 0};Bi=ka,Qe.splice(Mn,0,["enter",ka,Sr[2]]),Mn++,on++,Xr=void 0,Ci=!0}}}return Qe[Tt][1]._spread=wr,on}function d(Qe,Tt){return on;function on(Mn){g.call(this,Qe(Mn),Mn),Tt&&Tt.call(this,Mn)}}function a(){this.stack.push({type:"fragment",children:[]})}function g(Qe,Tt,on){this.stack[this.stack.length-1].children.push(Qe),this.stack.push(Qe),this.tokenStack.push([Tt,on||void 0]),Qe.position={start:Nh(Tt.start),end:void 0}}function x(Qe){return Tt;function Tt(on){Qe&&Qe.call(this,on),_.call(this,on)}}function _(Qe,Tt){const on=this.stack.pop(),Mn=this.tokenStack.pop();if(Mn)Mn[0].type!==Qe.type&&(Tt?Tt.call(this,Qe,Mn[0]):(Mn[1]||BC).call(this,Qe,Mn[0]));else throw new Error("Cannot close `"+Qe.type+"` ("+Ty({start:Qe.start,end:Qe.end})+"): its not open");on.position.end=Nh(Qe.end)}function C(){return R9(this.stack.pop())}function E(){this.data.expectingFirstListItemValue=!0}function A(Qe){if(this.data.expectingFirstListItemValue){const Tt=this.stack[this.stack.length-2];Tt.start=Number.parseInt(this.sliceSerialize(Qe),10),this.data.expectingFirstListItemValue=void 0}}function D(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.lang=Qe}function I(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.meta=Qe}function L(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function B(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=Qe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function z(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=Qe.replace(/(\r?\n|\r)$/g,"")}function q(Qe){const Tt=this.resume(),on=this.stack[this.stack.length-1];on.label=Tt,on.identifier=Nm(this.sliceSerialize(Qe)).toLowerCase()}function H(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.title=Qe}function W(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.url=Qe}function ne(Qe){const Tt=this.stack[this.stack.length-1];if(!Tt.depth){const on=this.sliceSerialize(Qe).length;Tt.depth=on}}function re(){this.data.setextHeadingSlurpLineEnding=!0}function ee(Qe){const Tt=this.stack[this.stack.length-1];Tt.depth=this.sliceSerialize(Qe).codePointAt(0)===61?1:2}function oe(){this.data.setextHeadingSlurpLineEnding=void 0}function he(Qe){const on=this.stack[this.stack.length-1].children;let Mn=on[on.length-1];(!Mn||Mn.type!=="text")&&(Mn=Oe(),Mn.position={start:Nh(Qe.start),end:void 0},on.push(Mn)),this.stack.push(Mn)}function we(Qe){const Tt=this.stack.pop();Tt.value+=this.sliceSerialize(Qe),Tt.position.end=Nh(Qe.end)}function ye(Qe){const Tt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const on=Tt.children[Tt.children.length-1];on.position.end=Nh(Qe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Tt.type)&&(he.call(this,Qe),we.call(this,Qe))}function Pe(){this.data.atHardBreak=!0}function Ke(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=Qe}function ze(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=Qe}function Je(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.value=Qe}function Ae(){const Qe=this.stack[this.stack.length-1];if(this.data.inReference){const Tt=this.data.referenceType||"shortcut";Qe.type+="Reference",Qe.referenceType=Tt,delete Qe.url,delete Qe.title}else delete Qe.identifier,delete Qe.label;this.data.referenceType=void 0}function De(){const Qe=this.stack[this.stack.length-1];if(this.data.inReference){const Tt=this.data.referenceType||"shortcut";Qe.type+="Reference",Qe.referenceType=Tt,delete Qe.url,delete Qe.title}else delete Qe.identifier,delete Qe.label;this.data.referenceType=void 0}function ke(Qe){const Tt=this.sliceSerialize(Qe),on=this.stack[this.stack.length-2];on.label=Oq(Tt),on.identifier=Nm(Tt).toLowerCase()}function st(){const Qe=this.stack[this.stack.length-1],Tt=this.resume(),on=this.stack[this.stack.length-1];if(this.data.inReference=!0,on.type==="link"){const Mn=Qe.children;on.children=Mn}else on.alt=Tt}function me(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.url=Qe}function Ce(){const Qe=this.resume(),Tt=this.stack[this.stack.length-1];Tt.title=Qe}function pe(){this.data.inReference=void 0}function Q(){this.data.referenceType="collapsed"}function Ee(Qe){const Tt=this.resume(),on=this.stack[this.stack.length-1];on.label=Tt,on.identifier=Nm(this.sliceSerialize(Qe)).toLowerCase(),this.data.referenceType="full"}function Ge(Qe){this.data.characterReferenceType=Qe.type}function lt(Qe){const Tt=this.sliceSerialize(Qe),on=this.data.characterReferenceType;let Mn;on?(Mn=OM(Tt,on==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Mn=N2(Tt);const Xn=this.stack[this.stack.length-1];Xn.value+=Mn}function We(Qe){const Tt=this.stack.pop();Tt.position.end=Nh(Qe.end)}function Nt(Qe){we.call(this,Qe);const Tt=this.stack[this.stack.length-1];Tt.url=this.sliceSerialize(Qe)}function At(Qe){we.call(this,Qe);const Tt=this.stack[this.stack.length-1];Tt.url="mailto:"+this.sliceSerialize(Qe)}function Mt(){return{type:"blockquote",children:[]}}function Ut(){return{type:"code",lang:null,meta:null,value:""}}function Pt(){return{type:"inlineCode",value:""}}function Rt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function vn(){return{type:"emphasis",children:[]}}function er(){return{type:"heading",depth:0,children:[]}}function $n(){return{type:"break"}}function ir(){return{type:"html",value:""}}function dt(){return{type:"image",title:null,url:"",alt:null}}function Xe(){return{type:"link",title:null,url:"",children:[]}}function xe(Qe){return{type:"list",ordered:Qe.type==="listOrdered",start:null,spread:Qe._spread,children:[]}}function Re(Qe){return{type:"listItem",spread:Qe._spread,checked:null,children:[]}}function Ve(){return{type:"paragraph",children:[]}}function Vt(){return{type:"strong",children:[]}}function Oe(){return{type:"text",value:""}}function Le(){return{type:"thematicBreak"}}}function Nh(e){return{line:e.line,column:e.column,offset:e.offset}}function GM(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?GM(e,i):Bq(e,i)}}function Bq(e,t){let n;for(n in t)if($M.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function BC(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ty({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ty({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ty({start:t.start,end:t.end})+") is still open")}function Fq(e){const t=this;t.parser=n;function n(i){return Lq(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Uq(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Vq(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function qq(e,t){const n=t.value?t.value+`
`:"",i={},l=t.lang?t.lang.split(/\s+/):[];l.length>0&&(i.className=["language-"+l[0]]);let d={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(d.data={meta:t.meta}),e.patch(t,d),d=e.applyData(t,d),d={type:"element",tagName:"pre",properties:{},children:[d]},e.patch(t,d),d}function Hq(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $q(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Gq(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),l=ng(i.toLowerCase()),d=e.footnoteOrder.indexOf(i);let a,g=e.footnoteCounts.get(i);g===void 0?(g=0,e.footnoteOrder.push(i),a=e.footnoteOrder.length):a=d+1,g+=1,e.footnoteCounts.set(i,g);const x={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+l,id:n+"fnref-"+l+(g>1?"-"+g:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,x);const _={type:"element",tagName:"sup",properties:{},children:[x]};return e.patch(t,_),e.applyData(t,_)}function Zq(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Xq(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ZM(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const l=e.all(t),d=l[0];d&&d.type==="text"?d.value="["+d.value:l.unshift({type:"text",value:"["});const a=l[l.length-1];return a&&a.type==="text"?a.value+=i:l.push({type:"text",value:i}),l}function Kq(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return ZM(e,t);const l={src:ng(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(l.title=i.title);const d={type:"element",tagName:"img",properties:l,children:[]};return e.patch(t,d),e.applyData(t,d)}function Yq(e,t){const n={src:ng(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function Wq(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function Qq(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return ZM(e,t);const l={href:ng(i.url||"")};i.title!==null&&i.title!==void 0&&(l.title=i.title);const d={type:"element",tagName:"a",properties:l,children:e.all(t)};return e.patch(t,d),e.applyData(t,d)}function Jq(e,t){const n={href:ng(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function eH(e,t,n){const i=e.all(t),l=n?tH(n):XM(t),d={},a=[];if(typeof t.checked=="boolean"){const C=i[0];let E;C&&C.type==="element"&&C.tagName==="p"?E=C:(E={type:"element",tagName:"p",properties:{},children:[]},i.unshift(E)),E.children.length>0&&E.children.unshift({type:"text",value:" "}),E.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),d.className=["task-list-item"]}let g=-1;for(;++g<i.length;){const C=i[g];(l||g!==0||C.type!=="element"||C.tagName!=="p")&&a.push({type:"text",value:`
`}),C.type==="element"&&C.tagName==="p"&&!l?a.push(...C.children):a.push(C)}const x=i[i.length-1];x&&(l||x.type!=="element"||x.tagName!=="p")&&a.push({type:"text",value:`
`});const _={type:"element",tagName:"li",properties:d,children:a};return e.patch(t,_),e.applyData(t,_)}function tH(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=XM(n[i])}return t}function XM(e){const t=e.spread;return t??e.children.length>1}function nH(e,t){const n={},i=e.all(t);let l=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++l<i.length;){const a=i[l];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const d={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,d),e.applyData(t,d)}function rH(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iH(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function aH(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oH(e,t){const n=e.all(t),i=n.shift(),l=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],a),l.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},g=T2(t.children[1]),x=jM(t.children[t.children.length-1]);g&&x&&(a.position={start:g,end:x}),l.push(a)}const d={type:"element",tagName:"table",properties:{},children:e.wrap(l,!0)};return e.patch(t,d),e.applyData(t,d)}function sH(e,t,n){const i=n?n.children:void 0,d=(i?i.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,g=a?a.length:t.children.length;let x=-1;const _=[];for(;++x<g;){const E=t.children[x],A={},D=a?a[x]:void 0;D&&(A.align=D);let I={type:"element",tagName:d,properties:A,children:[]};E&&(I.children=e.all(E),e.patch(E,I),I=e.applyData(E,I)),_.push(I)}const C={type:"element",tagName:"tr",properties:{},children:e.wrap(_,!0)};return e.patch(t,C),e.applyData(t,C)}function lH(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const FC=9,UC=32;function cH(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),l=0;const d=[];for(;i;)d.push(VC(t.slice(l,i.index),l>0,!0),i[0]),l=i.index+i[0].length,i=n.exec(t);return d.push(VC(t.slice(l),l>0,!1)),d.join("")}function VC(e,t,n){let i=0,l=e.length;if(t){let d=e.codePointAt(i);for(;d===FC||d===UC;)i++,d=e.codePointAt(i)}if(n){let d=e.codePointAt(l-1);for(;d===FC||d===UC;)l--,d=e.codePointAt(l-1)}return l>i?e.slice(i,l):""}function uH(e,t){const n={type:"text",value:cH(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function dH(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const hH={blockquote:Uq,break:Vq,code:qq,delete:Hq,emphasis:$q,footnoteReference:Gq,heading:Zq,html:Xq,imageReference:Kq,image:Yq,inlineCode:Wq,linkReference:Qq,link:Jq,listItem:eH,list:nH,paragraph:rH,root:iH,strong:aH,table:oH,tableCell:lH,tableRow:sH,text:uH,thematicBreak:dH,toml:Vx,yaml:Vx,definition:Vx,footnoteDefinition:Vx};function Vx(){}const KM=-1,kb=0,jy=1,A0=2,P2=3,I2=4,O2=5,R2=6,YM=7,WM=8,qC=typeof self=="object"?self:globalThis,fH=(e,t)=>{const n=(l,d)=>(e.set(d,l),l),i=l=>{if(e.has(l))return e.get(l);const[d,a]=t[l];switch(d){case kb:case KM:return n(a,l);case jy:{const g=n([],l);for(const x of a)g.push(i(x));return g}case A0:{const g=n({},l);for(const[x,_]of a)g[i(x)]=i(_);return g}case P2:return n(new Date(a),l);case I2:{const{source:g,flags:x}=a;return n(new RegExp(g,x),l)}case O2:{const g=n(new Map,l);for(const[x,_]of a)g.set(i(x),i(_));return g}case R2:{const g=n(new Set,l);for(const x of a)g.add(i(x));return g}case YM:{const{name:g,message:x}=a;return n(new qC[g](x),l)}case WM:return n(BigInt(a),l);case"BigInt":return n(Object(BigInt(a)),l);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:g}=new Uint8Array(a);return n(new DataView(g),a)}}return n(new qC[d](a),l)};return i},HC=e=>fH(new Map,e)(0),bm="",{toString:pH}={},{keys:mH}=Object,py=e=>{const t=typeof e;if(t!=="object"||!e)return[kb,t];const n=pH.call(e).slice(8,-1);switch(n){case"Array":return[jy,bm];case"Object":return[A0,bm];case"Date":return[P2,bm];case"RegExp":return[I2,bm];case"Map":return[O2,bm];case"Set":return[R2,bm];case"DataView":return[jy,n]}return n.includes("Array")?[jy,n]:n.includes("Error")?[YM,n]:[A0,n]},qx=([e,t])=>e===kb&&(t==="function"||t==="symbol"),gH=(e,t,n,i)=>{const l=(a,g)=>{const x=i.push(a)-1;return n.set(g,x),x},d=a=>{if(n.has(a))return n.get(a);let[g,x]=py(a);switch(g){case kb:{let C=a;switch(x){case"bigint":g=WM,C=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+x);C=null;break;case"undefined":return l([KM],a)}return l([g,C],a)}case jy:{if(x){let A=a;return x==="DataView"?A=new Uint8Array(a.buffer):x==="ArrayBuffer"&&(A=new Uint8Array(a)),l([x,[...A]],a)}const C=[],E=l([g,C],a);for(const A of a)C.push(d(A));return E}case A0:{if(x)switch(x){case"BigInt":return l([x,a.toString()],a);case"Boolean":case"Number":case"String":return l([x,a.valueOf()],a)}if(t&&"toJSON"in a)return d(a.toJSON());const C=[],E=l([g,C],a);for(const A of mH(a))(e||!qx(py(a[A])))&&C.push([d(A),d(a[A])]);return E}case P2:return l([g,a.toISOString()],a);case I2:{const{source:C,flags:E}=a;return l([g,{source:C,flags:E}],a)}case O2:{const C=[],E=l([g,C],a);for(const[A,D]of a)(e||!(qx(py(A))||qx(py(D))))&&C.push([d(A),d(D)]);return E}case R2:{const C=[],E=l([g,C],a);for(const A of a)(e||!qx(py(A)))&&C.push(d(A));return E}}const{message:_}=a;return l([g,{name:x,message:_}],a)};return d},$C=(e,{json:t,lossy:n}={})=>{const i=[];return gH(!(t||n),!!t,new Map,i)(e),i},N0=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?HC($C(e,t)):structuredClone(e):(e,t)=>HC($C(e,t));function yH(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function vH(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function xH(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||yH,i=e.options.footnoteBackLabel||vH,l=e.options.footnoteLabel||"Footnotes",d=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},g=[];let x=-1;for(;++x<e.footnoteOrder.length;){const _=e.footnoteById.get(e.footnoteOrder[x]);if(!_)continue;const C=e.all(_),E=String(_.identifier).toUpperCase(),A=ng(E.toLowerCase());let D=0;const I=[],L=e.footnoteCounts.get(E);for(;L!==void 0&&++D<=L;){I.length>0&&I.push({type:"text",value:" "});let q=typeof n=="string"?n:n(x,D);typeof q=="string"&&(q={type:"text",value:q}),I.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+A+(D>1?"-"+D:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(x,D),className:["data-footnote-backref"]},children:Array.isArray(q)?q:[q]})}const B=C[C.length-1];if(B&&B.type==="element"&&B.tagName==="p"){const q=B.children[B.children.length-1];q&&q.type==="text"?q.value+=" ":B.children.push({type:"text",value:" "}),B.children.push(...I)}else C.push(...I);const z={type:"element",tagName:"li",properties:{id:t+"fn-"+A},children:e.wrap(C,!0)};e.patch(_,z),g.push(z)}if(g.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:d,properties:{...N0(a),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(g,!0)},{type:"text",value:`
`}]}}const QM=(function(e){if(e==null)return SH;if(typeof e=="function")return jb(e);if(typeof e=="object")return Array.isArray(e)?bH(e):_H(e);if(typeof e=="string")return wH(e);throw new Error("Expected function, string, or object as test")});function bH(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=QM(e[n]);return jb(i);function i(...l){let d=-1;for(;++d<t.length;)if(t[d].apply(this,l))return!0;return!1}}function _H(e){const t=e;return jb(n);function n(i){const l=i;let d;for(d in e)if(l[d]!==t[d])return!1;return!0}}function wH(e){return jb(t);function t(n){return n&&n.type===e}}function jb(e){return t;function t(n,i,l){return!!(EH(n)&&e.call(this,n,typeof i=="number"?i:void 0,l||void 0))}}function SH(){return!0}function EH(e){return e!==null&&typeof e=="object"&&"type"in e}const JM=[],CH=!0,GC=!1,TH="skip";function kH(e,t,n,i){let l;typeof t=="function"&&typeof n!="function"?(i=n,n=t):l=t;const d=QM(l),a=i?-1:1;g(e,void 0,[])();function g(x,_,C){const E=x&&typeof x=="object"?x:{};if(typeof E.type=="string"){const D=typeof E.tagName=="string"?E.tagName:typeof E.name=="string"?E.name:void 0;Object.defineProperty(A,"name",{value:"node ("+(x.type+(D?"<"+D+">":""))+")"})}return A;function A(){let D=JM,I,L,B;if((!t||d(x,_,C[C.length-1]||void 0))&&(D=jH(n(x,C)),D[0]===GC))return D;if("children"in x&&x.children){const z=x;if(z.children&&D[0]!==TH)for(L=(i?z.children.length:-1)+a,B=C.concat(z);L>-1&&L<z.children.length;){const q=z.children[L];if(I=g(q,L,B)(),I[0]===GC)return I;L=typeof I[1]=="number"?I[1]:L+a}}return D}}}function jH(e){return Array.isArray(e)?e:typeof e=="number"?[CH,e]:e==null?JM:[e]}function eD(e,t,n,i){let l,d,a;typeof t=="function"&&typeof n!="function"?(d=void 0,a=t,l=n):(d=t,a=n,l=i),kH(e,d,g,l);function g(x,_){const C=_[_.length-1],E=C?C.children.indexOf(x):void 0;return a(x,E,C)}}const q1={}.hasOwnProperty,AH={};function NH(e,t){const n=t||AH,i=new Map,l=new Map,d=new Map,a={...hH,...n.handlers},g={all:_,applyData:DH,definitionById:i,footnoteById:l,footnoteCounts:d,footnoteOrder:[],handlers:a,one:x,options:n,patch:MH,wrap:IH};return eD(e,function(C){if(C.type==="definition"||C.type==="footnoteDefinition"){const E=C.type==="definition"?i:l,A=String(C.identifier).toUpperCase();E.has(A)||E.set(A,C)}}),g;function x(C,E){const A=C.type,D=g.handlers[A];if(q1.call(g.handlers,A)&&D)return D(g,C,E);if(g.options.passThrough&&g.options.passThrough.includes(A)){if("children"in C){const{children:L,...B}=C,z=N0(B);return z.children=g.all(C),z}return N0(C)}return(g.options.unknownHandler||PH)(g,C,E)}function _(C){const E=[];if("children"in C){const A=C.children;let D=-1;for(;++D<A.length;){const I=g.one(A[D],C);if(I){if(D&&A[D-1].type==="break"&&(!Array.isArray(I)&&I.type==="text"&&(I.value=ZC(I.value)),!Array.isArray(I)&&I.type==="element")){const L=I.children[0];L&&L.type==="text"&&(L.value=ZC(L.value))}Array.isArray(I)?E.push(...I):E.push(I)}}}return E}}function MH(e,t){e.position&&(t.position=p9(e))}function DH(e,t){let n=t;if(e&&e.data){const i=e.data.hName,l=e.data.hChildren,d=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const a="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:a}}n.type==="element"&&d&&Object.assign(n.properties,N0(d)),"children"in n&&n.children&&l!==null&&l!==void 0&&(n.children=l)}return n}function PH(e,t){const n=t.data||{},i="value"in t&&!(q1.call(n,"hProperties")||q1.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function IH(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ZC(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function XC(e,t){const n=NH(e,t),i=n.one(e,void 0),l=xH(n),d=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return l&&d.children.push({type:"text",value:`
`},l),d}function OH(e,t){return e&&"run"in e?async function(n,i){const l=XC(n,{file:i,...t});await e.run(l,i)}:function(n,i){return XC(n,{file:i,...e||t})}}function KC(e){if(e)throw e}var z_,YC;function RH(){if(YC)return z_;YC=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l=function(_){return typeof Array.isArray=="function"?Array.isArray(_):t.call(_)==="[object Array]"},d=function(_){if(!_||t.call(_)!=="[object Object]")return!1;var C=e.call(_,"constructor"),E=_.constructor&&_.constructor.prototype&&e.call(_.constructor.prototype,"isPrototypeOf");if(_.constructor&&!C&&!E)return!1;var A;for(A in _);return typeof A>"u"||e.call(_,A)},a=function(_,C){n&&C.name==="__proto__"?n(_,C.name,{enumerable:!0,configurable:!0,value:C.newValue,writable:!0}):_[C.name]=C.newValue},g=function(_,C){if(C==="__proto__")if(e.call(_,C)){if(i)return i(_,C).value}else return;return _[C]};return z_=function x(){var _,C,E,A,D,I,L=arguments[0],B=1,z=arguments.length,q=!1;for(typeof L=="boolean"&&(q=L,L=arguments[1]||{},B=2),(L==null||typeof L!="object"&&typeof L!="function")&&(L={});B<z;++B)if(_=arguments[B],_!=null)for(C in _)E=g(L,C),A=g(_,C),L!==A&&(q&&A&&(d(A)||(D=l(A)))?(D?(D=!1,I=E&&l(E)?E:[]):I=E&&d(E)?E:{},a(L,{name:C,newValue:x(q,I,A)})):typeof A<"u"&&a(L,{name:C,newValue:A}));return L},z_}var LH=RH();const B_=rp(LH);function H1(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function zH(){const e=[],t={run:n,use:i};return t;function n(...l){let d=-1;const a=l.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);g(null,...l);function g(x,..._){const C=e[++d];let E=-1;if(x){a(x);return}for(;++E<l.length;)(_[E]===null||_[E]===void 0)&&(_[E]=l[E]);l=_,C?BH(C,g)(..._):a(null,..._)}}function i(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return e.push(l),t}}function BH(e,t){let n;return i;function i(...a){const g=e.length>a.length;let x;g&&a.push(l);try{x=e.apply(this,a)}catch(_){const C=_;if(g&&n)throw C;return l(C)}g||(x&&x.then&&typeof x.then=="function"?x.then(d,l):x instanceof Error?l(x):d(x))}function l(a,...g){n||(n=!0,t(a,...g))}function d(a){l(null,a)}}const hu={basename:FH,dirname:UH,extname:VH,join:qH,sep:"/"};function FH(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Cv(e);let n=0,i=-1,l=e.length,d;if(t===void 0||t.length===0||t.length>e.length){for(;l--;)if(e.codePointAt(l)===47){if(d){n=l+1;break}}else i<0&&(d=!0,i=l+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let a=-1,g=t.length-1;for(;l--;)if(e.codePointAt(l)===47){if(d){n=l+1;break}}else a<0&&(d=!0,a=l+1),g>-1&&(e.codePointAt(l)===t.codePointAt(g--)?g<0&&(i=l):(g=-1,i=a));return n===i?i=a:i<0&&(i=e.length),e.slice(n,i)}function UH(e){if(Cv(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function VH(e){Cv(e);let t=e.length,n=-1,i=0,l=-1,d=0,a;for(;t--;){const g=e.codePointAt(t);if(g===47){if(a){i=t+1;break}continue}n<0&&(a=!0,n=t+1),g===46?l<0?l=t:d!==1&&(d=1):l>-1&&(d=-1)}return l<0||n<0||d===0||d===1&&l===n-1&&l===i+1?"":e.slice(l,n)}function qH(...e){let t=-1,n;for(;++t<e.length;)Cv(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":HH(n)}function HH(e){Cv(e);const t=e.codePointAt(0)===47;let n=$H(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function $H(e,t){let n="",i=0,l=-1,d=0,a=-1,g,x;for(;++a<=e.length;){if(a<e.length)g=e.codePointAt(a);else{if(g===47)break;g=47}if(g===47){if(!(l===a-1||d===1))if(l!==a-1&&d===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(x=n.lastIndexOf("/"),x!==n.length-1){x<0?(n="",i=0):(n=n.slice(0,x),i=n.length-1-n.lastIndexOf("/")),l=a,d=0;continue}}else if(n.length>0){n="",i=0,l=a,d=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(l+1,a):n=e.slice(l+1,a),i=a-l-1;l=a,d=0}else g===46&&d>-1?d++:d=-1}return n}function Cv(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const GH={cwd:ZH};function ZH(){return"/"}function $1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function XH(e){if(typeof e=="string")e=new URL(e);else if(!$1(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return KH(e)}function KH(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(t)}const F_=["history","path","basename","stem","extname","dirname"];class tD{constructor(t){let n;t?$1(t)?n={path:t}:typeof t=="string"||YH(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":GH.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<F_.length;){const d=F_[i];d in n&&n[d]!==void 0&&n[d]!==null&&(this[d]=d==="history"?[...n[d]]:n[d])}let l;for(l in n)F_.includes(l)||(this[l]=n[l])}get basename(){return typeof this.path=="string"?hu.basename(this.path):void 0}set basename(t){V_(t,"basename"),U_(t,"basename"),this.path=hu.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?hu.dirname(this.path):void 0}set dirname(t){WC(this.basename,"dirname"),this.path=hu.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?hu.extname(this.path):void 0}set extname(t){if(U_(t,"extname"),WC(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hu.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){$1(t)&&(t=XH(t)),V_(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?hu.basename(this.path,this.extname):void 0}set stem(t){V_(t,"stem"),U_(t,"stem"),this.path=hu.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const l=this.message(t,n,i);throw l.fatal=!0,l}info(t,n,i){const l=this.message(t,n,i);return l.fatal=void 0,l}message(t,n,i){const l=new rs(t,n,i);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function U_(e,t){if(e&&e.includes(hu.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+hu.sep+"`")}function V_(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function WC(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function YH(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const WH=(function(e){const i=this.constructor.prototype,l=i[e],d=function(){return l.apply(d,arguments)};return Object.setPrototypeOf(d,i),d}),QH={}.hasOwnProperty;class L2 extends WH{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zH()}copy(){const t=new L2;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(B_(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?($_("data",this.frozen),this.namespace[t]=n,this):QH.call(this.namespace,t)&&this.namespace[t]||void 0:t?($_("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const l=n.call(t,...i);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Hx(t),i=this.parser||this.Parser;return q_("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),q_("process",this.parser||this.Parser),H_("process",this.compiler||this.Compiler),n?l(void 0,n):new Promise(l);function l(d,a){const g=Hx(t),x=i.parse(g);i.run(x,g,function(C,E,A){if(C||!E||!A)return _(C);const D=E,I=i.stringify(D,A);t$(I)?A.value=I:A.result=I,_(C,A)});function _(C,E){C||!E?a(C):d?d(E):n(void 0,E)}}}processSync(t){let n=!1,i;return this.freeze(),q_("processSync",this.parser||this.Parser),H_("processSync",this.compiler||this.Compiler),this.process(t,l),JC("processSync","process",n),i;function l(d,a){n=!0,KC(d),i=a}}run(t,n,i){QC(t),this.freeze();const l=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?d(void 0,i):new Promise(d);function d(a,g){const x=Hx(n);l.run(t,x,_);function _(C,E,A){const D=E||t;C?g(C):a?a(D):i(void 0,D,A)}}}runSync(t,n){let i=!1,l;return this.run(t,n,d),JC("runSync","run",i),l;function d(a,g){KC(a),l=g,i=!0}}stringify(t,n){this.freeze();const i=Hx(n),l=this.compiler||this.Compiler;return H_("stringify",l),QC(t),l(t,i)}use(t,...n){const i=this.attachers,l=this.namespace;if($_("use",this.frozen),t!=null)if(typeof t=="function")x(t,n);else if(typeof t=="object")Array.isArray(t)?g(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function d(_){if(typeof _=="function")x(_,[]);else if(typeof _=="object")if(Array.isArray(_)){const[C,...E]=_;x(C,E)}else a(_);else throw new TypeError("Expected usable value, not `"+_+"`")}function a(_){if(!("plugins"in _)&&!("settings"in _))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");g(_.plugins),_.settings&&(l.settings=B_(!0,l.settings,_.settings))}function g(_){let C=-1;if(_!=null)if(Array.isArray(_))for(;++C<_.length;){const E=_[C];d(E)}else throw new TypeError("Expected a list of plugins, not `"+_+"`")}function x(_,C){let E=-1,A=-1;for(;++E<i.length;)if(i[E][0]===_){A=E;break}if(A===-1)i.push([_,...C]);else if(C.length>0){let[D,...I]=C;const L=i[A][1];H1(L)&&H1(D)&&(D=B_(!0,L,D)),i[A]=[_,D,...I]}}}}const JH=new L2().freeze();function q_(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function H_(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function $_(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function QC(e){if(!H1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function JC(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Hx(e){return e$(e)?e:new tD(e)}function e$(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function t$(e){return typeof e=="string"||n$(e)}function n$(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const r$="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",eT=[],tT={allowDangerousHtml:!0},i$=/^(https?|ircs?|mailto|xmpp)$/i,a$=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Ab(e){const t=o$(e),n=s$(e);return l$(t.runSync(t.parse(n),n),e)}function o$(e){const t=e.rehypePlugins||eT,n=e.remarkPlugins||eT,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...tT}:tT;return JH().use(Fq).use(n).use(OH,i).use(t)}function s$(e){const t=e.children||"",n=new tD;return typeof t=="string"&&(n.value=t),n}function l$(e,t){const n=t.allowedElements,i=t.allowElement,l=t.components,d=t.disallowedElements,a=t.skipHtml,g=t.unwrapDisallowed,x=t.urlTransform||c$;for(const C of a$)Object.hasOwn(t,C.from)&&(""+C.from+(C.to?"use `"+C.to+"` instead":"remove it")+r$+C.id,void 0);return eD(e,_),x9(e,{Fragment:c.Fragment,components:l,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0});function _(C,E,A){if(C.type==="raw"&&A&&typeof E=="number")return a?A.children.splice(E,1):A.children[E]={type:"text",value:C.value},E;if(C.type==="element"){let D;for(D in O_)if(Object.hasOwn(O_,D)&&Object.hasOwn(C.properties,D)){const I=C.properties[D],L=O_[D];(L===null||L.includes(C.tagName))&&(C.properties[D]=x(String(I||""),D,C))}}if(C.type==="element"){let D=n?!n.includes(C.tagName):d?d.includes(C.tagName):!1;if(!D&&i&&typeof E=="number"&&(D=!i(C,E,A)),D&&A&&typeof E=="number")return g&&C.children?A.children.splice(E,1,...C.children):A.children.splice(E,1),E}}}function c$(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),l=e.indexOf("/");return t===-1||l!==-1&&t>l||n!==-1&&t>n||i!==-1&&t>i||i$.test(e.slice(0,t))?e:""}function u$({message:e,isBot:t,timestamp:n,enableTypingEffect:i=!1}){const{isLoggedIn:l,avatarUrl:d}=Li(),a=k.useRef(!1);k.useEffect(()=>{i&&(a.current=!0)},[i]);const g=t&&(i||a.current),{displayedText:x,isTyping:_}=VV(g?e:"",{speed:20}),C=g&&(_||x)?x:e;return c.jsxs("div",{className:Kt("flex gap-3 mb-4",!t&&"flex-row-reverse"),children:[c.jsx("div",{className:Kt("h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden",t?"bg-[#008DDA]":"bg-gray-200"),children:t?c.jsx(Vw,{className:"h-5 w-5 text-white"}):l&&d?c.jsx("img",{src:d,alt:"User avatar",className:"h-full w-full object-cover"}):c.jsx(dv,{className:"h-5 w-5 text-gray-600"})}),c.jsxs("div",{className:Kt("flex flex-col gap-1 max-w-[85%]",!t&&"items-end"),children:[c.jsx("div",{className:Kt("px-4 py-2 rounded-2xl break-words",t?"bg-gray-100 text-gray-800 rounded-tl-none":"text-white rounded-tr-none"),style:t?{wordBreak:"break-word"}:{backgroundColor:"#008DDA",wordBreak:"break-word"},children:t?c.jsx("div",{className:"text-sm prose prose-sm max-w-none prose-p:my-1 prose-ul:my-1 prose-ol:my-1 prose-li:my-0.5",children:c.jsx(Ab,{components:{p:({children:E})=>c.jsx("p",{className:"mb-2 last:mb-0",children:E}),ul:({children:E})=>c.jsx("ul",{className:"list-disc list-inside mb-2 last:mb-0",children:E}),ol:({children:E})=>c.jsx("ol",{className:"list-decimal list-inside mb-2 last:mb-0",children:E}),li:({children:E})=>c.jsx("li",{className:"mb-1",children:E}),strong:({children:E})=>c.jsx("strong",{className:"font-semibold",children:E}),em:({children:E})=>c.jsx("em",{className:"italic",children:E}),code:({children:E})=>c.jsx("code",{className:"bg-gray-200 px-1 py-0.5 rounded text-xs",children:E}),a:({children:E,href:A})=>c.jsx("a",{href:A,className:"text-[#008DDA] underline",target:"_blank",rel:"noopener noreferrer",children:E})},children:C})}):c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:C})}),n&&c.jsx("span",{className:"text-xs text-gray-400 px-2",children:n})]})]})}function d$(){return c.jsxs("div",{className:"flex gap-3 mb-4",children:[c.jsx("div",{className:"h-8 w-8 rounded-full bg-[#008DDA] flex items-center justify-center flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),c.jsx("div",{className:"flex flex-col gap-1",children:c.jsx("div",{className:"px-4 py-3 rounded-2xl bg-gray-100 rounded-tl-none",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"0ms"}}),c.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"150ms"}}),c.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce",style:{animationDelay:"300ms"}})]})})})]})}function h$({messages:e,isTyping:t,isLoading:n}){const i=k.useRef(null),l=k.useRef(0),d=Wi(a=>a.streamingMessageId);return k.useEffect(()=>{(e.length>l.current||t)&&i.current?.scrollIntoView({behavior:"smooth"}),l.current=e.length},[e.length,t]),k.useEffect(()=>{!n&&e.length>0&&i.current?.scrollIntoView({behavior:"smooth"})},[n]),c.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-2 min-h-0",children:n?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[c.jsx(xs,{className:"h-8 w-8 text-[#008DDA] animate-spin mb-4"}),c.jsx("p",{className:"text-sm text-gray-500",children:"ang ti lch s tr chuyn..."})]}):e.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[c.jsx("div",{className:"h-16 w-16 rounded-full bg-[#008DDA]/10 flex items-center justify-center mb-4",children:c.jsx("svg",{className:"h-8 w-8 text-[#008DDA]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Xin cho! "}),c.jsx("p",{className:"text-sm text-gray-500",children:"Ti l tr l AI ca bn. Hy hi ti bt k iu g v bt ng sn!"})]}):c.jsxs(c.Fragment,{children:[e.map(a=>c.jsx(u$,{message:a.message,isBot:a.isBot,timestamp:a.timestamp,enableTypingEffect:a.id===d},a.id)),t&&c.jsx(d$,{}),c.jsx("div",{ref:i})]})})}const Nb=k.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{className:Kt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Nb.displayName="Textarea";function f$({onSendMessage:e,disabled:t}){const[n,i]=k.useState(""),l=()=>{n.trim()&&!t&&(e(n.trim()),i(""))},d=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),l())};return c.jsxs("div",{className:"border-t bg-white px-4 py-3 rounded-b-lg",children:[c.jsxs("div",{className:"flex gap-2 items-end",children:[c.jsx(Nb,{value:n,onChange:a=>i(a.target.value),onKeyDown:d,placeholder:"Nhp tin nhn ca bn...",disabled:t,className:"min-h-[40px] max-h-32 resize-none rounded-xl border-gray-200 focus-visible:ring-[#008DDA]",rows:1}),c.jsx(Nr,{onClick:l,disabled:!n.trim()||t,size:"icon",className:"h-10 w-10 rounded-xl flex-shrink-0 cursor-pointer",style:{backgroundColor:"#008DDA"},onMouseEnter:a=>{!t&&n.trim()&&(a.currentTarget.style.backgroundColor="#0064A6")},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#008DDA"},children:c.jsx(A3,{className:"h-5 w-5"})})]}),c.jsx("p",{className:"text-xs text-gray-400 mt-2 hidden md:block",children:"Nhn Enter  gi, Shift + Enter  xung dng"})]})}const p$=["Tm 23 t  TP.HCM nn mua khu no?"," TP.HCM, cn h hay nh ph d sng hn?","T vn mua nh ln u","Khu no  TP.HCM ph hp gia nh tr?"];function m$(){const e=Ta();return c.jsxs("div",{className:"flex flex-col items-center justify-start h-full px-6 py-6 text-center overflow-y-auto",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx("div",{className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full flex items-center justify-center shadow-lg",style:{background:"linear-gradient(135deg, #008DDA 0%, #0064A6 100%)"},children:c.jsx(Vw,{className:"h-8 w-8 sm:h-10 sm:w-10 text-white"})}),c.jsx("div",{className:"absolute -bottom-1 -right-1 h-5 w-5 sm:h-6 sm:w-6 bg-green-500 rounded-full border-4 border-white"})]}),c.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Xin cho! "}),c.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4 sm:mb-6 max-w-sm",children:"ng nhp  tr chuyn vi tr l AI v nhn t vn bt ng sn ph hp vi nhu cu ca bn"}),c.jsxs("div",{className:"w-full mb-4 sm:mb-6 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2 sm:mb-3",children:[c.jsx(g3,{className:"h-4 w-4"}),c.jsx("span",{className:"font-medium",children:"Ti c th gip bn:"})]}),p$.map((t,n)=>c.jsx("div",{className:"cursor-pointer bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg px-3 py-2 sm:px-4 sm:py-3 text-left text-xs sm:text-sm text-gray-700 border border-gray-200 hover:border-[#008DDA]/30 transition-all cursor-default group",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-[#008DDA] mt-0.5 group-hover:scale-110 transition-transform",children:""}),c.jsx("span",{className:"flex-1",children:t})]})},n))]}),c.jsxs(Nr,{onClick:()=>e("/dang-nhap"),className:"w-full group relative overflow-hidden cursor-pointer",style:{backgroundColor:"#008DDA"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="#0064A6"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="#008DDA"},children:[c.jsx(o3,{className:"mr-2 h-4 w-4 transition-transform group-hover:translate-x-1"}),"ng nhp  tr chuyn"]}),c.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Min ph v khng gii hn cu hi"})]})}function g$({isOpen:e,onClose:t}){const n=Wi(D=>D.isTyping),i=Wi(D=>D.getCurrentMessages),l=Wi(D=>D.currentContext),d=Wi(D=>D.contextMetadata),{isLoggedIn:a}=Li(),{sendMessage:g,isSending:x}=UV(),{loadHistory:_,isLoading:C}=S2(),E=i();k.useEffect(()=>{e&&a&&_(l,d).catch(D=>{console.error("Failed to load chat history:",D)})},[e,a,l,d,_]);const A=async D=>{try{await g(D)}catch(I){console.error("Failed to send message:",I)}};return c.jsxs("div",{className:Kt("fixed bottom-24 right-6 w-[380px] h-[600px] bg-white rounded-lg shadow-2xl z-50 flex flex-col overflow-hidden","sm:w-[420px] sm:h-[650px]","transition-all duration-500 ease-out",e?"opacity-100 scale-100 translate-y-0 visible":"opacity-0 scale-90 translate-y-8 invisible"),style:{transformOrigin:"bottom right"},children:[c.jsx("div",{className:Kt("transition-all duration-500 ease-out",e?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"),style:{transitionDelay:e?"100ms":"0ms"},children:c.jsx(HV,{onMinimize:t})}),c.jsx("div",{className:Kt("flex-1 flex flex-col transition-all duration-500 ease-out overflow-y-auto",e?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),style:{transitionDelay:e?"200ms":"0ms"},children:a?c.jsxs(c.Fragment,{children:[c.jsx(h$,{messages:E,isTyping:n,isLoading:C}),c.jsx(f$,{onSendMessage:A,disabled:n||x})]}):c.jsx(m$,{})})]})}function nD({checkTokenExpired:e}){const{isOpen:t,toggleChat:n,setIsOpen:i,setCheckTokenExpired:l}=Wi();return k.useEffect(()=>(l(e),()=>{l(null)}),[e,l]),c.jsxs(c.Fragment,{children:[c.jsx(DV,{isOpen:t,onClick:n}),c.jsx(g$,{isOpen:t,onClose:()=>i(!1)})]})}const y$=()=>{const{showExpiredDialog:e,handleLoginRedirect:t,handleHomeRedirect:n,checkTokenExpired:i}=XN();return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"min-h-full flex flex-col",children:[c.jsx(aV,{}),c.jsx("main",{className:"flex-grow",children:c.jsx($0,{})}),c.jsx(ZN,{})]}),c.jsx(nD,{checkTokenExpired:i}),c.jsx(vM,{open:e,onLoginRedirect:t,onHomeRedirect:n})]})},Mm=({id:e,title:t,price:n,area:i,address:l,imageUrl:d,createdAt:a,isFavorited:g=!1,onFavoriteClick:x})=>{const[_,C]=k.useState(!1),[E,A]=k.useState(g),[D,I]=k.useState(!1),[L,B]=k.useState(!1),z=Li(H=>H.isLoggedIn);k.useEffect(()=>{(async()=>{if(z)try{I(!0);const W=await lb(Number(e));A(W.data)}catch(W){console.error("Error checking like status:",W)}finally{I(!1)}})()},[e,z]);const q=async H=>{if(H.preventDefault(),H.stopPropagation(),!z){mn.error("Vui lng ng nhp  thm vo yu thch!");return}if(!L)try{B(!0);const W=!E;W?await sb(Number(e)):await vv(Number(e)),A(W),x?.(e)}catch(W){console.error("Error toggling favorite:",W)}finally{B(!1)}};return c.jsxs(wi,{to:`/bat-dong-san/${e}`,className:"group flex flex-col bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 h-[400px]",onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:[c.jsx("div",{className:"relative w-full h-[55%] overflow-hidden rounded-t-lg flex-shrink-0",children:c.jsx("img",{src:d,alt:t,className:`absolute inset-0 w-full h-full object-cover transition-transform duration-300 ${_?"scale-110":"scale-100"}`})}),c.jsxs("div",{className:"flex flex-col h-[45%] p-4 flex-shrink-0",children:[c.jsx("h3",{className:"text-gray-900 font-semibold text-base line-clamp-2 break-words leading-tight h-[2.5rem] mb-2",children:t}),c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-[#008DDA] font-bold text-lg",children:op(n)}),c.jsx("span",{className:"text-gray-600 text-sm",children:eg(i)})]}),c.jsxs("div",{className:"flex items-start gap-1 text-gray-500 mb-2",children:[c.jsx(bs,{className:"w-3.5 h-3.5 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"line-clamp-1 text-sm",children:l})]}),c.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2",children:[c.jsx("span",{className:"text-gray-500 text-xs",children:xM(a)}),z&&c.jsx("button",{onClick:q,disabled:D||L,className:"text-gray-400 hover:text-red-500 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsx(bc,{className:`w-5 h-5 ${E?"fill-red-500 text-red-500":""}`})})]})]})]})},my=({name:e,postCount:t,imageUrl:n})=>c.jsxs("div",{className:"relative w-full h-[200px] overflow-hidden rounded-lg group cursor-pointer",children:[c.jsxs("div",{className:"absolute inset-0",children:[c.jsx("img",{src:n,alt:`${e} District`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"})]}),c.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-1",children:e}),c.jsxs("p",{className:"text-sm text-gray-200",children:[t.toLocaleString()," bi ng"]})]})]});function Xt({className:e,...t}){return c.jsx("div",{"data-slot":"skeleton",className:Kt("bg-accent animate-pulse rounded-md",e),...t})}const v$=Dj("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function x$({className:e,variant:t,...n}){return c.jsx("div",{"data-slot":"alert",role:"alert",className:Kt(v$({variant:t}),e),...n})}function b$({className:e,...t}){return c.jsx("div",{"data-slot":"alert-description",className:Kt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const _$="/assets/timnha-home-background-DRFeuEgX.png";function w$(e){return Object.prototype.toString.call(e)==="[object Object]"}function nT(e){return w$(e)||Array.isArray(e)}function S$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function z2(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;const l=JSON.stringify(Object.keys(e.breakpoints||{})),d=JSON.stringify(Object.keys(t.breakpoints||{}));return l!==d?!1:n.every(a=>{const g=e[a],x=t[a];return typeof g=="function"?`${g}`==`${x}`:!nT(g)||!nT(x)?g===x:z2(g,x)})}function rT(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function E$(e,t){if(e.length!==t.length)return!1;const n=rT(e),i=rT(t);return n.every((l,d)=>{const a=i[d];return z2(l,a)})}function B2(e){return typeof e=="number"}function G1(e){return typeof e=="string"}function Mb(e){return typeof e=="boolean"}function iT(e){return Object.prototype.toString.call(e)==="[object Object]"}function _a(e){return Math.abs(e)}function F2(e){return Math.sign(e)}function Ay(e,t){return _a(e-t)}function C$(e,t){if(e===0||t===0||_a(e)<=_a(t))return 0;const n=Ay(_a(e),_a(t));return _a(n/e)}function T$(e){return Math.round(e*100)/100}function qy(e){return Hy(e).map(Number)}function xc(e){return e[Tv(e)]}function Tv(e){return Math.max(0,e.length-1)}function U2(e,t){return t===Tv(e)}function aT(e,t=0){return Array.from(Array(e),(n,i)=>t+i)}function Hy(e){return Object.keys(e)}function rD(e,t){return[e,t].reduce((n,i)=>(Hy(i).forEach(l=>{const d=n[l],a=i[l],g=iT(d)&&iT(a);n[l]=g?rD(d,a):a}),n),{})}function Z1(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function k$(e,t){const n={start:i,center:l,end:d};function i(){return 0}function l(x){return d(x)/2}function d(x){return t-x}function a(x,_){return G1(e)?n[e](x):e(t,x,_)}return{measure:a}}function $y(){let e=[];function t(l,d,a,g={passive:!0}){let x;if("addEventListener"in l)l.addEventListener(d,a,g),x=()=>l.removeEventListener(d,a,g);else{const _=l;_.addListener(a),x=()=>_.removeListener(a)}return e.push(x),i}function n(){e=e.filter(l=>l())}const i={add:t,clear:n};return i}function j$(e,t,n,i){const l=$y(),d=1e3/60;let a=null,g=0,x=0;function _(){l.add(e,"visibilitychange",()=>{e.hidden&&I()})}function C(){D(),l.clear()}function E(B){if(!x)return;a||(a=B,n(),n());const z=B-a;for(a=B,g+=z;g>=d;)n(),g-=d;const q=g/d;i(q),x&&(x=t.requestAnimationFrame(E))}function A(){x||(x=t.requestAnimationFrame(E))}function D(){t.cancelAnimationFrame(x),a=null,g=0,x=0}function I(){a=null,g=0}return{init:_,destroy:C,start:A,stop:D,update:n,render:i}}function A$(e,t){const n=t==="rtl",i=e==="y",l=i?"y":"x",d=i?"x":"y",a=!i&&n?-1:1,g=C(),x=E();function _(I){const{height:L,width:B}=I;return i?L:B}function C(){return i?"top":n?"right":"left"}function E(){return i?"bottom":n?"left":"right"}function A(I){return I*a}return{scroll:l,cross:d,startEdge:g,endEdge:x,measureSize:_,direction:A}}function Qf(e=0,t=0){const n=_a(e-t);function i(_){return _<e}function l(_){return _>t}function d(_){return i(_)||l(_)}function a(_){return d(_)?i(_)?e:t:_}function g(_){return n?_-n*Math.ceil((_-t)/n):_}return{length:n,max:t,min:e,constrain:a,reachedAny:d,reachedMax:l,reachedMin:i,removeOffset:g}}function iD(e,t,n){const{constrain:i}=Qf(0,e),l=e+1;let d=a(t);function a(A){return n?_a((l+A)%l):i(A)}function g(){return d}function x(A){return d=a(A),E}function _(A){return C().set(g()+A)}function C(){return iD(e,g(),n)}const E={get:g,set:x,add:_,clone:C};return E}function N$(e,t,n,i,l,d,a,g,x,_,C,E,A,D,I,L,B,z,q){const{cross:H,direction:W}=e,ne=["INPUT","SELECT","TEXTAREA"],re={passive:!1},ee=$y(),oe=$y(),he=Qf(50,225).constrain(D.measure(20)),we={mouse:300,touch:400},ye={mouse:500,touch:600},Pe=I?43:25;let Ke=!1,ze=0,Je=0,Ae=!1,De=!1,ke=!1,st=!1;function me(Pt){if(!q)return;function Rt(er){(Mb(q)||q(Pt,er))&&lt(er)}const vn=t;ee.add(vn,"dragstart",er=>er.preventDefault(),re).add(vn,"touchmove",()=>{},re).add(vn,"touchend",()=>{}).add(vn,"touchstart",Rt).add(vn,"mousedown",Rt).add(vn,"touchcancel",Nt).add(vn,"contextmenu",Nt).add(vn,"click",At,!0)}function Ce(){ee.clear(),oe.clear()}function pe(){const Pt=st?n:t;oe.add(Pt,"touchmove",We,re).add(Pt,"touchend",Nt).add(Pt,"mousemove",We,re).add(Pt,"mouseup",Nt)}function Q(Pt){const Rt=Pt.nodeName||"";return ne.includes(Rt)}function Ee(){return(I?ye:we)[st?"mouse":"touch"]}function Ge(Pt,Rt){const vn=E.add(F2(Pt)*-1),er=C.byDistance(Pt,!I).distance;return I||_a(Pt)<he?er:B&&Rt?er*.5:C.byIndex(vn.get(),0).distance}function lt(Pt){const Rt=Z1(Pt,i);st=Rt,ke=I&&Rt&&!Pt.buttons&&Ke,Ke=Ay(l.get(),a.get())>=2,!(Rt&&Pt.button!==0)&&(Q(Pt.target)||(Ae=!0,d.pointerDown(Pt),_.useFriction(0).useDuration(0),l.set(a),pe(),ze=d.readPoint(Pt),Je=d.readPoint(Pt,H),A.emit("pointerDown")))}function We(Pt){if(!Z1(Pt,i)&&Pt.touches.length>=2)return Nt(Pt);const vn=d.readPoint(Pt),er=d.readPoint(Pt,H),$n=Ay(vn,ze),ir=Ay(er,Je);if(!De&&!st&&(!Pt.cancelable||(De=$n>ir,!De)))return Nt(Pt);const dt=d.pointerMove(Pt);$n>L&&(ke=!0),_.useFriction(.3).useDuration(.75),g.start(),l.add(W(dt)),Pt.preventDefault()}function Nt(Pt){const vn=C.byDistance(0,!1).index!==E.get(),er=d.pointerUp(Pt)*Ee(),$n=Ge(W(er),vn),ir=C$(er,$n),dt=Pe-10*ir,Xe=z+ir/50;De=!1,Ae=!1,oe.clear(),_.useDuration(dt).useFriction(Xe),x.distance($n,!I),st=!1,A.emit("pointerUp")}function At(Pt){ke&&(Pt.stopPropagation(),Pt.preventDefault(),ke=!1)}function Mt(){return Ae}return{init:me,destroy:Ce,pointerDown:Mt}}function M$(e,t){let i,l;function d(E){return E.timeStamp}function a(E,A){const I=`client${(A||e.scroll)==="x"?"X":"Y"}`;return(Z1(E,t)?E:E.touches[0])[I]}function g(E){return i=E,l=E,a(E)}function x(E){const A=a(E)-a(l),D=d(E)-d(i)>170;return l=E,D&&(i=E),A}function _(E){if(!i||!l)return 0;const A=a(l)-a(i),D=d(E)-d(i),I=d(E)-d(l)>170,L=A/D;return D&&!I&&_a(L)>.1?L:0}return{pointerDown:g,pointerMove:x,pointerUp:_,readPoint:a}}function D$(){function e(n){const{offsetTop:i,offsetLeft:l,offsetWidth:d,offsetHeight:a}=n;return{top:i,right:l+d,bottom:i+a,left:l,width:d,height:a}}return{measure:e}}function P$(e){function t(i){return e*(i/100)}return{measure:t}}function I$(e,t,n,i,l,d,a){const g=[e].concat(i);let x,_,C=[],E=!1;function A(B){return l.measureSize(a.measure(B))}function D(B){if(!d)return;_=A(e),C=i.map(A);function z(q){for(const H of q){if(E)return;const W=H.target===e,ne=i.indexOf(H.target),re=W?_:C[ne],ee=A(W?e:i[ne]);if(_a(ee-re)>=.5){B.reInit(),t.emit("resize");break}}}x=new ResizeObserver(q=>{(Mb(d)||d(B,q))&&z(q)}),n.requestAnimationFrame(()=>{g.forEach(q=>x.observe(q))})}function I(){E=!0,x&&x.disconnect()}return{init:D,destroy:I}}function O$(e,t,n,i,l,d){let a=0,g=0,x=l,_=d,C=e.get(),E=0;function A(){const re=i.get()-e.get(),ee=!x;let oe=0;return ee?(a=0,n.set(i),e.set(i),oe=re):(n.set(e),a+=re/x,a*=_,C+=a,e.add(a),oe=C-E),g=F2(oe),E=C,ne}function D(){const re=i.get()-t.get();return _a(re)<.001}function I(){return x}function L(){return g}function B(){return a}function z(){return H(l)}function q(){return W(d)}function H(re){return x=re,ne}function W(re){return _=re,ne}const ne={direction:L,duration:I,velocity:B,seek:A,settled:D,useBaseFriction:q,useBaseDuration:z,useFriction:W,useDuration:H};return ne}function R$(e,t,n,i,l){const d=l.measure(10),a=l.measure(50),g=Qf(.1,.99);let x=!1;function _(){return!(x||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function C(D){if(!_())return;const I=e.reachedMin(t.get())?"min":"max",L=_a(e[I]-t.get()),B=n.get()-t.get(),z=g.constrain(L/a);n.subtract(B*z),!D&&_a(B)<d&&(n.set(e.constrain(n.get())),i.useDuration(25).useBaseFriction())}function E(D){x=!D}return{shouldConstrain:_,constrain:C,toggleActive:E}}function L$(e,t,n,i,l){const d=Qf(-t+e,0),a=E(),g=C(),x=A();function _(I,L){return Ay(I,L)<=1}function C(){const I=a[0],L=xc(a),B=a.lastIndexOf(I),z=a.indexOf(L)+1;return Qf(B,z)}function E(){return n.map((I,L)=>{const{min:B,max:z}=d,q=d.constrain(I),H=!L,W=U2(n,L);return H?z:W||_(B,q)?B:_(z,q)?z:q}).map(I=>parseFloat(I.toFixed(3)))}function A(){if(t<=e+l)return[d.max];if(i==="keepSnaps")return a;const{min:I,max:L}=g;return a.slice(I,L)}return{snapsContained:x,scrollContainLimit:g}}function z$(e,t,n){const i=t[0],l=n?i-e:xc(t);return{limit:Qf(l,i)}}function B$(e,t,n,i){const d=t.min+.1,a=t.max+.1,{reachedMin:g,reachedMax:x}=Qf(d,a);function _(A){return A===1?x(n.get()):A===-1?g(n.get()):!1}function C(A){if(!_(A))return;const D=e*(A*-1);i.forEach(I=>I.add(D))}return{loop:C}}function F$(e){const{max:t,length:n}=e;function i(d){const a=d-t;return n?a/-n:0}return{get:i}}function U$(e,t,n,i,l){const{startEdge:d,endEdge:a}=e,{groupSlides:g}=l,x=E().map(t.measure),_=A(),C=D();function E(){return g(i).map(L=>xc(L)[a]-L[0][d]).map(_a)}function A(){return i.map(L=>n[d]-L[d]).map(L=>-_a(L))}function D(){return g(_).map(L=>L[0]).map((L,B)=>L+x[B])}return{snaps:_,snapsAligned:C}}function V$(e,t,n,i,l,d){const{groupSlides:a}=l,{min:g,max:x}=i,_=C();function C(){const A=a(d),D=!e||t==="keepSnaps";return n.length===1?[d]:D?A:A.slice(g,x).map((I,L,B)=>{const z=!L,q=U2(B,L);if(z){const H=xc(B[0])+1;return aT(H)}if(q){const H=Tv(d)-xc(B)[0]+1;return aT(H,xc(B)[0])}return I})}return{slideRegistry:_}}function q$(e,t,n,i,l){const{reachedAny:d,removeOffset:a,constrain:g}=i;function x(I){return I.concat().sort((L,B)=>_a(L)-_a(B))[0]}function _(I){const L=e?a(I):g(I),B=t.map((q,H)=>({diff:C(q-L,0),index:H})).sort((q,H)=>_a(q.diff)-_a(H.diff)),{index:z}=B[0];return{index:z,distance:L}}function C(I,L){const B=[I,I+n,I-n];if(!e)return I;if(!L)return x(B);const z=B.filter(q=>F2(q)===L);return z.length?x(z):xc(B)-n}function E(I,L){const B=t[I]-l.get(),z=C(B,L);return{index:I,distance:z}}function A(I,L){const B=l.get()+I,{index:z,distance:q}=_(B),H=!e&&d(B);if(!L||H)return{index:z,distance:I};const W=t[z]-q,ne=I+C(W,0);return{index:z,distance:ne}}return{byDistance:A,byIndex:E,shortcut:C}}function H$(e,t,n,i,l,d,a){function g(E){const A=E.distance,D=E.index!==t.get();d.add(A),A&&(i.duration()?e.start():(e.update(),e.render(1),e.update())),D&&(n.set(t.get()),t.set(E.index),a.emit("select"))}function x(E,A){const D=l.byDistance(E,A);g(D)}function _(E,A){const D=t.clone().set(E),I=l.byIndex(D.get(),A);g(I)}return{distance:x,index:_}}function $$(e,t,n,i,l,d,a,g){const x={passive:!0,capture:!0};let _=0;function C(D){if(!g)return;function I(L){if(new Date().getTime()-_>10)return;a.emit("slideFocusStart"),e.scrollLeft=0;const q=n.findIndex(H=>H.includes(L));B2(q)&&(l.useDuration(0),i.index(q,0),a.emit("slideFocus"))}d.add(document,"keydown",E,!1),t.forEach((L,B)=>{d.add(L,"focus",z=>{(Mb(g)||g(D,z))&&I(B)},x)})}function E(D){D.code==="Tab"&&(_=new Date().getTime())}return{init:C}}function wy(e){let t=e;function n(){return t}function i(x){t=a(x)}function l(x){t+=a(x)}function d(x){t-=a(x)}function a(x){return B2(x)?x:x.get()}return{get:n,set:i,add:l,subtract:d}}function aD(e,t){const n=e.scroll==="x"?a:g,i=t.style;let l=null,d=!1;function a(A){return`translate3d(${A}px,0px,0px)`}function g(A){return`translate3d(0px,${A}px,0px)`}function x(A){if(d)return;const D=T$(e.direction(A));D!==l&&(i.transform=n(D),l=D)}function _(A){d=!A}function C(){d||(i.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:C,to:x,toggleActive:_}}function G$(e,t,n,i,l,d,a,g,x){const C=qy(l),E=qy(l).reverse(),A=z().concat(q());function D(ee,oe){return ee.reduce((he,we)=>he-l[we],oe)}function I(ee,oe){return ee.reduce((he,we)=>D(he,oe)>0?he.concat([we]):he,[])}function L(ee){return d.map((oe,he)=>({start:oe-i[he]+.5+ee,end:oe+t-.5+ee}))}function B(ee,oe,he){const we=L(oe);return ee.map(ye=>{const Pe=he?0:-n,Ke=he?n:0,ze=he?"end":"start",Je=we[ye][ze];return{index:ye,loopPoint:Je,slideLocation:wy(-1),translate:aD(e,x[ye]),target:()=>g.get()>Je?Pe:Ke}})}function z(){const ee=a[0],oe=I(E,ee);return B(oe,n,!1)}function q(){const ee=t-a[0]-1,oe=I(C,ee);return B(oe,-n,!0)}function H(){return A.every(({index:ee})=>{const oe=C.filter(he=>he!==ee);return D(oe,t)<=.1})}function W(){A.forEach(ee=>{const{target:oe,translate:he,slideLocation:we}=ee,ye=oe();ye!==we.get()&&(he.to(ye),we.set(ye))})}function ne(){A.forEach(ee=>ee.translate.clear())}return{canLoop:H,clear:ne,loop:W,loopPoints:A}}function Z$(e,t,n){let i,l=!1;function d(x){if(!n)return;function _(C){for(const E of C)if(E.type==="childList"){x.reInit(),t.emit("slidesChanged");break}}i=new MutationObserver(C=>{l||(Mb(n)||n(x,C))&&_(C)}),i.observe(e,{childList:!0})}function a(){i&&i.disconnect(),l=!0}return{init:d,destroy:a}}function X$(e,t,n,i){const l={};let d=null,a=null,g,x=!1;function _(){g=new IntersectionObserver(I=>{x||(I.forEach(L=>{const B=t.indexOf(L.target);l[B]=L}),d=null,a=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:i}),t.forEach(I=>g.observe(I))}function C(){g&&g.disconnect(),x=!0}function E(I){return Hy(l).reduce((L,B)=>{const z=parseInt(B),{isIntersecting:q}=l[z];return(I&&q||!I&&!q)&&L.push(z),L},[])}function A(I=!0){if(I&&d)return d;if(!I&&a)return a;const L=E(I);return I&&(d=L),I||(a=L),L}return{init:_,destroy:C,get:A}}function K$(e,t,n,i,l,d){const{measureSize:a,startEdge:g,endEdge:x}=e,_=n[0]&&l,C=I(),E=L(),A=n.map(a),D=B();function I(){if(!_)return 0;const q=n[0];return _a(t[g]-q[g])}function L(){if(!_)return 0;const q=d.getComputedStyle(xc(i));return parseFloat(q.getPropertyValue(`margin-${x}`))}function B(){return n.map((q,H,W)=>{const ne=!H,re=U2(W,H);return ne?A[H]+C:re?A[H]+E:W[H+1][g]-q[g]}).map(_a)}return{slideSizes:A,slideSizesWithGaps:D,startGap:C,endGap:E}}function Y$(e,t,n,i,l,d,a,g,x){const{startEdge:_,endEdge:C,direction:E}=e,A=B2(n);function D(z,q){return qy(z).filter(H=>H%q===0).map(H=>z.slice(H,H+q))}function I(z){return z.length?qy(z).reduce((q,H,W)=>{const ne=xc(q)||0,re=ne===0,ee=H===Tv(z),oe=l[_]-d[ne][_],he=l[_]-d[H][C],we=!i&&re?E(a):0,ye=!i&&ee?E(g):0,Pe=_a(he-ye-(oe+we));return W&&Pe>t+x&&q.push(H),ee&&q.push(z.length),q},[]).map((q,H,W)=>{const ne=Math.max(W[H-1]||0);return z.slice(ne,q)}):[]}function L(z){return A?D(z,n):I(z)}return{groupSlides:L}}function W$(e,t,n,i,l,d,a){const{align:g,axis:x,direction:_,startIndex:C,loop:E,duration:A,dragFree:D,dragThreshold:I,inViewThreshold:L,slidesToScroll:B,skipSnaps:z,containScroll:q,watchResize:H,watchSlides:W,watchDrag:ne,watchFocus:re}=d,ee=2,oe=D$(),he=oe.measure(t),we=n.map(oe.measure),ye=A$(x,_),Pe=ye.measureSize(he),Ke=P$(Pe),ze=k$(g,Pe),Je=!E&&!!q,Ae=E||!!q,{slideSizes:De,slideSizesWithGaps:ke,startGap:st,endGap:me}=K$(ye,he,we,n,Ae,l),Ce=Y$(ye,Pe,B,E,he,we,st,me,ee),{snaps:pe,snapsAligned:Q}=U$(ye,ze,he,we,Ce),Ee=-xc(pe)+xc(ke),{snapsContained:Ge,scrollContainLimit:lt}=L$(Pe,Ee,Q,q,ee),We=Je?Ge:Q,{limit:Nt}=z$(Ee,We,E),At=iD(Tv(We),C,E),Mt=At.clone(),Ut=qy(n),Pt=({dragHandler:Xn,scrollBody:wr,scrollBounds:Bi,options:{loop:Jr}})=>{Jr||Bi.constrain(Xn.pointerDown()),wr.seek()},Rt=({scrollBody:Xn,translate:wr,location:Bi,offsetLocation:Jr,previousLocation:Xr,scrollLooper:Ci,slideLooper:Sr,dragHandler:ka,animation:qr,eventHandler:Ks,scrollBounds:So,options:{loop:Eo}},qa)=>{const da=Xn.settled(),Co=!So.shouldConstrain(),Ra=Eo?da:da&&Co,ws=Ra&&!ka.pointerDown();ws&&qr.stop();const $o=Bi.get()*qa+Xr.get()*(1-qa);Jr.set($o),Eo&&(Ci.loop(Xn.direction()),Sr.loop()),wr.to(Jr.get()),ws&&Ks.emit("settle"),Ra||Ks.emit("scroll")},vn=j$(i,l,()=>Pt(Mn),Xn=>Rt(Mn,Xn)),er=.68,$n=We[At.get()],ir=wy($n),dt=wy($n),Xe=wy($n),xe=wy($n),Re=O$(ir,Xe,dt,xe,A,er),Ve=q$(E,We,Ee,Nt,xe),Vt=H$(vn,At,Mt,Re,Ve,xe,a),Oe=F$(Nt),Le=$y(),Qe=X$(t,n,a,L),{slideRegistry:Tt}=V$(Je,q,We,lt,Ce,Ut),on=$$(e,n,Tt,Vt,Re,Le,a,re),Mn={ownerDocument:i,ownerWindow:l,eventHandler:a,containerRect:he,slideRects:we,animation:vn,axis:ye,dragHandler:N$(ye,e,i,l,xe,M$(ye,l),ir,vn,Vt,Re,Ve,At,a,Ke,D,I,z,er,ne),eventStore:Le,percentOfView:Ke,index:At,indexPrevious:Mt,limit:Nt,location:ir,offsetLocation:Xe,previousLocation:dt,options:d,resizeHandler:I$(t,a,l,n,ye,H,oe),scrollBody:Re,scrollBounds:R$(Nt,Xe,xe,Re,Ke),scrollLooper:B$(Ee,Nt,Xe,[ir,Xe,dt,xe]),scrollProgress:Oe,scrollSnapList:We.map(Oe.get),scrollSnaps:We,scrollTarget:Ve,scrollTo:Vt,slideLooper:G$(ye,Pe,Ee,De,ke,pe,We,Xe,n),slideFocus:on,slidesHandler:Z$(t,a,W),slidesInView:Qe,slideIndexes:Ut,slideRegistry:Tt,slidesToScroll:Ce,target:xe,translate:aD(ye,t)};return Mn}function Q$(){let e={},t;function n(_){t=_}function i(_){return e[_]||[]}function l(_){return i(_).forEach(C=>C(t,_)),x}function d(_,C){return e[_]=i(_).concat([C]),x}function a(_,C){return e[_]=i(_).filter(E=>E!==C),x}function g(){e={}}const x={init:n,emit:l,off:a,on:d,clear:g};return x}const J$={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function eG(e){function t(d,a){return rD(d,a||{})}function n(d){const a=d.breakpoints||{},g=Hy(a).filter(x=>e.matchMedia(x).matches).map(x=>a[x]).reduce((x,_)=>t(x,_),{});return t(d,g)}function i(d){return d.map(a=>Hy(a.breakpoints||{})).reduce((a,g)=>a.concat(g),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:i}}function tG(e){let t=[];function n(d,a){return t=a.filter(({options:g})=>e.optionsAtMedia(g).active!==!1),t.forEach(g=>g.init(d,e)),a.reduce((g,x)=>Object.assign(g,{[x.name]:x}),{})}function i(){t=t.filter(d=>d.destroy())}return{init:n,destroy:i}}function M0(e,t,n){const i=e.ownerDocument,l=i.defaultView,d=eG(l),a=tG(d),g=$y(),x=Q$(),{mergeOptions:_,optionsAtMedia:C,optionsMediaQueries:E}=d,{on:A,off:D,emit:I}=x,L=ye;let B=!1,z,q=_(J$,M0.globalOptions),H=_(q),W=[],ne,re,ee;function oe(){const{container:Ut,slides:Pt}=H;re=(G1(Ut)?e.querySelector(Ut):Ut)||e.children[0];const vn=G1(Pt)?re.querySelectorAll(Pt):Pt;ee=[].slice.call(vn||re.children)}function he(Ut){const Pt=W$(e,re,ee,i,l,Ut,x);if(Ut.loop&&!Pt.slideLooper.canLoop()){const Rt=Object.assign({},Ut,{loop:!1});return he(Rt)}return Pt}function we(Ut,Pt){B||(q=_(q,Ut),H=C(q),W=Pt||W,oe(),z=he(H),E([q,...W.map(({options:Rt})=>Rt)]).forEach(Rt=>g.add(Rt,"change",ye)),H.active&&(z.translate.to(z.location.get()),z.animation.init(),z.slidesInView.init(),z.slideFocus.init(Mt),z.eventHandler.init(Mt),z.resizeHandler.init(Mt),z.slidesHandler.init(Mt),z.options.loop&&z.slideLooper.loop(),re.offsetParent&&ee.length&&z.dragHandler.init(Mt),ne=a.init(Mt,W)))}function ye(Ut,Pt){const Rt=Ce();Pe(),we(_({startIndex:Rt},Ut),Pt),x.emit("reInit")}function Pe(){z.dragHandler.destroy(),z.eventStore.clear(),z.translate.clear(),z.slideLooper.clear(),z.resizeHandler.destroy(),z.slidesHandler.destroy(),z.slidesInView.destroy(),z.animation.destroy(),a.destroy(),g.clear()}function Ke(){B||(B=!0,g.clear(),Pe(),x.emit("destroy"),x.clear())}function ze(Ut,Pt,Rt){!H.active||B||(z.scrollBody.useBaseFriction().useDuration(Pt===!0?0:H.duration),z.scrollTo.index(Ut,Rt||0))}function Je(Ut){const Pt=z.index.add(1).get();ze(Pt,Ut,-1)}function Ae(Ut){const Pt=z.index.add(-1).get();ze(Pt,Ut,1)}function De(){return z.index.add(1).get()!==Ce()}function ke(){return z.index.add(-1).get()!==Ce()}function st(){return z.scrollSnapList}function me(){return z.scrollProgress.get(z.offsetLocation.get())}function Ce(){return z.index.get()}function pe(){return z.indexPrevious.get()}function Q(){return z.slidesInView.get()}function Ee(){return z.slidesInView.get(!1)}function Ge(){return ne}function lt(){return z}function We(){return e}function Nt(){return re}function At(){return ee}const Mt={canScrollNext:De,canScrollPrev:ke,containerNode:Nt,internalEngine:lt,destroy:Ke,off:D,on:A,emit:I,plugins:Ge,previousScrollSnap:pe,reInit:L,rootNode:We,scrollNext:Je,scrollPrev:Ae,scrollProgress:me,scrollSnapList:st,scrollTo:ze,selectedScrollSnap:Ce,slideNodes:At,slidesInView:Q,slidesNotInView:Ee};return we(t,n),setTimeout(()=>x.emit("init"),0),Mt}M0.globalOptions=void 0;function V2(e={},t=[]){const n=k.useRef(e),i=k.useRef(t),[l,d]=k.useState(),[a,g]=k.useState(),x=k.useCallback(()=>{l&&l.reInit(n.current,i.current)},[l]);return k.useEffect(()=>{z2(n.current,e)||(n.current=e,x())},[e,x]),k.useEffect(()=>{E$(i.current,t)||(i.current=t,x())},[t,x]),k.useEffect(()=>{if(S$()&&a){M0.globalOptions=V2.globalOptions;const _=M0(a,n.current,i.current);return d(_),()=>_.destroy()}else d(void 0)},[a,d]),[g,l]}V2.globalOptions=void 0;const oD=k.createContext(null);function Db(){const e=k.useContext(oD);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}function Gy({orientation:e="horizontal",opts:t,setApi:n,plugins:i,className:l,children:d,...a}){const[g,x]=V2({...t,axis:e==="horizontal"?"x":"y"},i),[_,C]=k.useState(!1),[E,A]=k.useState(!1),D=k.useCallback(z=>{z&&(C(z.canScrollPrev()),A(z.canScrollNext()))},[]),I=k.useCallback(()=>{x?.scrollPrev()},[x]),L=k.useCallback(()=>{x?.scrollNext()},[x]),B=k.useCallback(z=>{z.key==="ArrowLeft"?(z.preventDefault(),I()):z.key==="ArrowRight"&&(z.preventDefault(),L())},[I,L]);return k.useEffect(()=>{!x||!n||n(x)},[x,n]),k.useEffect(()=>{if(x)return D(x),x.on("reInit",D),x.on("select",D),()=>{x?.off("select",D)}},[x,D]),c.jsx(oD.Provider,{value:{carouselRef:g,api:x,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:I,scrollNext:L,canScrollPrev:_,canScrollNext:E},children:c.jsx("div",{onKeyDownCapture:B,className:Kt("relative",l),role:"region","aria-roledescription":"carousel","data-slot":"carousel",...a,children:d})})}function Zy({className:e,...t}){const{carouselRef:n,orientation:i}=Db();return c.jsx("div",{ref:n,className:"overflow-hidden","data-slot":"carousel-content",children:c.jsx("div",{className:Kt("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})}function Xy({className:e,...t}){const{orientation:n}=Db();return c.jsx("div",{role:"group","aria-roledescription":"slide","data-slot":"carousel-item",className:Kt("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",e),...t})}function Ky({className:e,variant:t="outline",size:n="icon",...i}){const{orientation:l,scrollPrev:d,canScrollPrev:a}=Db();return c.jsxs(Nr,{"data-slot":"carousel-previous",variant:t,size:n,className:Kt("absolute size-8 rounded-full",l==="horizontal"?"top-1/2 -left-12 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:d,...i,children:[c.jsx(Ij,{}),c.jsx("span",{className:"sr-only",children:"Previous slide"})]})}function Yy({className:e,variant:t="outline",size:n="icon",...i}){const{orientation:l,scrollNext:d,canScrollNext:a}=Db();return c.jsxs(Nr,{"data-slot":"carousel-next",variant:t,size:n,className:Kt("absolute size-8 rounded-full",l==="horizontal"?"top-1/2 -right-12 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!a,onClick:d,...i,children:[c.jsx(r5,{}),c.jsx("span",{className:"sr-only",children:"Next slide"})]})}const Wy=async e=>(await zi.post("properties/search",{filters:e.filters,sorts:e.sorts,rpp:e.rpp,page:e.page})).data,sD=async(e,t,n,i)=>(await zi.get(`properties/search/map?minLat=${e}&minLng=${t}&maxLat=${n}&maxLng=${i}`)).data,nG=async(e,t,n,i,l,d=200)=>(await zi.get(`recommendation/amenities/search/map?minLat=${e}&minLng=${t}&maxLat=${n}&maxLng=${i}&category=${l}&limit=${d}`)).data,lD=async e=>(await zi.get(`properties/${e}`)).data,rG=async e=>(await zi.post("properties",e)).data,iG=async(e,t)=>(await zi.put(`properties/${e}`,t)).data,aG=async e=>(await zi.delete(`properties/${e}`)).data,oG=async e=>(await zi.post("recommendation/prediction/property/price",e)).data,sG=async()=>(await zi.get("recommendation/prediction/history")).data,Lm=async(e,t,n=8,i=20,l)=>{let d;return l?d=await zi.get(`recommendation/home?lat=${e}&lng=${t}&limit=${n}&radius_km=${i}&user_id=${l}`):d=await zi.get(`recommendation/home?lat=${e}&lng=${t}&limit=${n}&radius_km=${i}`),d.data},lG=async(e,t=6,n=20)=>(await zi.get(`recommendation/related/${e}?limit=${t}&radius_km=${n}`)).data,cG=async e=>(await zi.post("recommendation/livability/scores/batch",e)).data,uG=async(e,t,n,i)=>(await zi.get("recommendation/news/map",{params:{minLat:e,minLng:t,maxLat:n,maxLng:i}})).data,dG=()=>{const[e,t]=k.useState("for_sale"),[n,i]=k.useState(""),l=Ta(),d=Li(De=>De.userId),[a,g]=k.useState([]),[x,_]=k.useState([]),[C,E]=k.useState([]),[A,D]=k.useState(null),[I,L]=k.useState(null),[B,z]=k.useState(!1),[q,H]=k.useState(!0),[W,ne]=k.useState(!0),[re,ee]=k.useState(!0),oe=[{id:"quan-1",name:"Qun 1",postCount:1234,imageUrl:"https://owa.bestprice.vn/images/destinations/uploads/quan-1-6094b9a6a8de1.jpg"},{id:"quan-3",name:"Qun 3",postCount:856,imageUrl:"https://blog.rever.vn/hubfs/Blog%20images/PhuLH/quan-2-1.jpg"},{id:"quan-7",name:"Qun 7",postCount:2451,imageUrl:"https://iwater.vn/Image/Picture/New/333/quan_7.jpg"},{id:"binh-thanh",name:"Qun Bnh Thnh",postCount:1876,imageUrl:"https://nhadathoangviet.com/wp-content/uploads/2024/04/Anh-man-hinh-2024-04-17-luc-10.29.19.png"},{id:"quan-11",name:"Qun 11",postCount:943,imageUrl:"https://maisonoffice.vn/wp-content/uploads/2024/04/1-gioi-thieu-tong-quan-ve-quan-11-tphcm.jpg"}],he=()=>{if(!navigator.geolocation){console.error("Geolocation is not supported by this browser"),L("denied"),z(!0);return}navigator.geolocation.getCurrentPosition(De=>{D({lat:De.coords.latitude,lng:De.coords.longitude}),L("granted"),z(!1),console.log("User location:",De.coords.latitude,De.coords.longitude)},De=>{console.error("Error getting location:",De),L("denied"),z(!0)})},we=async()=>{try{ne(!0);const De=await Wy({filters:[{key:"listingType",operator:"equal",value:"for_sale"},{key:"approvalStatus",operator:"equal",value:"APPROVED"}],sorts:[{key:"createdAt",type:"DESC"}],rpp:8,page:1});g(De.data.items)}catch(De){console.error("Error fetching sale properties:",De)}finally{ne(!1)}},ye=async()=>{try{ee(!0);const De=await Wy({filters:[{key:"listingType",operator:"equal",value:"for_rent"},{key:"approvalStatus",operator:"equal",value:"APPROVED"}],sorts:[{key:"createdAt",type:"DESC"}],rpp:8,page:1});_(De.data.items)}catch(De){console.error("Error fetching rent properties:",De)}finally{ee(!1)}},Pe=k.useCallback(async()=>{try{if(H(!0),I==="granted"&&A){let De;if(d?De=await Lm(A.lat,A.lng,8,20,d):De=await Lm(A.lat,A.lng,8,20),De.status==="200"&&De.data?.items){const ke=De.data.items.map(st=>({id:st.id,title:st.title,price:st.price,priceUnit:st.price_unit,area:st.area,addressDistrict:st.address.split(",").map(me=>me.trim()).find(me=>me.includes("Qun")||me.includes("Huyn"))||"",addressStreet:st.address.split(",")[0]?.trim()||"",addressWard:st.address.split(",").map(me=>me.trim()).find(me=>me.includes("Phng")||me.includes("X"))||"",addressCity:"TPHCM",numBedrooms:st.num_bedrooms,numBathrooms:st.num_bathrooms,imageUrls:st.thumbnail_url?[st.thumbnail_url]:[],listingType:"for_sale",propertyType:"house",approvalStatus:"APPROVED",createdAt:"",updatedAt:new Date().toISOString(),userId:0,location:{type:"Point",coordinates:[0,0]}}));console.log("Mapped recommended properties:",ke),E(ke),z(!1)}else E([])}else E([]),z(!0)}catch(De){console.error("Error fetching recommended properties:",De),E([])}finally{H(!1)}},[I,A,d]),Ke=De=>{l(`/mua-nha?addressDistrict_eq=${encodeURIComponent(De)}`)};k.useEffect(()=>{he(),we(),ye()},[]),k.useEffect(()=>{I!==null&&Pe()},[I,A,Pe]);const ze=()=>{const De=n.trim();if(!De)return;const ke=encodeURIComponent(De);l(e==="for_sale"?`/mua-nha?title_lk=${ke}`:`/thue-nha?title_lk=${ke}`),console.log("Searching for:",De,"Type:",e)},Je=De=>{De.key==="Enter"&&(De.preventDefault(),ze())},Ae=()=>{l(e==="for_sale"?"/mua-nha":"/thue-nha")};return c.jsxs("div",{children:[c.jsxs("div",{className:"relative h-[600px] w-screen",children:[c.jsx("img",{src:_$,alt:"Home Background",className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center px-4",children:c.jsxs("div",{className:"bg-black/60 rounded-xl p-6 backdrop-blur-sm w-full max-w-3xl mx-auto",children:[c.jsxs("div",{className:"rounded-t-lg p-1 flex items-center justify-center space-x-1 mb-3",children:[c.jsx("button",{onClick:()=>t("for_sale"),className:Kt("px-6 py-2.5 rounded-md transition-colors cursor-pointer text-base sm:text-lg",e==="for_sale"?"bg-[#008DDA] text-white":"hover:bg-gray-700 text-gray-300"),children:"Mua nh"}),c.jsx("button",{onClick:()=>t("for_rent"),className:Kt("px-6 py-2.5 rounded-md transition-colors cursor-pointer text-base sm:text-lg",e==="for_rent"?"bg-[#008DDA] text-white":"hover:bg-gray-700 text-gray-300"),children:"Thu nh"})]}),c.jsx("div",{className:"w-full",children:c.jsxs("div",{className:"flex w-full",children:[c.jsx(Dr,{type:"text",value:n,onChange:De=>i(De.target.value),onKeyDown:Je,placeholder:`Tm kim ${e==="for_sale"?"nh  mua":"nh  thu"}...`,className:"h-[52px] bg-white text-gray-600 text-base sm:text-lg w-full rounded-r-none border-r-0 focus-visible:ring-[#008DDA] focus-visible:ring-2 focus-visible:ring-offset-0"}),c.jsx(Nr,{type:"button",onClick:ze,className:"h-[52px] rounded-l-none px-4 bg-[#008DDA] hover:bg-[#0072b0] cursor-pointer",children:c.jsx(Ry,{className:"w-5 h-5 text-white"})})]})})]})})]}),c.jsxs("section",{className:"py-12 px-4 max-w-7xl mx-auto",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-8",children:"Bt ng sn dnh cho bn"}),B&&I!=="granted"&&c.jsx(x$,{className:"mb-6 border-[#008DDA] bg-blue-50",children:c.jsx(b$,{className:"ml-2",children:c.jsx("div",{className:"flex items-start justify-between gap-4",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Chia s v tr  nhn gi  tt hn"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Cho php truy cp v tr ca bn  chng ti c th gi  nhng bt ng sn ph hp gn khu vc bn ang quan tm."}),c.jsx("button",{onClick:he,className:"mt-3 px-4 py-2 bg-[#008DDA] text-white text-sm rounded-md hover:bg-[#0072b0] transition-colors cursor-pointer",children:"Chia s v tr"})]})})})}),q?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[...Array(8)].map((De,ke)=>c.jsxs("div",{className:"space-y-3",children:[c.jsx(Xt,{className:"h-48 w-full rounded-lg"}),c.jsx(Xt,{className:"h-4 w-3/4"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(Xt,{className:"h-4 w-1/3"}),c.jsx(Xt,{className:"h-4 w-1/3"})]}),c.jsx(Xt,{className:"h-4 w-1/2"})]},ke))}):c.jsx(c.Fragment,{children:C.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:C.map(De=>c.jsx(Mm,{id:String(De.id),title:De.title,price:De.price,area:De.area,address:De.addressStreet+" "+De.addressWard+" "+De.addressDistrict+" "+De.addressCity,imageUrl:De.imageUrls?.[0]||"",createdAt:De.createdAt||"",onFavoriteClick:ke=>console.log("Favorite clicked:",ke)},De.id))}),c.jsx("div",{className:"text-center",children:c.jsx("button",{onClick:()=>Ae(),className:"px-6 py-3 bg-white text-[#008DDA] border-2 border-[#008DDA] rounded-lg font-medium hover:bg-[#008DDA] hover:text-white transition-colors duration-200 cursor-pointer",children:"Xem thm"})})]}):c.jsxs("div",{className:"text-center py-16",children:[c.jsx(bs,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Cha c gi  bt ng sn"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Vui lng chia s v tr ca bn  nhn c nhng gi  ph hp nht"})]})})]}),c.jsxs("section",{className:"py-12 px-4 max-w-7xl mx-auto",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-8",children:"Bt ng sn theo a im"}),c.jsxs("div",{className:"grid grid-cols-12 gap-4 mb-8",children:[c.jsx("div",{className:"col-span-12 md:col-span-8 lg:col-span-6",children:c.jsx("div",{onClick:()=>Ke(oe[0].id),children:c.jsx(my,{...oe[0]})})}),c.jsx("div",{className:"col-span-12 md:col-span-4 lg:col-span-6",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsx("div",{onClick:()=>Ke(oe[1].id),children:c.jsx(my,{...oe[1]})}),c.jsx("div",{onClick:()=>Ke(oe[2].id),children:c.jsx(my,{...oe[2]})})]})}),c.jsxs("div",{className:"col-span-12 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx("div",{onClick:()=>Ke(oe[3].id),children:c.jsx(my,{...oe[3]})}),c.jsx("div",{onClick:()=>Ke(oe[4].id),children:c.jsx(my,{...oe[4]})})]})]}),c.jsx("div",{className:"text-center",children:c.jsx("button",{onClick:()=>l("/mua-nha"),className:"px-6 py-3 bg-white text-[#008DDA] border-2 border-[#008DDA] rounded-lg font-medium hover:bg-[#008DDA] hover:text-white transition-colors duration-200 cursor-pointer",children:"Xem thm"})})]}),c.jsxs("section",{className:"py-12 px-4 max-w-7xl mx-auto",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-8",children:"Bt ng sn ng bn"}),W?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8",children:[...Array(4)].map((De,ke)=>c.jsxs("div",{className:"space-y-3",children:[c.jsx(Xt,{className:"h-48 w-full rounded-lg"}),c.jsx(Xt,{className:"h-4 w-3/4"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(Xt,{className:"h-4 w-1/3"}),c.jsx(Xt,{className:"h-4 w-1/3"})]}),c.jsx(Xt,{className:"h-4 w-1/2"})]},ke))}):c.jsxs(c.Fragment,{children:[c.jsx(Gy,{opts:{align:"start",loop:!0},className:"w-full",children:c.jsxs("div",{className:"relative",children:[c.jsx(Zy,{className:"-ml-2 md:-ml-4",children:a.map(De=>c.jsx(Xy,{className:"pl-2 md:pl-4 basis-full sm:basis-1/2 md:basis-1/3 lg:basis-1/4",children:c.jsxs("div",{className:"h-[420px]",children:[" ",c.jsx(Mm,{id:String(De.id),title:De.title,price:De.price,area:De.area,address:De.addressStreet+" "+De.addressWard+" "+De.addressDistrict+" "+De.addressCity,imageUrl:De.imageUrls?.[0]||"",createdAt:De.createdAt||""})]})},De.id))}),c.jsxs("div",{className:"hidden sm:block",children:[c.jsx(Ky,{className:"-left-4 sm:-left-5 lg:-left-6 cursor-pointer"}),c.jsx(Yy,{className:"-right-4 sm:-right-5 lg:-right-6 cursor-pointer"})]})]})}),c.jsx("div",{className:"text-center mt-8",children:c.jsx("button",{onClick:()=>l("/mua-nha"),className:"px-6 py-3 bg-white text-[#008DDA] border-2 border-[#008DDA] rounded-lg font-medium hover:bg-[#008DDA] hover:text-white transition-colors duration-200 cursor-pointer",children:"Xem tt c"})})]})]}),c.jsxs("section",{className:"py-12 px-4 max-w-7xl mx-auto",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-8",children:"Bt ng sn cho thu"}),re?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8",children:[...Array(4)].map((De,ke)=>c.jsxs("div",{className:"space-y-3",children:[c.jsx(Xt,{className:"h-48 w-full rounded-lg"}),c.jsx(Xt,{className:"h-4 w-3/4"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(Xt,{className:"h-4 w-1/3"}),c.jsx(Xt,{className:"h-4 w-1/3"})]}),c.jsx(Xt,{className:"h-4 w-1/2"})]},ke))}):c.jsxs(c.Fragment,{children:[c.jsx(Gy,{opts:{align:"start",loop:!0},className:"w-full",children:c.jsxs("div",{className:"relative",children:[c.jsx(Zy,{className:"-ml-2 md:-ml-4",children:x.map(De=>c.jsx(Xy,{className:"pl-2 md:pl-4 basis-full sm:basis-1/2 md:basis-1/3 lg:basis-1/4",children:c.jsxs("div",{className:"h-[420px]",children:[" ",c.jsx(Mm,{id:String(De.id),title:De.title,price:De.price,area:De.area,address:De.addressStreet+" "+De.addressWard+" "+De.addressDistrict+" "+De.addressCity,imageUrl:De.imageUrls?.[0]||"",createdAt:De.createdAt||""})]})},De.id))}),c.jsxs("div",{className:"hidden sm:block",children:[c.jsx(Ky,{className:"-left-4 sm:-left-5 lg:-left-6 cursor-pointer"}),c.jsx(Yy,{className:"-right-4 sm:-right-5 lg:-right-6 cursor-pointer"})]})]})}),c.jsx("div",{className:"text-center mt-8",children:c.jsx("button",{onClick:()=>l("/thue-nha"),className:"px-6 py-3 bg-white text-[#008DDA] border-2 border-[#008DDA] rounded-lg font-medium hover:bg-[#008DDA] hover:text-white transition-colors duration-200 cursor-pointer",children:"Xem tt c"})})]})]})]})},hG=()=>c.jsxs("div",{className:"max-w-4xl my-4 mx-auto p-6 bg-white shadow-md rounded-lg",children:[c.jsx("h3",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"V Chng Ti"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Cho mng bn n vi ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),", nn tng tin phong trong vic tm kim v gi  bt ng sn da trn Ch s Sng  mt ch s ton din nh gi cht lng cuc sng ti tng khu vc. Chng ti khng ch gip bn tm nh, m cn h tr bn tm kim mt cuc sng l tng, ni m s tin nghi, an ton v hnh phc c t ln hng u."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"S Mnh Ca Chng Ti"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:[c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," c thnh lp vi s mnh cch mng ha th trng bt ng sn bng cch kt hp cng ngh thng minh v d liu thc t. Chng ti tin rng vic chn nh khng ch da vo gi c hay v tr, m cn phi xem xt cc yu t nh hng n cht lng sng hng ngy nh mi trng xanh sch, h thng giao thng, tin ch y t, gio dc, an ninh v cng ng thn thin. Ch s Sng ca chng ti c xy dng da trn d liu t cc ngun uy tn, gip ngi dng d dng so snh v la chn bt ng sn ph hp vi li sng c nhn."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"i Ng ng Sau"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti l mt i ng am m gm cc chuyn gia cng ngh, nh phn tch d liu, chuyn vin bt ng sn v cc nh nghin cu  th. Vi kinh nghim phong ph t cc d n ln ti Vit Nam v quc t, chng ti cam kt mang n nhng gii php sng to, minh bch v d tip cn. i ng ca chng ti lun cp nht xu hng mi nht, t AI phn tch d liu n cc cng c trc quan ha,  m bo bn nhn c nhng gi  chnh xc v kp thi."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Gi Tr Ct Li"}),c.jsxs("ul",{className:"list-disc pl-6 mb-6 text-gray-700 leading-relaxed",children:[c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Tp Trung Vo Ngi Dng"}),": Mi tnh nng u c thit k  mang li gi tr thc s cho bn, t tm kim nhanh chng n gi  c nhn ha."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Minh Bch V ng Tin Cy"}),": Chng ti s dng d liu t ngun m v i tc uy tn, khng thin v hay qung co tr hnh."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Bn Vng V X Hi"}),": Chng ti u tin cc bt ng sn thn thin vi mi trng, gp phn xy dng cng ng sng tt hn."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"i Mi Lin Tc"}),": Cng ngh l ct li, v chng ti khng ngng ci tin  mang n tri nghim tt nht."]})]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Tm Nhn Tng Lai"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:'Chng ti hng ti vic tr thnh nn tng hng u ti Vit Nam v khu vc ng Nam , ni m mi ngi c th d dng tm thy "ngi nh m c" da trn Ch s Sng. Trong tng lai, chng ti s m rng tnh nng nh tch hp thc t o (VR)  thm quan nh, d bo xu hng th trng v hp tc vi cc nh pht trin bt ng sn  to ra nhng d n sng xanh.'}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Cm n bn  tin tng v ng hnh cng ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),". Hy cng chng ti khm ph mt cuc sng cht lng hn hm nay!"]})]});function fG(){const{pathname:e}=Zs();return k.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[e]),null}const pG=()=>c.jsxs("div",{className:"max-w-4xl my-4 mx-auto p-6 bg-white shadow-md rounded-lg",children:[c.jsx("h3",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Cu Hi Thng Gp"}),c.jsxs("p",{className:"mb-8 text-gray-700 leading-relaxed text-center",children:["Di y l mt s cu hi ph bin m ngi dng thng hi v ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),". Nu bn c thc mc khc, hy lin h vi chng ti!"]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-xl font-semibold mb-2 text-gray-800",children:"Ch s Sng l g?"}),c.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Ch s sng l mt ch s ton din do ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," pht trin, nh gi cht lng cuc sng ti tng khu vc da trn cc yu t nh mi trng, giao thng, y t, gio dc, an ninh v cng ng. N gip bn so snh v chn bt ng sn ph hp vi li sng ca mnh."]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xl font-semibold mb-2 text-gray-800",children:"Lm th no  s dng nn tng?"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Bn ch cn ng k ti khon min ph, nhp cc tiu ch tm kim nh v tr, ngn sch v u tin Ch s sng. H thng s gi  cc bt ng sn ph hp. Bn cng c th xem chi tit Ch s sng cho tng khu vc."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xl font-semibold mb-2 text-gray-800",children:"D liu trn nn tng c ng tin cy khng?"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:"C, chng ti thu thp d liu t cc ngun uy tn nh c quan nh nc, i tc bt ng sn v d liu m. Ch s sng c cp nht nh k  m bo tnh chnh xc v minh bch."})]}),c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xl font-semibold mb-2 text-gray-800",children:["S dng ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," c mt ph khng?"]}),c.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Hin ti ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," hon ton min ph cho ngi dng c nhn. Nhng trong tng lai chng ti s c cc gi premium vi tnh nng nng cao nh gi  c nhn ha su hn hoc bo co chi tit, tng  u tin ca tin ng."]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xl font-semibold mb-2 text-gray-800",children:"Ti c th lin h vi ai nu cn h tr?"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Bn c th gi email n support@timnha.com hoc s dng form lin h trn website. i ng h tr ca chng ti s phn hi trong vng 24 gi."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xl font-semibold mb-2 text-gray-800",children:"Nn tng c h tr trn thit b di ng khng?"}),c.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Hin ti timnha cha c phin bn mobile nhng bn c th s dng ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," bn web  c thit k responsive  gip bn tm kim bt ng sn mi lc mi ni."]})]})]})]}),mG=()=>c.jsxs("div",{className:"max-w-4xl my-4 mx-auto p-6 bg-white shadow-md rounded-lg",children:[c.jsx("h3",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"iu Khon S Dng"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Cho mng bn n vi ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),"! Bng cch truy cp hoc s dng nn tng ca chng ti, bn ng  tun th cc iu khon S dng sau y. Nu bn khng ng , vui lng khng s dng dch v. iu khon ny c hiu lc t ngy 08/11/2025 v c th c cp nht nh k."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"1. Gii Thiu"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:[c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," l nn tng tm kim v gi  bt ng sn da trn Ch s Sng, gip ngi dng tm kim ngi nh l tng da trn cht lng cuc sng. Chng ti cung cp dch v cho c ngi dng  ng nhp v cha ng nhp, vi cc quyn hn khc nhau nh m t di y."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"2. Quyn Truy Cp V S Dng"}),c.jsxs("ul",{className:"list-disc pl-6 mb-6 text-gray-700 leading-relaxed",children:[c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Ngi dng cha ng nhp"}),": Bn c th xem thng tin bt ng sn, tm kim v gi  da trn Ch s Sng. Tuy nhin, bn khng th ng tin, lu tr tm kim c nhn ha hoc truy cp cc tnh nng nng cao."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Ngi dng  ng nhp"}),": Ngoi vic xem v tm kim, bn c th ng tin v bt ng sn, qun l danh sch c nhn, nhn gi  ty chnh v tng tc vi cng ng. Bn phi cung cp thng tin chnh xc khi ng k v duy tr bo mt ti khon."]}),c.jsx("li",{className:"mb-2",children:"Bn phi t nht 18 tui  s dng dch v. Chng ti c quyn tm ngng hoc chm dt ti khon nu pht hin vi phm."})]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"3. Trch Nhim Ca Ngi Dng"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Bn chu trch nhim v ni dung bn ng, m bo tnh chnh xc, khng vi phm php lut, khng xm phm quyn s hu tr tu ca ngi khc. Khng c s dng nn tng cho mc ch thng mi tri php, spam hoc la o. ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," c quyn xa ni dung vi phm m khng cn thng bo trc."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"4. Quyn S Hu Tr Tu"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Tt c ni dung trn ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),", bao gm Ch s Sng, thit k v cng ngh, thuc s hu ca chng ti hoc i tc. Bn c php s dng cho mc ch c nhn nhng khng c sao chp, phn phi hoc khai thc thng mi m khng c s cho php bng vn bn."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"5. Gii Hn Trch Nhim"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:[c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),' cung cp dch v "nh hin c" m khng bo m tnh chnh xc hoc lin tc. Chng ti khng chu trch nhim v thit hi pht sinh t vic s dng nn tng, bao gm mt mt d liu hoc tranh chp bt ng sn. Gii hn trch nhim ca chng ti khng vt qu s tin bn  thanh ton (nu c).']}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"6. Bo Mt V D Liu"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti cam kt bo v d liu c nhn theo Chnh sch Bo mt. Bng cch s dng dch v, bn ng  cho chng ti thu thp v s dng d liu  ci thin tri nghim."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"7. Thay i iu Khon"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti c quyn sa i iu khon ny bt k lc no. Cc thay i s c ng ti trn website v c hiu lc ngay lp tc. Vic tip tc s dng dch v ng ngha vi vic chp nhn cc thay i."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"8. Gii Quyt Tranh Chp"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Bt k tranh chp no pht sinh t iu khon ny s c gii quyt theo php lut Vit Nam, ti ta n c thm quyn ti TP. H Ch Minh."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"9. Lin H"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Nu bn c cu hi v iu khon S dng, vui lng lin h qua email: support@timnha.com."})]}),gG=()=>c.jsxs("div",{className:"max-w-4xl my-4 mx-auto p-6 bg-white shadow-md rounded-lg",children:[c.jsx("h3",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Quy Ch Hot ng"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Quy ch hot ng ny quy nh cc nguyn tc v quy trnh vn hnh ca nn tng ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),". Bng cch s dng dch v, bn ng  tun th cc quy nh di y. Quy ch ny c hiu lc t ngy 08/11/2025 v c th c cp nht nh k  ph hp vi s pht trin ca nn tng."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"1. Gii Thiu"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:[c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," l nn tng tm kim v gi  bt ng sn da trn Ch s Sng, nhm gip ngi dng tm kim v giao dch bt ng sn mt cch hiu qu v minh bch. Nn tng h tr c ngi dng cha ng nhp v  ng nhp vi cc quyn hn khc nhau  m bo an ton v tin li."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"2. Quyn Hn Ngi Dng"}),c.jsxs("ul",{className:"list-disc pl-6 mb-6 text-gray-700 leading-relaxed",children:[c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Ngi dng cha ng nhp"}),": C th xem thng tin bt ng sn, tm kim v nhn gi  da trn Ch s Sng. Khng c php ng tin, bnh lun hoc truy cp cc tnh nng c nhn ha nng cao."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Ngi dng  ng nhp"}),": Ngoi cc quyn ca ngi dng cha ng nhp, c th ng tin bt ng sn, qun l tin ng, lu tr tm kim, nhn thng bo c nhn ha v tng tc vi ngi dng khc. Ngi dng phi xc thc ti khon  ng tin."]}),c.jsx("li",{className:"mb-2",children:"Tt c ngi dng phi tun th php lut Vit Nam v khng s dng nn tng cho cc hot ng bt hp php."})]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"3. Quy nh V ng Tin"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Ngi dng  ng nhp c th ng tin bt ng sn min ph hoc theo cc gi dch v (nu p dng). Tin ng phi bao gm thng tin chnh xc v v tr, gi c, din tch, hnh nh v m t chi tit. ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," c quyn kim duyt v xa tin vi phm, bao gm tin gi mo, trng lp hoc vi phm quyn s hu. Ngi dng chu trch nhim php l v ni dung tin ng."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"4. Quy Trnh X L Khiu Ni"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Nu pht hin tin ng vi phm, ngi dng c th bo co qua form lin h. i ng ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," s xem xt v x l trong vng 48 gi. Cc khiu ni v giao dch bt ng sn s c chuyn hng n c quan chc nng nu cn thit. Chng ti khuyn khch ngi dng xc minh thng tin trc khi giao dch."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"5. Bo V D Liu V An Ninh"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:[c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," cam kt bo v d liu ngi dng theo quy nh php lut. Chng ti s dng cc bin php an ninh  ngn chn truy cp tri php. Ngi dng khng c chia s thng tin ti khon hoc s dng phn mm c hi  can thip vo h thng."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"6. Trch Nhim Ca Nn Tng"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:[c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"}),' cung cp nn tng "nh hin c" v khng chu trch nhim v cc giao dch gia ngi dng. Chng ti n lc m bo tnh chnh xc ca Ch s Sng da trn d liu t ngun uy tn, nhng khng bo m tuyt i.']}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"7. Thay i Quy Ch"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti c quyn cp nht Quy ch ny v s thng bo qua website hoc email. Vic tip tc s dng dch v ng ngha vi vic chp nhn cc thay i."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"8. Lin H"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Nu bn c cu hi v Quy ch hot ng, vui lng lin h qua email: support@timnha.com."})]}),yG=()=>c.jsxs("div",{className:"max-w-4xl my-4 mx-auto p-6 bg-white shadow-md rounded-lg",children:[c.jsx("h3",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Chnh Sch Bo Mt"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:[c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," cam kt bo v quyn ring t v d liu c nhn ca bn. Chnh sch bo mt ny gii thch cch chng ti thu thp, s dng, chia s v bo v thng tin ca bn khi s dng nn tng. Chnh sch ny c hiu lc t ngy 08/11/2025 v c th c cp nht nh k. Bng cch s dng dch v, bn ng  vi cc iu khon di y."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"1. Thng Tin Chng Ti Thu Thp"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti thu thp cc loi thng tin sau:"}),c.jsxs("ul",{className:"list-disc pl-6 mb-6 text-gray-700 leading-relaxed",children:[c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Thng tin c nhn"}),": Khi bn ng k ti khon, chng ti thu thp email, tn, s in thoi v thng tin khc bn cung cp."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"D liu s dng"}),": Thng tin v cch bn tng tc vi nn tng, nh tm kim, xem bt ng sn, ng tin (nu ng nhp), a ch IP, loi thit b v trnh duyt."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"D liu t bn th ba"}),": Thng tin t i tc bt ng sn hoc dch v ng nhp x hi (nu p dng)."]}),c.jsxs("li",{className:"mb-2",children:[c.jsx("strong",{children:"Cookies v cng ngh tng t"}),":  ci thin tri nghim, chng ti s dng cookies  lu tr s thch v phn tch hnh vi."]})]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"2. Cch Chng Ti S Dng Thng Tin"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Thng tin ca bn c s dng : - Cung cp dch v: Gi  bt ng sn da trn Ch s Sng, qun l ti khon v tin ng. - Ci thin nn tng: Phn tch d liu  nng cao tnh nng v tri nghim ngi dng. - Giao tip: Gi thng bo, cp nht v h tr khch hng. - Qung co: Hin th qung co c nhn ha (nu c), nhng khng bn d liu cho bn th ba. - Tun th php lut: p ng yu cu t c quan chc nng."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"3. Chia S Thng Tin"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti ch chia s thng tin trong cc trng hp sau: - Vi i tc:  cung cp dch v, nh nh cung cp bt ng sn hoc dch v thanh ton. - Vi s ng  ca bn: Khi bn chia s tin ng cng khai. - Theo php lut: Khi bt buc phi tit l theo lnh ta hoc quy nh php l. Chng ti khng bn hoc cho thu d liu c nhn ca bn."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"4. Bo Mt D Liu"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti p dng cc bin php bo mt tiu chun ngnh, bao gm m ha d liu, tng la v kim sot truy cp. Tuy nhin, khng c h thng no l tuyt i an ton, v bn nn s dng mt khu mnh  bo v ti khon."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"5. Quyn Ca Bn"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Bn c quyn: - Truy cp v sa cha d liu c nhn. - Xa ti khon v d liu (tr khi cn lu gi theo php lut). - T chi nhn thng bo marketing. - Khiu ni v vic x l d liu.  thc hin cc quyn ny, lin h support@timnha.com."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"6. D Liu Tr Em"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Nn tng khng dnh cho tr em di 18 tui. Chng ti khng c  thu thp d liu t tr em. Nu pht hin, chng ti s xa ngay lp tc."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"7. Thay i Chnh Sch"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti c quyn cp nht chnh sch ny v s thng bo qua website hoc email. Vic tip tc s dng dch v ng ngha vi vic chp nhn cc thay i."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"8. Lin H"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Nu bn c cu hi v Chnh sch bo mt, vui lng lin h qua email: support@timnha.com."})]}),vG=()=>c.jsxs("div",{className:"max-w-4xl my-4 mx-auto p-6 bg-white shadow-md rounded-lg",children:[c.jsx("h3",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Quy nh ng Tin"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Quy nh ng tin ny p dng cho tt c ngi dng  ng nhp trn nn tng ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," khi ng ti thng tin bt ng sn. Mc tiu l m bo tnh minh bch, chnh xc v tun th php lut, gip xy dng mt cng ng ng tin cy. Quy nh ny c hiu lc t ngy 08/11/2025 v c th c cp nht nh k."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"1. iu Kin ng Tin"}),c.jsxs("ul",{className:"list-disc pl-6 mb-6 text-gray-700 leading-relaxed",children:[c.jsx("li",{className:"mb-2",children:"Ch ngi dng  ng nhp v xc thc ti khon mi c php ng tin bt ng sn."}),c.jsx("li",{className:"mb-2",children:"Mi ti khon c th ng tin min ph vi s lng gii hn (theo chnh sch hin hnh), hoc nng cp gi premium  ng thm."}),c.jsx("li",{className:"mb-2",children:"Tin ng phi lin quan n bt ng sn (nh , t ai, vn phng, v.v.) v khng c s dng cho mc ch qung co khc."})]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"2. Ni Dung Tin ng"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Tin ng phi bao gm cc thng tin bt buc v chnh xc:"}),c.jsxs("ul",{className:"list-disc pl-6 mb-6 text-gray-700 leading-relaxed",children:[c.jsx("li",{className:"mb-2",children:"V tr chnh xc (tnh/thnh ph, qun/huyn, a ch c th)."}),c.jsx("li",{className:"mb-2",children:"Gi c r rng, khng la di hoc che giu chi ph n."}),c.jsx("li",{className:"mb-2",children:"Din tch, loi hnh bt ng sn, tnh trng php l (giy t s hu, quy hoch)."}),c.jsx("li",{className:"mb-2",children:"Hnh nh thc t (ti thiu 3 nh), khng s dng hnh nh gi mo hoc sao chp t ngun khc m khng c quyn."}),c.jsx("li",{className:"mb-2",children:"M t chi tit, khng cha thng tin sai lch, phn bit i x hoc vi phm php lut Vit Nam."})]}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Cm ng tin cha ni dung: Qung co la o, bt hp php, khiu dm, bo lc, hoc xm phm quyn ring t ca ngi khc."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"3. Quy Trnh ng Tin"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:['- Bc 1: ng nhp v truy cp phn "ng Tin". - Bc 2: in y  thng tin theo form hng dn. - Bc 3: ',c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," s kim duyt t ng v th cng (nu cn) trc khi tin c hin th cng khai. - Thi gian ph duyt: Thng trong vng 24 gi. Tin vi phm s b t chi v thng bo l do."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"4. Qun L Tin ng"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Ngi dng c th chnh sa, gia hn hoc xa tin ng ca mnh. ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," c quyn xa hoc tm ngng tin ng nu pht hin vi phm m khng cn thng bo trc. Ngi dng lp li vi phm c th b kha ti khon."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"5. Trch Nhim Ca Ngi ng Tin"}),c.jsxs("p",{className:"mb-6 text-gray-700 leading-relaxed",children:["Bn chu hon ton trch nhim php l v ni dung tin ng. ",c.jsx("span",{className:"text-[#008DDA] font-semibold",children:"timnha"})," ch l nn tng trung gian v khng chu trch nhim v cc giao dch pht sinh. Khuyn ngh xc minh thng tin trc khi giao dch."]}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"6. X L Vi Phm"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Vi phm quy nh c th dn n: Cnh co, xa tin, tm ngng ti khon hoc chm dt vnh vin. Ngi dng c quyn khiu ni qua support@timnha.com."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"7. Thay i Quy nh"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Chng ti c quyn cp nht quy nh ny v s thng bo qua website hoc email. Vic tip tc ng tin ng ngha vi vic chp nhn cc thay i."}),c.jsx("h4",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"8. Lin H"}),c.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:"Nu bn c cu hi v Quy nh ng tin, vui lng lin h qua email: support@timnha.com."})]});function D0(e,[t,n]){return Math.min(n,Math.max(t,e))}function xG(e){const t=bG(e),n=k.forwardRef((i,l)=>{const{children:d,...a}=i,g=k.Children.toArray(d),x=g.find(wG);if(x){const _=x.props.children,C=g.map(E=>E===x?k.Children.count(_)>1?k.Children.only(null):k.isValidElement(_)?_.props.children:null:E);return c.jsx(t,{...a,ref:l,children:k.isValidElement(_)?k.cloneElement(_,void 0,C):null})}return c.jsx(t,{...a,ref:l,children:d})});return n.displayName=`${e}.Slot`,n}function bG(e){const t=k.forwardRef((n,i)=>{const{children:l,...d}=n;if(k.isValidElement(l)){const a=EG(l),g=SG(d,l.props);return l.type!==k.Fragment&&(g.ref=i?Pd(i,a):a),k.cloneElement(l,g)}return k.Children.count(l)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _G=Symbol("radix.slottable");function wG(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_G}function SG(e,t){const n={...t};for(const i in t){const l=e[i],d=t[i];/^on[A-Z]/.test(i)?l&&d?n[i]=(...g)=>{const x=d(...g);return l(...g),x}:l&&(n[i]=l):i==="style"?n[i]={...l,...d}:i==="className"&&(n[i]=[l,d].filter(Boolean).join(" "))}return{...e,...n}}function EG(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function q2(e){const t=k.useRef({value:e,previous:e});return k.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var cD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),CG="VisuallyHidden",TG=k.forwardRef((e,t)=>c.jsx(gr.span,{...e,ref:t,style:{...cD,...e.style}}));TG.displayName=CG;var kG=[" ","Enter","ArrowUp","ArrowDown"],jG=[" ","Enter"],Jf="Select",[Pb,Ib,AG]=cb(Jf),[rg]=Cc(Jf,[AG,gb]),Ob=gb(),[NG,Hh]=rg(Jf),[MG,DG]=rg(Jf),uD=e=>{const{__scopeSelect:t,children:n,open:i,defaultOpen:l,onOpenChange:d,value:a,defaultValue:g,onValueChange:x,dir:_,name:C,autoComplete:E,disabled:A,required:D,form:I}=e,L=Ob(t),[B,z]=k.useState(null),[q,H]=k.useState(null),[W,ne]=k.useState(!1),re=xv(_),[ee,oe]=zh({prop:i,defaultProp:l??!1,onChange:d,caller:Jf}),[he,we]=zh({prop:a,defaultProp:g,onChange:x,caller:Jf}),ye=k.useRef(null),Pe=B?I||!!B.closest("form"):!0,[Ke,ze]=k.useState(new Set),Je=Array.from(Ke).map(Ae=>Ae.props.value).join(";");return c.jsx(YA,{...L,children:c.jsxs(NG,{required:D,scope:t,trigger:B,onTriggerChange:z,valueNode:q,onValueNodeChange:H,valueNodeHasChildren:W,onValueNodeHasChildrenChange:ne,contentId:gu(),value:he,onValueChange:we,open:ee,onOpenChange:oe,dir:re,triggerPointerDownPosRef:ye,disabled:A,children:[c.jsx(Pb.Provider,{scope:t,children:c.jsx(MG,{scope:e.__scopeSelect,onNativeOptionAdd:k.useCallback(Ae=>{ze(De=>new Set(De).add(Ae))},[]),onNativeOptionRemove:k.useCallback(Ae=>{ze(De=>{const ke=new Set(De);return ke.delete(Ae),ke})},[]),children:n})}),Pe?c.jsxs(DD,{"aria-hidden":!0,required:D,tabIndex:-1,name:C,autoComplete:E,value:he,onChange:Ae=>we(Ae.target.value),disabled:A,form:I,children:[he===void 0?c.jsx("option",{value:""}):null,Array.from(Ke)]},Je):null]})})};uD.displayName=Jf;var dD="SelectTrigger",hD=k.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:i=!1,...l}=e,d=Ob(n),a=Hh(dD,n),g=a.disabled||i,x=Vr(t,a.onTriggerChange),_=Ib(n),C=k.useRef("touch"),[E,A,D]=ID(L=>{const B=_().filter(H=>!H.disabled),z=B.find(H=>H.value===a.value),q=OD(B,L,z);q!==void 0&&a.onValueChange(q.value)}),I=L=>{g||(a.onOpenChange(!0),D()),L&&(a.triggerPointerDownPosRef.current={x:Math.round(L.pageX),y:Math.round(L.pageY)})};return c.jsx(WA,{asChild:!0,...d,children:c.jsx(gr.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:g,"data-disabled":g?"":void 0,"data-placeholder":PD(a.value)?"":void 0,...l,ref:x,onClick:Tn(l.onClick,L=>{L.currentTarget.focus(),C.current!=="mouse"&&I(L)}),onPointerDown:Tn(l.onPointerDown,L=>{C.current=L.pointerType;const B=L.target;B.hasPointerCapture(L.pointerId)&&B.releasePointerCapture(L.pointerId),L.button===0&&L.ctrlKey===!1&&L.pointerType==="mouse"&&(I(L),L.preventDefault())}),onKeyDown:Tn(l.onKeyDown,L=>{const B=E.current!=="";!(L.ctrlKey||L.altKey||L.metaKey)&&L.key.length===1&&A(L.key),!(B&&L.key===" ")&&kG.includes(L.key)&&(I(),L.preventDefault())})})})});hD.displayName=dD;var fD="SelectValue",pD=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:i,style:l,children:d,placeholder:a="",...g}=e,x=Hh(fD,n),{onValueNodeHasChildrenChange:_}=x,C=d!==void 0,E=Vr(t,x.onValueNodeChange);return ns(()=>{_(C)},[_,C]),c.jsx(gr.span,{...g,ref:E,style:{pointerEvents:"none"},children:PD(x.value)?c.jsx(c.Fragment,{children:a}):d})});pD.displayName=fD;var PG="SelectIcon",mD=k.forwardRef((e,t)=>{const{__scopeSelect:n,children:i,...l}=e;return c.jsx(gr.span,{"aria-hidden":!0,...l,ref:t,children:i||""})});mD.displayName=PG;var IG="SelectPortal",gD=e=>c.jsx(yb,{asChild:!0,...e});gD.displayName=IG;var ep="SelectContent",yD=k.forwardRef((e,t)=>{const n=Hh(ep,e.__scopeSelect),[i,l]=k.useState();if(ns(()=>{l(new DocumentFragment)},[]),!n.open){const d=i;return d?Lh.createPortal(c.jsx(vD,{scope:e.__scopeSelect,children:c.jsx(Pb.Slot,{scope:e.__scopeSelect,children:c.jsx("div",{children:e.children})})}),d):null}return c.jsx(xD,{...e,ref:t})});yD.displayName=ep;var hc=10,[vD,$h]=rg(ep),OG="SelectContentImpl",RG=xG("SelectContent.RemoveScroll"),xD=k.forwardRef((e,t)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:d,onPointerDownOutside:a,side:g,sideOffset:x,align:_,alignOffset:C,arrowPadding:E,collisionBoundary:A,collisionPadding:D,sticky:I,hideWhenDetached:L,avoidCollisions:B,...z}=e,q=Hh(ep,n),[H,W]=k.useState(null),[ne,re]=k.useState(null),ee=Vr(t,We=>W(We)),[oe,he]=k.useState(null),[we,ye]=k.useState(null),Pe=Ib(n),[Ke,ze]=k.useState(!1),Je=k.useRef(!1);k.useEffect(()=>{if(H)return u2(H)},[H]),e2();const Ae=k.useCallback(We=>{const[Nt,...At]=Pe().map(Pt=>Pt.ref.current),[Mt]=At.slice(-1),Ut=document.activeElement;for(const Pt of We)if(Pt===Ut||(Pt?.scrollIntoView({block:"nearest"}),Pt===Nt&&ne&&(ne.scrollTop=0),Pt===Mt&&ne&&(ne.scrollTop=ne.scrollHeight),Pt?.focus(),document.activeElement!==Ut))return},[Pe,ne]),De=k.useCallback(()=>Ae([oe,H]),[Ae,oe,H]);k.useEffect(()=>{Ke&&De()},[Ke,De]);const{onOpenChange:ke,triggerPointerDownPosRef:st}=q;k.useEffect(()=>{if(H){let We={x:0,y:0};const Nt=Mt=>{We={x:Math.abs(Math.round(Mt.pageX)-(st.current?.x??0)),y:Math.abs(Math.round(Mt.pageY)-(st.current?.y??0))}},At=Mt=>{We.x<=10&&We.y<=10?Mt.preventDefault():H.contains(Mt.target)||ke(!1),document.removeEventListener("pointermove",Nt),st.current=null};return st.current!==null&&(document.addEventListener("pointermove",Nt),document.addEventListener("pointerup",At,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Nt),document.removeEventListener("pointerup",At,{capture:!0})}}},[H,ke,st]),k.useEffect(()=>{const We=()=>ke(!1);return window.addEventListener("blur",We),window.addEventListener("resize",We),()=>{window.removeEventListener("blur",We),window.removeEventListener("resize",We)}},[ke]);const[me,Ce]=ID(We=>{const Nt=Pe().filter(Ut=>!Ut.disabled),At=Nt.find(Ut=>Ut.ref.current===document.activeElement),Mt=OD(Nt,We,At);Mt&&setTimeout(()=>Mt.ref.current.focus())}),pe=k.useCallback((We,Nt,At)=>{const Mt=!Je.current&&!At;(q.value!==void 0&&q.value===Nt||Mt)&&(he(We),Mt&&(Je.current=!0))},[q.value]),Q=k.useCallback(()=>H?.focus(),[H]),Ee=k.useCallback((We,Nt,At)=>{const Mt=!Je.current&&!At;(q.value!==void 0&&q.value===Nt||Mt)&&ye(We)},[q.value]),Ge=i==="popper"?X1:bD,lt=Ge===X1?{side:g,sideOffset:x,align:_,alignOffset:C,arrowPadding:E,collisionBoundary:A,collisionPadding:D,sticky:I,hideWhenDetached:L,avoidCollisions:B}:{};return c.jsx(vD,{scope:n,content:H,viewport:ne,onViewportChange:re,itemRefCallback:pe,selectedItem:oe,onItemLeave:Q,itemTextRefCallback:Ee,focusSelectedItem:De,selectedItemText:we,position:i,isPositioned:Ke,searchRef:me,children:c.jsx(bb,{as:RG,allowPinchZoom:!0,children:c.jsx(db,{asChild:!0,trapped:q.open,onMountAutoFocus:We=>{We.preventDefault()},onUnmountAutoFocus:Tn(l,We=>{q.trigger?.focus({preventScroll:!0}),We.preventDefault()}),children:c.jsx(ub,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:a,onFocusOutside:We=>We.preventDefault(),onDismiss:()=>q.onOpenChange(!1),children:c.jsx(Ge,{role:"listbox",id:q.contentId,"data-state":q.open?"open":"closed",dir:q.dir,onContextMenu:We=>We.preventDefault(),...z,...lt,onPlaced:()=>ze(!0),ref:ee,style:{display:"flex",flexDirection:"column",outline:"none",...z.style},onKeyDown:Tn(z.onKeyDown,We=>{const Nt=We.ctrlKey||We.altKey||We.metaKey;if(We.key==="Tab"&&We.preventDefault(),!Nt&&We.key.length===1&&Ce(We.key),["ArrowUp","ArrowDown","Home","End"].includes(We.key)){let Mt=Pe().filter(Ut=>!Ut.disabled).map(Ut=>Ut.ref.current);if(["ArrowUp","End"].includes(We.key)&&(Mt=Mt.slice().reverse()),["ArrowUp","ArrowDown"].includes(We.key)){const Ut=We.target,Pt=Mt.indexOf(Ut);Mt=Mt.slice(Pt+1)}setTimeout(()=>Ae(Mt)),We.preventDefault()}})})})})})})});xD.displayName=OG;var LG="SelectItemAlignedPosition",bD=k.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:i,...l}=e,d=Hh(ep,n),a=$h(ep,n),[g,x]=k.useState(null),[_,C]=k.useState(null),E=Vr(t,ee=>C(ee)),A=Ib(n),D=k.useRef(!1),I=k.useRef(!0),{viewport:L,selectedItem:B,selectedItemText:z,focusSelectedItem:q}=a,H=k.useCallback(()=>{if(d.trigger&&d.valueNode&&g&&_&&L&&B&&z){const ee=d.trigger.getBoundingClientRect(),oe=_.getBoundingClientRect(),he=d.valueNode.getBoundingClientRect(),we=z.getBoundingClientRect();if(d.dir!=="rtl"){const Ut=we.left-oe.left,Pt=he.left-Ut,Rt=ee.left-Pt,vn=ee.width+Rt,er=Math.max(vn,oe.width),$n=window.innerWidth-hc,ir=D0(Pt,[hc,Math.max(hc,$n-er)]);g.style.minWidth=vn+"px",g.style.left=ir+"px"}else{const Ut=oe.right-we.right,Pt=window.innerWidth-he.right-Ut,Rt=window.innerWidth-ee.right-Pt,vn=ee.width+Rt,er=Math.max(vn,oe.width),$n=window.innerWidth-hc,ir=D0(Pt,[hc,Math.max(hc,$n-er)]);g.style.minWidth=vn+"px",g.style.right=ir+"px"}const ye=A(),Pe=window.innerHeight-hc*2,Ke=L.scrollHeight,ze=window.getComputedStyle(_),Je=parseInt(ze.borderTopWidth,10),Ae=parseInt(ze.paddingTop,10),De=parseInt(ze.borderBottomWidth,10),ke=parseInt(ze.paddingBottom,10),st=Je+Ae+Ke+ke+De,me=Math.min(B.offsetHeight*5,st),Ce=window.getComputedStyle(L),pe=parseInt(Ce.paddingTop,10),Q=parseInt(Ce.paddingBottom,10),Ee=ee.top+ee.height/2-hc,Ge=Pe-Ee,lt=B.offsetHeight/2,We=B.offsetTop+lt,Nt=Je+Ae+We,At=st-Nt;if(Nt<=Ee){const Ut=ye.length>0&&B===ye[ye.length-1].ref.current;g.style.bottom="0px";const Pt=_.clientHeight-L.offsetTop-L.offsetHeight,Rt=Math.max(Ge,lt+(Ut?Q:0)+Pt+De),vn=Nt+Rt;g.style.height=vn+"px"}else{const Ut=ye.length>0&&B===ye[0].ref.current;g.style.top="0px";const Rt=Math.max(Ee,Je+L.offsetTop+(Ut?pe:0)+lt)+At;g.style.height=Rt+"px",L.scrollTop=Nt-Ee+L.offsetTop}g.style.margin=`${hc}px 0`,g.style.minHeight=me+"px",g.style.maxHeight=Pe+"px",i?.(),requestAnimationFrame(()=>D.current=!0)}},[A,d.trigger,d.valueNode,g,_,L,B,z,d.dir,i]);ns(()=>H(),[H]);const[W,ne]=k.useState();ns(()=>{_&&ne(window.getComputedStyle(_).zIndex)},[_]);const re=k.useCallback(ee=>{ee&&I.current===!0&&(H(),q?.(),I.current=!1)},[H,q]);return c.jsx(BG,{scope:n,contentWrapper:g,shouldExpandOnScrollRef:D,onScrollButtonChange:re,children:c.jsx("div",{ref:x,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:W},children:c.jsx(gr.div,{...l,ref:E,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});bD.displayName=LG;var zG="SelectPopperPosition",X1=k.forwardRef((e,t)=>{const{__scopeSelect:n,align:i="start",collisionPadding:l=hc,...d}=e,a=Ob(n);return c.jsx(QA,{...a,...d,ref:t,align:i,collisionPadding:l,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});X1.displayName=zG;var[BG,H2]=rg(ep,{}),K1="SelectViewport",_D=k.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:i,...l}=e,d=$h(K1,n),a=H2(K1,n),g=Vr(t,d.onViewportChange),x=k.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),c.jsx(Pb.Slot,{scope:n,children:c.jsx(gr.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:g,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:Tn(l.onScroll,_=>{const C=_.currentTarget,{contentWrapper:E,shouldExpandOnScrollRef:A}=a;if(A?.current&&E){const D=Math.abs(x.current-C.scrollTop);if(D>0){const I=window.innerHeight-hc*2,L=parseFloat(E.style.minHeight),B=parseFloat(E.style.height),z=Math.max(L,B);if(z<I){const q=z+D,H=Math.min(I,q),W=q-H;E.style.height=H+"px",E.style.bottom==="0px"&&(C.scrollTop=W>0?W:0,E.style.justifyContent="flex-end")}}}x.current=C.scrollTop})})})]})});_D.displayName=K1;var wD="SelectGroup",[FG,UG]=rg(wD),VG=k.forwardRef((e,t)=>{const{__scopeSelect:n,...i}=e,l=gu();return c.jsx(FG,{scope:n,id:l,children:c.jsx(gr.div,{role:"group","aria-labelledby":l,...i,ref:t})})});VG.displayName=wD;var SD="SelectLabel",qG=k.forwardRef((e,t)=>{const{__scopeSelect:n,...i}=e,l=UG(SD,n);return c.jsx(gr.div,{id:l.id,...i,ref:t})});qG.displayName=SD;var P0="SelectItem",[HG,ED]=rg(P0),CD=k.forwardRef((e,t)=>{const{__scopeSelect:n,value:i,disabled:l=!1,textValue:d,...a}=e,g=Hh(P0,n),x=$h(P0,n),_=g.value===i,[C,E]=k.useState(d??""),[A,D]=k.useState(!1),I=Vr(t,q=>x.itemRefCallback?.(q,i,l)),L=gu(),B=k.useRef("touch"),z=()=>{l||(g.onValueChange(i),g.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(HG,{scope:n,value:i,disabled:l,textId:L,isSelected:_,onItemTextChange:k.useCallback(q=>{E(H=>H||(q?.textContent??"").trim())},[]),children:c.jsx(Pb.ItemSlot,{scope:n,value:i,disabled:l,textValue:C,children:c.jsx(gr.div,{role:"option","aria-labelledby":L,"data-highlighted":A?"":void 0,"aria-selected":_&&A,"data-state":_?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...a,ref:I,onFocus:Tn(a.onFocus,()=>D(!0)),onBlur:Tn(a.onBlur,()=>D(!1)),onClick:Tn(a.onClick,()=>{B.current!=="mouse"&&z()}),onPointerUp:Tn(a.onPointerUp,()=>{B.current==="mouse"&&z()}),onPointerDown:Tn(a.onPointerDown,q=>{B.current=q.pointerType}),onPointerMove:Tn(a.onPointerMove,q=>{B.current=q.pointerType,l?x.onItemLeave?.():B.current==="mouse"&&q.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Tn(a.onPointerLeave,q=>{q.currentTarget===document.activeElement&&x.onItemLeave?.()}),onKeyDown:Tn(a.onKeyDown,q=>{x.searchRef?.current!==""&&q.key===" "||(jG.includes(q.key)&&z(),q.key===" "&&q.preventDefault())})})})})});CD.displayName=P0;var Sy="SelectItemText",TD=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:i,style:l,...d}=e,a=Hh(Sy,n),g=$h(Sy,n),x=ED(Sy,n),_=DG(Sy,n),[C,E]=k.useState(null),A=Vr(t,z=>E(z),x.onItemTextChange,z=>g.itemTextRefCallback?.(z,x.value,x.disabled)),D=C?.textContent,I=k.useMemo(()=>c.jsx("option",{value:x.value,disabled:x.disabled,children:D},x.value),[x.disabled,x.value,D]),{onNativeOptionAdd:L,onNativeOptionRemove:B}=_;return ns(()=>(L(I),()=>B(I)),[L,B,I]),c.jsxs(c.Fragment,{children:[c.jsx(gr.span,{id:x.textId,...d,ref:A}),x.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Lh.createPortal(d.children,a.valueNode):null]})});TD.displayName=Sy;var kD="SelectItemIndicator",jD=k.forwardRef((e,t)=>{const{__scopeSelect:n,...i}=e;return ED(kD,n).isSelected?c.jsx(gr.span,{"aria-hidden":!0,...i,ref:t}):null});jD.displayName=kD;var Y1="SelectScrollUpButton",AD=k.forwardRef((e,t)=>{const n=$h(Y1,e.__scopeSelect),i=H2(Y1,e.__scopeSelect),[l,d]=k.useState(!1),a=Vr(t,i.onScrollButtonChange);return ns(()=>{if(n.viewport&&n.isPositioned){let g=function(){const _=x.scrollTop>0;d(_)};const x=n.viewport;return g(),x.addEventListener("scroll",g),()=>x.removeEventListener("scroll",g)}},[n.viewport,n.isPositioned]),l?c.jsx(MD,{...e,ref:a,onAutoScroll:()=>{const{viewport:g,selectedItem:x}=n;g&&x&&(g.scrollTop=g.scrollTop-x.offsetHeight)}}):null});AD.displayName=Y1;var W1="SelectScrollDownButton",ND=k.forwardRef((e,t)=>{const n=$h(W1,e.__scopeSelect),i=H2(W1,e.__scopeSelect),[l,d]=k.useState(!1),a=Vr(t,i.onScrollButtonChange);return ns(()=>{if(n.viewport&&n.isPositioned){let g=function(){const _=x.scrollHeight-x.clientHeight,C=Math.ceil(x.scrollTop)<_;d(C)};const x=n.viewport;return g(),x.addEventListener("scroll",g),()=>x.removeEventListener("scroll",g)}},[n.viewport,n.isPositioned]),l?c.jsx(MD,{...e,ref:a,onAutoScroll:()=>{const{viewport:g,selectedItem:x}=n;g&&x&&(g.scrollTop=g.scrollTop+x.offsetHeight)}}):null});ND.displayName=W1;var MD=k.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:i,...l}=e,d=$h("SelectScrollButton",n),a=k.useRef(null),g=Ib(n),x=k.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return k.useEffect(()=>()=>x(),[x]),ns(()=>{g().find(C=>C.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[g]),c.jsx(gr.div,{"aria-hidden":!0,...l,ref:t,style:{flexShrink:0,...l.style},onPointerDown:Tn(l.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(i,50))}),onPointerMove:Tn(l.onPointerMove,()=>{d.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(i,50))}),onPointerLeave:Tn(l.onPointerLeave,()=>{x()})})}),$G="SelectSeparator",GG=k.forwardRef((e,t)=>{const{__scopeSelect:n,...i}=e;return c.jsx(gr.div,{"aria-hidden":!0,...i,ref:t})});GG.displayName=$G;var Q1="SelectArrow",ZG=k.forwardRef((e,t)=>{const{__scopeSelect:n,...i}=e,l=Ob(n),d=Hh(Q1,n),a=$h(Q1,n);return d.open&&a.position==="popper"?c.jsx(JA,{...l,...i,ref:t}):null});ZG.displayName=Q1;var XG="SelectBubbleInput",DD=k.forwardRef(({__scopeSelect:e,value:t,...n},i)=>{const l=k.useRef(null),d=Vr(i,l),a=q2(t);return k.useEffect(()=>{const g=l.current;if(!g)return;const x=window.HTMLSelectElement.prototype,C=Object.getOwnPropertyDescriptor(x,"value").set;if(a!==t&&C){const E=new Event("change",{bubbles:!0});C.call(g,t),g.dispatchEvent(E)}},[a,t]),c.jsx(gr.select,{...n,style:{...cD,...n.style},ref:d,defaultValue:t})});DD.displayName=XG;function PD(e){return e===""||e===void 0}function ID(e){const t=wu(e),n=k.useRef(""),i=k.useRef(0),l=k.useCallback(a=>{const g=n.current+a;t(g),(function x(_){n.current=_,window.clearTimeout(i.current),_!==""&&(i.current=window.setTimeout(()=>x(""),1e3))})(g)},[t]),d=k.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,l,d]}function OD(e,t,n){const l=t.length>1&&Array.from(t).every(_=>_===t[0])?t[0]:t,d=n?e.indexOf(n):-1;let a=KG(e,Math.max(d,0));l.length===1&&(a=a.filter(_=>_!==n));const x=a.find(_=>_.textValue.toLowerCase().startsWith(l.toLowerCase()));return x!==n?x:void 0}function KG(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var YG=uD,WG=hD,QG=pD,JG=mD,eZ=gD,tZ=yD,nZ=_D,rZ=CD,iZ=TD,aZ=jD,oZ=AD,sZ=ND;function wa({...e}){return c.jsx(YG,{"data-slot":"select",...e})}function Sa({...e}){return c.jsx(QG,{"data-slot":"select-value",...e})}function Ea({className:e,size:t="default",children:n,...i}){return c.jsxs(WG,{"data-slot":"select-trigger","data-size":t,className:Kt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...i,children:[n,c.jsx(JG,{asChild:!0,children:c.jsx(qw,{className:"size-4 opacity-50"})})]})}function Ca({className:e,children:t,position:n="popper",align:i="center",...l}){return c.jsx(eZ,{children:c.jsxs(tZ,{"data-slot":"select-content",className:Kt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,align:i,...l,children:[c.jsx(lZ,{}),c.jsx(nZ,{className:Kt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),c.jsx(cZ,{})]})})}function Si({className:e,children:t,...n}){return c.jsxs(rZ,{"data-slot":"select-item",className:Kt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[c.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:c.jsx(aZ,{children:c.jsx(Oj,{className:"size-4"})})}),c.jsx(iZ,{children:t})]})}function lZ({className:e,...t}){return c.jsx(oZ,{"data-slot":"select-scroll-up-button",className:Kt("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(Rj,{className:"size-4"})})}function cZ({className:e,...t}){return c.jsx(sZ,{"data-slot":"select-scroll-down-button",className:Kt("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(qw,{className:"size-4"})})}const jd=[{id:"quan-1",name:"Qun 1"},{id:"quan-3",name:"Qun 3"},{id:"quan-4",name:"Qun 4"},{id:"quan-5",name:"Qun 5"},{id:"quan-6",name:"Qun 6"},{id:"quan-7",name:"Qun 7"},{id:"quan-8",name:"Qun 8"},{id:"quan-10",name:"Qun 10"},{id:"quan-11",name:"Qun 11"},{id:"quan-12",name:"Qun 12"},{id:"binh-tan",name:"Qun Bnh Tn"},{id:"binh-thanh",name:"Qun Bnh Thnh"},{id:"go-vap",name:"Qun G Vp"},{id:"phu-nhuan",name:"Qun Ph Nhun"},{id:"tan-binh",name:"Qun Tn Bnh"},{id:"tan-phu",name:"Qun Tn Ph"},{id:"thu-duc",name:"Thnh ph Th c"},{id:"binh-chanh",name:"Huyn Bnh Chnh"},{id:"can-gio",name:"Huyn Cn Gi"},{id:"cu-chi",name:"Huyn C Chi"},{id:"hoc-mon",name:"Huyn Hc Mn"},{id:"nha-be",name:"Huyn Nh B"}],Id=[{id:"house",name:"Nh "},{id:"apartment",name:"Cn h"},{id:"villa",name:"Bit th"},{id:"street_front_house",name:"Nh mt tin"},{id:"alley_house",name:"Nh hm"},{id:"land",name:"Mt bng"},{id:"officetel",name:"Vn phng"}],RD=[{id:"duoi-500-trieu",title:"Di 500 triu"},{id:"500-trieu-den-1-ty",title:"500 triu - 1 t"},{id:"1-ty-den-5-ty",title:"1 t - 5 t"},{id:"5-ty-den-10-ty",title:"5 t - 10 t"},{id:"10-ty-den-20-ty",title:"10 t - 20 t"},{id:"tren-20-ty",title:"Trn 20 t"}],LD=[{id:"price_asc",title:"Gi: Thp n cao"},{id:"price_desc",title:"Gi: Cao n thp"},{id:"area_asc",title:"Din tch: Nh n ln"},{id:"area_desc",title:"Din tch: Ln n nh"}],$2=({id:e,title:t,price:n,area:i,address:l,imageUrl:d,createdAt:a,isLiked:g=!1,onFavoriteClick:x})=>{const[_,C]=k.useState(!1),[E,A]=k.useState(g),[D,I]=k.useState(!1),L=Li(z=>z.isLoggedIn);k.useEffect(()=>{A(g)},[g]);const B=async z=>{if(z.preventDefault(),!(D||!x)){I(!0);try{await x(e,E),A(!E)}catch(q){console.error("Error toggling favorite:",q)}finally{I(!1)}}};return c.jsxs(wi,{to:`/bat-dong-san/${e}`,className:"group flex gap-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-3",onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:[c.jsx("div",{className:"relative w-48 h-36 flex-shrink-0 overflow-hidden rounded-lg",children:c.jsx("img",{src:d,alt:t,className:`w-full h-full object-cover transition-transform duration-300 ${_?"scale-110":"scale-100"}`})}),c.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[c.jsx("h3",{className:"text-gray-900 font-semibold text-lg line-clamp-2 break-words leading-tight mb-2",children:t}),c.jsx("div",{className:"flex items-start gap-1 text-gray-500 mb-2",children:c.jsx("p",{className:"line-clamp-1 text-sm",children:l})}),c.jsxs("div",{className:"text-gray-600 text-sm mb-2",children:["Din tch: ",eg(i)]}),c.jsx("div",{className:"text-[#008DDA] font-bold text-xl mb-auto",children:op(n)}),c.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2",children:[c.jsx("span",{className:"text-gray-500 text-xs",children:xM(a)}),L&&c.jsx("button",{onClick:B,disabled:D,className:"text-gray-400 hover:text-red-500 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:c.jsx(bc,{className:`w-5 h-5 ${E?"fill-red-500 text-red-500":""}`})})]})]})]})},zD=()=>c.jsxs("div",{className:"flex flex-col p-5 bg-white rounded-lg shadow-md",children:[c.jsx("h2",{className:"font-semibold text-xl",children:"Loi bt ng sn"}),c.jsx("ul",{className:"mt-4 space-y-2",children:Id.map(e=>c.jsxs("li",{className:"w-fit hover:text-[#008DDA] flex items-center gap-1 cursor-pointer transition-colors duration-100",children:[c.jsx(Hw,{className:"h-4 w-4"}),e.name]},e.id))})]}),BD=()=>c.jsxs("div",{className:"flex flex-col p-5 bg-white rounded-lg shadow-md",children:[c.jsx("h2",{className:"font-semibold text-xl",children:"Bt ng sn theo khu vc"}),c.jsx("ul",{className:"mt-4 space-y-2",children:jd.map(e=>c.jsxs("li",{className:"w-fit hover:text-[#008DDA] flex items-center gap-1 cursor-pointer transition-colors duration-100",children:[c.jsx(Hw,{className:"h-4 w-4"}),e.name]},e.id))})]});function uZ({className:e,...t}){return c.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:Kt("mx-auto flex w-full justify-center",e),...t})}function dZ({className:e,...t}){return c.jsx("ul",{"data-slot":"pagination-content",className:Kt("flex flex-row items-center gap-1",e),...t})}function $x({...e}){return c.jsx("li",{"data-slot":"pagination-item",...e})}function I0({className:e,isActive:t,size:n="icon",...i}){return c.jsx("a",{"aria-current":t?"page":void 0,"data-slot":"pagination-link","data-active":t,className:Kt(Y0({variant:t?"outline":"ghost",size:n}),e),...i})}function hZ({className:e,...t}){return c.jsxs(I0,{"aria-label":"Go to previous page",size:"default",className:Kt("gap-1 px-2.5 sm:pl-2.5",e),...t,children:[c.jsx(x5,{}),c.jsx("span",{className:"hidden sm:block",children:"Trc"})]})}function fZ({className:e,...t}){return c.jsxs(I0,{"aria-label":"Go to next page",size:"default",className:Kt("gap-1 px-2.5 sm:pr-2.5",e),...t,children:[c.jsx("span",{className:"hidden sm:block",children:"Tip"}),c.jsx(Hw,{})]})}const Rb=({currentPage:e,totalPages:t,onPageChange:n,siblingCount:i=1})=>{const d=(()=>{const a=i*2+5;if(t<=a)return Array.from({length:t},(C,E)=>E+1);const g=[],x=Math.max(e-i,2),_=Math.min(e+i,t-1);g.push(1),x>2&&g.push("...");for(let C=x;C<=_;C++)g.push(C);return _<t-1&&g.push("..."),g.push(t),g})();return c.jsx(uZ,{children:c.jsxs(dZ,{children:[c.jsx($x,{children:c.jsx(hZ,{onClick:()=>e>1&&n(e-1),className:e===1?"pointer-events-none opacity-50":"cursor-pointer"})}),d.map((a,g)=>typeof a=="number"?c.jsx($x,{children:c.jsx(I0,{isActive:a===e,onClick:()=>n(a),className:"cursor-pointer",children:a})},a):c.jsx($x,{children:c.jsx(I0,{className:"pointer-events-none opacity-50",children:a})},`ellipsis-${g}`)),c.jsx($x,{children:c.jsx(fZ,{onClick:()=>e<t&&n(e+1),className:e===t?"pointer-events-none opacity-50":"cursor-pointer"})})]})})};var G_,oT;function pZ(){return oT||(oT=1,G_=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,l,d;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(l=i;l--!==0;)if(!e(t[l],n[l]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(d=Object.keys(t),i=d.length,i!==Object.keys(n).length)return!1;for(l=i;l--!==0;)if(!Object.prototype.hasOwnProperty.call(n,d[l]))return!1;for(l=i;l--!==0;){var a=d[l];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),G_}var mZ=pZ();const FD=rp(mZ),gZ="1.7.1";function tp(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(n[i[l]]=e[i[l]]);return n}function J1(e,t,n,i){function l(d){return d instanceof n?d:new n(function(a){a(d)})}return new(n||(n=Promise))(function(d,a){function g(C){try{_(i.next(C))}catch(E){a(E)}}function x(C){try{_(i.throw(C))}catch(E){a(E)}}function _(C){C.done?d(C.value):l(C.value).then(g,x)}_((i=i.apply(e,[])).next())})}const Sd={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},yZ="https://maps.googleapis.com/maps/api/js";class O0{static load(t,n){return J1(this,void 0,void 0,function*(){var i,l;const d=t.libraries?t.libraries.split(","):[],a=this.serializeParams(t);this.listeners.push(n),!((l=(i=window.google)===null||i===void 0?void 0:i.maps)===null||l===void 0)&&l.importLibrary?(this.serializedApiParams||(this.loadingStatus=Sd.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=a,this.initImportLibrary(t)),this.serializedApiParams&&this.serializedApiParams!==a&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const g=["maps",...d];yield Promise.all(g.map(x=>google.maps.importLibrary(x)))})}static serializeParams(t){return[t.v,t.key,t.language,t.region,t.authReferrerPolicy,t.solutionChannel].join("/")}static initImportLibrary(t){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const i=()=>n||(n=new Promise((l,d)=>{var a;const g=document.createElement("script"),x=new URLSearchParams;for(const[_,C]of Object.entries(t)){const E=_.replace(/[A-Z]/g,A=>"_"+A[0].toLowerCase());x.set(E,String(C))}x.set("loading","async"),x.set("callback","__googleMapsCallback__"),g.async=!0,g.src=yZ+"?"+x.toString(),g.nonce=((a=document.querySelector("script[nonce]"))===null||a===void 0?void 0:a.nonce)||"",g.onerror=()=>{this.loadingStatus=Sd.FAILED,this.notifyLoadingStatusListeners(),d(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=Sd.LOADED,this.notifyLoadingStatusListeners(),l()},window.gm_authFailure=()=>{this.loadingStatus=Sd.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=Sd.LOADING,this.notifyLoadingStatusListeners(),document.head.append(g)}),n);google.maps.importLibrary=l=>i().then(()=>google.maps.importLibrary(l))}static notifyLoadingStatusListeners(){for(const t of this.listeners)t(this.loadingStatus)}}O0.loadingStatus=Sd.NOT_LOADED;O0.listeners=[];const vZ="GMP_visgl_rgmlibrary_v1_default",xZ=[`gmp_visgl_reactgooglemaps_v${gZ}`],kv=Bt.createContext(null);function bZ(){const[e,t]=k.useState({});return{mapInstances:e,addMapInstance:(d,a="default")=>{t(g=>Object.assign(Object.assign({},g),{[a]:d}))},removeMapInstance:(d="default")=>{t(a=>{var g=d;a[g];var x=tp(a,[typeof g=="symbol"?g:g+""]);return x})},clearMapInstances:()=>{t({})}}}function _Z(e){const{onLoad:t,onError:n,apiKey:i,version:l,libraries:d=[]}=e,a=tp(e,["onLoad","onError","apiKey","version","libraries"]),[g,x]=k.useState(O0.loadingStatus),[_,C]=k.useReducer((I,L)=>I[L.name]?I:Object.assign(Object.assign({},I),{[L.name]:L.value}),{}),E=k.useMemo(()=>d?.join(","),[d]),A=k.useMemo(()=>JSON.stringify(Object.assign({apiKey:i,version:l},a)),[i,l,a]),D=k.useCallback(I=>J1(this,void 0,void 0,function*(){var L;if(_[I])return _[I];if(!(!((L=google==null?void 0:google.maps)===null||L===void 0)&&L.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const B=yield window.google.maps.importLibrary(I);return C({name:I,value:B}),B}),[_]);return k.useEffect(()=>{J1(this,void 0,void 0,function*(){try{const I=Object.assign({key:i},a);l&&(I.v=l),E?.length>0&&(I.libraries=E),(I.channel===void 0||I.channel<0||I.channel>999)&&delete I.channel,I.solutionChannel===void 0?I.solutionChannel=vZ:I.solutionChannel===""&&delete I.solutionChannel,yield O0.load(I,L=>x(L));for(const L of["core","maps",...d])yield D(L);t&&t()}catch(I){n?n(I):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",I)}})},[i,E,A]),{status:g,loadedLibraries:_,importLibrary:D}}function wZ(e){return k.useMemo(()=>e.disableUsageAttribution?null:xZ,[e.disableUsageAttribution])}const SZ=e=>{const{children:t}=e,n=tp(e,["children"]),{mapInstances:i,addMapInstance:l,removeMapInstance:d,clearMapInstances:a}=bZ(),{status:g,loadedLibraries:x,importLibrary:_}=_Z(n),C=wZ(n),E=k.useMemo(()=>({mapInstances:i,addMapInstance:l,removeMapInstance:d,clearMapInstances:a,status:g,loadedLibraries:x,importLibrary:_,internalUsageAttributionIds:C}),[i,l,d,a,g,x,_,C]);return Bt.createElement(kv.Provider,{value:E},t)};function EZ(e,t){for(const n of jZ){const i=t[n],l=UD[n];k.useEffect(()=>{if(!e||!i)return;const d=google.maps.event.addListener(e,l,a=>{i(CZ(l,e,a))});return()=>d.remove()},[e,l,i])}}function CZ(e,t,n){var i;const l={type:e,map:t,detail:{},stoppable:!1,stop:()=>{}};if(TZ.includes(e)){const d=l,a=t.getCenter(),g=t.getZoom(),x=t.getHeading()||0,_=t.getTilt()||0,C=t.getBounds();return(!a||!C||!Number.isFinite(g))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),d.detail={center:a?.toJSON()||{lat:0,lng:0},zoom:g||0,heading:x,tilt:_,bounds:C?.toJSON()||{north:90,east:180,south:-90,west:-180}},d}else if(kZ.includes(e)){if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const d=l;return d.domEvent=n.domEvent,d.stoppable=!0,d.stop=()=>n.stop(),d.detail={latLng:((i=n.latLng)===null||i===void 0?void 0:i.toJSON())||null,placeId:n.placeId},d}return l}const UD={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},TZ=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],kZ=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],jZ=Object.keys(UD);function AZ(e){const t=k.useRef(void 0);return k.useEffect(()=>{t.current=e}),t.current}function VD(e,t){const n=AZ(e);return k.useMemo(()=>n&&t(n,e)?n:e,[e,n,t])}function NZ(e,t,n){k.useEffect(e,[VD(t,n)])}function MZ(e,t){NZ(e,t,FD)}const DZ=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function PZ(e,t){const n={},i=Object.keys(t);for(const l of i)DZ.has(l)&&(n[l]=t[l]);MZ(()=>{e&&e.setOptions(n)},[n])}function qD(){var e;return((e=k.useContext(kv))===null||e===void 0?void 0:e.status)||Sd.NOT_LOADED}function IZ(e,t){const{viewport:n,viewState:i}=t,l=!!n;return k.useLayoutEffect(()=>{if(!e||!i)return;const{latitude:d,longitude:a,bearing:g,pitch:x,zoom:_}=i;e.moveCamera({center:{lat:d,lng:a},heading:g,tilt:x,zoom:_+1})},[e,i]),l}function OZ(e){return!e||typeof e!="object"||!("lat"in e&&"lng"in e)?!1:Number.isFinite(e.lat)&&Number.isFinite(e.lng)}function HD(e){return OZ(e)?e:e.toJSON()}function RZ(e,t,n){const i=n.center?HD(n.center):null;let l=null,d=null;i&&Number.isFinite(i.lat)&&Number.isFinite(i.lng)&&(l=i.lat,d=i.lng);const a=Number.isFinite(n.zoom)?n.zoom:null,g=Number.isFinite(n.heading)?n.heading:null,x=Number.isFinite(n.tilt)?n.tilt:null;k.useLayoutEffect(()=>{if(!e)return;const _={};let C=!1;l!==null&&d!==null&&(t.current.center.lat!==l||t.current.center.lng!==d)&&(_.center={lat:l,lng:d},C=!0),a!==null&&t.current.zoom!==a&&(_.zoom=a,C=!0),g!==null&&t.current.heading!==g&&(_.heading=g,C=!0),x!==null&&t.current.tilt!==x&&(_.tilt=x,C=!0),C&&e.moveCamera(_)})}const LZ=()=>{const e={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return Bt.createElement("div",{style:e},Bt.createElement("h2",null,"Error: AuthFailure"),Bt.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",Bt.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function zZ(){const[e,t]=k.useState(null),n=k.useCallback(i=>t(i),[t]);return[e,n]}function $D(){return qD()===Sd.LOADED}function BZ(){const[,e]=k.useReducer(t=>t+1,0);return e}function FZ(e,t){const n=e.getCenter(),i=e.getZoom(),l=e.getHeading()||0,d=e.getTilt()||0,a=e.getBounds();(!n||!a||!Number.isFinite(i))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(t.current,{center:n?.toJSON()||{lat:0,lng:0},zoom:i||0,heading:l,tilt:d})}function UZ(e){const t=BZ(),n=k.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return k.useEffect(()=>{if(!e)return;const i=google.maps.event.addListener(e,"bounds_changed",()=>{FZ(e,n),t()});return()=>i.remove()},[e,t]),n}class d0{static has(t){return this.entries[t]&&this.entries[t].length>0}static pop(t){return this.entries[t]&&this.entries[t].pop()||null}static push(t,n){this.entries[t]||(this.entries[t]=[]),this.entries[t].push(n)}}d0.entries={};function VZ(e,t){const n=$D(),[i,l]=k.useState(null),[d,a]=zZ(),g=UZ(i),{id:x,defaultBounds:_,defaultCenter:C,defaultZoom:E,defaultHeading:A,defaultTilt:D,reuseMaps:I,renderingType:L,colorScheme:B}=e,z=tp(e,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),q=e.zoom!==void 0||e.defaultZoom!==void 0,H=e.center!==void 0||e.defaultCenter!==void 0;!_&&(!q||!H)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!z.center&&C&&(z.center=C),!z.zoom&&Number.isFinite(E)&&(z.zoom=E),!z.heading&&Number.isFinite(A)&&(z.heading=A),!z.tilt&&Number.isFinite(D)&&(z.tilt=D);const W=z.internalUsageAttributionIds;W==null?z.internalUsageAttributionIds=t.internalUsageAttributionIds:z.internalUsageAttributionIds=[...t.internalUsageAttributionIds||[],...W];for(const re of Object.keys(z))z[re]===void 0&&delete z[re];const ne=k.useRef(void 0);return k.useEffect(()=>{if(!d||!n)return;const{addMapInstance:re,removeMapInstance:ee}=t,{mapId:oe}=e,he=`${oe||"default"}:${L||"default"}:${B||"LIGHT"}`;let we,ye;if(I&&d0.has(he)?(ye=d0.pop(he),we=ye.getDiv(),d.appendChild(we),ye.setOptions(z),setTimeout(()=>ye.setCenter(ye.getCenter()),0)):(we=document.createElement("div"),we.style.height="100%",d.appendChild(we),ye=new google.maps.Map(we,Object.assign(Object.assign(Object.assign({},z),L?{renderingType:L}:{}),B?{colorScheme:B}:{}))),l(ye),re(ye,x),_){const{padding:Pe}=_,Ke=tp(_,["padding"]);ye.fitBounds(Ke,Pe)}else(!q||!H)&&ye.fitBounds({east:180,west:-180,south:-90,north:90});if(ne.current){const{mapId:Pe,cameraState:Ke}=ne.current;Pe!==oe&&ye.setOptions(Ke)}return()=>{ne.current={mapId:oe,cameraState:g.current},we.remove(),I?d0.push(he,ye):google.maps.event.clearInstanceListeners(ye),l(null),ee(x)}},[d,n,x,e.mapId,e.renderingType,e.colorScheme]),[i,a,g]}const GD=Bt.createContext(null),ZD=e=>{const{children:t,id:n,className:i,style:l}=e,d=k.useContext(kv),a=qD();if(!d)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[g,x,_]=VZ(e,d);RZ(g,_,e),EZ(g,e),PZ(g,e);const C=IZ(g,e),E=!!e.controlled;k.useEffect(()=>{if(g)return C&&g.setOptions({disableDefaultUI:!0}),(C||E)&&g.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{g.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}},[g,C,E,e.gestureHandling,e.keyboardShortcuts]);const A=e.center?HD(e.center):null;let D=null,I=null;A&&Number.isFinite(A.lat)&&Number.isFinite(A.lng)&&(D=A.lat,I=A.lng);const L=k.useMemo(()=>{var q,H,W;return{center:{lat:D??0,lng:I??0},zoom:(q=e.zoom)!==null&&q!==void 0?q:0,heading:(H=e.heading)!==null&&H!==void 0?H:0,tilt:(W=e.tilt)!==null&&W!==void 0?W:0}},[D,I,e.zoom,e.heading,e.tilt]);k.useLayoutEffect(()=>{if(!g||!E)return;g.moveCamera(L);const q=g.addListener("bounds_changed",()=>{g.moveCamera(L)});return()=>q.remove()},[g,E,L]);const B=k.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:C?-1:0},l),[l,C]),z=k.useMemo(()=>({map:g}),[g]);return a===Sd.AUTH_FAILURE?Bt.createElement("div",{style:Object.assign({position:"relative"},i?{}:B),className:i},Bt.createElement(LZ,null)):Bt.createElement("div",Object.assign({ref:x,"data-testid":"map",style:i?void 0:B,className:i},n?{id:n}:{}),g?Bt.createElement(GD.Provider,{value:z},t):null)};ZD.deckGLViewProps=!0;const sT=new Set;function qZ(...e){const t=JSON.stringify(e);sT.has(t)||(sT.add(t),console.error(...e))}const lp=(e=null)=>{const t=k.useContext(kv),{map:n}=k.useContext(GD)||{};if(t===null)return qZ("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:i}=t;return e!==null?i[e]||null:n||i.default||null};function XD(e){const t=$D(),n=k.useContext(kv);return k.useEffect(()=>{!t||!n||n.importLibrary(e)},[t,n,e]),n?.loadedLibraries[e]||null}function Cm(e,t,n){k.useEffect(()=>{if(!e||!t||!n)return;const i=google.maps.event.addListener(e,t,n);return()=>i.remove()},[e,t,n])}function Gx(e,t,n){k.useEffect(()=>{e&&(e[t]=n)},[e,t,n])}function lT(e,t,n){k.useEffect(()=>{if(!(!e||!t||!n))return e.addEventListener(t,n),()=>e.removeEventListener(t,n)},[e,t,n])}class HZ{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const t=this.getStyleElement();t.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const $Z=new HZ;function GZ(e,t){var n;if(!(!((n=google==null?void 0:google.maps)===null||n===void 0)&&n.version))return;const i=google.maps.version.split("."),l=parseInt(i[0],10),d=parseInt(i[1],10);return l>e||l===e&&d>=t}const ZZ=Bt.createContext(null),XZ={BOTTOM:["50%","100%"]},G2=k.forwardRef((e,t)=>{const{children:n,style:i,className:l,anchorPoint:d}=e,[a,g]=WZ(e),x=k.useMemo(()=>a?{marker:a}:null,[a]);return k.useImperativeHandle(t,()=>a,[a]),g?Bt.createElement(ZZ.Provider,{value:x},Lh.createPortal(Bt.createElement(YZ,{anchorPoint:d,styles:i,className:l},n),g)):null});G2.displayName="AdvancedMarker";function KZ(e){return e.content!==void 0}function ew(e){return e.nodeType===Node.ELEMENT_NODE}const YZ=({children:e,styles:t,className:n})=>Bt.createElement("div",{className:n,style:t},e);function WZ(e){const[t,n]=k.useState(null),[i,l]=k.useState(null),d=lp(),a=XD("marker"),{children:g,onClick:x,className:_,onMouseEnter:C,onMouseLeave:E,onDrag:A,onDragStart:D,onDragEnd:I,collisionBehavior:L,clickable:B,draggable:z,position:q,title:H,zIndex:W,anchorPoint:ne,anchorLeft:re,anchorTop:ee}=e,oe=k.Children.count(g);return k.useEffect(()=>{if(!d||!a)return;const he=new a.AdvancedMarkerElement;he.map=d,n(he);let we=null;return oe>0&&(we=document.createElement("div"),he.content=we,l(we)),()=>{he.map=null,we?.remove(),n(null),l(null)}},[d,a,oe]),k.useEffect(()=>{!t?.content||!ew(t.content)||oe>0||(t.content.className=_??"")},[t,_,oe]),QZ(t,ne,re,ee,oe>0),Gx(t,"position",q),Gx(t,"title",H??""),Gx(t,"zIndex",W),Gx(t,"collisionBehavior",L),k.useEffect(()=>{t&&(z!==void 0?t.gmpDraggable=z:A||D||I?t.gmpDraggable=!0:t.gmpDraggable=!1)},[t,z,A,I,D]),k.useEffect(()=>{if(!t)return;const he=B!==void 0||!!x||!!C||!!E;t.gmpClickable=he,he&&t?.content&&ew(t.content)&&(t.content.style.pointerEvents="all",x&&(t.content.style.cursor="pointer"))},[t,B,x,C,E]),Cm(t,"click",x),Cm(t,"drag",A),Cm(t,"dragstart",D),Cm(t,"dragend",I),lT(t?.element,"mouseenter",C),lT(t?.element,"mouseleave",E),[t,i]}function QZ(e,t,n,i,l){k.useEffect(()=>{if(!e||!l)return;const d=GZ(3,62),a=e.content;if(!(!a||!ew(a))){if(n!==void 0||i!==void 0){d||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),e.anchorLeft=n,e.anchorTop=i,t!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(t!==void 0){const[g,x]=t??XZ.BOTTOM,_=`calc(-1 * ${g})`,C=`calc(-1 * ${x})`;d?(e.anchorLeft=_,e.anchorTop=C,a.style.transform=""):(a.style.transform=`translate(50%, 100%) translate(${_}, ${C})`,e.dataset.origin="rgm",$Z.addAdvancedMarkerPointerEventsOverwrite())}}},[e,t,n,i,l])}function JZ(e,t,n){if(t!=null&&typeof t!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const i=e.style;if(n==null){if(t==null)return;for(const l in t)t.hasOwnProperty(l)&&cT(i,l,t[l]);return}for(const l in n)n.hasOwnProperty(l)&&(t==null||!t.hasOwnProperty(l))&&(l.indexOf("--")===0?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="");if(t!=null)for(const l in t){const d=t[l];t.hasOwnProperty(l)&&n[l]!==d&&cT(i,l,d)}}function cT(e,t,n){const i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n=="number"&&n!==0&&!tX(t)?e[t]=n+"px":t==="float"?e.cssFloat=n:e[t]=(""+n).trim()}const eX=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function tX(e){return eX.has(e)}const tw=e=>{const{children:t,headerContent:n,style:i,className:l,pixelOffset:d,anchor:a,shouldFocus:g,onClose:x,onCloseClick:_}=e,C=tp(e,["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"]),E=XD("maps"),[A,D]=k.useState(null),I=k.useRef(null),L=k.useRef(null),B=VD(C,FD);k.useEffect(()=>{if(!E)return;I.current=document.createElement("div"),L.current=document.createElement("div");const H=B;d&&(H.pixelOffset=new google.maps.Size(d[0],d[1])),n&&(H.headerContent=typeof n=="string"?n:L.current);const W=new google.maps.InfoWindow(B);return W.setContent(I.current),D(W),()=>{var ne,re;W.setContent(null),(ne=I.current)===null||ne===void 0||ne.remove(),(re=L.current)===null||re===void 0||re.remove(),I.current=null,L.current=null,D(null)}},[E]);const z=k.useRef(null);k.useEffect(()=>{!A||!I.current||(JZ(I.current,i||null,z.current),z.current=i||null,l!==I.current.className&&(I.current.className=l||""))},[A,l,i]),k.useEffect(()=>{if(!A)return;const H=B;d?H.pixelOffset=new google.maps.Size(d[0],d[1]):H.pixelOffset=null,n?H.headerContent=typeof n=="string"?n:L.current:H.headerContent=null,A.setOptions(B)},[B,d,n]),Cm(A,"close",x),Cm(A,"closeclick",_);const q=lp();return k.useEffect(()=>{var H;if(!q||!A||a===null)return;const W=!!a,ne={map:q};if(a&&(ne.anchor=a,KZ(a)&&a.content instanceof Element)){const re=a?.getBoundingClientRect();if(re&&a.dataset.origin==="rgm"){const ee=(H=a.content.firstElementChild)===null||H===void 0?void 0:H.firstElementChild,oe=ee?.getBoundingClientRect(),he=oe.x-re.x+(oe.width-re.width)/2,we=oe.y-re.y,ye=B;ye.pixelOffset=new google.maps.Size(d?d[0]+he:he,d?d[1]+we:we),A.setOptions(ye)}}return g!==void 0&&(ne.shouldFocus=g),A.open(ne),()=>{W&&A.set("anchor",null),A.close()}},[A,a,q,g,B,d]),Bt.createElement(Bt.Fragment,null,I.current&&Lh.createPortal(t,I.current),L.current!==null&&Lh.createPortal(n,L.current))};function nX(e){const[t,n]=k.useState(null),i=lp(),{onClick:l,onDrag:d,onDragStart:a,onDragEnd:g,onMouseOver:x,onMouseOut:_}=e,C=tp(e,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:E,draggable:A}=C;return k.useEffect(()=>{if(!i){i===void 0&&console.error("<Marker> has to be inside a Map component.");return}const D=new google.maps.Marker(C);return D.setMap(i),n(D),()=>{D.setMap(null),n(null)}},[i]),k.useEffect(()=>{if(!t)return;const D=t,I=google.maps.event;return l&&I.addListener(D,"click",l),d&&I.addListener(D,"drag",d),a&&I.addListener(D,"dragstart",a),g&&I.addListener(D,"dragend",g),x&&I.addListener(D,"mouseover",x),_&&I.addListener(D,"mouseout",_),t.setDraggable(!!A),()=>{I.clearInstanceListeners(D)}},[t,A,l,d,a,g,x,_]),k.useEffect(()=>{t&&C&&t.setOptions(C)},[t,C]),k.useEffect(()=>{A||!E||!t||t.setPosition(E)},[A,E,t]),t}const rX=k.forwardRef((e,t)=>{const n=nX(e);return k.useImperativeHandle(t,()=>n,[n]),Bt.createElement(Bt.Fragment,null)});rX.displayName="Marker";const iX=({id:e,title:t,image:n,address:i,price:l,area:d,onClose:a})=>{const g=x=>{x.preventDefault(),x.stopPropagation(),console.log("navigate"),window.location.href=`/bat-dong-san/${e}`};return c.jsxs("div",{className:"bg-white overflow-hidden transition-all duration-200 relative",style:{width:"320px"},children:[a&&c.jsx("button",{onClick:x=>{x.stopPropagation(),a()},className:"cursor-pointer absolute top-2 right-0 z-10 bg-black/60 hover:bg-black/80 text-white rounded-full p-1 transition-colors shadow-md",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsxs("div",{className:"flex gap-3 p-3",children:[c.jsx("div",{className:"relative w-28 h-28 flex-shrink-0 overflow-hidden rounded-md",children:c.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1 flex flex-col justify-between min-w-0",children:[c.jsx("h3",{onClick:g,className:"cursor-pointer hover:text-[#008DDA] font-semibold text-sm text-gray-900 line-clamp-2 break-words leading-snug mb-1 transition-colors duration-150",children:t}),i&&c.jsxs("div",{className:"flex items-start gap-1 mb-2",children:[c.jsx(bs,{className:"w-3 h-3 text-gray-400 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-xs text-gray-600 line-clamp-1 break-words",children:i})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:"text-xs font-bold text-[#008DDA]",children:op(l)})}),c.jsxs("div",{className:"flex items-center gap-1 text-gray-700",children:[c.jsx(Fj,{className:"w-3 h-3"}),c.jsx("p",{className:"text-xs font-semibold",children:eg(d)})]})]})]})]})]})},{getOwnPropertyNames:aX,getOwnPropertySymbols:oX}=Object,{hasOwnProperty:sX}=Object.prototype;function Z_(e,t){return function(i,l,d){return e(i,l,d)&&t(i,l,d)}}function Zx(e){return function(n,i,l){if(!n||!i||typeof n!="object"||typeof i!="object")return e(n,i,l);const{cache:d}=l,a=d.get(n),g=d.get(i);if(a&&g)return a===i&&g===n;d.set(n,i),d.set(i,n);const x=e(n,i,l);return d.delete(n),d.delete(i),x}}function lX(e){return e?.[Symbol.toStringTag]}function uT(e){return aX(e).concat(oX(e))}const cX=Object.hasOwn||((e,t)=>sX.call(e,t));function cp(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const uX="__v",dX="__o",hX="_owner",{getOwnPropertyDescriptor:dT,keys:hT}=Object;function fX(e,t){return e.byteLength===t.byteLength&&R0(new Uint8Array(e),new Uint8Array(t))}function pX(e,t,n){let i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!n.equals(e[i],t[i],i,i,e,t,n))return!1;return!0}function mX(e,t){return e.byteLength===t.byteLength&&R0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function gX(e,t){return cp(e.getTime(),t.getTime())}function yX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function vX(e,t){return e===t}function fT(e,t,n){const i=e.size;if(i!==t.size)return!1;if(!i)return!0;const l=new Array(i),d=e.entries();let a,g,x=0;for(;(a=d.next())&&!a.done;){const _=t.entries();let C=!1,E=0;for(;(g=_.next())&&!g.done;){if(l[E]){E++;continue}const A=a.value,D=g.value;if(n.equals(A[0],D[0],x,E,e,t,n)&&n.equals(A[1],D[1],A[0],D[0],e,t,n)){C=l[E]=!0;break}E++}if(!C)return!1;x++}return!0}const xX=cp;function bX(e,t,n){const i=hT(e);let l=i.length;if(hT(t).length!==l)return!1;for(;l-- >0;)if(!KD(e,t,n,i[l]))return!1;return!0}function gy(e,t,n){const i=uT(e);let l=i.length;if(uT(t).length!==l)return!1;let d,a,g;for(;l-- >0;)if(d=i[l],!KD(e,t,n,d)||(a=dT(e,d),g=dT(t,d),(a||g)&&(!a||!g||a.configurable!==g.configurable||a.enumerable!==g.enumerable||a.writable!==g.writable)))return!1;return!0}function _X(e,t){return cp(e.valueOf(),t.valueOf())}function wX(e,t){return e.source===t.source&&e.flags===t.flags}function pT(e,t,n){const i=e.size;if(i!==t.size)return!1;if(!i)return!0;const l=new Array(i),d=e.values();let a,g;for(;(a=d.next())&&!a.done;){const x=t.values();let _=!1,C=0;for(;(g=x.next())&&!g.done;){if(!l[C]&&n.equals(a.value,g.value,a.value,g.value,e,t,n)){_=l[C]=!0;break}C++}if(!_)return!1}return!0}function R0(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function SX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function KD(e,t,n,i){return(i===hX||i===dX||i===uX)&&(e.$$typeof||t.$$typeof)?!0:cX(t,i)&&n.equals(e[i],t[i],i,i,e,t,n)}const EX="[object ArrayBuffer]",CX="[object Arguments]",TX="[object Boolean]",kX="[object DataView]",jX="[object Date]",AX="[object Error]",NX="[object Map]",MX="[object Number]",DX="[object Object]",PX="[object RegExp]",IX="[object Set]",OX="[object String]",RX={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},LX="[object URL]",zX=Object.prototype.toString;function BX({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:i,areErrorsEqual:l,areFunctionsEqual:d,areMapsEqual:a,areNumbersEqual:g,areObjectsEqual:x,arePrimitiveWrappersEqual:_,areRegExpsEqual:C,areSetsEqual:E,areTypedArraysEqual:A,areUrlsEqual:D,unknownTagComparators:I}){return function(B,z,q){if(B===z)return!0;if(B==null||z==null)return!1;const H=typeof B;if(H!==typeof z)return!1;if(H!=="object")return H==="number"?g(B,z,q):H==="function"?d(B,z,q):!1;const W=B.constructor;if(W!==z.constructor)return!1;if(W===Object)return x(B,z,q);if(Array.isArray(B))return t(B,z,q);if(W===Date)return i(B,z,q);if(W===RegExp)return C(B,z,q);if(W===Map)return a(B,z,q);if(W===Set)return E(B,z,q);const ne=zX.call(B);if(ne===jX)return i(B,z,q);if(ne===PX)return C(B,z,q);if(ne===NX)return a(B,z,q);if(ne===IX)return E(B,z,q);if(ne===DX)return typeof B.then!="function"&&typeof z.then!="function"&&x(B,z,q);if(ne===LX)return D(B,z,q);if(ne===AX)return l(B,z,q);if(ne===CX)return x(B,z,q);if(RX[ne])return A(B,z,q);if(ne===EX)return e(B,z,q);if(ne===kX)return n(B,z,q);if(ne===TX||ne===MX||ne===OX)return _(B,z,q);if(I){let re=I[ne];if(!re){const ee=lX(B);ee&&(re=I[ee])}if(re)return re(B,z,q)}return!1}}function FX({circular:e,createCustomConfig:t,strict:n}){let i={areArrayBuffersEqual:fX,areArraysEqual:n?gy:pX,areDataViewsEqual:mX,areDatesEqual:gX,areErrorsEqual:yX,areFunctionsEqual:vX,areMapsEqual:n?Z_(fT,gy):fT,areNumbersEqual:xX,areObjectsEqual:n?gy:bX,arePrimitiveWrappersEqual:_X,areRegExpsEqual:wX,areSetsEqual:n?Z_(pT,gy):pT,areTypedArraysEqual:n?Z_(R0,gy):R0,areUrlsEqual:SX,unknownTagComparators:void 0};if(t&&(i=Object.assign({},i,t(i))),e){const l=Zx(i.areArraysEqual),d=Zx(i.areMapsEqual),a=Zx(i.areObjectsEqual),g=Zx(i.areSetsEqual);i=Object.assign({},i,{areArraysEqual:l,areMapsEqual:d,areObjectsEqual:a,areSetsEqual:g})}return i}function UX(e){return function(t,n,i,l,d,a,g){return e(t,n,g)}}function VX({circular:e,comparator:t,createState:n,equals:i,strict:l}){if(n)return function(g,x){const{cache:_=e?new WeakMap:void 0,meta:C}=n();return t(g,x,{cache:_,equals:i,meta:C,strict:l})};if(e)return function(g,x){return t(g,x,{cache:new WeakMap,equals:i,meta:void 0,strict:l})};const d={cache:void 0,equals:i,meta:void 0,strict:l};return function(g,x){return t(g,x,d)}}const mT=Gh();Gh({strict:!0});Gh({circular:!0});Gh({circular:!0,strict:!0});Gh({createInternalComparator:()=>cp});Gh({strict:!0,createInternalComparator:()=>cp});Gh({circular:!0,createInternalComparator:()=>cp});Gh({circular:!0,createInternalComparator:()=>cp,strict:!0});function Gh(e={}){const{circular:t=!1,createInternalComparator:n,createState:i,strict:l=!1}=e,d=FX(e),a=BX(d),g=n?n(a):UX(a);return VX({circular:t,comparator:a,createState:i,equals:g,strict:l})}const gT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],X_=1,yy=8;class Z2{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,i]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const l=i>>4;if(l!==X_)throw new Error(`Got v${l} data when expected v${X_}.`);const d=gT[i&15];if(!d)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(t,2,1),[g]=new Uint32Array(t,4,1);return new Z2(g,a,d,t)}constructor(t,n=64,i=Float64Array,l){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const d=gT.indexOf(this.ArrayType),a=t*2*this.ArrayType.BYTES_PER_ELEMENT,g=t*this.IndexArrayType.BYTES_PER_ELEMENT,x=(8-g%8)%8;if(d<0)throw new Error(`Unexpected typed array class: ${i}.`);l&&l instanceof ArrayBuffer?(this.data=l,this.ids=new this.IndexArrayType(this.data,yy,t),this.coords=new this.ArrayType(this.data,yy+g+x,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(yy+a+g+x),this.ids=new this.IndexArrayType(this.data,yy,t),this.coords=new this.ArrayType(this.data,yy+g+x,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(X_<<4)+d]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=t,this.coords[this._pos++]=n,i}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return nw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,i,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:a,nodeSize:g}=this,x=[0,d.length-1,0],_=[];for(;x.length;){const C=x.pop()||0,E=x.pop()||0,A=x.pop()||0;if(E-A<=g){for(let B=A;B<=E;B++){const z=a[2*B],q=a[2*B+1];z>=t&&z<=i&&q>=n&&q<=l&&_.push(d[B])}continue}const D=A+E>>1,I=a[2*D],L=a[2*D+1];I>=t&&I<=i&&L>=n&&L<=l&&_.push(d[D]),(C===0?t<=I:n<=L)&&(x.push(A),x.push(D-1),x.push(1-C)),(C===0?i>=I:l>=L)&&(x.push(D+1),x.push(E),x.push(1-C))}return _}within(t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:l,coords:d,nodeSize:a}=this,g=[0,l.length-1,0],x=[],_=i*i;for(;g.length;){const C=g.pop()||0,E=g.pop()||0,A=g.pop()||0;if(E-A<=a){for(let B=A;B<=E;B++)yT(d[2*B],d[2*B+1],t,n)<=_&&x.push(l[B]);continue}const D=A+E>>1,I=d[2*D],L=d[2*D+1];yT(I,L,t,n)<=_&&x.push(l[D]),(C===0?t-i<=I:n-i<=L)&&(g.push(A),g.push(D-1),g.push(1-C)),(C===0?t+i>=I:n+i>=L)&&(g.push(D+1),g.push(E),g.push(1-C))}return x}}function nw(e,t,n,i,l,d){if(l-i<=n)return;const a=i+l>>1;YD(e,t,a,i,l,d),nw(e,t,n,i,a-1,1-d),nw(e,t,n,a+1,l,1-d)}function YD(e,t,n,i,l,d){for(;l>i;){if(l-i>600){const _=l-i+1,C=n-i+1,E=Math.log(_),A=.5*Math.exp(2*E/3),D=.5*Math.sqrt(E*A*(_-A)/_)*(C-_/2<0?-1:1),I=Math.max(i,Math.floor(n-C*A/_+D)),L=Math.min(l,Math.floor(n+(_-C)*A/_+D));YD(e,t,n,I,L,d)}const a=t[2*n+d];let g=i,x=l;for(vy(e,t,i,n),t[2*l+d]>a&&vy(e,t,i,l);g<x;){for(vy(e,t,g,x),g++,x--;t[2*g+d]<a;)g++;for(;t[2*x+d]>a;)x--}t[2*i+d]===a?vy(e,t,i,x):(x++,vy(e,t,x,l)),x<=n&&(i=x+1),n<=x&&(l=x-1)}}function vy(e,t,n,i){K_(e,n,i),K_(t,2*n,2*i),K_(t,2*n+1,2*i+1)}function K_(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function yT(e,t,n,i){const l=e-n,d=t-i;return l*l+d*d}const qX={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},vT=Math.fround||(e=>(t=>(e[0]=+t,e[0])))(new Float32Array(1)),Rf=2,Ph=3,Y_=4,Dh=5,WD=6;class HX{constructor(t){this.options=Object.assign(Object.create(qX),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:n,minZoom:i,maxZoom:l}=this.options;n&&console.time("total time");const d=`prepare ${t.length} points`;n&&console.time(d),this.points=t;const a=[];for(let x=0;x<t.length;x++){const _=t[x];if(!_.geometry)continue;const[C,E]=_.geometry.coordinates,A=vT(Xx(C)),D=vT(Kx(E));a.push(A,D,1/0,x,-1,1),this.options.reduce&&a.push(0)}let g=this.trees[l+1]=this._createTree(a);n&&console.timeEnd(d);for(let x=l;x>=i;x--){const _=+Date.now();g=this.trees[x]=this._createTree(this._cluster(g,x)),n&&console.log("z%d: %d clusters in %dms",x,g.numItems,+Date.now()-_)}return n&&console.timeEnd("total time"),this}getClusters(t,n){let i=((t[0]+180)%360+360)%360-180;const l=Math.max(-90,Math.min(90,t[1]));let d=t[2]===180?180:((t[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,d=180;else if(i>d){const E=this.getClusters([i,l,180,a],n),A=this.getClusters([-180,l,d,a],n);return E.concat(A)}const g=this.trees[this._limitZoom(n)],x=g.range(Xx(i),Kx(a),Xx(d),Kx(l)),_=g.data,C=[];for(const E of x){const A=this.stride*E;C.push(_[A+Dh]>1?xT(_,A,this.clusterProps):this.points[_[A+Ph]])}return C}getChildren(t){const n=this._getOriginId(t),i=this._getOriginZoom(t),l="No cluster with the specified id.",d=this.trees[i];if(!d)throw new Error(l);const a=d.data;if(n*this.stride>=a.length)throw new Error(l);const g=this.options.radius/(this.options.extent*Math.pow(2,i-1)),x=a[n*this.stride],_=a[n*this.stride+1],C=d.within(x,_,g),E=[];for(const A of C){const D=A*this.stride;a[D+Y_]===t&&E.push(a[D+Dh]>1?xT(a,D,this.clusterProps):this.points[a[D+Ph]])}if(E.length===0)throw new Error(l);return E}getLeaves(t,n,i){n=n||10,i=i||0;const l=[];return this._appendLeaves(l,t,n,i,0),l}getTile(t,n,i){const l=this.trees[this._limitZoom(t)],d=Math.pow(2,t),{extent:a,radius:g}=this.options,x=g/a,_=(i-x)/d,C=(i+1+x)/d,E={features:[]};return this._addTileFeatures(l.range((n-x)/d,_,(n+1+x)/d,C),l.data,n,i,d,E),n===0&&this._addTileFeatures(l.range(1-x/d,_,1,C),l.data,d,i,d,E),n===d-1&&this._addTileFeatures(l.range(0,_,x/d,C),l.data,-1,i,d,E),E.features.length?E:null}getClusterExpansionZoom(t){let n=this._getOriginZoom(t)-1;for(;n<=this.options.maxZoom;){const i=this.getChildren(t);if(n++,i.length!==1)break;t=i[0].properties.cluster_id}return n}_appendLeaves(t,n,i,l,d){const a=this.getChildren(n);for(const g of a){const x=g.properties;if(x&&x.cluster?d+x.point_count<=l?d+=x.point_count:d=this._appendLeaves(t,x.cluster_id,i,l,d):d<l?d++:t.push(g),t.length===i)break}return d}_createTree(t){const n=new Z2(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let i=0;i<t.length;i+=this.stride)n.add(t[i],t[i+1]);return n.finish(),n.data=t,n}_addTileFeatures(t,n,i,l,d,a){for(const g of t){const x=g*this.stride,_=n[x+Dh]>1;let C,E,A;if(_)C=QD(n,x,this.clusterProps),E=n[x],A=n[x+1];else{const L=this.points[n[x+Ph]];C=L.properties;const[B,z]=L.geometry.coordinates;E=Xx(B),A=Kx(z)}const D={type:1,geometry:[[Math.round(this.options.extent*(E*d-i)),Math.round(this.options.extent*(A*d-l))]],tags:C};let I;_||this.options.generateId?I=n[x+Ph]:I=this.points[n[x+Ph]].id,I!==void 0&&(D.id=I),a.features.push(D)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,n){const{radius:i,extent:l,reduce:d,minPoints:a}=this.options,g=i/(l*Math.pow(2,n)),x=t.data,_=[],C=this.stride;for(let E=0;E<x.length;E+=C){if(x[E+Rf]<=n)continue;x[E+Rf]=n;const A=x[E],D=x[E+1],I=t.within(x[E],x[E+1],g),L=x[E+Dh];let B=L;for(const z of I){const q=z*C;x[q+Rf]>n&&(B+=x[q+Dh])}if(B>L&&B>=a){let z=A*L,q=D*L,H,W=-1;const ne=((E/C|0)<<5)+(n+1)+this.points.length;for(const re of I){const ee=re*C;if(x[ee+Rf]<=n)continue;x[ee+Rf]=n;const oe=x[ee+Dh];z+=x[ee]*oe,q+=x[ee+1]*oe,x[ee+Y_]=ne,d&&(H||(H=this._map(x,E,!0),W=this.clusterProps.length,this.clusterProps.push(H)),d(H,this._map(x,ee)))}x[E+Y_]=ne,_.push(z/B,q/B,1/0,ne,-1,B),d&&_.push(W)}else{for(let z=0;z<C;z++)_.push(x[E+z]);if(B>1)for(const z of I){const q=z*C;if(!(x[q+Rf]<=n)){x[q+Rf]=n;for(let H=0;H<C;H++)_.push(x[q+H])}}}}return _}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,n,i){if(t[n+Dh]>1){const a=this.clusterProps[t[n+WD]];return i?Object.assign({},a):a}const l=this.points[t[n+Ph]].properties,d=this.options.map(l);return i&&d===l?Object.assign({},d):d}}function xT(e,t,n){return{type:"Feature",id:e[t+Ph],properties:QD(e,t,n),geometry:{type:"Point",coordinates:[$X(e[t]),GX(e[t+1])]}}}function QD(e,t,n){const i=e[t+Dh],l=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?`${Math.round(i/100)/10}k`:i,d=e[t+WD],a=d===-1?{}:Object.assign({},n[d]);return Object.assign(a,{cluster:!0,cluster_id:e[t+Ph],point_count:i,point_count_abbreviated:l})}function Xx(e){return e/360+.5}function Kx(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function $X(e){return(e-.5)*360}function GX(e){const t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ZX(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(n[i[l]]=e[i[l]]);return n}class qs{static isAdvancedMarkerAvailable(t){return google.maps.marker&&t.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,n){this.isAdvancedMarker(t)?t.map=n:t.setMap(n)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(Number.isFinite(t.position.lat)&&Number.isFinite(t.position.lng))return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return this.isAdvancedMarker(t)?!0:t.getVisible()}}class rw{constructor({markers:t,position:n}){this.markers=[],t&&(this.markers=t),n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(this.markers.length===0&&!this._position)return;const t=new google.maps.LatLngBounds(this._position,this._position);for(const n of this.markers)t.extend(qs.getPosition(n));return t}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>qs.getVisible(t)).length}push(t){this.markers.push(t)}delete(){this.marker&&(qs.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}function iw(e,t="assertion failed"){if(e==null)throw Error(t)}class XX{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return KX(t)}}const KX=e=>e.map(n=>new rw({position:qs.getPosition(n),markers:[n]}));class YX extends XX{constructor(t){var{maxZoom:n,radius:i=60}=t,l=ZX(t,["maxZoom","radius"]);super({maxZoom:n}),this.markers=[],this.clusters=[],this.state={zoom:-1},this.superCluster=new HX(Object.assign({maxZoom:this.maxZoom,radius:i},l))}calculate(t){let n=!1,i=t.map.getZoom();iw(i),i=Math.round(i);const l={zoom:i};if(!mT(t.markers,this.markers)){n=!0,this.markers=[...t.markers];const d=this.markers.map(a=>{const g=qs.getPosition(a);return{type:"Feature",geometry:{type:"Point",coordinates:[g.lng(),g.lat()]},properties:{marker:a}}});this.superCluster.load(d)}return n||(this.state.zoom<=this.maxZoom||l.zoom<=this.maxZoom)&&(n=!mT(this.state,l)),this.state=l,t.markers.length===0?(this.clusters=[],{clusters:this.clusters,changed:n}):(n&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:n})}cluster({map:t}){const n=t.getZoom();return iw(n),this.superCluster.getClusters([-180,-90,180,90],Math.round(n)).map(i=>this.transformCluster(i))}transformCluster({geometry:{coordinates:[t,n]},properties:i}){if(i.cluster)return new rw({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(d=>d.properties.marker),position:{lat:n,lng:t}});const l=i.marker;return new rw({markers:[l],position:qs.getPosition(l)})}}class WX{constructor(t,n){this.markers={sum:t.length};const i=n.map(d=>d.count),l=i.reduce((d,a)=>d+a,0);this.clusters={count:n.length,markers:{mean:l/n.length,sum:l,min:Math.min(...i),max:Math.max(...i)}}}}class QX{render({count:t,position:n},i,l){const a=`<svg fill="${t>Math.max(10,i.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${t}</text>
</svg>`,g=`Cluster of ${t} markers`,x=Number(google.maps.Marker.MAX_ZINDEX)+t;if(qs.isAdvancedMarkerAvailable(l)){const E=new DOMParser().parseFromString(a,"image/svg+xml").documentElement;E.setAttribute("transform","translate(0 25)");const A={map:l,position:n,zIndex:x,title:g,content:E};return new google.maps.marker.AdvancedMarkerElement(A)}const _={position:n,zIndex:x,title:g,icon:{url:`data:image/svg+xml;base64,${btoa(a)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(_)}}function JX(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}class X2{constructor(){JX(X2,google.maps.OverlayView)}}var Ff;(function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click",e.GMP_CLICK="gmp-click"})(Ff||(Ff={}));const eK=(e,t,n)=>{t.bounds&&n.fitBounds(t.bounds)};class JD extends X2{constructor({map:t,markers:n=[],algorithmOptions:i={},algorithm:l=new YX(i),renderer:d=new QX,onClusterClick:a=eK}){super(),this.map=null,this.idleListener=null,this.markers=[...n],this.clusters=[],this.algorithm=l,this.renderer=d,this.onClusterClick=a,t&&this.setMap(t)}addMarker(t,n){this.markers.includes(t)||(this.markers.push(t),n||this.render())}addMarkers(t,n){t.forEach(i=>{this.addMarker(i,!0)}),n||this.render()}removeMarker(t,n){const i=this.markers.indexOf(t);return i===-1?!1:(qs.setMap(t,null),this.markers.splice(i,1),n||this.render(),!0)}removeMarkers(t,n){let i=!1;return t.forEach(l=>{i=this.removeMarker(l,!0)||i}),i&&!n&&this.render(),i}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&t.getProjection()){google.maps.event.trigger(this,Ff.CLUSTERING_BEGIN,this);const{clusters:n,changed:i}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});if(i||i==null){const l=new Set;for(const a of n)a.markers.length==1&&l.add(a.markers[0]);const d=[];for(const a of this.clusters)a.marker!=null&&(a.markers.length==1?l.has(a.marker)||qs.setMap(a.marker,null):d.push(a.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>d.forEach(a=>qs.setMap(a,null)))}google.maps.event.trigger(this,Ff.CLUSTERING_END,this)}}onAdd(){const t=this.getMap();iw(t),this.idleListener=t.addListener("idle",this.render.bind(this)),this.render()}onRemove(){this.idleListener&&google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>qs.setMap(t,null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){const t=new WX(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(i=>{if(i.markers.length===1)i.marker=i.markers[0];else if(i.marker=this.renderer.render(i,t,n),i.markers.forEach(l=>qs.setMap(l,null)),this.onClusterClick){const l=qs.isAdvancedMarker(i.marker)?Ff.GMP_CLICK:Ff.CLUSTER_CLICK;i.marker.addListener(l,d=>{google.maps.event.trigger(this,Ff.CLUSTER_CLICK,i),this.onClusterClick(d,i,n)})}qs.setMap(i.marker,n)})}}const tK=({property:e,isSelected:t,onClick:n,setMarkerRef:i})=>{const l=k.useCallback(d=>{i(d,e.id)},[i,e.id]);return c.jsx(G2,{position:{lat:e.location.latitude,lng:e.location.longitude},onClick:n,zIndex:t?1e4:1e3,ref:l,children:c.jsx("div",{className:"custom-marker",style:{position:"relative",width:"18px",height:"18px",cursor:"pointer",transform:t?"scale(1.4)":"scale(1)",transition:"transform 0.2s ease-out"},children:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("defs",{children:c.jsxs("filter",{id:`shadow-${e.id}`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:t?3:2}),c.jsx("feOffset",{dx:"0",dy:"1",result:"offsetblur"}),c.jsx("feComponentTransfer",{children:c.jsx("feFuncA",{type:"linear",slope:t?.5:.35})}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx("circle",{cx:"12",cy:"12",r:"9",fill:t?"#008DDA":"#000",stroke:"white",strokeWidth:t?2:1.5,filter:`url(#shadow-${e.id})`})]})})})},nK=({amenity:e,isSelected:t,currentZoom:n,onClick:i,setMarkerRef:l})=>{const d=k.useCallback(W=>{l(W,`amenity-${e.id}`,e.category)},[l,e.id,e.category]),a=Qy[e.category],g=a.color,x=a.icon,_=24,C=Math.max(.6,Math.min(1.4,.6+(n-12)*.1)),E=_*C,A=E*.5,I=n>=14,B=Math.max(9,Math.min(13,11+(n-14)*.5)),z=Math.max(.85,Math.min(1,.7+(n-12)*.075)),q=e.name||a.label,H=k.useMemo(()=>c.jsx(x,{size:A,color:"white",strokeWidth:2.5}),[x,A]);return c.jsx(G2,{position:{lat:e.latitude,lng:e.longitude},onClick:i,zIndex:t?9e3:500,ref:d,children:c.jsxs("div",{className:"amenity-marker-container",style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",cursor:"pointer"},children:[c.jsxs("div",{className:"amenity-icon",style:{position:"relative",width:`${E}px`,height:`${E}px`,transform:t?"scale(1.2)":"scale(1)",transition:"transform 0.2s ease-out"},children:[c.jsxs("svg",{width:E,height:E,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:0,left:0},children:[c.jsx("defs",{children:c.jsxs("filter",{id:`amenity-shadow-${e.id}`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1.5"}),c.jsx("feOffset",{dx:"0",dy:"1",result:"offsetblur"}),c.jsx("feComponentTransfer",{children:c.jsx("feFuncA",{type:"linear",slope:"0.4"})}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx("circle",{cx:"12",cy:"12",r:"9",fill:g,stroke:"white",strokeWidth:"2.5",filter:`url(#amenity-shadow-${e.id})`})]}),c.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},children:H})]}),I&&c.jsx("div",{className:"amenity-label",style:{color:g,fontSize:`${B}px`,fontWeight:500,fontFamily:"Roboto, Arial, sans-serif",whiteSpace:"nowrap",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",opacity:z,transform:t?"scale(1.1)":"scale(1)",transformOrigin:"center top",transition:"all 0.2s ease"},children:q})]})})},rK=({amenities:e,selectedAmenity:t,onAmenitySelect:n,currentZoom:i,filterState:l,minZoomForMarkers:d=12})=>{const a=lp(),[g,x]=k.useState({}),_=k.useRef({}),C=i>=d,E=e.filter(D=>l[D.category]);k.useEffect(()=>a?(Object.keys(Qy).forEach(I=>{const B=Qy[I].color;_.current[I]=new JD({map:a,renderer:{render:({count:z,position:q})=>{const H=`
                            <svg fill="${B}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="40" height="40">
                                <circle cx="120" cy="120" opacity=".5" r="70" />
                                <circle cx="120" cy="120" opacity=".3" r="90" />
                                <circle cx="120" cy="120" opacity=".2" r="110" />
                                <text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif" font-weight="500">${z}</text>
                            </svg>
                        `,ne=new DOMParser().parseFromString(H,"image/svg+xml").documentElement;ne.setAttribute("transform","translate(0 20)");const re=typeof q.lat=="function"?{lat:q.lat(),lng:q.lng()}:q;return new google.maps.marker.AdvancedMarkerElement({position:re,content:ne,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+z})}}})}),()=>{Object.values(_.current).forEach(I=>{I?.clearMarkers()}),_.current={}}):void 0,[a]),k.useEffect(()=>{Object.values(_.current).forEach(D=>{D?.clearMarkers()}),Object.entries(g).forEach(([D,I])=>{const L=_.current[D];if(L&&I){const B=Object.values(I);B.length>0&&(L.addMarkers(B),console.log(` Clustered ${B.length} ${D} amenity markers`))}})},[g]);const A=k.useCallback((D,I,L)=>{x(B=>{const z=B[L]||{};if(D)return z[I]===D?B:{...B,[L]:{...z,[I]:D}};{if(!z[I])return B;const{[I]:q,...H}=z;return{...B,[L]:H}}})},[]);return C?c.jsx(c.Fragment,{children:E.map(D=>{const I=`amenity-${D.id}`;return c.jsx(nK,{amenity:D,isSelected:t?.id===D.id,currentZoom:i,onClick:()=>n(D),setMarkerRef:A},I)})}):null};function aw(e){return e.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ")}function iK(e){return jd.find(t=>t.id===e)?.name}function aK(e){const t=aw(e);return jd.find(n=>aw(n.name)===t)?.id}function oK(e){if(!e)return e;const t=aw(e),n=t.match(/^district (\d{1,2})$/);if(n){const l=Number(n[1]);if(l>=1&&l<=12)return`Qun ${l}`}return{"binh thanh district":"Qun Bnh Thnh","go vap district":"Qun G Vp","tan binh district":"Qun Tn Bnh","tan phu district":"Qun Tn Ph","phu nhuan district":"Qun Ph Nhun","binh tan district":"Qun Bnh Tn","hoc mon district":"Huyn Hc Mn","cu chi district":"Huyn C Chi","binh chanh district":"Huyn Bnh Chnh","nha be district":"Huyn Nh B","can gio district":"Huyn Cn Gi","thu duc":"TP. Th c","thu duc city":"TP. Th c","thu duc district":"TP. Th c"}[t]??e}const sK=({amenity:e,onClose:t})=>{const n=Qy[e.category],i=n.icon;return c.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden max-w-sm relative",children:[c.jsx("button",{onClick:t,className:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full shadow hover:bg-gray-100 transition-colors","aria-label":"Close",children:c.jsx(Zf,{className:"w-4 h-4 text-gray-600"})}),c.jsx("div",{className:"px-4 py-3 text-white",style:{backgroundColor:n.color},children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-2xl",children:c.jsx(i,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-medium opacity-90",children:n.label}),c.jsx("h3",{className:"font-semibold text-sm line-clamp-2 break-words",children:e.name})]})]})}),c.jsxs("div",{className:"p-4 space-y-3",children:[e.vicinity&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bs,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 break-words",children:e.vicinity})]}),e.google_rating&&e.google_user_ratings_total&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(F3,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),c.jsx("span",{className:"text-xs font-medium text-gray-700",children:e.google_rating.toFixed(1)}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.google_user_ratings_total," nh gi)"]})]}),c.jsx("div",{className:"pt-2 border-t border-gray-100",children:c.jsxs("p",{className:"text-xs text-gray-500",children:[c.jsx("span",{className:"font-medium",children:"Qun/Huyn:"})," ",oK(e.district)]})})]})]})};var Lb="Checkbox",[lK]=Cc(Lb),[cK,K2]=lK(Lb);function uK(e){const{__scopeCheckbox:t,checked:n,children:i,defaultChecked:l,disabled:d,form:a,name:g,onCheckedChange:x,required:_,value:C="on",internal_do_not_use_render:E}=e,[A,D]=zh({prop:n,defaultProp:l??!1,onChange:x,caller:Lb}),[I,L]=k.useState(null),[B,z]=k.useState(null),q=k.useRef(!1),H=I?!!a||!!I.closest("form"):!0,W={checked:A,disabled:d,setChecked:D,control:I,setControl:L,name:g,form:a,value:C,hasConsumerStoppedPropagationRef:q,required:_,defaultChecked:Oh(l)?!1:l,isFormControl:H,bubbleInput:B,setBubbleInput:z};return c.jsx(cK,{scope:t,...W,children:dK(E)?E(W):i})}var e4="CheckboxTrigger",t4=k.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...i},l)=>{const{control:d,value:a,disabled:g,checked:x,required:_,setControl:C,setChecked:E,hasConsumerStoppedPropagationRef:A,isFormControl:D,bubbleInput:I}=K2(e4,e),L=Vr(l,C),B=k.useRef(x);return k.useEffect(()=>{const z=d?.form;if(z){const q=()=>E(B.current);return z.addEventListener("reset",q),()=>z.removeEventListener("reset",q)}},[d,E]),c.jsx(gr.button,{type:"button",role:"checkbox","aria-checked":Oh(x)?"mixed":x,"aria-required":_,"data-state":s4(x),"data-disabled":g?"":void 0,disabled:g,value:a,...i,ref:L,onKeyDown:Tn(t,z=>{z.key==="Enter"&&z.preventDefault()}),onClick:Tn(n,z=>{E(q=>Oh(q)?!0:!q),I&&D&&(A.current=z.isPropagationStopped(),A.current||z.stopPropagation())})})});t4.displayName=e4;var n4=k.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:i,checked:l,defaultChecked:d,required:a,disabled:g,value:x,onCheckedChange:_,form:C,...E}=e;return c.jsx(uK,{__scopeCheckbox:n,checked:l,defaultChecked:d,disabled:g,required:a,onCheckedChange:_,name:i,form:C,value:x,internal_do_not_use_render:({isFormControl:A})=>c.jsxs(c.Fragment,{children:[c.jsx(t4,{...E,ref:t,__scopeCheckbox:n}),A&&c.jsx(o4,{__scopeCheckbox:n})]})})});n4.displayName=Lb;var r4="CheckboxIndicator",i4=k.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:i,...l}=e,d=K2(r4,n);return c.jsx(ju,{present:i||Oh(d.checked)||d.checked===!0,children:c.jsx(gr.span,{"data-state":s4(d.checked),"data-disabled":d.disabled?"":void 0,...l,ref:t,style:{pointerEvents:"none",...e.style}})})});i4.displayName=r4;var a4="CheckboxBubbleInput",o4=k.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:i,hasConsumerStoppedPropagationRef:l,checked:d,defaultChecked:a,required:g,disabled:x,name:_,value:C,form:E,bubbleInput:A,setBubbleInput:D}=K2(a4,e),I=Vr(n,D),L=q2(d),B=s2(i);k.useEffect(()=>{const q=A;if(!q)return;const H=window.HTMLInputElement.prototype,ne=Object.getOwnPropertyDescriptor(H,"checked").set,re=!l.current;if(L!==d&&ne){const ee=new Event("click",{bubbles:re});q.indeterminate=Oh(d),ne.call(q,Oh(d)?!1:d),q.dispatchEvent(ee)}},[A,L,d,l]);const z=k.useRef(Oh(d)?!1:d);return c.jsx(gr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??z.current,required:g,disabled:x,name:_,value:C,form:E,...t,tabIndex:-1,ref:I,style:{...t.style,...B,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});o4.displayName=a4;function dK(e){return typeof e=="function"}function Oh(e){return e==="indeterminate"}function s4(e){return Oh(e)?"indeterminate":e?"checked":"unchecked"}function bT({className:e,...t}){return c.jsx(n4,{"data-slot":"checkbox",className:Kt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:c.jsx(i4,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:c.jsx(Oj,{className:"size-3.5"})})})}const Qy={healthcare:{id:"healthcare",label:"Y t",color:"#ef4444",icon:G5,description:"Bnh vin, phng khm, nh thuc"},education:{id:"education",label:"Gio dc",color:"#8b5cf6",icon:Zm,description:"Trng hc, trung tm o to"},transportation:{id:"transportation",label:"Giao thng",color:"#eab308",icon:u5,description:"Ga xe, bn xe, trm xe but"},environment:{id:"environment",label:"Mi trng",color:"#14b8a6",icon:H3,description:"Cng vin, khu vui chi"},public_safety:{id:"public_safety",label:"An ninh",color:"#f97316",icon:M3,description:"Cng an, cnh st, cu ha"},shopping:{id:"shopping",label:"Tin ch",color:"#22c55e",icon:O3,description:"Siu th, ca hng, ch"},entertainment:{id:"entertainment",label:"Gii tr",color:"#ec4899",icon:T3,description:"Rp phim, khu vui chi gii tr"}};var hK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fK=hK.reduce((e,t)=>{const n=K0(`Primitive.${t}`),i=k.forwardRef((l,d)=>{const{asChild:a,...g}=l,x=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(x,{...g,ref:d})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),pK="Separator",_T="horizontal",mK=["horizontal","vertical"],l4=k.forwardRef((e,t)=>{const{decorative:n,orientation:i=_T,...l}=e,d=gK(i)?i:_T,g=n?{role:"none"}:{"aria-orientation":d==="vertical"?d:void 0,role:"separator"};return c.jsx(fK.div,{"data-orientation":d,...g,...l,ref:t})});l4.displayName=pK;function gK(e){return mK.includes(e)}var yK=l4;function vK({className:e,orientation:t="horizontal",decorative:n=!0,...i}){return c.jsx(yK,{"data-slot":"separator",decorative:n,orientation:t,className:Kt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}const xK=({filterState:e,onFilterChange:t,amenityCounts:n={},activeIndicator:i,onIndicatorChange:l})=>{const[d,a]=Bt.useState(!0),g=Object.values(Qy),x=(_,C,E)=>{const A=_==="none"?i===null:i===_,D=`ind-${_}`;return c.jsxs("div",{className:"flex items-center gap-2 p-2 rounded hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>l(_==="none"?null:_),children:[c.jsx(bT,{id:D,checked:A,onCheckedChange:()=>l(_==="none"?null:_),onClick:I=>I.stopPropagation()}),c.jsxs("label",{htmlFor:D,className:"flex-1 cursor-pointer flex items-center gap-2",children:[E&&c.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:E}}),c.jsx("span",{className:"text-sm font-medium text-gray-700 flex-1",children:C})]})]})};return c.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 z-20 overflow-hidden w-[280px]",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>a(!d),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(zj,{className:"w-4 h-4 text-blue-600"}),c.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Lp bn "})]}),d?c.jsx(Rj,{className:"w-4 h-4 text-gray-500"}):c.jsx(qw,{className:"w-4 h-4 text-gray-500"})]}),d&&c.jsxs("div",{className:"max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"p-3",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[c.jsx(_3,{className:"w-3 h-3 text-purple-600"}),c.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ch s c bit (Heatmap)"})]}),c.jsxs("div",{className:"space-y-1",children:[x("none","Khng hin th"),x("flood","Ngp lt","#3b82f6"),x("accident","An ninh / Tai nn","#ef4444"),x("project","Tim nng / D n","#22c55e")]})]}),c.jsx(vK,{}),c.jsxs("div",{className:"p-3",children:[c.jsx("div",{className:"flex items-center gap-2 mb-2 px-1",children:c.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Tin ch xung quanh"})}),c.jsx("div",{className:"space-y-1",children:g.map(_=>{const C=n[_.id]||0,E=e[_.id];return c.jsxs("div",{className:"flex items-center gap-2 p-2 rounded hover:bg-gray-50 transition-colors",children:[c.jsx(bT,{id:`amenity-${_.id}`,checked:E,onCheckedChange:A=>{t(_.id,A)}}),c.jsxs(qj,{htmlFor:`amenity-${_.id}`,className:"flex-1 cursor-pointer flex items-center gap-2",children:[c.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:_.color}}),c.jsx("span",{className:"text-sm font-medium text-gray-700 flex-1",children:_.label}),C>0&&c.jsx("span",{className:"text-xs text-gray-500 font-normal bg-gray-100 px-1.5 py-0.5 rounded-full",children:C})]})]},_.id)})})]})]})]})},bK=({onZoomChange:e,onMapInteraction:t,onMapClick:n,minZoomForAPI:i=12,debounceDelay:l=800})=>{const d=lp(),a=k.useRef(null),g=k.useRef(""),x=k.useCallback(()=>{if(!d||!t)return;const C=d.getBounds(),E=d.getZoom();if(!C||!E||E<i)return;const A=C.getNorthEast(),D=C.getSouthWest(),I={minLat:D.lat(),minLng:D.lng(),maxLat:A.lat(),maxLng:A.lng(),zoom:E},L=`${I.minLat.toFixed(3)}-${I.minLng.toFixed(3)}-${I.zoom.toFixed(1)}`;L!==g.current&&(g.current=L,console.log(" API Call triggered:",I),Promise.resolve().then(()=>{t(I)}))},[d,t,i]),_=k.useCallback(()=>{a.current&&clearTimeout(a.current),a.current=window.setTimeout(()=>{x()},l)},[x,l]);k.useEffect(()=>{if(!d)return;const C=d.addListener("bounds_changed",_),E=d.addListener("zoom_changed",()=>{_();const I=d.getZoom();I!==void 0&&e(I)}),A=d.addListener("dragend",_),D=d.addListener("click",n);return x(),()=>{a.current&&clearTimeout(a.current),google.maps.event.removeListener(C),google.maps.event.removeListener(E),google.maps.event.removeListener(A),google.maps.event.removeListener(D)}},[d,_,x,e,n])},_K=e=>(bK(e),null),wK=(e="#1e40af")=>({render:({count:t,position:n})=>{const i=`
                <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 240 240"
                width="60"
                height="60"
            >
                <defs>
                    <filter id="cluster-shadow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="6" />
                        <feOffset dx="0" dy="4" result="offsetblur" />
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.35" />
                        </feComponentTransfer>
                        <feMerge>
                            <feMergeNode />
                            <feMergeNode in="SourceGraphic" />
                        </feMerge>
                    </filter>
                </defs>

                <circle
                    cx="120"
                    cy="120"
                    r="96"
                    fill="${e}"
                    opacity="0.15"
                />

                <circle
                    cx="120"
                    cy="120"
                    r="72"
                    fill="${e}"
                    stroke="#ffffff"
                    stroke-width="6"
                    filter="url(#cluster-shadow)"
                />

                <text
                    x="50%"
                    y="50%"
                    text-anchor="middle"
                    dominant-baseline="middle"
                    fill="#ffffff"
                    font-size="55"
                    font-family="Roboto, Arial, sans-serif"
                    font-weight="600"
                >
                    ${t}
                </text>
            </svg>
            `,d=new DOMParser().parseFromString(i,"image/svg+xml").documentElement;d.setAttribute("transform","translate(0 25)");const a=typeof n.lat=="function"?{lat:n.lat(),lng:n.lng()}:n;return new google.maps.marker.AdvancedMarkerElement({position:a,content:d,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+t})}}),SK={lat:10.776204550769549,lng:106.70103773964006},Yx=12,EK=11,CK=({properties:e,selectedProperty:t,onPropertySelect:n,currentZoom:i,minZoomForMarkers:l=12,clusterColor:d="#008DDA"})=>{const a=lp(),[g,x]=k.useState({}),_=k.useRef(null),C=i>=l;k.useEffect(()=>{if(a)return _.current=new JD({map:a,renderer:wK(d)}),()=>{_.current?.clearMarkers(),_.current=null}},[a,d]),k.useEffect(()=>{if(!_.current)return;_.current.clearMarkers();const A=Object.values(g);A.length>0&&(_.current.addMarkers(A),console.log(` Clustered ${A.length} markers`))},[g]);const E=k.useCallback((A,D)=>{x(I=>{if(A)return I[D]===A?I:{...I,[D]:A};{if(!I[D])return I;const{[D]:L,...B}=I;return B}})},[]);return C?c.jsx(c.Fragment,{children:e.map(A=>c.jsx(tK,{property:A,isSelected:t?.id===A.id,onClick:()=>n(A),setMarkerRef:E},A.id))}):null},TK=e=>!e||!e.startsWith("MULTIPOLYGON")?[]:e.replace("MULTIPOLYGON","").trim().slice(2,-2).split(")), ((").map(i=>i.replace(/[()]/g,"").split(",").map(d=>{const[a,g]=d.trim().split(" ").map(Number);return{lat:g,lng:a}})),kK={flood:{color:"#3b82f6",label:"Ngp lt",icon:j5},accident:{color:"#ef4444",label:"Tai nn",icon:Z3},project:{color:"#22c55e",label:"D n",icon:V5}},jK=e=>{const t=lp(),n=k.useRef(null);return k.useEffect(()=>{if(t)return n.current||(n.current=new google.maps.Polygon(e),n.current.setMap(t)),()=>{n.current&&n.current.setMap(null)}},[t]),k.useEffect(()=>{n.current&&n.current.setOptions(e)},[e]),k.useEffect(()=>{if(!n.current||!e.onClick)return;const i=n.current.addListener("click",e.onClick);return()=>{google.maps.event.removeListener(i)}},[e.onClick]),null},AK=({districts:e,activeIndicator:t,selectedDistrict:n,onSelectDistrict:i})=>{const l=k.useMemo(()=>e.filter(x=>x.boundary_wkt),[e]);if(!t)return null;const d=kK[t],a=x=>Math.min(Math.max(x/20,.1),.6),g=x=>{switch(t){case"flood":return x.stats.flood_score;case"accident":return x.stats.accident_score;case"project":return x.stats.project_score;default:return 0}};return c.jsxs(c.Fragment,{children:[l.map(x=>{const _=TK(x.boundary_wkt),C=g(x);return C<=0?null:c.jsx(jK,{paths:_,strokeColor:d.color,strokeOpacity:.8,strokeWeight:2,fillColor:d.color,fillOpacity:a(C),onClick:E=>{E.latLng&&i({data:x,position:E.latLng.toJSON()})}},x.district_id)}),n&&c.jsx(tw,{position:n.position,onCloseClick:()=>i(null),headerContent:c.jsxs("div",{className:"flex items-center gap-2 px-1",children:[c.jsx(d.icon,{className:"w-4 h-4",style:{color:d.color}}),c.jsx("span",{className:"font-bold text-gray-800",children:n.data.district_name}),c.jsxs("span",{className:"ml-2 bg-white border border-gray-200 text-gray-800 text-xs font-semibold px-2.5 py-0.5 rounded-full",children:[d.label,": ",g(n.data).toFixed(1)]})]}),children:c.jsxs("div",{className:"w-[300px] max-w-[90vw]",onClick:x=>x.stopPropagation(),children:[c.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Cc tin tc lin quan n ",d.label.toLowerCase(),":"]}),c.jsx("div",{className:"h-[200px] pr-3 overflow-y-auto",children:c.jsxs("div",{className:"space-y-3",children:[n.data.articles.filter(x=>t==="flood"?x.topic==="FLOOD":t==="accident"?x.topic==="ACCIDENT":t==="project"?x.topic==="PROJECT":!1).map(x=>c.jsxs("div",{className:"border-b border-gray-100 last:border-0 pb-2",children:[c.jsxs("a",{href:x.url,target:"_blank",rel:"noreferrer",className:"font-medium text-sm text-blue-600 hover:underline flex items-start gap-1 mb-1",children:[x.title,c.jsx(D5,{className:"w-3 h-3 mt-1 flex-shrink-0"})]}),c.jsx("p",{className:"text-xs text-gray-600 line-clamp-3",children:x.summary||"Khng c tm tt."}),c.jsxs("div",{className:"flex justify-between items-center mt-1",children:[c.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(x.published_date).toLocaleDateString("vi-VN")}),c.jsxs("span",{className:`text-[10px] px-1 rounded ${x.sentiment==="POSITIVE"?"bg-green-100 text-green-700":x.sentiment==="NEGATIVE"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:["Impact: ",x.impact_score]})]})]},x.id)),n.data.articles.filter(x=>t==="flood"?x.topic==="FLOOD":t==="accident"?x.topic==="ACCIDENT":t==="project"?x.topic==="PROJECT":!1).length===0&&c.jsx("div",{className:"text-center py-4 text-gray-500 text-sm italic",children:"Khng tm thy bi bo c th."})]})})]})})]})},c4=({properties:e,defaultZoom:t=EK,height:n="100%",width:i="100%",centerLat:l,centerLng:d,onMapInteraction:a})=>{const[g,x]=k.useState(null),[_,C]=k.useState(t),[E,A]=k.useState(null),[D,I]=k.useState([]),[L,B]=k.useState(null),[z,q]=k.useState({healthcare:!1,education:!1,transportation:!1,environment:!1,public_safety:!1,shopping:!1,entertainment:!1}),[H,W]=k.useState(null),[ne,re]=k.useState([]),[ee,oe]=k.useState(null),he=k.useRef(new Set),we=k.useRef([]),ye=k.useMemo(()=>l!==void 0&&d!==void 0?{lat:l,lng:d}:SK,[l,d]),Pe="AIzaSyChd7luXRggzI6tRIWkewPnf_o9kk2mF7c",Ke=k.useMemo(()=>[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]}],[]),ze=k.useMemo(()=>{const me={};return D.forEach(Ce=>{me[Ce.category]=(me[Ce.category]||0)+1}),me},[D]),Je=me=>we.current.some(Ce=>me.minLat>=Ce.minLat&&me.maxLat<=Ce.maxLat&&me.minLng>=Ce.minLng&&me.maxLng<=Ce.maxLng),Ae=k.useCallback(async(me,Ce)=>{if(!(me.zoom<Yx)){if(Je(me)){console.log("Skipping fetch: Region already cached");return}try{const pe=Object.keys(Ce).filter(Mt=>Ce[Mt]);if(pe.length===0){D.length>0&&I([]);return}const Q=.005,Ee={minLat:me.minLat-Q,minLng:me.minLng-Q,maxLat:me.maxLat+Q,maxLng:me.maxLng+Q},Ge=pe.map(Mt=>nG(Ee.minLat,Ee.minLng,Ee.maxLat,Ee.maxLng,Mt,200)),We=(await Promise.all(Ge)).flatMap(Mt=>Mt.data.items||[]),Nt=[];let At=!1;We.forEach(Mt=>{he.current.has(Mt.id)||(he.current.add(Mt.id),Nt.push(Mt),At=!0)}),At?(I(Mt=>[...Mt,...Nt]),we.current.push({...me,...Ee}),console.log(`Loaded ${Nt.length} new amenities.`)):(we.current.push({...me,...Ee}),console.log("No new amenities found in this region."))}catch(pe){console.error("Error fetching amenities:",pe)}}},[D]),De=k.useCallback(async me=>{try{const Ce=await uG(me.minLat,me.minLng,me.maxLat,me.maxLng);Ce.data?.items&&re(Ce.data.items)}catch(Ce){console.error("Error fetching district news:",Ce)}},[]);k.useEffect(()=>{if(!E)return;const me=setTimeout(()=>{Ae(E,z),H?De(E):(re([]),oe(null))},400);return()=>clearTimeout(me)},[E,z,H,Ae,De]);const ke=(me,Ce)=>{const pe={...z,[me]:Ce};q(pe),Ce?we.current=[]:I(Q=>Q.filter(Ee=>Ee.category!==me))},st=me=>{A(me),a?.(me)};return c.jsx("div",{className:"relative",style:{width:i,height:n},children:c.jsxs(SZ,{apiKey:Pe,children:[c.jsxs(ZD,{mapId:"b4e09e31598ea5482295a4f9",defaultCenter:ye,defaultZoom:t,gestureHandling:"greedy",disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,clickableIcons:!1,styles:Ke,style:{width:"100%",height:"100%"},children:[c.jsx(_K,{onZoomChange:C,onMapInteraction:st,onMapClick:()=>{x(null),B(null),oe(null)}}),c.jsx(AK,{districts:ne,activeIndicator:H,selectedDistrict:ee,onSelectDistrict:oe}),c.jsx(CK,{properties:e,selectedProperty:g,onPropertySelect:x,currentZoom:_,minZoomForMarkers:Yx}),c.jsx(rK,{amenities:D,selectedAmenity:L,onAmenitySelect:B,currentZoom:_,filterState:z,minZoomForMarkers:Yx}),g&&c.jsx(tw,{pixelOffset:[0,-30],position:{lat:g.location.latitude,lng:g.location.longitude},onCloseClick:()=>x(null),headerDisabled:!0,children:c.jsx("div",{onClick:me=>me.stopPropagation(),children:c.jsx(iX,{id:g.id,title:g.title,image:g.image,address:g.location.address,price:g.price,area:g.area,onClose:()=>x(null)})})}),L&&c.jsx(tw,{pixelOffset:[0,-50],position:{lat:L.latitude,lng:L.longitude},onCloseClick:()=>B(null),headerDisabled:!0,children:c.jsx("div",{onClick:me=>me.stopPropagation(),children:c.jsx(sK,{amenity:L,onClose:()=>B(null)})})})]}),c.jsx(xK,{filterState:z,onFilterChange:ke,amenityCounts:ze,activeIndicator:H,onIndicatorChange:W}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg px-4 py-2 border border-gray-200 z-10",children:[c.jsxs("p",{className:"text-sm font-semibold text-gray-800",children:[e.length," bt ng sn",D.length>0&&`  ${D.length} tin ch`]}),H&&ne.length>0&&c.jsxs("p",{className:"text-xs text-blue-600 font-medium mt-1",children:[" ang hin th heatmap: ",ne.length," khu vc"]}),_<Yx?c.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Phng to bn   xem marker"}):c.jsx("p",{className:"text-xs text-gray-500",children:"Click vo marker  xem chi tit"})]})]})})};function Y2(e){return{"duoi-500-trieu":"0-500000000","500-trieu-den-1-ty":"500000000-1000000000","1-ty-den-5-ty":"1000000000-5000000000","5-ty-den-10-ty":"5000000000-10000000000","10-ty-den-20-ty":"10000000000-20000000000","tren-20-ty":"20000000000-999999999999"}[e]}function W2(e){return{"0-500000000":"duoi-500-trieu","500000000-1000000000":"500-trieu-den-1-ty","1000000000-5000000000":"1-ty-den-5-ty","5000000000-10000000000":"5-ty-den-10-ty","10000000000-20000000000":"10-ty-den-20-ty","20000000000-999999999999":"tren-20-ty"}[e]}const Q2=()=>{const[e,t]=iv(),n=k.useMemo(()=>{const a=[];return e.forEach((g,x)=>{const _=x.split("_");if(_.length<2)return;const C=_.pop(),E=_.join("_");let A=g;if(E==="addressDistrict"){const D=iK(g);D&&(A=D)}if(E==="price"&&C==="rng"){const D=Y2(g);D&&(A=D)}a.push({key:E,operator:C,value:A})}),a},[e]),i=k.useCallback((a,g,x)=>{const _=new URLSearchParams(e),C=`${a}_${g}`;if(x===""||x===null||x===void 0)_.delete(C);else{let E=String(x);if(a==="addressDistrict"){const A=aK(String(x));A&&(E=A)}if(a==="price"&&g==="rng"){const A=W2(String(x));A&&(E=A)}_.set(C,E)}t(_)},[e,t]),l=k.useCallback((a,g)=>{const x=new URLSearchParams(e);x.delete(`${a}_${g}`),t(x)},[e,t]),d=k.useCallback(()=>{const a=new URLSearchParams(e);n.forEach(g=>{a.delete(`${g.key}_${g.operator}`)}),t(a)},[e,n,t]);return{filters:n,setFilter:i,removeFilter:l,clearFilters:d}};function u4(e){return{price_asc:{key:"price",type:"ASC"},price_desc:{key:"price",type:"DESC"},area_asc:{key:"area",type:"ASC"},area_desc:{key:"area",type:"DESC"}}[e]}function NK(e,t,n,i){var l=this,d=k.useRef(null),a=k.useRef(0),g=k.useRef(0),x=k.useRef(null),_=k.useRef([]),C=k.useRef(),E=k.useRef(),A=k.useRef(e),D=k.useRef(!0);A.current=e;var I=typeof window<"u",L=!t&&t!==0&&I;if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0;var B=!!(n=n||{}).leading,z=!("trailing"in n)||!!n.trailing,q="maxWait"in n,H="debounceOnServer"in n&&!!n.debounceOnServer,W=q?Math.max(+n.maxWait||0,t):null;k.useEffect(function(){return D.current=!0,function(){D.current=!1}},[]);var ne=k.useMemo(function(){var re=function(Ke){var ze=_.current,Je=C.current;return _.current=C.current=null,a.current=Ke,g.current=g.current||Ke,E.current=A.current.apply(Je,ze)},ee=function(Ke,ze){L&&cancelAnimationFrame(x.current),x.current=L?requestAnimationFrame(Ke):setTimeout(Ke,ze)},oe=function(Ke){if(!D.current)return!1;var ze=Ke-d.current;return!d.current||ze>=t||ze<0||q&&Ke-a.current>=W},he=function(Ke){return x.current=null,z&&_.current?re(Ke):(_.current=C.current=null,E.current)},we=function Ke(){var ze=Date.now();if(B&&g.current===a.current&&ye(),oe(ze))return he(ze);if(D.current){var Je=t-(ze-d.current),Ae=q?Math.min(Je,W-(ze-a.current)):Je;ee(Ke,Ae)}},ye=function(){i&&i({})},Pe=function(){if(I||H){var Ke=Date.now(),ze=oe(Ke);if(_.current=[].slice.call(arguments),C.current=l,d.current=Ke,ze){if(!x.current&&D.current)return a.current=d.current,ee(we,t),B?re(d.current):E.current;if(q)return ee(we,t),re(d.current)}return x.current||ee(we,t),E.current}};return Pe.cancel=function(){var Ke=x.current;Ke&&(L?cancelAnimationFrame(x.current):clearTimeout(x.current)),a.current=0,_.current=d.current=C.current=x.current=null,Ke&&i&&i({})},Pe.isPending=function(){return!!x.current},Pe.flush=function(){return x.current?he(Date.now()):E.current},Pe},[B,q,t,W,z,L,I,H,i]);return ne}function MK(e,t){return e===t}function ig(e,t,n){var i=MK,l=k.useRef(e),d=k.useState({})[1],a=NK(k.useCallback(function(x){l.current=x,d({})},[d]),t,n,d),g=k.useRef(e);return i(g.current,e)||(a(e),g.current=e),[l.current,a]}var zm;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(zm||(zm={}));class W_ extends Error{constructor(t,n,i){super(t),this.message=t,this.code=n,this.data=i}}const DK=e=>{var t,n;return e?.androidBridge?"android":!((n=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},PK=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},i=n.Plugins=n.Plugins||{},l=()=>t!==null?t.name:DK(e),d=()=>l()!=="web",a=E=>{const A=_.get(E);return!!(A?.platforms.has(l())||g(E))},g=E=>{var A;return(A=n.PluginHeaders)===null||A===void 0?void 0:A.find(D=>D.name===E)},x=E=>e.console.error(E),_=new Map,C=(E,A={})=>{const D=_.get(E);if(D)return console.warn(`Capacitor plugin "${E}" already registered. Cannot register plugins twice.`),D.proxy;const I=l(),L=g(E);let B;const z=async()=>(!B&&I in A?B=typeof A[I]=="function"?B=await A[I]():B=A[I]:t!==null&&!B&&"web"in A&&(B=typeof A.web=="function"?B=await A.web():B=A.web),B),q=(oe,he)=>{var we,ye;if(L){const Pe=L?.methods.find(Ke=>he===Ke.name);if(Pe)return Pe.rtype==="promise"?Ke=>n.nativePromise(E,he.toString(),Ke):(Ke,ze)=>n.nativeCallback(E,he.toString(),Ke,ze);if(oe)return(we=oe[he])===null||we===void 0?void 0:we.bind(oe)}else{if(oe)return(ye=oe[he])===null||ye===void 0?void 0:ye.bind(oe);throw new W_(`"${E}" plugin is not implemented on ${I}`,zm.Unimplemented)}},H=oe=>{let he;const we=(...ye)=>{const Pe=z().then(Ke=>{const ze=q(Ke,oe);if(ze){const Je=ze(...ye);return he=Je?.remove,Je}else throw new W_(`"${E}.${oe}()" is not implemented on ${I}`,zm.Unimplemented)});return oe==="addListener"&&(Pe.remove=async()=>he()),Pe};return we.toString=()=>`${oe.toString()}() { [capacitor code] }`,Object.defineProperty(we,"name",{value:oe,writable:!1,configurable:!1}),we},W=H("addListener"),ne=H("removeListener"),re=(oe,he)=>{const we=W({eventName:oe},he),ye=async()=>{const Ke=await we;ne({eventName:oe,callbackId:Ke},he)},Pe=new Promise(Ke=>we.then(()=>Ke({remove:ye})));return Pe.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ye()},Pe},ee=new Proxy({},{get(oe,he){switch(he){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?re:W;case"removeListener":return ne;default:return H(he)}}});return i[E]=ee,_.set(E,{name:E,proxy:ee,platforms:new Set([...Object.keys(A),...L?[I]:[]])}),ee};return n.convertFileSrc||(n.convertFileSrc=E=>E),n.getPlatform=l,n.handleError=x,n.isNativePlatform=d,n.isPluginAvailable=a,n.registerPlugin=C,n.Exception=W_,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},IK=e=>e.Capacitor=PK(e),Cu=IK(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),up=Cu.registerPlugin;class J2{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(n);const d=this.windowListeners[t];d&&!d.registered&&this.addWindowListener(d),i&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,i){const l=this.listeners[t];if(!l){if(i){let d=this.retainedEventArguments[t];d||(d=[]),d.push(n),this.retainedEventArguments[t]=d}return}l.forEach(d=>d(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(t="not implemented"){return new Cu.Exception(t,zm.Unimplemented)}unavailable(t="not available"){return new Cu.Exception(t,zm.Unavailable)}async removeListener(t,n){const i=this.listeners[t];if(!i)return;const l=i.indexOf(n);this.listeners[t].splice(l,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(i=>{this.notifyListeners(t,i)}))}}const wT=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ST=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class OK extends J2{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(i=>{if(i.length<=0)return;let[l,d]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=ST(l).trim(),d=ST(d).trim(),n[l]=d}),n}async setCookie(t){try{const n=wT(t.key),i=wT(t.value),l=`; expires=${(t.expires||"").replace("expires=","")}`,d=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${i||""}${l}; path=${d}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}up("CapacitorCookies",{web:()=>new OK});const RK=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const l=i.result;t(l.indexOf(",")>=0?l.split(",")[1]:l)},i.onerror=l=>n(l),i.readAsDataURL(e)}),LK=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(l=>l.toLocaleLowerCase()).reduce((l,d,a)=>(l[d]=e[t[a]],l),{})},zK=(e,t=!0)=>e?Object.entries(e).reduce((i,l)=>{const[d,a]=l;let g,x;return Array.isArray(a)?(x="",a.forEach(_=>{g=t?encodeURIComponent(_):_,x+=`${d}=${g}&`}),x.slice(0,-1)):(g=t?encodeURIComponent(a):a,x=`${d}=${g}`),`${i}&${x}`},"").substr(1):null,BK=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),l=LK(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(l.includes("application/x-www-form-urlencoded")){const d=new URLSearchParams;for(const[a,g]of Object.entries(e.data||{}))d.set(a,g);n.body=d.toString()}else if(l.includes("multipart/form-data")||e.data instanceof FormData){const d=new FormData;if(e.data instanceof FormData)e.data.forEach((g,x)=>{d.append(x,g)});else for(const g of Object.keys(e.data))d.append(g,e.data[g]);n.body=d;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(l.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class FK extends J2{async request(t){const n=BK(t,t.webFetchExtra),i=zK(t.params,t.shouldEncodeUrlParams),l=i?`${t.url}?${i}`:t.url,d=await fetch(l,n),a=d.headers.get("content-type")||"";let{responseType:g="text"}=d.ok?t:{};a.includes("application/json")&&(g="json");let x,_;switch(g){case"arraybuffer":case"blob":_=await d.blob(),x=await RK(_);break;case"json":x=await d.json();break;case"document":case"text":default:x=await d.text()}const C={};return d.headers.forEach((E,A)=>{C[A]=E}),{data:x,headers:C,status:d.status,url:d.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}up("CapacitorHttp",{web:()=>new FK});var ET;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(ET||(ET={}));var CT;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(CT||(CT={}));class UK extends J2{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}up("SystemBars",{web:()=>new UK});const VK=()=>{const[e,t]=k.useState(""),[n,i]=k.useState("all"),[l,d]=k.useState("all"),[a,g]=k.useState("all"),[x,_]=k.useState("default"),[C,E]=k.useState(1),[A,D]=k.useState(1),[I,L]=k.useState(!1),[B,z]=k.useState([]),[q,H]=k.useState(!1),{filters:W,setFilter:ne}=Q2(),[re,ee]=iv(),[oe,he]=k.useState(new Set),{userId:we,isLoggedIn:ye}=Li(),[Pe,Ke]=k.useState(null),[ze,Je]=k.useState(null),[,Ae]=k.useState([]),[,De]=k.useState(!1),ke=k.useRef(new Map),st=k.useRef([]),me=k.useRef(new Set),Ce=k.useCallback(()=>{if(!navigator.geolocation){console.error("Geolocation is not supported by this browser"),Je("denied");return}navigator.geolocation.getCurrentPosition(Xe=>{const xe={lat:Xe.coords.latitude,lng:Xe.coords.longitude};Ke(xe),Je("granted"),console.log("User location obtained:",Xe.coords.latitude,Xe.coords.longitude)},Xe=>{console.error("Error getting location:",Xe),Je("denied")})},[]),pe=B.filter(Xe=>Xe.location?.coordinates).map(Xe=>({id:String(Xe.id),location:{latitude:Xe.location.coordinates[1],longitude:Xe.location.coordinates[0],address:`${Xe.addressStreet}, ${Xe.addressWard}, ${Xe.addressDistrict}, ${Xe.addressCity}`},title:Xe.title,image:Xe.imageUrls?.[0]||"",price:Xe.price,area:Xe.area})),Q=Xe=>{Xe.key==="Enter"&&(Xe.preventDefault(),Ee())},Ee=()=>{const Xe=e.trim();Xe?ne("title","lk",Xe):ne("title","lk","")},Ge=k.useCallback(async Xe=>{if(!we||!ye)return;const xe=Xe.filter(Re=>!me.current.has(Re.id));if(xe.length!==0)try{xe.forEach(Ve=>me.current.add(Ve.id));const Re=new Set;await Promise.all(xe.map(async Ve=>{try{(await lb(Number(Ve.id))).data&&Re.add(String(Ve.id))}catch{me.current.delete(Ve.id)}})),he(Ve=>{const Vt=new Set(Ve);return Re.forEach(Oe=>Vt.add(Oe)),Vt})}catch(Re){console.error("Error checking liked properties:",Re)}},[we,ye]),lt=()=>{L(!I)},We=Xe=>st.current.some(xe=>Xe.minLat>=xe.minLat&&Xe.maxLat<=xe.maxLat&&Xe.minLng>=xe.minLng&&Xe.maxLng<=xe.maxLng),Nt=Xe=>{const xe=[];return ke.current.forEach(Re=>{const[Ve,Vt]=Re.location.coordinates;Vt>=Xe.minLat&&Vt<=Xe.maxLat&&Ve>=Xe.minLng&&Ve<=Xe.maxLng&&xe.push(Re)}),xe},At=k.useCallback(async Xe=>{if(!(Xe.zoom<10)){if(We(Xe)){const xe=Nt(Xe);z(xe),D(1),await Ge(xe);return}try{const Re={minLat:Xe.minLat-.01,minLng:Xe.minLng-.01,maxLat:Xe.maxLat+.01,maxLng:Xe.maxLng+.01},Ve=await sD(Re.minLat,Re.minLng,Re.maxLat,Re.maxLng);if(Ve.status==="200"&&Ve.data){const Vt=Ve.data.filter(Le=>(Le.listingType||Le.listing_type)==="for_sale").map(Le=>({id:Le.id,userId:Le.user_id||0,approvalStatus:"APPROVED",title:Le.title,description:Le.description||"",listingType:Le.listingType||Le.listing_type||"for_sale",price:Le.price,priceUnit:Le.priceUnit||Le.price_unit||"VND",area:Le.area,propertyType:Le.propertyType||Le.property_type||"house",legalStatus:Le.legalStatus||Le.legal_status||null,numBedrooms:Le.numBedrooms||Le.num_bedrooms||null,numBathrooms:Le.numBathrooms||Le.num_bathrooms||null,numFloors:Le.numFloors||Le.num_floors||null,facadeWidthM:Le.facadeWidthM||Le.facade_width_m||null,roadWidthM:Le.roadWidthM||Le.road_width_m||null,houseDirection:Le.houseDirection||Le.house_direction||null,balconyDirection:Le.balconyDirection||Le.balcony_direction||null,furnitureStatus:Le.furnitureStatus||Le.furniture_status||null,addressStreet:Le.addressStreet||Le.address_street||"",addressWard:Le.addressWard||Le.address_ward||"",addressDistrict:Le.addressDistrict||Le.address_district||"",addressCity:Le.addressCity||Le.address_city||"TPHCM",location:Le.location,imageUrls:Le.thumbnailUrl?[Le.thumbnailUrl]:Le.imageUrls||Le.image_urls||[],createdAt:Le.createdAt||Le.created_at||new Date().toISOString(),updatedAt:Le.updatedAt||Le.updated_at||new Date().toISOString()}));Vt.forEach(Le=>{ke.current.set(Le.id,Le)}),st.current.push({...Xe,...Re});const Oe=Nt(Xe);z(Oe),D(1),we&&await Ge(Vt)}}catch(xe){console.error("Error fetching viewport properties:",xe)}}},[we,Ge]),[Mt]=ig(At,500),Ut=k.useCallback(Xe=>{Mt(Xe)},[Mt]),Pt=async(Xe,xe)=>{try{const Re=Number(Xe);xe?(await vv(Re),he(Ve=>{const Vt=new Set(Ve);return Vt.delete(Xe),Vt})):(await sb(Re),he(Ve=>new Set(Ve).add(Xe)))}catch(Re){console.error("Error toggling favorite:",Re)}},Rt=Xe=>{if(i(Xe),Xe==="all")ne("addressDistrict","eq","");else{const xe=jd.find(Re=>Re.id===Xe)?.name;xe&&ne("addressDistrict","eq",xe)}},vn=k.useCallback(async()=>{try{if(De(!0),ze==="granted"&&Pe){let Xe;if(we?Xe=await Lm(Pe.lat,Pe.lng,8,20,we):Xe=await Lm(Pe.lat,Pe.lng,8,20),Xe.status==="200"&&Xe.data?.items){const xe=Xe.data.items.map(Re=>({id:Re.id,title:Re.title,price:Re.price,priceUnit:Re.price_unit,area:Re.area,addressDistrict:Re.address.split(",").map(Ve=>Ve.trim()).find(Ve=>Ve.includes("Qun")||Ve.includes("Huyn"))||"",addressStreet:Re.address.split(",")[0]?.trim()||"",addressWard:Re.address.split(",").map(Ve=>Ve.trim()).find(Ve=>Ve.includes("Phng")||Ve.includes("X"))||"",addressCity:"TPHCM",numBedrooms:Re.num_bedrooms,numBathrooms:Re.num_bathrooms,imageUrls:Re.thumbnail_url?[Re.thumbnail_url]:[],listingType:"for_sale",propertyType:"house",approvalStatus:"APPROVED",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:0,location:{type:"Point",coordinates:[0,0]}}));Ae(xe)}else Ae([])}else Ae([])}catch(Xe){console.error("Error fetching recommended properties:",Xe),Ae([])}finally{De(!1)}},[ze,Pe,we]),er=Xe=>{d(Xe),Xe==="all"?ne("propertyType","eq",""):ne("propertyType","eq",Xe)},$n=Xe=>{_(Xe);const xe=new URLSearchParams(re);Xe==="default"?xe.delete("sort"):xe.set("sort",Xe),ee(xe)},ir=Xe=>{if(g(Xe),Xe==="all")ne("price","rng","");else{const xe=Y2(Xe);xe&&ne("price","rng",xe)}},dt=Xe=>{E(Xe),window.scrollTo({top:0,behavior:"smooth"})};return k.useEffect(()=>{const Xe=W.find(xe=>xe.key==="addressDistrict"&&xe.operator==="eq");if(Xe){const xe=jd.find(Re=>Re.name===Xe.value)?.id;xe&&i(xe)}else i("all")},[W]),k.useEffect(()=>{const Xe=W.find(xe=>xe.key==="propertyType"&&xe.operator==="eq");d(Xe?Xe.value:"all")},[W]),k.useEffect(()=>{const Xe=re.get("sort");_(Xe||"default")},[re]),k.useEffect(()=>{const Xe=W.find(xe=>xe.key==="price"&&xe.operator==="rng");if(Xe){const xe=W2(Xe.value);xe&&g(xe)}else g("all")},[W]),k.useEffect(()=>{E(1)},[W]),k.useEffect(()=>{(async()=>{try{H(!0);const Re=[...W.map(Le=>({key:Le.key,operator:Le.operator==="eq"?"equal":Le.operator==="gt"?"greater":Le.operator==="lt"?"less":Le.operator==="gte"?"greater_equal":Le.operator==="lte"?"less_equal":Le.operator==="lk"?"like":Le.operator==="rng"?"range":"equal",value:Le.value})),{key:"listingType",operator:"equal",value:"for_sale"},{key:"approvalStatus",operator:"equal",value:"APPROVED"}];let Ve=[{key:"createdAt",type:"DESC"}];const Vt=re.get("sort");if(Vt&&Vt!=="default"){const Le=u4(Vt);Le&&(Ve=[Le])}const Oe=await Wy({filters:Re,sorts:Ve,rpp:10,page:C});z(Oe.data.items),D(Oe.data.pages||1)}catch(xe){console.error("Error fetching properties:",xe)}finally{H(!1)}})()},[W,C,re]),k.useEffect(()=>{vn()},[vn]),k.useEffect(()=>{ze===null&&Ce()},[ze,Ce]),k.useEffect(()=>{B.length>0&&Ge(B)},[B]),k.useEffect(()=>(I?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[I]),c.jsx("div",{className:`min-h-screen bg-gray-50 flex flex-col ${Cu.isNativePlatform()?"pt-[var(--sat)]":""}`,children:c.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row lg:gap-6 max-w-7xl mx-auto w-full relative",children:[c.jsxs("div",{className:`
            flex-1 flex flex-col h-full
            ${I?"hidden lg:flex lg:w-[40%] h-screen overflow-y-auto":"w-full lg:w-3/4"}
            px-4 py-4 lg:py-6
          `,children:[c.jsx("div",{className:"bg-white p-3 lg:p-4 rounded-lg shadow-sm mb-4 sticky top-0 z-10",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch",children:[c.jsxs("div",{className:"flex flex-1 relative",children:[c.jsx(Dr,{type:"text",value:e,onChange:Xe=>t(Xe.target.value),onKeyDown:Q,placeholder:"Tm kim a im, d n...",className:"h-10 lg:h-12 bg-white flex-1 rounded-r-none border-r-0 focus-visible:ring-[#008DDA]"}),c.jsx(Nr,{type:"button",onClick:Ee,className:"h-10 lg:h-12 rounded-l-none px-4 bg-[#008DDA] hover:bg-[#0072b0]",children:c.jsx(Ry,{className:"w-4 h-4 text-white"})})]}),c.jsxs(Nr,{onClick:lt,variant:"outline",className:"h-10 lg:h-12 flex items-center justify-center gap-2 border-[#008DDA] text-[#008DDA] hover:bg-[#008DDA] hover:text-white",children:[I?c.jsx(t3,{className:"w-4 h-4"}):c.jsx(Bj,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:I?"Danh sch":"Bn "}),c.jsx("span",{className:"sm:hidden",children:I?"List":"Map"})]})]})}),c.jsx("div",{className:"bg-white p-3 lg:p-4 rounded-lg shadow-sm mb-4",children:c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-2 lg:gap-3",children:[c.jsxs(wa,{value:n,onValueChange:Rt,children:[c.jsx(Ea,{className:"w-full h-9 lg:h-10 text-sm",children:c.jsx(Sa,{placeholder:"Khu vc"})}),c.jsxs(Ca,{children:[c.jsx(Si,{value:"all",children:"Tt c khu vc"}),jd.map(Xe=>c.jsx(Si,{value:Xe.id,children:Xe.name},Xe.id))]})]}),c.jsxs(wa,{value:l,onValueChange:er,children:[c.jsx(Ea,{className:"w-full h-9 lg:h-10 text-sm",children:c.jsx(Sa,{placeholder:"Loi BS"})}),c.jsxs(Ca,{children:[c.jsx(Si,{value:"all",children:"Tt c loi"}),Id.map(Xe=>c.jsx(Si,{value:Xe.id,children:Xe.name},Xe.id))]})]}),c.jsx("div",{className:"col-span-2 lg:col-span-1",children:c.jsxs(wa,{value:a,onValueChange:ir,children:[c.jsx(Ea,{className:"w-full h-9 lg:h-10 text-sm",children:c.jsx(Sa,{placeholder:"Mc gi"})}),c.jsxs(Ca,{children:[c.jsx(Si,{value:"all",children:"Tt c mc gi"}),RD.map(Xe=>c.jsx(Si,{value:Xe.id,children:Xe.title},Xe.id))]})]})})]})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-lg lg:text-2xl font-semibold text-gray-900 truncate pr-2",children:"Mua bn nh t HCM"}),c.jsx("div",{className:"w-[120px] lg:w-[150px] flex-shrink-0",children:c.jsxs(wa,{value:x,onValueChange:$n,children:[c.jsx(Ea,{className:"w-full h-8 lg:h-10 text-xs lg:text-sm",children:c.jsx(Sa,{placeholder:"Sp xp"})}),c.jsxs(Ca,{children:[c.jsx(Si,{value:"default",children:"Mc nh"}),LD.map(Xe=>c.jsx(Si,{value:Xe.id,children:Xe.title},Xe.id))]})]})})]}),c.jsx("div",{className:"space-y-4 mb-6",children:q?[...Array(3)].map((Xe,xe)=>c.jsx(Xt,{className:"h-32 w-full rounded-lg"},xe)):B.length>0?B.map(Xe=>c.jsx($2,{id:String(Xe.id),title:Xe.title,price:Xe.price,area:Xe.area,address:`${Xe.addressStreet}, ${Xe.addressWard}, ${Xe.addressDistrict}`,imageUrl:Xe.imageUrls?.[0]||"",createdAt:Xe.createdAt||"",isLiked:oe.has(String(Xe.id)),onFavoriteClick:Pt},Xe.id)):c.jsx("div",{className:"text-center py-12 text-gray-500",children:"Khng tm thy BS no"})}),!q&&B.length>0&&c.jsx("div",{className:"flex justify-center mb-8 pb-10 lg:pb-0",children:c.jsx(Rb,{currentPage:C,onPageChange:dt,totalPages:A})})]})]}),c.jsx("aside",{className:`
            ${I?"fixed inset-0 z-50 bg-white pt-[var(--sat)] pb-[var(--sab)]":"hidden"}
            lg:static lg:block lg:pt-0 lg:pb-0
            ${I?"lg:w-[60%]":"lg:w-1/4"}
          `,children:I?c.jsxs("div",{className:"w-full h-full relative",children:[c.jsx(Nr,{onClick:lt,className:"lg:hidden absolute top-4 right-4 z-[60] rounded-full w-10 h-10 p-0 shadow-lg bg-white text-black hover:bg-gray-100",children:c.jsx(Zf,{className:"w-5 h-5"})}),c.jsx(c4,{properties:pe,defaultZoom:11,onMapInteraction:Ut})]}):c.jsxs("div",{className:"hidden lg:block space-y-4 mt-6",children:[c.jsx(zD,{}),c.jsx(BD,{})]})})]})})},qK=2e4,HK=10.7769,$K=106.7009,eS=100,zb=async(e,t)=>(await Di.get(`https://rsapi.goong.io/Place/AutoComplete?api_key=iweftCqJKmk4zL82TBo8QAtMm4nt3xsPopOKvh7P&input=${encodeURIComponent(e)}&location=${HK},${$K}&radius=${qK}&more_compound=true&limit=${t}&more_compound=true`)).data,tS=async e=>(await Di.get(`https://rsapi.goong.io/Place/Detail?api_key=iweftCqJKmk4zL82TBo8QAtMm4nt3xsPopOKvh7P&place_id=${e}`)).data,Bb=[{id:"undefined",name:"Khng xc nh"},{id:"land-certificate",name:"S /S hng"},{id:"contract",name:"Hp ng mua bn"},{id:"waiting-for-land-certificate",name:"ang ch s"}],np=[{id:"undefined",name:"Khng xc nh"},{id:"north",name:"Hng Bc"},{id:"northeast",name:"Hng ng Bc"},{id:"east",name:"Hng ng"},{id:"southeast",name:"Hng ng Nam"},{id:"south",name:"Hng Nam"},{id:"southwest",name:"Hng Ty Nam"},{id:"west",name:"Hng Ty"},{id:"northwest",name:"Hng Ty Bc"}],Fb=[{id:"none",name:"Khng c"},{id:"basic",name:"C bn"},{id:"full",name:"y "}],GK=()=>{const e=Ta(),{setEstimationData:t}=Jm(),[n,i]=k.useState(null),[l,d]=k.useState(null),[a,g]=k.useState([]),[x,_]=k.useState(!1),[C,E]=k.useState(!1),[A,D]=k.useState(-1),I=k.useRef(null),L=k.useRef(null),B=k.useRef(""),z=bu({defaultValues:{address:"",area:"",propertyType:"",legal_status:"",house_direction:"",balcony_direction:"",furniture_status:"",num_bedrooms:"",num_bathrooms:"",num_floors:"",facade_width_m:"",road_width_m:""},mode:"onSubmit"});k.useEffect(()=>{const he=we=>{I.current&&!I.current.contains(we.target)&&L.current&&!L.current.contains(we.target)&&E(!1)};return document.addEventListener("mousedown",he),()=>document.removeEventListener("mousedown",he)},[]);const q=z.watch("address"),[H]=ig(q,300),W=k.useCallback(async he=>{_(!0);try{const we=await zb(he,10);we.predictions&&we.predictions.length>0?(console.log("Autocomplete suggestions:",we.predictions[0]),g(we.predictions),E(!0),D(-1)):(g([]),E(!1))}catch(we){console.error("Error fetching autocomplete:",we),g([])}finally{_(!1)}},[]);k.useEffect(()=>{const he=H.trim();if(!he||he.length<3){g([]),E(!1),B.current="";return}he!==B.current&&(B.current=he,W(he))},[H,W]);const ne=async he=>{_(!0);try{const we=await tS(he);if(we.result&&we.result.geometry&&we.result.geometry.location){const{lat:ye,lng:Pe}=we.result.geometry.location;return i(ye),d(Pe),{lat:ye,lng:Pe}}}catch(we){console.error("Error fetching place details:",we),alert("Khng th ly ta  ca a ch ny")}finally{_(!1)}return null},re=async he=>{z.setValue("address",he.description),E(!1),g([]),await ne(he.place_id)},ee=he=>{if(!(!C||a.length===0))switch(he.key){case"ArrowDown":he.preventDefault(),D(we=>we<a.length-1?we+1:we);break;case"ArrowUp":he.preventDefault(),D(we=>we>0?we-1:-1);break;case"Enter":A>=0&&(he.preventDefault(),re(a[A]));break;case"Escape":E(!1);break}},oe=async he=>{if(!n||!l){mn.error("Vui lng chn a ch chnh xc");return}const ye=he.address.split(",").map(Pe=>Pe.trim()).find(Pe=>Pe.includes("Qun")||Pe.includes("Huyn"));t({area:parseFloat(he.area),propertyType:he.propertyType,address_district:ye||"",legal_status:he.legal_status||void 0,house_direction:he.house_direction||void 0,balcony_direction:he.balcony_direction||void 0,furniture_status:he.furniture_status||void 0,num_bedrooms:he.num_bedrooms?parseInt(he.num_bedrooms):void 0,num_bathrooms:he.num_bathrooms?parseInt(he.num_bathrooms):void 0,num_floors:he.num_floors?parseInt(he.num_floors):void 0,facade_width_m:he.facade_width_m?parseFloat(he.facade_width_m):void 0,road_width_m:he.road_width_m?parseFloat(he.road_width_m):void 0}),e(`/dinh-gia-nha/ban-do?lat=${n}&lon=${l}&address=${encodeURIComponent(he.address)}`)};return c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-8",children:c.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8 sm:p-10 w-full max-w-4xl",children:c.jsxs("div",{className:"flex flex-col gap-8",children:[c.jsx("div",{className:"w-full text-center",children:c.jsx("h2",{className:"text-3xl sm:text-4xl font-semibold",children:"NH GI NH"})}),c.jsx(_u,{...z,children:c.jsxs("form",{onSubmit:z.handleSubmit(oe),className:"space-y-6",children:[c.jsx(Sn,{control:z.control,name:"address",rules:{required:"a ch khng c  trng!"},render:({field:he})=>c.jsxs(En,{children:[c.jsxs(An,{className:"text-base",children:["a ch ca bn ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Cn,{children:c.jsxs("div",{className:"relative",children:[c.jsx(Dr,{className:"focus-visible:ring-[#008DDA] h-11",placeholder:"Nhp a ch ca bn (VD: 123 Nguyn Hu, Phng 1, Qun 1)",...he,ref:we=>{he.ref(we),L.current=we},onKeyDown:ee,autoComplete:"off",onChange:we=>{he.onChange(we),(n||l)&&(i(null),d(null))}}),x&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:c.jsx(xs,{className:"w-5 h-5 animate-spin text-[#008DDA]"})}),C&&a.length>0&&c.jsx("div",{ref:I,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:a.map((we,ye)=>c.jsxs("div",{onClick:()=>re(we),className:Kt("flex items-start gap-3 p-3 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",A===ye?"bg-blue-50":"hover:bg-gray-50"),children:[c.jsx(bs,{className:"w-5 h-5 text-[#008DDA] flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:we.structured_formatting.main_text}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:we.structured_formatting.secondary_text})]})]},we.place_id))})]})}),c.jsx(Vn,{})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Sn,{control:z.control,name:"area",rules:{required:"Din tch khng c  trng!",validate:he=>{const we=parseFloat(he);return isNaN(we)||we<=0?"Din tch phi l s dng":!0}},render:({field:he})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Din tch (m) ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Cn,{children:c.jsx(Dr,{type:"number",className:"focus-visible:ring-[#008DDA] h-11",placeholder:"VD: 100",...he})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"propertyType",rules:{required:"Loi bt ng sn khng c  trng!"},render:({field:he})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Loi bt ng sn ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs(wa,{onValueChange:he.onChange,value:he.value,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"focus:ring-[#008DDA] h-11 cursor-pointer w-full",children:c.jsx(Sa,{placeholder:"Chn loi bt ng sn"})})}),c.jsx(Ca,{children:Id.map(we=>c.jsx(Si,{value:we.id,children:we.name},we.id))})]}),c.jsx(Vn,{})]})})]}),c.jsxs("div",{className:"pt-4 border-t",children:[c.jsx("h3",{className:"text-lg font-medium mb-4",children:"Thng tin b sung (Khng bt buc)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Sn,{control:z.control,name:"legal_status",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"Giy t php l"}),c.jsxs(wa,{onValueChange:he.onChange,value:he.value,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"focus:ring-[#008DDA] h-11 cursor-pointer w-full",children:c.jsx(Sa,{placeholder:"Chn giy t php l"})})}),c.jsx(Ca,{children:Bb.map(we=>c.jsx(Si,{value:we.name,children:we.name},we.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"furniture_status",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"Ni tht"}),c.jsxs(wa,{onValueChange:he.onChange,value:he.value,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"focus:ring-[#008DDA] h-11 cursor-pointer w-full",children:c.jsx(Sa,{placeholder:"Chn tnh trng ni tht"})})}),c.jsx(Ca,{children:Fb.map(we=>c.jsx(Si,{value:we.name,children:we.name},we.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"house_direction",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"Hng nh"}),c.jsxs(wa,{onValueChange:he.onChange,value:he.value,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"focus:ring-[#008DDA] h-11 cursor-pointer w-full",children:c.jsx(Sa,{placeholder:"Chn hng nh"})})}),c.jsx(Ca,{children:np.map(we=>c.jsx(Si,{value:we.name,children:we.name},we.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"balcony_direction",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"Hng ban cng"}),c.jsxs(wa,{onValueChange:he.onChange,value:he.value,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"focus:ring-[#008DDA] h-11 cursor-pointer w-full",children:c.jsx(Sa,{placeholder:"Chn hng ban cng"})})}),c.jsx(Ca,{children:np.map(we=>c.jsx(Si,{value:we.name,children:we.name},we.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"num_bedrooms",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"S phng ng"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"number",className:"focus-visible:ring-[#008DDA] h-11",placeholder:"VD: 3",...he})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"num_bathrooms",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"S phng tm"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"number",className:"focus-visible:ring-[#008DDA] h-11",placeholder:"VD: 2",...he})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"num_floors",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"S tng"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"number",className:"focus-visible:ring-[#008DDA] h-11",placeholder:"VD: 4",...he})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"facade_width_m",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt tin (m)"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"number",step:"0.1",className:"focus-visible:ring-[#008DDA] h-11",placeholder:"VD: 5.5",...he})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:z.control,name:"road_width_m",render:({field:he})=>c.jsxs(En,{children:[c.jsx(An,{children:"ng vo (m)"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"number",step:"0.1",className:"focus-visible:ring-[#008DDA] h-11",placeholder:"VD: 4.0",...he})}),c.jsx(Vn,{})]})})]})]}),c.jsxs(Nr,{type:"submit",className:`w-full transition-colors duration-200 ${x?"bg-[#0064A6]":"bg-[#008DDA] cursor-pointer"} hover:bg-[#0064A6] `,children:[x?c.jsx(Xm,{}):null,"Tip tc"]})]})})]})})})};function L0(){return L0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},L0.apply(null,arguments)}function ow(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ZK(e){if(Array.isArray(e))return ow(e)}function XK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d4(e,t){if(e){if(typeof e=="string")return ow(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ow(e,t):void 0}}function KK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YK(e){return ZK(e)||XK(e)||d4(e)||KK()}function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function WK(e,t){if(Bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Bm(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h4(e){var t=WK(e,"string");return Bm(t)=="symbol"?t:t+""}function bn(e,t,n){return(t=h4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q_={exports:{}},J_,TT;function QK(){if(TT)return J_;TT=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return J_=e,J_}var e1,kT;function JK(){if(kT)return e1;kT=1;var e=QK();function t(){}function n(){}return n.resetWarningCache=t,e1=function(){function i(a,g,x,_,C,E){if(E!==e){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}i.isRequired=i;function l(){return i}var d={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:l,element:i,elementType:i,instanceOf:l,node:i,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:t};return d.PropTypes=d,d},e1}var jT;function eY(){return jT||(jT=1,Q_.exports=JK()()),Q_.exports}var ht=eY();function tY(e){if(Array.isArray(e))return e}function nY(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,l,d,a,g=[],x=!0,_=!1;try{if(d=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;x=!1}else for(;!(x=(i=d.call(n)).done)&&(g.push(i.value),g.length!==t);x=!0);}catch(C){_=!0,l=C}finally{try{if(!x&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(_)throw l}}return g}}function rY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qa(e,t){return tY(e)||nY(e,t)||d4(e,t)||rY()}var es=1e-6,Fm=typeof Float32Array<"u"?Float32Array:Array;function iY(){var e=new Fm(4);return Fm!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function aY(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function oY(e,t,n){var i=t[0],l=t[1],d=t[2],a=t[3];return e[0]=n[0]*i+n[4]*l+n[8]*d+n[12]*a,e[1]=n[1]*i+n[5]*l+n[9]*d+n[13]*a,e[2]=n[2]*i+n[6]*l+n[10]*d+n[14]*a,e[3]=n[3]*i+n[7]*l+n[11]*d+n[15]*a,e}(function(){var e=iY();return function(t,n,i,l,d,a){var g,x;for(n||(n=4),i||(i=0),l?x=Math.min(l*n+i,t.length):x=t.length,g=i;g<x;g+=n)e[0]=t[g],e[1]=t[g+1],e[2]=t[g+2],e[3]=t[g+3],d(e,e,a),t[g]=e[0],t[g+1]=e[1],t[g+2]=e[2],t[g+3]=e[3];return t}})();function h0(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Dm(e,t){const n=oY([],t,e);return aY(n,n,1/n[3]),n}function AT(e,t){const n=e%t;return n<0?t+n:n}function sY(e,t,n){return n*t+(1-n)*e}function sw(e,t,n){return e<t?t:e>n?n:e}function lY(e){return Math.log(e)*Math.LOG2E}const nS=Math.log2||lY;function cY(e,t){var n=t[0],i=t[1],l=t[2],d=t[3],a=t[4],g=t[5],x=t[6],_=t[7],C=t[8],E=t[9],A=t[10],D=t[11],I=t[12],L=t[13],B=t[14],z=t[15],q=n*g-i*a,H=n*x-l*a,W=n*_-d*a,ne=i*x-l*g,re=i*_-d*g,ee=l*_-d*x,oe=C*L-E*I,he=C*B-A*I,we=C*z-D*I,ye=E*B-A*L,Pe=E*z-D*L,Ke=A*z-D*B,ze=q*Ke-H*Pe+W*ye+ne*we-re*he+ee*oe;return ze?(ze=1/ze,e[0]=(g*Ke-x*Pe+_*ye)*ze,e[1]=(l*Pe-i*Ke-d*ye)*ze,e[2]=(L*ee-B*re+z*ne)*ze,e[3]=(A*re-E*ee-D*ne)*ze,e[4]=(x*we-a*Ke-_*he)*ze,e[5]=(n*Ke-l*we+d*he)*ze,e[6]=(B*W-I*ee-z*H)*ze,e[7]=(C*ee-A*W+D*H)*ze,e[8]=(a*Pe-g*we+_*oe)*ze,e[9]=(i*we-n*Pe-d*oe)*ze,e[10]=(I*re-L*W+z*q)*ze,e[11]=(E*W-C*re-D*q)*ze,e[12]=(g*he-a*ye-x*oe)*ze,e[13]=(n*ye-i*he+l*oe)*ze,e[14]=(L*H-I*ne-B*q)*ze,e[15]=(C*ne-E*H+A*q)*ze,e):null}function t1(e,t,n){var i=t[0],l=t[1],d=t[2],a=t[3],g=t[4],x=t[5],_=t[6],C=t[7],E=t[8],A=t[9],D=t[10],I=t[11],L=t[12],B=t[13],z=t[14],q=t[15],H=n[0],W=n[1],ne=n[2],re=n[3];return e[0]=H*i+W*g+ne*E+re*L,e[1]=H*l+W*x+ne*A+re*B,e[2]=H*d+W*_+ne*D+re*z,e[3]=H*a+W*C+ne*I+re*q,H=n[4],W=n[5],ne=n[6],re=n[7],e[4]=H*i+W*g+ne*E+re*L,e[5]=H*l+W*x+ne*A+re*B,e[6]=H*d+W*_+ne*D+re*z,e[7]=H*a+W*C+ne*I+re*q,H=n[8],W=n[9],ne=n[10],re=n[11],e[8]=H*i+W*g+ne*E+re*L,e[9]=H*l+W*x+ne*A+re*B,e[10]=H*d+W*_+ne*D+re*z,e[11]=H*a+W*C+ne*I+re*q,H=n[12],W=n[13],ne=n[14],re=n[15],e[12]=H*i+W*g+ne*E+re*L,e[13]=H*l+W*x+ne*A+re*B,e[14]=H*d+W*_+ne*D+re*z,e[15]=H*a+W*C+ne*I+re*q,e}function lw(e,t,n){var i=n[0],l=n[1],d=n[2],a,g,x,_,C,E,A,D,I,L,B,z;return t===e?(e[12]=t[0]*i+t[4]*l+t[8]*d+t[12],e[13]=t[1]*i+t[5]*l+t[9]*d+t[13],e[14]=t[2]*i+t[6]*l+t[10]*d+t[14],e[15]=t[3]*i+t[7]*l+t[11]*d+t[15]):(a=t[0],g=t[1],x=t[2],_=t[3],C=t[4],E=t[5],A=t[6],D=t[7],I=t[8],L=t[9],B=t[10],z=t[11],e[0]=a,e[1]=g,e[2]=x,e[3]=_,e[4]=C,e[5]=E,e[6]=A,e[7]=D,e[8]=I,e[9]=L,e[10]=B,e[11]=z,e[12]=a*i+C*l+I*d+t[12],e[13]=g*i+E*l+L*d+t[13],e[14]=x*i+A*l+B*d+t[14],e[15]=_*i+D*l+z*d+t[15]),e}function f4(e,t,n){var i=n[0],l=n[1],d=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*l,e[5]=t[5]*l,e[6]=t[6]*l,e[7]=t[7]*l,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function uY(e,t,n){var i=Math.sin(n),l=Math.cos(n),d=t[4],a=t[5],g=t[6],x=t[7],_=t[8],C=t[9],E=t[10],A=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*l+_*i,e[5]=a*l+C*i,e[6]=g*l+E*i,e[7]=x*l+A*i,e[8]=_*l-d*i,e[9]=C*l-a*i,e[10]=E*l-g*i,e[11]=A*l-x*i,e}function dY(e,t,n){var i=Math.sin(n),l=Math.cos(n),d=t[0],a=t[1],g=t[2],x=t[3],_=t[4],C=t[5],E=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*l+_*i,e[1]=a*l+C*i,e[2]=g*l+E*i,e[3]=x*l+A*i,e[4]=_*l-d*i,e[5]=C*l-a*i,e[6]=E*l-g*i,e[7]=A*l-x*i,e}function hY(e,t,n,i,l){var d=1/Math.tan(t/2);if(e[0]=d/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,l!=null&&l!==1/0){var a=1/(i-l);e[10]=(l+i)*a,e[14]=2*l*i*a}else e[10]=-1,e[14]=-2*i;return e}var fY=hY;function NT(e,t){var n=e[0],i=e[1],l=e[2],d=e[3],a=e[4],g=e[5],x=e[6],_=e[7],C=e[8],E=e[9],A=e[10],D=e[11],I=e[12],L=e[13],B=e[14],z=e[15],q=t[0],H=t[1],W=t[2],ne=t[3],re=t[4],ee=t[5],oe=t[6],he=t[7],we=t[8],ye=t[9],Pe=t[10],Ke=t[11],ze=t[12],Je=t[13],Ae=t[14],De=t[15];return Math.abs(n-q)<=es*Math.max(1,Math.abs(n),Math.abs(q))&&Math.abs(i-H)<=es*Math.max(1,Math.abs(i),Math.abs(H))&&Math.abs(l-W)<=es*Math.max(1,Math.abs(l),Math.abs(W))&&Math.abs(d-ne)<=es*Math.max(1,Math.abs(d),Math.abs(ne))&&Math.abs(a-re)<=es*Math.max(1,Math.abs(a),Math.abs(re))&&Math.abs(g-ee)<=es*Math.max(1,Math.abs(g),Math.abs(ee))&&Math.abs(x-oe)<=es*Math.max(1,Math.abs(x),Math.abs(oe))&&Math.abs(_-he)<=es*Math.max(1,Math.abs(_),Math.abs(he))&&Math.abs(C-we)<=es*Math.max(1,Math.abs(C),Math.abs(we))&&Math.abs(E-ye)<=es*Math.max(1,Math.abs(E),Math.abs(ye))&&Math.abs(A-Pe)<=es*Math.max(1,Math.abs(A),Math.abs(Pe))&&Math.abs(D-Ke)<=es*Math.max(1,Math.abs(D),Math.abs(Ke))&&Math.abs(I-ze)<=es*Math.max(1,Math.abs(I),Math.abs(ze))&&Math.abs(L-Je)<=es*Math.max(1,Math.abs(L),Math.abs(Je))&&Math.abs(B-Ae)<=es*Math.max(1,Math.abs(B),Math.abs(Ae))&&Math.abs(z-De)<=es*Math.max(1,Math.abs(z),Math.abs(De))}function pY(){var e=new Fm(2);return Fm!=Float32Array&&(e[0]=0,e[1]=0),e}function cw(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function mY(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function gY(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function yY(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function vY(e,t){return e[0]=-t[0],e[1]=-t[1],e}function p4(e,t,n,i){var l=t[0],d=t[1];return e[0]=l+i*(n[0]-l),e[1]=d+i*(n[1]-d),e}var xY=mY;(function(){var e=pY();return function(t,n,i,l,d,a){var g,x;for(n||(n=2),i||(i=0),l?x=Math.min(l*n+i,t.length):x=t.length,g=i;g<x;g+=n)e[0]=t[g],e[1]=t[g+1],d(e,e,a),t[g]=e[0],t[g+1]=e[1];return t}})();function bY(){var e=new Fm(3);return Fm!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function _Y(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function wY(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function SY(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}var EY=wY;(function(){var e=bY();return function(t,n,i,l,d,a){var g,x;for(n||(n=3),i||(i=0),l?x=Math.min(l*n+i,t.length):x=t.length,g=i;g<x;g+=n)e[0]=t[g],e[1]=t[g+1],e[2]=t[g+2],d(e,e,a),t[g]=e[0],t[g+1]=e[1],t[g+2]=e[2];return t}})();function Uh(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const vc=Math.PI,m4=vc/4,vu=vc/180,uw=180/vc,Jy=512,MT=4003e4,Wx=85.051129,g4=1.5;function dw(e){return Math.pow(2,e)}function CY(e){return nS(e)}function Ih(e){const[t,n]=e;Uh(Number.isFinite(t)),Uh(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=t*vu,l=n*vu,d=Jy*(i+vc)/(2*vc),a=Jy*(vc+Math.log(Math.tan(m4+l*.5)))/(2*vc);return[d,a]}function Rh(e){const[t,n]=e,i=t/Jy*(2*vc)-vc,l=2*(Math.atan(Math.exp(n/Jy*(2*vc)-vc))-m4);return[i*uw,l*uw]}function TY(e){const{latitude:t,longitude:n,highPrecision:i=!1}=e;Uh(Number.isFinite(t)&&Number.isFinite(n));const l=Jy,d=Math.cos(t*vu),a=l/360,g=a/d,x=l/MT/d,_={unitsPerMeter:[x,x,x],metersPerUnit:[1/x,1/x,1/x],unitsPerDegree:[a,g,x],degreesPerUnit:[1/a,1/g,1/x]};if(i){const C=vu*Math.tan(t*vu)/d,E=a*C/2,A=l/MT*C,D=A/g*x;_.unitsPerDegree2=[0,E,A],_.unitsPerMeter2=[D,0,D]}return _}function kY(e){const{height:t,pitch:n,bearing:i,altitude:l,scale:d,center:a}=e,g=h0();lw(g,g,[0,0,-l]),uY(g,g,-n*vu),dY(g,g,i*vu);const x=d/t;return f4(g,g,[x,x,x]),a&&lw(g,g,SY([],a)),g}function jY(e){const{width:t,height:n,altitude:i,pitch:l=0,offset:d,center:a,scale:g,nearZMultiplier:x=1,farZMultiplier:_=1}=e;let{fovy:C=z0(g4)}=e;i!==void 0&&(C=z0(i));const E=C*vu,A=l*vu,D=y4(C);let I=D;a&&(I+=a[2]*g/Math.cos(A)/n);const L=E*(.5+(d?d[1]:0)/n),B=Math.sin(L)*I/Math.sin(sw(Math.PI/2-A-L,.01,Math.PI-.01)),z=Math.sin(A)*B+I,q=I*10,H=Math.min(z*_,q);return{fov:E,aspect:t/n,focalDistance:D,near:x,far:H}}function AY(e){const{fov:t,aspect:n,near:i,far:l}=jY(e);return fY([],t,n,i,l)}function z0(e){return 2*Math.atan(.5/e)*uw}function y4(e){return .5/Math.tan(.5*e*vu)}function NY(e,t){const[n,i,l=0]=e;return Uh(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(l)),Dm(t,[n,i,l,1])}function DT(e,t,n=0){const[i,l,d]=e;if(Uh(Number.isFinite(i)&&Number.isFinite(l),"invalid pixel coordinate"),Number.isFinite(d))return Dm(t,[i,l,d,1]);const a=Dm(t,[i,l,0,1]),g=Dm(t,[i,l,1,1]),x=a[2],_=g[2],C=x===_?0:((n||0)-x)/(_-x);return p4([],a,g,C)}function MY(e){const{width:t,height:n,bounds:i,minExtent:l=0,maxZoom:d=24,offset:a=[0,0]}=e,[[g,x],[_,C]]=i,E=DY(e.padding),A=Ih([g,sw(C,-Wx,Wx)]),D=Ih([_,sw(x,-Wx,Wx)]),I=[Math.max(Math.abs(D[0]-A[0]),l),Math.max(Math.abs(D[1]-A[1]),l)],L=[t-E.left-E.right-Math.abs(a[0])*2,n-E.top-E.bottom-Math.abs(a[1])*2];Uh(L[0]>0&&L[1]>0);const B=L[0]/I[0],z=L[1]/I[1],q=(E.right-E.left)/2/B,H=(E.top-E.bottom)/2/z,W=[(D[0]+A[0])/2+q,(D[1]+A[1])/2+H],ne=Rh(W),re=Math.min(d,nS(Math.abs(Math.min(B,z))));return Uh(Number.isFinite(re)),{longitude:ne[0],latitude:ne[1],zoom:re}}function DY(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Uh(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const PT=Math.PI/180;function PY(e,t=0){const{width:n,height:i,unproject:l}=e,d={targetZ:t},a=l([0,i],d),g=l([n,i],d);let x,_;const C=e.fovy?.5*e.fovy*PT:Math.atan(.5/e.altitude),E=(90-e.pitch)*PT;return C>E-.01?(x=IT(e,0,t),_=IT(e,n,t)):(x=l([0,0],d),_=l([n,0],d)),[a,g,_,x]}function IT(e,t,n){const{pixelUnprojectionMatrix:i}=e,l=Dm(i,[t,0,1,1]),d=Dm(i,[t,e.height,1,1]),g=(n*e.distanceScales.unitsPerMeter[2]-l[2])/(d[2]-l[2]),x=p4([],l,d,g),_=Rh(x);return _.push(n),_}class xu{constructor(t={width:1,height:1}){bn(this,"latitude",void 0),bn(this,"longitude",void 0),bn(this,"zoom",void 0),bn(this,"pitch",void 0),bn(this,"bearing",void 0),bn(this,"altitude",void 0),bn(this,"fovy",void 0),bn(this,"meterOffset",void 0),bn(this,"center",void 0),bn(this,"width",void 0),bn(this,"height",void 0),bn(this,"scale",void 0),bn(this,"distanceScales",void 0),bn(this,"viewMatrix",void 0),bn(this,"projectionMatrix",void 0),bn(this,"viewProjectionMatrix",void 0),bn(this,"pixelProjectionMatrix",void 0),bn(this,"pixelUnprojectionMatrix",void 0),bn(this,"equals",z=>z instanceof xu?z.width===this.width&&z.height===this.height&&NT(z.projectionMatrix,this.projectionMatrix)&&NT(z.viewMatrix,this.viewMatrix):!1),bn(this,"project",(z,q={})=>{const{topLeft:H=!0}=q,W=this.projectPosition(z),ne=NY(W,this.pixelProjectionMatrix),[re,ee]=ne,oe=H?ee:this.height-ee;return z.length===2?[re,oe]:[re,oe,ne[2]]}),bn(this,"unproject",(z,q={})=>{const{topLeft:H=!0,targetZ:W=void 0}=q,[ne,re,ee]=z,oe=H?re:this.height-re,he=W&&W*this.distanceScales.unitsPerMeter[2],we=DT([ne,oe,ee],this.pixelUnprojectionMatrix,he),[ye,Pe,Ke]=this.unprojectPosition(we);return Number.isFinite(ee)?[ye,Pe,Ke]:Number.isFinite(W)?[ye,Pe,W]:[ye,Pe]}),bn(this,"projectPosition",z=>{const[q,H]=Ih(z),W=(z[2]||0)*this.distanceScales.unitsPerMeter[2];return[q,H,W]}),bn(this,"unprojectPosition",z=>{const[q,H]=Rh(z),W=(z[2]||0)*this.distanceScales.metersPerUnit[2];return[q,H,W]});let{width:n,height:i,altitude:l=null,fovy:d=null}=t;const{latitude:a=0,longitude:g=0,zoom:x=0,pitch:_=0,bearing:C=0,position:E=null,nearZMultiplier:A=.02,farZMultiplier:D=1.01}=t;n=n||1,i=i||1,d===null&&l===null?(l=g4,d=z0(l)):d===null?d=z0(l):l===null&&(l=y4(d));const I=dw(x);l=Math.max(.75,l);const L=TY({longitude:g,latitude:a}),B=Ih([g,a]);B.push(0),E&&_Y(B,B,EY([],E,L.unitsPerMeter)),this.projectionMatrix=AY({width:n,height:i,scale:I,center:B,pitch:_,fovy:d,nearZMultiplier:A,farZMultiplier:D}),this.viewMatrix=kY({height:i,scale:I,center:B,pitch:_,bearing:C,altitude:l}),this.width=n,this.height=i,this.scale=I,this.latitude=a,this.longitude=g,this.zoom=x,this.pitch=_,this.bearing=C,this.altitude=l,this.fovy=d,this.center=B,this.meterOffset=E||[0,0,0],this.distanceScales=L,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:t,height:n,projectionMatrix:i,viewMatrix:l}=this,d=h0();t1(d,d,i),t1(d,d,l),this.viewProjectionMatrix=d;const a=h0();f4(a,a,[t/2,-n/2,1]),lw(a,a,[1,-1,0]),t1(a,a,d);const g=cY(h0(),a);if(!g)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=a,this.pixelUnprojectionMatrix=g}projectFlat(t){return Ih(t)}unprojectFlat(t){return Rh(t)}getMapCenterByLngLatPosition({lngLat:t,pos:n}){const i=DT(n,this.pixelUnprojectionMatrix),l=Ih(t),d=cw([],l,vY([],i)),a=cw([],this.center,d);return Rh(a)}fitBounds(t,n={}){const{width:i,height:l}=this,{longitude:d,latitude:a,zoom:g}=MY(Object.assign({width:i,height:l,bounds:t},n));return new xu({width:i,height:l,longitude:d,latitude:a,zoom:g})}getBounds(t){const n=this.getBoundingRegion(t),i=Math.min(...n.map(g=>g[0])),l=Math.max(...n.map(g=>g[0])),d=Math.min(...n.map(g=>g[1])),a=Math.max(...n.map(g=>g[1]));return[[i,d],[l,a]]}getBoundingRegion(t={}){return PY(this,t.z||0)}getLocationAtPoint({lngLat:t,pos:n}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}}const OT=512;function IY(e){const{width:t,height:n,pitch:i=0}=e;let{longitude:l,latitude:d,zoom:a,bearing:g=0}=e;(l<-180||l>180)&&(l=AT(l+180,360)-180),(g<-180||g>180)&&(g=AT(g+180,360)-180);const x=nS(n/OT);if(a<=x)a=x,d=0;else{const _=n/2/Math.pow(2,a),C=Rh([0,_])[1];if(d<C)d=C;else{const E=Rh([0,OT-_])[1];d>E&&(d=E)}}return{width:t,height:n,longitude:l,latitude:d,zoom:a,pitch:i,bearing:g}}const v4=.01,OY=["longitude","latitude","zoom"],x4={curve:1.414,speed:1.2};function RY(e,t,n,i){const{startZoom:l,startCenterXY:d,uDelta:a,w0:g,u1:x,S:_,rho:C,rho2:E,r0:A}=b4(e,t,i);if(x<v4){const W={};for(const ne of OY){const re=e[ne],ee=t[ne];W[ne]=sY(re,ee,n)}return W}const D=n*_,I=Math.cosh(A)/Math.cosh(A+C*D),L=g*((Math.cosh(A)*Math.tanh(A+C*D)-Math.sinh(A))/E)/x,B=1/I,z=l+CY(B),q=gY([],a,L);cw(q,q,d);const H=Rh(q);return{longitude:H[0],latitude:H[1],zoom:z}}function LY(e,t,n){const i={...x4,...n},{screenSpeed:l,speed:d,maxDuration:a}=i,{S:g,rho:x}=b4(e,t,i),_=1e3*g;let C;return Number.isFinite(l)?C=_/(l/x):C=_/d,Number.isFinite(a)&&C>a?0:C}function b4(e,t,n){n=Object.assign({},x4,n);const i=n.curve,l=e.zoom,d=[e.longitude,e.latitude],a=dw(l),g=t.zoom,x=[t.longitude,t.latitude],_=dw(g-l),C=Ih(d),E=Ih(x),A=xY([],E,C),D=Math.max(e.width,e.height),I=D/_,L=yY(A)*a,B=Math.max(L,v4),z=i*i,q=(I*I-D*D+z*z*B*B)/(2*D*z*B),H=(I*I-D*D-z*z*B*B)/(2*I*z*B),W=Math.log(Math.sqrt(q*q+1)-q),ne=Math.log(Math.sqrt(H*H+1)-H),re=(ne-W)/i;return{startZoom:l,startCenterXY:C,uDelta:A,w0:D,u1:L,S:re,rho:i,rho2:z,r0:W,r1:ne}}var _4=(function(){if(typeof Map<"u")return Map;function e(t,n){var i=-1;return t.some(function(l,d){return l[0]===n?(i=d,!0):!1}),i}return(function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var i=e(this.__entries__,n),l=this.__entries__[i];return l&&l[1]},t.prototype.set=function(n,i){var l=e(this.__entries__,n);~l?this.__entries__[l][1]=i:this.__entries__.push([n,i])},t.prototype.delete=function(n){var i=this.__entries__,l=e(i,n);~l&&i.splice(l,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,i){i===void 0&&(i=null);for(var l=0,d=this.__entries__;l<d.length;l++){var a=d[l];n.call(i,a[1],a[0])}},t})()})(),hw=typeof window<"u"&&typeof document<"u"&&window.document===document,B0=(function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()})(),zY=(function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(B0):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}})(),BY=2;function FY(e,t){var n=!1,i=!1,l=0;function d(){n&&(n=!1,e()),i&&g()}function a(){zY(d)}function g(){var x=Date.now();if(n){if(x-l<BY)return;i=!0}else n=!0,i=!1,setTimeout(a,t);l=x}return g}var UY=20,VY=["top","right","bottom","left","width","height","size","weight"],qY=typeof MutationObserver<"u",HY=(function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=FY(this.refresh.bind(this),UY)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,i=n.indexOf(t);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!hw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),qY?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!hw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,i=n===void 0?"":n,l=VY.some(function(d){return!!~i.indexOf(d)});l&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e})(),w4=(function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var l=i[n];Object.defineProperty(e,l,{value:t[l],enumerable:!1,writable:!1,configurable:!0})}return e}),Um=(function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||B0}),S4=Ub(0,0,0,0);function F0(e){return parseFloat(e)||0}function RT(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(i,l){var d=e["border-"+l+"-width"];return i+F0(d)},0)}function $Y(e){for(var t=["top","right","bottom","left"],n={},i=0,l=t;i<l.length;i++){var d=l[i],a=e["padding-"+d];n[d]=F0(a)}return n}function GY(e){var t=e.getBBox();return Ub(0,0,t.width,t.height)}function ZY(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return S4;var i=Um(e).getComputedStyle(e),l=$Y(i),d=l.left+l.right,a=l.top+l.bottom,g=F0(i.width),x=F0(i.height);if(i.boxSizing==="border-box"&&(Math.round(g+d)!==t&&(g-=RT(i,"left","right")+d),Math.round(x+a)!==n&&(x-=RT(i,"top","bottom")+a)),!KY(e)){var _=Math.round(g+d)-t,C=Math.round(x+a)-n;Math.abs(_)!==1&&(g-=_),Math.abs(C)!==1&&(x-=C)}return Ub(l.left,l.top,g,x)}var XY=(function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Um(e).SVGGraphicsElement}:function(e){return e instanceof Um(e).SVGElement&&typeof e.getBBox=="function"}})();function KY(e){return e===Um(e).document.documentElement}function YY(e){return hw?XY(e)?GY(e):ZY(e):S4}function WY(e){var t=e.x,n=e.y,i=e.width,l=e.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(d.prototype);return w4(a,{x:t,y:n,width:i,height:l,top:n,right:t+i,bottom:l+n,left:t}),a}function Ub(e,t,n,i){return{x:e,y:t,width:n,height:i}}var QY=(function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ub(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=YY(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e})(),JY=(function(){function e(t,n){var i=WY(n);w4(this,{target:t,contentRect:i})}return e})(),eW=(function(){function e(t,n,i){if(this.activeObservations_=[],this.observations_=new _4,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=i}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Um(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new QY(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Um(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new JY(i.target,i.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e})(),E4=typeof WeakMap<"u"?new WeakMap:new _4,C4=(function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=HY.getInstance(),i=new eW(t,n,this);E4.set(this,i)}return e})();["observe","unobserve","disconnect"].forEach(function(e){C4.prototype[e]=function(){var t;return(t=E4.get(this))[e].apply(t,arguments)}});var tW=(function(){return typeof B0.ResizeObserver<"u"?B0.ResizeObserver:C4})();function Zh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nW(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h4(i.key),i)}}function Xh(e,t,n){return t&&nW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ed=typeof document<"u"?document:{};function LT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function Qx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LT(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function zT(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rW(e))||t){n&&(e=n);var i=0,l=function(){};return{s:l,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(_){throw _},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,a=!1,g;return{s:function(){n=n.call(e)},n:function(){var _=n.next();return d=_.done,_},e:function(_){a=!0,g=_},f:function(){try{!d&&n.return!=null&&n.return()}finally{if(a)throw g}}}}function rW(e,t){if(e){if(typeof e=="string")return BT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BT(e,t)}}function BT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var iW=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function n1(e){if(!e)return null;if(typeof e=="string")return e;e.toJS&&(e=e.toJS());var t={},n=zT(e.layers),i;try{for(n.s();!(i=n.n()).done;){var l=i.value;t[l.id]=l}}catch(a){n.e(a)}finally{n.f()}var d=e.layers.map(function(a){var g=t[a.ref],x=null;if("interactive"in a&&(x=Qx({},a),delete x.interactive),g){x=x||Qx({},a),delete x.ref;var _=zT(iW),C;try{for(_.s();!(C=_.n()).done;){var E=C.value;E in g&&(x[E]=g[E])}}catch(A){_.e(A)}finally{_.f()}}return x||a});return Qx(Qx({},e),{},{layers:d})}var FT={};function aW(){}function oW(e){e&&console.error(e.error)}var T4={container:ht.object,gl:ht.object,goongApiAccessToken:ht.string,goongApiUrl:ht.string,attributionControl:ht.bool,preserveDrawingBuffer:ht.bool,reuseMaps:ht.bool,transformRequest:ht.func,mapOptions:ht.object,mapStyle:ht.oneOfType([ht.string,ht.object]),preventStyleDiffing:ht.bool,visible:ht.bool,asyncRender:ht.bool,onLoad:ht.func,onError:ht.func,width:ht.number,height:ht.number,viewState:ht.object,longitude:ht.number,latitude:ht.number,zoom:ht.number,bearing:ht.number,pitch:ht.number,altitude:ht.number},f0={container:Ed.body,goongApiAccessToken:sW(),goongApiUrl:"https://tiles.goong.io",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"https://tiles.goong.io/assets/goong_map_web.json",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:aW,onError:oW,width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function sW(){var e=null;if(typeof window<"u"&&window.location){var t=window.location.search.match(/api_key=([^&\/]*)/);e=t&&t[1]}return!e&&typeof process<"u"&&(e=e||FT.GoongAccessToken||FT.REACT_APP_GOONG_ACCESS_TOKEN),e||"no-token"}function UT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"component";e.debug&&ht.checkPropTypes(T4,e,"prop",t)}var dp=(function(){function e(t){var n=this;if(Zh(this,e),bn(this,"props",f0),bn(this,"width",0),bn(this,"height",0),bn(this,"_fireLoadEvent",function(){n.props.onLoad({type:"load",target:n._map})}),!t.mapboxgl)throw new Error("Goong JS not available");this.mapboxgl=t.mapboxgl,e.initialized||(e.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(t)}return Xh(e,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(n){return this._update(this.props,n),this}},{key:"redraw",value:function(){var n=this._map;n.style&&(n._frame&&(n._frame.cancel(),n._frame=null),n._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(n){this._map=e.savedMap;var i=this._map.getContainer(),l=n.container;if(l.classList.add("mapboxgl-map"),i!==l)for(;i.childNodes.length>0;)l.appendChild(i.childNodes[0]);this._map._container=l,e.savedMap=null,n.mapStyle&&this._map.setStyle(n1(n.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(n){if(n.reuseMaps&&e.savedMap)this._reuse(n);else{if(n.gl){var i=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=i,n.gl}}var l={container:n.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:n1(n.mapStyle),interactive:!1,trackResize:!1,attributionControl:n.attributionControl,preserveDrawingBuffer:n.preserveDrawingBuffer};n.transformRequest&&(l.transformRequest=n.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},l,n.mapOptions)),this._map.once("load",n.onLoad),this._map.on("error",n.onError)}return this}},{key:"_destroy",value:function(){this._map&&(this.props.reuseMaps&&!e.savedMap?(e.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)):this._map.remove(),this._map=null)}},{key:"_initialize",value:function(n){var i=this;n=Object.assign({},f0,n),UT(n,"Goong"),this.mapboxgl.accessToken=n.goongApiAccessToken||f0.goongApiAccessToken,this.mapboxgl.baseApiUrl=n.goongApiUrl,this._create(n);var l=n,d=l.container;Object.defineProperty(d,"offsetWidth",{configurable:!0,get:function(){return i.width}}),Object.defineProperty(d,"clientWidth",{configurable:!0,get:function(){return i.width}}),Object.defineProperty(d,"offsetHeight",{configurable:!0,get:function(){return i.height}}),Object.defineProperty(d,"clientHeight",{configurable:!0,get:function(){return i.height}});var a=this._map.getCanvas();a&&(a.style.outline="none"),this._updateMapViewport({},n),this._updateMapSize({},n),this.props=n}},{key:"_update",value:function(n,i){if(this._map){i=Object.assign({},this.props,i),UT(i,"Goong");var l=this._updateMapViewport(n,i),d=this._updateMapSize(n,i);this._updateMapStyle(n,i),!i.asyncRender&&(l||d)&&this.redraw(),this.props=i}}},{key:"_updateMapStyle",value:function(n,i){var l=n.mapStyle!==i.mapStyle;l&&this._map.setStyle(n1(i.mapStyle),{diff:!i.preventStyleDiffing})}},{key:"_updateMapSize",value:function(n,i){var l=n.width!==i.width||n.height!==i.height;return l&&(this.width=i.width,this.height=i.height,this._map.resize()),l}},{key:"_updateMapViewport",value:function(n,i){var l=this._getViewState(n),d=this._getViewState(i),a=d.latitude!==l.latitude||d.longitude!==l.longitude||d.zoom!==l.zoom||d.pitch!==l.pitch||d.bearing!==l.bearing||d.altitude!==l.altitude;return a&&(this._map.jumpTo(this._viewStateToMapboxProps(d)),d.altitude!==l.altitude&&(this._map.transform.altitude=d.altitude)),a}},{key:"_getViewState",value:function(n){var i=n.viewState||n,l=i.longitude,d=i.latitude,a=i.zoom,g=i.pitch,x=g===void 0?0:g,_=i.bearing,C=_===void 0?0:_,E=i.altitude,A=E===void 0?1.5:E;return{longitude:l,latitude:d,zoom:a,pitch:x,bearing:C,altitude:A}}},{key:"_checkStyleSheet",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1.0.6";if(!(typeof Ed>"u"))try{var i=Ed.createElement("div");i.className="mapboxgl-map",i.style.display="none",Ed.body.appendChild(i);var l=window.getComputedStyle(i).position!=="static";if(!l){var d=Ed.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href","https://cdn.jsdelivr.net/npm/@goongmaps/goong-js@".concat(n,"/dist/goong-js.css")),Ed.head.appendChild(d)}}catch{}}},{key:"_viewStateToMapboxProps",value:function(n){return{center:[n.longitude,n.latitude],zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}}}]),e})();bn(dp,"initialized",!1);bn(dp,"propTypes",T4);bn(dp,"defaultProps",f0);bn(dp,"savedMap",null);var p0={exports:{}},lW=p0.exports,VT;function cW(){return VT||(VT=1,(function(e,t){(function(n,i){e.exports=i()})(lW,(function(){var n,i,l;function d(a,g){if(!n)n=g;else if(!i)i=g;else{var x="var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk);",_={};n(_),l=g(_),l.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"}))}}return d(["exports"],(function(a){function g(r,s){return r(s={exports:{}},s.exports),s.exports}var x=_;function _(r,s,h,v){this.cx=3*r,this.bx=3*(h-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=v,this.p2x=h,this.p2y=v}_.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},_.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},_.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},_.prototype.solveCurveX=function(r,s){var h,v,S,T,N;for(s===void 0&&(s=1e-6),S=r,N=0;N<8;N++){if(T=this.sampleCurveX(S)-r,Math.abs(T)<s)return S;var R=this.sampleCurveDerivativeX(S);if(Math.abs(R)<1e-6)break;S-=T/R}if((S=r)<(h=0))return h;if(S>(v=1))return v;for(;h<v;){if(T=this.sampleCurveX(S),Math.abs(T-r)<s)return S;r>T?h=S:v=S,S=.5*(v-h)+h}return S},_.prototype.solve=function(r,s){return this.sampleCurveY(this.solveCurveX(r,s))};var C=E;function E(r,s){this.x=r,this.y=s}function A(r,s,h,v){var S=new x(r,s,h,v);return function(T){return S.solve(T)}}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,s){return this.clone()._rotateAround(r,s)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var s=r.x-this.x,h=r.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,s){return Math.atan2(this.x*s-this.y*r,this.x*r+this.y*s)},_matMult:function(r){var s=r[0]*this.x+r[1]*this.y,h=r[2]*this.x+r[3]*this.y;return this.x=s,this.y=h,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var s=Math.cos(r),h=Math.sin(r),v=s*this.x-h*this.y,S=h*this.x+s*this.y;return this.x=v,this.y=S,this},_rotateAround:function(r,s){var h=Math.cos(r),v=Math.sin(r),S=s.x+h*(this.x-s.x)-v*(this.y-s.y),T=s.y+v*(this.x-s.x)+h*(this.y-s.y);return this.x=S,this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(r){return r instanceof E?r:Array.isArray(r)?new E(r[0],r[1]):r};var D=A(.25,.1,.25,1);function I(r,s,h){return Math.min(h,Math.max(s,r))}function L(r,s,h){var v=h-s,S=((r-s)%v+v)%v+s;return S===s?h:S}function B(r){for(var s=[],h=arguments.length-1;h-- >0;)s[h]=arguments[h+1];for(var v=0,S=s;v<S.length;v+=1){var T=S[v];for(var N in T)r[N]=T[N]}return r}var z=1;function q(){return z++}function H(){return(function r(s){return s?(s^16*Math.random()>>s/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)})()}function W(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function ne(r,s){r.forEach((function(h){s[h]&&(s[h]=s[h].bind(s))}))}function re(r,s){return r.indexOf(s,r.length-s.length)!==-1}function ee(r,s,h){var v={};for(var S in r)v[S]=s.call(h||this,r[S],S,r);return v}function oe(r,s,h){var v={};for(var S in r)s.call(h||this,r[S],S,r)&&(v[S]=r[S]);return v}function he(r){return Array.isArray(r)?r.map(he):typeof r=="object"&&r?ee(r,he):r}var we={};function ye(r){we[r]||(typeof console<"u"&&console.warn(r),we[r]=!0)}function Pe(r,s,h){return(h.y-r.y)*(s.x-r.x)>(s.y-r.y)*(h.x-r.x)}function Ke(r){for(var s=0,h=0,v=r.length,S=v-1,T=void 0,N=void 0;h<v;S=h++)T=r[h],s+=((N=r[S]).x-T.x)*(T.y+N.y);return s}function ze(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Je(r){var s={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(v,S,T,N){var R=T||N;return s[S]=!R||R.toLowerCase(),""})),s["max-age"]){var h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s}var Ae=null;function De(r){if(Ae==null){var s=r.navigator?r.navigator.userAgent:null;Ae=!!r.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ae}function ke(r){try{var s=self[r];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}}var st,me,Ce,pe,Q=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Ee=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Ge=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,lt={now:Q,frame:function(r){var s=Ee(r);return{cancel:function(){return Ge(s)}}},getImageData:function(r,s){s===void 0&&(s=0);var h=self.document.createElement("canvas"),v=h.getContext("2d");if(!v)throw new Error("failed to create canvas 2d context");return h.width=r.width,h.height=r.height,v.drawImage(r,0,0,r.width,r.height),v.getImageData(-s,-s,r.width+2*s,r.height+2*s)},resolveURL:function(r){return st||(st=self.document.createElement("a")),st.href=r,st.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(me==null&&(me=self.matchMedia("(prefers-reduced-motion: reduce)")),me.matches)}},We={API_URL:"https://tiles.goong.io",get EVENTS_URL(){return"https://rsapi.goong.io"},FEEDBACK_URL:"https://goong.io",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Nt={supported:!1,testSupport:function(r){At||!pe||(Mt?Ut(r):Ce=r)}},At=!1,Mt=!1;function Ut(r){var s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,pe),r.isContextLost())return;Nt.supported=!0}catch{}r.deleteTexture(s),At=!0}self.document&&((pe=self.document.createElement("img")).onload=function(){Ce&&Ut(Ce),Ce=null,Mt=!0},pe.onerror=function(){At=!0,Ce=null},pe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Pt="01",Rt=function(r,s){this._transformRequestFn=r,this._customAccessToken=s,this._createSkuToken()};function vn(r){return r.indexOf("https://tiles.goong.io")===0}Rt.prototype._createSkuToken=function(){var r=(function(){for(var s="",h=0;h<10;h++)s+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Pt,s].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},Rt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Rt.prototype.transformRequest=function(r,s){return this._transformRequestFn&&this._transformRequestFn(r,s)||{url:r}},Rt.prototype.normalizeStyleURL=function(r,s){if(!vn(r))return r;var h=dt(r);return this._makeAPIURL(h,this._customAccessToken||s)},Rt.prototype.normalizeGlyphsURL=function(r,s){if(!vn(r))return r;var h=dt(r);return this._makeAPIURL(h,this._customAccessToken||s)},Rt.prototype.normalizeSourceURL=function(r,s){if(!vn(r))return r;var h=dt(r);return this._makeAPIURL(h,this._customAccessToken||s)},Rt.prototype.normalizeSpriteURL=function(r,s,h,v){var S=dt(r);return vn(r)?(S.path=""+S.path+s+h,this._makeAPIURL(S,this._customAccessToken||v)):(S.path+=""+s+h,Xe(S))},Rt.prototype.normalizeTileURL=function(r,s,h){if(this._isSkuTokenExpired()&&this._createSkuToken(),!s||!vn(s))return r;var v=dt(r),S=lt.devicePixelRatio>=2||h===512?"@2x":"",T=Nt.supported?".webp":"$1";return v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+S+T),v.path=v.path.replace(/^.+\/v4\//,"/"),We.REQUIRE_ACCESS_TOKEN&&(We.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&v.params.push("sku="+this._skuToken),this._makeAPIURL(v,this._customAccessToken)},Rt.prototype.canonicalizeTileURL=function(r){var s=dt(r);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return r;var h="mapbox://tiles/";h+=s.path.replace("/v4/","");var v=s.params.filter((function(S){return!S.match(/^api_key=/)}));return v.length&&(h+="?"+v.join("&")),h},Rt.prototype.canonicalizeTileset=function(r,s){if(!vn(s))return r.tiles||[];for(var h=[],v=0,S=r.tiles;v<S.length;v+=1){var T=S[v],N=this.canonicalizeTileURL(T);h.push(N)}return h},Rt.prototype._makeAPIURL=function(r,s){var h=dt(We.API_URL);if(r.protocol=h.protocol,r.authority=h.authority,h.path!=="/"&&(r.path=""+h.path+r.path),!We.REQUIRE_ACCESS_TOKEN)return Xe(r);if(!(s=s||We.ACCESS_TOKEN))throw new Error("An API access token is required to use Goong JS. See https://docs.goong.io");return r.params=r.params.filter((function(v){return v.indexOf("api_key")===-1})),r.params.push("api_key="+s),Xe(r)};var er=/^((https?:)?\/\/)?([^\/]+\.)?goong\.io(\/|\?|$)/i;function $n(r){return er.test(r)}var ir=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function dt(r){var s=r.match(ir);if(!s)throw new Error("Unable to parse URL object");return{protocol:s[1],authority:s[2],path:s[3]||"/",params:s[4]?s[4].split("&"):[]}}function Xe(r){var s=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+s}function xe(r){if(!r)return null;var s,h=r.split(".");if(!h||h.length!==3)return null;try{return JSON.parse((s=h[1],decodeURIComponent(self.atob(s).split("").map((function(v){return"%"+("00"+v.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch{return null}}var Re=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Re.prototype.getStorageKey=function(r){var s,h=xe(We.ACCESS_TOKEN),v="";return h&&h.u?(s=h.u,v=self.btoa(encodeURIComponent(s).replace(/%([0-9A-F]{2})/g,(function(S,T){return String.fromCharCode(+("0x"+T))})))):v=We.ACCESS_TOKEN||"",r?"goong.eventData."+r+":"+v:"goong.eventData:"+v},Re.prototype.fetchEventData=function(){var r=ke("localStorage"),s=this.getStorageKey(),h=this.getStorageKey("uuid");if(r)try{var v=self.localStorage.getItem(s);v&&(this.eventData=JSON.parse(v));var S=self.localStorage.getItem(h);S&&(this.anonId=S)}catch{ye("Unable to read from LocalStorage")}},Re.prototype.saveEventData=function(){var r=ke("localStorage"),s=this.getStorageKey(),h=this.getStorageKey("uuid");if(r)try{self.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{ye("Unable to write to LocalStorage")}},Re.prototype.processRequests=function(r){},Re.prototype.postEvent=function(r,s,h,v){},Re.prototype.queueRequest=function(r,s){this.queue.push(r),this.processRequests(s)};var Ve,Vt,Oe=(function(r){function s(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.postMapLoadEvent=function(h,v,S,T){this.skuToken=S,(We.EVENTS_URL&&T||We.ACCESS_TOKEN&&Array.isArray(h)&&h.some((function(N){return vn(N)||$n(N)})))&&this.queueRequest({id:v,timestamp:Date.now()},T)},s.prototype.processRequests=function(h){var v=this;if(!this.pendingRequest&&this.queue.length!==0){var S=this.queue.shift(),T=S.id,N=S.timestamp;T&&this.success[T]||(this.anonId||this.fetchEventData(),W(this.anonId)||(this.anonId=H()),this.postEvent(N,{skuToken:this.skuToken},(function(R){R||T&&(v.success[T]=!0)}),h))}},s})(Re),Le=new((function(r){function s(h){r.call(this,"appUserTurnstile"),this._customAccessToken=h}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.postTurnstileEvent=function(h,v){We.EVENTS_URL&&We.ACCESS_TOKEN&&Array.isArray(h)&&h.some((function(S){return vn(S)||$n(S)}))&&this.queueRequest(Date.now(),v)},s.prototype.processRequests=function(h){var v=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var S=xe(We.ACCESS_TOKEN),T=S?S.u:We.ACCESS_TOKEN,N=T!==this.eventData.tokenU;W(this.anonId)||(this.anonId=H(),N=!0);var R=this.queue.shift();if(this.eventData.lastSuccess){var V=new Date(this.eventData.lastSuccess),G=new Date(R),K=(R-this.eventData.lastSuccess)/864e5;N=N||K>=1||K<-1||V.getDate()!==G.getDate()}else N=!0;if(!N)return this.processRequests();this.postEvent(R,{"enabled.telemetry":!1},(function(ae){ae||(v.eventData.lastSuccess=R,v.eventData.tokenU=T)}),h)}},s})(Re)),Qe=Le.postTurnstileEvent.bind(Le),Tt=new Oe,on=Tt.postMapLoadEvent.bind(Tt),Mn=500,Xn=50;function wr(){self.caches&&!Ve&&(Ve=self.caches.open("mapbox-tiles"))}function Bi(r,s,h){if(wr(),Ve){var v={status:s.status,statusText:s.statusText,headers:new self.Headers};s.headers.forEach((function(T,N){return v.headers.set(N,T)}));var S=Je(s.headers.get("Cache-Control")||"");S["no-store"]||(S["max-age"]&&v.headers.set("Expires",new Date(h+1e3*S["max-age"]).toUTCString()),new Date(v.headers.get("Expires")).getTime()-h<42e4||(function(T,N){if(Vt===void 0)try{new Response(new ReadableStream),Vt=!0}catch{Vt=!1}Vt?N(T.body):T.blob().then(N)})(s,(function(T){var N=new self.Response(T,v);wr(),Ve&&Ve.then((function(R){return R.put(Jr(r.url),N)})).catch((function(R){return ye(R.message)}))})))}}function Jr(r){var s=r.indexOf("?");return s<0?r:r.slice(0,s)}function Xr(r,s){if(wr(),!Ve)return s(null);var h=Jr(r.url);Ve.then((function(v){v.match(h).then((function(S){var T=(function(N){if(!N)return!1;var R=new Date(N.headers.get("Expires")||0),V=Je(N.headers.get("Cache-Control")||"");return R>Date.now()&&!V["no-cache"]})(S);v.delete(h),T&&v.put(h,S.clone()),s(null,S,T)})).catch(s)})).catch(s)}var Ci,Sr=1/0;function ka(){return Ci==null&&(Ci=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Ci}var qr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(qr);var Ks=(function(r){function s(h,v,S){v===401&&$n(S)&&(h+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,h),this.status=v,this.url=S,this.name=this.constructor.name,this.message=h}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},s})(Error),So=ze()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function Eo(r,s){var h,v=new self.AbortController,S=new self.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:So(),signal:v.signal}),T=!1,N=!1,R=(h=S.url).indexOf("sku=")>0&&$n(h);r.type==="json"&&S.headers.set("Accept","application/json");var V=function(K,ae,de){if(!N){if(K&&K.message!=="SecurityError"&&ye(K),ae&&de)return G(ae);var le=Date.now();self.fetch(S).then((function(fe){if(fe.ok){var Me=R?fe.clone():null;return G(fe,Me,le)}return s(new Ks(fe.statusText,fe.status,r.url))})).catch((function(fe){fe.code!==20&&s(new Error(fe.message))}))}},G=function(K,ae,de){(r.type==="arrayBuffer"?K.arrayBuffer():r.type==="json"?K.json():K.text()).then((function(le){N||(ae&&de&&Bi(S,ae,de),T=!0,s(null,le,K.headers.get("Cache-Control"),K.headers.get("Expires")))})).catch((function(le){N||s(new Error(le.message))}))};return R?Xr(S,V):V(null,null),{cancel:function(){N=!0,T||v.abort()}}}var qa=function(r,s){if(h=r.url,!(/^file:/.test(h)||/^file:/.test(So())&&!/^\w+:/.test(h))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Eo(r,s);if(ze()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,s,void 0,!0)}var h;return(function(v,S){var T=new self.XMLHttpRequest;for(var N in T.open(v.method||"GET",v.url,!0),v.type==="arrayBuffer"&&(T.responseType="arraybuffer"),v.headers)T.setRequestHeader(N,v.headers[N]);return v.type==="json"&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials=v.credentials==="include",T.onerror=function(){S(new Error(T.statusText))},T.onload=function(){if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){var R=T.response;if(v.type==="json")try{R=JSON.parse(T.response)}catch(V){return S(V)}S(null,R,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else S(new Ks(T.statusText,T.status,v.url))},T.send(v.body),{cancel:function(){return T.abort()}}})(r,s)},da=function(r,s){return qa(B(r,{type:"arrayBuffer"}),s)},Co,Ra;Co=[],Ra=0;var ws=function(r,s){if(Nt.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Ra>=We.MAX_PARALLEL_IMAGE_REQUESTS){var h={requestParameters:r,callback:s,cancelled:!1,cancel:function(){this.cancelled=!0}};return Co.push(h),h}Ra++;var v=!1,S=function(){if(!v)for(v=!0,Ra--;Co.length&&Ra<We.MAX_PARALLEL_IMAGE_REQUESTS;){var N=Co.shift(),R=N.requestParameters,V=N.callback;N.cancelled||(N.cancel=ws(R,V).cancel)}},T=da(r,(function(N,R,V,G){S(),N?s(N):R&&(ka()?(function(K,ae){var de=new self.Blob([new Uint8Array(K)],{type:"image/png"});self.createImageBitmap(de).then((function(le){ae(null,le)})).catch((function(){ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))})(R,s):(function(K,ae,de,le){var fe=new self.Image,Me=self.URL;fe.onload=function(){ae(null,fe),Me.revokeObjectURL(fe.src)},fe.onerror=function(){return ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Ie=new self.Blob([new Uint8Array(K)],{type:"image/png"});fe.cacheControl=de,fe.expires=le,fe.src=K.byteLength?Me.createObjectURL(Ie):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="})(R,s,V,G))}));return{cancel:function(){T.cancel(),S()}}};function $o(r,s,h){h[r]&&h[r].indexOf(s)!==-1||(h[r]=h[r]||[],h[r].push(s))}function is(r,s,h){if(h&&h[r]){var v=h[r].indexOf(s);v!==-1&&h[r].splice(v,1)}}var fr=function(r,s){s===void 0&&(s={}),B(this,s),this.type=r},Ti=(function(r){function s(h,v){v===void 0&&(v={}),r.call(this,"error",B({error:h},v))}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s})(fr),Fr=function(){};Fr.prototype.on=function(r,s){return this._listeners=this._listeners||{},$o(r,s,this._listeners),this},Fr.prototype.off=function(r,s){return is(r,s,this._listeners),is(r,s,this._oneTimeListeners),this},Fr.prototype.once=function(r,s){return this._oneTimeListeners=this._oneTimeListeners||{},$o(r,s,this._oneTimeListeners),this},Fr.prototype.fire=function(r,s){typeof r=="string"&&(r=new fr(r,s||{}));var h=r.type;if(this.listens(h)){r.target=this;for(var v=0,S=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];v<S.length;v+=1)S[v].call(this,r);for(var T=0,N=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];T<N.length;T+=1){var R=N[T];is(h,R,this._oneTimeListeners),R.call(this,r)}var V=this._eventedParent;V&&(B(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(r))}else r instanceof Ti&&console.error(r.error);return this},Fr.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},Fr.prototype.setEventedParent=function(r,s){return this._eventedParent=r,this._eventedParentData=s,this};var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Roboto Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},Yt=function(r,s,h,v){this.message=(r?r+": ":"")+h,v&&(this.identifier=v),s!=null&&s.__line__&&(this.line=s.__line__)};function Ja(r){var s=r.key,h=r.value;return h?[new Yt(s,h,"constants have been deprecated as of v8")]:[]}function eo(r){for(var s=[],h=arguments.length-1;h-- >0;)s[h]=arguments[h+1];for(var v=0,S=s;v<S.length;v+=1){var T=S[v];for(var N in T)r[N]=T[N]}return r}function gi(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Hr(r){if(Array.isArray(r))return r.map(Hr);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var s={};for(var h in r)s[h]=Hr(r[h]);return s}return gi(r)}var Z=(function(r){function s(h,v){r.call(this,v),this.message=v,this.key=h}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s})(Error),Y=function(r,s){s===void 0&&(s=[]),this.parent=r,this.bindings={};for(var h=0,v=s;h<v.length;h+=1){var S=v[h],T=S[0],N=S[1];this.bindings[T]=N}};Y.prototype.concat=function(r){return new Y(this,r)},Y.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},Y.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var ie={kind:"null"},se={kind:"number"},je={kind:"string"},Ne={kind:"boolean"},Ye={kind:"color"},He={kind:"object"},Be={kind:"value"},nt={kind:"collator"},xt={kind:"formatted"},Ot={kind:"resolvedImage"};function yt(r,s){return{kind:"array",itemType:r,N:s}}function It(r){if(r.kind==="array"){var s=It(r.itemType);return typeof r.N=="number"?"array<"+s+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+s+">"}return r.kind}var Lt=[ie,se,je,Ne,Ye,xt,He,yt(Be),Ot];function en(r,s){if(s.kind==="error")return null;if(r.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!en(r.itemType,s.itemType))&&(typeof r.N!="number"||r.N===s.N))return null}else{if(r.kind===s.kind)return null;if(r.kind==="value"){for(var h=0,v=Lt;h<v.length;h+=1)if(!en(v[h],s))return null}}return"Expected "+It(r)+" but found "+It(s)+" instead."}var dn=g((function(r,s){var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function v(V){return(V=Math.round(V))<0?0:V>255?255:V}function S(V){return V<0?0:V>1?1:V}function T(V){return V[V.length-1]==="%"?v(parseFloat(V)/100*255):v(parseInt(V))}function N(V){return V[V.length-1]==="%"?S(parseFloat(V)/100):S(parseFloat(V))}function R(V,G,K){return K<0?K+=1:K>1&&(K-=1),6*K<1?V+(G-V)*K*6:2*K<1?G:3*K<2?V+(G-V)*(2/3-K)*6:V}try{s.parseCSSColor=function(V){var G,K=V.replace(/ /g,"").toLowerCase();if(K in h)return h[K].slice();if(K[0]==="#")return K.length===4?(G=parseInt(K.substr(1),16))>=0&&G<=4095?[(3840&G)>>4|(3840&G)>>8,240&G|(240&G)>>4,15&G|(15&G)<<4,1]:null:K.length===7&&(G=parseInt(K.substr(1),16))>=0&&G<=16777215?[(16711680&G)>>16,(65280&G)>>8,255&G,1]:null;var ae=K.indexOf("("),de=K.indexOf(")");if(ae!==-1&&de+1===K.length){var le=K.substr(0,ae),fe=K.substr(ae+1,de-(ae+1)).split(","),Me=1;switch(le){case"rgba":if(fe.length!==4)return null;Me=N(fe.pop());case"rgb":return fe.length!==3?null:[T(fe[0]),T(fe[1]),T(fe[2]),Me];case"hsla":if(fe.length!==4)return null;Me=N(fe.pop());case"hsl":if(fe.length!==3)return null;var Ie=(parseFloat(fe[0])%360+360)%360/360,Ue=N(fe[1]),at=N(fe[2]),ot=at<=.5?at*(Ue+1):at+Ue-at*Ue,ct=2*at-ot;return[v(255*R(ct,ot,Ie+1/3)),v(255*R(ct,ot,Ie)),v(255*R(ct,ot,Ie-1/3)),Me];default:return null}}return null}}catch{}})).parseCSSColor,qt=function(r,s,h,v){v===void 0&&(v=1),this.r=r,this.g=s,this.b=h,this.a=v};qt.parse=function(r){if(r){if(r instanceof qt)return r;if(typeof r=="string"){var s=dn(r);if(s)return new qt(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3])}}},qt.prototype.toString=function(){var r=this.toArray(),s=r[0],h=r[1],v=r[2],S=r[3];return"rgba("+Math.round(s)+","+Math.round(h)+","+Math.round(v)+","+S+")"},qt.prototype.toArray=function(){var r=this.r,s=this.g,h=this.b,v=this.a;return v===0?[0,0,0,0]:[255*r/v,255*s/v,255*h/v,v]},qt.black=new qt(0,0,0,1),qt.white=new qt(1,1,1,1),qt.transparent=new qt(0,0,0,0),qt.red=new qt(1,0,0,1);var Dn=function(r,s,h){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Dn.prototype.compare=function(r,s){return this.collator.compare(r,s)},Dn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var qn=function(r,s,h,v,S){this.text=r,this.image=s,this.scale=h,this.fontStack=v,this.textColor=S},kn=function(r){this.sections=r};kn.fromString=function(r){return new kn([new qn(r,null,null,null,null)])},kn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some((function(r){return r.text.length!==0||r.image&&r.image.name.length!==0}))},kn.factory=function(r){return r instanceof kn?r:kn.fromString(r)},kn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map((function(r){return r.text})).join("")},kn.prototype.serialize=function(){for(var r=["format"],s=0,h=this.sections;s<h.length;s+=1){var v=h[s];if(v.image)r.push(["image",v.image.name]);else{r.push(v.text);var S={};v.fontStack&&(S["text-font"]=["literal",v.fontStack.split(",")]),v.scale&&(S["font-scale"]=v.scale),v.textColor&&(S["text-color"]=["rgba"].concat(v.textColor.toArray())),r.push(S)}}return r};var zn=function(r){this.name=r.name,this.available=r.available};function Lr(r,s,h,v){return typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:"Invalid rgba value ["+[r,s,h,v].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof v=="number"?[r,s,h,v]:[r,s,h]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Bn(r){if(r===null)return ie;if(typeof r=="string")return je;if(typeof r=="boolean")return Ne;if(typeof r=="number")return se;if(r instanceof qt)return Ye;if(r instanceof Dn)return nt;if(r instanceof kn)return xt;if(r instanceof zn)return Ot;if(Array.isArray(r)){for(var s,h=r.length,v=0,S=r;v<S.length;v+=1){var T=Bn(S[v]);if(s){if(s===T)continue;s=Be;break}s=T}return yt(s||Be,h)}return He}function nr(r){var s=typeof r;return r===null?"":s==="string"||s==="number"||s==="boolean"?String(r):r instanceof qt||r instanceof kn||r instanceof zn?r.toString():JSON.stringify(r)}zn.prototype.toString=function(){return this.name},zn.fromString=function(r){return new zn({name:r,available:!1})},zn.prototype.serialize=function(){return["image",this.name]};var pr=function(r,s){this.type=r,this.value=s};pr.parse=function(r,s){if(r.length!==2)return s.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!(function T(N){if(N===null||typeof N=="string"||typeof N=="boolean"||typeof N=="number"||N instanceof qt||N instanceof Dn||N instanceof kn||N instanceof zn)return!0;if(Array.isArray(N)){for(var R=0,V=N;R<V.length;R+=1)if(!T(V[R]))return!1;return!0}if(typeof N=="object"){for(var G in N)if(!T(N[G]))return!1;return!0}return!1})(r[1]))return s.error("invalid value");var h=r[1],v=Bn(h),S=s.expectedType;return v.kind!=="array"||v.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(v=S),new pr(v,h)},pr.prototype.evaluate=function(){return this.value},pr.prototype.eachChild=function(){},pr.prototype.possibleOutputs=function(){return[this.value]},pr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof qt?["rgba"].concat(this.value.toArray()):this.value instanceof kn?this.value.serialize():this.value};var Hn=function(r){this.name="ExpressionEvaluationError",this.message=r};Hn.prototype.toJSON=function(){return this.message};var Qi={string:je,number:se,boolean:Ne,object:He},lr=function(r,s){this.type=r,this.args=s};lr.parse=function(r,s){if(r.length<2)return s.error("Expected at least one argument.");var h,v=1,S=r[0];if(S==="array"){var T,N;if(r.length>2){var R=r[1];if(typeof R!="string"||!(R in Qi)||R==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);T=Qi[R],v++}else T=Be;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);N=r[2],v++}h=yt(T,N)}else h=Qi[S];for(var V=[];v<r.length;v++){var G=s.parse(r[v],v,Be);if(!G)return null;V.push(G)}return new lr(h,V)},lr.prototype.evaluate=function(r){for(var s=0;s<this.args.length;s++){var h=this.args[s].evaluate(r);if(!en(this.type,Bn(h)))return h;if(s===this.args.length-1)throw new Hn("Expected value to be of type "+It(this.type)+", but found "+It(Bn(h))+" instead.")}return null},lr.prototype.eachChild=function(r){this.args.forEach(r)},lr.prototype.possibleOutputs=function(){var r;return(r=[]).concat.apply(r,this.args.map((function(s){return s.possibleOutputs()})))},lr.prototype.serialize=function(){var r=this.type,s=[r.kind];if(r.kind==="array"){var h=r.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){s.push(h.kind);var v=r.N;(typeof v=="number"||this.args.length>1)&&s.push(v)}}return s.concat(this.args.map((function(S){return S.serialize()})))};var Kr=function(r){this.type=xt,this.sections=r};Kr.parse=function(r,s){if(r.length<2)return s.error("Expected at least one argument.");var h=r[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");for(var v=[],S=!1,T=1;T<=r.length-1;++T){var N=r[T];if(S&&typeof N=="object"&&!Array.isArray(N)){S=!1;var R=null;if(N["font-scale"]&&!(R=s.parse(N["font-scale"],1,se)))return null;var V=null;if(N["text-font"]&&!(V=s.parse(N["text-font"],1,yt(je))))return null;var G=null;if(N["text-color"]&&!(G=s.parse(N["text-color"],1,Ye)))return null;var K=v[v.length-1];K.scale=R,K.font=V,K.textColor=G}else{var ae=s.parse(r[T],1,Be);if(!ae)return null;var de=ae.type.kind;if(de!=="string"&&de!=="value"&&de!=="null"&&de!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,v.push({content:ae,scale:null,font:null,textColor:null})}}return new Kr(v)},Kr.prototype.evaluate=function(r){return new kn(this.sections.map((function(s){var h=s.content.evaluate(r);return Bn(h)===Ot?new qn("",h,null,null,null):new qn(nr(h),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)})))},Kr.prototype.eachChild=function(r){for(var s=0,h=this.sections;s<h.length;s+=1){var v=h[s];r(v.content),v.scale&&r(v.scale),v.font&&r(v.font),v.textColor&&r(v.textColor)}},Kr.prototype.possibleOutputs=function(){return[void 0]},Kr.prototype.serialize=function(){for(var r=["format"],s=0,h=this.sections;s<h.length;s+=1){var v=h[s];r.push(v.content.serialize());var S={};v.scale&&(S["font-scale"]=v.scale.serialize()),v.font&&(S["text-font"]=v.font.serialize()),v.textColor&&(S["text-color"]=v.textColor.serialize()),r.push(S)}return r};var Jn=function(r){this.type=Ot,this.input=r};Jn.parse=function(r,s){if(r.length!==2)return s.error("Expected two arguments.");var h=s.parse(r[1],1,je);return h?new Jn(h):s.error("No image name provided.")},Jn.prototype.evaluate=function(r){var s=this.input.evaluate(r),h=!1;return r.availableImages&&r.availableImages.indexOf(s)>-1&&(h=!0),new zn({name:s,available:h})},Jn.prototype.eachChild=function(r){r(this.input)},Jn.prototype.possibleOutputs=function(){return[void 0]},Jn.prototype.serialize=function(){return["image",this.input.serialize()]};var ii={"to-boolean":Ne,"to-color":Ye,"to-number":se,"to-string":je},aa=function(r,s){this.type=r,this.args=s};aa.parse=function(r,s){if(r.length<2)return s.error("Expected at least one argument.");var h=r[0];if((h==="to-boolean"||h==="to-string")&&r.length!==2)return s.error("Expected one argument.");for(var v=ii[h],S=[],T=1;T<r.length;T++){var N=s.parse(r[T],T,Be);if(!N)return null;S.push(N)}return new aa(v,S)},aa.prototype.evaluate=function(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){for(var s,h,v=0,S=this.args;v<S.length;v+=1){if(h=null,(s=S[v].evaluate(r))instanceof qt)return s;if(typeof s=="string"){var T=r.parseColor(s);if(T)return T}else if(Array.isArray(s)&&!(h=s.length<3||s.length>4?"Invalid rbga value "+JSON.stringify(s)+": expected an array containing either three or four numeric values.":Lr(s[0],s[1],s[2],s[3])))return new qt(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Hn(h||"Could not parse color from value '"+(typeof s=="string"?s:String(JSON.stringify(s)))+"'")}if(this.type.kind==="number"){for(var N=null,R=0,V=this.args;R<V.length;R+=1){if((N=V[R].evaluate(r))===null)return 0;var G=Number(N);if(!isNaN(G))return G}throw new Hn("Could not convert "+JSON.stringify(N)+" to number.")}return this.type.kind==="formatted"?kn.fromString(nr(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?zn.fromString(nr(this.args[0].evaluate(r))):nr(this.args[0].evaluate(r))},aa.prototype.eachChild=function(r){this.args.forEach(r)},aa.prototype.possibleOutputs=function(){var r;return(r=[]).concat.apply(r,this.args.map((function(s){return s.possibleOutputs()})))},aa.prototype.serialize=function(){if(this.type.kind==="formatted")return new Kr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Jn(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild((function(s){r.push(s.serialize())})),r};var ki=["Unknown","Point","LineString","Polygon"],uo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};uo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},uo.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ki[this.feature.type]:this.feature.type:null},uo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},uo.prototype.parseColor=function(r){var s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=qt.parse(r)),s};var Ji=function(r,s,h,v){this.name=r,this.type=s,this._evaluate=h,this.args=v};Ji.prototype.evaluate=function(r){return this._evaluate(r,this.args)},Ji.prototype.eachChild=function(r){this.args.forEach(r)},Ji.prototype.possibleOutputs=function(){return[void 0]},Ji.prototype.serialize=function(){return[this.name].concat(this.args.map((function(r){return r.serialize()})))},Ji.parse=function(r,s){var h,v=r[0],S=Ji.definitions[v];if(!S)return s.error('Unknown expression "'+v+'". If you wanted a literal array, use ["literal", [...]].',0);for(var T=Array.isArray(S)?S[0]:S.type,N=Array.isArray(S)?[[S[1],S[2]]]:S.overloads,R=N.filter((function(sn){var cn=sn[0];return!Array.isArray(cn)||cn.length===r.length-1})),V=null,G=0,K=R;G<K.length;G+=1){var ae=K[G],de=ae[0],le=ae[1];V=new pt(s.registry,s.path,null,s.scope);for(var fe=[],Me=!1,Ie=1;Ie<r.length;Ie++){var Ue=r[Ie],at=Array.isArray(de)?de[Ie-1]:de.type,ot=V.parse(Ue,1+fe.length,at);if(!ot){Me=!0;break}fe.push(ot)}if(!Me)if(Array.isArray(de)&&de.length!==fe.length)V.error("Expected "+de.length+" arguments, but found "+fe.length+" instead.");else{for(var ct=0;ct<fe.length;ct++){var wt=Array.isArray(de)?de[ct]:de.type,jt=fe[ct];V.concat(ct+1).checkSubtype(wt,jt.type)}if(V.errors.length===0)return new Ji(v,T,le,fe)}}if(R.length===1)(h=s.errors).push.apply(h,V.errors);else{for(var Ct=(R.length?R:N).map((function(sn){var cn,rn=sn[0];return cn=rn,Array.isArray(cn)?"("+cn.map(It).join(", ")+")":"("+It(cn.type)+"...)"})).join(" | "),Jt=[],nn=1;nn<r.length;nn++){var ln=s.parse(r[nn],1+Jt.length);if(!ln)return null;Jt.push(It(ln.type))}s.error("Expected arguments of type "+Ct+", but found ("+Jt.join(", ")+") instead.")}return null},Ji.register=function(r,s){for(var h in Ji.definitions=s,s)r[h]=Ji};var To=function(r,s,h){this.type=nt,this.locale=h,this.caseSensitive=r,this.diacriticSensitive=s};function ko(r){if(r instanceof Ji&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name)))return!1;var s=!0;return r.eachChild((function(h){s&&!ko(h)&&(s=!1)})),s}function ce(r){if(r instanceof Ji&&r.name==="feature-state")return!1;var s=!0;return r.eachChild((function(h){s&&!ce(h)&&(s=!1)})),s}function Se(r,s){if(r instanceof Ji&&s.indexOf(r.name)>=0)return!1;var h=!0;return r.eachChild((function(v){h&&!Se(v,s)&&(h=!1)})),h}To.parse=function(r,s){if(r.length!==2)return s.error("Expected one argument.");var h=r[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");var v=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ne);if(!v)return null;var S=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ne);if(!S)return null;var T=null;return h.locale&&!(T=s.parse(h.locale,1,je))?null:new To(v,S,T)},To.prototype.evaluate=function(r){return new Dn(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},To.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},To.prototype.possibleOutputs=function(){return[void 0]},To.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var qe=function(r,s){this.type=s.type,this.name=r,this.boundExpression=s};qe.parse=function(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");var h=r[1];return s.scope.has(h)?new qe(h,s.scope.get(h)):s.error('Unknown variable "'+h+'". Make sure "'+h+'" has been bound in an enclosing "let" expression before using it.',1)},qe.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},qe.prototype.eachChild=function(){},qe.prototype.possibleOutputs=function(){return[void 0]},qe.prototype.serialize=function(){return["var",this.name]};var pt=function(r,s,h,v,S){s===void 0&&(s=[]),v===void 0&&(v=new Y),S===void 0&&(S=[]),this.registry=r,this.path=s,this.key=s.map((function(T){return"["+T+"]"})).join(""),this.scope=v,this.errors=S,this.expectedType=h};function Ht(r,s){for(var h,v,S=r.length-1,T=0,N=S,R=0;T<=N;)if(h=r[R=Math.floor((T+N)/2)],v=r[R+1],h<=s){if(R===S||s<v)return R;T=R+1}else{if(!(h>s))throw new Hn("Input is not a number.");N=R-1}return 0}pt.prototype.parse=function(r,s,h,v,S){return S===void 0&&(S={}),s?this.concat(s,h,v)._parse(r,S):this._parse(r,S)},pt.prototype._parse=function(r,s){function h(G,K,ae){return ae==="assert"?new lr(K,[G]):ae==="coerce"?new aa(K,[G]):G}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var v=r[0];if(typeof v!="string")return this.error("Expression name must be a string, but found "+typeof v+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var S=this.registry[v];if(S){var T=S.parse(r,this);if(!T)return null;if(this.expectedType){var N=this.expectedType,R=T.type;if(N.kind!=="string"&&N.kind!=="number"&&N.kind!=="boolean"&&N.kind!=="object"&&N.kind!=="array"||R.kind!=="value")if(N.kind!=="color"&&N.kind!=="formatted"&&N.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string"){if(this.checkSubtype(N,R))return null}else T=h(T,N,s.typeAnnotation||"coerce");else T=h(T,N,s.typeAnnotation||"assert")}if(!(T instanceof pr)&&T.type.kind!=="resolvedImage"&&(function G(K){if(K instanceof qe)return G(K.boundExpression);if(K instanceof Ji&&K.name==="error"||K instanceof To)return!1;var ae=K instanceof aa||K instanceof lr,de=!0;return K.eachChild((function(le){de=ae?de&&G(le):de&&le instanceof pr})),de?ko(K)&&Se(K,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1})(T)){var V=new uo;try{T=new pr(T.type,T.evaluate(V))}catch(G){return this.error(G.message),null}}return T}return this.error('Unknown expression "'+v+'". If you wanted a literal array, use ["literal", [...]].',0)}return r===void 0?this.error("'undefined' value invalid. Use null instead."):typeof r=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof r+" instead.")},pt.prototype.concat=function(r,s,h){var v=typeof r=="number"?this.path.concat(r):this.path,S=h?this.scope.concat(h):this.scope;return new pt(this.registry,v,s||null,S,this.errors)},pt.prototype.error=function(r){for(var s=[],h=arguments.length-1;h-- >0;)s[h]=arguments[h+1];var v=""+this.key+s.map((function(S){return"["+S+"]"})).join("");this.errors.push(new Z(v,r))},pt.prototype.checkSubtype=function(r,s){var h=en(r,s);return h&&this.error(h),h};var hn=function(r,s,h){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(var v=0,S=h;v<S.length;v+=1){var T=S[v],N=T[0],R=T[1];this.labels.push(N),this.outputs.push(R)}};function Pn(r,s,h){return r*(1-h)+s*h}hn.parse=function(r,s){if(r.length-1<4)return s.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");var h=s.parse(r[1],1,se);if(!h)return null;var v=[],S=null;s.expectedType&&s.expectedType.kind!=="value"&&(S=s.expectedType);for(var T=1;T<r.length;T+=2){var N=T===1?-1/0:r[T],R=r[T+1],V=T,G=T+1;if(typeof N!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(v.length&&v[v.length-1][0]>=N)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);var K=s.parse(R,G,S);if(!K)return null;S=S||K.type,v.push([N,K])}return new hn(S,h,v)},hn.prototype.evaluate=function(r){var s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);var v=this.input.evaluate(r);if(v<=s[0])return h[0].evaluate(r);var S=s.length;return v>=s[S-1]?h[S-1].evaluate(r):h[Ht(s,v)].evaluate(r)},hn.prototype.eachChild=function(r){r(this.input);for(var s=0,h=this.outputs;s<h.length;s+=1)r(h[s])},hn.prototype.possibleOutputs=function(){var r;return(r=[]).concat.apply(r,this.outputs.map((function(s){return s.possibleOutputs()})))},hn.prototype.serialize=function(){for(var r=["step",this.input.serialize()],s=0;s<this.labels.length;s++)s>0&&r.push(this.labels[s]),r.push(this.outputs[s].serialize());return r};var Hi=Object.freeze({__proto__:null,number:Pn,color:function(r,s,h){return new qt(Pn(r.r,s.r,h),Pn(r.g,s.g,h),Pn(r.b,s.b,h),Pn(r.a,s.a,h))},array:function(r,s,h){return r.map((function(v,S){return Pn(v,s[S],h)}))}}),oa=6/29,ea=3*oa*oa,$i=Math.PI/180,Rd=180/Math.PI;function fl(r){return r>.008856451679035631?Math.pow(r,1/3):r/ea+4/29}function pl(r){return r>oa?r*r*r:ea*(r-4/29)}function Ss(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function Au(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function ml(r){var s=Au(r.r),h=Au(r.g),v=Au(r.b),S=fl((.4124564*s+.3575761*h+.1804375*v)/.95047),T=fl((.2126729*s+.7151522*h+.072175*v)/1);return{l:116*T-16,a:500*(S-T),b:200*(T-fl((.0193339*s+.119192*h+.9503041*v)/1.08883)),alpha:r.a}}function jc(r){var s=(r.l+16)/116,h=isNaN(r.a)?s:s+r.a/500,v=isNaN(r.b)?s:s-r.b/200;return s=1*pl(s),h=.95047*pl(h),v=1.08883*pl(v),new qt(Ss(3.2404542*h-1.5371385*s-.4985314*v),Ss(-.969266*h+1.8760108*s+.041556*v),Ss(.0556434*h-.2040259*s+1.0572252*v),r.alpha)}function gl(r,s,h){var v=s-r;return r+h*(v>180||v<-180?v-360*Math.round(v/360):v)}var jo={forward:ml,reverse:jc,interpolate:function(r,s,h){return{l:Pn(r.l,s.l,h),a:Pn(r.a,s.a,h),b:Pn(r.b,s.b,h),alpha:Pn(r.alpha,s.alpha,h)}}},zl={forward:function(r){var s=ml(r),h=s.l,v=s.a,S=s.b,T=Math.atan2(S,v)*Rd;return{h:T<0?T+360:T,c:Math.sqrt(v*v+S*S),l:h,alpha:r.a}},reverse:function(r){var s=r.h*$i,h=r.c;return jc({l:r.l,a:Math.cos(s)*h,b:Math.sin(s)*h,alpha:r.alpha})},interpolate:function(r,s,h){return{h:gl(r.h,s.h,h),c:Pn(r.c,s.c,h),l:Pn(r.l,s.l,h),alpha:Pn(r.alpha,s.alpha,h)}}},Ac=Object.freeze({__proto__:null,lab:jo,hcl:zl}),ei=function(r,s,h,v,S){this.type=r,this.operator=s,this.interpolation=h,this.input=v,this.labels=[],this.outputs=[];for(var T=0,N=S;T<N.length;T+=1){var R=N[T],V=R[0],G=R[1];this.labels.push(V),this.outputs.push(G)}};function yl(r,s,h,v){var S=v-h,T=r-h;return S===0?0:s===1?T/S:(Math.pow(s,T)-1)/(Math.pow(s,S)-1)}ei.interpolationFactor=function(r,s,h,v){var S=0;if(r.name==="exponential")S=yl(s,r.base,h,v);else if(r.name==="linear")S=yl(s,1,h,v);else if(r.name==="cubic-bezier"){var T=r.controlPoints;S=new x(T[0],T[1],T[2],T[3]).solve(yl(s,1,h,v))}return S},ei.parse=function(r,s){var h=r[0],v=r[1],S=r[2],T=r.slice(3);if(!Array.isArray(v)||v.length===0)return s.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){var N=v[1];if(typeof N!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:N}}else{if(v[0]!=="cubic-bezier")return s.error("Unknown interpolation type "+String(v[0]),1,0);var R=v.slice(1);if(R.length!==4||R.some((function(Ie){return typeof Ie!="number"||Ie<0||Ie>1})))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:R}}if(r.length-1<4)return s.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(!(S=s.parse(S,2,se)))return null;var V=[],G=null;h==="interpolate-hcl"||h==="interpolate-lab"?G=Ye:s.expectedType&&s.expectedType.kind!=="value"&&(G=s.expectedType);for(var K=0;K<T.length;K+=2){var ae=T[K],de=T[K+1],le=K+3,fe=K+4;if(typeof ae!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(V.length&&V[V.length-1][0]>=ae)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);var Me=s.parse(de,fe,G);if(!Me)return null;G=G||Me.type,V.push([ae,Me])}return G.kind==="number"||G.kind==="color"||G.kind==="array"&&G.itemType.kind==="number"&&typeof G.N=="number"?new ei(G,h,v,S,V):s.error("Type "+It(G)+" is not interpolatable.")},ei.prototype.evaluate=function(r){var s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(r);var v=this.input.evaluate(r);if(v<=s[0])return h[0].evaluate(r);var S=s.length;if(v>=s[S-1])return h[S-1].evaluate(r);var T=Ht(s,v),N=s[T],R=s[T+1],V=ei.interpolationFactor(this.interpolation,v,N,R),G=h[T].evaluate(r),K=h[T+1].evaluate(r);return this.operator==="interpolate"?Hi[this.type.kind.toLowerCase()](G,K,V):this.operator==="interpolate-hcl"?zl.reverse(zl.interpolate(zl.forward(G),zl.forward(K),V)):jo.reverse(jo.interpolate(jo.forward(G),jo.forward(K),V))},ei.prototype.eachChild=function(r){r(this.input);for(var s=0,h=this.outputs;s<h.length;s+=1)r(h[s])},ei.prototype.possibleOutputs=function(){var r;return(r=[]).concat.apply(r,this.outputs.map((function(s){return s.possibleOutputs()})))},ei.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var s=[this.operator,r,this.input.serialize()],h=0;h<this.labels.length;h++)s.push(this.labels[h],this.outputs[h].serialize());return s};var Ao=function(r,s){this.type=r,this.args=s};Ao.parse=function(r,s){if(r.length<2)return s.error("Expectected at least one argument.");var h=null,v=s.expectedType;v&&v.kind!=="value"&&(h=v);for(var S=[],T=0,N=r.slice(1);T<N.length;T+=1){var R=N[T],V=s.parse(R,1+S.length,h,void 0,{typeAnnotation:"omit"});if(!V)return null;h=h||V.type,S.push(V)}var G=v&&S.some((function(K){return en(v,K.type)}));return new Ao(G?Be:h,S)},Ao.prototype.evaluate=function(r){for(var s,h=null,v=0,S=0,T=this.args;S<T.length&&(v++,(h=T[S].evaluate(r))&&h instanceof zn&&!h.available&&(s||(s=h.name),h=null,v===this.args.length&&(h=s)),h===null);S+=1);return h},Ao.prototype.eachChild=function(r){this.args.forEach(r)},Ao.prototype.possibleOutputs=function(){var r;return(r=[]).concat.apply(r,this.args.map((function(s){return s.possibleOutputs()})))},Ao.prototype.serialize=function(){var r=["coalesce"];return this.eachChild((function(s){r.push(s.serialize())})),r};var Ys=function(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s};Ys.prototype.evaluate=function(r){return this.result.evaluate(r)},Ys.prototype.eachChild=function(r){for(var s=0,h=this.bindings;s<h.length;s+=1)r(h[s][1]);r(this.result)},Ys.parse=function(r,s){if(r.length<4)return s.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var h=[],v=1;v<r.length-1;v+=2){var S=r[v];if(typeof S!="string")return s.error("Expected string, but found "+typeof S+" instead.",v);if(/[^a-zA-Z0-9_]/.test(S))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);var T=s.parse(r[v+1],v+1);if(!T)return null;h.push([S,T])}var N=s.parse(r[r.length-1],r.length-1,s.expectedType,h);return N?new Ys(h,N):null},Ys.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Ys.prototype.serialize=function(){for(var r=["let"],s=0,h=this.bindings;s<h.length;s+=1){var v=h[s],S=v[0],T=v[1];r.push(S,T.serialize())}return r.push(this.result.serialize()),r};var Es=function(r,s,h){this.type=r,this.index=s,this.input=h};Es.parse=function(r,s){if(r.length!==3)return s.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var h=s.parse(r[1],1,se),v=s.parse(r[2],2,yt(s.expectedType||Be));if(!h||!v)return null;var S=v.type;return new Es(S.itemType,h,v)},Es.prototype.evaluate=function(r){var s=this.index.evaluate(r),h=this.input.evaluate(r);if(s<0)throw new Hn("Array index out of bounds: "+s+" < 0.");if(s>=h.length)throw new Hn("Array index out of bounds: "+s+" > "+(h.length-1)+".");if(s!==Math.floor(s))throw new Hn("Array index must be an integer, but found "+s+" instead.");return h[s]},Es.prototype.eachChild=function(r){r(this.index),r(this.input)},Es.prototype.possibleOutputs=function(){return[void 0]},Es.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Cs=function(r,s){this.type=Ne,this.needle=r,this.haystack=s};Cs.parse=function(r,s){if(r.length!==3)return s.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var h,v=s.parse(r[1],1,Be),S=s.parse(r[2],2,Be);return v&&S?(h=v.type).kind!=="boolean"&&h.kind!=="string"&&h.kind!=="number"&&h.kind!=="null"&&h.kind!=="value"?s.error("Expected first argument to be of type boolean, string, number or null, but found "+It(v.type)+" instead"):new Cs(v,S):null},Cs.prototype.evaluate=function(r){var s=this.needle.evaluate(r),h=this.haystack.evaluate(r);if(!s||!h)return!1;if(!(function(v){return typeof v=="boolean"||typeof v=="string"||typeof v=="number"})(s))throw new Hn("Expected first argument to be of type boolean, string or number, but found "+It(Bn(s))+" instead.");if(!(function(v){return Array.isArray(v)||typeof v=="string"})(h))throw new Hn("Expected second argument to be of type array or string, but found "+It(Bn(h))+" instead.");return h.indexOf(s)>=0},Cs.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},Cs.prototype.possibleOutputs=function(){return[!0,!1]},Cs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var vl=function(r,s,h,v,S,T){this.inputType=r,this.type=s,this.input=h,this.cases=v,this.outputs=S,this.otherwise=T};vl.parse=function(r,s){if(r.length<5)return s.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return s.error("Expected an even number of arguments.");var h,v;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(var S={},T=[],N=2;N<r.length-1;N+=2){var R=r[N],V=r[N+1];Array.isArray(R)||(R=[R]);var G=s.concat(N);if(R.length===0)return G.error("Expected at least one branch label.");for(var K=0,ae=R;K<ae.length;K+=1){var de=ae[K];if(typeof de!="number"&&typeof de!="string")return G.error("Branch labels must be numbers or strings.");if(typeof de=="number"&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return G.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof de=="number"&&Math.floor(de)!==de)return G.error("Numeric branch labels must be integer values.");if(h){if(G.checkSubtype(h,Bn(de)))return null}else h=Bn(de);if(S[String(de)]!==void 0)return G.error("Branch labels must be unique.");S[String(de)]=T.length}var le=s.parse(V,N,v);if(!le)return null;v=v||le.type,T.push(le)}var fe=s.parse(r[1],1,Be);if(!fe)return null;var Me=s.parse(r[r.length-1],r.length-1,v);return Me?fe.type.kind!=="value"&&s.concat(1).checkSubtype(h,fe.type)?null:new vl(h,v,fe,S,T,Me):null},vl.prototype.evaluate=function(r){var s=this.input.evaluate(r);return(Bn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)},vl.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},vl.prototype.possibleOutputs=function(){var r;return(r=[]).concat.apply(r,this.outputs.map((function(s){return s.possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},vl.prototype.serialize=function(){for(var r=this,s=["match",this.input.serialize()],h=[],v={},S=0,T=Object.keys(this.cases).sort();S<T.length;S+=1){var N=T[S];(ae=v[this.cases[N]])===void 0?(v[this.cases[N]]=h.length,h.push([this.cases[N],[N]])):h[ae][1].push(N)}for(var R=function(le){return r.inputType.kind==="number"?Number(le):le},V=0,G=h;V<G.length;V+=1){var K=G[V],ae=K[0],de=K[1];de.length===1?s.push(R(de[0])):s.push(de.map(R)),s.push(this.outputs[outputIndex$1].serialize())}return s.push(this.otherwise.serialize()),s};var ha=function(r,s,h){this.type=r,this.branches=s,this.otherwise=h};function xl(r,s){return r==="=="||r==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Nu(r,s,h,v){return v.compare(s,h)===0}function Ts(r,s,h){var v=r!=="=="&&r!=="!=";return(function(){function S(T,N,R){this.type=Ne,this.lhs=T,this.rhs=N,this.collator=R,this.hasUntypedArgument=T.type.kind==="value"||N.type.kind==="value"}return S.parse=function(T,N){if(T.length!==3&&T.length!==4)return N.error("Expected two or three arguments.");var R=T[0],V=N.parse(T[1],1,Be);if(!V)return null;if(!xl(R,V.type))return N.concat(1).error('"'+R+`" comparisons are not supported for type '`+It(V.type)+"'.");var G=N.parse(T[2],2,Be);if(!G)return null;if(!xl(R,G.type))return N.concat(2).error('"'+R+`" comparisons are not supported for type '`+It(G.type)+"'.");if(V.type.kind!==G.type.kind&&V.type.kind!=="value"&&G.type.kind!=="value")return N.error("Cannot compare types '"+It(V.type)+"' and '"+It(G.type)+"'.");v&&(V.type.kind==="value"&&G.type.kind!=="value"?V=new lr(G.type,[V]):V.type.kind!=="value"&&G.type.kind==="value"&&(G=new lr(V.type,[G])));var K=null;if(T.length===4){if(V.type.kind!=="string"&&G.type.kind!=="string"&&V.type.kind!=="value"&&G.type.kind!=="value")return N.error("Cannot use collator to compare non-string types.");if(!(K=N.parse(T[3],3,nt)))return null}return new S(V,G,K)},S.prototype.evaluate=function(T){var N=this.lhs.evaluate(T),R=this.rhs.evaluate(T);if(v&&this.hasUntypedArgument){var V=Bn(N),G=Bn(R);if(V.kind!==G.kind||V.kind!=="string"&&V.kind!=="number")throw new Hn('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+V.kind+", "+G.kind+") instead.")}if(this.collator&&!v&&this.hasUntypedArgument){var K=Bn(N),ae=Bn(R);if(K.kind!=="string"||ae.kind!=="string")return s(T,N,R)}return this.collator?h(T,N,R,this.collator.evaluate(T)):s(T,N,R)},S.prototype.eachChild=function(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)},S.prototype.possibleOutputs=function(){return[!0,!1]},S.prototype.serialize=function(){var T=[r];return this.eachChild((function(N){T.push(N.serialize())})),T},S})()}ha.parse=function(r,s){if(r.length<4)return s.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return s.error("Expected an odd number of arguments.");var h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);for(var v=[],S=1;S<r.length-1;S+=2){var T=s.parse(r[S],S,Ne);if(!T)return null;var N=s.parse(r[S+1],S+1,h);if(!N)return null;v.push([T,N]),h=h||N.type}var R=s.parse(r[r.length-1],r.length-1,h);return R?new ha(h,v,R):null},ha.prototype.evaluate=function(r){for(var s=0,h=this.branches;s<h.length;s+=1){var v=h[s],S=v[0],T=v[1];if(S.evaluate(r))return T.evaluate(r)}return this.otherwise.evaluate(r)},ha.prototype.eachChild=function(r){for(var s=0,h=this.branches;s<h.length;s+=1){var v=h[s],S=v[0],T=v[1];r(S),r(T)}r(this.otherwise)},ha.prototype.possibleOutputs=function(){var r;return(r=[]).concat.apply(r,this.branches.map((function(s){return s[0],s[1].possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},ha.prototype.serialize=function(){var r=["case"];return this.eachChild((function(s){r.push(s.serialize())})),r};var sg=Ts("==",(function(r,s,h){return s===h}),Nu),Qh=Ts("!=",(function(r,s,h){return s!==h}),(function(r,s,h,v){return!Nu(0,s,h,v)})),Jh=Ts("<",(function(r,s,h){return s<h}),(function(r,s,h,v){return v.compare(s,h)<0})),Mu=Ts(">",(function(r,s,h){return s>h}),(function(r,s,h,v){return v.compare(s,h)>0})),Ld=Ts("<=",(function(r,s,h){return s<=h}),(function(r,s,h,v){return v.compare(s,h)<=0})),hp=Ts(">=",(function(r,s,h){return s>=h}),(function(r,s,h,v){return v.compare(s,h)>=0})),Bl=function(r,s,h,v,S){this.type=je,this.number=r,this.locale=s,this.currency=h,this.minFractionDigits=v,this.maxFractionDigits=S};Bl.parse=function(r,s){if(r.length!==3)return s.error("Expected two arguments.");var h=s.parse(r[1],1,se);if(!h)return null;var v=r[2];if(typeof v!="object"||Array.isArray(v))return s.error("NumberFormat options argument must be an object.");var S=null;if(v.locale&&!(S=s.parse(v.locale,1,je)))return null;var T=null;if(v.currency&&!(T=s.parse(v.currency,1,je)))return null;var N=null;if(v["min-fraction-digits"]&&!(N=s.parse(v["min-fraction-digits"],1,se)))return null;var R=null;return v["max-fraction-digits"]&&!(R=s.parse(v["max-fraction-digits"],1,se))?null:new Bl(h,S,T,N,R)},Bl.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},Bl.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},Bl.prototype.possibleOutputs=function(){return[void 0]},Bl.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var Fl=function(r){this.type=se,this.input=r};Fl.parse=function(r,s){if(r.length!==2)return s.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var h=s.parse(r[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error("Expected argument of type string or array, but found "+It(h.type)+" instead."):new Fl(h):null},Fl.prototype.evaluate=function(r){var s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Hn("Expected value to be of type string or array, but found "+It(Bn(s))+" instead.")},Fl.prototype.eachChild=function(r){r(this.input)},Fl.prototype.possibleOutputs=function(){return[void 0]},Fl.prototype.serialize=function(){var r=["length"];return this.eachChild((function(s){r.push(s.serialize())})),r};var Nc={"==":sg,"!=":Qh,">":Mu,"<":Jh,">=":hp,"<=":Ld,array:lr,at:Es,boolean:lr,case:ha,coalesce:Ao,collator:To,format:Kr,image:Jn,in:Cs,interpolate:ei,"interpolate-hcl":ei,"interpolate-lab":ei,length:Fl,let:Ys,literal:pr,match:vl,number:lr,"number-format":Bl,object:lr,step:hn,string:lr,"to-boolean":aa,"to-color":aa,"to-number":aa,"to-string":aa,var:qe};function zd(r,s){var h=s[0],v=s[1],S=s[2],T=s[3];h=h.evaluate(r),v=v.evaluate(r),S=S.evaluate(r);var N=T?T.evaluate(r):1,R=Lr(h,v,S,N);if(R)throw new Hn(R);return new qt(h/255*N,v/255*N,S/255*N,N)}function fp(r,s){return r in s}function ef(r,s){var h=s[r];return h===void 0?null:h}function Ul(r){return{type:r}}function tf(r){return{result:"success",value:r}}function Mc(r){return{result:"error",value:r}}function Vl(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function pp(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function ui(r){return!!r.expression&&r.expression.interpolated}function di(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function ql(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Bd(r){return r}function Dc(r,s,h){return r!==void 0?r:s!==void 0?s:h!==void 0?h:void 0}function mp(r,s,h,v,S){return Dc(typeof h===S?v[h]:void 0,r.default,s.default)}function lg(r,s,h){if(di(h)!=="number")return Dc(r.default,s.default);var v=r.stops.length;if(v===1||h<=r.stops[0][0])return r.stops[0][1];if(h>=r.stops[v-1][0])return r.stops[v-1][1];var S=Ht(r.stops.map((function(T){return T[0]})),h);return r.stops[S][1]}function Fd(r,s,h){var v=r.base!==void 0?r.base:1;if(di(h)!=="number")return Dc(r.default,s.default);var S=r.stops.length;if(S===1||h<=r.stops[0][0])return r.stops[0][1];if(h>=r.stops[S-1][0])return r.stops[S-1][1];var T=Ht(r.stops.map((function(ae){return ae[0]})),h),N=(function(ae,de,le,fe){var Me=fe-le,Ie=ae-le;return Me===0?0:de===1?Ie/Me:(Math.pow(de,Ie)-1)/(Math.pow(de,Me)-1)})(h,v,r.stops[T][0],r.stops[T+1][0]),R=r.stops[T][1],V=r.stops[T+1][1],G=Hi[s.type]||Bd;if(r.colorSpace&&r.colorSpace!=="rgb"){var K=Ac[r.colorSpace];G=function(ae,de){return K.reverse(K.interpolate(K.forward(ae),K.forward(de),N))}}return typeof R.evaluate=="function"?{evaluate:function(){for(var ae=[],de=arguments.length;de--;)ae[de]=arguments[de];var le=R.evaluate.apply(void 0,ae),fe=V.evaluate.apply(void 0,ae);if(le!==void 0&&fe!==void 0)return G(le,fe,N)}}:G(R,V,N)}function gp(r,s,h){return s.type==="color"?h=qt.parse(h):s.type==="formatted"?h=kn.fromString(h.toString()):s.type==="resolvedImage"?h=zn.fromString(h.toString()):di(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0),Dc(h,r.default,s.default)}Ji.register(Nc,{error:[{kind:"error"},[je],function(r,s){var h=s[0];throw new Hn(h.evaluate(r))}],typeof:[je,[Be],function(r,s){return It(Bn(s[0].evaluate(r)))}],"to-rgba":[yt(se,4),[Ye],function(r,s){return s[0].evaluate(r).toArray()}],rgb:[Ye,[se,se,se],zd],rgba:[Ye,[se,se,se,se],zd],has:{type:Ne,overloads:[[[je],function(r,s){return fp(s[0].evaluate(r),r.properties())}],[[je,He],function(r,s){var h=s[0],v=s[1];return fp(h.evaluate(r),v.evaluate(r))}]]},get:{type:Be,overloads:[[[je],function(r,s){return ef(s[0].evaluate(r),r.properties())}],[[je,He],function(r,s){var h=s[0],v=s[1];return ef(h.evaluate(r),v.evaluate(r))}]]},"feature-state":[Be,[je],function(r,s){return ef(s[0].evaluate(r),r.featureState||{})}],properties:[He,[],function(r){return r.properties()}],"geometry-type":[je,[],function(r){return r.geometryType()}],id:[Be,[],function(r){return r.id()}],zoom:[se,[],function(r){return r.globals.zoom}],"heatmap-density":[se,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[se,[],function(r){return r.globals.lineProgress||0}],accumulated:[Be,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[se,Ul(se),function(r,s){for(var h=0,v=0,S=s;v<S.length;v+=1)h+=S[v].evaluate(r);return h}],"*":[se,Ul(se),function(r,s){for(var h=1,v=0,S=s;v<S.length;v+=1)h*=S[v].evaluate(r);return h}],"-":{type:se,overloads:[[[se,se],function(r,s){var h=s[0],v=s[1];return h.evaluate(r)-v.evaluate(r)}],[[se],function(r,s){return-s[0].evaluate(r)}]]},"/":[se,[se,se],function(r,s){var h=s[0],v=s[1];return h.evaluate(r)/v.evaluate(r)}],"%":[se,[se,se],function(r,s){var h=s[0],v=s[1];return h.evaluate(r)%v.evaluate(r)}],ln2:[se,[],function(){return Math.LN2}],pi:[se,[],function(){return Math.PI}],e:[se,[],function(){return Math.E}],"^":[se,[se,se],function(r,s){var h=s[0],v=s[1];return Math.pow(h.evaluate(r),v.evaluate(r))}],sqrt:[se,[se],function(r,s){var h=s[0];return Math.sqrt(h.evaluate(r))}],log10:[se,[se],function(r,s){var h=s[0];return Math.log(h.evaluate(r))/Math.LN10}],ln:[se,[se],function(r,s){var h=s[0];return Math.log(h.evaluate(r))}],log2:[se,[se],function(r,s){var h=s[0];return Math.log(h.evaluate(r))/Math.LN2}],sin:[se,[se],function(r,s){var h=s[0];return Math.sin(h.evaluate(r))}],cos:[se,[se],function(r,s){var h=s[0];return Math.cos(h.evaluate(r))}],tan:[se,[se],function(r,s){var h=s[0];return Math.tan(h.evaluate(r))}],asin:[se,[se],function(r,s){var h=s[0];return Math.asin(h.evaluate(r))}],acos:[se,[se],function(r,s){var h=s[0];return Math.acos(h.evaluate(r))}],atan:[se,[se],function(r,s){var h=s[0];return Math.atan(h.evaluate(r))}],min:[se,Ul(se),function(r,s){return Math.min.apply(Math,s.map((function(h){return h.evaluate(r)})))}],max:[se,Ul(se),function(r,s){return Math.max.apply(Math,s.map((function(h){return h.evaluate(r)})))}],abs:[se,[se],function(r,s){var h=s[0];return Math.abs(h.evaluate(r))}],round:[se,[se],function(r,s){var h=s[0].evaluate(r);return h<0?-Math.round(-h):Math.round(h)}],floor:[se,[se],function(r,s){var h=s[0];return Math.floor(h.evaluate(r))}],ceil:[se,[se],function(r,s){var h=s[0];return Math.ceil(h.evaluate(r))}],"filter-==":[Ne,[je,Be],function(r,s){var h=s[0],v=s[1];return r.properties()[h.value]===v.value}],"filter-id-==":[Ne,[Be],function(r,s){var h=s[0];return r.id()===h.value}],"filter-type-==":[Ne,[je],function(r,s){var h=s[0];return r.geometryType()===h.value}],"filter-<":[Ne,[je,Be],function(r,s){var h=s[0],v=s[1],S=r.properties()[h.value],T=v.value;return typeof S==typeof T&&S<T}],"filter-id-<":[Ne,[Be],function(r,s){var h=s[0],v=r.id(),S=h.value;return typeof v==typeof S&&v<S}],"filter->":[Ne,[je,Be],function(r,s){var h=s[0],v=s[1],S=r.properties()[h.value],T=v.value;return typeof S==typeof T&&S>T}],"filter-id->":[Ne,[Be],function(r,s){var h=s[0],v=r.id(),S=h.value;return typeof v==typeof S&&v>S}],"filter-<=":[Ne,[je,Be],function(r,s){var h=s[0],v=s[1],S=r.properties()[h.value],T=v.value;return typeof S==typeof T&&S<=T}],"filter-id-<=":[Ne,[Be],function(r,s){var h=s[0],v=r.id(),S=h.value;return typeof v==typeof S&&v<=S}],"filter->=":[Ne,[je,Be],function(r,s){var h=s[0],v=s[1],S=r.properties()[h.value],T=v.value;return typeof S==typeof T&&S>=T}],"filter-id->=":[Ne,[Be],function(r,s){var h=s[0],v=r.id(),S=h.value;return typeof v==typeof S&&v>=S}],"filter-has":[Ne,[Be],function(r,s){return s[0].value in r.properties()}],"filter-has-id":[Ne,[],function(r){return r.id()!==null}],"filter-type-in":[Ne,[yt(je)],function(r,s){return s[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[Ne,[yt(Be)],function(r,s){return s[0].value.indexOf(r.id())>=0}],"filter-in-small":[Ne,[je,yt(Be)],function(r,s){var h=s[0];return s[1].value.indexOf(r.properties()[h.value])>=0}],"filter-in-large":[Ne,[je,yt(Be)],function(r,s){var h=s[0],v=s[1];return(function(S,T,N,R){for(;N<=R;){var V=N+R>>1;if(T[V]===S)return!0;T[V]>S?R=V-1:N=V+1}return!1})(r.properties()[h.value],v.value,0,v.value.length-1)}],all:{type:Ne,overloads:[[[Ne,Ne],function(r,s){var h=s[0],v=s[1];return h.evaluate(r)&&v.evaluate(r)}],[Ul(Ne),function(r,s){for(var h=0,v=s;h<v.length;h+=1)if(!v[h].evaluate(r))return!1;return!0}]]},any:{type:Ne,overloads:[[[Ne,Ne],function(r,s){var h=s[0],v=s[1];return h.evaluate(r)||v.evaluate(r)}],[Ul(Ne),function(r,s){for(var h=0,v=s;h<v.length;h+=1)if(v[h].evaluate(r))return!0;return!1}]]},"!":[Ne,[Ne],function(r,s){return!s[0].evaluate(r)}],"is-supported-script":[Ne,[je],function(r,s){var h=s[0],v=r.globals&&r.globals.isSupportedScript;return!v||v(h.evaluate(r))}],upcase:[je,[je],function(r,s){return s[0].evaluate(r).toUpperCase()}],downcase:[je,[je],function(r,s){return s[0].evaluate(r).toLowerCase()}],concat:[je,Ul(Be),function(r,s){return s.map((function(h){return nr(h.evaluate(r))})).join("")}],"resolved-locale":[je,[nt],function(r,s){return s[0].evaluate(r).resolvedLocale()}]});var Du=function(r,s){this.expression=r,this._warningHistory={},this._evaluator=new uo,this._defaultValue=s?(function(h){return h.type==="color"&&ql(h.default)?new qt(0,0,0,0):h.type==="color"?qt.parse(h.default)||null:h.default===void 0?null:h.default})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null};function Ud(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Nc}function Vd(r,s){var h=new pt(Nc,[],s?(function(S){var T={color:Ye,string:je,number:se,enum:je,boolean:Ne,formatted:xt,resolvedImage:Ot};return S.type==="array"?yt(T[S.value]||Be,S.length):T[S.type]})(s):void 0),v=h.parse(r,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?tf(new Du(v,s)):Mc(h.errors)}Du.prototype.evaluateWithoutErrorHandling=function(r,s,h,v,S){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)},Du.prototype.evaluate=function(r,s,h,v,S){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=S||null;try{var T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Hn("Expected value to be one of "+Object.keys(this._enumValues).map((function(N){return JSON.stringify(N)})).join(", ")+", but found "+JSON.stringify(T)+" instead.");return T}catch(N){return this._warningHistory[N.message]||(this._warningHistory[N.message]=!0,typeof console<"u"&&console.warn(N.message)),this._defaultValue}};var Pc=function(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!ce(s.expression)};Pc.prototype.evaluateWithoutErrorHandling=function(r,s,h,v,S){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,v,S)},Pc.prototype.evaluate=function(r,s,h,v,S){return this._styleExpression.evaluate(r,s,h,v,S)};var Ic=function(r,s,h,v){this.kind=r,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!ce(s.expression),this.interpolationType=v};function qd(r,s){if((r=Vd(r,s)).result==="error")return r;var h=r.value.expression,v=ko(h);if(!v&&!Vl(s))return Mc([new Z("","data expressions not supported")]);var S=Se(h,["zoom"]);if(!S&&!pp(s))return Mc([new Z("","zoom expressions not supported")]);var T=(function R(V){var G=null;if(V instanceof Ys)G=R(V.result);else if(V instanceof Ao)for(var K=0,ae=V.args;K<ae.length;K+=1){var de=ae[K];if(G=R(de))break}else(V instanceof hn||V instanceof ei)&&V.input instanceof Ji&&V.input.name==="zoom"&&(G=V);return G instanceof Z||V.eachChild((function(le){var fe=R(le);fe instanceof Z?G=fe:!G&&fe?G=new Z("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):G&&fe&&G!==fe&&(G=new Z("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),G})(h);if(!T&&!S)return Mc([new Z("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(T instanceof Z)return Mc([T]);if(T instanceof ei&&!ui(s))return Mc([new Z("",'"interpolate" expressions cannot be used with this property')]);if(!T)return tf(new Pc(v?"constant":"source",r.value));var N=T instanceof ei?T.interpolation:void 0;return tf(new Ic(v?"camera":"composite",r.value,T.labels,N))}Ic.prototype.evaluateWithoutErrorHandling=function(r,s,h,v,S){return this._styleExpression.evaluateWithoutErrorHandling(r,s,h,v,S)},Ic.prototype.evaluate=function(r,s,h,v,S){return this._styleExpression.evaluate(r,s,h,v,S)},Ic.prototype.interpolationFactor=function(r,s,h){return this.interpolationType?ei.interpolationFactor(this.interpolationType,r,s,h):0};var Oc=function(r,s){this._parameters=r,this._specification=s,eo(this,(function h(v,S){var T,N,R,V=S.type==="color",G=v.stops&&typeof v.stops[0][0]=="object",K=G||v.property!==void 0,ae=G||!K,de=v.type||(ui(S)?"exponential":"interval");if(V&&((v=eo({},v)).stops&&(v.stops=v.stops.map((function(sn){return[sn[0],qt.parse(sn[1])]}))),v.default?v.default=qt.parse(v.default):v.default=qt.parse(S.default)),v.colorSpace&&v.colorSpace!=="rgb"&&!Ac[v.colorSpace])throw new Error("Unknown color space: "+v.colorSpace);if(de==="exponential")T=Fd;else if(de==="interval")T=lg;else if(de==="categorical"){T=mp,N=Object.create(null);for(var le=0,fe=v.stops;le<fe.length;le+=1){var Me=fe[le];N[Me[0]]=Me[1]}R=typeof v.stops[0][0]}else{if(de!=="identity")throw new Error('Unknown function type "'+de+'"');T=gp}if(G){for(var Ie={},Ue=[],at=0;at<v.stops.length;at++){var ot=v.stops[at],ct=ot[0].zoom;Ie[ct]===void 0&&(Ie[ct]={zoom:ct,type:v.type,property:v.property,default:v.default,stops:[]},Ue.push(ct)),Ie[ct].stops.push([ot[0].value,ot[1]])}for(var wt=[],jt=0,Ct=Ue;jt<Ct.length;jt+=1){var Jt=Ct[jt];wt.push([Ie[Jt].zoom,h(Ie[Jt],S)])}var nn={name:"linear"};return{kind:"composite",interpolationType:nn,interpolationFactor:ei.interpolationFactor.bind(void 0,nn),zoomStops:wt.map((function(sn){return sn[0]})),evaluate:function(sn,cn){var rn=sn.zoom;return Fd({stops:wt,base:v.base},S,rn).evaluate(rn,cn)}}}if(ae){var ln=de==="exponential"?{name:"exponential",base:v.base!==void 0?v.base:1}:null;return{kind:"camera",interpolationType:ln,interpolationFactor:ei.interpolationFactor.bind(void 0,ln),zoomStops:v.stops.map((function(sn){return sn[0]})),evaluate:function(sn){var cn=sn.zoom;return T(v,S,cn,N,R)}}}return{kind:"source",evaluate:function(sn,cn){var rn=cn&&cn.properties?cn.properties[v.property]:void 0;return rn===void 0?Dc(v.default,S.default):T(v,S,rn,N,R)}}})(this._parameters,this._specification))};function as(r){var s=r.key,h=r.value,v=r.valueSpec||{},S=r.objectElementValidators||{},T=r.style,N=r.styleSpec,R=[],V=di(h);if(V!=="object")return[new Yt(s,h,"object expected, "+V+" found")];for(var G in h){var K=G.split(".")[0],ae=v[K]||v["*"],de=void 0;if(S[K])de=S[K];else if(v[K])de=ho;else if(S["*"])de=S["*"];else{if(!v["*"]){R.push(new Yt(s,h[G],'unknown property "'+G+'"'));continue}de=ho}R=R.concat(de({key:(s&&s+".")+G,value:h[G],valueSpec:ae,style:T,styleSpec:N,object:h,objectKey:G},h))}for(var le in v)S[le]||v[le].required&&v[le].default===void 0&&h[le]===void 0&&R.push(new Yt(s,h,'missing required property "'+le+'"'));return R}function Hd(r){var s=r.value,h=r.valueSpec,v=r.style,S=r.styleSpec,T=r.key,N=r.arrayElementValidator||ho;if(di(s)!=="array")return[new Yt(T,s,"array expected, "+di(s)+" found")];if(h.length&&s.length!==h.length)return[new Yt(T,s,"array length "+h.length+" expected, length "+s.length+" found")];if(h["min-length"]&&s.length<h["min-length"])return[new Yt(T,s,"array length at least "+h["min-length"]+" expected, length "+s.length+" found")];var R={type:h.value,values:h.values};S.$version<7&&(R.function=h.function),di(h.value)==="object"&&(R=h.value);for(var V=[],G=0;G<s.length;G++)V=V.concat(N({array:s,arrayIndex:G,value:s[G],valueSpec:R,style:v,styleSpec:S,key:T+"["+G+"]"}));return V}function bl(r){var s=r.key,h=r.value,v=r.valueSpec,S=di(h);return S==="number"&&h!=h&&(S="NaN"),S!=="number"?[new Yt(s,h,"number expected, "+S+" found")]:"minimum"in v&&h<v.minimum?[new Yt(s,h,h+" is less than the minimum value "+v.minimum)]:"maximum"in v&&h>v.maximum?[new Yt(s,h,h+" is greater than the maximum value "+v.maximum)]:[]}function yp(r){var s,h,v,S=r.valueSpec,T=gi(r.value.type),N={},R=T!=="categorical"&&r.value.property===void 0,V=!R,G=di(r.value.stops)==="array"&&di(r.value.stops[0])==="array"&&di(r.value.stops[0][0])==="object",K=as({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(le){if(T==="identity")return[new Yt(le.key,le.value,'identity function may not have a "stops" property')];var fe=[],Me=le.value;return fe=fe.concat(Hd({key:le.key,value:Me,valueSpec:le.valueSpec,style:le.style,styleSpec:le.styleSpec,arrayElementValidator:ae})),di(Me)==="array"&&Me.length===0&&fe.push(new Yt(le.key,Me,"array must have at least one stop")),fe},default:function(le){return ho({key:le.key,value:le.value,valueSpec:S,style:le.style,styleSpec:le.styleSpec})}}});return T==="identity"&&R&&K.push(new Yt(r.key,r.value,'missing required property "property"')),T==="identity"||r.value.stops||K.push(new Yt(r.key,r.value,'missing required property "stops"')),T==="exponential"&&r.valueSpec.expression&&!ui(r.valueSpec)&&K.push(new Yt(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(V&&!Vl(r.valueSpec)?K.push(new Yt(r.key,r.value,"property functions not supported")):R&&!pp(r.valueSpec)&&K.push(new Yt(r.key,r.value,"zoom functions not supported"))),T!=="categorical"&&!G||r.value.property!==void 0||K.push(new Yt(r.key,r.value,'"property" property is required')),K;function ae(le){var fe=[],Me=le.value,Ie=le.key;if(di(Me)!=="array")return[new Yt(Ie,Me,"array expected, "+di(Me)+" found")];if(Me.length!==2)return[new Yt(Ie,Me,"array length 2 expected, length "+Me.length+" found")];if(G){if(di(Me[0])!=="object")return[new Yt(Ie,Me,"object expected, "+di(Me[0])+" found")];if(Me[0].zoom===void 0)return[new Yt(Ie,Me,"object stop key must have zoom")];if(Me[0].value===void 0)return[new Yt(Ie,Me,"object stop key must have value")];if(v&&v>gi(Me[0].zoom))return[new Yt(Ie,Me[0].zoom,"stop zoom values must appear in ascending order")];gi(Me[0].zoom)!==v&&(v=gi(Me[0].zoom),h=void 0,N={}),fe=fe.concat(as({key:Ie+"[0]",value:Me[0],valueSpec:{zoom:{}},style:le.style,styleSpec:le.styleSpec,objectElementValidators:{zoom:bl,value:de}}))}else fe=fe.concat(de({key:Ie+"[0]",value:Me[0],style:le.style,styleSpec:le.styleSpec},Me));return Ud(Hr(Me[1]))?fe.concat([new Yt(Ie+"[1]",Me[1],"expressions are not allowed in function stops.")]):fe.concat(ho({key:Ie+"[1]",value:Me[1],valueSpec:S,style:le.style,styleSpec:le.styleSpec}))}function de(le,fe){var Me=di(le.value),Ie=gi(le.value),Ue=le.value!==null?le.value:fe;if(s){if(Me!==s)return[new Yt(le.key,Ue,Me+" stop domain type must match previous stop domain type "+s)]}else s=Me;if(Me!=="number"&&Me!=="string"&&Me!=="boolean")return[new Yt(le.key,Ue,"stop domain value must be a number, string, or boolean")];if(Me!=="number"&&T!=="categorical"){var at="number expected, "+Me+" found";return Vl(S)&&T===void 0&&(at+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yt(le.key,Ue,at)]}return T!=="categorical"||Me!=="number"||isFinite(Ie)&&Math.floor(Ie)===Ie?T!=="categorical"&&Me==="number"&&h!==void 0&&Ie<h?[new Yt(le.key,Ue,"stop domain values must appear in ascending order")]:(h=Ie,T==="categorical"&&Ie in N?[new Yt(le.key,Ue,"stop domain values must be unique")]:(N[Ie]=!0,[])):[new Yt(le.key,Ue,"integer expected, found "+Ie)]}}function Hl(r){var s=(r.expressionContext==="property"?qd:Vd)(Hr(r.value),r.valueSpec);if(s.result==="error")return s.value.map((function(v){return new Yt(""+r.key+v.key,r.value,v.message)}));var h=s.value.expression||s.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&h.possibleOutputs().indexOf(void 0)!==-1)return[new Yt(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ce(h))return[new Yt(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!ce(h))return[new Yt(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Se(h,["zoom","feature-state"]))return[new Yt(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!ko(h))return[new Yt(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Pu(r){var s=r.key,h=r.value,v=r.valueSpec,S=[];return Array.isArray(v.values)?v.values.indexOf(gi(h))===-1&&S.push(new Yt(s,h,"expected one of ["+v.values.join(", ")+"], "+JSON.stringify(h)+" found")):Object.keys(v.values).indexOf(gi(h))===-1&&S.push(new Yt(s,h,"expected one of ["+Object.keys(v.values).join(", ")+"], "+JSON.stringify(h)+" found")),S}function Iu(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&Array.isArray(r[2]);case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var s=0,h=r.slice(1);s<h.length;s+=1){var v=h[s];if(!Iu(v)&&typeof v!="boolean")return!1}return!0;default:return!0}}Oc.deserialize=function(r){return new Oc(r._parameters,r._specification)},Oc.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var nf={type:"boolean",default:!1};function Ou(r){if(r==null)return function(){return!0};Iu(r)||(r=Ru(r));var s=Vd(r,nf);if(s.result==="error")throw new Error(s.value.map((function(h){return h.key+": "+h.message})).join(", "));return function(h,v){return s.value.evaluate(h,v)}}function Rc(r,s){return r<s?-1:r>s?1:0}function Ru(r){if(!r)return!0;var s,h=r[0];return r.length<=1?h!=="any":h==="=="?$d(r[1],r[2],"=="):h==="!="?Lu($d(r[1],r[2],"==")):h==="<"||h===">"||h==="<="||h===">="?$d(r[1],r[2],h):h==="any"?(s=r.slice(1),["any"].concat(s.map(Ru))):h==="all"?["all"].concat(r.slice(1).map(Ru)):h==="none"?["all"].concat(r.slice(1).map(Ru).map(Lu)):h==="in"?vp(r[1],r.slice(2)):h==="!in"?Lu(vp(r[1],r.slice(2))):h==="has"?rf(r[1]):h!=="!has"||Lu(rf(r[1]))}function $d(r,s,h){switch(r){case"$type":return["filter-type-"+h,s];case"$id":return["filter-id-"+h,s];default:return["filter-"+h,r,s]}}function vp(r,s){if(s.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some((function(h){return typeof h!=typeof s[0]}))?["filter-in-large",r,["literal",s.sort(Rc)]]:["filter-in-small",r,["literal",s]]}}function rf(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Lu(r){return["!",r]}function $l(r){return Iu(Hr(r.value))?Hl(eo({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):(function s(h){var v=h.value,S=h.key;if(di(v)!=="array")return[new Yt(S,v,"array expected, "+di(v)+" found")];var T,N=h.styleSpec,R=[];if(v.length<1)return[new Yt(S,v,"filter array must have at least 1 element")];switch(R=R.concat(Pu({key:S+"[0]",value:v[0],valueSpec:N.filter_operator,style:h.style,styleSpec:h.styleSpec})),gi(v[0])){case"<":case"<=":case">":case">=":v.length>=2&&gi(v[1])==="$type"&&R.push(new Yt(S,v,'"$type" cannot be use with operator "'+v[0]+'"'));case"==":case"!=":v.length!==3&&R.push(new Yt(S,v,'filter array for operator "'+v[0]+'" must have 3 elements'));case"in":case"!in":v.length>=2&&(T=di(v[1]))!=="string"&&R.push(new Yt(S+"[1]",v[1],"string expected, "+T+" found"));for(var V=2;V<v.length;V++)T=di(v[V]),gi(v[1])==="$type"?R=R.concat(Pu({key:S+"["+V+"]",value:v[V],valueSpec:N.geometry_type,style:h.style,styleSpec:h.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&R.push(new Yt(S+"["+V+"]",v[V],"string, number, or boolean expected, "+T+" found"));break;case"any":case"all":case"none":for(var G=1;G<v.length;G++)R=R.concat(s({key:S+"["+G+"]",value:v[G],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":T=di(v[1]),v.length!==2?R.push(new Yt(S,v,'filter array for "'+v[0]+'" operator must have 2 elements')):T!=="string"&&R.push(new Yt(S+"[1]",v[1],"string expected, "+T+" found"))}return R})(r)}function Gl(r,s){var h=r.key,v=r.style,S=r.styleSpec,T=r.value,N=r.objectKey,R=S[s+"_"+r.layerType];if(!R)return[];var V=N.match(/^(.*)-transition$/);if(s==="paint"&&V&&R[V[1]]&&R[V[1]].transition)return ho({key:h,value:T,valueSpec:S.transition,style:v,styleSpec:S});var G,K=r.valueSpec||R[N];if(!K)return[new Yt(h,T,'unknown property "'+N+'"')];if(di(T)==="string"&&Vl(K)&&!K.tokens&&(G=/^{([^}]+)}$/.exec(T)))return[new Yt(h,T,'"'+N+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(G[1])+" }`.")];var ae=[];return r.layerType==="symbol"&&(N==="text-field"&&v&&!v.glyphs&&ae.push(new Yt(h,T,'use of "text-field" requires a style "glyphs" property')),N==="text-font"&&ql(Hr(T))&&gi(T.type)==="identity"&&ae.push(new Yt(h,T,'"text-font" does not support identity functions'))),ae.concat(ho({key:r.key,value:T,valueSpec:K,style:v,styleSpec:S,expressionContext:"property",propertyType:s,propertyKey:N}))}function af(r){return Gl(r,"paint")}function zu(r){return Gl(r,"layout")}function of(r){var s=[],h=r.value,v=r.key,S=r.style,T=r.styleSpec;h.type||h.ref||s.push(new Yt(v,h,'either "type" or "ref" is required'));var N,R=gi(h.type),V=gi(h.ref);if(h.id)for(var G=gi(h.id),K=0;K<r.arrayIndex;K++){var ae=S.layers[K];gi(ae.id)===G&&s.push(new Yt(v,h.id,'duplicate layer id "'+h.id+'", previously used at line '+ae.id.__line__))}if("ref"in h)["type","source","source-layer","filter","layout"].forEach((function(fe){fe in h&&s.push(new Yt(v,h[fe],'"'+fe+'" is prohibited for ref layers'))})),S.layers.forEach((function(fe){gi(fe.id)===V&&(N=fe)})),N?N.ref?s.push(new Yt(v,h.ref,"ref cannot reference another ref layer")):R=gi(N.type):s.push(new Yt(v,h.ref,'ref layer "'+V+'" not found'));else if(R!=="background")if(h.source){var de=S.sources&&S.sources[h.source],le=de&&gi(de.type);de?le==="vector"&&R==="raster"?s.push(new Yt(v,h.source,'layer "'+h.id+'" requires a raster source')):le==="raster"&&R!=="raster"?s.push(new Yt(v,h.source,'layer "'+h.id+'" requires a vector source')):le!=="vector"||h["source-layer"]?le==="raster-dem"&&R!=="hillshade"?s.push(new Yt(v,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):R!=="line"||!h.paint||!h.paint["line-gradient"]||le==="geojson"&&de.lineMetrics||s.push(new Yt(v,h,'layer "'+h.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):s.push(new Yt(v,h,'layer "'+h.id+'" must specify a "source-layer"')):s.push(new Yt(v,h.source,'source "'+h.source+'" not found'))}else s.push(new Yt(v,h,'missing required property "source"'));return s=s.concat(as({key:v,value:h,valueSpec:T.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ho({key:v+".type",value:h.type,valueSpec:T.layer.type,style:r.style,styleSpec:r.styleSpec,object:h,objectKey:"type"})},filter:$l,layout:function(fe){return as({layer:h,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":function(Me){return zu(eo({layerType:R},Me))}}})},paint:function(fe){return as({layer:h,key:fe.key,value:fe.value,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{"*":function(Me){return af(eo({layerType:R},Me))}}})}}}))}function Zl(r){var s=r.value,h=r.key,v=di(s);return v!=="string"?[new Yt(h,s,"string expected, "+v+" found")]:[]}var Gd={promoteId:function(r){var s=r.key,h=r.value;if(di(h)==="string")return Zl({key:s,value:h});var v=[];for(var S in h)v.push.apply(v,Zl({key:s+"."+S,value:h[S]}));return v}};function Bu(r){var s=r.value,h=r.key,v=r.styleSpec,S=r.style;if(!s.type)return[new Yt(h,s,'"type" is required')];var T,N=gi(s.type);switch(N){case"vector":case"raster":case"raster-dem":return T=as({key:h,value:s,valueSpec:v["source_"+N.replace("-","_")],style:r.style,styleSpec:v,objectElementValidators:Gd});case"geojson":if(T=as({key:h,value:s,valueSpec:v.source_geojson,style:S,styleSpec:v,objectElementValidators:Gd}),s.cluster)for(var R in s.clusterProperties){var V=s.clusterProperties[R],G=V[0],K=V[1],ae=typeof G=="string"?[G,["accumulated"],["get",R]]:G;T.push.apply(T,Hl({key:h+"."+R+".map",value:K,expressionContext:"cluster-map"})),T.push.apply(T,Hl({key:h+"."+R+".reduce",value:ae,expressionContext:"cluster-reduce"}))}return T;case"video":return as({key:h,value:s,valueSpec:v.source_video,style:S,styleSpec:v});case"image":return as({key:h,value:s,valueSpec:v.source_image,style:S,styleSpec:v});case"canvas":return[new Yt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pu({key:h+".type",value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Zd(r){var s=r.value,h=r.styleSpec,v=h.light,S=r.style,T=[],N=di(s);if(s===void 0)return T;if(N!=="object")return T=T.concat([new Yt("light",s,"object expected, "+N+" found")]);for(var R in s){var V=R.match(/^(.*)-transition$/);T=V&&v[V[1]]&&v[V[1]].transition?T.concat(ho({key:R,value:s[R],valueSpec:h.transition,style:S,styleSpec:h})):v[R]?T.concat(ho({key:R,value:s[R],valueSpec:v[R],style:S,styleSpec:h})):T.concat([new Yt(R,s[R],'unknown property "'+R+'"')])}return T}var Xd={"*":function(){return[]},array:Hd,boolean:function(r){var s=r.value,h=r.key,v=di(s);return v!=="boolean"?[new Yt(h,s,"boolean expected, "+v+" found")]:[]},number:bl,color:function(r){var s=r.key,h=r.value,v=di(h);return v!=="string"?[new Yt(s,h,"color expected, "+v+" found")]:dn(h)===null?[new Yt(s,h,'color expected, "'+h+'" found')]:[]},constants:Ja,enum:Pu,filter:$l,function:yp,layer:of,object:as,source:Bu,light:Zd,string:Zl,formatted:function(r){return Zl(r).length===0?[]:Hl(r)},resolvedImage:function(r){return Zl(r).length===0?[]:Hl(r)}};function ho(r){var s=r.value,h=r.valueSpec,v=r.styleSpec;return h.expression&&ql(gi(s))?yp(r):h.expression&&Ud(Hr(s))?Hl(r):h.type&&Xd[h.type]?Xd[h.type](r):as(eo({},r,{valueSpec:h.type?v[h.type]:h}))}function cg(r){var s=r.value,h=r.key,v=Zl(r);return v.length||(s.indexOf("{fontstack}")===-1&&v.push(new Yt(h,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&v.push(new Yt(h,s,'"glyphs" url must include a "{range}" token'))),v}function Xl(r,s){s===void 0&&(s=vt);var h=[];return h=h.concat(ho({key:"",value:r,valueSpec:s.$root,styleSpec:s,style:r,objectElementValidators:{glyphs:cg,"*":function(){return[]}}})),r.constants&&(h=h.concat(Ja({key:"constants",value:r.constants}))),xp(h)}function xp(r){return[].concat(r).sort((function(s,h){return s.line-h.line}))}function Lc(r){return function(){for(var s=[],h=arguments.length;h--;)s[h]=arguments[h];return xp(r.apply(this,s))}}Xl.source=Lc(Bu),Xl.light=Lc(Zd),Xl.layer=Lc(of),Xl.filter=Lc($l),Xl.paintProperty=Lc(af),Xl.layoutProperty=Lc(zu);var Fu=Xl,fo=Fu.light,ai=Fu.paintProperty,Kd=Fu.layoutProperty;function Yd(r,s){var h=!1;if(s&&s.length)for(var v=0,S=s;v<S.length;v+=1){var T=S[v];r.fire(new Ti(new Error(T.message))),h=!0}return h}var _l=xr;function xr(r,s,h){var v=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var S=new Int32Array(this.arrayBuffer);r=S[0],s=S[1],h=S[2],this.d=s+2*h;for(var T=0;T<this.d*this.d;T++){var N=S[3+T],R=S[3+T+1];v.push(N===R?null:S.subarray(N,R))}var V=S[3+v.length],G=S[3+v.length+1];this.keys=S.subarray(V,G),this.bboxes=S.subarray(G),this.insert=this._insertReadonly}else{this.d=s+2*h;for(var K=0;K<this.d*this.d;K++)v.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=h,this.scale=s/r,this.uid=0;var ae=h/s*r;this.min=-ae,this.max=r+ae}xr.prototype.insert=function(r,s,h,v,S){this._forEachCell(s,h,v,S,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(S)},xr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xr.prototype._insertCell=function(r,s,h,v,S,T){this.cells[S].push(T)},xr.prototype.query=function(r,s,h,v,S){var T=this.min,N=this.max;if(r<=T&&s<=T&&N<=h&&N<=v&&!S)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(r,s,h,v,this._queryCell,R,{},S),R},xr.prototype._queryCell=function(r,s,h,v,S,T,N,R){var V=this.cells[S];if(V!==null)for(var G=this.keys,K=this.bboxes,ae=0;ae<V.length;ae++){var de=V[ae];if(N[de]===void 0){var le=4*de;(R?R(K[le+0],K[le+1],K[le+2],K[le+3]):r<=K[le+2]&&s<=K[le+3]&&h>=K[le+0]&&v>=K[le+1])?(N[de]=!0,T.push(G[de])):N[de]=!1}}},xr.prototype._forEachCell=function(r,s,h,v,S,T,N,R){for(var V=this._convertToCellCoord(r),G=this._convertToCellCoord(s),K=this._convertToCellCoord(h),ae=this._convertToCellCoord(v),de=V;de<=K;de++)for(var le=G;le<=ae;le++){var fe=this.d*le+de;if((!R||R(this._convertFromCellCoord(de),this._convertFromCellCoord(le),this._convertFromCellCoord(de+1),this._convertFromCellCoord(le+1)))&&S.call(this,r,s,h,v,fe,T,N,R))return}},xr.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},xr.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},xr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,s=3+this.cells.length+1+1,h=0,v=0;v<this.cells.length;v++)h+=this.cells[v].length;var S=new Int32Array(s+h+this.keys.length+this.bboxes.length);S[0]=this.extent,S[1]=this.n,S[2]=this.padding;for(var T=s,N=0;N<r.length;N++){var R=r[N];S[3+N]=T,S.set(R,T),T+=R.length}return S[3+r.length]=T,S.set(this.keys,T),T+=this.keys.length,S[3+r.length+1]=T,S.set(this.bboxes,T),T+=this.bboxes.length,S.buffer};var oi=self.ImageData,wl=self.ImageBitmap,sa={};function fn(r,s,h){h===void 0&&(h={}),Object.defineProperty(s,"_classRegistryKey",{value:r,writeable:!1}),sa[r]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}for(var Kl in fn("Object",Object),_l.serialize=function(r,s){var h=r.toArrayBuffer();return s&&s.push(h),{buffer:h}},_l.deserialize=function(r){return new _l(r.buffer)},fn("Grid",_l),fn("Color",qt),fn("Error",Error),fn("ResolvedImage",zn),fn("StylePropertyFunction",Oc),fn("StyleExpression",Du,{omit:["_evaluator"]}),fn("ZoomDependentExpression",Ic),fn("ZoomConstantExpression",Pc),fn("CompoundExpression",Ji,{omit:["_evaluate"]}),Nc)Nc[Kl]._classRegistryKey||fn("Expression_"+Kl,Nc[Kl]);function Ha(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function No(r){return wl&&r instanceof wl}function Go(r,s){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(Ha(r)||No(r))return s&&s.push(r),r;if(ArrayBuffer.isView(r)){var h=r;return s&&s.push(h.buffer),h}if(r instanceof oi)return s&&s.push(r.data.buffer),r;if(Array.isArray(r)){for(var v=[],S=0,T=r;S<T.length;S+=1){var N=T[S];v.push(Go(N,s))}return v}if(typeof r=="object"){var R=r.constructor,V=R._classRegistryKey;if(!V)throw new Error("can't serialize object of unregistered class");var G=R.serialize?R.serialize(r,s):{};if(!R.serialize){for(var K in r)if(r.hasOwnProperty(K)&&!(sa[V].omit.indexOf(K)>=0)){var ae=r[K];G[K]=sa[V].shallow.indexOf(K)>=0?ae:Go(ae,s)}r instanceof Error&&(G.message=r.message)}if(G.$name)throw new Error("$name property is reserved for worker serialization logic.");return V!=="Object"&&(G.$name=V),G}throw new Error("can't serialize object of type "+typeof r)}function ji(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||Ha(r)||No(r)||ArrayBuffer.isView(r)||r instanceof oi)return r;if(Array.isArray(r))return r.map(ji);if(typeof r=="object"){var s=r.$name||"Object",h=sa[s].klass;if(!h)throw new Error("can't deserialize unregistered class "+s);if(h.deserialize)return h.deserialize(r);for(var v=Object.create(h.prototype),S=0,T=Object.keys(r);S<T.length;S+=1){var N=T[S];if(N!=="$name"){var R=r[N];v[N]=sa[s].shallow.indexOf(N)>=0?R:ji(R)}}return v}throw new Error("can't deserialize object of type "+typeof r)}var zc=function(){this.first=!0};zc.prototype.update=function(r,s){var h=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=h,!0))};var $t={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function Mo(r){for(var s=0,h=r;s<h.length;s+=1)if(Do(h[s].charCodeAt(0)))return!0;return!1}function bp(r){return!$t.Arabic(r)&&!$t["Arabic Supplement"](r)&&!$t["Arabic Extended-A"](r)&&!$t["Arabic Presentation Forms-A"](r)&&!$t["Arabic Presentation Forms-B"](r)}function Do(r){return r===746||r===747||!(r<4352)&&(!!$t["Bopomofo Extended"](r)||!!$t.Bopomofo(r)||!(!$t["CJK Compatibility Forms"](r)||r>=65097&&r<=65103)||!!$t["CJK Compatibility Ideographs"](r)||!!$t["CJK Compatibility"](r)||!!$t["CJK Radicals Supplement"](r)||!!$t["CJK Strokes"](r)||!(!$t["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||!!$t["CJK Unified Ideographs Extension A"](r)||!!$t["CJK Unified Ideographs"](r)||!!$t["Enclosed CJK Letters and Months"](r)||!!$t["Hangul Compatibility Jamo"](r)||!!$t["Hangul Jamo Extended-A"](r)||!!$t["Hangul Jamo Extended-B"](r)||!!$t["Hangul Jamo"](r)||!!$t["Hangul Syllables"](r)||!!$t.Hiragana(r)||!!$t["Ideographic Description Characters"](r)||!!$t.Kanbun(r)||!!$t["Kangxi Radicals"](r)||!!$t["Katakana Phonetic Extensions"](r)||!(!$t.Katakana(r)||r===12540)||!(!$t["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!$t["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||!!$t["Unified Canadian Aboriginal Syllabics"](r)||!!$t["Unified Canadian Aboriginal Syllabics Extended"](r)||!!$t["Vertical Forms"](r)||!!$t["Yijing Hexagram Symbols"](r)||!!$t["Yi Syllables"](r)||!!$t["Yi Radicals"](r))}function sf(r){return!(Do(r)||(function(s){return!(!$t["Latin-1 Supplement"](s)||s!==167&&s!==169&&s!==174&&s!==177&&s!==188&&s!==189&&s!==190&&s!==215&&s!==247)||!(!$t["General Punctuation"](s)||s!==8214&&s!==8224&&s!==8225&&s!==8240&&s!==8241&&s!==8251&&s!==8252&&s!==8258&&s!==8263&&s!==8264&&s!==8265&&s!==8273)||!!$t["Letterlike Symbols"](s)||!!$t["Number Forms"](s)||!(!$t["Miscellaneous Technical"](s)||!(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215))||!(!$t["Control Pictures"](s)||s===9251)||!!$t["Optical Character Recognition"](s)||!!$t["Enclosed Alphanumerics"](s)||!!$t["Geometric Shapes"](s)||!(!$t["Miscellaneous Symbols"](s)||s>=9754&&s<=9759)||!(!$t["Miscellaneous Symbols and Arrows"](s)||!(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243))||!!$t["CJK Symbols and Punctuation"](s)||!!$t.Katakana(s)||!!$t["Private Use Area"](s)||!!$t["CJK Compatibility Forms"](s)||!!$t["Small Form Variants"](s)||!!$t["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533})(r))}function po(r){return r>=1424&&r<=2303||$t["Arabic Presentation Forms-A"](r)||$t["Arabic Presentation Forms-B"](r)}function _p(r,s){return!(!s&&po(r))&&!(r>=2304&&r<=3583||r>=3840&&r<=4255||$t.Khmer(r))}function ug(r){for(var s=0,h=r;s<h.length;s+=1)if(po(h[s].charCodeAt(0)))return!0;return!1}var Zo="deferred",ks="loading",Ws="loaded",Po=null,ja="unavailable",ya=null,Xo=function(r){Po&&Po(r)};function Uu(){Bc.fire(new fr("pluginStateChange",{pluginStatus:ja,pluginURL:ya}))}var Bc=new Fr,Sl=function(){return ja},Wd=function(){if(ja!==Zo||!ya)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ja=ks,Uu(),ya&&da({url:ya},(function(r){r?Xo(r):(ja=Ws,Uu())}))},Pi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ja===Ws||Pi.applyArabicShaping!=null},isLoading:function(){return ja===ks},setState:function(r){ja=r.pluginStatus,ya=r.pluginURL},isParsed:function(){return Pi.applyArabicShaping!=null&&Pi.processBidirectionalText!=null&&Pi.processStyledBidirectionalText!=null},getPluginURL:function(){return ya}},ti=function(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zc,this.transition={})};ti.prototype.isSupportedScript=function(r){return(function(s,h){for(var v=0,S=s;v<S.length;v+=1)if(!_p(S[v].charCodeAt(0),h))return!1;return!0})(r,Pi.isLoaded())},ti.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ti.prototype.getCrossfadeParameters=function(){var r=this.zoom,s=r-Math.floor(r),h=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}};var os=function(r,s){this.property=r,this.value=s,this.expression=(function(h,v){if(ql(h))return new Oc(h,v);if(Ud(h)){var S=qd(h,v);if(S.result==="error")throw new Error(S.value.map((function(N){return N.key+": "+N.message})).join(", "));return S.value}var T=h;return typeof h=="string"&&v.type==="color"&&(T=qt.parse(h)),{kind:"constant",evaluate:function(){return T}}})(s===void 0?r.specification.default:s,r.specification)};os.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},os.prototype.possiblyEvaluate=function(r,s){return this.property.possiblyEvaluate(this,r,s)};var ss=function(r){this.property=r,this.value=new os(r,void 0)};ss.prototype.transitioned=function(r,s){return new $a(this.property,this.value,s,B({},r.transition,this.transition),r.now)},ss.prototype.untransitioned=function(){return new $a(this.property,this.value,null,{},0)};var mo=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};mo.prototype.getValue=function(r){return he(this._values[r].value.value)},mo.prototype.setValue=function(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new ss(this._values[r].property)),this._values[r].value=new os(this._values[r].property,s===null?void 0:he(s))},mo.prototype.getTransition=function(r){return he(this._values[r].transition)},mo.prototype.setTransition=function(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new ss(this._values[r].property)),this._values[r].transition=he(s)||void 0},mo.prototype.serialize=function(){for(var r={},s=0,h=Object.keys(this._values);s<h.length;s+=1){var v=h[s],S=this.getValue(v);S!==void 0&&(r[v]=S);var T=this.getTransition(v);T!==void 0&&(r[v+"-transition"]=T)}return r},mo.prototype.transitioned=function(r,s){for(var h=new Fc(this._properties),v=0,S=Object.keys(this._values);v<S.length;v+=1){var T=S[v];h._values[T]=this._values[T].transitioned(r,s._values[T])}return h},mo.prototype.untransitioned=function(){for(var r=new Fc(this._properties),s=0,h=Object.keys(this._values);s<h.length;s+=1){var v=h[s];r._values[v]=this._values[v].untransitioned()}return r};var $a=function(r,s,h,v,S){this.property=r,this.value=s,this.begin=S+v.delay||0,this.end=this.begin+v.duration||0,r.specification.transition&&(v.delay||v.duration)&&(this.prior=h)};$a.prototype.possiblyEvaluate=function(r,s){var h=r.now||0,v=this.value.possiblyEvaluate(r,s),S=this.prior;if(S){if(h>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(h<this.begin)return S.possiblyEvaluate(r,s);var T=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(r,s),v,(function(N){if(N<=0)return 0;if(N>=1)return 1;var R=N*N,V=R*N;return 4*(N<.5?V:3*(N-R)+V-.75)})(T))}return v};var Fc=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Fc.prototype.possiblyEvaluate=function(r,s){for(var h=new ls(this._properties),v=0,S=Object.keys(this._values);v<S.length;v+=1){var T=S[v];h._values[T]=this._values[T].possiblyEvaluate(r,s)}return h},Fc.prototype.hasTransition=function(){for(var r=0,s=Object.keys(this._values);r<s.length;r+=1){var h=s[r];if(this._values[h].prior)return!0}return!1};var Io=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};Io.prototype.getValue=function(r){return he(this._values[r].value)},Io.prototype.setValue=function(r,s){this._values[r]=new os(this._values[r].property,s===null?void 0:he(s))},Io.prototype.serialize=function(){for(var r={},s=0,h=Object.keys(this._values);s<h.length;s+=1){var v=h[s],S=this.getValue(v);S!==void 0&&(r[v]=S)}return r},Io.prototype.possiblyEvaluate=function(r,s){for(var h=new ls(this._properties),v=0,S=Object.keys(this._values);v<S.length;v+=1){var T=S[v];h._values[T]=this._values[T].possiblyEvaluate(r,s)}return h};var to=function(r,s,h){this.property=r,this.value=s,this.parameters=h};to.prototype.isConstant=function(){return this.value.kind==="constant"},to.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},to.prototype.evaluate=function(r,s,h){return this.property.evaluate(this.value,this.parameters,r,s,h)};var ls=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};ls.prototype.get=function(r){return this._values[r]};var pn=function(r){this.specification=r};pn.prototype.possiblyEvaluate=function(r,s){return r.expression.evaluate(s)},pn.prototype.interpolate=function(r,s,h){var v=Hi[this.specification.type];return v?v(r,s,h):r};var _n=function(r,s){this.specification=r,this.overrides=s};_n.prototype.possiblyEvaluate=function(r,s,h){return r.expression.kind==="constant"||r.expression.kind==="camera"?new to(this,{kind:"constant",value:r.expression.evaluate(s,null,{},h)},s):new to(this,r.expression,s)},_n.prototype.interpolate=function(r,s,h){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new to(this,{kind:"constant",value:void 0},r.parameters);var v=Hi[this.specification.type];return v?new to(this,{kind:"constant",value:v(r.value.value,s.value.value,h)},r.parameters):r},_n.prototype.evaluate=function(r,s,h,v,S){return r.kind==="constant"?r.value:r.evaluate(s,h,v,S)};var go=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.possiblyEvaluate=function(h,v,S){if(h.value===void 0)return new to(this,{kind:"constant",value:void 0},v);if(h.expression.kind==="constant"){var T=h.expression.evaluate(v,null,{},S),N=h.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,R=this._calculate(N,N,N,v);return new to(this,{kind:"constant",value:R},v)}if(h.expression.kind==="camera"){var V=this._calculate(h.expression.evaluate({zoom:v.zoom-1}),h.expression.evaluate({zoom:v.zoom}),h.expression.evaluate({zoom:v.zoom+1}),v);return new to(this,{kind:"constant",value:V},v)}return new to(this,h.expression,v)},s.prototype.evaluate=function(h,v,S,T,N){if(h.kind==="source"){var R=h.evaluate(v,S,T,N);return this._calculate(R,R,R,v)}return h.kind==="composite"?this._calculate(h.evaluate({zoom:Math.floor(v.zoom)-1},S,T),h.evaluate({zoom:Math.floor(v.zoom)},S,T),h.evaluate({zoom:Math.floor(v.zoom)+1},S,T),v):h.value},s.prototype._calculate=function(h,v,S,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:h,to:v}:{from:S,to:v}},s.prototype.interpolate=function(h){return h},s})(_n),El=function(r){this.specification=r};El.prototype.possiblyEvaluate=function(r,s,h){if(r.value!==void 0){if(r.expression.kind==="constant"){var v=r.expression.evaluate(s,null,{},h);return this._calculate(v,v,v,s)}return this._calculate(r.expression.evaluate(new ti(Math.floor(s.zoom-1),s)),r.expression.evaluate(new ti(Math.floor(s.zoom),s)),r.expression.evaluate(new ti(Math.floor(s.zoom+1),s)),s)}},El.prototype._calculate=function(r,s,h,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:h,to:s}},El.prototype.interpolate=function(r){return r};var Uc=function(r){this.specification=r};Uc.prototype.possiblyEvaluate=function(r,s,h){return!!r.expression.evaluate(s,null,{},h)},Uc.prototype.interpolate=function(){return!1};var Ii=function(r){for(var s in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var h=r[s];h.specification.overridable&&this.overridableProperties.push(s);var v=this.defaultPropertyValues[s]=new os(h,void 0),S=this.defaultTransitionablePropertyValues[s]=new ss(h);this.defaultTransitioningPropertyValues[s]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=v.possiblyEvaluate({})}};fn("DataDrivenProperty",_n),fn("DataConstantProperty",pn),fn("CrossFadedDataDrivenProperty",go),fn("CrossFadedProperty",El),fn("ColorRampProperty",Uc);var Ga=(function(r){function s(h,v){if(r.call(this),this.id=h.id,this.type=h.type,this._featureFilter=function(){return!0},h.type!=="custom"&&(h=h,this.metadata=h.metadata,this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,h.type!=="background"&&(this.source=h.source,this.sourceLayer=h["source-layer"],this.filter=h.filter),v.layout&&(this._unevaluatedLayout=new Io(v.layout)),v.paint)){for(var S in this._transitionablePaint=new mo(v.paint),h.paint)this.setPaintProperty(S,h.paint[S],{validate:!1});for(var T in h.layout)this.setLayoutProperty(T,h.layout[T],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},s.prototype.getLayoutProperty=function(h){return h==="visibility"?this.visibility:this._unevaluatedLayout.getValue(h)},s.prototype.setLayoutProperty=function(h,v,S){if(S===void 0&&(S={}),v!=null){var T="layers."+this.id+".layout."+h;if(this._validate(Kd,T,h,v,S))return}h!=="visibility"?this._unevaluatedLayout.setValue(h,v):this.visibility=v},s.prototype.getPaintProperty=function(h){return re(h,"-transition")?this._transitionablePaint.getTransition(h.slice(0,-11)):this._transitionablePaint.getValue(h)},s.prototype.setPaintProperty=function(h,v,S){if(S===void 0&&(S={}),v!=null){var T="layers."+this.id+".paint."+h;if(this._validate(ai,T,h,v,S))return!1}if(re(h,"-transition"))return this._transitionablePaint.setTransition(h.slice(0,-11),v||void 0),!1;var N=this._transitionablePaint._values[h],R=N.property.specification["property-type"]==="cross-faded-data-driven",V=N.value.isDataDriven(),G=N.value;this._transitionablePaint.setValue(h,v),this._handleSpecialPaintPropertyUpdate(h);var K=this._transitionablePaint._values[h].value;return K.isDataDriven()||V||R||this._handleOverridablePaintPropertyUpdate(h,G,K)},s.prototype._handleSpecialPaintPropertyUpdate=function(h){},s.prototype._handleOverridablePaintPropertyUpdate=function(h,v,S){return!1},s.prototype.isHidden=function(h){return!!(this.minzoom&&h<this.minzoom)||!!(this.maxzoom&&h>=this.maxzoom)||this.visibility==="none"},s.prototype.updateTransitions=function(h){this._transitioningPaint=this._transitionablePaint.transitioned(h,this._transitioningPaint)},s.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},s.prototype.recalculate=function(h,v){h.getCrossfadeParameters&&(this._crossfadeParameters=h.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(h,v)),this.paint=this._transitioningPaint.possiblyEvaluate(h,v)},s.prototype.serialize=function(){var h={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(h.layout=h.layout||{},h.layout.visibility=this.visibility),oe(h,(function(v,S){return!(v===void 0||S==="layout"&&!Object.keys(v).length||S==="paint"&&!Object.keys(v).length)}))},s.prototype._validate=function(h,v,S,T,N){return N===void 0&&(N={}),(!N||N.validate!==!1)&&Yd(this,h.call(Fu,{key:v,layerType:this.type,objectKey:S,value:T,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))},s.prototype.is3D=function(){return!1},s.prototype.isTileClipped=function(){return!1},s.prototype.hasOffscreenPass=function(){return!1},s.prototype.resize=function(){},s.prototype.isStateDependent=function(){for(var h in this.paint._values){var v=this.paint.get(h);if(v instanceof to&&Vl(v.property.specification)&&(v.value.kind==="source"||v.value.kind==="composite")&&v.value.isStateDependent)return!0}return!1},s})(Fr),f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},y=function(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},m=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function b(r,s){s===void 0&&(s=1);var h=0,v=0;return{members:r.map((function(S){var T,N=(T=S.type,f[T].BYTES_PER_ELEMENT),R=h=j(h,Math.max(s,N)),V=S.components||1;return v=Math.max(v,N),h+=N*V,{name:S.name,type:S.type,components:V,offset:R}})),size:j(h,Math.max(v,s)),alignment:s}}function j(r,s){return Math.ceil(r/s)*s}m.serialize=function(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},m.deserialize=function(r){var s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s},m.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},m.prototype.clear=function(){this.length=0},m.prototype.resize=function(r){this.reserve(r),this.length=r},m.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}},m.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var P=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v){var S=this.length;return this.resize(S+1),this.emplace(S,h,v)},s.prototype.emplace=function(h,v,S){var T=2*h;return this.int16[T+0]=v,this.int16[T+1]=S,h},s})(m);P.prototype.bytesPerElement=4,fn("StructArrayLayout2i4",P);var F=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T){var N=this.length;return this.resize(N+1),this.emplace(N,h,v,S,T)},s.prototype.emplace=function(h,v,S,T,N){var R=4*h;return this.int16[R+0]=v,this.int16[R+1]=S,this.int16[R+2]=T,this.int16[R+3]=N,h},s})(m);F.prototype.bytesPerElement=8,fn("StructArrayLayout4i8",F);var U=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R){var V=this.length;return this.resize(V+1),this.emplace(V,h,v,S,T,N,R)},s.prototype.emplace=function(h,v,S,T,N,R,V){var G=6*h;return this.int16[G+0]=v,this.int16[G+1]=S,this.int16[G+2]=T,this.int16[G+3]=N,this.int16[G+4]=R,this.int16[G+5]=V,h},s})(m);U.prototype.bytesPerElement=12,fn("StructArrayLayout2i4i12",U);var $=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R){var V=this.length;return this.resize(V+1),this.emplace(V,h,v,S,T,N,R)},s.prototype.emplace=function(h,v,S,T,N,R,V){var G=4*h,K=8*h;return this.int16[G+0]=v,this.int16[G+1]=S,this.uint8[K+4]=T,this.uint8[K+5]=N,this.uint8[K+6]=R,this.uint8[K+7]=V,h},s})(m);$.prototype.bytesPerElement=8,fn("StructArrayLayout2i4ub8",$);var J=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R,V,G){var K=this.length;return this.resize(K+1),this.emplace(K,h,v,S,T,N,R,V,G)},s.prototype.emplace=function(h,v,S,T,N,R,V,G,K){var ae=8*h;return this.uint16[ae+0]=v,this.uint16[ae+1]=S,this.uint16[ae+2]=T,this.uint16[ae+3]=N,this.uint16[ae+4]=R,this.uint16[ae+5]=V,this.uint16[ae+6]=G,this.uint16[ae+7]=K,h},s})(m);J.prototype.bytesPerElement=16,fn("StructArrayLayout8ui16",J);var te=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R,V,G,K,ae,de,le){var fe=this.length;return this.resize(fe+1),this.emplace(fe,h,v,S,T,N,R,V,G,K,ae,de,le)},s.prototype.emplace=function(h,v,S,T,N,R,V,G,K,ae,de,le,fe){var Me=12*h;return this.int16[Me+0]=v,this.int16[Me+1]=S,this.int16[Me+2]=T,this.int16[Me+3]=N,this.uint16[Me+4]=R,this.uint16[Me+5]=V,this.uint16[Me+6]=G,this.uint16[Me+7]=K,this.int16[Me+8]=ae,this.int16[Me+9]=de,this.int16[Me+10]=le,this.int16[Me+11]=fe,h},s})(m);te.prototype.bytesPerElement=24,fn("StructArrayLayout4i4ui4i24",te);var ue=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S){var T=this.length;return this.resize(T+1),this.emplace(T,h,v,S)},s.prototype.emplace=function(h,v,S,T){var N=3*h;return this.float32[N+0]=v,this.float32[N+1]=S,this.float32[N+2]=T,h},s})(m);ue.prototype.bytesPerElement=12,fn("StructArrayLayout3f12",ue);var Te=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h){var v=this.length;return this.resize(v+1),this.emplace(v,h)},s.prototype.emplace=function(h,v){var S=1*h;return this.uint32[S+0]=v,h},s})(m);Te.prototype.bytesPerElement=4,fn("StructArrayLayout1ul4",Te);var be=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R,V,G,K,ae,de){var le=this.length;return this.resize(le+1),this.emplace(le,h,v,S,T,N,R,V,G,K,ae,de)},s.prototype.emplace=function(h,v,S,T,N,R,V,G,K,ae,de,le){var fe=12*h,Me=6*h;return this.int16[fe+0]=v,this.int16[fe+1]=S,this.int16[fe+2]=T,this.int16[fe+3]=N,this.int16[fe+4]=R,this.int16[fe+5]=V,this.uint32[Me+3]=G,this.uint16[fe+8]=K,this.uint16[fe+9]=ae,this.int16[fe+10]=de,this.int16[fe+11]=le,h},s})(m);be.prototype.bytesPerElement=24,fn("StructArrayLayout6i1ul2ui2i24",be);var _e=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R){var V=this.length;return this.resize(V+1),this.emplace(V,h,v,S,T,N,R)},s.prototype.emplace=function(h,v,S,T,N,R,V){var G=6*h;return this.int16[G+0]=v,this.int16[G+1]=S,this.int16[G+2]=T,this.int16[G+3]=N,this.int16[G+4]=R,this.int16[G+5]=V,h},s})(m);_e.prototype.bytesPerElement=12,fn("StructArrayLayout2i2i2i12",_e);var ve=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T){var N=this.length;return this.resize(N+1),this.emplace(N,h,v,S,T)},s.prototype.emplace=function(h,v,S,T,N){var R=12*h,V=3*h;return this.uint8[R+0]=v,this.uint8[R+1]=S,this.float32[V+1]=T,this.float32[V+2]=N,h},s})(m);ve.prototype.bytesPerElement=12,fn("StructArrayLayout2ub2f12",ve);var $e=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R,V,G,K,ae,de,le,fe,Me,Ie,Ue,at){var ot=this.length;return this.resize(ot+1),this.emplace(ot,h,v,S,T,N,R,V,G,K,ae,de,le,fe,Me,Ie,Ue,at)},s.prototype.emplace=function(h,v,S,T,N,R,V,G,K,ae,de,le,fe,Me,Ie,Ue,at,ot){var ct=24*h,wt=12*h,jt=48*h;return this.int16[ct+0]=v,this.int16[ct+1]=S,this.uint16[ct+2]=T,this.uint16[ct+3]=N,this.uint32[wt+2]=R,this.uint32[wt+3]=V,this.uint32[wt+4]=G,this.uint16[ct+10]=K,this.uint16[ct+11]=ae,this.uint16[ct+12]=de,this.float32[wt+7]=le,this.float32[wt+8]=fe,this.uint8[jt+36]=Me,this.uint8[jt+37]=Ie,this.uint8[jt+38]=Ue,this.uint32[wt+10]=at,this.int16[ct+22]=ot,h},s})(m);$e.prototype.bytesPerElement=48,fn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",$e);var Fe=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T,N,R,V,G,K,ae,de,le,fe,Me,Ie,Ue,at,ot,ct,wt,jt,Ct,Jt,nn,ln,sn){var cn=this.length;return this.resize(cn+1),this.emplace(cn,h,v,S,T,N,R,V,G,K,ae,de,le,fe,Me,Ie,Ue,at,ot,ct,wt,jt,Ct,Jt,nn,ln,sn)},s.prototype.emplace=function(h,v,S,T,N,R,V,G,K,ae,de,le,fe,Me,Ie,Ue,at,ot,ct,wt,jt,Ct,Jt,nn,ln,sn,cn){var rn=30*h,Gt=15*h;return this.int16[rn+0]=v,this.int16[rn+1]=S,this.int16[rn+2]=T,this.int16[rn+3]=N,this.int16[rn+4]=R,this.int16[rn+5]=V,this.int16[rn+6]=G,this.int16[rn+7]=K,this.uint16[rn+8]=ae,this.uint16[rn+9]=de,this.uint16[rn+10]=le,this.uint16[rn+11]=fe,this.uint16[rn+12]=Me,this.uint16[rn+13]=Ie,this.uint16[rn+14]=Ue,this.uint16[rn+15]=at,this.uint16[rn+16]=ot,this.uint16[rn+17]=ct,this.uint16[rn+18]=wt,this.uint16[rn+19]=jt,this.uint16[rn+20]=Ct,this.uint16[rn+21]=Jt,this.uint32[Gt+11]=nn,this.float32[Gt+12]=ln,this.float32[Gt+13]=sn,this.float32[Gt+14]=cn,h},s})(m);Fe.prototype.bytesPerElement=60,fn("StructArrayLayout8i14ui1ul3f60",Fe);var rt=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h){var v=this.length;return this.resize(v+1),this.emplace(v,h)},s.prototype.emplace=function(h,v){var S=1*h;return this.float32[S+0]=v,h},s})(m);rt.prototype.bytesPerElement=4,fn("StructArrayLayout1f4",rt);var et=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S){var T=this.length;return this.resize(T+1),this.emplace(T,h,v,S)},s.prototype.emplace=function(h,v,S,T){var N=3*h;return this.int16[N+0]=v,this.int16[N+1]=S,this.int16[N+2]=T,h},s})(m);et.prototype.bytesPerElement=6,fn("StructArrayLayout3i6",et);var it=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S){var T=this.length;return this.resize(T+1),this.emplace(T,h,v,S)},s.prototype.emplace=function(h,v,S,T){var N=2*h,R=4*h;return this.uint32[N+0]=v,this.uint16[R+2]=S,this.uint16[R+3]=T,h},s})(m);it.prototype.bytesPerElement=8,fn("StructArrayLayout1ul2ui8",it);var ft=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S){var T=this.length;return this.resize(T+1),this.emplace(T,h,v,S)},s.prototype.emplace=function(h,v,S,T){var N=3*h;return this.uint16[N+0]=v,this.uint16[N+1]=S,this.uint16[N+2]=T,h},s})(m);ft.prototype.bytesPerElement=6,fn("StructArrayLayout3ui6",ft);var _t=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v){var S=this.length;return this.resize(S+1),this.emplace(S,h,v)},s.prototype.emplace=function(h,v,S){var T=2*h;return this.uint16[T+0]=v,this.uint16[T+1]=S,h},s})(m);_t.prototype.bytesPerElement=4,fn("StructArrayLayout2ui4",_t);var kt=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h){var v=this.length;return this.resize(v+1),this.emplace(v,h)},s.prototype.emplace=function(h,v){var S=1*h;return this.uint16[S+0]=v,h},s})(m);kt.prototype.bytesPerElement=2,fn("StructArrayLayout1ui2",kt);var an=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v){var S=this.length;return this.resize(S+1),this.emplace(S,h,v)},s.prototype.emplace=function(h,v,S){var T=2*h;return this.float32[T+0]=v,this.float32[T+1]=S,h},s})(m);an.prototype.bytesPerElement=8,fn("StructArrayLayout2f8",an);var Wt=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},s.prototype.emplaceBack=function(h,v,S,T){var N=this.length;return this.resize(N+1),this.emplace(N,h,v,S,T)},s.prototype.emplace=function(h,v,S,T,N){var R=4*h;return this.float32[R+0]=v,this.float32[R+1]=S,this.float32[R+2]=T,this.float32[R+3]=N,h},s})(m);Wt.prototype.bytesPerElement=16,fn("StructArrayLayout4f16",Wt);var un=(function(r){function s(){r.apply(this,arguments)}r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s;var h={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return h.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorPointX.set=function(v){this._structArray.int16[this._pos2+0]=v},h.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},h.anchorPointY.set=function(v){this._structArray.int16[this._pos2+1]=v},h.x1.get=function(){return this._structArray.int16[this._pos2+2]},h.x1.set=function(v){this._structArray.int16[this._pos2+2]=v},h.y1.get=function(){return this._structArray.int16[this._pos2+3]},h.y1.set=function(v){this._structArray.int16[this._pos2+3]=v},h.x2.get=function(){return this._structArray.int16[this._pos2+4]},h.x2.set=function(v){this._structArray.int16[this._pos2+4]=v},h.y2.get=function(){return this._structArray.int16[this._pos2+5]},h.y2.set=function(v){this._structArray.int16[this._pos2+5]=v},h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.featureIndex.set=function(v){this._structArray.uint32[this._pos4+3]=v},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},h.sourceLayerIndex.set=function(v){this._structArray.uint16[this._pos2+8]=v},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.bucketIndex.set=function(v){this._structArray.uint16[this._pos2+9]=v},h.radius.get=function(){return this._structArray.int16[this._pos2+10]},h.radius.set=function(v){this._structArray.int16[this._pos2+10]=v},h.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},h.signedDistanceFromAnchor.set=function(v){this._structArray.int16[this._pos2+11]=v},h.anchorPoint.get=function(){return new C(this.anchorPointX,this.anchorPointY)},Object.defineProperties(s.prototype,h),s})(y);un.prototype.size=24;var Zt=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.get=function(h){return new un(this,h)},s})(be);fn("CollisionBoxArray",Zt);var xn=(function(r){function s(){r.apply(this,arguments)}r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorX.set=function(v){this._structArray.int16[this._pos2+0]=v},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.anchorY.set=function(v){this._structArray.int16[this._pos2+1]=v},h.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.glyphStartIndex.set=function(v){this._structArray.uint16[this._pos2+2]=v},h.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},h.numGlyphs.set=function(v){this._structArray.uint16[this._pos2+3]=v},h.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},h.vertexStartIndex.set=function(v){this._structArray.uint32[this._pos4+2]=v},h.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},h.lineStartIndex.set=function(v){this._structArray.uint32[this._pos4+3]=v},h.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},h.lineLength.set=function(v){this._structArray.uint32[this._pos4+4]=v},h.segment.get=function(){return this._structArray.uint16[this._pos2+10]},h.segment.set=function(v){this._structArray.uint16[this._pos2+10]=v},h.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},h.lowerSize.set=function(v){this._structArray.uint16[this._pos2+11]=v},h.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},h.upperSize.set=function(v){this._structArray.uint16[this._pos2+12]=v},h.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},h.lineOffsetX.set=function(v){this._structArray.float32[this._pos4+7]=v},h.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},h.lineOffsetY.set=function(v){this._structArray.float32[this._pos4+8]=v},h.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},h.writingMode.set=function(v){this._structArray.uint8[this._pos1+36]=v},h.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},h.placedOrientation.set=function(v){this._structArray.uint8[this._pos1+37]=v},h.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},h.hidden.set=function(v){this._structArray.uint8[this._pos1+38]=v},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},h.crossTileID.set=function(v){this._structArray.uint32[this._pos4+10]=v},h.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},h.associatedIconIndex.set=function(v){this._structArray.int16[this._pos2+22]=v},Object.defineProperties(s.prototype,h),s})(y);xn.prototype.size=48;var Qt=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.get=function(h){return new xn(this,h)},s})($e);fn("PlacedSymbolArray",Qt);var jn=(function(r){function s(){r.apply(this,arguments)}r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s;var h={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return h.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},h.anchorX.set=function(v){this._structArray.int16[this._pos2+0]=v},h.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},h.anchorY.set=function(v){this._structArray.int16[this._pos2+1]=v},h.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},h.rightJustifiedTextSymbolIndex.set=function(v){this._structArray.int16[this._pos2+2]=v},h.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},h.centerJustifiedTextSymbolIndex.set=function(v){this._structArray.int16[this._pos2+3]=v},h.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},h.leftJustifiedTextSymbolIndex.set=function(v){this._structArray.int16[this._pos2+4]=v},h.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},h.verticalPlacedTextSymbolIndex.set=function(v){this._structArray.int16[this._pos2+5]=v},h.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},h.placedIconSymbolIndex.set=function(v){this._structArray.int16[this._pos2+6]=v},h.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},h.verticalPlacedIconSymbolIndex.set=function(v){this._structArray.int16[this._pos2+7]=v},h.key.get=function(){return this._structArray.uint16[this._pos2+8]},h.key.set=function(v){this._structArray.uint16[this._pos2+8]=v},h.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},h.textBoxStartIndex.set=function(v){this._structArray.uint16[this._pos2+9]=v},h.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},h.textBoxEndIndex.set=function(v){this._structArray.uint16[this._pos2+10]=v},h.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},h.verticalTextBoxStartIndex.set=function(v){this._structArray.uint16[this._pos2+11]=v},h.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},h.verticalTextBoxEndIndex.set=function(v){this._structArray.uint16[this._pos2+12]=v},h.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},h.iconBoxStartIndex.set=function(v){this._structArray.uint16[this._pos2+13]=v},h.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},h.iconBoxEndIndex.set=function(v){this._structArray.uint16[this._pos2+14]=v},h.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},h.verticalIconBoxStartIndex.set=function(v){this._structArray.uint16[this._pos2+15]=v},h.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},h.verticalIconBoxEndIndex.set=function(v){this._structArray.uint16[this._pos2+16]=v},h.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},h.featureIndex.set=function(v){this._structArray.uint16[this._pos2+17]=v},h.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},h.numHorizontalGlyphVertices.set=function(v){this._structArray.uint16[this._pos2+18]=v},h.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},h.numVerticalGlyphVertices.set=function(v){this._structArray.uint16[this._pos2+19]=v},h.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},h.numIconVertices.set=function(v){this._structArray.uint16[this._pos2+20]=v},h.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},h.numVerticalIconVertices.set=function(v){this._structArray.uint16[this._pos2+21]=v},h.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},h.crossTileID.set=function(v){this._structArray.uint32[this._pos4+11]=v},h.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},h.textBoxScale.set=function(v){this._structArray.float32[this._pos4+12]=v},h.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},h.textOffset0.set=function(v){this._structArray.float32[this._pos4+13]=v},h.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},h.textOffset1.set=function(v){this._structArray.float32[this._pos4+14]=v},Object.defineProperties(s.prototype,h),s})(y);jn.prototype.size=60;var Gn=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.get=function(h){return new jn(this,h)},s})(Fe);fn("SymbolInstanceArray",Gn);var Fn=(function(r){function s(){r.apply(this,arguments)}r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s;var h={offsetX:{configurable:!0}};return h.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},h.offsetX.set=function(v){this._structArray.float32[this._pos4+0]=v},Object.defineProperties(s.prototype,h),s})(y);Fn.prototype.size=4;var Rn=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.getoffsetX=function(h){return this.float32[1*h+0]},s.prototype.get=function(h){return new Fn(this,h)},s})(rt);fn("GlyphOffsetArray",Rn);var Mr=(function(r){function s(){r.apply(this,arguments)}r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s;var h={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return h.x.get=function(){return this._structArray.int16[this._pos2+0]},h.x.set=function(v){this._structArray.int16[this._pos2+0]=v},h.y.get=function(){return this._structArray.int16[this._pos2+1]},h.y.set=function(v){this._structArray.int16[this._pos2+1]=v},h.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},h.tileUnitDistanceFromAnchor.set=function(v){this._structArray.int16[this._pos2+2]=v},Object.defineProperties(s.prototype,h),s})(y);Mr.prototype.size=6;var Zn=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.getx=function(h){return this.int16[3*h+0]},s.prototype.gety=function(h){return this.int16[3*h+1]},s.prototype.gettileUnitDistanceFromAnchor=function(h){return this.int16[3*h+2]},s.prototype.get=function(h){return new Mr(this,h)},s})(et);fn("SymbolLineVertexArray",Zn);var wn=(function(r){function s(){r.apply(this,arguments)}r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s;var h={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return h.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},h.featureIndex.set=function(v){this._structArray.uint32[this._pos4+0]=v},h.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},h.sourceLayerIndex.set=function(v){this._structArray.uint16[this._pos2+2]=v},h.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},h.bucketIndex.set=function(v){this._structArray.uint16[this._pos2+3]=v},Object.defineProperties(s.prototype,h),s})(y);wn.prototype.size=8;var yi=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.get=function(h){return new wn(this,h)},s})(it);fn("FeatureIndexArray",yi);var Er=b([{name:"a_pos",components:2,type:"Int16"}],4).members,tr=function(r){r===void 0&&(r=[]),this.segments=r};function fa(r,s){return 256*(r=I(Math.floor(r),0,255))+(s=I(Math.floor(s),0,255))}tr.prototype.prepareSegment=function(r,s,h,v){var S=this.segments[this.segments.length-1];return r>tr.MAX_VERTEX_ARRAY_LENGTH&&ye("Max vertices per segment is "+tr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!S||S.vertexLength+r>tr.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==v)&&(S={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},v!==void 0&&(S.sortKey=v),this.segments.push(S)),S},tr.prototype.get=function(){return this.segments},tr.prototype.destroy=function(){for(var r=0,s=this.segments;r<s.length;r+=1){var h=s[r];for(var v in h.vaos)h.vaos[v].destroy()}},tr.simpleSegment=function(r,s,h,v){return new tr([{vertexOffset:r,primitiveOffset:s,vertexLength:h,primitiveLength:v,vaos:{},sortKey:0}])},tr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fn("SegmentVector",tr);var Gi=g((function(r){r.exports=function(s,h){var v,S,T,N,R,V,G,K;for(v=3&s.length,S=s.length-v,T=h,R=3432918353,V=461845907,K=0;K<S;)G=255&s.charCodeAt(K)|(255&s.charCodeAt(++K))<<8|(255&s.charCodeAt(++K))<<16|(255&s.charCodeAt(++K))<<24,++K,T=27492+(65535&(N=5*(65535&(T=(T^=G=(65535&(G=(G=(65535&G)*R+(((G>>>16)*R&65535)<<16)&4294967295)<<15|G>>>17))*V+(((G>>>16)*V&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(G=0,v){case 3:G^=(255&s.charCodeAt(K+2))<<16;case 2:G^=(255&s.charCodeAt(K+1))<<8;case 1:T^=G=(65535&(G=(G=(65535&(G^=255&s.charCodeAt(K)))*R+(((G>>>16)*R&65535)<<16)&4294967295)<<15|G>>>17))*V+(((G>>>16)*V&65535)<<16)&4294967295}return T^=s.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}})),si=g((function(r){r.exports=function(s,h){for(var v,S=s.length,T=h^S,N=0;S>=4;)v=1540483477*(65535&(v=255&s.charCodeAt(N)|(255&s.charCodeAt(++N))<<8|(255&s.charCodeAt(++N))<<16|(255&s.charCodeAt(++N))<<24))+((1540483477*(v>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),S-=4,++N;switch(S){case 3:T^=(255&s.charCodeAt(N+2))<<16;case 2:T^=(255&s.charCodeAt(N+1))<<8;case 1:T=1540483477*(65535&(T^=255&s.charCodeAt(N)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}})),Za=Gi,Oo=Gi,cs=si;Za.murmur3=Oo,Za.murmur2=cs;var la=function(){this.ids=[],this.positions=[],this.indexed=!1};la.prototype.add=function(r,s,h,v){this.ids.push(Ko(r)),this.positions.push(s,h,v)},la.prototype.getPositions=function(r){for(var s=Ko(r),h=0,v=this.ids.length-1;h<v;){var S=h+v>>1;this.ids[S]>=s?v=S:h=S+1}for(var T=[];this.ids[h]===s;){var N=this.positions[3*h],R=this.positions[3*h+1],V=this.positions[3*h+2];T.push({index:N,start:R,end:V}),h++}return T},la.serialize=function(r,s){var h=new Float64Array(r.ids),v=new Uint32Array(r.positions);return(function S(T,N,R,V){if(!(R>=V)){for(var G=T[R+V>>1],K=R-1,ae=V+1;;){do K++;while(T[K]<G);do ae--;while(T[ae]>G);if(K>=ae)break;Cl(T,K,ae),Cl(N,3*K,3*ae),Cl(N,3*K+1,3*ae+1),Cl(N,3*K+2,3*ae+2)}S(T,N,R,ae),S(T,N,ae+1,V)}})(h,v,0,h.length-1),s&&s.push(h.buffer,v.buffer),{ids:h,positions:v}},la.deserialize=function(r){var s=new la;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s};var js=Math.pow(2,53)-1;function Ko(r){var s=+r;return!isNaN(s)&&s<=js?s:Za(String(r))}function Cl(r,s,h){var v=r[s];r[s]=r[h],r[h]=v}fn("FeaturePositionMap",la);var yo=function(r,s){this.gl=r.gl,this.location=s},Qd=(function(r){function s(h,v){r.call(this,h,v),this.current=0}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))},s})(yo),As=(function(r){function s(h,v){r.call(this,h,v),this.current=0}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.set=function(h){this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))},s})(yo),Yo=(function(r){function s(h,v){r.call(this,h,v),this.current=[0,0]}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))},s})(yo),Vc=(function(r){function s(h,v){r.call(this,h,v),this.current=[0,0,0]}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))},s})(yo),Qs=(function(r){function s(h,v){r.call(this,h,v),this.current=[0,0,0,0]}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.set=function(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3]))},s})(yo),Tl=(function(r){function s(h,v){r.call(this,h,v),this.current=qt.transparent}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.set=function(h){h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a))},s})(yo),Ns=new Float32Array(16),li=(function(r){function s(h,v){r.call(this,h,v),this.current=Ns}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.set=function(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(var v=1;v<16;v++)if(h[v]!==this.current[v]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}},s})(yo);function kr(r){return[fa(255*r.r,255*r.g),fa(255*r.b,255*r.a)]}var zr=function(r,s,h){this.value=r,this.names=s,this.uniformNames=this.names.map((function(v){return"u_"+v})),this.type=h,this.maxValue=-1/0};zr.prototype.defines=function(){return this.names.map((function(r){return"#define HAS_UNIFORM_u_"+r}))},zr.prototype.setConstantPatternPositions=function(){},zr.prototype.populatePaintArray=function(){},zr.prototype.updatePaintArray=function(){},zr.prototype.upload=function(){},zr.prototype.destroy=function(){},zr.prototype.setUniforms=function(r,s,h,v){s.set(v.constantOr(this.value))},zr.prototype.getBinding=function(r,s){return this.type==="color"?new Tl(r,s):new As(r,s)},zr.serialize=function(r){var s=r.value,h=r.names,v=r.type;return{value:Go(s),names:h,type:v}},zr.deserialize=function(r){var s=r.value,h=r.names,v=r.type;return new zr(ji(s),h,v)};var La=function(r,s,h){this.value=r,this.names=s,this.uniformNames=this.names.map((function(v){return"u_"+v})),this.type=h,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};La.prototype.defines=function(){return this.names.map((function(r){return"#define HAS_UNIFORM_u_"+r}))},La.prototype.populatePaintArray=function(){},La.prototype.updatePaintArray=function(){},La.prototype.upload=function(){},La.prototype.destroy=function(){},La.prototype.setConstantPatternPositions=function(r,s){this.patternPositions.patternTo=r.tlbr,this.patternPositions.patternFrom=s.tlbr},La.prototype.setUniforms=function(r,s,h,v,S){var T=this.patternPositions;S==="u_pattern_to"&&T.patternTo&&s.set(T.patternTo),S==="u_pattern_from"&&T.patternFrom&&s.set(T.patternFrom)},La.prototype.getBinding=function(r,s){return new Qs(r,s)};var no=function(r,s,h,v){this.expression=r,this.names=s,this.type=h,this.uniformNames=this.names.map((function(S){return"a_"+S})),this.maxValue=-1/0,this.paintVertexAttributes=s.map((function(S){return{name:"a_"+S,type:"Float32",components:h==="color"?2:1,offset:0}})),this.paintVertexArray=new v};no.prototype.defines=function(){return[]},no.prototype.setConstantPatternPositions=function(){},no.prototype.populatePaintArray=function(r,s,h,v){var S=this.paintVertexArray,T=S.length;S.reserve(r);var N=this.expression.evaluate(new ti(0),s,{},[],v);if(this.type==="color")for(var R=kr(N),V=T;V<r;V++)S.emplaceBack(R[0],R[1]);else{for(var G=T;G<r;G++)S.emplaceBack(N);this.maxValue=Math.max(this.maxValue,N)}},no.prototype.updatePaintArray=function(r,s,h,v){var S=this.paintVertexArray,T=this.expression.evaluate({zoom:0},h,v);if(this.type==="color")for(var N=kr(T),R=r;R<s;R++)S.emplace(R,N[0],N[1]);else{for(var V=r;V<s;V++)S.emplace(V,T);this.maxValue=Math.max(this.maxValue,T)}},no.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},no.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},no.prototype.setUniforms=function(r,s){s.set(0)},no.prototype.getBinding=function(r,s){return new As(r,s)};var va=function(r,s,h,v,S,T){this.expression=r,this.names=s,this.uniformNames=this.names.map((function(R){return"u_"+R+"_t"})),this.type=h,this.useIntegerZoom=v,this.zoom=S,this.maxValue=-1/0;var N=T;this.paintVertexAttributes=s.map((function(R){return{name:"a_"+R,type:"Float32",components:h==="color"?4:2,offset:0}})),this.paintVertexArray=new N};va.prototype.defines=function(){return[]},va.prototype.setConstantPatternPositions=function(){},va.prototype.populatePaintArray=function(r,s,h,v){var S=this.paintVertexArray,T=S.length;S.reserve(r);var N=this.expression.evaluate(new ti(this.zoom),s,{},[],v),R=this.expression.evaluate(new ti(this.zoom+1),s,{},[],v);if(this.type==="color")for(var V=kr(N),G=kr(R),K=T;K<r;K++)S.emplaceBack(V[0],V[1],G[0],G[1]);else{for(var ae=T;ae<r;ae++)S.emplaceBack(N,R);this.maxValue=Math.max(this.maxValue,N,R)}},va.prototype.updatePaintArray=function(r,s,h,v){var S=this.paintVertexArray,T=this.expression.evaluate({zoom:this.zoom},h,v),N=this.expression.evaluate({zoom:this.zoom+1},h,v);if(this.type==="color")for(var R=kr(T),V=kr(N),G=r;G<s;G++)S.emplace(G,R[0],R[1],V[0],V[1]);else{for(var K=r;K<s;K++)S.emplace(K,T,N);this.maxValue=Math.max(this.maxValue,T,N)}},va.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},va.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},va.prototype.interpolationFactor=function(r){return this.useIntegerZoom&&(r=Math.floor(r)),I(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1)},va.prototype.setUniforms=function(r,s,h){s.set(this.interpolationFactor(h.zoom))},va.prototype.getBinding=function(r,s){return new As(r,s)};var za=function(r,s,h,v,S,T,N){this.expression=r,this.names=s,this.type=h,this.uniformNames=this.names.map((function(R){return"u_"+R+"_t"})),this.useIntegerZoom=v,this.zoom=S,this.maxValue=-1/0,this.layerId=N,this.paintVertexAttributes=s.map((function(R){return{name:"a_"+R,type:"Uint16",components:4,offset:0}})),this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T};za.prototype.defines=function(){return[]},za.prototype.setConstantPatternPositions=function(){},za.prototype.populatePaintArray=function(r,s,h){var v=this.zoomInPaintVertexArray,S=this.zoomOutPaintVertexArray,T=this.layerId,N=v.length;if(v.reserve(r),S.reserve(r),h&&s.patterns&&s.patterns[T]){var R=s.patterns[T],V=R.min,G=R.mid,K=R.max,ae=h[V],de=h[G],le=h[K];if(!ae||!de||!le)return;for(var fe=N;fe<r;fe++)v.emplaceBack(de.tl[0],de.tl[1],de.br[0],de.br[1],ae.tl[0],ae.tl[1],ae.br[0],ae.br[1]),S.emplaceBack(de.tl[0],de.tl[1],de.br[0],de.br[1],le.tl[0],le.tl[1],le.br[0],le.br[1])}},za.prototype.updatePaintArray=function(r,s,h,v,S){var T=this.zoomInPaintVertexArray,N=this.zoomOutPaintVertexArray,R=this.layerId;if(S&&h.patterns&&h.patterns[R]){var V=h.patterns[R],G=V.min,K=V.mid,ae=V.max,de=S[G],le=S[K],fe=S[ae];if(!de||!le||!fe)return;for(var Me=r;Me<s;Me++)T.emplace(Me,le.tl[0],le.tl[1],le.br[0],le.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1]),N.emplace(Me,le.tl[0],le.tl[1],le.br[0],le.br[1],fe.tl[0],fe.tl[1],fe.br[0],fe.br[1])}},za.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},za.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},za.prototype.setUniforms=function(r,s){s.set(0)},za.prototype.getBinding=function(r,s){return new As(r,s)};var xa=function(){this.binders={},this.cacheKey="",this._buffers=[]};xa.createDynamic=function(r,s,h){var v=new xa,S=[];for(var T in r.paint._values)if(h(T)){var N=r.paint.get(T);if(N instanceof to&&Vl(N.property.specification)){var R=Js(T,r.type),V=N.property.specification.type,G=N.property.useIntegerZoom;if(N.property.specification["property-type"]==="cross-faded"||N.property.specification["property-type"]==="cross-faded-data-driven")if(N.value.kind==="constant")v.binders[T]=new La(N.value.value,R,V),S.push("/u_"+T);else{var K=Yl(T,V,"source");v.binders[T]=new za(N.value,R,V,G,s,K,r.id),S.push("/a_"+T)}else if(N.value.kind==="constant")v.binders[T]=new zr(N.value.value,R,V),S.push("/u_"+T);else if(N.value.kind==="source"){var ae=Yl(T,V,"source");v.binders[T]=new no(N.value,R,V,ae),S.push("/a_"+T)}else{var de=Yl(T,V,"composite");v.binders[T]=new va(N.value,R,V,G,s,de),S.push("/z_"+T)}}}return v.cacheKey=S.sort().join(""),v},xa.prototype.populatePaintArrays=function(r,s,h,v,S){for(var T in this.binders)this.binders[T].populatePaintArray(r,s,v,S)},xa.prototype.setConstantPatternPositions=function(r,s){for(var h in this.binders)this.binders[h].setConstantPatternPositions(r,s)},xa.prototype.updatePaintArrays=function(r,s,h,v,S){var T=!1;for(var N in r)for(var R=0,V=s.getPositions(N);R<V.length;R+=1){var G=V[R],K=h.feature(G.index);for(var ae in this.binders){var de=this.binders[ae];if(!(de instanceof zr||de instanceof La)&&de.expression.isStateDependent===!0){var le=v.paint.get(ae);de.expression=le.value,de.updatePaintArray(G.start,G.end,K,r[N],S),T=!0}}}return T},xa.prototype.defines=function(){var r=[];for(var s in this.binders)r.push.apply(r,this.binders[s].defines());return r},xa.prototype.getPaintVertexBuffers=function(){return this._buffers},xa.prototype.getUniforms=function(r,s){var h=[];for(var v in this.binders)for(var S=this.binders[v],T=0,N=S.uniformNames;T<N.length;T+=1){var R=N[T];if(s[R]){var V=S.getBinding(r,s[R]);h.push({name:R,property:v,binding:V})}}return h},xa.prototype.setUniforms=function(r,s,h,v){for(var S=0,T=s;S<T.length;S+=1){var N=T[S],R=N.name,V=N.property,G=N.binding;this.binders[V].setUniforms(r,G,v,h.get(V),R)}},xa.prototype.updatePatternPaintBuffers=function(r){var s=[];for(var h in this.binders){var v=this.binders[h];if(v instanceof za){var S=r.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;S&&s.push(S)}else(v instanceof no||v instanceof va)&&v.paintVertexBuffer&&s.push(v.paintVertexBuffer)}this._buffers=s},xa.prototype.upload=function(r){for(var s in this.binders)this.binders[s].upload(r);var h=[];for(var v in this.binders){var S=this.binders[v];(S instanceof no||S instanceof va)&&S.paintVertexBuffer&&h.push(S.paintVertexBuffer)}this._buffers=h},xa.prototype.destroy=function(){for(var r in this.binders)this.binders[r].destroy()};var Ro=function(r,s,h,v){v===void 0&&(v=function(){return!0}),this.programConfigurations={};for(var S=0,T=s;S<T.length;S+=1){var N=T[S];this.programConfigurations[N.id]=xa.createDynamic(N,h,v),this.programConfigurations[N.id].layoutAttributes=r}this.needsUpload=!1,this._featureMap=new la,this._bufferOffset=0};function Js(r,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[r]||[r.replace(s+"-","").replace(/-/g,"_")]}function Yl(r,s,h){var v={color:{source:an,composite:Wt},number:{source:rt,composite:an}},S=(function(T){return{"line-pattern":{source:J,composite:J},"fill-pattern":{source:J,composite:J},"fill-extrusion-pattern":{source:J,composite:J}}[T]})(r);return S&&S[h]||v[s][h]}Ro.prototype.populatePaintArrays=function(r,s,h,v,S){for(var T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(r,s,h,v,S);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},Ro.prototype.updatePaintArrays=function(r,s,h,v){for(var S=0,T=h;S<T.length;S+=1){var N=T[S];this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(r,this._featureMap,s,N,v)||this.needsUpload}},Ro.prototype.get=function(r){return this.programConfigurations[r]},Ro.prototype.upload=function(r){if(this.needsUpload){for(var s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}},Ro.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},fn("ConstantBinder",zr),fn("CrossFadedConstantBinder",La),fn("SourceExpressionBinder",no),fn("CrossFadedCompositeBinder",za),fn("CompositeExpressionBinder",va),fn("ProgramConfiguration",xa,{omit:["_buffers"]}),fn("ProgramConfigurationSet",Ro);var qc,vo=(qc=15,{min:-1*Math.pow(2,qc-1),max:Math.pow(2,qc-1)-1});function Wl(r){for(var s=8192/r.extent,h=r.loadGeometry(),v=0;v<h.length;v++)for(var S=h[v],T=0;T<S.length;T++){var N=S[T];N.x=Math.round(N.x*s),N.y=Math.round(N.y*s),(N.x<vo.min||N.x>vo.max||N.y<vo.min||N.y>vo.max)&&(ye("Geometry exceeds allowed extent, reduce your vector tile buffer size"),N.x=I(N.x,vo.min,vo.max),N.y=I(N.y,vo.min,vo.max))}return h}function lf(r,s,h,v,S){r.emplaceBack(2*s+(v+1)/2,2*h+(S+1)/2)}var xo=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((function(s){return s.id})),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new P,this.indexArray=new ft,this.segments=new tr,this.programConfigurations=new Ro(Er,r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter((function(s){return s.isStateDependent()})).map((function(s){return s.id}))};function dg(r,s){for(var h=0;h<r.length;h++)if(jl(s,r[h]))return!0;for(var v=0;v<s.length;v++)if(jl(r,s[v]))return!0;return!!kl(r,s)}function Hc(r,s,h){return!!jl(r,s)||!!Vu(s,r,h)}function wp(r,s){if(r.length===1)return Ep(s,r[0]);for(var h=0;h<s.length;h++)for(var v=s[h],S=0;S<v.length;S++)if(jl(r,v[S]))return!0;for(var T=0;T<r.length;T++)if(Ep(s,r[T]))return!0;for(var N=0;N<s.length;N++)if(kl(r,s[N]))return!0;return!1}function hg(r,s,h){if(r.length>1){if(kl(r,s))return!0;for(var v=0;v<s.length;v++)if(Vu(s[v],r,h))return!0}for(var S=0;S<r.length;S++)if(Vu(r[S],s,h))return!0;return!1}function kl(r,s){if(r.length===0||s.length===0)return!1;for(var h=0;h<r.length-1;h++)for(var v=r[h],S=r[h+1],T=0;T<s.length-1;T++)if($c(v,S,s[T],s[T+1]))return!0;return!1}function $c(r,s,h,v){return Pe(r,h,v)!==Pe(s,h,v)&&Pe(r,s,h)!==Pe(r,s,v)}function Vu(r,s,h){var v=h*h;if(s.length===1)return r.distSqr(s[0])<v;for(var S=1;S<s.length;S++)if(Sp(r,s[S-1],s[S])<v)return!0;return!1}function Sp(r,s,h){var v=s.distSqr(h);if(v===0)return r.distSqr(s);var S=((r.x-s.x)*(h.x-s.x)+(r.y-s.y)*(h.y-s.y))/v;return S<0?r.distSqr(s):S>1?r.distSqr(h):r.distSqr(h.sub(s)._mult(S)._add(s))}function Ep(r,s){for(var h,v,S,T=!1,N=0;N<r.length;N++)for(var R=0,V=(h=r[N]).length-1;R<h.length;V=R++)v=h[R],S=h[V],v.y>s.y!=S.y>s.y&&s.x<(S.x-v.x)*(s.y-v.y)/(S.y-v.y)+v.x&&(T=!T);return T}function jl(r,s){for(var h=!1,v=0,S=r.length-1;v<r.length;S=v++){var T=r[v],N=r[S];T.y>s.y!=N.y>s.y&&s.x<(N.x-T.x)*(s.y-T.y)/(N.y-T.y)+T.x&&(h=!h)}return h}function cf(r,s,h){var v=h[0],S=h[2];if(r.x<v.x&&s.x<v.x||r.x>S.x&&s.x>S.x||r.y<v.y&&s.y<v.y||r.y>S.y&&s.y>S.y)return!1;var T=Pe(r,s,h[0]);return T!==Pe(r,s,h[1])||T!==Pe(r,s,h[2])||T!==Pe(r,s,h[3])}function Jd(r,s,h){var v=s.paint.get(r).value;return v.kind==="constant"?v.value:h.programConfigurations.get(s.id).binders[r].maxValue}function uf(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Ql(r,s,h,v,S){if(!s[0]&&!s[1])return r;var T=C.convert(s)._mult(S);h==="viewport"&&T._rotate(-v);for(var N=[],R=0;R<r.length;R++){var V=r[R];N.push(V.sub(T))}return N}xo.prototype.populate=function(r,s){var h=this.layers[0],v=[],S=null;h.type==="circle"&&(S=h.layout.get("circle-sort-key"));for(var T=0,N=r;T<N.length;T+=1){var R=N[T],V=R.feature,G=R.id,K=R.index,ae=R.sourceLayerIndex;if(this.layers[0]._featureFilter(new ti(this.zoom),V)){var de=Wl(V),le=S?S.evaluate(V,{}):void 0,fe={id:G,properties:V.properties,type:V.type,sourceLayerIndex:ae,index:K,geometry:de,patterns:{},sortKey:le};v.push(fe)}}S&&v.sort((function(Ct,Jt){return Ct.sortKey-Jt.sortKey}));for(var Me=0,Ie=v;Me<Ie.length;Me+=1){var Ue=Ie[Me],at=Ue,ot=at.geometry,ct=at.index,wt=at.sourceLayerIndex,jt=r[ct].feature;this.addFeature(Ue,ot,ct),s.featureIndex.insert(jt,ot,ct,wt,this.index)}},xo.prototype.update=function(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)},xo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},xo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xo.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Er),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},xo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xo.prototype.addFeature=function(r,s,h){for(var v=0,S=s;v<S.length;v+=1)for(var T=0,N=S[v];T<N.length;T+=1){var R=N[T],V=R.x,G=R.y;if(!(V<0||V>=8192||G<0||G>=8192)){var K=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ae=K.vertexLength;lf(this.layoutVertexArray,V,G,-1,-1),lf(this.layoutVertexArray,V,G,1,-1),lf(this.layoutVertexArray,V,G,1,1),lf(this.layoutVertexArray,V,G,-1,1),this.indexArray.emplaceBack(ae,ae+1,ae+2),this.indexArray.emplaceBack(ae,ae+3,ae+2),K.vertexLength+=4,K.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,{})},fn("CircleBucket",xo,{omit:["layers"]});var Cp=new Ii({"circle-sort-key":new _n(vt.layout_circle["circle-sort-key"])}),Nv={paint:new Ii({"circle-radius":new _n(vt.paint_circle["circle-radius"]),"circle-color":new _n(vt.paint_circle["circle-color"]),"circle-blur":new _n(vt.paint_circle["circle-blur"]),"circle-opacity":new _n(vt.paint_circle["circle-opacity"]),"circle-translate":new pn(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new pn(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new pn(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new pn(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _n(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _n(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _n(vt.paint_circle["circle-stroke-opacity"])}),layout:Cp},us=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=arguments,s=0,h=arguments.length;h--;)s+=r[h]*r[h];return Math.sqrt(s)});var eh;eh=new us(3),us!=Float32Array&&(eh[0]=0,eh[1]=0,eh[2]=0);function bo(r,s,h){var v=s[0],S=s[1],T=s[2],N=s[3];return r[0]=h[0]*v+h[4]*S+h[8]*T+h[12]*N,r[1]=h[1]*v+h[5]*S+h[9]*T+h[13]*N,r[2]=h[2]*v+h[6]*S+h[10]*T+h[14]*N,r[3]=h[3]*v+h[7]*S+h[11]*T+h[15]*N,r}(function(){(function(){var r=new us(4);return us!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r})()})();var Ms=(function(r){function s(h){r.call(this,h,Nv)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.createBucket=function(h){return new xo(h)},s.prototype.queryRadius=function(h){var v=h;return Jd("circle-radius",this,v)+Jd("circle-stroke-width",this,v)+uf(this.paint.get("circle-translate"))},s.prototype.queryIntersectsFeature=function(h,v,S,T,N,R,V,G){for(var K=Ql(h,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),R.angle,V),ae=this.paint.get("circle-radius").evaluate(v,S)+this.paint.get("circle-stroke-width").evaluate(v,S),de=this.paint.get("circle-pitch-alignment")==="map",le=de?K:(function(Ct,Jt){return Ct.map((function(nn){return Jl(nn,Jt)}))})(K,G),fe=de?ae*V:ae,Me=0,Ie=T;Me<Ie.length;Me+=1)for(var Ue=0,at=Ie[Me];Ue<at.length;Ue+=1){var ot=at[Ue],ct=de?ot:Jl(ot,G),wt=fe,jt=bo([],[ot.x,ot.y,0,1],G);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?wt*=jt[3]/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(wt*=R.cameraToCenterDistance/jt[3]),Hc(le,ct,wt))return!0}return!1},s})(Ga);function Jl(r,s){var h=bo([],[r.x,r.y,0,1],s);return new C(h[0]/h[3],h[1]/h[3])}var Tp=(function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s})(xo);function kp(r,s,h,v){var S=s.width,T=s.height;if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==S*T*h)throw new RangeError("mismatched image size")}else v=new Uint8Array(S*T*h);return r.width=S,r.height=T,r.data=v,r}function ec(r,s,h){var v=s.width,S=s.height;if(v!==r.width||S!==r.height){var T=kp({},{width:v,height:S},h);Lo(r,T,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,v),height:Math.min(r.height,S)},h),r.width=v,r.height=S,r.data=T.data}}function Lo(r,s,h,v,S,T){if(S.width===0||S.height===0)return s;if(S.width>r.width||S.height>r.height||h.x>r.width-S.width||h.y>r.height-S.height)throw new RangeError("out of range source coordinates for image copy");if(S.width>s.width||S.height>s.height||v.x>s.width-S.width||v.y>s.height-S.height)throw new RangeError("out of range destination coordinates for image copy");for(var N=r.data,R=s.data,V=0;V<S.height;V++)for(var G=((h.y+V)*r.width+h.x)*T,K=((v.y+V)*s.width+v.x)*T,ae=0;ae<S.width*T;ae++)R[K+ae]=N[G+ae];return s}fn("HeatmapBucket",Tp,{omit:["layers"]});var Oi=function(r,s){kp(this,r,1,s)};Oi.prototype.resize=function(r){ec(this,r,1)},Oi.prototype.clone=function(){return new Oi({width:this.width,height:this.height},new Uint8Array(this.data))},Oi.copy=function(r,s,h,v,S){Lo(r,s,h,v,S,1)};var Ba=function(r,s){kp(this,r,4,s)};Ba.prototype.resize=function(r){ec(this,r,4)},Ba.prototype.replace=function(r,s){s?this.data.set(r):r instanceof Uint8ClampedArray?this.data=new Uint8Array(r.buffer):this.data=r},Ba.prototype.clone=function(){return new Ba({width:this.width,height:this.height},new Uint8Array(this.data))},Ba.copy=function(r,s,h,v,S){Lo(r,s,h,v,S,4)},fn("AlphaImage",Oi),fn("RGBAImage",Ba);var tc={paint:new Ii({"heatmap-radius":new _n(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _n(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new pn(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Uc(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new pn(vt.paint_heatmap["heatmap-opacity"])})};function yr(r,s){for(var h=new Uint8Array(1024),v={},S=0,T=0;S<256;S++,T+=4){v[s]=S/255;var N=r.evaluate(v);h[T+0]=Math.floor(255*N.r/N.a),h[T+1]=Math.floor(255*N.g/N.a),h[T+2]=Math.floor(255*N.b/N.a),h[T+3]=Math.floor(255*N.a)}return new Ba({width:256,height:1},h)}var Ai=(function(r){function s(h){r.call(this,h,tc),this._updateColorRamp()}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.createBucket=function(h){return new Tp(h)},s.prototype._handleSpecialPaintPropertyUpdate=function(h){h==="heatmap-color"&&this._updateColorRamp()},s.prototype._updateColorRamp=function(){var h=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=yr(h,"heatmapDensity"),this.colorRampTexture=null},s.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},s.prototype.queryRadius=function(){return 0},s.prototype.queryIntersectsFeature=function(){return!1},s.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},s})(Ga),Aa={paint:new Ii({"hillshade-illumination-direction":new pn(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new pn(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new pn(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new pn(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new pn(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new pn(vt.paint_hillshade["hillshade-accent-color"])})},jp=(function(r){function s(h){r.call(this,h,Aa)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},s})(Ga),qu=b([{name:"a_pos",components:2,type:"Int16"}],4).members,nc=Gc,Ap=Gc;function Gc(r,s,h){h=h||2;var v,S,T,N,R,V,G,K=s&&s.length,ae=K?s[0]*h:r.length,de=Hu(r,0,ae,h,!0),le=[];if(!de||de.next===de.prev)return le;if(K&&(de=(function(Me,Ie,Ue,at){var ot,ct,wt,jt,Ct,Jt=[];for(ot=0,ct=Ie.length;ot<ct;ot++)wt=Ie[ot]*at,jt=ot<ct-1?Ie[ot+1]*at:Me.length,(Ct=Hu(Me,wt,jt,at,!1))===Ct.next&&(Ct.steiner=!0),Jt.push(zo(Ct));for(Jt.sort(Zb),ot=0;ot<Jt.length;ot++)Ue=Zc(Ue=mg(Jt[ot],Ue),Ue.next);return Ue})(r,s,de,h)),r.length>80*h){v=T=r[0],S=N=r[1];for(var fe=h;fe<ae;fe+=h)(R=r[fe])<v&&(v=R),(V=r[fe+1])<S&&(S=V),R>T&&(T=R),V>N&&(N=V);G=(G=Math.max(T-v,N-S))!==0?1/G:0}return Fi(de,le,h,v,S,G),le}function Hu(r,s,h,v,S){var T,N;if(S===Ip(r,s,h,v)>0)for(T=s;T<h;T+=v)N=yg(T,r[T],r[T+1],N);else for(T=h-v;T>=s;T-=v)N=yg(T,r[T],r[T+1],N);return N&&$u(N,N.next)&&(th(N),N=N.next),N}function Zc(r,s){if(!r)return r;s||(s=r);var h,v=r;do if(h=!1,v.steiner||!$u(v,v.next)&&Ri(v.prev,v,v.next)!==0)v=v.next;else{if(th(v),(v=s=v.prev)===v.next)break;h=!0}while(h||v!==s);return s}function Fi(r,s,h,v,S,T,N){if(r){!N&&T&&(function(K,ae,de,le){var fe=K;do fe.z===null&&(fe.z=df(fe.x,fe.y,ae,de,le)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next;while(fe!==K);fe.prevZ.nextZ=null,fe.prevZ=null,(function(Me){var Ie,Ue,at,ot,ct,wt,jt,Ct,Jt=1;do{for(Ue=Me,Me=null,ct=null,wt=0;Ue;){for(wt++,at=Ue,jt=0,Ie=0;Ie<Jt&&(jt++,at=at.nextZ);Ie++);for(Ct=Jt;jt>0||Ct>0&&at;)jt!==0&&(Ct===0||!at||Ue.z<=at.z)?(ot=Ue,Ue=Ue.nextZ,jt--):(ot=at,at=at.nextZ,Ct--),ct?ct.nextZ=ot:Me=ot,ot.prevZ=ct,ct=ot;Ue=at}ct.nextZ=null,Jt*=2}while(wt>1)})(fe)})(r,v,S,T);for(var R,V,G=r;r.prev!==r.next;)if(R=r.prev,V=r.next,T?pg(r,v,S,T):fg(r))s.push(R.i/h),s.push(r.i/h),s.push(V.i/h),th(r),r=V.next,G=V.next;else if((r=V)===G){N?N===1?Fi(r=Mv(Zc(r),s,h),s,h,v,S,T,2):N===2&&Dv(r,s,h,v,S,T):Fi(Zc(r),s,h,v,S,T,1);break}}}function fg(r){var s=r.prev,h=r,v=r.next;if(Ri(s,h,v)>=0)return!1;for(var S=r.next.next;S!==r.prev;){if(Ui(s.x,s.y,h.x,h.y,v.x,v.y,S.x,S.y)&&Ri(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function pg(r,s,h,v){var S=r.prev,T=r,N=r.next;if(Ri(S,T,N)>=0)return!1;for(var R=S.x<T.x?S.x<N.x?S.x:N.x:T.x<N.x?T.x:N.x,V=S.y<T.y?S.y<N.y?S.y:N.y:T.y<N.y?T.y:N.y,G=S.x>T.x?S.x>N.x?S.x:N.x:T.x>N.x?T.x:N.x,K=S.y>T.y?S.y>N.y?S.y:N.y:T.y>N.y?T.y:N.y,ae=df(R,V,s,h,v),de=df(G,K,s,h,v),le=r.prevZ,fe=r.nextZ;le&&le.z>=ae&&fe&&fe.z<=de;){if(le!==r.prev&&le!==r.next&&Ui(S.x,S.y,T.x,T.y,N.x,N.y,le.x,le.y)&&Ri(le.prev,le,le.next)>=0||(le=le.prevZ,fe!==r.prev&&fe!==r.next&&Ui(S.x,S.y,T.x,T.y,N.x,N.y,fe.x,fe.y)&&Ri(fe.prev,fe,fe.next)>=0))return!1;fe=fe.nextZ}for(;le&&le.z>=ae;){if(le!==r.prev&&le!==r.next&&Ui(S.x,S.y,T.x,T.y,N.x,N.y,le.x,le.y)&&Ri(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;fe&&fe.z<=de;){if(fe!==r.prev&&fe!==r.next&&Ui(S.x,S.y,T.x,T.y,N.x,N.y,fe.x,fe.y)&&Ri(fe.prev,fe,fe.next)>=0)return!1;fe=fe.nextZ}return!0}function Mv(r,s,h){var v=r;do{var S=v.prev,T=v.next.next;!$u(S,T)&&Mp(S,v,v.next,T)&&Zu(S,T)&&Zu(T,S)&&(s.push(S.i/h),s.push(v.i/h),s.push(T.i/h),th(v),th(v.next),v=r=T),v=v.next}while(v!==r);return Zc(v)}function Dv(r,s,h,v,S,T){var N=r;do{for(var R=N.next.next;R!==N.prev;){if(N.i!==R.i&&Np(N,R)){var V=Dp(N,R);return N=Zc(N,N.next),V=Zc(V,V.next),Fi(N,s,h,v,S,T),void Fi(V,s,h,v,S,T)}R=R.next}N=N.next}while(N!==r)}function Zb(r,s){return r.x-s.x}function mg(r,s){var h=(function(T,N){var R,V=N,G=T.x,K=T.y,ae=-1/0;do{if(K<=V.y&&K>=V.next.y&&V.next.y!==V.y){var de=V.x+(K-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(de<=G&&de>ae){if(ae=de,de===G){if(K===V.y)return V;if(K===V.next.y)return V.next}R=V.x<V.next.x?V:V.next}}V=V.next}while(V!==N);if(!R)return null;if(G===ae)return R;var le,fe=R,Me=R.x,Ie=R.y,Ue=1/0;V=R;do G>=V.x&&V.x>=Me&&G!==V.x&&Ui(K<Ie?G:ae,K,Me,Ie,K<Ie?ae:G,K,V.x,V.y)&&(le=Math.abs(K-V.y)/(G-V.x),Zu(V,T)&&(le<Ue||le===Ue&&(V.x>R.x||V.x===R.x&&gg(R,V)))&&(R=V,Ue=le)),V=V.next;while(V!==fe);return R})(r,s);if(!h)return s;var v=Dp(h,r),S=Zc(h,h.next);return Zc(v,v.next),s===h?S:s}function gg(r,s){return Ri(r.prev,r,s.prev)<0&&Ri(s.next,r,r.next)<0}function df(r,s,h,v,S){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-h)*S)|r<<8))|r<<4))|r<<2))|r<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-v)*S)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function zo(r){var s=r,h=r;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==r);return h}function Ui(r,s,h,v,S,T,N,R){return(S-N)*(s-R)-(r-N)*(T-R)>=0&&(r-N)*(v-R)-(h-N)*(s-R)>=0&&(h-N)*(T-R)-(S-N)*(v-R)>=0}function Np(r,s){return r.next.i!==s.i&&r.prev.i!==s.i&&!(function(h,v){var S=h;do{if(S.i!==h.i&&S.next.i!==h.i&&S.i!==v.i&&S.next.i!==v.i&&Mp(S,S.next,h,v))return!0;S=S.next}while(S!==h);return!1})(r,s)&&(Zu(r,s)&&Zu(s,r)&&(function(h,v){var S=h,T=!1,N=(h.x+v.x)/2,R=(h.y+v.y)/2;do S.y>R!=S.next.y>R&&S.next.y!==S.y&&N<(S.next.x-S.x)*(R-S.y)/(S.next.y-S.y)+S.x&&(T=!T),S=S.next;while(S!==h);return T})(r,s)&&(Ri(r.prev,r,s.prev)||Ri(r,s.prev,s))||$u(r,s)&&Ri(r.prev,r,r.next)>0&&Ri(s.prev,s,s.next)>0)}function Ri(r,s,h){return(s.y-r.y)*(h.x-s.x)-(s.x-r.x)*(h.y-s.y)}function $u(r,s){return r.x===s.x&&r.y===s.y}function Mp(r,s,h,v){var S=Gu(Ri(r,s,h)),T=Gu(Ri(r,s,v)),N=Gu(Ri(h,v,r)),R=Gu(Ri(h,v,s));return S!==T&&N!==R||!(S!==0||!Ds(r,h,s))||!(T!==0||!Ds(r,v,s))||!(N!==0||!Ds(h,r,v))||!(R!==0||!Ds(h,s,v))}function Ds(r,s,h){return s.x<=Math.max(r.x,h.x)&&s.x>=Math.min(r.x,h.x)&&s.y<=Math.max(r.y,h.y)&&s.y>=Math.min(r.y,h.y)}function Gu(r){return r>0?1:r<0?-1:0}function Zu(r,s){return Ri(r.prev,r,r.next)<0?Ri(r,s,r.next)>=0&&Ri(r,r.prev,s)>=0:Ri(r,s,r.prev)<0||Ri(r,r.next,s)<0}function Dp(r,s){var h=new Pp(r.i,r.x,r.y),v=new Pp(s.i,s.x,s.y),S=r.next,T=s.prev;return r.next=s,s.prev=r,h.next=S,S.prev=h,v.next=h,h.prev=v,T.next=v,v.prev=T,v}function yg(r,s,h,v){var S=new Pp(r,s,h);return v?(S.next=v.next,S.prev=v,v.next.prev=S,v.next=S):(S.prev=S,S.next=S),S}function th(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Pp(r,s,h){this.i=r,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ip(r,s,h,v){for(var S=0,T=s,N=h-v;T<h;T+=v)S+=(r[N]-r[T])*(r[T+1]+r[N+1]),N=T;return S}function Pv(r,s,h,v,S){(function T(N,R,V,G,K){for(;G>V;){if(G-V>600){var ae=G-V+1,de=R-V+1,le=Math.log(ae),fe=.5*Math.exp(2*le/3),Me=.5*Math.sqrt(le*fe*(ae-fe)/ae)*(de-ae/2<0?-1:1),Ie=Math.max(V,Math.floor(R-de*fe/ae+Me)),Ue=Math.min(G,Math.floor(R+(ae-de)*fe/ae+Me));T(N,R,Ie,Ue,K)}var at=N[R],ot=V,ct=G;for(nh(N,V,R),K(N[G],at)>0&&nh(N,V,G);ot<ct;){for(nh(N,ot,ct),ot++,ct--;K(N[ot],at)<0;)ot++;for(;K(N[ct],at)>0;)ct--}K(N[V],at)===0?nh(N,V,ct):(ct++,nh(N,ct,G)),ct<=R&&(V=ct+1),R<=ct&&(G=ct-1)}})(r,s,h,v||r.length-1,S||vg)}function nh(r,s,h){var v=r[s];r[s]=r[h],r[h]=v}function vg(r,s){return r<s?-1:r>s?1:0}function Op(r,s){var h=r.length;if(h<=1)return[r];for(var v,S,T=[],N=0;N<h;N++){var R=Ke(r[N]);R!==0&&(r[N].area=Math.abs(R),S===void 0&&(S=R<0),S===R<0?(v&&T.push(v),v=[r[N]]):v.push(r[N]))}if(v&&T.push(v),s>1)for(var V=0;V<T.length;V++)T[V].length<=s||(Pv(T[V],s,1,T[V].length-1,Xb),T[V]=T[V].slice(0,s));return T}function Xb(r,s){return s.area-r.area}function Rp(r,s,h){for(var v=h.patternDependencies,S=!1,T=0,N=s;T<N.length;T+=1){var R=N[T].paint.get(r+"-pattern");R.isConstant()||(S=!0);var V=R.constantOr(null);V&&(S=!0,v[V.to]=!0,v[V.from]=!0)}return S}function Lp(r,s,h,v,S){for(var T=S.patternDependencies,N=0,R=s;N<R.length;N+=1){var V=R[N],G=V.paint.get(r+"-pattern").value;if(G.kind!=="constant"){var K=G.evaluate({zoom:v-1},h,{},S.availableImages),ae=G.evaluate({zoom:v},h,{},S.availableImages),de=G.evaluate({zoom:v+1},h,{},S.availableImages);K=K&&K.name?K.name:K,ae=ae&&ae.name?ae.name:ae,de=de&&de.name?de.name:de,T[K]=!0,T[ae]=!0,T[de]=!0,h.patterns[V.id]={min:K,mid:ae,max:de}}}return h}Gc.deviation=function(r,s,h,v){var S=s&&s.length,T=S?s[0]*h:r.length,N=Math.abs(Ip(r,0,T,h));if(S)for(var R=0,V=s.length;R<V;R++){var G=s[R]*h,K=R<V-1?s[R+1]*h:r.length;N-=Math.abs(Ip(r,G,K,h))}var ae=0;for(R=0;R<v.length;R+=3){var de=v[R]*h,le=v[R+1]*h,fe=v[R+2]*h;ae+=Math.abs((r[de]-r[fe])*(r[le+1]-r[de+1])-(r[de]-r[le])*(r[fe+1]-r[de+1]))}return N===0&&ae===0?0:Math.abs((ae-N)/N)},Gc.flatten=function(r){for(var s=r[0][0].length,h={vertices:[],holes:[],dimensions:s},v=0,S=0;S<r.length;S++){for(var T=0;T<r[S].length;T++)for(var N=0;N<s;N++)h.vertices.push(r[S][T][N]);S>0&&(v+=r[S-1].length,h.holes.push(v))}return h},nc.default=Ap;var Ps=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((function(s){return s.id})),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new P,this.indexArray=new ft,this.indexArray2=new _t,this.programConfigurations=new Ro(qu,r.layers,r.zoom),this.segments=new tr,this.segments2=new tr,this.stateDependentLayerIds=this.layers.filter((function(s){return s.isStateDependent()})).map((function(s){return s.id}))};Ps.prototype.populate=function(r,s){this.hasPattern=Rp("fill",this.layers,s);for(var h=this.layers[0].layout.get("fill-sort-key"),v=[],S=0,T=r;S<T.length;S+=1){var N=T[S],R=N.feature,V=N.id,G=N.index,K=N.sourceLayerIndex;if(this.layers[0]._featureFilter(new ti(this.zoom),R)){var ae=Wl(R),de=h?h.evaluate(R,{},s.availableImages):void 0,le={id:V,properties:R.properties,type:R.type,sourceLayerIndex:K,index:G,geometry:ae,patterns:{},sortKey:de};v.push(le)}}h&&v.sort((function(Ct,Jt){return Ct.sortKey-Jt.sortKey}));for(var fe=0,Me=v;fe<Me.length;fe+=1){var Ie=Me[fe],Ue=Ie,at=Ue.geometry,ot=Ue.index,ct=Ue.sourceLayerIndex;if(this.hasPattern){var wt=Lp("fill",this.layers,Ie,this.zoom,s);this.patternFeatures.push(wt)}else this.addFeature(Ie,at,ot,{});var jt=r[ot].feature;s.featureIndex.insert(jt,at,ot,ct,this.index)}},Ps.prototype.update=function(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)},Ps.prototype.addFeatures=function(r,s){for(var h=0,v=this.patternFeatures;h<v.length;h+=1){var S=v[h];this.addFeature(S,S.geometry,S.index,s)}},Ps.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ps.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ps.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,qu),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},Ps.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ps.prototype.addFeature=function(r,s,h,v){for(var S=0,T=Op(s,500);S<T.length;S+=1){for(var N=T[S],R=0,V=0,G=N;V<G.length;V+=1)R+=G[V].length;for(var K=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),ae=K.vertexLength,de=[],le=[],fe=0,Me=N;fe<Me.length;fe+=1){var Ie=Me[fe];if(Ie.length!==0){Ie!==N[0]&&le.push(de.length/2);var Ue=this.segments2.prepareSegment(Ie.length,this.layoutVertexArray,this.indexArray2),at=Ue.vertexLength;this.layoutVertexArray.emplaceBack(Ie[0].x,Ie[0].y),this.indexArray2.emplaceBack(at+Ie.length-1,at),de.push(Ie[0].x),de.push(Ie[0].y);for(var ot=1;ot<Ie.length;ot++)this.layoutVertexArray.emplaceBack(Ie[ot].x,Ie[ot].y),this.indexArray2.emplaceBack(at+ot-1,at+ot),de.push(Ie[ot].x),de.push(Ie[ot].y);Ue.vertexLength+=Ie.length,Ue.primitiveLength+=Ie.length}}for(var ct=nc(de,le),wt=0;wt<ct.length;wt+=3)this.indexArray.emplaceBack(ae+ct[wt],ae+ct[wt+1],ae+ct[wt+2]);K.vertexLength+=R,K.primitiveLength+=ct.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v)},fn("FillBucket",Ps,{omit:["layers","patternFeatures"]});var xg=new Ii({"fill-sort-key":new _n(vt.layout_fill["fill-sort-key"])}),Iv={paint:new Ii({"fill-antialias":new pn(vt.paint_fill["fill-antialias"]),"fill-opacity":new _n(vt.paint_fill["fill-opacity"]),"fill-color":new _n(vt.paint_fill["fill-color"]),"fill-outline-color":new _n(vt.paint_fill["fill-outline-color"]),"fill-translate":new pn(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new pn(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new go(vt.paint_fill["fill-pattern"])}),layout:xg},Ov=(function(r){function s(h){r.call(this,h,Iv)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.recalculate=function(h,v){r.prototype.recalculate.call(this,h,v);var S=this.paint._values["fill-outline-color"];S.value.kind==="constant"&&S.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},s.prototype.createBucket=function(h){return new Ps(h)},s.prototype.queryRadius=function(){return uf(this.paint.get("fill-translate"))},s.prototype.queryIntersectsFeature=function(h,v,S,T,N,R,V){return wp(Ql(h,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),R.angle,V),T)},s.prototype.isTileClipped=function(){return!0},s})(Ga),bg=b([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,_g=Xu;function Xu(r,s,h,v,S){this.properties={},this.extent=h,this.type=0,this._pbf=r,this._geometry=-1,this._keys=v,this._values=S,r.readFields(Kb,this,s)}function Kb(r,s,h){r==1?s.id=h.readVarint():r==2?(function(v,S){for(var T=v.readVarint()+v.pos;v.pos<T;){var N=S._keys[v.readVarint()],R=S._values[v.readVarint()];S.properties[N]=R}})(h,s):r==3?s.type=h.readVarint():r==4&&(s._geometry=h.pos)}function Rv(r){for(var s,h,v=0,S=0,T=r.length,N=T-1;S<T;N=S++)s=r[S],v+=((h=r[N]).x-s.x)*(s.y+h.y);return v}Xu.types=["Unknown","Point","LineString","Polygon"],Xu.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var s,h=r.readVarint()+r.pos,v=1,S=0,T=0,N=0,R=[];r.pos<h;){if(S<=0){var V=r.readVarint();v=7&V,S=V>>3}if(S--,v===1||v===2)T+=r.readSVarint(),N+=r.readSVarint(),v===1&&(s&&R.push(s),s=[]),s.push(new C(T,N));else{if(v!==7)throw new Error("unknown command "+v);s&&s.push(s[0].clone())}}return s&&R.push(s),R},Xu.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var s=r.readVarint()+r.pos,h=1,v=0,S=0,T=0,N=1/0,R=-1/0,V=1/0,G=-1/0;r.pos<s;){if(v<=0){var K=r.readVarint();h=7&K,v=K>>3}if(v--,h===1||h===2)(S+=r.readSVarint())<N&&(N=S),S>R&&(R=S),(T+=r.readSVarint())<V&&(V=T),T>G&&(G=T);else if(h!==7)throw new Error("unknown command "+h)}return[N,V,R,G]},Xu.prototype.toGeoJSON=function(r,s,h){var v,S,T=this.extent*Math.pow(2,h),N=this.extent*r,R=this.extent*s,V=this.loadGeometry(),G=Xu.types[this.type];function K(le){for(var fe=0;fe<le.length;fe++){var Me=le[fe],Ie=180-360*(Me.y+R)/T;le[fe]=[360*(Me.x+N)/T-180,360/Math.PI*Math.atan(Math.exp(Ie*Math.PI/180))-90]}}switch(this.type){case 1:var ae=[];for(v=0;v<V.length;v++)ae[v]=V[v][0];K(V=ae);break;case 2:for(v=0;v<V.length;v++)K(V[v]);break;case 3:for(V=(function(le){var fe=le.length;if(fe<=1)return[le];for(var Me,Ie,Ue=[],at=0;at<fe;at++){var ot=Rv(le[at]);ot!==0&&(Ie===void 0&&(Ie=ot<0),Ie===ot<0?(Me&&Ue.push(Me),Me=[le[at]]):Me.push(le[at]))}return Me&&Ue.push(Me),Ue})(V),v=0;v<V.length;v++)for(S=0;S<V[v].length;S++)K(V[v][S])}V.length===1?V=V[0]:G="Multi"+G;var de={type:"Feature",geometry:{type:G,coordinates:V},properties:this.properties};return"id"in this&&(de.id=this.id),de};var Ku=wg;function wg(r,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(zp,this,s),this.length=this._features.length}function zp(r,s,h){r===15?s.version=h.readVarint():r===1?s.name=h.readString():r===5?s.extent=h.readVarint():r===2?s._features.push(h.pos):r===3?s._keys.push(h.readString()):r===4&&s._values.push((function(v){for(var S=null,T=v.readVarint()+v.pos;v.pos<T;){var N=v.readVarint()>>3;S=N===1?v.readString():N===2?v.readFloat():N===3?v.readDouble():N===4?v.readVarint64():N===5?v.readVarint():N===6?v.readSVarint():N===7?v.readBoolean():null}return S})(h))}function Bp(r,s,h){if(r===3){var v=new Ku(h,h.readVarint()+h.pos);v.length&&(s[v.name]=v)}}wg.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var s=this._pbf.readVarint()+this._pbf.pos;return new _g(this._pbf,s,this.extent,this._keys,this._values)};var Yu={VectorTile:function(r,s){this.layers=r.readFields(Bp,{},s)},VectorTileFeature:_g,VectorTileLayer:Ku},Sg=Yu.VectorTileFeature.types,Eg=Math.pow(2,13);function rh(r,s,h,v,S,T,N,R){r.emplaceBack(s,h,2*Math.floor(v*Eg)+N,S*Eg*2,T*Eg*2,Math.round(R))}var Is=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((function(s){return s.id})),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new U,this.indexArray=new ft,this.programConfigurations=new Ro(bg,r.layers,r.zoom),this.segments=new tr,this.stateDependentLayerIds=this.layers.filter((function(s){return s.isStateDependent()})).map((function(s){return s.id}))};function Lv(r,s){return r.x===s.x&&(r.x<0||r.x>8192)||r.y===s.y&&(r.y<0||r.y>8192)}function zv(r){return r.every((function(s){return s.x<0}))||r.every((function(s){return s.x>8192}))||r.every((function(s){return s.y<0}))||r.every((function(s){return s.y>8192}))}Is.prototype.populate=function(r,s){this.features=[],this.hasPattern=Rp("fill-extrusion",this.layers,s);for(var h=0,v=r;h<v.length;h+=1){var S=v[h],T=S.feature,N=S.id,R=S.index,V=S.sourceLayerIndex;if(this.layers[0]._featureFilter(new ti(this.zoom),T)){var G=Wl(T),K={id:N,sourceLayerIndex:V,index:R,geometry:G,properties:T.properties,type:T.type,patterns:{}};T.id!==void 0&&(K.id=T.id),this.hasPattern?this.features.push(Lp("fill-extrusion",this.layers,K,this.zoom,s)):this.addFeature(K,G,R,{}),s.featureIndex.insert(T,G,R,V,this.index,!0)}}},Is.prototype.addFeatures=function(r,s){for(var h=0,v=this.features;h<v.length;h+=1){var S=v[h],T=S.geometry;this.addFeature(S,T,S.index,s)}},Is.prototype.update=function(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)},Is.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Is.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,bg),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Is.prototype.addFeature=function(r,s,h,v){for(var S=0,T=Op(s,500);S<T.length;S+=1){for(var N=T[S],R=0,V=0,G=N;V<G.length;V+=1)R+=G[V].length;for(var K=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),ae=0,de=N;ae<de.length;ae+=1){var le=de[ae];if(le.length!==0&&!zv(le))for(var fe=0,Me=0;Me<le.length;Me++){var Ie=le[Me];if(Me>=1){var Ue=le[Me-1];if(!Lv(Ie,Ue)){K.vertexLength+4>tr.MAX_VERTEX_ARRAY_LENGTH&&(K=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var at=Ie.sub(Ue)._perp()._unit(),ot=Ue.dist(Ie);fe+ot>32768&&(fe=0),rh(this.layoutVertexArray,Ie.x,Ie.y,at.x,at.y,0,0,fe),rh(this.layoutVertexArray,Ie.x,Ie.y,at.x,at.y,0,1,fe),fe+=ot,rh(this.layoutVertexArray,Ue.x,Ue.y,at.x,at.y,0,0,fe),rh(this.layoutVertexArray,Ue.x,Ue.y,at.x,at.y,0,1,fe);var ct=K.vertexLength;this.indexArray.emplaceBack(ct,ct+2,ct+1),this.indexArray.emplaceBack(ct+1,ct+2,ct+3),K.vertexLength+=4,K.primitiveLength+=2}}}}if(K.vertexLength+R>tr.MAX_VERTEX_ARRAY_LENGTH&&(K=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray)),Sg[r.type]==="Polygon"){for(var wt=[],jt=[],Ct=K.vertexLength,Jt=0,nn=N;Jt<nn.length;Jt+=1){var ln=nn[Jt];if(ln.length!==0){ln!==N[0]&&jt.push(wt.length/2);for(var sn=0;sn<ln.length;sn++){var cn=ln[sn];rh(this.layoutVertexArray,cn.x,cn.y,0,0,1,1,0),wt.push(cn.x),wt.push(cn.y)}}}for(var rn=nc(wt,jt),Gt=0;Gt<rn.length;Gt+=3)this.indexArray.emplaceBack(Ct+rn[Gt],Ct+rn[Gt+2],Ct+rn[Gt+1]);K.primitiveLength+=rn.length/3,K.vertexLength+=R}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,h,v)},fn("FillExtrusionBucket",Is,{omit:["layers","features"]});var Bv={paint:new Ii({"fill-extrusion-opacity":new pn(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _n(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new pn(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new pn(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new go(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _n(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _n(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new pn(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Cg=(function(r){function s(h){r.call(this,h,Bv)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.createBucket=function(h){return new Is(h)},s.prototype.queryRadius=function(){return uf(this.paint.get("fill-extrusion-translate"))},s.prototype.is3D=function(){return!0},s.prototype.queryIntersectsFeature=function(h,v,S,T,N,R,V,G){var K=Ql(h,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),R.angle,V),ae=this.paint.get("fill-extrusion-height").evaluate(v,S),de=this.paint.get("fill-extrusion-base").evaluate(v,S),le=(function(Me,Ie,Ue,at){for(var ot=[],ct=0,wt=Me;ct<wt.length;ct+=1){var jt=wt[ct],Ct=[jt.x,jt.y,at,1];bo(Ct,Ct,Ie),ot.push(new C(Ct[0]/Ct[3],Ct[1]/Ct[3]))}return ot})(K,G,0,0),fe=(function(Me,Ie,Ue,at){for(var ot=[],ct=[],wt=at[8]*Ie,jt=at[9]*Ie,Ct=at[10]*Ie,Jt=at[11]*Ie,nn=at[8]*Ue,ln=at[9]*Ue,sn=at[10]*Ue,cn=at[11]*Ue,rn=0,Gt=Me;rn<Gt.length;rn+=1){for(var Kn=Gt[rn],Ir=[],br=[],Ln=0,or=Kn;Ln<or.length;Ln+=1){var dr=or[Ln],Yn=dr.x,cr=dr.y,_r=at[0]*Yn+at[4]*cr+at[12],ci=at[1]*Yn+at[5]*cr+at[13],Mi=at[2]*Yn+at[6]*cr+at[14],Ua=at[3]*Yn+at[7]*cr+at[15],Va=Mi+Ct,Ki=Ua+Jt,pa=_r+nn,Yi=ci+ln,ma=Mi+sn,ca=Ua+cn,fi=new C((_r+wt)/Ki,(ci+jt)/Ki);fi.z=Va/Ki,Ir.push(fi);var Vi=new C(pa/ca,Yi/ca);Vi.z=ma/ca,br.push(Vi)}ot.push(Ir),ct.push(br)}return[ot,ct]})(T,de,ae,G);return(function(Me,Ie,Ue){var at=1/0;wp(Ue,Ie)&&(at=Tg(Ue,Ie[0]));for(var ot=0;ot<Ie.length;ot++)for(var ct=Ie[ot],wt=Me[ot],jt=0;jt<ct.length-1;jt++){var Ct=ct[jt],Jt=ct[jt+1],nn=wt[jt],ln=wt[jt+1],sn=[Ct,Jt,ln,nn,Ct];dg(Ue,sn)&&(at=Math.min(at,Tg(Ue,sn)))}return at!==1/0&&at})(fe[0],fe[1],le)},s})(Ga);function ih(r,s){return r.x*s.x+r.y*s.y}function Tg(r,s){if(r.length===1){var h=s[0],v=s[1],S=s[3],T=r[0],N=v.sub(h),R=S.sub(h),V=T.sub(h),G=ih(N,N),K=ih(N,R),ae=ih(R,R),de=ih(V,N),le=ih(V,R),fe=G*ae-K*K,Me=(ae*de-K*le)/fe,Ie=(G*le-K*de)/fe,Ue=1-Me-Ie;return h.z*Ue+v.z*Me+S.z*Ie}for(var at=1/0,ot=0,ct=s;ot<ct.length;ot+=1){var wt=ct[ot];at=Math.min(at,wt.z)}return at}var Fp=b([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Fv=Yu.VectorTileFeature.types,Uv=Math.cos(Math.PI/180*37.5),Vv=Math.pow(2,14)/.5,ro=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((function(s){return s.id})),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $,this.indexArray=new ft,this.programConfigurations=new Ro(Fp,r.layers,r.zoom),this.segments=new tr,this.stateDependentLayerIds=this.layers.filter((function(s){return s.isStateDependent()})).map((function(s){return s.id}))};ro.prototype.populate=function(r,s){this.hasPattern=Rp("line",this.layers,s);for(var h=this.layers[0].layout.get("line-sort-key"),v=[],S=0,T=r;S<T.length;S+=1){var N=T[S],R=N.feature,V=N.index,G=N.sourceLayerIndex;if(this.layers[0]._featureFilter(new ti(this.zoom),R)){var K=Wl(R),ae=h?h.evaluate(R,{}):void 0,de={id:R.id,properties:R.properties,type:R.type,sourceLayerIndex:G,index:V,geometry:K,patterns:{},sortKey:ae};v.push(de)}}h&&v.sort((function(jt,Ct){return jt.sortKey-Ct.sortKey}));for(var le=0,fe=v;le<fe.length;le+=1){var Me=fe[le],Ie=Me,Ue=Ie.geometry,at=Ie.index,ot=Ie.sourceLayerIndex;if(this.hasPattern){var ct=Lp("line",this.layers,Me,this.zoom,s);this.patternFeatures.push(ct)}else this.addFeature(Me,Ue,at,{});var wt=r[at].feature;s.featureIndex.insert(wt,Ue,at,ot,this.index)}},ro.prototype.update=function(r,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,h)},ro.prototype.addFeatures=function(r,s){for(var h=0,v=this.patternFeatures;h<v.length;h+=1){var S=v[h];this.addFeature(S,S.geometry,S.index,s)}},ro.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ro.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ro.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Fp),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ro.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ro.prototype.addFeature=function(r,s,h,v){for(var S=this.layers[0].layout,T=S.get("line-join").evaluate(r,{}),N=S.get("line-cap"),R=S.get("line-miter-limit"),V=S.get("line-round-limit"),G=0,K=s;G<K.length;G+=1){var ae=K[G];this.addLine(ae,r,T,N,R,V,h,v)}},ro.prototype.addLine=function(r,s,h,v,S,T,N,R){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+s.properties.mapbox_clip_start,this.clipEnd=+s.properties.mapbox_clip_end;for(var V=0;V<r.length-1;V++)this.totalDistance+=r[V].dist(r[V+1])}for(var G=Fv[s.type]==="Polygon",K=r.length;K>=2&&r[K-1].equals(r[K-2]);)K--;for(var ae=0;ae<K-1&&r[ae].equals(r[ae+1]);)ae++;if(!(K<(G?3:2))){h==="bevel"&&(S=1.05);var de,le=this.overscaling<=16?122880/(512*this.overscaling):0,fe=this.segments.prepareSegment(10*K,this.layoutVertexArray,this.indexArray),Me=void 0,Ie=void 0,Ue=void 0,at=void 0;this.e1=this.e2=-1,G&&(de=r[K-2],at=r[ae].sub(de)._unit()._perp());for(var ot=ae;ot<K;ot++)if(!(Ie=G&&ot===K-1?r[ae+1]:r[ot+1])||!r[ot].equals(Ie)){at&&(Ue=at),de&&(Me=de),de=r[ot],at=Ie?Ie.sub(de)._unit()._perp():Ue;var ct=(Ue=Ue||at).add(at);ct.x===0&&ct.y===0||ct._unit();var wt=Ue.x*at.x+Ue.y*at.y,jt=ct.x*at.x+ct.y*at.y,Ct=jt!==0?1/jt:1/0,Jt=2*Math.sqrt(2-2*jt),nn=jt<Uv&&Me&&Ie,ln=Ue.x*at.y-Ue.y*at.x>0;if(nn&&ot>ae){var sn=de.dist(Me);if(sn>2*le){var cn=de.sub(de.sub(Me)._mult(le/sn)._round());this.updateDistance(Me,cn),this.addCurrentVertex(cn,Ue,0,0,fe),Me=cn}}var rn=Me&&Ie,Gt=rn?h:G?"butt":v;if(rn&&Gt==="round"&&(Ct<T?Gt="miter":Ct<=2&&(Gt="fakeround")),Gt==="miter"&&Ct>S&&(Gt="bevel"),Gt==="bevel"&&(Ct>2&&(Gt="flipbevel"),Ct<S&&(Gt="miter")),Me&&this.updateDistance(Me,de),Gt==="miter")ct._mult(Ct),this.addCurrentVertex(de,ct,0,0,fe);else if(Gt==="flipbevel"){if(Ct>100)ct=at.mult(-1);else{var Kn=Ct*Ue.add(at).mag()/Ue.sub(at).mag();ct._perp()._mult(Kn*(ln?-1:1))}this.addCurrentVertex(de,ct,0,0,fe),this.addCurrentVertex(de,ct.mult(-1),0,0,fe)}else if(Gt==="bevel"||Gt==="fakeround"){var Ir=-Math.sqrt(Ct*Ct-1),br=ln?Ir:0,Ln=ln?0:Ir;if(Me&&this.addCurrentVertex(de,Ue,br,Ln,fe),Gt==="fakeround")for(var or=Math.round(180*Jt/Math.PI/20),dr=1;dr<or;dr++){var Yn=dr/or;if(Yn!==.5){var cr=Yn-.5;Yn+=Yn*cr*(Yn-1)*((1.0904+wt*(wt*(3.55645-1.43519*wt)-3.2452))*cr*cr+(.848013+wt*(.215638*wt-1.06021)))}var _r=at.sub(Ue)._mult(Yn)._add(Ue)._unit()._mult(ln?-1:1);this.addHalfVertex(de,_r.x,_r.y,!1,ln,0,fe)}Ie&&this.addCurrentVertex(de,at,-br,-Ln,fe)}else if(Gt==="butt")this.addCurrentVertex(de,ct,0,0,fe);else if(Gt==="square"){var ci=Me?1:-1;this.addCurrentVertex(de,ct,ci,ci,fe)}else Gt==="round"&&(Me&&(this.addCurrentVertex(de,Ue,0,0,fe),this.addCurrentVertex(de,Ue,1,1,fe,!0)),Ie&&(this.addCurrentVertex(de,at,-1,-1,fe,!0),this.addCurrentVertex(de,at,0,0,fe)));if(nn&&ot<K-1){var Mi=de.dist(Ie);if(Mi>2*le){var Ua=de.add(Ie.sub(de)._mult(le/Mi)._round());this.updateDistance(de,Ua),this.addCurrentVertex(Ua,at,0,0,fe),de=Ua}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,N,R)}},ro.prototype.addCurrentVertex=function(r,s,h,v,S,T){T===void 0&&(T=!1);var N=s.x+s.y*h,R=s.y-s.x*h,V=-s.x+s.y*v,G=-s.y-s.x*v;this.addHalfVertex(r,N,R,T,!1,h,S),this.addHalfVertex(r,V,G,T,!0,-v,S),this.distance>Vv/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,s,h,v,S,T))},ro.prototype.addHalfVertex=function(r,s,h,v,S,T,N){var R=r.x,V=r.y,G=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((R<<1)+(v?1:0),(V<<1)+(S?1:0),Math.round(63*s)+128,Math.round(63*h)+128,1+(T===0?0:T<0?-1:1)|(63&G)<<2,G>>6);var K=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,K),N.primitiveLength++),S?this.e2=K:this.e1=K},ro.prototype.updateDistance=function(r,s){this.distance+=r.dist(s),this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Vv-1):this.distance},fn("LineBucket",ro,{omit:["layers","patternFeatures"]});var qv=new Ii({"line-cap":new pn(vt.layout_line["line-cap"]),"line-join":new _n(vt.layout_line["line-join"]),"line-miter-limit":new pn(vt.layout_line["line-miter-limit"]),"line-round-limit":new pn(vt.layout_line["line-round-limit"]),"line-sort-key":new _n(vt.layout_line["line-sort-key"])}),kg={paint:new Ii({"line-opacity":new _n(vt.paint_line["line-opacity"]),"line-color":new _n(vt.paint_line["line-color"]),"line-translate":new pn(vt.paint_line["line-translate"]),"line-translate-anchor":new pn(vt.paint_line["line-translate-anchor"]),"line-width":new _n(vt.paint_line["line-width"]),"line-gap-width":new _n(vt.paint_line["line-gap-width"]),"line-offset":new _n(vt.paint_line["line-offset"]),"line-blur":new _n(vt.paint_line["line-blur"]),"line-dasharray":new El(vt.paint_line["line-dasharray"]),"line-pattern":new go(vt.paint_line["line-pattern"]),"line-gradient":new Uc(vt.paint_line["line-gradient"])}),layout:qv},Up=new((function(r){function s(){r.apply(this,arguments)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.possiblyEvaluate=function(h,v){return v=new ti(Math.floor(v.zoom),{now:v.now,fadeDuration:v.fadeDuration,zoomHistory:v.zoomHistory,transition:v.transition}),r.prototype.possiblyEvaluate.call(this,h,v)},s.prototype.evaluate=function(h,v,S,T){return v=B({},v,{zoom:Math.floor(v.zoom)}),r.prototype.evaluate.call(this,h,v,S,T)},s})(_n))(kg.paint.properties["line-width"].specification);Up.useIntegerZoom=!0;var Hv=(function(r){function s(h){r.call(this,h,kg)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype._handleSpecialPaintPropertyUpdate=function(h){h==="line-gradient"&&this._updateGradient()},s.prototype._updateGradient=function(){var h=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=yr(h,"lineProgress"),this.gradientTexture=null},s.prototype.recalculate=function(h,v){r.prototype.recalculate.call(this,h,v),this.paint._values["line-floorwidth"]=Up.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)},s.prototype.createBucket=function(h){return new ro(h)},s.prototype.queryRadius=function(h){var v=h,S=jg(Jd("line-width",this,v),Jd("line-gap-width",this,v)),T=Jd("line-offset",this,v);return S/2+Math.abs(T)+uf(this.paint.get("line-translate"))},s.prototype.queryIntersectsFeature=function(h,v,S,T,N,R,V){var G=Ql(h,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),R.angle,V),K=V/2*jg(this.paint.get("line-width").evaluate(v,S),this.paint.get("line-gap-width").evaluate(v,S)),ae=this.paint.get("line-offset").evaluate(v,S);return ae&&(T=(function(de,le){for(var fe=[],Me=new C(0,0),Ie=0;Ie<de.length;Ie++){for(var Ue=de[Ie],at=[],ot=0;ot<Ue.length;ot++){var ct=Ue[ot-1],wt=Ue[ot],jt=Ue[ot+1],Ct=ot===0?Me:wt.sub(ct)._unit()._perp(),Jt=ot===Ue.length-1?Me:jt.sub(wt)._unit()._perp(),nn=Ct._add(Jt)._unit(),ln=nn.x*Jt.x+nn.y*Jt.y;nn._mult(1/ln),at.push(nn._mult(le)._add(wt))}fe.push(at)}return fe})(T,ae*V)),(function(de,le,fe){for(var Me=0;Me<le.length;Me++){var Ie=le[Me];if(de.length>=3){for(var Ue=0;Ue<Ie.length;Ue++)if(jl(de,Ie[Ue]))return!0}if(hg(de,Ie,fe))return!0}return!1})(G,T,K)},s.prototype.isTileClipped=function(){return!0},s})(Ga);function jg(r,s){return s>0?s+2*r:r}var Ag=b([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Yb=b([{name:"a_projected_pos",components:3,type:"Float32"}],4),$v=(b([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),b([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ah=(b([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),b([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Vp=b([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);b([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),b([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),b([{type:"Float32",name:"offsetX"}]),b([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function qp(r,s,h){return r.sections.forEach((function(v){v.text=(function(S,T,N){var R=T.layout.get("text-transform").evaluate(N,{});return R==="uppercase"?S=S.toLocaleUpperCase():R==="lowercase"&&(S=S.toLocaleLowerCase()),Pi.applyArabicShaping&&(S=Pi.applyArabicShaping(S)),S})(v.text,s,h)})),r}var oh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ng=function(r,s,h,v,S){var T,N,R=8*S-v-1,V=(1<<R)-1,G=V>>1,K=-7,ae=S-1,de=-1,le=r[s+ae];for(ae+=de,T=le&(1<<-K)-1,le>>=-K,K+=R;K>0;T=256*T+r[s+ae],ae+=de,K-=8);for(N=T&(1<<-K)-1,T>>=-K,K+=v;K>0;N=256*N+r[s+ae],ae+=de,K-=8);if(T===0)T=1-G;else{if(T===V)return N?NaN:1/0*(le?-1:1);N+=Math.pow(2,v),T-=G}return(le?-1:1)*N*Math.pow(2,T-v)},sh=function(r,s,h,v,S,T){var N,R,V,G=8*T-S-1,K=(1<<G)-1,ae=K>>1,de=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,le=0,fe=1,Me=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(R=isNaN(s)?1:0,N=K):(N=Math.floor(Math.log(s)/Math.LN2),s*(V=Math.pow(2,-N))<1&&(N--,V*=2),(s+=N+ae>=1?de/V:de*Math.pow(2,1-ae))*V>=2&&(N++,V/=2),N+ae>=K?(R=0,N=K):N+ae>=1?(R=(s*V-1)*Math.pow(2,S),N+=ae):(R=s*Math.pow(2,ae-1)*Math.pow(2,S),N=0));S>=8;r[h+le]=255&R,le+=fe,R/=256,S-=8);for(N=N<<S|R,G+=S;G>0;r[h+le]=255&N,le+=fe,N/=256,G-=8);r[h+le-fe]|=128*Me},hf=Yr;function Yr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Yr.Varint=0,Yr.Fixed64=1,Yr.Bytes=2,Yr.Fixed32=5;var Mg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function el(r){return r.type===Yr.Bytes?r.readVarint()+r.pos:r.pos+1}function Xc(r,s,h){return h?4294967296*s+(r>>>0):4294967296*(s>>>0)+(r>>>0)}function Dg(r,s,h){var v=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(v);for(var S=h.pos-1;S>=r;S--)h.buf[S+v]=h.buf[S]}function Gv(r,s){for(var h=0;h<r.length;h++)s.writeVarint(r[h])}function Wu(r,s){for(var h=0;h<r.length;h++)s.writeSVarint(r[h])}function Zv(r,s){for(var h=0;h<r.length;h++)s.writeFloat(r[h])}function Xv(r,s){for(var h=0;h<r.length;h++)s.writeDouble(r[h])}function Kv(r,s){for(var h=0;h<r.length;h++)s.writeBoolean(r[h])}function Hp(r,s){for(var h=0;h<r.length;h++)s.writeFixed32(r[h])}function Yv(r,s){for(var h=0;h<r.length;h++)s.writeSFixed32(r[h])}function Pg(r,s){for(var h=0;h<r.length;h++)s.writeFixed64(r[h])}function Wv(r,s){for(var h=0;h<r.length;h++)s.writeSFixed64(r[h])}function ff(r,s){return(r[s]|r[s+1]<<8|r[s+2]<<16)+16777216*r[s+3]}function lh(r,s,h){r[h]=s,r[h+1]=s>>>8,r[h+2]=s>>>16,r[h+3]=s>>>24}function $p(r,s){return(r[s]|r[s+1]<<8|r[s+2]<<16)+(r[s+3]<<24)}Yr.prototype={destroy:function(){this.buf=null},readFields:function(r,s,h){for(h=h||this.length;this.pos<h;){var v=this.readVarint(),S=v>>3,T=this.pos;this.type=7&v,r(S,s,this),this.pos===T&&this.skip(v)}return s},readMessage:function(r,s){return this.readFields(r,s,this.readVarint()+this.pos)},readFixed32:function(){var r=ff(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=$p(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=ff(this.buf,this.pos)+4294967296*ff(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=ff(this.buf,this.pos)+4294967296*$p(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=Ng(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Ng(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var s,h,v=this.buf;return s=127&(h=v[this.pos++]),h<128?s:(s|=(127&(h=v[this.pos++]))<<7,h<128?s:(s|=(127&(h=v[this.pos++]))<<14,h<128?s:(s|=(127&(h=v[this.pos++]))<<21,h<128?s:(function(S,T,N){var R,V,G=N.buf;if(V=G[N.pos++],R=(112&V)>>4,V<128||(V=G[N.pos++],R|=(127&V)<<3,V<128)||(V=G[N.pos++],R|=(127&V)<<10,V<128)||(V=G[N.pos++],R|=(127&V)<<17,V<128)||(V=G[N.pos++],R|=(127&V)<<24,V<128)||(V=G[N.pos++],R|=(1&V)<<31,V<128))return Xc(S,R,T);throw new Error("Expected varint not more than 10 bytes")})(s|=(15&(h=v[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,s=this.pos;return this.pos=r,r-s>=12&&Mg?(function(h,v,S){return Mg.decode(h.subarray(v,S))})(this.buf,s,r):(function(h,v,S){for(var T="",N=v;N<S;){var R,V,G,K=h[N],ae=null,de=K>239?4:K>223?3:K>191?2:1;if(N+de>S)break;de===1?K<128&&(ae=K):de===2?(192&(R=h[N+1]))==128&&(ae=(31&K)<<6|63&R)<=127&&(ae=null):de===3?(R=h[N+1],V=h[N+2],(192&R)==128&&(192&V)==128&&((ae=(15&K)<<12|(63&R)<<6|63&V)<=2047||ae>=55296&&ae<=57343)&&(ae=null)):de===4&&(R=h[N+1],V=h[N+2],G=h[N+3],(192&R)==128&&(192&V)==128&&(192&G)==128&&((ae=(15&K)<<18|(63&R)<<12|(63&V)<<6|63&G)<=65535||ae>=1114112)&&(ae=null)),ae===null?(ae=65533,de=1):ae>65535&&(ae-=65536,T+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),T+=String.fromCharCode(ae),N+=de}return T})(this.buf,s,r)},readBytes:function(){var r=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,r);return this.pos=r,s},readPackedVarint:function(r,s){if(this.type!==Yr.Bytes)return r.push(this.readVarint(s));var h=el(this);for(r=r||[];this.pos<h;)r.push(this.readVarint(s));return r},readPackedSVarint:function(r){if(this.type!==Yr.Bytes)return r.push(this.readSVarint());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Yr.Bytes)return r.push(this.readBoolean());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Yr.Bytes)return r.push(this.readFloat());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Yr.Bytes)return r.push(this.readDouble());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Yr.Bytes)return r.push(this.readFixed32());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Yr.Bytes)return r.push(this.readSFixed32());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Yr.Bytes)return r.push(this.readFixed64());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Yr.Bytes)return r.push(this.readSFixed64());var s=el(this);for(r=r||[];this.pos<s;)r.push(this.readSFixed64());return r},skip:function(r){var s=7&r;if(s===Yr.Varint)for(;this.buf[this.pos++]>127;);else if(s===Yr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Yr.Fixed32)this.pos+=4;else{if(s!==Yr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(r,s){this.writeVarint(r<<3|s)},realloc:function(r){for(var s=this.length||16;s<this.pos+r;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),lh(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),lh(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),lh(this.buf,-1&r,this.pos),lh(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),lh(this.buf,-1&r,this.pos),lh(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?(function(s,h){var v,S;if(s>=0?(v=s%4294967296|0,S=s/4294967296|0):(S=~(-s/4294967296),4294967295^(v=~(-s%4294967296))?v=v+1|0:(v=0,S=S+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),(function(T,N,R){R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos]=127&T})(v,0,h),(function(T,N){var R=(7&T)<<4;N.buf[N.pos++]|=R|((T>>>=3)?128:0),T&&(N.buf[N.pos++]=127&T|((T>>>=7)?128:0),T&&(N.buf[N.pos++]=127&T|((T>>>=7)?128:0),T&&(N.buf[N.pos++]=127&T|((T>>>=7)?128:0),T&&(N.buf[N.pos++]=127&T|((T>>>=7)?128:0),T&&(N.buf[N.pos++]=127&T)))))})(S,h)})(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var s=this.pos;this.pos=(function(v,S,T){for(var N,R,V=0;V<S.length;V++){if((N=S.charCodeAt(V))>55295&&N<57344){if(!R){N>56319||V+1===S.length?(v[T++]=239,v[T++]=191,v[T++]=189):R=N;continue}if(N<56320){v[T++]=239,v[T++]=191,v[T++]=189,R=N;continue}N=R-55296<<10|N-56320|65536,R=null}else R&&(v[T++]=239,v[T++]=191,v[T++]=189,R=null);N<128?v[T++]=N:(N<2048?v[T++]=N>>6|192:(N<65536?v[T++]=N>>12|224:(v[T++]=N>>18|240,v[T++]=N>>12&63|128),v[T++]=N>>6&63|128),v[T++]=63&N|128)}return T})(this.buf,r,this.pos);var h=this.pos-s;h>=128&&Dg(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(r){this.realloc(4),sh(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),sh(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var s=r.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=r[h]},writeRawMessage:function(r,s){this.pos++;var h=this.pos;r(s,this);var v=this.pos-h;v>=128&&Dg(h,v,this),this.pos=h-1,this.writeVarint(v),this.pos+=v},writeMessage:function(r,s,h){this.writeTag(r,Yr.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(r,s){s.length&&this.writeMessage(r,Gv,s)},writePackedSVarint:function(r,s){s.length&&this.writeMessage(r,Wu,s)},writePackedBoolean:function(r,s){s.length&&this.writeMessage(r,Kv,s)},writePackedFloat:function(r,s){s.length&&this.writeMessage(r,Zv,s)},writePackedDouble:function(r,s){s.length&&this.writeMessage(r,Xv,s)},writePackedFixed32:function(r,s){s.length&&this.writeMessage(r,Hp,s)},writePackedSFixed32:function(r,s){s.length&&this.writeMessage(r,Yv,s)},writePackedFixed64:function(r,s){s.length&&this.writeMessage(r,Pg,s)},writePackedSFixed64:function(r,s){s.length&&this.writeMessage(r,Wv,s)},writeBytesField:function(r,s){this.writeTag(r,Yr.Bytes),this.writeBytes(s)},writeFixed32Field:function(r,s){this.writeTag(r,Yr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(r,s){this.writeTag(r,Yr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(r,s){this.writeTag(r,Yr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(r,s){this.writeTag(r,Yr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(r,s){this.writeTag(r,Yr.Varint),this.writeVarint(s)},writeSVarintField:function(r,s){this.writeTag(r,Yr.Varint),this.writeSVarint(s)},writeStringField:function(r,s){this.writeTag(r,Yr.Bytes),this.writeString(s)},writeFloatField:function(r,s){this.writeTag(r,Yr.Fixed32),this.writeFloat(s)},writeDoubleField:function(r,s){this.writeTag(r,Yr.Fixed64),this.writeDouble(s)},writeBooleanField:function(r,s){this.writeVarintField(r,!!s)}};function Na(r,s,h){r===1&&h.readMessage(io,s)}function io(r,s,h){if(r===3){var v=h.readMessage(Qv,{}),S=v.id,T=v.bitmap,N=v.width,R=v.height,V=v.left,G=v.top,K=v.advance;s.push({id:S,bitmap:new Oi({width:N+6,height:R+6},T),metrics:{width:N,height:R,left:V,top:G,advance:K}})}}function Qv(r,s,h){r===1?s.id=h.readVarint():r===2?s.bitmap=h.readBytes():r===3?s.width=h.readVarint():r===4?s.height=h.readVarint():r===5?s.left=h.readSVarint():r===6?s.top=h.readSVarint():r===7&&(s.advance=h.readVarint())}function Ig(r){for(var s=0,h=0,v=0,S=r;v<S.length;v+=1){var T=S[v];s+=T.w*T.h,h=Math.max(h,T.w)}r.sort((function(Me,Ie){return Ie.h-Me.h}));for(var N=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}],R=0,V=0,G=0,K=r;G<K.length;G+=1)for(var ae=K[G],de=N.length-1;de>=0;de--){var le=N[de];if(!(ae.w>le.w||ae.h>le.h)){if(ae.x=le.x,ae.y=le.y,V=Math.max(V,ae.y+ae.h),R=Math.max(R,ae.x+ae.w),ae.w===le.w&&ae.h===le.h){var fe=N.pop();de<N.length&&(N[de]=fe)}else ae.h===le.h?(le.x+=ae.w,le.w-=ae.w):ae.w===le.w?(le.y+=ae.h,le.h-=ae.h):(N.push({x:le.x+ae.w,y:le.y,w:le.w-ae.w,h:ae.h}),le.y+=ae.h,le.h-=ae.h);break}}return{w:R,h:V,fill:s/(R*V)||0}}var pf=function(r,s){var h=s.pixelRatio,v=s.version,S=s.stretchX,T=s.stretchY,N=s.content;this.paddedRect=r,this.pixelRatio=h,this.stretchX=S,this.stretchY=T,this.content=N,this.version=v},ch={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ch.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ch.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ch.tlbr.get=function(){return this.tl.concat(this.br)},ch.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(pf.prototype,ch);var rc=function(r,s){var h={},v={};this.haveRenderCallbacks=[];var S=[];this.addImages(r,h,S),this.addImages(s,v,S);var T=Ig(S),N=T.w,R=T.h,V=new Ba({width:N||1,height:R||1});for(var G in r){var K=r[G],ae=h[G].paddedRect;Ba.copy(K.data,V,{x:0,y:0},{x:ae.x+1,y:ae.y+1},K.data)}for(var de in s){var le=s[de],fe=v[de].paddedRect,Me=fe.x+1,Ie=fe.y+1,Ue=le.data.width,at=le.data.height;Ba.copy(le.data,V,{x:0,y:0},{x:Me,y:Ie},le.data),Ba.copy(le.data,V,{x:0,y:at-1},{x:Me,y:Ie-1},{width:Ue,height:1}),Ba.copy(le.data,V,{x:0,y:0},{x:Me,y:Ie+at},{width:Ue,height:1}),Ba.copy(le.data,V,{x:Ue-1,y:0},{x:Me-1,y:Ie},{width:1,height:at}),Ba.copy(le.data,V,{x:0,y:0},{x:Me+Ue,y:Ie},{width:1,height:at})}this.image=V,this.iconPositions=h,this.patternPositions=v};rc.prototype.addImages=function(r,s,h){for(var v in r){var S=r[v],T={x:0,y:0,w:S.data.width+2,h:S.data.height+2};h.push(T),s[v]=new pf(T,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(v)}},rc.prototype.patchUpdatedImages=function(r,s){for(var h in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[h],r.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],r.getImage(h),s)},rc.prototype.patchUpdatedImage=function(r,s,h){if(r&&s&&r.version!==s.version){r.version=s.version;var v=r.tl,S=v[0],T=v[1];h.update(s.data,void 0,{x:S,y:T})}},fn("ImagePosition",pf),fn("ImageAtlas",rc);var Bo={horizontal:1,vertical:2,horizontalOnly:3},ic=function(){this.scale=1,this.fontStack="",this.imageName=null};ic.forText=function(r,s){var h=new ic;return h.scale=r||1,h.fontStack=s,h},ic.forImage=function(r){var s=new ic;return s.imageName=r,s};var Fa=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Gp(r,s,h,v,S,T,N,R,V,G,K,ae,de,le,fe,Me){var Ie,Ue=Fa.fromFeature(r,S);ae===Bo.vertical&&Ue.verticalizePunctuation();var at=Pi.processBidirectionalText,ot=Pi.processStyledBidirectionalText;if(at&&Ue.sections.length===1){Ie=[];for(var ct=0,wt=at(Ue.toString(),mf(Ue,G,T,s,v,le,fe));ct<wt.length;ct+=1){var jt=wt[ct],Ct=new Fa;Ct.text=jt,Ct.sections=Ue.sections;for(var Jt=0;Jt<jt.length;Jt++)Ct.sectionIndex.push(0);Ie.push(Ct)}}else if(ot){Ie=[];for(var nn=0,ln=ot(Ue.text,Ue.sectionIndex,mf(Ue,G,T,s,v,le,fe));nn<ln.length;nn+=1){var sn=ln[nn],cn=new Fa;cn.text=sn[0],cn.sectionIndex=sn[1],cn.sections=Ue.sections,Ie.push(cn)}}else Ie=(function(Kn,Ir){for(var br=[],Ln=Kn.text,or=0,dr=0,Yn=Ir;dr<Yn.length;dr+=1){var cr=Yn[dr];br.push(Kn.substring(or,cr)),or=cr}return or<Ln.length&&br.push(Kn.substring(or,Ln.length)),br})(Ue,mf(Ue,G,T,s,v,le,fe));var rn=[],Gt={positionedLines:rn,text:Ue.toString(),top:K[1],bottom:K[1],left:K[0],right:K[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return(function(Kn,Ir,br,Ln,or,dr,Yn,cr,_r,ci,Mi,Ua){for(var Va=0,Ki=-17,pa=0,Yi=0,ma=cr==="right"?1:cr==="left"?0:.5,ca=0,fi=0,Vi=or;fi<Vi.length;fi+=1){var mr=Vi[fi];mr.trim();var Br=mr.getMaxScale(),ri=24*(Br-1),$r={positionedGlyphs:[],lineOffset:0};Kn.positionedLines[ca]=$r;var ua=$r.positionedGlyphs,Gr=0;if(mr.length()){for(var sr=0;sr<mr.length();sr++){var xi=mr.getSection(sr),il=mr.getSectionIndex(sr),Da=mr.getCharCode(sr),Xa=0,ds=null,ba=null,Vo=null,qo=24,hs=!(_r===Bo.horizontal||!Mi&&!Do(Da)||Mi&&(Qu[Da]||(iu=Da,$t.Arabic(iu)||$t["Arabic Supplement"](iu)||$t["Arabic Extended-A"](iu)||$t["Arabic Presentation Forms-A"](iu)||$t["Arabic Presentation Forms-B"](iu))));if(xi.imageName){var nu=Ln[xi.imageName];if(!nu)continue;Vo=xi.imageName,Kn.iconsInText=Kn.iconsInText||!0,ba=nu.paddedRect;var zs=nu.displaySize;xi.scale=24*xi.scale/Ua,ds={width:zs[0],height:zs[1],left:1,top:-3,advance:hs?zs[1]:zs[0]};var Dl=24-zs[1]*xi.scale;Xa=ri+Dl,qo=ds.advance;var Ho=hs?zs[0]*xi.scale-24*Br:zs[1]*xi.scale-24*Br;Ho>0&&Ho>Gr&&(Gr=Ho)}else{var ru=br[xi.fontStack],ph=ru&&ru[Da];if(ph&&ph.rect)ba=ph.rect,ds=ph.metrics;else{var mh=Ir[xi.fontStack],Sf=mh&&mh[Da];if(!Sf)continue;ds=Sf.metrics}Xa=24*(Br-xi.scale)}hs?(Kn.verticalizable=!0,ua.push({glyph:Da,imageName:Vo,x:Va,y:Ki+Xa,vertical:hs,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:il,metrics:ds,rect:ba}),Va+=qo*xi.scale+ci):(ua.push({glyph:Da,imageName:Vo,x:Va,y:Ki+Xa,vertical:hs,scale:xi.scale,fontStack:xi.fontStack,sectionIndex:il,metrics:ds,rect:ba}),Va+=ds.advance*xi.scale+ci)}if(ua.length!==0){var rm=Va-ci;pa=Math.max(rm,pa),ex(ua,0,ua.length-1,ma,Gr)}Va=0;var gh=dr*Br+Gr;$r.lineOffset=Math.max(Gr,ri),Ki+=gh,Yi=Math.max(gh,Yi),++ca}else Ki+=dr,++ca}var iu,lc=Ki- -17,cc=gf(Yn),sd=cc.horizontalAlign,Ef=cc.verticalAlign;(function(yh,Cf,Tf,kf,au,im,ld,Cr,cd){var ud=(Cf-Tf)*au,ou=0;ou=im!==ld?-Cr*kf- -17:(-kf*cd+.5)*ld;for(var dd=0,hd=yh;dd<hd.length;dd+=1)for(var su=hd[dd],Pl=0,jf=su.positionedGlyphs;Pl<jf.length;Pl+=1){var fd=jf[Pl];fd.x+=ud,fd.y+=ou}})(Kn.positionedLines,ma,sd,Ef,pa,Yi,dr,lc,or.length),Kn.top+=-Ef*lc,Kn.bottom=Kn.top+lc,Kn.left+=-sd*pa,Kn.right=Kn.left+pa})(Gt,s,h,v,Ie,N,R,V,ae,G,de,Me),!(function(Kn){for(var Ir=0,br=Kn;Ir<br.length;Ir+=1)if(br[Ir].positionedGlyphs.length!==0)return!1;return!0})(rn)&&Gt}Fa.fromFeature=function(r,s){for(var h=new Fa,v=0;v<r.sections.length;v++){var S=r.sections[v];S.image?h.addImageSection(S):h.addTextSection(S,s)}return h},Fa.prototype.length=function(){return this.text.length},Fa.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},Fa.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},Fa.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},Fa.prototype.verticalizePunctuation=function(){this.text=(function(r){for(var s="",h=0;h<r.length;h++){var v=r.charCodeAt(h+1)||null,S=r.charCodeAt(h-1)||null;(!v||!sf(v)||oh[r[h+1]])&&(!S||!sf(S)||oh[r[h-1]])&&oh[r[h]]?s+=oh[r[h]]:s+=r[h]}return s})(this.text)},Fa.prototype.trim=function(){for(var r=0,s=0;s<this.text.length&&Qu[this.text.charCodeAt(s)];s++)r++;for(var h=this.text.length,v=this.text.length-1;v>=0&&v>=r&&Qu[this.text.charCodeAt(v)];v--)h--;this.text=this.text.substring(r,h),this.sectionIndex=this.sectionIndex.slice(r,h)},Fa.prototype.substring=function(r,s){var h=new Fa;return h.text=this.text.substring(r,s),h.sectionIndex=this.sectionIndex.slice(r,s),h.sections=this.sections,h},Fa.prototype.toString=function(){return this.text},Fa.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce((function(s,h){return Math.max(s,r.sections[h].scale)}),0)},Fa.prototype.addTextSection=function(r,s){this.text+=r.text,this.sections.push(ic.forText(r.scale,r.fontStack||s));for(var h=this.sections.length-1,v=0;v<r.text.length;++v)this.sectionIndex.push(h)},Fa.prototype.addImageSection=function(r){var s=r.image?r.image.name:"";if(s.length!==0){var h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(ic.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ye("Reached maximum number of images 6401")}else ye("Can't add FormattedSection with an empty image.")},Fa.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Qu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ao={};function Og(r,s,h,v,S,T){if(s.imageName){var N=v[s.imageName];return N?N.displaySize[0]*s.scale*24/T+S:0}var R=h[s.fontStack],V=R&&R[r];return V?V.metrics.advance*s.scale+S:0}function Rg(r,s,h,v){var S=Math.pow(r-s,2);return v?r<s?S/2:2*S:S+Math.abs(h)*h}function Jv(r,s,h){var v=0;return r===10&&(v-=1e4),h&&(v+=150),r!==40&&r!==65288||(v+=50),s!==41&&s!==65289||(v+=50),v}function Zp(r,s,h,v,S,T){for(var N=null,R=Rg(s,h,S,T),V=0,G=v;V<G.length;V+=1){var K=G[V],ae=Rg(s-K.x,h,S,T)+K.badness;ae<=R&&(N=K,R=ae)}return{index:r,x:s,priorBreak:N,badness:R}}function mf(r,s,h,v,S,T,N){if(T!=="point")return[];if(!r)return[];for(var R,V=[],G=(function(Ie,Ue,at,ot,ct,wt){for(var jt=0,Ct=0;Ct<Ie.length();Ct++){var Jt=Ie.getSection(Ct);jt+=Og(Ie.getCharCode(Ct),Jt,ot,ct,Ue,wt)}return jt/Math.max(1,Math.ceil(jt/at))})(r,s,h,v,S,N),K=r.text.indexOf("")>=0,ae=0,de=0;de<r.length();de++){var le=r.getSection(de),fe=r.getCharCode(de);if(Qu[fe]||(ae+=Og(fe,le,v,S,s,N)),de<r.length()-1){var Me=!!(!((R=fe)<11904)&&($t["Bopomofo Extended"](R)||$t.Bopomofo(R)||$t["CJK Compatibility Forms"](R)||$t["CJK Compatibility Ideographs"](R)||$t["CJK Compatibility"](R)||$t["CJK Radicals Supplement"](R)||$t["CJK Strokes"](R)||$t["CJK Symbols and Punctuation"](R)||$t["CJK Unified Ideographs Extension A"](R)||$t["CJK Unified Ideographs"](R)||$t["Enclosed CJK Letters and Months"](R)||$t["Halfwidth and Fullwidth Forms"](R)||$t.Hiragana(R)||$t["Ideographic Description Characters"](R)||$t["Kangxi Radicals"](R)||$t["Katakana Phonetic Extensions"](R)||$t.Katakana(R)||$t["Vertical Forms"](R)||$t["Yi Radicals"](R)||$t["Yi Syllables"](R)));(ao[fe]||Me||le.imageName)&&V.push(Zp(de+1,ae,G,V,Jv(fe,r.getCharCode(de+1),Me&&K),!1))}}return(function Ie(Ue){return Ue?Ie(Ue.priorBreak).concat(Ue.index):[]})(Zp(r.length(),ae,G,V,0,!0))}function gf(r){var s=.5,h=.5;switch(r){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function ex(r,s,h,v,S){if(v||S)for(var T=r[h],N=T.metrics.advance*T.scale,R=(r[h].x+N)*v,V=s;V<=h;V++)r[V].x-=R,r[V].y+=S}function Xp(r,s,h,v,S,T){var N,R=r.image;if(R.content){var V=R.content,G=R.pixelRatio||1;N=[V[0]/G,V[1]/G,R.displaySize[0]-V[2]/G,R.displaySize[1]-V[3]/G]}var K,ae,de,le,fe=s.left*T,Me=s.right*T;h==="width"||h==="both"?(le=S[0]+fe-v[3],ae=S[0]+Me+v[1]):ae=(le=S[0]+(fe+Me-R.displaySize[0])/2)+R.displaySize[0];var Ie=s.top*T,Ue=s.bottom*T;return h==="height"||h==="both"?(K=S[1]+Ie-v[0],de=S[1]+Ue+v[2]):de=(K=S[1]+(Ie+Ue-R.displaySize[1])/2)+R.displaySize[1],{image:R,top:K,right:ae,bottom:de,left:le,collisionPadding:N}}ao[10]=!0,ao[32]=!0,ao[38]=!0,ao[40]=!0,ao[41]=!0,ao[43]=!0,ao[45]=!0,ao[47]=!0,ao[173]=!0,ao[183]=!0,ao[8203]=!0,ao[8208]=!0,ao[8211]=!0,ao[8231]=!0;var ac=(function(r){function s(h,v,S,T){r.call(this,h,v),this.angle=S,T!==void 0&&(this.segment=T)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.clone=function(){return new s(this.x,this.y,this.angle,this.segment)},s})(C);fn("Anchor",ac);function yf(r,s){var h=s.expression;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new ti(r+1))};if(h.kind==="source")return{kind:"source"};for(var v=h.zoomStops,S=h.interpolationType,T=0;T<v.length&&v[T]<=r;)T++;for(var N=T=Math.max(0,T-1);N<v.length&&v[N]<r+1;)N++;N=Math.min(v.length-1,N);var R=v[T],V=v[N];return h.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:V,interpolationType:S}:{kind:"camera",minZoom:R,maxZoom:V,minSize:h.evaluate(new ti(R)),maxSize:h.evaluate(new ti(V)),interpolationType:S}}function Lg(r,s,h){var v=s.uSize,S=s.uSizeT,T=h.lowerSize,N=h.upperSize;return r.kind==="source"?T/128:r.kind==="composite"?Pn(T/128,N/128,S):v}function Kp(r,s){var h=0,v=0;if(r.kind==="constant")v=r.layoutSize;else if(r.kind!=="source"){var S=r.interpolationType,T=r.minZoom,N=r.maxZoom,R=S?I(ei.interpolationFactor(S,s,T,N),0,1):0;r.kind==="camera"?v=Pn(r.minSize,r.maxSize,R):h=R}return{uSizeT:h,uSize:v}}var tx=Object.freeze({__proto__:null,getSizeData:yf,evaluateSizeForFeature:Lg,evaluateSizeForZoom:Kp,SIZE_PACK_FACTOR:128});function Al(r,s,h,v,S){if(s.segment===void 0)return!0;for(var T=s,N=s.segment+1,R=0;R>-h/2;){if(--N<0)return!1;R-=r[N].dist(T),T=r[N]}R+=r[N].dist(r[N+1]),N++;for(var V=[],G=0;R<h/2;){var K=r[N-1],ae=r[N],de=r[N+1];if(!de)return!1;var le=K.angleTo(ae)-ae.angleTo(de);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),V.push({distance:R,angleDelta:le}),G+=le;R-V[0].distance>v;)G-=V.shift().angleDelta;if(G>S)return!1;N++,R+=ae.dist(de)}return!0}function Yp(r){for(var s=0,h=0;h<r.length-1;h++)s+=r[h].dist(r[h+1]);return s}function nx(r,s,h){return r?.6*s*h:0}function zg(r,s){return Math.max(r?r.right-r.left:0,s?s.right-s.left:0)}function oc(r,s,h,v,S,T){for(var N=nx(h,S,T),R=zg(h,v)*T,V=0,G=Yp(r)/2,K=0;K<r.length-1;K++){var ae=r[K],de=r[K+1],le=ae.dist(de);if(V+le>G){var fe=(G-V)/le,Me=Pn(ae.x,de.x,fe),Ie=Pn(ae.y,de.y,fe),Ue=new ac(Me,Ie,de.angleTo(ae),K);return Ue._round(),!N||Al(r,Ue,R,N,s)?Ue:void 0}V+=le}}function Bg(r,s,h,v,S,T,N,R,V){var G=nx(v,T,N),K=zg(v,S),ae=K*N,de=r[0].x===0||r[0].x===V||r[0].y===0||r[0].y===V;return s-ae<s/4&&(s=ae+s/4),(function le(fe,Me,Ie,Ue,at,ot,ct,wt,jt){for(var Ct=ot/2,Jt=Yp(fe),nn=0,ln=Me-Ie,sn=[],cn=0;cn<fe.length-1;cn++){for(var rn=fe[cn],Gt=fe[cn+1],Kn=rn.dist(Gt),Ir=Gt.angleTo(rn);ln+Ie<nn+Kn;){var br=((ln+=Ie)-nn)/Kn,Ln=Pn(rn.x,Gt.x,br),or=Pn(rn.y,Gt.y,br);if(Ln>=0&&Ln<jt&&or>=0&&or<jt&&ln-Ct>=0&&ln+Ct<=Jt){var dr=new ac(Ln,or,Ir,cn);dr._round(),Ue&&!Al(fe,dr,ot,Ue,at)||sn.push(dr)}}nn+=Kn}return wt||sn.length||ct||(sn=le(fe,nn/2,Ie,Ue,at,ot,ct,!0,jt)),sn})(r,de?s/2*R%s:(K/2+2*T)*N*R%s,s,G,h,ae,de,!1,V)}function Fg(r,s,h,v){var S=[],T=r.image,N=T.pixelRatio,R=T.paddedRect.w-2,V=T.paddedRect.h-2,G=r.right-r.left,K=r.bottom-r.top,ae=T.stretchX||[[0,R]],de=T.stretchY||[[0,V]],le=function(dr,Yn){return dr+Yn[1]-Yn[0]},fe=ae.reduce(le,0),Me=de.reduce(le,0),Ie=R-fe,Ue=V-Me,at=0,ot=fe,ct=0,wt=Me,jt=0,Ct=Ie,Jt=0,nn=Ue;if(T.content&&v){var ln=T.content;at=Ju(ae,0,ln[0]),ct=Ju(de,0,ln[1]),ot=Ju(ae,ln[0],ln[2]),wt=Ju(de,ln[1],ln[3]),jt=ln[0]-at,Jt=ln[1]-ct,Ct=ln[2]-ln[0]-ot,nn=ln[3]-ln[1]-wt}var sn=function(dr,Yn,cr,_r){var ci=Ni(dr.stretch-at,ot,G,r.left),Mi=Wp(dr.fixed-jt,Ct,dr.stretch,fe),Ua=Ni(Yn.stretch-ct,wt,K,r.top),Va=Wp(Yn.fixed-Jt,nn,Yn.stretch,Me),Ki=Ni(cr.stretch-at,ot,G,r.left),pa=Wp(cr.fixed-jt,Ct,cr.stretch,fe),Yi=Ni(_r.stretch-ct,wt,K,r.top),ma=Wp(_r.fixed-Jt,nn,_r.stretch,Me),ca=new C(ci,Ua),fi=new C(Ki,Ua),Vi=new C(Ki,Yi),mr=new C(ci,Yi),Br=new C(Mi/N,Va/N),ri=new C(pa/N,ma/N),$r=s*Math.PI/180;if($r){var ua=Math.sin($r),Gr=Math.cos($r),sr=[Gr,-ua,ua,Gr];ca._matMult(sr),fi._matMult(sr),mr._matMult(sr),Vi._matMult(sr)}var xi=dr.stretch+dr.fixed,il=cr.stretch+cr.fixed,Da=Yn.stretch+Yn.fixed,Xa=_r.stretch+_r.fixed;return{tl:ca,tr:fi,bl:mr,br:Vi,tex:{x:T.paddedRect.x+1+xi,y:T.paddedRect.y+1+Da,w:il-xi,h:Xa-Da},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Br,pixelOffsetBR:ri,minFontScaleX:Ct/N/G,minFontScaleY:nn/N/K,isSDF:h}};if(v&&(T.stretchX||T.stretchY))for(var cn=uh(ae,Ie,fe),rn=uh(de,Ue,Me),Gt=0;Gt<cn.length-1;Gt++)for(var Kn=cn[Gt],Ir=cn[Gt+1],br=0;br<rn.length-1;br++){var Ln=rn[br],or=rn[br+1];S.push(sn(Kn,Ln,Ir,or))}else S.push(sn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:V+1}));return S}function Ju(r,s,h){for(var v=0,S=0,T=r;S<T.length;S+=1){var N=T[S];v+=Math.max(s,Math.min(h,N[1]))-Math.max(s,Math.min(h,N[0]))}return v}function uh(r,s,h){for(var v=[{fixed:-1,stretch:0}],S=0,T=r;S<T.length;S+=1){var N=T[S],R=N[0],V=N[1],G=v[v.length-1];v.push({fixed:R-G.stretch,stretch:G.stretch}),v.push({fixed:R-G.stretch,stretch:G.stretch+(V-R)})}return v.push({fixed:s+1,stretch:h}),v}function Ni(r,s,h,v){return r/s*h+v}function Wp(r,s,h,v){return r-s*h/v}var vf=function(r,s,h,v,S,T,N,R,V,G,K,ae){var de=N.top*R-V,le=N.bottom*R+V,fe=N.left*R-V,Me=N.right*R+V,Ie=N.collisionPadding;if(Ie&&(fe-=Ie[0]*R,de-=Ie[1]*R,Me+=Ie[2]*R,le+=Ie[3]*R),this.boxStartIndex=r.length,G){var Ue=le-de,at=Me-fe;Ue>0&&(Ue=Math.max(10*R,Ue),this._addLineCollisionCircles(r,s,h,h.segment,at,Ue,v,S,T,K))}else{if(ae){var ot=new C(fe,de),ct=new C(Me,de),wt=new C(fe,le),jt=new C(Me,le),Ct=ae*Math.PI/180;ot._rotate(Ct),ct._rotate(Ct),wt._rotate(Ct),jt._rotate(Ct),fe=Math.min(ot.x,ct.x,wt.x,jt.x),Me=Math.max(ot.x,ct.x,wt.x,jt.x),de=Math.min(ot.y,ct.y,wt.y,jt.y),le=Math.max(ot.y,ct.y,wt.y,jt.y)}r.emplaceBack(h.x,h.y,fe,de,Me,le,v,S,T,0,0)}this.boxEndIndex=r.length};vf.prototype._addLineCollisionCircles=function(r,s,h,v,S,T,N,R,V,G){var K=T/2,ae=Math.floor(S/K)||1,de=1+.4*Math.log(G)/Math.LN2,le=Math.floor(ae*de/2),fe=-T/2,Me=h,Ie=v+1,Ue=fe,at=-S/2,ot=at-S/4;do{if(--Ie<0){if(Ue>at)return;Ie=0;break}Ue-=s[Ie].dist(Me),Me=s[Ie]}while(Ue>ot);for(var ct=s[Ie].dist(s[Ie+1]),wt=-le;wt<ae+le;wt++){var jt=wt*K,Ct=at+jt;if(jt<0&&(Ct+=jt),jt>S&&(Ct+=jt-S),!(Ct<Ue)){for(;Ue+ct<Ct;){if(Ue+=ct,++Ie+1>=s.length)return;ct=s[Ie].dist(s[Ie+1])}var Jt=Ct-Ue,nn=s[Ie],ln=s[Ie+1].sub(nn)._unit()._mult(Jt)._add(nn)._round(),sn=Math.abs(Ct-fe)<K?0:.8*(Ct-fe);r.emplaceBack(ln.x,ln.y,-T/2,-T/2,T/2,T/2,N,R,V,T/2,sn)}}};var ed=function(r,s){if(r===void 0&&(r=[]),s===void 0&&(s=xf),this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(var h=(this.length>>1)-1;h>=0;h--)this._down(h)};function xf(r,s){return r<s?-1:r>s?1:0}function Kc(r,s,h){h===void 0&&(h=!1);for(var v=1/0,S=1/0,T=-1/0,N=-1/0,R=r[0],V=0;V<R.length;V++){var G=R[V];(!V||G.x<v)&&(v=G.x),(!V||G.y<S)&&(S=G.y),(!V||G.x>T)&&(T=G.x),(!V||G.y>N)&&(N=G.y)}var K=T-v,ae=N-S,de=Math.min(K,ae),le=de/2,fe=new ed([],rx);if(de===0)return new C(v,S);for(var Me=v;Me<T;Me+=de)for(var Ie=S;Ie<N;Ie+=de)fe.push(new td(Me+le,Ie+le,le,r));for(var Ue=(function(ct){for(var wt=0,jt=0,Ct=0,Jt=ct[0],nn=0,ln=Jt.length,sn=ln-1;nn<ln;sn=nn++){var cn=Jt[nn],rn=Jt[sn],Gt=cn.x*rn.y-rn.x*cn.y;jt+=(cn.x+rn.x)*Gt,Ct+=(cn.y+rn.y)*Gt,wt+=3*Gt}return new td(jt/wt,Ct/wt,0,ct)})(r),at=fe.length;fe.length;){var ot=fe.pop();(ot.d>Ue.d||!Ue.d)&&(Ue=ot,h&&console.log("found best %d after %d probes",Math.round(1e4*ot.d)/1e4,at)),ot.max-Ue.d<=s||(le=ot.h/2,fe.push(new td(ot.p.x-le,ot.p.y-le,le,r)),fe.push(new td(ot.p.x+le,ot.p.y-le,le,r)),fe.push(new td(ot.p.x-le,ot.p.y+le,le,r)),fe.push(new td(ot.p.x+le,ot.p.y+le,le,r)),at+=4)}return h&&(console.log("num probes: "+at),console.log("best distance: "+Ue.d)),Ue.p}function rx(r,s){return s.max-r.max}function td(r,s,h,v){this.p=new C(r,s),this.h=h,this.d=(function(S,T){for(var N=!1,R=1/0,V=0;V<T.length;V++)for(var G=T[V],K=0,ae=G.length,de=ae-1;K<ae;de=K++){var le=G[K],fe=G[de];le.y>S.y!=fe.y>S.y&&S.x<(fe.x-le.x)*(S.y-le.y)/(fe.y-le.y)+le.x&&(N=!N),R=Math.min(R,Sp(S,le,fe))}return(N?1:-1)*Math.sqrt(R)})(this.p,v),this.max=this.d+this.h*Math.SQRT2}ed.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},ed.prototype.pop=function(){if(this.length!==0){var r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}},ed.prototype.peek=function(){return this.data[0]},ed.prototype._up=function(r){for(var s=this.data,h=this.compare,v=s[r];r>0;){var S=r-1>>1,T=s[S];if(h(v,T)>=0)break;s[r]=T,r=S}s[r]=v},ed.prototype._down=function(r){for(var s=this.data,h=this.compare,v=this.length>>1,S=s[r];r<v;){var T=1+(r<<1),N=s[T],R=T+1;if(R<this.length&&h(s[R],N)<0&&(T=R,N=s[R]),h(N,S)>=0)break;s[r]=N,r=T}s[r]=S};var nd=Number.POSITIVE_INFINITY;function tl(r,s){return s[1]!==nd?(function(h,v,S){var T=0,N=0;switch(v=Math.abs(v),S=Math.abs(S),h){case"top-right":case"top-left":case"top":N=S-7;break;case"bottom-right":case"bottom-left":case"bottom":N=7-S}switch(h){case"top-right":case"bottom-right":case"right":T=-v;break;case"top-left":case"bottom-left":case"left":T=v}return[T,N]})(r,s[0],s[1]):(function(h,v){var S=0,T=0;v<0&&(v=0);var N=v/Math.sqrt(2);switch(h){case"top-right":case"top-left":T=N-7;break;case"bottom-right":case"bottom-left":T=7-N;break;case"bottom":T=7-v;break;case"top":T=v-7}switch(h){case"top-right":case"bottom-right":S=-N;break;case"top-left":case"bottom-left":S=N;break;case"left":S=v;break;case"right":S=-v}return[S,T]})(r,s[0])}function Qp(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Jp(r,s,h,v,S,T,N,R,V,G,K,ae,de,le){var fe=(function(ot,ct,wt,jt,Ct,Jt,nn,ln){for(var sn=jt.layout.get("text-rotate").evaluate(Jt,{})*Math.PI/180,cn=[],rn=0,Gt=ct.positionedLines;rn<Gt.length;rn+=1)for(var Kn=Gt[rn],Ir=0,br=Kn.positionedGlyphs;Ir<br.length;Ir+=1){var Ln=br[Ir];if(Ln.rect){var or=Ln.rect||{},dr=4,Yn=!0,cr=1,_r=0,ci=(Ct||ln)&&Ln.vertical,Mi=Ln.metrics.advance*Ln.scale/2;if(ln&&ct.verticalizable){var Ua=24*(Ln.scale-1),Va=(24-Ln.metrics.width*Ln.scale)/2;_r=Kn.lineOffset/2-(Ln.imageName?-Va:Ua)}if(Ln.imageName){var Ki=nn[Ln.imageName];Yn=Ki.sdf,dr=1/(cr=Ki.pixelRatio)}var pa=Ct?[Ln.x+Mi,Ln.y]:[0,0],Yi=Ct?[0,0]:[Ln.x+Mi+wt[0],Ln.y+wt[1]-_r],ma=[0,0];ci&&(ma=Yi,Yi=[0,0]);var ca=(Ln.metrics.left-dr)*Ln.scale-Mi+Yi[0],fi=(-Ln.metrics.top-dr)*Ln.scale+Yi[1],Vi=ca+or.w*Ln.scale/cr,mr=fi+or.h*Ln.scale/cr,Br=new C(ca,fi),ri=new C(Vi,fi),$r=new C(ca,mr),ua=new C(Vi,mr);if(ci){var Gr=new C(-Mi,Mi- -17),sr=-Math.PI/2,xi=12-Mi,il=Ln.imageName?xi:0,Da=new C(22-xi,-il),Xa=new(Function.prototype.bind.apply(C,[null].concat(ma)));Br._rotateAround(sr,Gr)._add(Da)._add(Xa),ri._rotateAround(sr,Gr)._add(Da)._add(Xa),$r._rotateAround(sr,Gr)._add(Da)._add(Xa),ua._rotateAround(sr,Gr)._add(Da)._add(Xa)}if(sn){var ds=Math.sin(sn),ba=Math.cos(sn),Vo=[ba,-ds,ds,ba];Br._matMult(Vo),ri._matMult(Vo),$r._matMult(Vo),ua._matMult(Vo)}var qo=new C(0,0),hs=new C(0,0);cn.push({tl:Br,tr:ri,bl:$r,br:ua,tex:or,writingMode:ct.writingMode,glyphOffset:pa,sectionIndex:Ln.sectionIndex,isSDF:Yn,pixelOffsetTL:qo,pixelOffsetBR:hs,minFontScaleX:0,minFontScaleY:0})}}return cn})(0,h,R,S,T,N,v,r.allowVerticalPlacement),Me=r.textSizeData,Ie=null;Me.kind==="source"?(Ie=[128*S.layout.get("text-size").evaluate(N,{})])[0]>32640&&ye(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Me.kind==="composite"&&((Ie=[128*le.compositeTextSizes[0].evaluate(N,{}),128*le.compositeTextSizes[1].evaluate(N,{})])[0]>32640||Ie[1]>32640)&&ye(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,fe,Ie,R,T,N,G,s,V.lineStartIndex,V.lineLength,de);for(var Ue=0,at=K;Ue<at.length;Ue+=1)ae[at[Ue]]=r.text.placedSymbolArray.length-1;return 4*fe.length}function Ug(r){for(var s in r)return r[s];return null}function Vg(r,s,h,v){var S=r.compareText;if(s in S){for(var T=S[s],N=T.length-1;N>=0;N--)if(v.dist(T[N])<h)return!0}else S[s]=[];return S[s].push(v),!1}var qg=Yu.VectorTileFeature.types,em=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bf(r,s,h,v,S,T,N,R,V,G,K,ae,de){var le=R?Math.min(32640,Math.round(R[0])):0,fe=R?Math.min(32640,Math.round(R[1])):0;r.emplaceBack(s,h,Math.round(32*v),Math.round(32*S),T,N,(le<<1)+(V?1:0),fe,16*G,16*K,256*ae,256*de)}function nl(r,s,h){r.emplaceBack(s.x,s.y,h),r.emplaceBack(s.x,s.y,h),r.emplaceBack(s.x,s.y,h),r.emplaceBack(s.x,s.y,h)}function Ma(r){for(var s=0,h=r.sections;s<h.length;s+=1)if(ug(h[s].text))return!0;return!1}var rd=function(r){this.layoutVertexArray=new te,this.indexArray=new ft,this.programConfigurations=r,this.segments=new tr,this.dynamicLayoutVertexArray=new ue,this.opacityVertexArray=new Te,this.placedSymbolArray=new Qt};rd.prototype.upload=function(r,s,h,v){h&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ag.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Yb.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,em,!0),this.opacityVertexBuffer.itemSize=1),(h||v)&&this.programConfigurations.upload(r)},rd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},fn("SymbolBuffers",rd);var Yc=function(r,s,h){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new h,this.segments=new tr,this.collisionVertexArray=new ve};Yc.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,$v.members,!0)},Yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},fn("CollisionBuffers",Yc);var rr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((function(N){return N.id})),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasPaintOverrides=!1,this.hasRTLText=!1;var s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yf(this.zoom,s["text-size"]),this.iconSizeData=yf(this.zoom,s["icon-size"]);var h=this.layers[0].layout,v=h.get("symbol-sort-key"),S=h.get("symbol-z-order");this.sortFeaturesByKey=S!=="viewport-y"&&v.constantOr(1)!==void 0;var T=S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=T&&(h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement")),h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map((function(N){return Bo[N]}))),this.stateDependentLayerIds=this.layers.filter((function(N){return N.isStateDependent()})).map((function(N){return N.id})),this.sourceID=r.sourceID};rr.prototype.createArrays=function(){var r=this.layers[0].layout;this.hasPaintOverrides=Zi.hasPaintOverrides(r),this.text=new rd(new Ro(Ag.members,this.layers,this.zoom,(function(s){return/^text/.test(s)}))),this.icon=new rd(new Ro(Ag.members,this.layers,this.zoom,(function(s){return/^icon/.test(s)}))),this.textCollisionBox=new Yc(_e,ah.members,_t),this.iconCollisionBox=new Yc(_e,ah.members,_t),this.textCollisionCircle=new Yc(_e,Vp.members,ft),this.iconCollisionCircle=new Yc(_e,Vp.members,ft),this.glyphOffsetArray=new Rn,this.lineVertexArray=new Zn,this.symbolInstances=new Gn},rr.prototype.calculateGlyphDependencies=function(r,s,h,v,S){for(var T=0;T<r.length;T++)if(s[r.charCodeAt(T)]=!0,(h||v)&&S){var N=oh[r.charAt(T)];N&&(s[N.charCodeAt(0)]=!0)}},rr.prototype.populate=function(r,s){var h=this.layers[0],v=h.layout,S=v.get("text-font"),T=v.get("text-field"),N=v.get("icon-image"),R=(T.value.kind!=="constant"||T.value.value instanceof kn&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),V=(N.value.kind!=="constant"||!!N.value.value)&&Object.keys(N.parameters).length>0,G=v.get("symbol-sort-key");if(this.features=[],R||V){for(var K=s.iconDependencies,ae=s.glyphDependencies,de=s.availableImages,le=new ti(this.zoom),fe=0,Me=r;fe<Me.length;fe+=1){var Ie=Me[fe],Ue=Ie.feature,at=Ie.id,ot=Ie.index,ct=Ie.sourceLayerIndex;if(h._featureFilter(le,Ue)){var wt=void 0;if(R){var jt=h.getValueAndResolveTokens("text-field",Ue,de),Ct=kn.factory(jt);Ma(Ct)&&(this.hasRTLText=!0),(!this.hasRTLText||Sl()==="unavailable"||this.hasRTLText&&Pi.isParsed())&&(wt=qp(Ct,h,Ue))}var Jt=void 0;if(V){var nn=h.getValueAndResolveTokens("icon-image",Ue,de);Jt=nn instanceof zn?nn:zn.fromString(nn)}if(wt||Jt){var ln=this.sortFeaturesByKey?G.evaluate(Ue,{}):void 0,sn={id:at,text:wt,icon:Jt,index:ot,sourceLayerIndex:ct,geometry:Wl(Ue),properties:Ue.properties,type:qg[Ue.type],sortKey:ln};if(this.features.push(sn),Jt&&(K[Jt.name]=!0),wt){var cn=S.evaluate(Ue,{}).join(","),rn=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Bo.vertical)>=0;for(var Gt=0,Kn=wt.sections;Gt<Kn.length;Gt+=1){var Ir=Kn[Gt];if(Ir.image)K[Ir.image.name]=!0;else{var br=Mo(wt.toString()),Ln=Ir.fontStack||cn,or=ae[Ln]=ae[Ln]||{};this.calculateGlyphDependencies(Ir.text,or,rn,this.allowVerticalPlacement,br)}}}}}}v.get("symbol-placement")==="line"&&(this.features=(function(dr){var Yn={},cr={},_r=[],ci=0;function Mi(ri){_r.push(dr[ri]),ci++}function Ua(ri,$r,ua){var Gr=cr[ri];return delete cr[ri],cr[$r]=Gr,_r[Gr].geometry[0].pop(),_r[Gr].geometry[0]=_r[Gr].geometry[0].concat(ua[0]),Gr}function Va(ri,$r,ua){var Gr=Yn[$r];return delete Yn[$r],Yn[ri]=Gr,_r[Gr].geometry[0].shift(),_r[Gr].geometry[0]=ua[0].concat(_r[Gr].geometry[0]),Gr}function Ki(ri,$r,ua){var Gr=ua?$r[0][$r[0].length-1]:$r[0][0];return ri+":"+Gr.x+":"+Gr.y}for(var pa=0;pa<dr.length;pa++){var Yi=dr[pa],ma=Yi.geometry,ca=Yi.text?Yi.text.toString():null;if(ca){var fi=Ki(ca,ma),Vi=Ki(ca,ma,!0);if(fi in cr&&Vi in Yn&&cr[fi]!==Yn[Vi]){var mr=Va(fi,Vi,ma),Br=Ua(fi,Vi,_r[mr].geometry);delete Yn[fi],delete cr[Vi],cr[Ki(ca,_r[Br].geometry,!0)]=Br,_r[mr].geometry=null}else fi in cr?Ua(fi,Vi,ma):Vi in Yn?Va(fi,Vi,ma):(Mi(pa),Yn[fi]=ci-1,cr[Vi]=ci-1)}else Mi(pa)}return _r.filter((function(ri){return ri.geometry}))})(this.features)),this.sortFeaturesByKey&&this.features.sort((function(dr,Yn){return dr.sortKey-Yn.sortKey}))}},rr.prototype.update=function(r,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,h))},rr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},rr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},rr.prototype.upload=function(r){this.uploaded||(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r),this.textCollisionCircle.upload(r),this.iconCollisionCircle.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},rr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},rr.prototype.addToLineVertexArray=function(r,s){var h=this.lineVertexArray.length;if(r.segment!==void 0){for(var v=r.dist(s[r.segment+1]),S=r.dist(s[r.segment]),T={},N=r.segment+1;N<s.length;N++)T[N]={x:s[N].x,y:s[N].y,tileUnitDistanceFromAnchor:v},N<s.length-1&&(v+=s[N+1].dist(s[N]));for(var R=r.segment||0;R>=0;R--)T[R]={x:s[R].x,y:s[R].y,tileUnitDistanceFromAnchor:S},R>0&&(S+=s[R-1].dist(s[R]));for(var V=0;V<s.length;V++){var G=T[V];this.lineVertexArray.emplaceBack(G.x,G.y,G.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}},rr.prototype.addSymbols=function(r,s,h,v,S,T,N,R,V,G,K){var ae=this,de=r.indexArray,le=r.layoutVertexArray,fe=r.dynamicLayoutVertexArray,Me=r.segments.prepareSegment(4*s.length,r.layoutVertexArray,r.indexArray,T.sortKey),Ie=this.glyphOffsetArray.length,Ue=Me.vertexLength,at=this.allowVerticalPlacement&&N===Bo.vertical?Math.PI/2:0,ot=function(Gt){var Kn=Gt.tl,Ir=Gt.tr,br=Gt.bl,Ln=Gt.br,or=Gt.tex,dr=Gt.pixelOffsetTL,Yn=Gt.pixelOffsetBR,cr=Gt.minFontScaleX,_r=Gt.minFontScaleY,ci=Me.vertexLength,Mi=Gt.glyphOffset[1];bf(le,R.x,R.y,Kn.x,Mi+Kn.y,or.x,or.y,h,Gt.isSDF,dr.x,dr.y,cr,_r),bf(le,R.x,R.y,Ir.x,Mi+Ir.y,or.x+or.w,or.y,h,Gt.isSDF,Yn.x,dr.y,cr,_r),bf(le,R.x,R.y,br.x,Mi+br.y,or.x,or.y+or.h,h,Gt.isSDF,dr.x,Yn.y,cr,_r),bf(le,R.x,R.y,Ln.x,Mi+Ln.y,or.x+or.w,or.y+or.h,h,Gt.isSDF,Yn.x,Yn.y,cr,_r),nl(fe,R,at),de.emplaceBack(ci,ci+1,ci+2),de.emplaceBack(ci+1,ci+2,ci+3),Me.vertexLength+=4,Me.primitiveLength+=2,ae.glyphOffsetArray.emplaceBack(Gt.glyphOffset[0])};if(T.text&&T.text.sections){var ct=T.text.sections;if(this.hasPaintOverrides){for(var wt,jt=function(Gt,Kn){wt===void 0||wt===Gt&&!Kn||r.programConfigurations.populatePaintArrays(r.layoutVertexArray.length,T,T.index,{},ct[wt]),wt=Gt},Ct=0,Jt=s;Ct<Jt.length;Ct+=1){var nn=Jt[Ct];jt(nn.sectionIndex,!1),ot(nn)}jt(wt,!0)}else{for(var ln=0,sn=s;ln<sn.length;ln+=1)ot(sn[ln]);r.programConfigurations.populatePaintArrays(r.layoutVertexArray.length,T,T.index,{},ct[0])}}else{for(var cn=0,rn=s;cn<rn.length;cn+=1)ot(rn[cn]);r.programConfigurations.populatePaintArrays(r.layoutVertexArray.length,T,T.index,{})}r.placedSymbolArray.emplaceBack(R.x,R.y,Ie,this.glyphOffsetArray.length-Ie,Ue,V,G,R.segment,h?h[0]:0,h?h[1]:0,v[0],v[1],N,0,!1,0,K)},rr.prototype._addCollisionDebugVertex=function(r,s,h,v,S,T){return s.emplaceBack(0,0),r.emplaceBack(h.x,h.y,v,S,Math.round(T.x),Math.round(T.y))},rr.prototype.addCollisionDebugVertices=function(r,s,h,v,S,T,N,R){var V=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),G=V.vertexLength,K=S.layoutVertexArray,ae=S.collisionVertexArray,de=N.anchorX,le=N.anchorY;if(this._addCollisionDebugVertex(K,ae,T,de,le,new C(r,s)),this._addCollisionDebugVertex(K,ae,T,de,le,new C(h,s)),this._addCollisionDebugVertex(K,ae,T,de,le,new C(h,v)),this._addCollisionDebugVertex(K,ae,T,de,le,new C(r,v)),V.vertexLength+=4,R){var fe=S.indexArray;fe.emplaceBack(G,G+1,G+2),fe.emplaceBack(G,G+2,G+3),V.primitiveLength+=2}else{var Me=S.indexArray;Me.emplaceBack(G,G+1),Me.emplaceBack(G+1,G+2),Me.emplaceBack(G+2,G+3),Me.emplaceBack(G+3,G),V.primitiveLength+=4}},rr.prototype.addDebugCollisionBoxes=function(r,s,h,v){for(var S=r;S<s;S++){var T=this.collisionBoxArray.get(S),N=T.x1,R=T.y1,V=T.x2,G=T.y2,K=T.radius>0;this.addCollisionDebugVertices(N,R,V,G,K?v?this.textCollisionCircle:this.iconCollisionCircle:v?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,h,K)}},rr.prototype.generateCollisionDebugBuffers=function(){for(var r=0;r<this.symbolInstances.length;r++){var s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}},rr.prototype._deserializeCollisionBoxesForSymbol=function(r,s,h,v,S,T,N,R,V){for(var G={},K=s;K<h;K++){var ae=r.get(K);if(ae.radius===0){G.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},G.textFeatureIndex=ae.featureIndex;break}G.textCircles||(G.textCircles=[],G.textFeatureIndex=ae.featureIndex),G.textCircles.push(ae.anchorPointX,ae.anchorPointY,ae.radius,ae.signedDistanceFromAnchor,1)}for(var de=v;de<S;de++){var le=r.get(de);if(le.radius===0){G.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},G.verticalTextFeatureIndex=le.featureIndex;break}}for(var fe=T;fe<N;fe++){var Me=r.get(fe);if(Me.radius===0){G.iconBox={x1:Me.x1,y1:Me.y1,x2:Me.x2,y2:Me.y2,anchorPointX:Me.anchorPointX,anchorPointY:Me.anchorPointY},G.iconFeatureIndex=Me.featureIndex;break}}for(var Ie=R;Ie<V;Ie++){var Ue=r.get(Ie);if(Ue.radius===0){G.verticalIconBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},G.verticalIconFeatureIndex=Ue.featureIndex;break}}return G},rr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var s=0;s<this.symbolInstances.length;s++){var h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}},rr.prototype.hasTextData=function(){return this.text.segments.get().length>0},rr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},rr.prototype.hasTextCollisionBoxData=function(){return this.textCollisionBox.segments.get().length>0},rr.prototype.hasIconCollisionBoxData=function(){return this.iconCollisionBox.segments.get().length>0},rr.prototype.hasTextCollisionCircleData=function(){return this.textCollisionCircle.segments.get().length>0},rr.prototype.hasIconCollisionCircleData=function(){return this.iconCollisionCircle.segments.get().length>0},rr.prototype.addIndicesForPlacedSymbol=function(r,s){for(var h=r.placedSymbolArray.get(s),v=h.vertexStartIndex+4*h.numGlyphs,S=h.vertexStartIndex;S<v;S+=4)r.indexArray.emplaceBack(S,S+1,S+2),r.indexArray.emplaceBack(S+1,S+2,S+3)},rr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var s=Math.sin(r),h=Math.cos(r),v=[],S=[],T=[],N=0;N<this.symbolInstances.length;++N){T.push(N);var R=this.symbolInstances.get(N);v.push(0|Math.round(s*R.anchorX+h*R.anchorY)),S.push(R.featureIndex)}return T.sort((function(V,G){return v[V]-v[G]||S[G]-S[V]})),T},rr.prototype.sortFeatures=function(r){var s=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var h=0,v=this.symbolInstanceIndexes;h<v.length;h+=1){var S=v[h],T=this.symbolInstances.get(S);this.featureSortOrder.push(T.featureIndex),[T.rightJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.leftJustifiedTextSymbolIndex].forEach((function(N,R,V){N>=0&&V.indexOf(N)===R&&s.addIndicesForPlacedSymbol(s.text,N)})),T.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,T.verticalPlacedTextSymbolIndex),T.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,T.placedIconSymbolIndex),T.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,T.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},fn("SymbolBucket",rr,{omit:["layers","collisionBoxArray","features","compareText"]}),rr.MAX_GLYPHS=65535,rr.addDynamicAttributes=nl;var Wb=new Ii({"symbol-placement":new pn(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new pn(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new pn(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _n(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new pn(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new pn(vt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new pn(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new pn(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new pn(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new _n(vt.layout_symbol["icon-size"]),"icon-text-fit":new pn(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new pn(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new _n(vt.layout_symbol["icon-image"]),"icon-rotate":new _n(vt.layout_symbol["icon-rotate"]),"icon-padding":new pn(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new pn(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new _n(vt.layout_symbol["icon-offset"]),"icon-anchor":new _n(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new pn(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new pn(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new pn(vt.layout_symbol["text-rotation-alignment"]),"text-field":new _n(vt.layout_symbol["text-field"]),"text-font":new _n(vt.layout_symbol["text-font"]),"text-size":new _n(vt.layout_symbol["text-size"]),"text-max-width":new _n(vt.layout_symbol["text-max-width"]),"text-line-height":new pn(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new _n(vt.layout_symbol["text-letter-spacing"]),"text-justify":new _n(vt.layout_symbol["text-justify"]),"text-radial-offset":new _n(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new pn(vt.layout_symbol["text-variable-anchor"]),"text-anchor":new _n(vt.layout_symbol["text-anchor"]),"text-max-angle":new pn(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new pn(vt.layout_symbol["text-writing-mode"]),"text-rotate":new _n(vt.layout_symbol["text-rotate"]),"text-padding":new pn(vt.layout_symbol["text-padding"]),"text-keep-upright":new pn(vt.layout_symbol["text-keep-upright"]),"text-transform":new _n(vt.layout_symbol["text-transform"]),"text-offset":new _n(vt.layout_symbol["text-offset"]),"text-allow-overlap":new pn(vt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new pn(vt.layout_symbol["text-ignore-placement"]),"text-optional":new pn(vt.layout_symbol["text-optional"])}),_f={paint:new Ii({"icon-opacity":new _n(vt.paint_symbol["icon-opacity"]),"icon-color":new _n(vt.paint_symbol["icon-color"]),"icon-halo-color":new _n(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new _n(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _n(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new pn(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new pn(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new _n(vt.paint_symbol["text-opacity"]),"text-color":new _n(vt.paint_symbol["text-color"],{runtimeType:Ye,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new _n(vt.paint_symbol["text-halo-color"]),"text-halo-width":new _n(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new _n(vt.paint_symbol["text-halo-blur"]),"text-translate":new pn(vt.paint_symbol["text-translate"]),"text-translate-anchor":new pn(vt.paint_symbol["text-translate-anchor"])}),layout:Wb},id=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:ie,this.defaultValue=r};id.prototype.evaluate=function(r){if(r.formattedSection){var s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},id.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},id.prototype.possibleOutputs=function(){return[void 0]},id.prototype.serialize=function(){return null},fn("FormatSectionOverride",id,{omit:["defaultValue"]});var Zi=(function(r){function s(h){r.call(this,h,_f)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.recalculate=function(h,v){if(r.prototype.recalculate.call(this,h,v),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var S=this.layout.get("text-writing-mode");if(S){for(var T=[],N=0,R=S;N<R.length;N+=1){var V=R[N];T.indexOf(V)<0&&T.push(V)}this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},s.prototype.getValueAndResolveTokens=function(h,v,S){var T=this.layout.get(h).evaluate(v,{},S),N=this._unevaluatedLayout._values[h];return N.isDataDriven()||Ud(N.value)||!T?T:(function(R,V){return V.replace(/{([^{}]+)}/g,(function(G,K){return K in R?String(R[K]):""}))})(v.properties,T)},s.prototype.createBucket=function(h){return new rr(h)},s.prototype.queryRadius=function(){return 0},s.prototype.queryIntersectsFeature=function(){return!1},s.prototype._setPaintOverrides=function(){for(var h=0,v=_f.paint.overridableProperties;h<v.length;h+=1){var S=v[h];if(s.hasPaintOverride(this.layout,S)){var T=this.paint.get(S),N=new id(T),R=new Du(N,T.property.specification),V=null;V=T.value.kind==="constant"||T.value.kind==="source"?new Pc("source",R):new Ic("composite",R,T.value.zoomStops,T.value._interpolationType),this.paint._values[S]=new to(T.property,V,T.parameters)}}},s.prototype._handleOverridablePaintPropertyUpdate=function(h,v,S){return!(!this.layout||v.isDataDriven()||S.isDataDriven())&&s.hasPaintOverride(this.layout,h)},s.hasPaintOverride=function(h,v){var S=h.get("text-field"),T=_f.paint.properties[v],N=!1,R=function(K){for(var ae=0,de=K;ae<de.length;ae+=1){var le=de[ae];if(T.overrides&&T.overrides.hasOverride(le))return void(N=!0)}};if(S.value.kind==="constant"&&S.value.value instanceof kn)R(S.value.value.sections);else if(S.value.kind==="source"){var V=function(K){if(!N)if(K instanceof pr&&Bn(K.value)===xt){var ae=K.value;R(ae.sections)}else K instanceof Kr?R(K.sections):K.eachChild(V)},G=S.value;G._styleExpression&&V(G._styleExpression.expression)}return N},s.hasPaintOverrides=function(h){for(var v=0,S=_f.paint.overridableProperties;v<S.length;v+=1){var T=S[v];if(s.hasPaintOverride(h,T))return!0}return!1},s})(Ga),Wo={paint:new Ii({"background-color":new pn(vt.paint_background["background-color"]),"background-pattern":new El(vt.paint_background["background-pattern"]),"background-opacity":new pn(vt.paint_background["background-opacity"])})},sc=(function(r){function s(h){r.call(this,h,Wo)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s})(Ga),ix={paint:new Ii({"raster-opacity":new pn(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new pn(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new pn(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new pn(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new pn(vt.paint_raster["raster-saturation"]),"raster-contrast":new pn(vt.paint_raster["raster-contrast"]),"raster-resampling":new pn(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new pn(vt.paint_raster["raster-fade-duration"])})},ax=(function(r){function s(h){r.call(this,h,ix)}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s})(Ga),ox=(function(r){function s(h){r.call(this,h,{}),this.implementation=h}return r&&(s.__proto__=r),s.prototype=Object.create(r&&r.prototype),s.prototype.constructor=s,s.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},s.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},s.prototype.recalculate=function(){},s.prototype.updateTransitions=function(){},s.prototype.hasTransition=function(){},s.prototype.serialize=function(){},s.prototype.onAdd=function(h){this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},s.prototype.onRemove=function(h){this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},s})(Ga),Qb={circle:Ms,heatmap:Ai,hillshade:jp,fill:Ov,"fill-extrusion":Cg,line:Hv,symbol:Zi,background:sc,raster:ax},wf=self.HTMLImageElement,Fo=self.HTMLCanvasElement,Os=self.HTMLVideoElement,Hg=self.ImageData,oo=self.ImageBitmap,Wc=function(r,s,h,v){this.context=r,this.format=h,this.texture=r.gl.createTexture(),this.update(s,v)};Wc.prototype.update=function(r,s,h){var v=r.width,S=r.height,T=!(this.size&&this.size[0]===v&&this.size[1]===S||h),N=this.context,R=N.gl;if(this.useMipmap=!!(s&&s.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),N.pixelStoreUnpackFlipY.set(!1),N.pixelStoreUnpack.set(1),N.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!s||s.premultiply!==!1)),T)this.size=[v,S],r instanceof wf||r instanceof Fo||r instanceof Os||r instanceof Hg||oo&&r instanceof oo?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,r):R.texImage2D(R.TEXTURE_2D,0,this.format,v,S,0,this.format,R.UNSIGNED_BYTE,r.data);else{var V=h||{x:0,y:0},G=V.x,K=V.y;r instanceof wf||r instanceof Fo||r instanceof Os||r instanceof Hg||oo&&r instanceof oo?R.texSubImage2D(R.TEXTURE_2D,0,G,K,R.RGBA,R.UNSIGNED_BYTE,r):R.texSubImage2D(R.TEXTURE_2D,0,G,K,v,S,R.RGBA,R.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)},Wc.prototype.bind=function(r,s,h){var v=this.context.gl;v.bindTexture(v.TEXTURE_2D,this.texture),h!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,h||r),this.filter=r),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)},Wc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Wc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var rl=function(r){var s=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){s._triggered=!1,s._callback()})};rl.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){r._triggered=!1,r._callback()}),0))},rl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Rs=function(r,s,h){this.target=r,this.parent=s,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ne(["receive","process"],this),this.invoker=new rl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ze()?r:self};function Nl(r,s,h){var v=2*Math.PI*6378137/256/Math.pow(2,h);return[r*v-2*Math.PI*6378137/2,s*v-2*Math.PI*6378137/2]}Rs.prototype.send=function(r,s,h,v,S){var T=this;S===void 0&&(S=!1);var N=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[N]=h);var R=De(this.globalScope)?void 0:[];return this.target.postMessage({id:N,type:r,hasCallback:!!h,targetMapId:v,mustQueue:S,sourceMapId:this.mapId,data:Go(s,R)},R),{cancel:function(){h&&delete T.callbacks[N],T.target.postMessage({id:N,type:"<cancel>",targetMapId:v,sourceMapId:T.mapId})}}},Rs.prototype.receive=function(r){var s=r.data,h=s.id;if(h&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){delete this.tasks[h];var v=this.cancelCallbacks[h];delete this.cancelCallbacks[h],v&&v()}else ze()||s.mustQueue?(this.tasks[h]=s,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,s)},Rs.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),s=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(r,s)}},Rs.prototype.processTask=function(r,s){var h=this;if(s.type==="<response>"){var v=this.callbacks[r];delete this.callbacks[r],v&&(s.error?v(ji(s.error)):v(null,ji(s.data)))}else{var S=!1,T=De(this.globalScope)?void 0:[],N=s.hasCallback?function(K,ae){S=!0,delete h.cancelCallbacks[r],h.target.postMessage({id:r,type:"<response>",sourceMapId:h.mapId,error:K?Go(K):null,data:Go(ae,T)},T)}:function(K){S=!0},R=null,V=ji(s.data);if(this.parent[s.type])R=this.parent[s.type](s.sourceMapId,V,N);else if(this.parent.getWorkerSource){var G=s.type.split(".");R=this.parent.getWorkerSource(s.sourceMapId,G[0],V.source)[G[1]](V,N)}else N(new Error("Could not find function "+s.type));!S&&R&&R.cancel&&(this.cancelCallbacks[r]=R.cancel)}},Rs.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Xi=function(r,s){r&&(s?this.setSouthWest(r).setNorthEast(s):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};Xi.prototype.setNorthEast=function(r){return this._ne=r instanceof hi?new hi(r.lng,r.lat):hi.convert(r),this},Xi.prototype.setSouthWest=function(r){return this._sw=r instanceof hi?new hi(r.lng,r.lat):hi.convert(r),this},Xi.prototype.extend=function(r){var s,h,v=this._sw,S=this._ne;if(r instanceof hi)s=r,h=r;else{if(!(r instanceof Xi))return Array.isArray(r)?r.every(Array.isArray)?this.extend(Xi.convert(r)):this.extend(hi.convert(r)):this;if(s=r._sw,h=r._ne,!s||!h)return this}return v||S?(v.lng=Math.min(s.lng,v.lng),v.lat=Math.min(s.lat,v.lat),S.lng=Math.max(h.lng,S.lng),S.lat=Math.max(h.lat,S.lat)):(this._sw=new hi(s.lng,s.lat),this._ne=new hi(h.lng,h.lat)),this},Xi.prototype.getCenter=function(){return new hi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Xi.prototype.getSouthWest=function(){return this._sw},Xi.prototype.getNorthEast=function(){return this._ne},Xi.prototype.getNorthWest=function(){return new hi(this.getWest(),this.getNorth())},Xi.prototype.getSouthEast=function(){return new hi(this.getEast(),this.getSouth())},Xi.prototype.getWest=function(){return this._sw.lng},Xi.prototype.getSouth=function(){return this._sw.lat},Xi.prototype.getEast=function(){return this._ne.lng},Xi.prototype.getNorth=function(){return this._ne.lat},Xi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Xi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Xi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Xi.prototype.contains=function(r){var s=hi.convert(r),h=s.lng,v=s.lat,S=this._sw.lat<=v&&v<=this._ne.lat,T=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(T=this._sw.lng>=h&&h>=this._ne.lng),S&&T},Xi.convert=function(r){return!r||r instanceof Xi?r:new Xi(r)};var hi=function(r,s){if(isNaN(r)||isNaN(s))throw new Error("Invalid LngLat object: ("+r+", "+s+")");if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};hi.prototype.wrap=function(){return new hi(L(this.lng,-180,180),this.lat)},hi.prototype.toArray=function(){return[this.lng,this.lat]},hi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},hi.prototype.toBounds=function(r){r===void 0&&(r=0);var s=360*r/40075017,h=s/Math.cos(Math.PI/180*this.lat);return new Xi(new hi(this.lng-h,this.lat-s),new hi(this.lng+h,this.lat+s))},hi.convert=function(r){if(r instanceof hi)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new hi(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new hi(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ls=2*Math.PI*6378137;function $g(r){return Ls*Math.cos(r*Math.PI/180)}function ad(r){return(180+r)/360}function dh(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function hh(r,s){return r/$g(s)}function Qc(r){var s=180-360*r;return 360/Math.PI*Math.atan(Math.exp(s*Math.PI/180))-90}var Jc=function(r,s,h){h===void 0&&(h=0),this.x=+r,this.y=+s,this.z=+h};Jc.fromLngLat=function(r,s){s===void 0&&(s=0);var h=hi.convert(r);return new Jc(ad(h.lng),dh(h.lat),hh(s,h.lat))},Jc.prototype.toLngLat=function(){return new hi(360*this.x-180,Qc(this.y))},Jc.prototype.toAltitude=function(){return r=this.z,s=this.y,r*$g(Qc(s));var r,s},Jc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ls*(r=Qc(this.y),1/Math.cos(r*Math.PI/180));var r};var eu=function(r,s,h){this.z=r,this.x=s,this.y=h,this.key=tu(0,r,r,s,h)};eu.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},eu.prototype.url=function(r,s){var h,v,S,T,N,R=(h=this.x,v=this.y,S=this.z,T=Nl(256*h,256*(v=Math.pow(2,S)-v-1),S),N=Nl(256*(h+1),256*(v+1),S),T[0]+","+T[1]+","+N[0]+","+N[1]),V=(function(G,K,ae){for(var de,le="",fe=G;fe>0;fe--)le+=(K&(de=1<<fe-1)?1:0)+(ae&de?2:0);return le})(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",V).replace("{bbox-epsg-3857}",R)},eu.prototype.getTilePoint=function(r){var s=Math.pow(2,this.z);return new C(8192*(r.x*s-this.x),8192*(r.y*s-this.y))},eu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var fh=function(r,s){this.wrap=r,this.canonical=s,this.key=tu(r,s.z,s.z,s.x,s.y)},ta=function(r,s,h,v,S){this.overscaledZ=r,this.wrap=s,this.canonical=new eu(h,+v,+S),this.key=tu(s,r,h,v,S)};function tu(r,s,h,v,S){(r*=2)<0&&(r=-1*r-1);var T=1<<h;return(T*T*r+T*S+v).toString(36)+h.toString(36)+s.toString(36)}ta.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},ta.prototype.scaledTo=function(r){var s=this.canonical.z-r;return r>this.canonical.z?new ta(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ta(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)},ta.prototype.calculateScaledKey=function(r,s){var h=this.canonical.z-r;return r>this.canonical.z?tu(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):tu(this.wrap*+s,r,r,this.canonical.x>>h,this.canonical.y>>h)},ta.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s},ta.prototype.children=function(r){if(this.overscaledZ>=r)return[new ta(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var s=this.canonical.z+1,h=2*this.canonical.x,v=2*this.canonical.y;return[new ta(s,this.wrap,s,h,v),new ta(s,this.wrap,s,h+1,v),new ta(s,this.wrap,s,h,v+1),new ta(s,this.wrap,s,h+1,v+1)]},ta.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},ta.prototype.wrapped=function(){return new ta(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ta.prototype.unwrapTo=function(r){return new ta(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},ta.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ta.prototype.toUnwrapped=function(){return new fh(this.wrap,this.canonical)},ta.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ta.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new Jc(r.x-this.wrap,r.y))},fn("CanonicalTileID",eu),fn("OverscaledTileID",ta,{omit:["posMatrix"]});var Ml=function(r,s,h){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return ye('"'+h+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=s.height;var v=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(var S=0;S<v;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(v,S)]=this.data[this._idx(v-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,v)]=this.data[this._idx(S,v-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(v,-1)]=this.data[this._idx(v-1,0)],this.data[this._idx(-1,v)]=this.data[this._idx(0,v-1)],this.data[this._idx(v,v)]=this.data[this._idx(v-1,v-1)]};Ml.prototype.get=function(r,s){var h=new Uint8Array(this.data.buffer),v=4*this._idx(r,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[v],h[v+1],h[v+2])},Ml.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ml.prototype._idx=function(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)},Ml.prototype._unpackMapbox=function(r,s,h){return(256*r*256+256*s+h)/10-1e4},Ml.prototype._unpackTerrarium=function(r,s,h){return 256*r+s+h/256-32768},Ml.prototype.getPixels=function(){return new Ba({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ml.prototype.backfillBorder=function(r,s,h){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var v=s*this.dim,S=s*this.dim+this.dim,T=h*this.dim,N=h*this.dim+this.dim;switch(s){case-1:v=S-1;break;case 1:S=v+1}switch(h){case-1:T=N-1;break;case 1:N=T+1}for(var R=-s*this.dim,V=-h*this.dim,G=T;G<N;G++)for(var K=v;K<S;K++)this.data[this._idx(K,G)]=r.data[this._idx(K+R,G+V)]},fn("DEMData",Ml);var tm=function(r){this._stringToNumber={},this._numberToString=[];for(var s=0;s<r.length;s++){var h=r[s];this._stringToNumber[h]=s,this._numberToString[s]=h}};tm.prototype.encode=function(r){return this._stringToNumber[r]},tm.prototype.decode=function(r){return this._numberToString[r]};var nm=function(r,s,h,v,S){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=h,r._y=v,this.properties=r.properties,this.id=S},Wr={geometry:{configurable:!0}};Wr.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Wr.geometry.set=function(r){this._geometry=r},nm.prototype.toJSON=function(){var r={geometry:this.geometry};for(var s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r},Object.defineProperties(nm.prototype,Wr);var ni=function(){this.state={},this.stateChanges={},this.deletedStates={}};ni.prototype.updateState=function(r,s,h){var v=String(s);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][v]=this.stateChanges[r][v]||{},B(this.stateChanges[r][v],h),this.deletedStates[r]===null)for(var S in this.deletedStates[r]={},this.state[r])S!==v&&(this.deletedStates[r][S]=null);else if(this.deletedStates[r]&&this.deletedStates[r][v]===null)for(var T in this.deletedStates[r][v]={},this.state[r][v])h[T]||(this.deletedStates[r][v][T]=null);else for(var N in h)this.deletedStates[r]&&this.deletedStates[r][v]&&this.deletedStates[r][v][N]===null&&delete this.deletedStates[r][v][N]},ni.prototype.removeFeatureState=function(r,s,h){if(this.deletedStates[r]!==null){var v=String(s);if(this.deletedStates[r]=this.deletedStates[r]||{},h&&s!==void 0)this.deletedStates[r][v]!==null&&(this.deletedStates[r][v]=this.deletedStates[r][v]||{},this.deletedStates[r][v][h]=null);else if(s!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][v])for(h in this.deletedStates[r][v]={},this.stateChanges[r][v])this.deletedStates[r][v][h]=null;else this.deletedStates[r][v]=null;else this.deletedStates[r]=null}},ni.prototype.getState=function(r,s){var h=String(s),v=this.state[r]||{},S=this.stateChanges[r]||{},T=B({},v[h],S[h]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var N=this.deletedStates[r][s];if(N===null)return{};for(var R in N)delete T[R]}return T},ni.prototype.initializeTileState=function(r,s){r.setFeatureState(this.state,s)},ni.prototype.coalesceChanges=function(r,s){var h={};for(var v in this.stateChanges){this.state[v]=this.state[v]||{};var S={};for(var T in this.stateChanges[v])this.state[v][T]||(this.state[v][T]={}),B(this.state[v][T],this.stateChanges[v][T]),S[T]=this.state[v][T];h[v]=S}for(var N in this.deletedStates){this.state[N]=this.state[N]||{};var R={};if(this.deletedStates[N]===null)for(var V in this.state[N])R[V]={},this.state[N][V]={};else for(var G in this.deletedStates[N]){if(this.deletedStates[N][G]===null)this.state[N][G]={};else for(var K=0,ae=Object.keys(this.deletedStates[N][G]);K<ae.length;K+=1){var de=ae[K];delete this.state[N][G][de]}R[G]=this.state[N][G]}h[N]=h[N]||{},B(h[N],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(var le in r)r[le].setFeatureState(h,s)};var ur=function(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new _l(8192,16,0),this.grid3D=new _l(8192,16,0),this.featureIndexArray=new yi,this.promoteId=s};function Pr(r){for(var s=1/0,h=1/0,v=-1/0,S=-1/0,T=0,N=r;T<N.length;T+=1){var R=N[T];s=Math.min(s,R.x),h=Math.min(h,R.y),v=Math.max(v,R.x),S=Math.max(S,R.y)}return{minX:s,minY:h,maxX:v,maxY:S}}function vi(r,s){return s-r}ur.prototype.insert=function(r,s,h,v,S,T){var N=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,v,S);for(var R=T?this.grid3D:this.grid,V=0;V<s.length;V++){for(var G=s[V],K=[1/0,1/0,-1/0,-1/0],ae=0;ae<G.length;ae++){var de=G[ae];K[0]=Math.min(K[0],de.x),K[1]=Math.min(K[1],de.y),K[2]=Math.max(K[2],de.x),K[3]=Math.max(K[3],de.y)}K[0]<8192&&K[1]<8192&&K[2]>=0&&K[3]>=0&&R.insert(N,K[0],K[1],K[2],K[3])}},ur.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Yu.VectorTile(new hf(this.rawTileData)).layers,this.sourceLayerCoder=new tm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ur.prototype.query=function(r,s,h){var v=this;this.loadVTLayers();for(var S=r.params||{},T=8192/r.tileSize/r.scale,N=Ou(S.filter),R=r.queryGeometry,V=r.queryPadding*T,G=Pr(R),K=this.grid.query(G.minX-V,G.minY-V,G.maxX+V,G.maxY+V),ae=Pr(r.cameraQueryGeometry),de=this.grid3D.query(ae.minX-V,ae.minY-V,ae.maxX+V,ae.maxY+V,(function(ct,wt,jt,Ct){return(function(Jt,nn,ln,sn,cn){for(var rn=0,Gt=Jt;rn<Gt.length;rn+=1){var Kn=Gt[rn];if(nn<=Kn.x&&ln<=Kn.y&&sn>=Kn.x&&cn>=Kn.y)return!0}var Ir=[new C(nn,ln),new C(nn,cn),new C(sn,cn),new C(sn,ln)];if(Jt.length>2){for(var br=0,Ln=Ir;br<Ln.length;br+=1)if(jl(Jt,Ln[br]))return!0}for(var or=0;or<Jt.length-1;or++)if(cf(Jt[or],Jt[or+1],Ir))return!0;return!1})(r.cameraQueryGeometry,ct-V,wt-V,jt+V,Ct+V)})),le=0,fe=de;le<fe.length;le+=1){var Me=fe[le];K.push(Me)}K.sort(vi);for(var Ie,Ue={},at=function(ct){var wt=K[ct];if(wt!==Ie){Ie=wt;var jt=v.featureIndexArray.get(wt),Ct=null;v.loadMatchingFeature(Ue,jt.bucketIndex,jt.sourceLayerIndex,jt.featureIndex,N,S.layers,s,(function(Jt,nn,ln){Ct||(Ct=Wl(Jt));var sn={};return ln!==void 0&&(sn=h.getState(nn.sourceLayer||"_geojsonTileLayer",ln)),nn.queryIntersectsFeature(R,Jt,sn,Ct,v.z,r.transform,T,r.pixelPosMatrix)}))}},ot=0;ot<K.length;ot++)at(ot);return Ue},ur.prototype.loadMatchingFeature=function(r,s,h,v,S,T,N,R){var V=this.bucketLayerIDs[s];if(!T||(function(at,ot){for(var ct=0;ct<at.length;ct++)if(ot.indexOf(at[ct])>=0)return!0;return!1})(T,V)){var G=this.sourceLayerCoder.decode(h),K=this.vtLayers[G].feature(v);if(S(new ti(this.tileID.overscaledZ),K))for(var ae=this.getId(K,G),de=0;de<V.length;de++){var le=V[de];if(!(T&&T.indexOf(le)<0)){var fe=N[le];if(fe){var Me=!R||R(K,fe,ae);if(Me){var Ie=new nm(K,this.z,this.x,this.y,ae);Ie.layer=fe.serialize();var Ue=r[le];Ue===void 0&&(Ue=r[le]=[]),Ue.push({featureIndex:v,feature:Ie,intersectionZ:Me})}}}}}},ur.prototype.lookupSymbolFeatures=function(r,s,h,v,S,T){var N={};this.loadVTLayers();for(var R=Ou(v),V=0,G=r;V<G.length;V+=1){var K=G[V];this.loadMatchingFeature(N,s,h,K,R,S,T)}return N},ur.prototype.hasLayer=function(r){for(var s=0,h=this.bucketLayerIDs;s<h.length;s+=1)for(var v=0,S=h[s];v<S.length;v+=1)if(r===S[v])return!0;return!1},ur.prototype.getId=function(r,s){var h=r.id;if(this.promoteId){var v=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];typeof(h=r.properties[v])=="boolean"&&(h=Number(h))}return h},fn("FeatureIndex",ur,{omit:["rawTileData","sourceLayerCoder"]});var Qr=function(r,s){this.tileID=r,this.uid=q(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Qr.prototype.registerFadeDuration=function(r){var s=r+this.timeAdded;s<lt.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)},Qr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Qr.prototype.loadVectorData=function(r,s,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var v in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=(function(G,K){var ae={};if(!K)return ae;for(var de=function(){var Me=fe[le],Ie=Me.layerIds.map((function(ct){return K.getLayer(ct)})).filter(Boolean);if(Ie.length!==0){Me.layers=Ie,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map((function(ct){return Ie.filter((function(wt){return wt.id===ct}))[0]})));for(var Ue=0,at=Ie;Ue<at.length;Ue+=1){var ot=at[Ue];ae[ot.id]=Me}}},le=0,fe=G;le<fe.length;le+=1)de();return ae})(r.buckets,s.style),this.hasSymbolBuckets=!1,this.buckets){var S=this.buckets[v];if(S instanceof rr){if(this.hasSymbolBuckets=!0,!h)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var T in this.buckets){var N=this.buckets[T];if(N instanceof rr&&N.hasRTLText){this.hasRTLText=!0,Pi.isLoading()||Pi.isLoaded()||Sl()!=="deferred"||Wd();break}}for(var R in this.queryPadding=0,this.buckets){var V=this.buckets[R];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(R).queryRadius(V))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new Zt},Qr.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Qr.prototype.getBucket=function(r){return this.buckets[r.id]},Qr.prototype.upload=function(r){for(var s in this.buckets){var h=this.buckets[s];h.uploadPending()&&h.upload(r)}var v=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Wc(r,this.imageAtlas.image,v.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Wc(r,this.glyphAtlasImage,v.ALPHA),this.glyphAtlasImage=null)},Qr.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},Qr.prototype.queryRenderedFeatures=function(r,s,h,v,S,T,N,R,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:v,scale:S,tileSize:this.tileSize,pixelPosMatrix:V,transform:N,params:T,queryPadding:this.queryPadding*R},r,s):{}},Qr.prototype.querySourceFeatures=function(r,s){var h=this.latestFeatureIndex;if(h&&h.rawTileData){var v=h.loadVTLayers(),S=s?s.sourceLayer:"",T=v._geojsonTileLayer||v[S];if(T)for(var N=Ou(s&&s.filter),R=this.tileID.canonical,V=R.z,G=R.x,K=R.y,ae={z:V,x:G,y:K},de=0;de<T.length;de++){var le=T.feature(de);if(N(new ti(this.tileID.overscaledZ),le)){var fe=h.getId(le,S),Me=new nm(le,V,G,K,fe);Me.tile=ae,r.push(Me)}}}},Qr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Qr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Qr.prototype.setExpiryData=function(r){var s=this.expirationTime;if(r.cacheControl){var h=Je(r.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var v=Date.now(),S=!1;if(this.expirationTime>v)S=!1;else if(s)if(this.expirationTime<s)S=!0;else{var T=this.expirationTime-s;T?this.expirationTime=v+Math.max(T,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Qr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Qr.prototype.setFeatureState=function(r,s){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var h=this.latestFeatureIndex.loadVTLayers();for(var v in this.buckets){var S=this.buckets[v],T=S.layers[0].sourceLayer||"_geojsonTileLayer",N=h[T],R=r[T];N&&R&&Object.keys(R).length!==0&&(S.update(R,N,this.imageAtlas&&this.imageAtlas.patternPositions||{}),s&&s.style&&(this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(v).queryRadius(S))))}}},Qr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Qr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<lt.now()},Qr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Qr.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=lt.now()+r},Qr.prototype.setDependencies=function(r,s){for(var h={},v=0,S=s;v<S.length;v+=1)h[S[v]]=!0;this.dependencies[r]=h},Qr.prototype.hasDependency=function(r,s){for(var h=0,v=r;h<v.length;h+=1){var S=v[h],T=this.dependencies[S];if(T){for(var N=0,R=s;N<R.length;N+=1)if(T[R[N]])return!0}}return!1};var Uo=self.performance,od=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},Uo.mark(this._marks.start)};od.prototype.finish=function(){Uo.mark(this._marks.end);var r=Uo.getEntriesByName(this._marks.measure);return r.length===0&&(Uo.measure(this._marks.measure,this._marks.start,this._marks.end),r=Uo.getEntriesByName(this._marks.measure),Uo.clearMarks(this._marks.start),Uo.clearMarks(this._marks.end),Uo.clearMeasures(this._marks.measure)),r},a.Actor=Rs,a.AlphaImage=Oi,a.CanonicalTileID=eu,a.CollisionBoxArray=Zt,a.Color=qt,a.DEMData=Ml,a.DataConstantProperty=pn,a.DictionaryCoder=tm,a.EXTENT=8192,a.ErrorEvent=Ti,a.EvaluationParameters=ti,a.Event=fr,a.Evented=Fr,a.FeatureIndex=ur,a.FillBucket=Ps,a.FillExtrusionBucket=Is,a.ImageAtlas=rc,a.ImagePosition=pf,a.LineBucket=ro,a.LngLat=hi,a.LngLatBounds=Xi,a.MercatorCoordinate=Jc,a.ONE_EM=24,a.OverscaledTileID=ta,a.Point=C,a.Point$1=C,a.ProgramConfiguration=xa,a.Properties=Ii,a.Protobuf=hf,a.RGBAImage=Ba,a.RequestManager=Rt,a.RequestPerformance=od,a.ResourceType=qr,a.SegmentVector=tr,a.SourceFeatureState=ni,a.StructArrayLayout1ui2=kt,a.StructArrayLayout2i4=P,a.StructArrayLayout2ui4=_t,a.StructArrayLayout3ui6=ft,a.StructArrayLayout4i8=F,a.SymbolBucket=rr,a.Texture=Wc,a.Tile=Qr,a.Transitionable=mo,a.Uniform1f=As,a.Uniform1i=Qd,a.Uniform2f=Yo,a.Uniform3f=Vc,a.Uniform4f=Qs,a.UniformColor=Tl,a.UniformMatrix4f=li,a.UnwrappedTileID=fh,a.ValidationError=Yt,a.WritingMode=Bo,a.ZoomHistory=zc,a.addDynamicAttributes=nl,a.asyncAll=function(r,s,h){if(!r.length)return h(null,[]);var v=r.length,S=new Array(r.length),T=null;r.forEach((function(N,R){s(N,(function(V,G){V&&(T=V),S[R]=G,--v==0&&h(T,S)}))}))},a.bezier=A,a.bindAll=ne,a.browser=lt,a.cacheEntryPossiblyAdded=function(r){++Sr>Xn&&(r.getActor().send("enforceCacheSizeLimit",Mn),Sr=0)},a.clamp=I,a.clearTileCache=function(r){var s=self.caches.delete("mapbox-tiles");r&&s.catch(r).then((function(){return r()}))},a.clone=function(r){var s=new us(16);return s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},a.clone$1=he,a.config=We,a.create=function(){var r=new us(16);return us!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},a.create$1=function(){var r=new us(9);return us!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},a.create$2=function(){var r=new us(4);return us!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},a.createCommonjsModule=g,a.createExpression=Vd,a.createLayout=b,a.createStyleLayer=function(r){return r.type==="custom"?new ox(r):new Qb[r.type](r)},a.deepEqual=function r(s,h){if(Array.isArray(s)){if(!Array.isArray(h)||s.length!==h.length)return!1;for(var v=0;v<s.length;v++)if(!r(s[v],h[v]))return!1;return!0}if(typeof s=="object"&&s!==null&&h!==null){if(typeof h!="object"||Object.keys(s).length!==Object.keys(h).length)return!1;for(var S in s)if(!r(s[S],h[S]))return!1;return!0}return s===h},a.ease=D,a.emitValidationErrors=Yd,a.endsWith=re,a.enforceCacheSizeLimit=function(r){wr(),Ve&&Ve.then((function(s){s.keys().then((function(h){for(var v=0;v<h.length-r;v++)s.delete(h[v])}))}))},a.evaluateSizeForFeature=Lg,a.evaluateSizeForZoom=Kp,a.evaluateVariableOffset=tl,a.evented=Bc,a.extend=B,a.featureFilter=Ou,a.filterObject=oe,a.fromRotation=function(r,s){var h=Math.sin(s),v=Math.cos(s);return r[0]=v,r[1]=h,r[2]=0,r[3]=-h,r[4]=v,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},a.getAnchorAlignment=gf,a.getAnchorJustification=Qp,a.getArrayBuffer=da,a.getImage=ws,a.getJSON=function(r,s){return qa(B(r,{type:"json"}),s)},a.getRTLTextPluginStatus=Sl,a.getReferrer=So,a.getVideo=function(r,s){var h,v,S=self.document.createElement("video");S.muted=!0,S.onloadstart=function(){s(null,S)};for(var T=0;T<r.length;T++){var N=self.document.createElement("source");h=r[T],v=void 0,(v=self.document.createElement("a")).href=h,(v.protocol!==self.document.location.protocol||v.host!==self.document.location.host)&&(S.crossOrigin="Anonymous"),N.src=r[T],S.appendChild(N)}return{cancel:function(){}}},a.identity=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},a.invert=function(r,s){var h=s[0],v=s[1],S=s[2],T=s[3],N=s[4],R=s[5],V=s[6],G=s[7],K=s[8],ae=s[9],de=s[10],le=s[11],fe=s[12],Me=s[13],Ie=s[14],Ue=s[15],at=h*R-v*N,ot=h*V-S*N,ct=h*G-T*N,wt=v*V-S*R,jt=v*G-T*R,Ct=S*G-T*V,Jt=K*Me-ae*fe,nn=K*Ie-de*fe,ln=K*Ue-le*fe,sn=ae*Ie-de*Me,cn=ae*Ue-le*Me,rn=de*Ue-le*Ie,Gt=at*rn-ot*cn+ct*sn+wt*ln-jt*nn+Ct*Jt;return Gt?(Gt=1/Gt,r[0]=(R*rn-V*cn+G*sn)*Gt,r[1]=(S*cn-v*rn-T*sn)*Gt,r[2]=(Me*Ct-Ie*jt+Ue*wt)*Gt,r[3]=(de*jt-ae*Ct-le*wt)*Gt,r[4]=(V*ln-N*rn-G*nn)*Gt,r[5]=(h*rn-S*ln+T*nn)*Gt,r[6]=(Ie*ct-fe*Ct-Ue*ot)*Gt,r[7]=(K*Ct-de*ct+le*ot)*Gt,r[8]=(N*cn-R*ln+G*Jt)*Gt,r[9]=(v*ln-h*cn-T*Jt)*Gt,r[10]=(fe*jt-Me*ct+Ue*at)*Gt,r[11]=(ae*ct-K*jt-le*at)*Gt,r[12]=(R*nn-N*sn-V*Jt)*Gt,r[13]=(h*sn-v*nn+S*Jt)*Gt,r[14]=(Me*ot-fe*wt-Ie*at)*Gt,r[15]=(K*wt-ae*ot+de*at)*Gt,r):null},a.isChar=$t,a.isGoongURL=vn,a.keysDifference=function(r,s){var h=[];for(var v in r)v in s||h.push(v);return h},a.makeRequest=qa,a.mapObject=ee,a.mercatorXfromLng=ad,a.mercatorYfromLat=dh,a.mercatorZfromAltitude=hh,a.multiply=function(r,s,h){var v=s[0],S=s[1],T=s[2],N=s[3],R=s[4],V=s[5],G=s[6],K=s[7],ae=s[8],de=s[9],le=s[10],fe=s[11],Me=s[12],Ie=s[13],Ue=s[14],at=s[15],ot=h[0],ct=h[1],wt=h[2],jt=h[3];return r[0]=ot*v+ct*R+wt*ae+jt*Me,r[1]=ot*S+ct*V+wt*de+jt*Ie,r[2]=ot*T+ct*G+wt*le+jt*Ue,r[3]=ot*N+ct*K+wt*fe+jt*at,ot=h[4],ct=h[5],wt=h[6],jt=h[7],r[4]=ot*v+ct*R+wt*ae+jt*Me,r[5]=ot*S+ct*V+wt*de+jt*Ie,r[6]=ot*T+ct*G+wt*le+jt*Ue,r[7]=ot*N+ct*K+wt*fe+jt*at,ot=h[8],ct=h[9],wt=h[10],jt=h[11],r[8]=ot*v+ct*R+wt*ae+jt*Me,r[9]=ot*S+ct*V+wt*de+jt*Ie,r[10]=ot*T+ct*G+wt*le+jt*Ue,r[11]=ot*N+ct*K+wt*fe+jt*at,ot=h[12],ct=h[13],wt=h[14],jt=h[15],r[12]=ot*v+ct*R+wt*ae+jt*Me,r[13]=ot*S+ct*V+wt*de+jt*Ie,r[14]=ot*T+ct*G+wt*le+jt*Ue,r[15]=ot*N+ct*K+wt*fe+jt*at,r},a.mvt=Yu,a.number=Pn,a.offscreenCanvasSupported=ka,a.ortho=function(r,s,h,v,S,T,N){var R=1/(s-h),V=1/(v-S),G=1/(T-N);return r[0]=-2*R,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*V,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*G,r[11]=0,r[12]=(s+h)*R,r[13]=(S+v)*V,r[14]=(N+T)*G,r[15]=1,r},a.parseGlyphPBF=function(r){return new hf(r).readFields(Na,[])},a.pbf=hf,a.performSymbolLayout=function(r,s,h,v,S,T){r.createArrays();var N=512*r.overscaling;r.tilePixelRatio=8192/N,r.compareText={},r.iconsNeedLinear=!1;var R=r.layers[0].layout,V=r.layers[0]._unevaluatedLayout._values,G={};if(r.textSizeData.kind==="composite"){var K=r.textSizeData,ae=K.minZoom,de=K.maxZoom;G.compositeTextSizes=[V["text-size"].possiblyEvaluate(new ti(ae)),V["text-size"].possiblyEvaluate(new ti(de))]}if(r.iconSizeData.kind==="composite"){var le=r.iconSizeData,fe=le.minZoom,Me=le.maxZoom;G.compositeIconSizes=[V["icon-size"].possiblyEvaluate(new ti(fe)),V["icon-size"].possiblyEvaluate(new ti(Me))]}G.layoutTextSize=V["text-size"].possiblyEvaluate(new ti(r.zoom+1)),G.layoutIconSize=V["icon-size"].possiblyEvaluate(new ti(r.zoom+1)),G.textMaxSize=V["text-size"].possiblyEvaluate(new ti(18));for(var Ie=24*R.get("text-line-height"),Ue=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",at=R.get("text-keep-upright"),ot=R.get("text-size"),ct=function(){var Ct=jt[wt],Jt=R.get("text-font").evaluate(Ct,{}).join(","),nn=ot.evaluate(Ct,{}),ln=G.layoutTextSize.evaluate(Ct,{}),sn=G.layoutIconSize.evaluate(Ct,{}),cn={horizontal:{},vertical:void 0},rn=Ct.text,Gt=[0,0];if(rn){var Kn=rn.toString(),Ir=24*R.get("text-letter-spacing").evaluate(Ct,{}),br=(function(mr){for(var Br=0,ri=mr;Br<ri.length;Br+=1)if(!bp(ri[Br].charCodeAt(0)))return!1;return!0})(Kn)?Ir:0,Ln=R.get("text-anchor").evaluate(Ct,{}),or=R.get("text-variable-anchor");if(!or){var dr=R.get("text-radial-offset").evaluate(Ct,{});Gt=dr?tl(Ln,[24*dr,nd]):R.get("text-offset").evaluate(Ct,{}).map((function(mr){return 24*mr}))}var Yn=Ue?"center":R.get("text-justify").evaluate(Ct,{}),cr=R.get("symbol-placement"),_r=cr==="point"?24*R.get("text-max-width").evaluate(Ct,{}):0,ci=function(){r.allowVerticalPlacement&&Mo(Kn)&&(cn.vertical=Gp(rn,s,h,S,Jt,_r,Ie,Ln,"left",br,Gt,Bo.vertical,!0,cr,ln,nn))};if(!Ue&&or){for(var Mi=Yn==="auto"?or.map((function(mr){return Qp(mr)})):[Yn],Ua=!1,Va=0;Va<Mi.length;Va++){var Ki=Mi[Va];if(!cn.horizontal[Ki])if(Ua)cn.horizontal[Ki]=cn.horizontal[0];else{var pa=Gp(rn,s,h,S,Jt,_r,Ie,"center",Ki,br,Gt,Bo.horizontal,!1,cr,ln,nn);pa&&(cn.horizontal[Ki]=pa,Ua=pa.positionedLines.length===1)}}ci()}else{Yn==="auto"&&(Yn=Qp(Ln));var Yi=Gp(rn,s,h,S,Jt,_r,Ie,Ln,Yn,br,Gt,Bo.horizontal,!1,cr,ln,nn);Yi&&(cn.horizontal[Yn]=Yi),ci(),Mo(Kn)&&Ue&&at&&(cn.vertical=Gp(rn,s,h,S,Jt,_r,Ie,Ln,Yn,br,Gt,Bo.vertical,!1,cr,ln,nn))}}var ma=void 0,ca=!1;if(Ct.icon&&Ct.icon.name){var fi=v[Ct.icon.name];fi&&(ma=(function(mr,Br,ri){var $r=gf(ri),ua=$r.horizontalAlign,Gr=$r.verticalAlign,sr=Br[0],xi=Br[1],il=sr-mr.displaySize[0]*ua,Da=il+mr.displaySize[0],Xa=xi-mr.displaySize[1]*Gr;return{image:mr,top:Xa,bottom:Xa+mr.displaySize[1],left:il,right:Da}})(S[Ct.icon.name],R.get("icon-offset").evaluate(Ct,{}),R.get("icon-anchor").evaluate(Ct,{})),ca=fi.sdf,r.sdfIcons===void 0?r.sdfIcons=fi.sdf:r.sdfIcons!==fi.sdf&&ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fi.pixelRatio!==r.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var Vi=Ug(cn.horizontal)||cn.vertical;r.iconsInText=!!Vi&&Vi.iconsInText,(Vi||ma)&&(function(mr,Br,ri,$r,ua,Gr,sr,xi,il,Da){var Xa=Gr.textMaxSize.evaluate(Br,{});Xa===void 0&&(Xa=sr);var ds,ba=mr.layers[0].layout,Vo=ba.get("icon-offset").evaluate(Br,{}),qo=Ug(ri.horizontal),hs=sr/24,nu=mr.tilePixelRatio*hs,zs=mr.tilePixelRatio*Xa/24,Dl=mr.tilePixelRatio*xi,Ho=mr.tilePixelRatio*ba.get("symbol-spacing"),ru=ba.get("text-padding")*mr.tilePixelRatio,ph=ba.get("icon-padding")*mr.tilePixelRatio,mh=ba.get("text-max-angle")/180*Math.PI,Sf=ba.get("text-rotation-alignment")==="map"&&ba.get("symbol-placement")!=="point",rm=ba.get("icon-rotation-alignment")==="map"&&ba.get("symbol-placement")!=="point",gh=ba.get("symbol-placement"),iu=Ho/2,lc=ba.get("icon-text-fit");$r&&lc!=="none"&&(mr.allowVerticalPlacement&&ri.vertical&&(ds=Xp($r,ri.vertical,lc,ba.get("icon-text-fit-padding"),Vo,hs)),qo&&($r=Xp($r,qo,lc,ba.get("icon-text-fit-padding"),Vo,hs)));var cc=function(Pa,Qo){Qo.x<0||Qo.x>=8192||Qo.y<0||Qo.y>=8192||(function(Or,Ia,_o,fs,Il,pd,Bs,so,Wn,Ur,Nf,om,sm,cx,Mf,uc,Zg,Xg,lm,ux,Fs,Df,cm){var Pf,vh,wo,md,xh,gd=Or.addToLineVertexArray(Ia,_o),Kg=0,bh=0,ps=0,Yg=0,_h=-1,al=-1,dc={},dx=Za(""),lu=0,um=0;if(so._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Pf=so.layout.get("text-offset").evaluate(Fs,{}).map((function(bx){return 24*bx})),lu=Pf[0],um=Pf[1]):(lu=24*so.layout.get("text-radial-offset").evaluate(Fs,{}),um=nd),Or.allowVerticalPlacement&&fs.vertical){var hx=so.layout.get("text-rotate").evaluate(Fs,{})+90,Jb=fs.vertical;md=new vf(Wn,_o,Ia,Ur,Nf,om,Jb,sm,cx,Mf,Or.overscaling,hx),Bs&&(xh=new vf(Wn,_o,Ia,Ur,Nf,om,Bs,Zg,Xg,Mf,Or.overscaling,hx))}if(Il){var Wg=so.layout.get("icon-rotate").evaluate(Fs,{}),fx=so.layout.get("icon-text-fit")!=="none",px=Fg(Il,Wg,cm,fx),Qg=Bs?Fg(Bs,Wg,cm,fx):void 0;wo=new vf(Wn,_o,Ia,Ur,Nf,om,Il,Zg,Xg,!1,Or.overscaling,Wg),Kg=4*px.length;var mx=Or.iconSizeData,wh=null;mx.kind==="source"?(wh=[128*so.layout.get("icon-size").evaluate(Fs,{})])[0]>32640&&ye(Or.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):mx.kind==="composite"&&((wh=[128*Df.compositeIconSizes[0].evaluate(Fs,{}),128*Df.compositeIconSizes[1].evaluate(Fs,{})])[0]>32640||wh[1]>32640)&&ye(Or.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Or.addSymbols(Or.icon,px,wh,ux,lm,Fs,!1,Ia,gd.lineStartIndex,gd.lineLength,-1),_h=Or.icon.placedSymbolArray.length-1,Qg&&(bh=4*Qg.length,Or.addSymbols(Or.icon,Qg,wh,ux,lm,Fs,Bo.vertical,Ia,gd.lineStartIndex,gd.lineLength,-1),al=Or.icon.placedSymbolArray.length-1)}for(var yd in fs.horizontal){var cu=fs.horizontal[yd];if(!vh){dx=Za(cu.text);var gx=so.layout.get("text-rotate").evaluate(Fs,{});vh=new vf(Wn,_o,Ia,Ur,Nf,om,cu,sm,cx,Mf,Or.overscaling,gx)}var yx=cu.positionedLines.length===1;if(ps+=Jp(Or,Ia,cu,pd,so,Mf,Fs,uc,gd,fs.vertical?Bo.horizontal:Bo.horizontalOnly,yx?Object.keys(fs.horizontal):[yd],dc,_h,Df),yx)break}fs.vertical&&(Yg+=Jp(Or,Ia,fs.vertical,pd,so,Mf,Fs,uc,gd,Bo.vertical,["vertical"],dc,al,Df));var Sh=vh?vh.boxStartIndex:Or.collisionBoxArray.length,If=vh?vh.boxEndIndex:Or.collisionBoxArray.length,vx=md?md.boxStartIndex:Or.collisionBoxArray.length,dm=md?md.boxEndIndex:Or.collisionBoxArray.length,Jg=wo?wo.boxStartIndex:Or.collisionBoxArray.length,ey=wo?wo.boxEndIndex:Or.collisionBoxArray.length,hm=xh?xh.boxStartIndex:Or.collisionBoxArray.length,xx=xh?xh.boxEndIndex:Or.collisionBoxArray.length;Or.glyphOffsetArray.length>=rr.MAX_GLYPHS&&ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Or.symbolInstances.emplaceBack(Ia.x,Ia.y,dc.right>=0?dc.right:-1,dc.center>=0?dc.center:-1,dc.left>=0?dc.left:-1,dc.vertical||-1,_h,al,dx,Sh,If,vx,dm,Jg,ey,hm,xx,Ur,ps,Yg,Kg,bh,0,sm,lu,um)})(mr,Qo,Pa,ri,$r,ua,ds,mr.layers[0],mr.collisionBoxArray,Br.index,Br.sourceLayerIndex,mr.index,nu,ru,Sf,il,Dl,ph,rm,Vo,Br,Gr,Da)};if(gh==="line")for(var sd=0,Ef=(function(Pa,Qo,Or,Ia,_o){for(var fs=[],Il=0;Il<Pa.length;Il++)for(var pd=Pa[Il],Bs=void 0,so=0;so<pd.length-1;so++){var Wn=pd[so],Ur=pd[so+1];Wn.x<Qo&&Ur.x<Qo||(Wn.x<Qo?Wn=new C(Qo,Wn.y+(Ur.y-Wn.y)*((Qo-Wn.x)/(Ur.x-Wn.x)))._round():Ur.x<Qo&&(Ur=new C(Qo,Wn.y+(Ur.y-Wn.y)*((Qo-Wn.x)/(Ur.x-Wn.x)))._round()),Wn.y<Or&&Ur.y<Or||(Wn.y<Or?Wn=new C(Wn.x+(Ur.x-Wn.x)*((Or-Wn.y)/(Ur.y-Wn.y)),Or)._round():Ur.y<Or&&(Ur=new C(Wn.x+(Ur.x-Wn.x)*((Or-Wn.y)/(Ur.y-Wn.y)),Or)._round()),Wn.x>=Ia&&Ur.x>=Ia||(Wn.x>=Ia?Wn=new C(Ia,Wn.y+(Ur.y-Wn.y)*((Ia-Wn.x)/(Ur.x-Wn.x)))._round():Ur.x>=Ia&&(Ur=new C(Ia,Wn.y+(Ur.y-Wn.y)*((Ia-Wn.x)/(Ur.x-Wn.x)))._round()),Wn.y>=_o&&Ur.y>=_o||(Wn.y>=_o?Wn=new C(Wn.x+(Ur.x-Wn.x)*((_o-Wn.y)/(Ur.y-Wn.y)),_o)._round():Ur.y>=_o&&(Ur=new C(Wn.x+(Ur.x-Wn.x)*((_o-Wn.y)/(Ur.y-Wn.y)),_o)._round()),Bs&&Wn.equals(Bs[Bs.length-1])||(Bs=[Wn],fs.push(Bs)),Bs.push(Ur)))))}return fs})(Br.geometry,0,0,8192,8192);sd<Ef.length;sd+=1)for(var yh=Ef[sd],Cf=Bg(yh,Ho,mh,ri.vertical||qo,$r,24,zs,mr.overscaling,8192),Tf=0,kf=Cf;Tf<kf.length;Tf+=1){var au=kf[Tf],im=qo;im&&Vg(mr,im.text,iu,au)||cc(yh,au)}else if(gh==="line-center")for(var ld=0,Cr=Br.geometry;ld<Cr.length;ld+=1){var cd=Cr[ld];if(cd.length>1){var ud=oc(cd,mh,ri.vertical||qo,$r,24,zs);ud&&cc(cd,ud)}}else if(Br.type==="Polygon")for(var ou=0,dd=Op(Br.geometry,0);ou<dd.length;ou+=1){var hd=dd[ou],su=Kc(hd,16);cc(hd[0],new ac(su.x,su.y,0))}else if(Br.type==="LineString")for(var Pl=0,jf=Br.geometry;Pl<jf.length;Pl+=1){var fd=jf[Pl];cc(fd,new ac(fd[0].x,fd[0].y,0))}else if(Br.type==="Point")for(var Gg=0,sx=Br.geometry;Gg<sx.length;Gg+=1)for(var lx=sx[Gg],am=0,bi=lx;am<bi.length;am+=1){var Af=bi[am];cc([Af],new ac(Af.x,Af.y,0))}})(r,Ct,cn,ma,v,G,ln,sn,Gt,ca)},wt=0,jt=r.features;wt<jt.length;wt+=1)ct();T&&r.generateCollisionDebugBuffers()},a.perspective=function(r,s,h,v,S){var T,N=1/Math.tan(s/2);return r[0]=N/h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=N,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,S!=null&&S!==1/0?(T=1/(v-S),r[10]=(S+v)*T,r[14]=2*S*v*T):(r[10]=-1,r[14]=-2*v),r},a.pick=function(r,s){for(var h={},v=0;v<s.length;v++){var S=s[v];S in r&&(h[S]=r[S])}return h},a.plugin=Pi,a.polygonIntersectsPolygon=dg,a.postMapLoadEvent=on,a.postTurnstileEvent=Qe,a.potpack=Ig,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=fn,a.registerForPluginStateChange=function(r){return r({pluginStatus:ja,pluginURL:ya}),Bc.on("pluginStateChange",r),r},a.rotate=function(r,s,h){var v=s[0],S=s[1],T=s[2],N=s[3],R=Math.sin(h),V=Math.cos(h);return r[0]=v*V+T*R,r[1]=S*V+N*R,r[2]=v*-R+T*V,r[3]=S*-R+N*V,r},a.rotateX=function(r,s,h){var v=Math.sin(h),S=Math.cos(h),T=s[4],N=s[5],R=s[6],V=s[7],G=s[8],K=s[9],ae=s[10],de=s[11];return s!==r&&(r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15]),r[4]=T*S+G*v,r[5]=N*S+K*v,r[6]=R*S+ae*v,r[7]=V*S+de*v,r[8]=G*S-T*v,r[9]=K*S-N*v,r[10]=ae*S-R*v,r[11]=de*S-V*v,r},a.rotateZ=function(r,s,h){var v=Math.sin(h),S=Math.cos(h),T=s[0],N=s[1],R=s[2],V=s[3],G=s[4],K=s[5],ae=s[6],de=s[7];return s!==r&&(r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15]),r[0]=T*S+G*v,r[1]=N*S+K*v,r[2]=R*S+ae*v,r[3]=V*S+de*v,r[4]=G*S-T*v,r[5]=K*S-N*v,r[6]=ae*S-R*v,r[7]=de*S-V*v,r},a.scale=function(r,s,h){var v=h[0],S=h[1],T=h[2];return r[0]=s[0]*v,r[1]=s[1]*v,r[2]=s[2]*v,r[3]=s[3]*v,r[4]=s[4]*S,r[5]=s[5]*S,r[6]=s[6]*S,r[7]=s[7]*S,r[8]=s[8]*T,r[9]=s[9]*T,r[10]=s[10]*T,r[11]=s[11]*T,r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],r},a.setCacheLimits=function(r,s){Mn=r,Xn=s},a.setRTLTextPlugin=function(r,s,h){if(h===void 0&&(h=!1),ja===Zo||ja===ks||ja===Ws)throw new Error("setRTLTextPlugin cannot be called multiple times.");ya=lt.resolveURL(r),ja=Zo,Po=s,Uu(),h||Wd()},a.sphericalToCartesian=function(r){var s=r[0],h=r[1],v=r[2];return h+=90,h*=Math.PI/180,v*=Math.PI/180,{x:s*Math.cos(h)*Math.sin(v),y:s*Math.sin(h)*Math.sin(v),z:s*Math.cos(v)}},a.styleSpec=vt,a.symbolSize=tx,a.transformMat3=function(r,s,h){var v=s[0],S=s[1],T=s[2];return r[0]=v*h[0]+S*h[3]+T*h[6],r[1]=v*h[1]+S*h[4]+T*h[7],r[2]=v*h[2]+S*h[5]+T*h[8],r},a.transformMat4=bo,a.translate=function(r,s,h){var v,S,T,N,R,V,G,K,ae,de,le,fe,Me=h[0],Ie=h[1],Ue=h[2];return s===r?(r[12]=s[0]*Me+s[4]*Ie+s[8]*Ue+s[12],r[13]=s[1]*Me+s[5]*Ie+s[9]*Ue+s[13],r[14]=s[2]*Me+s[6]*Ie+s[10]*Ue+s[14],r[15]=s[3]*Me+s[7]*Ie+s[11]*Ue+s[15]):(v=s[0],S=s[1],T=s[2],N=s[3],R=s[4],V=s[5],G=s[6],K=s[7],ae=s[8],de=s[9],le=s[10],fe=s[11],r[0]=v,r[1]=S,r[2]=T,r[3]=N,r[4]=R,r[5]=V,r[6]=G,r[7]=K,r[8]=ae,r[9]=de,r[10]=le,r[11]=fe,r[12]=v*Me+R*Ie+ae*Ue+s[12],r[13]=S*Me+V*Ie+de*Ue+s[13],r[14]=T*Me+G*Ie+le*Ue+s[14],r[15]=N*Me+K*Ie+fe*Ue+s[15]),r},a.triggerPluginCompletionEvent=Xo,a.uniqueId=q,a.validateCustomStyleLayer=function(r){var s=[],h=r.id;return h===void 0&&s.push({message:"layers."+h+': missing required property "id"'}),r.render===void 0&&s.push({message:"layers."+h+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&s.push({message:"layers."+h+': property "renderingMode" must be either "2d" or "3d"'}),s},a.validateLight=fo,a.validateStyle=Fu,a.values=function(r){var s=[];for(var h in r)s.push(r[h]);return s},a.vectorTile=Yu,a.version="1.0.9",a.warnOnce=ye,a.webpSupported=Nt,a.window=self,a.wrap=L})),d(["./shared"],(function(a){function g(Z){var Y=typeof Z;if(Y==="number"||Y==="boolean"||Y==="string"||Z==null)return JSON.stringify(Z);if(Array.isArray(Z)){for(var ie="[",se=0,je=Z;se<je.length;se+=1)ie+=g(je[se])+",";return ie+"]"}for(var Ne=Object.keys(Z).sort(),Ye="{",He=0;He<Ne.length;He++)Ye+=JSON.stringify(Ne[He])+":"+g(Z[Ne[He]])+",";return Ye+"}"}function x(Z){for(var Y="",ie=0,se=a.refProperties;ie<se.length;ie+=1)Y+="/"+g(Z[se[ie]]);return Y}var _=function(Z){this.keyCache={},Z&&this.replace(Z)};_.prototype.replace=function(Z){this._layerConfigs={},this._layers={},this.update(Z,[])},_.prototype.update=function(Z,Y){for(var ie=this,se=0,je=Z;se<je.length;se+=1){var Ne=je[se];this._layerConfigs[Ne.id]=Ne;var Ye=this._layers[Ne.id]=a.createStyleLayer(Ne);Ye._featureFilter=a.featureFilter(Ye.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(var He=0,Be=Y;He<Be.length;He+=1){var nt=Be[He];delete this.keyCache[nt],delete this._layerConfigs[nt],delete this._layers[nt]}this.familiesBySource={};for(var xt=0,Ot=(function(Dn,qn){for(var kn={},zn=0;zn<Dn.length;zn++){var Lr=qn&&qn[Dn[zn].id]||x(Dn[zn]);qn&&(qn[Dn[zn].id]=Lr);var Bn=kn[Lr];Bn||(Bn=kn[Lr]=[]),Bn.push(Dn[zn])}var nr=[];for(var pr in kn)nr.push(kn[pr]);return nr})(a.values(this._layerConfigs),this.keyCache);xt<Ot.length;xt+=1){var yt=Ot[xt].map((function(Dn){return ie._layers[Dn.id]})),It=yt[0];if(It.visibility!=="none"){var Lt=It.source||"",en=this.familiesBySource[Lt];en||(en=this.familiesBySource[Lt]={});var dn=It.sourceLayer||"_geojsonTileLayer",qt=en[dn];qt||(qt=en[dn]=[]),qt.push(yt)}}};var C=function(Z){var Y={},ie=[];for(var se in Z){var je=Z[se],Ne=Y[se]={};for(var Ye in je){var He=je[+Ye];if(He&&He.bitmap.width!==0&&He.bitmap.height!==0){var Be={x:0,y:0,w:He.bitmap.width+2,h:He.bitmap.height+2};ie.push(Be),Ne[Ye]={rect:Be,metrics:He.metrics}}}}var nt=a.potpack(ie),xt=nt.w,Ot=nt.h,yt=new a.AlphaImage({width:xt||1,height:Ot||1});for(var It in Z){var Lt=Z[It];for(var en in Lt){var dn=Lt[+en];if(dn&&dn.bitmap.width!==0&&dn.bitmap.height!==0){var qt=Y[It][en].rect;a.AlphaImage.copy(dn.bitmap,yt,{x:0,y:0},{x:qt.x+1,y:qt.y+1},dn.bitmap)}}}this.image=yt,this.positions=Y};a.register("GlyphAtlas",C);var E=function(Z){this.tileID=new a.OverscaledTileID(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId};function A(Z,Y,ie){for(var se=new a.EvaluationParameters(Y),je=0,Ne=Z;je<Ne.length;je+=1)Ne[je].recalculate(se,ie)}function D(Z,Y){var ie=a.getArrayBuffer(Z.request,(function(se,je,Ne,Ye){se?Y(se):je&&Y(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(je)),rawData:je,cacheControl:Ne,expires:Ye})}));return function(){ie.cancel(),Y()}}E.prototype.parse=function(Z,Y,ie,se,je){var Ne=this;this.status="parsing",this.data=Z,this.collisionBoxArray=new a.CollisionBoxArray;var Ye=new a.DictionaryCoder(Object.keys(Z.layers).sort()),He=new a.FeatureIndex(this.tileID,this.promoteId);He.bucketLayerIDs=[];var Be,nt,xt,Ot,yt={},It={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ie},Lt=Y.familiesBySource[this.source];for(var en in Lt){var dn=Z.layers[en];if(dn){dn.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+en+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var qt=Ye.encode(en),Dn=[],qn=0;qn<dn.length;qn++){var kn=dn.feature(qn),zn=He.getId(kn,en);Dn.push({feature:kn,id:zn,index:qn,sourceLayerIndex:qt})}for(var Lr=0,Bn=Lt[en];Lr<Bn.length;Lr+=1){var nr=Bn[Lr],pr=nr[0];pr.minzoom&&this.zoom<Math.floor(pr.minzoom)||pr.maxzoom&&this.zoom>=pr.maxzoom||pr.visibility!=="none"&&(A(nr,this.zoom,ie),(yt[pr.id]=pr.createBucket({index:He.bucketLayerIDs.length,layers:nr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qt,sourceID:this.source})).populate(Dn,It),He.bucketLayerIDs.push(nr.map((function(Jn){return Jn.id}))))}}}var Hn=a.mapObject(It.glyphDependencies,(function(Jn){return Object.keys(Jn).map(Number)}));Object.keys(Hn).length?se.send("getGlyphs",{uid:this.uid,stacks:Hn},(function(Jn,ii){Be||(Be=Jn,nt=ii,Kr.call(Ne))})):nt={};var Qi=Object.keys(It.iconDependencies);Qi.length?se.send("getImages",{icons:Qi,source:this.source,tileID:this.tileID,type:"icons"},(function(Jn,ii){Be||(Be=Jn,xt=ii,Kr.call(Ne))})):xt={};var lr=Object.keys(It.patternDependencies);function Kr(){if(Be)return je(Be);if(nt&&xt&&Ot){var Jn=new C(nt),ii=new a.ImageAtlas(xt,Ot);for(var aa in yt){var ki=yt[aa];ki instanceof a.SymbolBucket?(A(ki.layers,this.zoom,ie),a.performSymbolLayout(ki,nt,Jn.positions,xt,ii.iconPositions,this.showCollisionBoxes)):ki.hasPattern&&(ki instanceof a.LineBucket||ki instanceof a.FillBucket||ki instanceof a.FillExtrusionBucket)&&(A(ki.layers,this.zoom,ie),ki.addFeatures(It,ii.patternPositions))}this.status="done",je(null,{buckets:a.values(yt).filter((function(uo){return!uo.isEmpty()})),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jn.image,imageAtlas:ii,glyphMap:this.returnDependencies?nt:null,iconMap:this.returnDependencies?xt:null,glyphPositions:this.returnDependencies?Jn.positions:null})}}lr.length?se.send("getImages",{icons:lr,source:this.source,tileID:this.tileID,type:"patterns"},(function(Jn,ii){Be||(Be=Jn,Ot=ii,Kr.call(Ne))})):Ot={},Kr.call(this)};var I=function(Z,Y,ie,se){this.actor=Z,this.layerIndex=Y,this.availableImages=ie,this.loadVectorData=se||D,this.loading={},this.loaded={}};I.prototype.loadTile=function(Z,Y){var ie=this,se=Z.uid;this.loading||(this.loading={});var je=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new a.RequestPerformance(Z.request),Ne=this.loading[se]=new E(Z);Ne.abort=this.loadVectorData(Z,(function(Ye,He){if(delete ie.loading[se],Ye||!He)return Ne.status="done",ie.loaded[se]=Ne,Y(Ye);var Be=He.rawData,nt={};He.expires&&(nt.expires=He.expires),He.cacheControl&&(nt.cacheControl=He.cacheControl);var xt={};if(je){var Ot=je.finish();Ot&&(xt.resourceTiming=JSON.parse(JSON.stringify(Ot)))}Ne.vectorTile=He.vectorTile,Ne.parse(He.vectorTile,ie.layerIndex,ie.availableImages,ie.actor,(function(yt,It){if(yt||!It)return Y(yt);Y(null,a.extend({rawTileData:Be.slice(0)},It,nt,xt))})),ie.loaded=ie.loaded||{},ie.loaded[se]=Ne}))},I.prototype.reloadTile=function(Z,Y){var ie=this,se=this.loaded,je=Z.uid,Ne=this;if(se&&se[je]){var Ye=se[je];Ye.showCollisionBoxes=Z.showCollisionBoxes;var He=function(Be,nt){var xt=Ye.reloadCallback;xt&&(delete Ye.reloadCallback,Ye.parse(Ye.vectorTile,Ne.layerIndex,ie.availableImages,Ne.actor,xt)),Y(Be,nt)};Ye.status==="parsing"?Ye.reloadCallback=He:Ye.status==="done"&&(Ye.vectorTile?Ye.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,He):He())}},I.prototype.abortTile=function(Z,Y){var ie=this.loading,se=Z.uid;ie&&ie[se]&&ie[se].abort&&(ie[se].abort(),delete ie[se]),Y()},I.prototype.removeTile=function(Z,Y){var ie=this.loaded,se=Z.uid;ie&&ie[se]&&delete ie[se],Y()};var L=a.window.ImageBitmap,B=function(){this.loaded={}};B.prototype.loadTile=function(Z,Y){var ie=Z.uid,se=Z.encoding,je=Z.rawImageData,Ne=L&&je instanceof L?this.getImageData(je):je,Ye=new a.DEMData(ie,Ne,se);this.loaded=this.loaded||{},this.loaded[ie]=Ye,Y(null,Ye)},B.prototype.getImageData=function(Z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Z.width,Z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Z.width,this.offscreenCanvas.height=Z.height,this.offscreenCanvasContext.drawImage(Z,0,0,Z.width,Z.height);var Y=this.offscreenCanvasContext.getImageData(-1,-1,Z.width+2,Z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Y.width,height:Y.height},Y.data)},B.prototype.removeTile=function(Z){var Y=this.loaded,ie=Z.uid;Y&&Y[ie]&&delete Y[ie]};var z=6378137;function q(Z){var Y=0;if(Z&&Z.length>0){Y+=Math.abs(H(Z[0]));for(var ie=1;ie<Z.length;ie++)Y-=Math.abs(H(Z[ie]))}return Y}function H(Z){var Y,ie,se,je,Ne,Ye,He=0,Be=Z.length;if(Be>2){for(Ye=0;Ye<Be;Ye++)Ye===Be-2?(se=Be-2,je=Be-1,Ne=0):Ye===Be-1?(se=Be-1,je=0,Ne=1):(se=Ye,je=Ye+1,Ne=Ye+2),Y=Z[se],ie=Z[je],He+=(W(Z[Ne][0])-W(Y[0]))*Math.sin(W(ie[1]));He=He*z*z/2}return He}function W(Z){return Z*Math.PI/180}var ne={geometry:function Z(Y){var ie,se=0;switch(Y.type){case"Polygon":return q(Y.coordinates);case"MultiPolygon":for(ie=0;ie<Y.coordinates.length;ie++)se+=q(Y.coordinates[ie]);return se;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(ie=0;ie<Y.geometries.length;ie++)se+=Z(Y.geometries[ie]);return se}},ring:H},re=function Z(Y,ie){switch(Y&&Y.type||null){case"FeatureCollection":return Y.features=Y.features.map(ee(Z,ie)),Y;case"GeometryCollection":return Y.geometries=Y.geometries.map(ee(Z,ie)),Y;case"Feature":return Y.geometry=Z(Y.geometry,ie),Y;case"Polygon":case"MultiPolygon":return(function(se,je){return se.type==="Polygon"?se.coordinates=oe(se.coordinates,je):se.type==="MultiPolygon"&&(se.coordinates=se.coordinates.map(ee(oe,je))),se})(Y,ie);default:return Y}};function ee(Z,Y){return function(ie){return Z(ie,Y)}}function oe(Z,Y){Y=!!Y,Z[0]=he(Z[0],Y);for(var ie=1;ie<Z.length;ie++)Z[ie]=he(Z[ie],!Y);return Z}function he(Z,Y){return(function(ie){return ne.ring(ie)>=0})(Z)===Y?Z:Z.reverse()}var we=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,ye=function(Z){this._feature=Z,this.extent=a.EXTENT,this.type=Z.type,this.properties=Z.tags,"id"in Z&&!isNaN(Z.id)&&(this.id=parseInt(Z.id,10))};ye.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Z=[],Y=0,ie=this._feature.geometry;Y<ie.length;Y+=1){var se=ie[Y];Z.push([new a.Point$1(se[0],se[1])])}return Z}for(var je=[],Ne=0,Ye=this._feature.geometry;Ne<Ye.length;Ne+=1){for(var He=[],Be=0,nt=Ye[Ne];Be<nt.length;Be+=1){var xt=nt[Be];He.push(new a.Point$1(xt[0],xt[1]))}je.push(He)}return je},ye.prototype.toGeoJSON=function(Z,Y,ie){return we.call(this,Z,Y,ie)};var Pe=function(Z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Z.length,this._features=Z};Pe.prototype.feature=function(Z){return new ye(this._features[Z])};var Ke=a.vectorTile.VectorTileFeature,ze=Je;function Je(Z,Y){this.options=Y||{},this.features=Z,this.length=Z.length}function Ae(Z,Y){this.id=typeof Z.id=="number"?Z.id:void 0,this.type=Z.type,this.rawGeometry=Z.type===1?[Z.geometry]:Z.geometry,this.properties=Z.tags,this.extent=Y||4096}Je.prototype.feature=function(Z){return new Ae(this.features[Z],this.options.extent)},Ae.prototype.loadGeometry=function(){var Z=this.rawGeometry;this.geometry=[];for(var Y=0;Y<Z.length;Y++){for(var ie=Z[Y],se=[],je=0;je<ie.length;je++)se.push(new a.Point$1(ie[je][0],ie[je][1]));this.geometry.push(se)}return this.geometry},Ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Z=this.geometry,Y=1/0,ie=-1/0,se=1/0,je=-1/0,Ne=0;Ne<Z.length;Ne++)for(var Ye=Z[Ne],He=0;He<Ye.length;He++){var Be=Ye[He];Y=Math.min(Y,Be.x),ie=Math.max(ie,Be.x),se=Math.min(se,Be.y),je=Math.max(je,Be.y)}return[Y,se,ie,je]},Ae.prototype.toGeoJSON=Ke.prototype.toGeoJSON;var De=Ce,ke=Ce,st=function(Z,Y){Y=Y||{};var ie={};for(var se in Z)ie[se]=new ze(Z[se].features,Y),ie[se].name=se,ie[se].version=Y.version,ie[se].extent=Y.extent;return Ce({layers:ie})},me=ze;function Ce(Z){var Y=new a.pbf;return(function(ie,se){for(var je in ie.layers)se.writeMessage(3,pe,ie.layers[je])})(Z,Y),Y.finish()}function pe(Z,Y){var ie;Y.writeVarintField(15,Z.version||1),Y.writeStringField(1,Z.name||""),Y.writeVarintField(5,Z.extent||4096);var se={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<Z.length;ie++)se.feature=Z.feature(ie),Y.writeMessage(2,Q,se);var je=se.keys;for(ie=0;ie<je.length;ie++)Y.writeStringField(3,je[ie]);var Ne=se.values;for(ie=0;ie<Ne.length;ie++)Y.writeMessage(4,Nt,Ne[ie])}function Q(Z,Y){var ie=Z.feature;ie.id!==void 0&&Y.writeVarintField(1,ie.id),Y.writeMessage(2,Ee,Z),Y.writeVarintField(3,ie.type),Y.writeMessage(4,We,ie)}function Ee(Z,Y){var ie=Z.feature,se=Z.keys,je=Z.values,Ne=Z.keycache,Ye=Z.valuecache;for(var He in ie.properties){var Be=ie.properties[He],nt=Ne[He];if(Be!==null){nt===void 0&&(se.push(He),nt=se.length-1,Ne[He]=nt),Y.writeVarint(nt);var xt=typeof Be;xt!=="string"&&xt!=="boolean"&&xt!=="number"&&(Be=JSON.stringify(Be));var Ot=xt+":"+Be,yt=Ye[Ot];yt===void 0&&(je.push(Be),yt=je.length-1,Ye[Ot]=yt),Y.writeVarint(yt)}}}function Ge(Z,Y){return(Y<<3)+(7&Z)}function lt(Z){return Z<<1^Z>>31}function We(Z,Y){for(var ie=Z.loadGeometry(),se=Z.type,je=0,Ne=0,Ye=ie.length,He=0;He<Ye;He++){var Be=ie[He],nt=1;se===1&&(nt=Be.length),Y.writeVarint(Ge(1,nt));for(var xt=se===3?Be.length-1:Be.length,Ot=0;Ot<xt;Ot++){Ot===1&&se!==1&&Y.writeVarint(Ge(2,xt-1));var yt=Be[Ot].x-je,It=Be[Ot].y-Ne;Y.writeVarint(lt(yt)),Y.writeVarint(lt(It)),je+=yt,Ne+=It}se===3&&Y.writeVarint(Ge(7,1))}}function Nt(Z,Y){var ie=typeof Z;ie==="string"?Y.writeStringField(1,Z):ie==="boolean"?Y.writeBooleanField(7,Z):ie==="number"&&(Z%1!=0?Y.writeDoubleField(3,Z):Z<0?Y.writeSVarintField(6,Z):Y.writeVarintField(5,Z))}function At(Z,Y,ie,se,je,Ne){if(!(je-se<=ie)){var Ye=se+je>>1;(function He(Be,nt,xt,Ot,yt,It){for(;yt>Ot;){if(yt-Ot>600){var Lt=yt-Ot+1,en=xt-Ot+1,dn=Math.log(Lt),qt=.5*Math.exp(2*dn/3),Dn=.5*Math.sqrt(dn*qt*(Lt-qt)/Lt)*(en-Lt/2<0?-1:1),qn=Math.max(Ot,Math.floor(xt-en*qt/Lt+Dn)),kn=Math.min(yt,Math.floor(xt+(Lt-en)*qt/Lt+Dn));He(Be,nt,xt,qn,kn,It)}var zn=nt[2*xt+It],Lr=Ot,Bn=yt;for(Mt(Be,nt,Ot,xt),nt[2*yt+It]>zn&&Mt(Be,nt,Ot,yt);Lr<Bn;){for(Mt(Be,nt,Lr,Bn),Lr++,Bn--;nt[2*Lr+It]<zn;)Lr++;for(;nt[2*Bn+It]>zn;)Bn--}nt[2*Ot+It]===zn?Mt(Be,nt,Ot,Bn):(Bn++,Mt(Be,nt,Bn,yt)),Bn<=xt&&(Ot=Bn+1),xt<=Bn&&(yt=Bn-1)}})(Z,Y,Ye,se,je,Ne%2),At(Z,Y,ie,se,Ye-1,Ne+1),At(Z,Y,ie,Ye+1,je,Ne+1)}}function Mt(Z,Y,ie,se){Ut(Z,ie,se),Ut(Y,2*ie,2*se),Ut(Y,2*ie+1,2*se+1)}function Ut(Z,Y,ie){var se=Z[Y];Z[Y]=Z[ie],Z[ie]=se}function Pt(Z,Y,ie,se){var je=Z-ie,Ne=Y-se;return je*je+Ne*Ne}De.fromVectorTileJs=ke,De.fromGeojsonVt=st,De.GeoJSONWrapper=me;var Rt=function(Z){return Z[0]},vn=function(Z){return Z[1]},er=function(Z,Y,ie,se,je){Y===void 0&&(Y=Rt),ie===void 0&&(ie=vn),se===void 0&&(se=64),je===void 0&&(je=Float64Array),this.nodeSize=se,this.points=Z;for(var Ne=Z.length<65536?Uint16Array:Uint32Array,Ye=this.ids=new Ne(Z.length),He=this.coords=new je(2*Z.length),Be=0;Be<Z.length;Be++)Ye[Be]=Be,He[2*Be]=Y(Z[Be]),He[2*Be+1]=ie(Z[Be]);At(Ye,He,se,0,Ye.length-1,0)};er.prototype.range=function(Z,Y,ie,se){return(function(je,Ne,Ye,He,Be,nt,xt){for(var Ot,yt,It=[0,je.length-1,0],Lt=[];It.length;){var en=It.pop(),dn=It.pop(),qt=It.pop();if(dn-qt<=xt)for(var Dn=qt;Dn<=dn;Dn++)Ot=Ne[2*Dn],yt=Ne[2*Dn+1],Ot>=Ye&&Ot<=Be&&yt>=He&&yt<=nt&&Lt.push(je[Dn]);else{var qn=Math.floor((qt+dn)/2);Ot=Ne[2*qn],yt=Ne[2*qn+1],Ot>=Ye&&Ot<=Be&&yt>=He&&yt<=nt&&Lt.push(je[qn]);var kn=(en+1)%2;(en===0?Ye<=Ot:He<=yt)&&(It.push(qt),It.push(qn-1),It.push(kn)),(en===0?Be>=Ot:nt>=yt)&&(It.push(qn+1),It.push(dn),It.push(kn))}}return Lt})(this.ids,this.coords,Z,Y,ie,se,this.nodeSize)},er.prototype.within=function(Z,Y,ie){return(function(se,je,Ne,Ye,He,Be){for(var nt=[0,se.length-1,0],xt=[],Ot=He*He;nt.length;){var yt=nt.pop(),It=nt.pop(),Lt=nt.pop();if(It-Lt<=Be)for(var en=Lt;en<=It;en++)Pt(je[2*en],je[2*en+1],Ne,Ye)<=Ot&&xt.push(se[en]);else{var dn=Math.floor((Lt+It)/2),qt=je[2*dn],Dn=je[2*dn+1];Pt(qt,Dn,Ne,Ye)<=Ot&&xt.push(se[dn]);var qn=(yt+1)%2;(yt===0?Ne-He<=qt:Ye-He<=Dn)&&(nt.push(Lt),nt.push(dn-1),nt.push(qn)),(yt===0?Ne+He>=qt:Ye+He>=Dn)&&(nt.push(dn+1),nt.push(It),nt.push(qn))}}return xt})(this.ids,this.coords,Z,Y,ie,this.nodeSize)};var $n,ir={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Z){return Z}},dt=Math.fround||($n=new Float32Array(1),function(Z){return $n[0]=+Z,$n[0]}),Xe=function(Z){this.options=Qe(Object.create(ir),Z),this.trees=new Array(this.options.maxZoom+1)};function xe(Z,Y,ie,se,je){return{x:dt(Z),y:dt(Y),zoom:1/0,id:ie,parentId:-1,numPoints:se,properties:je}}function Re(Z,Y){var ie=Z.geometry.coordinates,se=ie[0],je=ie[1];return{x:dt(Oe(se)),y:dt(Le(je)),zoom:1/0,index:Y,parentId:-1}}function Ve(Z){return{type:"Feature",id:Z.id,properties:Vt(Z),geometry:{type:"Point",coordinates:[(se=Z.x,360*(se-.5)),(Y=Z.y,ie=(180-360*Y)*Math.PI/180,360*Math.atan(Math.exp(ie))/Math.PI-90)]}};var Y,ie,se}function Vt(Z){var Y=Z.numPoints,ie=Y>=1e4?Math.round(Y/1e3)+"k":Y>=1e3?Math.round(Y/100)/10+"k":Y;return Qe(Qe({},Z.properties),{cluster:!0,cluster_id:Z.id,point_count:Y,point_count_abbreviated:ie})}function Oe(Z){return Z/360+.5}function Le(Z){var Y=Math.sin(Z*Math.PI/180),ie=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ie<0?0:ie>1?1:ie}function Qe(Z,Y){for(var ie in Y)Z[ie]=Y[ie];return Z}function Tt(Z){return Z.x}function on(Z){return Z.y}function Mn(Z,Y,ie,se,je,Ne){var Ye=je-ie,He=Ne-se;if(Ye!==0||He!==0){var Be=((Z-ie)*Ye+(Y-se)*He)/(Ye*Ye+He*He);Be>1?(ie=je,se=Ne):Be>0&&(ie+=Ye*Be,se+=He*Be)}return(Ye=Z-ie)*Ye+(He=Y-se)*He}function Xn(Z,Y,ie,se){var je={id:Z===void 0?null:Z,type:Y,geometry:ie,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(Ne){var Ye=Ne.geometry,He=Ne.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")wr(Ne,Ye);else if(He==="Polygon"||He==="MultiLineString")for(var Be=0;Be<Ye.length;Be++)wr(Ne,Ye[Be]);else if(He==="MultiPolygon")for(Be=0;Be<Ye.length;Be++)for(var nt=0;nt<Ye[Be].length;nt++)wr(Ne,Ye[Be][nt])})(je),je}function wr(Z,Y){for(var ie=0;ie<Y.length;ie+=3)Z.minX=Math.min(Z.minX,Y[ie]),Z.minY=Math.min(Z.minY,Y[ie+1]),Z.maxX=Math.max(Z.maxX,Y[ie]),Z.maxY=Math.max(Z.maxY,Y[ie+1])}function Bi(Z,Y,ie,se){if(Y.geometry){var je=Y.geometry.coordinates,Ne=Y.geometry.type,Ye=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),He=[],Be=Y.id;if(ie.promoteId?Be=Y.properties[ie.promoteId]:ie.generateId&&(Be=se||0),Ne==="Point")Jr(je,He);else if(Ne==="MultiPoint")for(var nt=0;nt<je.length;nt++)Jr(je[nt],He);else if(Ne==="LineString")Xr(je,He,Ye,!1);else if(Ne==="MultiLineString"){if(ie.lineMetrics){for(nt=0;nt<je.length;nt++)He=[],Xr(je[nt],He,Ye,!1),Z.push(Xn(Be,"LineString",He,Y.properties));return}Ci(je,He,Ye,!1)}else if(Ne==="Polygon")Ci(je,He,Ye,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(nt=0;nt<Y.geometry.geometries.length;nt++)Bi(Z,{id:Be,geometry:Y.geometry.geometries[nt],properties:Y.properties},ie,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(nt=0;nt<je.length;nt++){var xt=[];Ci(je[nt],xt,Ye,!0),He.push(xt)}}Z.push(Xn(Be,Ne,He,Y.properties))}}function Jr(Z,Y){Y.push(Sr(Z[0])),Y.push(ka(Z[1])),Y.push(0)}function Xr(Z,Y,ie,se){for(var je,Ne,Ye=0,He=0;He<Z.length;He++){var Be=Sr(Z[He][0]),nt=ka(Z[He][1]);Y.push(Be),Y.push(nt),Y.push(0),He>0&&(Ye+=se?(je*nt-Be*Ne)/2:Math.sqrt(Math.pow(Be-je,2)+Math.pow(nt-Ne,2))),je=Be,Ne=nt}var xt=Y.length-3;Y[2]=1,(function Ot(yt,It,Lt,en){for(var dn,qt=en,Dn=Lt-It>>1,qn=Lt-It,kn=yt[It],zn=yt[It+1],Lr=yt[Lt],Bn=yt[Lt+1],nr=It+3;nr<Lt;nr+=3){var pr=Mn(yt[nr],yt[nr+1],kn,zn,Lr,Bn);if(pr>qt)dn=nr,qt=pr;else if(pr===qt){var Hn=Math.abs(nr-Dn);Hn<qn&&(dn=nr,qn=Hn)}}qt>en&&(dn-It>3&&Ot(yt,It,dn,en),yt[dn+2]=qt,Lt-dn>3&&Ot(yt,dn,Lt,en))})(Y,0,xt,ie),Y[xt+2]=1,Y.size=Math.abs(Ye),Y.start=0,Y.end=Y.size}function Ci(Z,Y,ie,se){for(var je=0;je<Z.length;je++){var Ne=[];Xr(Z[je],Ne,ie,se),Y.push(Ne)}}function Sr(Z){return Z/360+.5}function ka(Z){var Y=Math.sin(Z*Math.PI/180),ie=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ie<0?0:ie>1?1:ie}function qr(Z,Y,ie,se,je,Ne,Ye,He){if(se/=Y,Ne>=(ie/=Y)&&Ye<se)return Z;if(Ye<ie||Ne>=se)return null;for(var Be=[],nt=0;nt<Z.length;nt++){var xt=Z[nt],Ot=xt.geometry,yt=xt.type,It=je===0?xt.minX:xt.minY,Lt=je===0?xt.maxX:xt.maxY;if(It>=ie&&Lt<se)Be.push(xt);else if(!(Lt<ie||It>=se)){var en=[];if(yt==="Point"||yt==="MultiPoint")Ks(Ot,en,ie,se,je);else if(yt==="LineString")So(Ot,en,ie,se,je,!1,He.lineMetrics);else if(yt==="MultiLineString")qa(Ot,en,ie,se,je,!1);else if(yt==="Polygon")qa(Ot,en,ie,se,je,!0);else if(yt==="MultiPolygon")for(var dn=0;dn<Ot.length;dn++){var qt=[];qa(Ot[dn],qt,ie,se,je,!0),qt.length&&en.push(qt)}if(en.length){if(He.lineMetrics&&yt==="LineString"){for(dn=0;dn<en.length;dn++)Be.push(Xn(xt.id,yt,en[dn],xt.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(en.length===1?(yt="LineString",en=en[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=en.length===3?"Point":"MultiPoint"),Be.push(Xn(xt.id,yt,en,xt.tags))}}}return Be.length?Be:null}function Ks(Z,Y,ie,se,je){for(var Ne=0;Ne<Z.length;Ne+=3){var Ye=Z[Ne+je];Ye>=ie&&Ye<=se&&(Y.push(Z[Ne]),Y.push(Z[Ne+1]),Y.push(Z[Ne+2]))}}function So(Z,Y,ie,se,je,Ne,Ye){for(var He,Be,nt=Eo(Z),xt=je===0?Co:Ra,Ot=Z.start,yt=0;yt<Z.length-3;yt+=3){var It=Z[yt],Lt=Z[yt+1],en=Z[yt+2],dn=Z[yt+3],qt=Z[yt+4],Dn=je===0?It:Lt,qn=je===0?dn:qt,kn=!1;Ye&&(He=Math.sqrt(Math.pow(It-dn,2)+Math.pow(Lt-qt,2))),Dn<ie?qn>ie&&(Be=xt(nt,It,Lt,dn,qt,ie),Ye&&(nt.start=Ot+He*Be)):Dn>se?qn<se&&(Be=xt(nt,It,Lt,dn,qt,se),Ye&&(nt.start=Ot+He*Be)):da(nt,It,Lt,en),qn<ie&&Dn>=ie&&(Be=xt(nt,It,Lt,dn,qt,ie),kn=!0),qn>se&&Dn<=se&&(Be=xt(nt,It,Lt,dn,qt,se),kn=!0),!Ne&&kn&&(Ye&&(nt.end=Ot+He*Be),Y.push(nt),nt=Eo(Z)),Ye&&(Ot+=He)}var zn=Z.length-3;It=Z[zn],Lt=Z[zn+1],en=Z[zn+2],(Dn=je===0?It:Lt)>=ie&&Dn<=se&&da(nt,It,Lt,en),zn=nt.length-3,Ne&&zn>=3&&(nt[zn]!==nt[0]||nt[zn+1]!==nt[1])&&da(nt,nt[0],nt[1],nt[2]),nt.length&&Y.push(nt)}function Eo(Z){var Y=[];return Y.size=Z.size,Y.start=Z.start,Y.end=Z.end,Y}function qa(Z,Y,ie,se,je,Ne){for(var Ye=0;Ye<Z.length;Ye++)So(Z[Ye],Y,ie,se,je,Ne,!1)}function da(Z,Y,ie,se){Z.push(Y),Z.push(ie),Z.push(se)}function Co(Z,Y,ie,se,je,Ne){var Ye=(Ne-Y)/(se-Y);return Z.push(Ne),Z.push(ie+(je-ie)*Ye),Z.push(1),Ye}function Ra(Z,Y,ie,se,je,Ne){var Ye=(Ne-ie)/(je-ie);return Z.push(Y+(se-Y)*Ye),Z.push(Ne),Z.push(1),Ye}function ws(Z,Y){for(var ie=[],se=0;se<Z.length;se++){var je,Ne=Z[se],Ye=Ne.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")je=$o(Ne.geometry,Y);else if(Ye==="MultiLineString"||Ye==="Polygon"){je=[];for(var He=0;He<Ne.geometry.length;He++)je.push($o(Ne.geometry[He],Y))}else if(Ye==="MultiPolygon")for(je=[],He=0;He<Ne.geometry.length;He++){for(var Be=[],nt=0;nt<Ne.geometry[He].length;nt++)Be.push($o(Ne.geometry[He][nt],Y));je.push(Be)}ie.push(Xn(Ne.id,Ye,je,Ne.tags))}return ie}function $o(Z,Y){var ie=[];ie.size=Z.size,Z.start!==void 0&&(ie.start=Z.start,ie.end=Z.end);for(var se=0;se<Z.length;se+=3)ie.push(Z[se]+Y,Z[se+1],Z[se+2]);return ie}function is(Z,Y){if(Z.transformed)return Z;var ie,se,je,Ne=1<<Z.z,Ye=Z.x,He=Z.y;for(ie=0;ie<Z.features.length;ie++){var Be=Z.features[ie],nt=Be.geometry,xt=Be.type;if(Be.geometry=[],xt===1)for(se=0;se<nt.length;se+=2)Be.geometry.push(fr(nt[se],nt[se+1],Y,Ne,Ye,He));else for(se=0;se<nt.length;se++){var Ot=[];for(je=0;je<nt[se].length;je+=2)Ot.push(fr(nt[se][je],nt[se][je+1],Y,Ne,Ye,He));Be.geometry.push(Ot)}}return Z.transformed=!0,Z}function fr(Z,Y,ie,se,je,Ne){return[Math.round(ie*(Z*se-je)),Math.round(ie*(Y*se-Ne))]}function Ti(Z,Y,ie,se,je){for(var Ne=Y===je.maxZoom?0:je.tolerance/((1<<Y)*je.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:se,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},He=0;He<Z.length;He++){Ye.numFeatures++,Fr(Ye,Z[He],Ne,je);var Be=Z[He].minX,nt=Z[He].minY,xt=Z[He].maxX,Ot=Z[He].maxY;Be<Ye.minX&&(Ye.minX=Be),nt<Ye.minY&&(Ye.minY=nt),xt>Ye.maxX&&(Ye.maxX=xt),Ot>Ye.maxY&&(Ye.maxY=Ot)}return Ye}function Fr(Z,Y,ie,se){var je=Y.geometry,Ne=Y.type,Ye=[];if(Ne==="Point"||Ne==="MultiPoint")for(var He=0;He<je.length;He+=3)Ye.push(je[He]),Ye.push(je[He+1]),Z.numPoints++,Z.numSimplified++;else if(Ne==="LineString")vt(Ye,je,Z,ie,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(He=0;He<je.length;He++)vt(Ye,je[He],Z,ie,Ne==="Polygon",He===0);else if(Ne==="MultiPolygon")for(var Be=0;Be<je.length;Be++){var nt=je[Be];for(He=0;He<nt.length;He++)vt(Ye,nt[He],Z,ie,!0,He===0)}if(Ye.length){var xt=Y.tags||null;if(Ne==="LineString"&&se.lineMetrics){for(var Ot in xt={},Y.tags)xt[Ot]=Y.tags[Ot];xt.mapbox_clip_start=je.start/je.size,xt.mapbox_clip_end=je.end/je.size}var yt={geometry:Ye,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:xt};Y.id!==null&&(yt.id=Y.id),Z.features.push(yt)}}function vt(Z,Y,ie,se,je,Ne){var Ye=se*se;if(se>0&&Y.size<(je?Ye:se))ie.numPoints+=Y.length/3;else{for(var He=[],Be=0;Be<Y.length;Be+=3)(se===0||Y[Be+2]>Ye)&&(ie.numSimplified++,He.push(Y[Be]),He.push(Y[Be+1])),ie.numPoints++;je&&(function(nt,xt){for(var Ot=0,yt=0,It=nt.length,Lt=It-2;yt<It;Lt=yt,yt+=2)Ot+=(nt[yt]-nt[Lt])*(nt[yt+1]+nt[Lt+1]);if(Ot>0===xt)for(yt=0,It=nt.length;yt<It/2;yt+=2){var en=nt[yt],dn=nt[yt+1];nt[yt]=nt[It-2-yt],nt[yt+1]=nt[It-1-yt],nt[It-2-yt]=en,nt[It-1-yt]=dn}})(He,Ne),Z.push(He)}}function Yt(Z,Y){var ie=(Y=this.options=(function(je,Ne){for(var Ye in Ne)je[Ye]=Ne[Ye];return je})(Object.create(this.options),Y)).debug;if(ie&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var se=(function(je,Ne){var Ye=[];if(je.type==="FeatureCollection")for(var He=0;He<je.features.length;He++)Bi(Ye,je.features[He],Ne,He);else je.type==="Feature"?Bi(Ye,je,Ne):Bi(Ye,{geometry:je},Ne);return Ye})(Z,Y);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(se=(function(je,Ne){var Ye=Ne.buffer/Ne.extent,He=je,Be=qr(je,1,-1-Ye,Ye,0,-1,2,Ne),nt=qr(je,1,1-Ye,2+Ye,0,-1,2,Ne);return(Be||nt)&&(He=qr(je,1,-Ye,1+Ye,0,-1,2,Ne)||[],Be&&(He=ws(Be,1).concat(He)),nt&&(He=He.concat(ws(nt,-1)))),He})(se,Y)).length&&this.splitTile(se,0,0,0),ie&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ja(Z,Y,ie){return 32*((1<<Z)*ie+Y)+Z}function eo(Z,Y){var ie=Z.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);var se=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);if(!se)return Y(null,null);var je=new Pe(se.features),Ne=De(je);Ne.byteOffset===0&&Ne.byteLength===Ne.buffer.byteLength||(Ne=new Uint8Array(Ne)),Y(null,{vectorTile:je,rawData:Ne.buffer})}Xe.prototype.load=function(Z){var Y=this.options,ie=Y.log,se=Y.minZoom,je=Y.maxZoom,Ne=Y.nodeSize;ie&&console.time("total time");var Ye="prepare "+Z.length+" points";ie&&console.time(Ye),this.points=Z;for(var He=[],Be=0;Be<Z.length;Be++)Z[Be].geometry&&He.push(Re(Z[Be],Be));this.trees[je+1]=new er(He,Tt,on,Ne,Float32Array),ie&&console.timeEnd(Ye);for(var nt=je;nt>=se;nt--){var xt=+Date.now();He=this._cluster(He,nt),this.trees[nt]=new er(He,Tt,on,Ne,Float32Array),ie&&console.log("z%d: %d clusters in %dms",nt,He.length,+Date.now()-xt)}return ie&&console.timeEnd("total time"),this},Xe.prototype.getClusters=function(Z,Y){var ie=((Z[0]+180)%360+360)%360-180,se=Math.max(-90,Math.min(90,Z[1])),je=Z[2]===180?180:((Z[2]+180)%360+360)%360-180,Ne=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)ie=-180,je=180;else if(ie>je){var Ye=this.getClusters([ie,se,180,Ne],Y),He=this.getClusters([-180,se,je,Ne],Y);return Ye.concat(He)}for(var Be=this.trees[this._limitZoom(Y)],nt=[],xt=0,Ot=Be.range(Oe(ie),Le(Ne),Oe(je),Le(se));xt<Ot.length;xt+=1){var yt=Ot[xt],It=Be.points[yt];nt.push(It.numPoints?Ve(It):this.points[It.index])}return nt},Xe.prototype.getChildren=function(Z){var Y=this._getOriginId(Z),ie=this._getOriginZoom(Z),se="No cluster with the specified id.",je=this.trees[ie];if(!je)throw new Error(se);var Ne=je.points[Y];if(!Ne)throw new Error(se);for(var Ye=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),He=[],Be=0,nt=je.within(Ne.x,Ne.y,Ye);Be<nt.length;Be+=1){var xt=nt[Be],Ot=je.points[xt];Ot.parentId===Z&&He.push(Ot.numPoints?Ve(Ot):this.points[Ot.index])}if(He.length===0)throw new Error(se);return He},Xe.prototype.getLeaves=function(Z,Y,ie){Y=Y||10,ie=ie||0;var se=[];return this._appendLeaves(se,Z,Y,ie,0),se},Xe.prototype.getTile=function(Z,Y,ie){var se=this.trees[this._limitZoom(Z)],je=Math.pow(2,Z),Ne=this.options,Ye=Ne.extent,He=Ne.radius/Ye,Be=(ie-He)/je,nt=(ie+1+He)/je,xt={features:[]};return this._addTileFeatures(se.range((Y-He)/je,Be,(Y+1+He)/je,nt),se.points,Y,ie,je,xt),Y===0&&this._addTileFeatures(se.range(1-He/je,Be,1,nt),se.points,je,ie,je,xt),Y===je-1&&this._addTileFeatures(se.range(0,Be,He/je,nt),se.points,-1,ie,je,xt),xt.features.length?xt:null},Xe.prototype.getClusterExpansionZoom=function(Z){for(var Y=this._getOriginZoom(Z)-1;Y<=this.options.maxZoom;){var ie=this.getChildren(Z);if(Y++,ie.length!==1)break;Z=ie[0].properties.cluster_id}return Y},Xe.prototype._appendLeaves=function(Z,Y,ie,se,je){for(var Ne=0,Ye=this.getChildren(Y);Ne<Ye.length;Ne+=1){var He=Ye[Ne],Be=He.properties;if(Be&&Be.cluster?je+Be.point_count<=se?je+=Be.point_count:je=this._appendLeaves(Z,Be.cluster_id,ie,se,je):je<se?je++:Z.push(He),Z.length===ie)break}return je},Xe.prototype._addTileFeatures=function(Z,Y,ie,se,je,Ne){for(var Ye=0,He=Z;Ye<He.length;Ye+=1){var Be=Y[He[Ye]],nt=Be.numPoints,xt=void 0,Ot=void 0,yt=void 0;if(nt)xt=Vt(Be),Ot=Be.x,yt=Be.y;else{var It=this.points[Be.index];xt=It.properties,Ot=Oe(It.geometry.coordinates[0]),yt=Le(It.geometry.coordinates[1])}var Lt={type:1,geometry:[[Math.round(this.options.extent*(Ot*je-ie)),Math.round(this.options.extent*(yt*je-se))]],tags:xt},en=void 0;nt?en=Be.id:this.options.generateId?en=Be.index:this.points[Be.index].id&&(en=this.points[Be.index].id),en!==void 0&&(Lt.id=en),Ne.features.push(Lt)}},Xe.prototype._limitZoom=function(Z){return Math.max(this.options.minZoom,Math.min(+Z,this.options.maxZoom+1))},Xe.prototype._cluster=function(Z,Y){for(var ie=[],se=this.options,je=se.radius,Ne=se.extent,Ye=se.reduce,He=se.minPoints,Be=je/(Ne*Math.pow(2,Y)),nt=0;nt<Z.length;nt++){var xt=Z[nt];if(!(xt.zoom<=Y)){xt.zoom=Y;for(var Ot=this.trees[Y+1],yt=Ot.within(xt.x,xt.y,Be),It=xt.numPoints||1,Lt=It,en=0,dn=yt;en<dn.length;en+=1){var qt=dn[en],Dn=Ot.points[qt];Dn.zoom>Y&&(Lt+=Dn.numPoints||1)}if(Lt>=He){for(var qn=xt.x*It,kn=xt.y*It,zn=Ye&&It>1?this._map(xt,!0):null,Lr=(nt<<5)+(Y+1)+this.points.length,Bn=0,nr=yt;Bn<nr.length;Bn+=1){var pr=nr[Bn],Hn=Ot.points[pr];if(!(Hn.zoom<=Y)){Hn.zoom=Y;var Qi=Hn.numPoints||1;qn+=Hn.x*Qi,kn+=Hn.y*Qi,Hn.parentId=Lr,Ye&&(zn||(zn=this._map(xt,!0)),Ye(zn,this._map(Hn)))}}xt.parentId=Lr,ie.push(xe(qn/Lt,kn/Lt,Lr,Lt,zn))}else if(ie.push(xt),Lt>1)for(var lr=0,Kr=yt;lr<Kr.length;lr+=1){var Jn=Kr[lr],ii=Ot.points[Jn];ii.zoom<=Y||(ii.zoom=Y,ie.push(ii))}}}return ie},Xe.prototype._getOriginId=function(Z){return Z-this.points.length>>5},Xe.prototype._getOriginZoom=function(Z){return(Z-this.points.length)%32},Xe.prototype._map=function(Z,Y){if(Z.numPoints)return Y?Qe({},Z.properties):Z.properties;var ie=this.points[Z.index].properties,se=this.options.map(ie);return Y&&se===ie?Qe({},se):se},Yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Yt.prototype.splitTile=function(Z,Y,ie,se,je,Ne,Ye){for(var He=[Z,Y,ie,se],Be=this.options,nt=Be.debug;He.length;){se=He.pop(),ie=He.pop(),Y=He.pop(),Z=He.pop();var xt=1<<Y,Ot=Ja(Y,ie,se),yt=this.tiles[Ot];if(!yt&&(nt>1&&console.time("creation"),yt=this.tiles[Ot]=Ti(Z,Y,ie,se,Be),this.tileCoords.push({z:Y,x:ie,y:se}),nt)){nt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,ie,se,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var It="z"+Y;this.stats[It]=(this.stats[It]||0)+1,this.total++}if(yt.source=Z,je){if(Y===Be.maxZoom||Y===je)continue;var Lt=1<<je-Y;if(ie!==Math.floor(Ne/Lt)||se!==Math.floor(Ye/Lt))continue}else if(Y===Be.indexMaxZoom||yt.numPoints<=Be.indexMaxPoints)continue;if(yt.source=null,Z.length!==0){nt>1&&console.time("clipping");var en,dn,qt,Dn,qn,kn,zn=.5*Be.buffer/Be.extent,Lr=.5-zn,Bn=.5+zn,nr=1+zn;en=dn=qt=Dn=null,qn=qr(Z,xt,ie-zn,ie+Bn,0,yt.minX,yt.maxX,Be),kn=qr(Z,xt,ie+Lr,ie+nr,0,yt.minX,yt.maxX,Be),Z=null,qn&&(en=qr(qn,xt,se-zn,se+Bn,1,yt.minY,yt.maxY,Be),dn=qr(qn,xt,se+Lr,se+nr,1,yt.minY,yt.maxY,Be),qn=null),kn&&(qt=qr(kn,xt,se-zn,se+Bn,1,yt.minY,yt.maxY,Be),Dn=qr(kn,xt,se+Lr,se+nr,1,yt.minY,yt.maxY,Be),kn=null),nt>1&&console.timeEnd("clipping"),He.push(en||[],Y+1,2*ie,2*se),He.push(dn||[],Y+1,2*ie,2*se+1),He.push(qt||[],Y+1,2*ie+1,2*se),He.push(Dn||[],Y+1,2*ie+1,2*se+1)}}},Yt.prototype.getTile=function(Z,Y,ie){var se=this.options,je=se.extent,Ne=se.debug;if(Z<0||Z>24)return null;var Ye=1<<Z,He=Ja(Z,Y=(Y%Ye+Ye)%Ye,ie);if(this.tiles[He])return is(this.tiles[He],je);Ne>1&&console.log("drilling down to z%d-%d-%d",Z,Y,ie);for(var Be,nt=Z,xt=Y,Ot=ie;!Be&&nt>0;)nt--,xt=Math.floor(xt/2),Ot=Math.floor(Ot/2),Be=this.tiles[Ja(nt,xt,Ot)];return Be&&Be.source?(Ne>1&&console.log("found parent tile z%d-%d-%d",nt,xt,Ot),Ne>1&&console.time("drilling down"),this.splitTile(Be.source,nt,xt,Ot,Z,Y,ie),Ne>1&&console.timeEnd("drilling down"),this.tiles[He]?is(this.tiles[He],je):null):null};var gi=(function(Z){function Y(ie,se,je,Ne){Z.call(this,ie,se,je,eo),Ne&&(this.loadGeoJSON=Ne)}return Z&&(Y.__proto__=Z),Y.prototype=Object.create(Z&&Z.prototype),Y.prototype.constructor=Y,Y.prototype.loadData=function(ie,se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=se,this._pendingLoadDataParams=ie,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Y.prototype._loadData=function(){var ie=this;if(this._pendingCallback&&this._pendingLoadDataParams){var se=this._pendingCallback,je=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ne=!!(je&&je.request&&je.request.collectResourceTiming)&&new a.RequestPerformance(je.request);this.loadGeoJSON(je,(function(Ye,He){if(Ye||!He)return se(Ye);if(typeof He!="object")return se(new Error("Input data given to '"+je.source+"' is not a valid GeoJSON object."));re(He,!0);try{ie._geoJSONIndex=je.cluster?new Xe((function(xt){var Ot=xt.superclusterOptions,yt=xt.clusterProperties;if(!yt||!Ot)return Ot;for(var It={},Lt={},en={accumulated:null,zoom:0},dn={properties:null},qt=Object.keys(yt),Dn=0,qn=qt;Dn<qn.length;Dn+=1){var kn=qn[Dn],zn=yt[kn],Lr=zn[0],Bn=zn[1],nr=a.createExpression(Bn),pr=a.createExpression(typeof Lr=="string"?[Lr,["accumulated"],["get",kn]]:Lr);It[kn]=nr.value,Lt[kn]=pr.value}return Ot.map=function(Hn){dn.properties=Hn;for(var Qi={},lr=0,Kr=qt;lr<Kr.length;lr+=1){var Jn=Kr[lr];Qi[Jn]=It[Jn].evaluate(en,dn)}return Qi},Ot.reduce=function(Hn,Qi){dn.properties=Qi;for(var lr=0,Kr=qt;lr<Kr.length;lr+=1){var Jn=Kr[lr];en.accumulated=Hn[Jn],Hn[Jn]=Lt[Jn].evaluate(en,dn)}},Ot})(je)).load(He.features):(function(xt,Ot){return new Yt(xt,Ot)})(He,je.geojsonVtOptions)}catch(xt){return se(xt)}ie.loaded={};var Be={};if(Ne){var nt=Ne.finish();nt&&(Be.resourceTiming={},Be.resourceTiming[je.source]=JSON.parse(JSON.stringify(nt)))}se(null,Be)}))}},Y.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Y.prototype.reloadTile=function(ie,se){var je=this.loaded,Ne=ie.uid;return je&&je[Ne]?Z.prototype.reloadTile.call(this,ie,se):this.loadTile(ie,se)},Y.prototype.loadGeoJSON=function(ie,se){if(ie.request)a.getJSON(ie.request,se);else{if(typeof ie.data!="string")return se(new Error("Input data given to '"+ie.source+"' is not a valid GeoJSON object."));try{return se(null,JSON.parse(ie.data))}catch{return se(new Error("Input data given to '"+ie.source+"' is not a valid GeoJSON object."))}}},Y.prototype.removeSource=function(ie,se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),se()},Y.prototype.getClusterExpansionZoom=function(ie,se){se(null,this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId))},Y.prototype.getClusterChildren=function(ie,se){se(null,this._geoJSONIndex.getChildren(ie.clusterId))},Y.prototype.getClusterLeaves=function(ie,se){se(null,this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset))},Y})(I),Hr=function(Z){var Y=this;this.self=Z,this.actor=new a.Actor(Z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:gi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ie,se){if(Y.workerSourceTypes[ie])throw new Error('Worker source with name "'+ie+'" already registered.');Y.workerSourceTypes[ie]=se},this.self.registerRTLTextPlugin=function(ie){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ie.applyArabicShaping,a.plugin.processBidirectionalText=ie.processBidirectionalText,a.plugin.processStyledBidirectionalText=ie.processStyledBidirectionalText}};return Hr.prototype.setReferrer=function(Z,Y){this.referrer=Y},Hr.prototype.setImages=function(Z,Y,ie){this.availableImages[Z]=Y,ie()},Hr.prototype.setLayers=function(Z,Y,ie){this.getLayerIndex(Z).replace(Y),ie()},Hr.prototype.updateLayers=function(Z,Y,ie){this.getLayerIndex(Z).update(Y.layers,Y.removedIds),ie()},Hr.prototype.loadTile=function(Z,Y,ie){this.getWorkerSource(Z,Y.type,Y.source).loadTile(Y,ie)},Hr.prototype.loadDEMTile=function(Z,Y,ie){this.getDEMWorkerSource(Z,Y.source).loadTile(Y,ie)},Hr.prototype.reloadTile=function(Z,Y,ie){this.getWorkerSource(Z,Y.type,Y.source).reloadTile(Y,ie)},Hr.prototype.abortTile=function(Z,Y,ie){this.getWorkerSource(Z,Y.type,Y.source).abortTile(Y,ie)},Hr.prototype.removeTile=function(Z,Y,ie){this.getWorkerSource(Z,Y.type,Y.source).removeTile(Y,ie)},Hr.prototype.removeDEMTile=function(Z,Y){this.getDEMWorkerSource(Z,Y.source).removeTile(Y)},Hr.prototype.removeSource=function(Z,Y,ie){if(this.workerSources[Z]&&this.workerSources[Z][Y.type]&&this.workerSources[Z][Y.type][Y.source]){var se=this.workerSources[Z][Y.type][Y.source];delete this.workerSources[Z][Y.type][Y.source],se.removeSource!==void 0?se.removeSource(Y,ie):ie()}},Hr.prototype.loadWorkerSource=function(Z,Y,ie){try{this.self.importScripts(Y.url),ie()}catch(se){ie(se.toString())}},Hr.prototype.syncRTLPluginState=function(Z,Y,ie){try{a.plugin.setState(Y);var se=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&se!=null){this.self.importScripts(se);var je=a.plugin.isParsed();ie(je?void 0:new Error("RTL Text Plugin failed to import scripts from "+se),je)}}catch(Ne){ie(Ne.toString())}},Hr.prototype.getAvailableImages=function(Z){var Y=this.availableImages[Z];return Y||(Y=[]),Y},Hr.prototype.getLayerIndex=function(Z){var Y=this.layerIndexes[Z];return Y||(Y=this.layerIndexes[Z]=new _),Y},Hr.prototype.getWorkerSource=function(Z,Y,ie){var se=this;if(this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][Y]||(this.workerSources[Z][Y]={}),!this.workerSources[Z][Y][ie]){var je={send:function(Ne,Ye,He){se.actor.send(Ne,Ye,He,Z)}};this.workerSources[Z][Y][ie]=new this.workerSourceTypes[Y](je,this.getLayerIndex(Z),this.getAvailableImages(Z))}return this.workerSources[Z][Y][ie]},Hr.prototype.getDEMWorkerSource=function(Z,Y){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][Y]||(this.demWorkerSources[Z][Y]=new B),this.demWorkerSources[Z][Y]},Hr.prototype.enforceCacheSizeLimit=function(Z,Y){a.enforceCacheSizeLimit(Y)},typeof WorkerGlobalScope<"u"&&a.window!==void 0&&a.window instanceof WorkerGlobalScope&&(a.window.worker=new Hr(a.window)),Hr})),d(["./shared"],(function(a){var g=a.createCommonjsModule((function(f){function y(j){return!m(j)}function m(j){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var P,F,U=new Blob([""],{type:"text/javascript"}),$=URL.createObjectURL(U);try{F=new Worker($),P=!0}catch{P=!1}return F&&F.terminate(),URL.revokeObjectURL($),P})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var P=document.createElement("canvas");P.width=P.height=1;var F=P.getContext("2d");if(!F)return!1;var U=F.getImageData(0,0,1,1);return U&&U.width===P.width})()?(function(P){return b[P]===void 0&&(b[P]=(function(F){var U=(function(J){var te=document.createElement("canvas"),ue=Object.create(y.webGLContextAttributes);return ue.failIfMajorPerformanceCaveat=J,te.probablySupportsContext?te.probablySupportsContext("webgl",ue)||te.probablySupportsContext("experimental-webgl",ue):te.supportsContext?te.supportsContext("webgl",ue)||te.supportsContext("experimental-webgl",ue):te.getContext("webgl",ue)||te.getContext("experimental-webgl",ue)})(F);if(!U)return!1;var $=U.createShader(U.VERTEX_SHADER);return!$||U.isContextLost()?!1:(U.shaderSource($,"void main() {}"),U.compileShader($),U.getShaderParameter($,U.COMPILE_STATUS)===!0)})(P)),b[P]})(j&&j.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support"}f.exports?f.exports=y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=y,window.mapboxgl.notSupportedReason=m);var b={};y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),x={create:function(f,y,m){var b=a.window.document.createElement(f);return y!==void 0&&(b.className=y),m&&m.appendChild(b),b},createNS:function(f,y){return a.window.document.createElementNS(f,y)}},_=a.window.document.documentElement.style;function C(f){if(!_)return f[0];for(var y=0;y<f.length;y++)if(f[y]in _)return f[y];return f[0]}var E,A=C(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){_&&A&&(E=_[A],_[A]="none")},x.enableDrag=function(){_&&A&&(_[A]=E)};var D=C(["transform","WebkitTransform"]);x.setTransform=function(f,y){f.style[D]=y};var I=!1;try{var L=Object.defineProperty({},"passive",{get:function(){I=!0}});a.window.addEventListener("test",L,L),a.window.removeEventListener("test",L,L)}catch{I=!1}x.addEventListener=function(f,y,m,b){b===void 0&&(b={}),"passive"in b&&I?f.addEventListener(y,m,b):f.addEventListener(y,m,b.capture)},x.removeEventListener=function(f,y,m,b){b===void 0&&(b={}),"passive"in b&&I?f.removeEventListener(y,m,b):f.removeEventListener(y,m,b.capture)};var B=function(f){f.preventDefault(),f.stopPropagation(),a.window.removeEventListener("click",B,!0)};function z(f){var y=f.userImage;return y&&y.render&&y.render()?(f.data.replace(new Uint8Array(y.data.buffer)),!0):!1}x.suppressClick=function(){a.window.addEventListener("click",B,!0),a.window.setTimeout((function(){a.window.removeEventListener("click",B,!0)}),0)},x.mousePos=function(f,y){var m=f.getBoundingClientRect(),b=a.window.TouchEvent&&y instanceof a.window.TouchEvent?y.touches[0]:y;return new a.Point(b.clientX-m.left-f.clientLeft,b.clientY-m.top-f.clientTop)},x.touchPos=function(f,y){for(var m=f.getBoundingClientRect(),b=[],j=y.type==="touchend"?y.changedTouches:y.touches,P=0;P<j.length;P++)b.push(new a.Point(j[P].clientX-m.left-f.clientLeft,j[P].clientY-m.top-f.clientTop));return b},x.mouseButton=function(f){return a.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button},x.remove=function(f){f.parentNode&&f.parentNode.removeChild(f)};var q=(function(f){function y(){f.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.isLoaded=function(){return this.loaded},y.prototype.setLoaded=function(m){if(this.loaded!==m&&(this.loaded=m,m)){for(var b=0,j=this.requestors;b<j.length;b+=1){var P=j[b],F=P.ids,U=P.callback;this._notify(F,U)}this.requestors=[]}},y.prototype.getImage=function(m){return this.images[m]},y.prototype.addImage=function(m,b){this._validate(m,b)&&(this.images[m]=b)},y.prototype._validate=function(m,b){var j=!0;return this._validateStretch(b.stretchX,b.data&&b.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+m+'" has invalid "stretchX" value'))),j=!1),this._validateStretch(b.stretchY,b.data&&b.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+m+'" has invalid "stretchY" value'))),j=!1),this._validateContent(b.content,b)||(this.fire(new a.ErrorEvent(new Error('Image "'+m+'" has invalid "content" value'))),j=!1),j},y.prototype._validateStretch=function(m,b){if(!m)return!0;for(var j=0,P=0,F=m;P<F.length;P+=1){var U=F[P];if(U[0]<j||U[1]<U[0]||b<U[1])return!1;j=U[1]}return!0},y.prototype._validateContent=function(m,b){return!m||m.length===4&&!(m[0]<0||b.data.width<m[0])&&!(m[1]<0||b.data.height<m[1])&&!(m[2]<0||b.data.width<m[2])&&!(m[3]<0||b.data.height<m[3])&&!(m[2]<m[0])&&!(m[3]<m[1])},y.prototype.updateImage=function(m,b){var j=this.images[m];b.version=j.version+1,this.images[m]=b,this.updatedImages[m]=!0},y.prototype.removeImage=function(m){var b=this.images[m];delete this.images[m],delete this.patterns[m],b.userImage&&b.userImage.onRemove&&b.userImage.onRemove()},y.prototype.listImages=function(){return Object.keys(this.images)},y.prototype.getImages=function(m,b){var j=!0;if(!this.isLoaded())for(var P=0,F=m;P<F.length;P+=1){var U=F[P];this.images[U]||(j=!1)}this.isLoaded()||j?this._notify(m,b):this.requestors.push({ids:m,callback:b})},y.prototype._notify=function(m,b){for(var j={},P=0,F=m;P<F.length;P+=1){var U=F[P];this.images[U]||this.fire(new a.Event("styleimagemissing",{id:U}));var $=this.images[U];$?j[U]={data:$.data.clone(),pixelRatio:$.pixelRatio,sdf:$.sdf,version:$.version,stretchX:$.stretchX,stretchY:$.stretchY,content:$.content,hasRenderCallback:!!($.userImage&&$.userImage.render)}:a.warnOnce('Image "'+U+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}b(null,j)},y.prototype.getPixelSize=function(){var m=this.atlasImage;return{width:m.width,height:m.height}},y.prototype.getPattern=function(m){var b=this.patterns[m],j=this.getImage(m);if(!j)return null;if(b&&b.position.version===j.version)return b.position;if(b)b.position.version=j.version;else{var P={w:j.data.width+2,h:j.data.height+2,x:0,y:0},F=new a.ImagePosition(P,j);this.patterns[m]={bin:P,position:F}}return this._updatePatternAtlas(),this.patterns[m].position},y.prototype.bind=function(m){var b=m.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(m,this.atlasImage,b.RGBA),this.atlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE)},y.prototype._updatePatternAtlas=function(){var m=[];for(var b in this.patterns)m.push(this.patterns[b].bin);var j=a.potpack(m),P=j.w,F=j.h,U=this.atlasImage;for(var $ in U.resize({width:P||1,height:F||1}),this.patterns){var J=this.patterns[$].bin,te=J.x+1,ue=J.y+1,Te=this.images[$].data,be=Te.width,_e=Te.height;a.RGBAImage.copy(Te,U,{x:0,y:0},{x:te,y:ue},{width:be,height:_e}),a.RGBAImage.copy(Te,U,{x:0,y:_e-1},{x:te,y:ue-1},{width:be,height:1}),a.RGBAImage.copy(Te,U,{x:0,y:0},{x:te,y:ue+_e},{width:be,height:1}),a.RGBAImage.copy(Te,U,{x:be-1,y:0},{x:te-1,y:ue},{width:1,height:_e}),a.RGBAImage.copy(Te,U,{x:0,y:0},{x:te+be,y:ue},{width:1,height:_e})}this.dirty=!0},y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},y.prototype.dispatchRenderCallbacks=function(m){for(var b=0,j=m;b<j.length;b+=1){var P=j[b];if(!this.callbackDispatchedThisFrame[P]){this.callbackDispatchedThisFrame[P]=!0;var F=this.images[P];z(F)&&this.updateImage(P,F)}}},y})(a.Evented),H=re,W=re,ne=1e20;function re(f,y,m,b,j,P){this.fontSize=f||24,this.buffer=y===void 0?3:y,this.cutoff=b||.25,this.fontFamily=j||"sans-serif",this.fontWeight=P||"normal",this.radius=m||8;var F=this.size=this.fontSize+2*this.buffer,U=F+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=F,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(U*U),this.gridInner=new Float64Array(U*U),this.f=new Float64Array(U),this.z=new Float64Array(U+1),this.v=new Uint16Array(U),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(F/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ee(f,y,m,b,j,P){for(var F=0;F<y;F++)oe(f,F,y,m,b,j,P);for(var U=0;U<m;U++)oe(f,U*y,1,y,b,j,P)}function oe(f,y,m,b,j,P,F){var U,$,J,te;for(P[0]=0,F[0]=-ne,F[1]=ne,U=0;U<b;U++)j[U]=f[y+U*m];for(U=1,$=0,J=0;U<b;U++){do te=P[$],J=(j[U]-j[te]+U*U-te*te)/(U-te)/2;while(J<=F[$]&&--$>-1);P[++$]=U,F[$]=J,F[$+1]=ne}for(U=0,$=0;U<b;U++){for(;F[$+1]<U;)$++;te=P[$],f[y+U*m]=j[te]+(U-te)*(U-te)}}re.prototype._draw=function(f,y){var m,b,j,P,F,U,$,J,te,ue=this.ctx.measureText(f),Te=ue.width,be=2*this.buffer;y&&this.useMetrics?(F=Math.floor(ue.actualBoundingBoxAscent),J=this.buffer+Math.ceil(ue.actualBoundingBoxAscent),U=this.buffer,$=this.buffer,m=(b=Math.min(this.size,Math.ceil(ue.actualBoundingBoxRight-ue.actualBoundingBoxLeft)))+be,j=(P=Math.min(this.size-U,Math.ceil(ue.actualBoundingBoxAscent+ue.actualBoundingBoxDescent)))+be,this.ctx.textBaseline="alphabetic"):(m=b=this.size,j=P=this.size,F=19*this.fontSize/24,U=$=0,J=this.middle,this.ctx.textBaseline="middle"),b&&P&&(this.ctx.clearRect($,U,b,P),this.ctx.fillText(f,this.buffer,J),te=this.ctx.getImageData($,U,b,P));var _e=new Uint8ClampedArray(m*j);return(function(ve,$e,Fe,rt,et,it,ft){it.fill(ne,0,$e*Fe),ft.fill(0,0,$e*Fe);for(var _t=($e-rt)/2,kt=0;kt<et;kt++)for(var an=0;an<rt;an++){var Wt=(kt+_t)*$e+an+_t,un=ve.data[4*(kt*rt+an)+3]/255;if(un===1)it[Wt]=0,ft[Wt]=ne;else if(un===0)it[Wt]=ne,ft[Wt]=0;else{var Zt=Math.max(0,.5-un),xn=Math.max(0,un-.5);it[Wt]=Zt*Zt,ft[Wt]=xn*xn}}})(te,m,j,b,P,this.gridOuter,this.gridInner),ee(this.gridOuter,m,j,this.f,this.v,this.z),ee(this.gridInner,m,j,this.f,this.v,this.z),(function(ve,$e,Fe,rt,et,it,ft){for(var _t=0;_t<$e*Fe;_t++){var kt=Math.sqrt(rt[_t])-Math.sqrt(et[_t]);ve[_t]=Math.round(255-255*(kt/it+ft))}})(_e,m,j,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:_e,metrics:{width:b,height:P,sdfWidth:m,sdfHeight:j,top:F,left:0,advance:Te}}},re.prototype.draw=function(f){return this._draw(f,!1).data},re.prototype.drawWithMetrics=function(f){return this._draw(f,!0)},H.default=W;var he=function(f,y){this.requestManager=f,this.localIdeographFontFamily=y,this.entries={}};he.prototype.setURL=function(f){this.url=f},he.prototype.getGlyphs=function(f,y){var m=this,b=[];for(var j in f)for(var P=0,F=f[j];P<F.length;P+=1){var U=F[P];b.push({stack:j,id:U})}a.asyncAll(b,(function($,J){var te=$.stack,ue=$.id,Te=m.entries[te];Te||(Te=m.entries[te]={glyphs:{},requests:{}});var be=Te.glyphs[ue];if(be===void 0){if(be=m._tinySDF(Te,te,ue))return Te.glyphs[ue]=be,void J(null,{stack:te,id:ue,glyph:be});var _e=Math.floor(ue/256);if(256*_e>65535)J(new Error("glyphs > 65535 not supported"));else{var ve=Te.requests[_e];ve||(ve=Te.requests[_e]=[],he.loadGlyphRange(te,_e,m.url,m.requestManager,(function($e,Fe){if(Fe)for(var rt in Fe)m._doesCharSupportLocalGlyph(+rt)||(Te.glyphs[+rt]=Fe[+rt]);for(var et=0,it=ve;et<it.length;et+=1)(0,it[et])($e,Fe);delete Te.requests[_e]}))),ve.push((function($e,Fe){$e?J($e):Fe&&J(null,{stack:te,id:ue,glyph:Fe[ue]||null})}))}}else J(null,{stack:te,id:ue,glyph:be})}),(function($,J){if($)y($);else if(J){for(var te={},ue=0,Te=J;ue<Te.length;ue+=1){var be=Te[ue],_e=be.stack,ve=be.id,$e=be.glyph;(te[_e]||(te[_e]={}))[ve]=$e&&{id:$e.id,bitmap:$e.bitmap.clone(),metrics:$e.metrics}}y(null,te)}}))},he.prototype._doesCharSupportLocalGlyph=function(f){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](f)||a.isChar["Hangul Syllables"](f)||a.isChar.Hiragana(f)||a.isChar.Katakana(f))},he.prototype._tinySDF=function(f,y,m){var b=this.localIdeographFontFamily;if(b&&this._doesCharSupportLocalGlyph(m)){var j=f.tinySDF;if(!j){var P="400";/bold/i.test(y)?P="900":/medium/i.test(y)?P="500":/light/i.test(y)&&(P="200"),j=f.tinySDF=new he.TinySDF(24,3,8,.25,b,P)}return{id:m,bitmap:new a.AlphaImage({width:30,height:30},j.draw(String.fromCharCode(m))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},he.loadGlyphRange=function(f,y,m,b,j){var P=256*y,F=P+255,U=b.transformRequest(b.normalizeGlyphsURL(m).replace("{fontstack}",f).replace("{range}",P+"-"+F),a.ResourceType.Glyphs);a.getArrayBuffer(U,(function($,J){if($)j($);else if(J){for(var te={},ue=0,Te=a.parseGlyphPBF(J);ue<Te.length;ue+=1){var be=Te[ue];te[be.id]=be}j(null,te)}}))},he.TinySDF=H;var we=function(){this.specification=a.styleSpec.light.position};we.prototype.possiblyEvaluate=function(f,y){return a.sphericalToCartesian(f.expression.evaluate(y))},we.prototype.interpolate=function(f,y,m){return{x:a.number(f.x,y.x,m),y:a.number(f.y,y.y,m),z:a.number(f.z,y.z,m)}};var ye=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new we,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Pe=(function(f){function y(m){f.call(this),this._transitionable=new a.Transitionable(ye),this.setLight(m),this._transitioning=this._transitionable.untransitioned()}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getLight=function(){return this._transitionable.serialize()},y.prototype.setLight=function(m,b){if(b===void 0&&(b={}),!this._validate(a.validateLight,m,b))for(var j in m){var P=m[j];a.endsWith(j,"-transition")?this._transitionable.setTransition(j.slice(0,-11),P):this._transitionable.setValue(j,P)}},y.prototype.updateTransitions=function(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)},y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},y.prototype.recalculate=function(m){this.properties=this._transitioning.possiblyEvaluate(m)},y.prototype._validate=function(m,b,j){return(!j||j.validate!==!1)&&a.emitValidationErrors(this,m.call(a.validateStyle,a.extend({value:b,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},y})(a.Evented),Ke=function(f,y){this.width=f,this.height=y,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};Ke.prototype.getDash=function(f,y){var m=f.join(",")+String(y);return this.positions[m]||(this.positions[m]=this.addDash(f,y)),this.positions[m]},Ke.prototype.addDash=function(f,y){var m=y?7:0,b=2*m+1;if(this.nextRow+b>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var j=0,P=0;P<f.length;P++)j+=f[P];for(var F=this.width/j,U=F/2,$=f.length%2==1,J=-m;J<=m;J++)for(var te=this.nextRow+m+J,ue=this.width*te,Te=$?-f[f.length-1]:0,be=f[0],_e=1,ve=0;ve<this.width;ve++){for(;be<ve/F;)Te=be,be+=f[_e],$&&_e===f.length-1&&(be+=f[0]),_e++;var $e=Math.abs(ve-Te*F),Fe=Math.abs(ve-be*F),rt=Math.min($e,Fe),et=_e%2==1,it=void 0;if(y){var ft=m?J/m*(U+1):0;if(et){var _t=U-Math.abs(ft);it=Math.sqrt(rt*rt+_t*_t)}else it=U-Math.sqrt(rt*rt+ft*ft)}else it=(et?1:-1)*rt;this.data[3+4*(ue+ve)]=Math.max(0,Math.min(255,it+128))}var kt={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:j};return this.nextRow+=b,this.dirty=!0,kt},Ke.prototype.bind=function(f){var y=f.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.RGBA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,this.width,this.height,0,y.RGBA,y.UNSIGNED_BYTE,this.data))};var ze=function f(y,m){this.workerPool=y,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var b=this.workerPool.acquire(this.id),j=0;j<b.length;j++){var P=b[j],F=new f.Actor(P,m,this.id);F.name="Worker "+j,this.actors.push(F)}};function Je(f,y,m){var b=function(j,P){if(j)return m(j);if(P){var F=a.pick(a.extend(P,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(F.vectorLayers=P.vector_layers,F.vectorLayerIds=F.vectorLayers.map((function(U){return U.id}))),f.url&&(F.tiles=y.canonicalizeTileset(F,f.url)),m(null,F)}};return f.url?a.getJSON(y.transformRequest(y.normalizeSourceURL(f.url),a.ResourceType.Source),b):a.browser.frame((function(){return b(null,f)}))}ze.prototype.broadcast=function(f,y,m){m=m||function(){},a.asyncAll(this.actors,(function(b,j){b.send(f,y,j)}),m)},ze.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ze.prototype.remove=function(){this.actors.forEach((function(f){f.remove()})),this.actors=[],this.workerPool.release(this.id)},ze.Actor=a.Actor;var Ae=function(f,y,m){this.bounds=a.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=y||0,this.maxzoom=m||24};Ae.prototype.validateBounds=function(f){return Array.isArray(f)&&f.length===4?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]},Ae.prototype.contains=function(f){var y=Math.pow(2,f.z),m=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*y),b=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*y),j=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*y),P=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*y);return f.x>=m&&f.x<j&&f.y>=b&&f.y<P};var De=(function(f){function y(m,b,j,P){if(f.call(this),this.id=m,this.dispatcher=j,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(b,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},b),this._collectResourceTiming=b.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.load=function(){var m=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Je(this._options,this.map._requestManager,(function(b,j){m._tileJSONRequest=null,m._loaded=!0,b?m.fire(new a.ErrorEvent(b)):j&&(a.extend(m,j),j.bounds&&(m.tileBounds=new Ae(j.bounds,m.minzoom,m.maxzoom)),a.postTurnstileEvent(j.tiles,m.map._requestManager._customAccessToken),a.postMapLoadEvent(j.tiles,m.map._getMapId(),m.map._requestManager._skuToken,m.map._requestManager._customAccessToken),m.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),m.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))}))},y.prototype.loaded=function(){return this._loaded},y.prototype.hasTile=function(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)},y.prototype.onAdd=function(m){this.map=m,this.load()},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return a.extend({},this._options)},y.prototype.loadTile=function(m,b){var j=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),this.url,null),P={request:this.map._requestManager.transformRequest(j,a.ResourceType.Tile),uid:m.uid,tileID:m.tileID,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function F(U,$){return delete m.request,m.aborted?b(null):U&&U.status!==404?b(U):($&&$.resourceTiming&&(m.resourceTiming=$.resourceTiming),this.map._refreshExpiredTiles&&$&&m.setExpiryData($),m.loadVectorData($,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),b(null),void(m.reloadCallback&&(this.loadTile(m,m.reloadCallback),m.reloadCallback=null)))}P.request.collectResourceTiming=this._collectResourceTiming,m.actor&&m.state!=="expired"?m.state==="loading"?m.reloadCallback=b:m.request=m.actor.send("reloadTile",P,F.bind(this)):(m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",P,F.bind(this)))},y.prototype.abortTile=function(m){m.request&&(m.request.cancel(),delete m.request),m.actor&&m.actor.send("abortTile",{uid:m.uid,type:this.type,source:this.id},void 0)},y.prototype.unloadTile=function(m){m.unloadVectorData(),m.actor&&m.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id},void 0)},y.prototype.hasTransition=function(){return!1},y})(a.Evented),ke=(function(f){function y(m,b,j,P){f.call(this),this.id=m,this.dispatcher=j,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},b),a.extend(this,a.pick(b,["url","scheme","tileSize"]))}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.load=function(){var m=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Je(this._options,this.map._requestManager,(function(b,j){m._tileJSONRequest=null,m._loaded=!0,b?m.fire(new a.ErrorEvent(b)):j&&(a.extend(m,j),j.bounds&&(m.tileBounds=new Ae(j.bounds,m.minzoom,m.maxzoom)),a.postTurnstileEvent(j.tiles),a.postMapLoadEvent(j.tiles,m.map._getMapId(),m.map._requestManager._skuToken),m.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),m.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))}))},y.prototype.loaded=function(){return this._loaded},y.prototype.onAdd=function(m){this.map=m,this.load()},y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},y.prototype.serialize=function(){return a.extend({},this._options)},y.prototype.hasTile=function(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)},y.prototype.loadTile=function(m,b){var j=this,P=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);m.request=a.getImage(this.map._requestManager.transformRequest(P,a.ResourceType.Tile),(function(F,U){if(delete m.request,m.aborted)m.state="unloaded",b(null);else if(F)m.state="errored",b(F);else if(U){j.map._refreshExpiredTiles&&m.setExpiryData(U),delete U.cacheControl,delete U.expires;var $=j.map.painter.context,J=$.gl;m.texture=j.map.painter.getTileTexture(U.width),m.texture?m.texture.update(U,{useMipmap:!0}):(m.texture=new a.Texture($,U,J.RGBA,{useMipmap:!0}),m.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),$.extTextureFilterAnisotropic&&J.texParameterf(J.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax)),m.state="loaded",a.cacheEntryPossiblyAdded(j.dispatcher),b(null)}}))},y.prototype.abortTile=function(m,b){m.request&&(m.request.cancel(),delete m.request),b()},y.prototype.unloadTile=function(m,b){m.texture&&this.map.painter.saveTileTexture(m.texture),b()},y.prototype.hasTransition=function(){return!1},y})(a.Evented),st=(function(f){function y(m,b,j,P){f.call(this,m,b,j,P),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},b),this.encoding=b.encoding||"mapbox"}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},y.prototype.loadTile=function(m,b){var j=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);function P(F,U){F&&(m.state="errored",b(F)),U&&(m.dem=U,m.needsHillshadePrepare=!0,m.state="loaded",b(null))}m.request=a.getImage(this.map._requestManager.transformRequest(j,a.ResourceType.Tile),(function(F,U){if(delete m.request,m.aborted)m.state="unloaded",b(null);else if(F)m.state="errored",b(F);else if(U){this.map._refreshExpiredTiles&&m.setExpiryData(U),delete U.cacheControl,delete U.expires;var $=a.window.ImageBitmap&&U instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?U:a.browser.getImageData(U,1),J={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:$,encoding:this.encoding};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",J,P.bind(this)))}}).bind(this)),m.neighboringTiles=this._getNeighboringTiles(m.tileID)},y.prototype._getNeighboringTiles=function(m){var b=m.canonical,j=Math.pow(2,b.z),P=(b.x-1+j)%j,F=b.x===0?m.wrap-1:m.wrap,U=(b.x+1+j)%j,$=b.x+1===j?m.wrap+1:m.wrap,J={};return J[new a.OverscaledTileID(m.overscaledZ,F,b.z,P,b.y).key]={backfilled:!1},J[new a.OverscaledTileID(m.overscaledZ,$,b.z,U,b.y).key]={backfilled:!1},b.y>0&&(J[new a.OverscaledTileID(m.overscaledZ,F,b.z,P,b.y-1).key]={backfilled:!1},J[new a.OverscaledTileID(m.overscaledZ,m.wrap,b.z,b.x,b.y-1).key]={backfilled:!1},J[new a.OverscaledTileID(m.overscaledZ,$,b.z,U,b.y-1).key]={backfilled:!1}),b.y+1<j&&(J[new a.OverscaledTileID(m.overscaledZ,F,b.z,P,b.y+1).key]={backfilled:!1},J[new a.OverscaledTileID(m.overscaledZ,m.wrap,b.z,b.x,b.y+1).key]={backfilled:!1},J[new a.OverscaledTileID(m.overscaledZ,$,b.z,U,b.y+1).key]={backfilled:!1}),J},y.prototype.unloadTile=function(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded",m.actor&&m.actor.send("removeDEMTile",{uid:m.uid,source:this.id})},y})(ke),me=(function(f){function y(m,b,j,P){f.call(this),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=j.getActor(),this.setEventedParent(P),this._data=b.data,this._options=a.extend({},b),this._collectResourceTiming=b.collectResourceTiming,this._resourceTiming=[],b.maxzoom!==void 0&&(this.maxzoom=b.maxzoom),b.type&&(this.type=b.type),b.attribution&&(this.attribution=b.attribution),this.promoteId=b.promoteId;var F=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:b.cluster||!1,geojsonVtOptions:{buffer:(b.buffer!==void 0?b.buffer:128)*F,tolerance:(b.tolerance!==void 0?b.tolerance:.375)*F,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:b.lineMetrics||!1,generateId:b.generateId||!1},superclusterOptions:{maxZoom:b.clusterMaxZoom!==void 0?Math.min(b.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(b.clusterRadius||50)*F,log:!1,generateId:b.generateId||!1},clusterProperties:b.clusterProperties},b.workerOptions)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.load=function(){var m=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(b){if(b)m.fire(new a.ErrorEvent(b));else{var j={dataType:"source",sourceDataType:"metadata"};m._collectResourceTiming&&m._resourceTiming&&m._resourceTiming.length>0&&(j.resourceTiming=m._resourceTiming,m._resourceTiming=[]),m.fire(new a.Event("data",j))}}))},y.prototype.onAdd=function(m){this.map=m,this.load()},y.prototype.setData=function(m){var b=this;return this._data=m,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(j){if(j)b.fire(new a.ErrorEvent(j));else{var P={dataType:"source",sourceDataType:"content"};b._collectResourceTiming&&b._resourceTiming&&b._resourceTiming.length>0&&(P.resourceTiming=b._resourceTiming,b._resourceTiming=[]),b.fire(new a.Event("data",P))}})),this},y.prototype.getClusterExpansionZoom=function(m,b){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},b),this},y.prototype.getClusterChildren=function(m,b){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},b),this},y.prototype.getClusterLeaves=function(m,b,j,P){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:b,offset:j},P),this},y.prototype._updateWorkerData=function(m){var b=this;this._loaded=!1;var j=a.extend({},this.workerOptions),P=this._data;typeof P=="string"?(j.request=this.map._requestManager.transformRequest(a.browser.resolveURL(P),a.ResourceType.Source),j.request.collectResourceTiming=this._collectResourceTiming):j.data=JSON.stringify(P),this.actor.send(this.type+".loadData",j,(function(F,U){b._removed||U&&U.abandoned||(b._loaded=!0,U&&U.resourceTiming&&U.resourceTiming[b.id]&&(b._resourceTiming=U.resourceTiming[b.id].slice(0)),b.actor.send(b.type+".coalesce",{source:j.source},null),m(F))}))},y.prototype.loaded=function(){return this._loaded},y.prototype.loadTile=function(m,b){var j=this,P=m.actor?"reloadTile":"loadTile";m.actor=this.actor;var F={type:this.type,uid:m.uid,tileID:m.tileID,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};m.request=this.actor.send(P,F,(function(U,$){return delete m.request,m.unloadVectorData(),m.aborted?b(null):U?b(U):(m.loadVectorData($,j.map.painter,P==="reloadTile"),b(null))}))},y.prototype.abortTile=function(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0},y.prototype.unloadTile=function(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})},y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},y.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},y.prototype.hasTransition=function(){return!1},y})(a.Evented),Ce=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),pe=(function(f){function y(m,b,j,P){f.call(this),this.id=m,this.dispatcher=j,this.coordinates=b.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=b}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.load=function(m,b){var j=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(function(P,F){j._loaded=!0,P?j.fire(new a.ErrorEvent(P)):F&&(j.image=F,m&&(j.coordinates=m),b&&b(),j._finishLoading())}))},y.prototype.loaded=function(){return this._loaded},y.prototype.updateImage=function(m){var b=this;return this.image&&m.url?(this.options.url=m.url,this.load(m.coordinates,(function(){b.texture=null})),this):this},y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},y.prototype.onAdd=function(m){this.map=m,this.load()},y.prototype.setCoordinates=function(m){var b=this;this.coordinates=m;var j=m.map(a.MercatorCoordinate.fromLngLat);this.tileID=(function(F){for(var U=1/0,$=1/0,J=-1/0,te=-1/0,ue=0,Te=F;ue<Te.length;ue+=1){var be=Te[ue];U=Math.min(U,be.x),$=Math.min($,be.y),J=Math.max(J,be.x),te=Math.max(te,be.y)}var _e=J-U,ve=te-$,$e=Math.max(_e,ve),Fe=Math.max(0,Math.floor(-Math.log($e)/Math.LN2)),rt=Math.pow(2,Fe);return new a.CanonicalTileID(Fe,Math.floor((U+J)/2*rt),Math.floor(($+te)/2*rt))})(j),this.minzoom=this.maxzoom=this.tileID.z;var P=j.map((function(F){return b.tileID.getTilePoint(F)._round()}));return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(P[0].x,P[0].y,0,0),this._boundsArray.emplaceBack(P[1].x,P[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(P[3].x,P[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(P[2].x,P[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},y.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var m=this.map.painter.context,b=m.gl;for(var j in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(m,this.image,b.RGBA),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE)),this.tiles){var P=this.tiles[j];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture)}}},y.prototype.loadTile=function(m,b){this.tileID&&this.tileID.equals(m.tileID.canonical)?(this.tiles[String(m.tileID.wrap)]=m,m.buckets={},b(null)):(m.state="errored",b(null))},y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return!1},y})(a.Evented),Q=(function(f){function y(m,b,j,P){f.call(this,m,b,j,P),this.roundZoom=!0,this.type="video",this.options=b}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.load=function(){var m=this;this._loaded=!1;var b=this.options;this.urls=[];for(var j=0,P=b.urls;j<P.length;j+=1){var F=P[j];this.urls.push(this.map._requestManager.transformRequest(F,a.ResourceType.Source).url)}a.getVideo(this.urls,(function(U,$){m._loaded=!0,U?m.fire(new a.ErrorEvent(U)):$&&(m.video=$,m.video.loop=!0,m.video.addEventListener("playing",(function(){m.map.triggerRepaint()})),m.map&&m.video.play(),m._finishLoading())}))},y.prototype.pause=function(){this.video&&this.video.pause()},y.prototype.play=function(){this.video&&this.video.play()},y.prototype.seek=function(m){if(this.video){var b=this.video.seekable;m<b.start(0)||m>b.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+b.start(0)+" and "+b.end(0)+"-second mark."))):this.video.currentTime=m}},y.prototype.getVideo=function(){return this.video},y.prototype.onAdd=function(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var m=this.map.painter.context,b=m.gl;for(var j in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE),b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(m,this.video,b.RGBA),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE)),this.tiles){var P=this.tiles[j];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this.video&&!this.video.paused},y})(pe),Ee=(function(f){function y(m,b,j,P){f.call(this,m,b,j,P),b.coordinates?Array.isArray(b.coordinates)&&b.coordinates.length===4&&!b.coordinates.some((function(F){return!Array.isArray(F)||F.length!==2||F.some((function(U){return typeof U!="number"}))}))||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+m,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+m,null,'missing required property "coordinates"'))),b.animate&&typeof b.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+m,null,'optional "animate" property must be a boolean value'))),b.canvas?typeof b.canvas=="string"||b.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+m,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+m,null,'missing required property "canvas"'))),this.options=b,this.animate=b.animate===void 0||b.animate}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},y.prototype.getCanvas=function(){return this.canvas},y.prototype.onAdd=function(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()},y.prototype.onRemove=function(){this.pause()},y.prototype.prepare=function(){var m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var b=this.map.painter.context,j=b.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(b,this.canvas,j.RGBA,{premultiply:!0}),this.tiles){var F=this.tiles[P];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},y.prototype.hasTransition=function(){return this._playing},y.prototype._hasInvalidDimensions=function(){for(var m=0,b=[this.canvas.width,this.canvas.height];m<b.length;m+=1){var j=b[m];if(isNaN(j)||j<=0)return!0}return!1},y})(pe),Ge={vector:De,raster:ke,"raster-dem":st,geojson:me,video:Q,image:pe,canvas:Ee};function lt(f,y){var m=a.identity([]);return a.translate(m,m,[1,1,0]),a.scale(m,m,[.5*f.width,.5*f.height,1]),a.multiply(m,m,f.calculatePosMatrix(y.toUnwrapped()))}function We(f,y,m,b,j){var P=(function(_e,ve,$e){if(_e)for(var Fe=0,rt=_e;Fe<rt.length;Fe+=1){var et=ve[rt[Fe]];if(et&&et.source===$e&&et.type==="fill-extrusion")return!0}else for(var it in ve){var ft=ve[it];if(ft.source===$e&&ft.type==="fill-extrusion")return!0}return!1})(b&&b.layers,y,f.id),F=j.maxPitchScaleFactor(),U=f.tilesIn(m,F,P);U.sort(Nt);for(var $=[],J=0,te=U;J<te.length;J+=1){var ue=te[J];$.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(y,f._state,ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,b,j,F,lt(f.transform,ue.tileID))})}var Te=(function(_e){for(var ve={},$e={},Fe=0,rt=_e;Fe<rt.length;Fe+=1){var et=rt[Fe],it=et.queryResults,ft=et.wrappedTileID,_t=$e[ft]=$e[ft]||{};for(var kt in it)for(var an=it[kt],Wt=_t[kt]=_t[kt]||{},un=ve[kt]=ve[kt]||[],Zt=0,xn=an;Zt<xn.length;Zt+=1){var Qt=xn[Zt];Wt[Qt.featureIndex]||(Wt[Qt.featureIndex]=!0,un.push(Qt))}}return ve})($);for(var be in Te)Te[be].forEach((function(_e){var ve=_e.feature,$e=f.getFeatureState(ve.layer["source-layer"],ve.id);ve.source=ve.layer.source,ve.layer["source-layer"]&&(ve.sourceLayer=ve.layer["source-layer"]),ve.state=$e}));return Te}function Nt(f,y){var m=f.tileID,b=y.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}var At=function(f,y){this.max=f,this.onRemove=y,this.reset()};At.prototype.reset=function(){for(var f in this.data)for(var y=0,m=this.data[f];y<m.length;y+=1){var b=m[y];b.timeout&&clearTimeout(b.timeout),this.onRemove(b.value)}return this.data={},this.order=[],this},At.prototype.add=function(f,y,m){var b=this,j=f.wrapped().key;this.data[j]===void 0&&(this.data[j]=[]);var P={value:y,timeout:void 0};if(m!==void 0&&(P.timeout=setTimeout((function(){b.remove(f,P)}),m)),this.data[j].push(P),this.order.push(j),this.order.length>this.max){var F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this},At.prototype.has=function(f){return f.wrapped().key in this.data},At.prototype.getAndRemove=function(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null},At.prototype._getAndRemoveByKey=function(f){var y=this.data[f].shift();return y.timeout&&clearTimeout(y.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),y.value},At.prototype.getByKey=function(f){var y=this.data[f];return y?y[0].value:null},At.prototype.get=function(f){return this.has(f)?this.data[f.wrapped().key][0].value:null},At.prototype.remove=function(f,y){if(!this.has(f))return this;var m=f.wrapped().key,b=y===void 0?0:this.data[m].indexOf(y),j=this.data[m][b];return this.data[m].splice(b,1),j.timeout&&clearTimeout(j.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(j.value),this.order.splice(this.order.indexOf(m),1),this},At.prototype.setMaxSize=function(f){for(this.max=f;this.order.length>this.max;){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this},At.prototype.filter=function(f){var y=[];for(var m in this.data)for(var b=0,j=this.data[m];b<j.length;b+=1){var P=j[b];f(P.value)||y.push(P)}for(var F=0,U=y;F<U.length;F+=1){var $=U[F];this.remove($.value.tileID,$)}};var Mt=function(f,y,m){this.context=f;var b=f.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};Mt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Mt.prototype.updateData=function(f){var y=this.context.gl;this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)},Mt.prototype.destroy=function(){var f=this.context.gl;this.buffer&&(f.deleteBuffer(this.buffer),delete this.buffer)};var Ut={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Pt=function(f,y,m,b){this.length=y.length,this.attributes=m,this.itemSize=y.bytesPerElement,this.dynamicDraw=b,this.context=f;var j=f.gl;this.buffer=j.createBuffer(),f.bindVertexBuffer.set(this.buffer),j.bufferData(j.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer};Pt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Pt.prototype.updateData=function(f){var y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,f.arrayBuffer)},Pt.prototype.enableAttributes=function(f,y){for(var m=0;m<this.attributes.length;m++){var b=this.attributes[m],j=y.attributes[b.name];j!==void 0&&f.enableVertexAttribArray(j)}},Pt.prototype.setVertexAttribPointers=function(f,y,m){for(var b=0;b<this.attributes.length;b++){var j=this.attributes[b],P=y.attributes[j.name];P!==void 0&&f.vertexAttribPointer(P,j.components,f[Ut[j.type]],!1,this.itemSize,j.offset+this.itemSize*(m||0))}},Pt.prototype.destroy=function(){var f=this.context.gl;this.buffer&&(f.deleteBuffer(this.buffer),delete this.buffer)};var Rt=function(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Rt.prototype.get=function(){return this.current},Rt.prototype.set=function(f){},Rt.prototype.getDefault=function(){return this.default},Rt.prototype.setDefault=function(){this.set(this.default)};var vn=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return a.Color.transparent},y.prototype.set=function(m){var b=this.current;(m.r!==b.r||m.g!==b.g||m.b!==b.b||m.a!==b.a||this.dirty)&&(this.gl.clearColor(m.r,m.g,m.b,m.a),this.current=m,this.dirty=!1)},y})(Rt),er=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return 1},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.clearDepth(m),this.current=m,this.dirty=!1)},y})(Rt),$n=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return 0},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.clearStencil(m),this.current=m,this.dirty=!1)},y})(Rt),ir=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return[!0,!0,!0,!0]},y.prototype.set=function(m){var b=this.current;(m[0]!==b[0]||m[1]!==b[1]||m[2]!==b[2]||m[3]!==b[3]||this.dirty)&&(this.gl.colorMask(m[0],m[1],m[2],m[3]),this.current=m,this.dirty=!1)},y})(Rt),dt=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return!0},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.depthMask(m),this.current=m,this.dirty=!1)},y})(Rt),Xe=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return 255},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.stencilMask(m),this.current=m,this.dirty=!1)},y})(Rt),xe=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},y.prototype.set=function(m){var b=this.current;(m.func!==b.func||m.ref!==b.ref||m.mask!==b.mask||this.dirty)&&(this.gl.stencilFunc(m.func,m.ref,m.mask),this.current=m,this.dirty=!1)},y})(Rt),Re=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){var m=this.gl;return[m.KEEP,m.KEEP,m.KEEP]},y.prototype.set=function(m){var b=this.current;(m[0]!==b[0]||m[1]!==b[1]||m[2]!==b[2]||this.dirty)&&(this.gl.stencilOp(m[0],m[1],m[2]),this.current=m,this.dirty=!1)},y})(Rt),Ve=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;m?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST),this.current=m,this.dirty=!1}},y})(Rt),Vt=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return[0,1]},y.prototype.set=function(m){var b=this.current;(m[0]!==b[0]||m[1]!==b[1]||this.dirty)&&(this.gl.depthRange(m[0],m[1]),this.current=m,this.dirty=!1)},y})(Rt),Oe=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;m?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),this.current=m,this.dirty=!1}},y})(Rt),Le=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return this.gl.LESS},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.depthFunc(m),this.current=m,this.dirty=!1)},y})(Rt),Qe=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;m?b.enable(b.BLEND):b.disable(b.BLEND),this.current=m,this.dirty=!1}},y})(Rt),Tt=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){var m=this.gl;return[m.ONE,m.ZERO]},y.prototype.set=function(m){var b=this.current;(m[0]!==b[0]||m[1]!==b[1]||this.dirty)&&(this.gl.blendFunc(m[0],m[1]),this.current=m,this.dirty=!1)},y})(Rt),on=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return a.Color.transparent},y.prototype.set=function(m){var b=this.current;(m.r!==b.r||m.g!==b.g||m.b!==b.b||m.a!==b.a||this.dirty)&&(this.gl.blendColor(m.r,m.g,m.b,m.a),this.current=m,this.dirty=!1)},y})(Rt),Mn=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return this.gl.FUNC_ADD},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.blendEquation(m),this.current=m,this.dirty=!1)},y})(Rt),Xn=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;m?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE),this.current=m,this.dirty=!1}},y})(Rt),wr=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return this.gl.BACK},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.cullFace(m),this.current=m,this.dirty=!1)},y})(Rt),Bi=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return this.gl.CCW},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.frontFace(m),this.current=m,this.dirty=!1)},y})(Rt),Jr=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)},y})(Rt),Xr=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return this.gl.TEXTURE0},y.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.activeTexture(m),this.current=m,this.dirty=!1)},y})(Rt),Ci=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){var m=this.gl;return[0,0,m.drawingBufferWidth,m.drawingBufferHeight]},y.prototype.set=function(m){var b=this.current;(m[0]!==b[0]||m[1]!==b[1]||m[2]!==b[2]||m[3]!==b[3]||this.dirty)&&(this.gl.viewport(m[0],m[1],m[2],m[3]),this.current=m,this.dirty=!1)},y})(Rt),Sr=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,m),this.current=m,this.dirty=!1}},y})(Rt),ka=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;b.bindRenderbuffer(b.RENDERBUFFER,m),this.current=m,this.dirty=!1}},y})(Rt),qr=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;b.bindTexture(b.TEXTURE_2D,m),this.current=m,this.dirty=!1}},y})(Rt),Ks=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;b.bindBuffer(b.ARRAY_BUFFER,m),this.current=m,this.dirty=!1}},y})(Rt),So=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(m){var b=this.gl;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,m),this.current=m,this.dirty=!1},y})(Rt),Eo=(function(f){function y(m){f.call(this,m),this.vao=m.extVertexArrayObject}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y.prototype.set=function(m){this.vao&&(m!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(m),this.current=m,this.dirty=!1)},y})(Rt),qa=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return 4},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;b.pixelStorei(b.UNPACK_ALIGNMENT,m),this.current=m,this.dirty=!1}},y})(Rt),da=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),this.current=m,this.dirty=!1}},y})(Rt),Co=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return!1},y.prototype.set=function(m){if(m!==this.current||this.dirty){var b=this.gl;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,m),this.current=m,this.dirty=!1}},y})(Rt),Ra=(function(f){function y(m,b){f.call(this,m),this.context=m,this.parent=b}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getDefault=function(){return null},y})(Rt),ws=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.setDirty=function(){this.dirty=!0},y.prototype.set=function(m){if(m!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var b=this.gl;b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,m,0),this.current=m,this.dirty=!1}},y})(Ra),$o=(function(f){function y(){f.apply(this,arguments)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.set=function(m){if(m!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var b=this.gl;b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,m),this.current=m,this.dirty=!1}},y})(Ra),is=function(f,y,m){this.context=f,this.width=y,this.height=m;var b=f.gl,j=this.framebuffer=b.createFramebuffer();this.colorAttachment=new ws(f,j),this.depthAttachment=new $o(f,j)};is.prototype.destroy=function(){var f=this.context.gl,y=this.colorAttachment.get();y&&f.deleteTexture(y);var m=this.depthAttachment.get();m&&f.deleteRenderbuffer(m),f.deleteFramebuffer(this.framebuffer)};var fr=function(f,y,m){this.func=f,this.mask=y,this.range=m};fr.ReadOnly=!1,fr.ReadWrite=!0,fr.disabled=new fr(519,fr.ReadOnly,[0,1]);var Ti=function(f,y,m,b,j,P){this.test=f,this.ref=y,this.mask=m,this.fail=b,this.depthFail=j,this.pass=P};Ti.disabled=new Ti({func:519,mask:0},0,0,7680,7680,7680);var Fr=function(f,y,m){this.blendFunction=f,this.blendColor=y,this.mask=m};Fr.disabled=new Fr(Fr.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),Fr.unblended=new Fr(Fr.Replace,a.Color.transparent,[!0,!0,!0,!0]),Fr.alphaBlended=new Fr([1,771],a.Color.transparent,[!0,!0,!0,!0]);var vt=function(f,y,m){this.enable=f,this.mode=y,this.frontFace=m};vt.disabled=new vt(!1,1029,2305),vt.backCCW=new vt(!0,1029,2305);var Yt=function(f){this.gl=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new vn(this),this.clearDepth=new er(this),this.clearStencil=new $n(this),this.colorMask=new ir(this),this.depthMask=new dt(this),this.stencilMask=new Xe(this),this.stencilFunc=new xe(this),this.stencilOp=new Re(this),this.stencilTest=new Ve(this),this.depthRange=new Vt(this),this.depthTest=new Oe(this),this.depthFunc=new Le(this),this.blend=new Qe(this),this.blendFunc=new Tt(this),this.blendColor=new on(this),this.blendEquation=new Mn(this),this.cullFace=new Xn(this),this.cullFaceSide=new wr(this),this.frontFace=new Bi(this),this.program=new Jr(this),this.activeTexture=new Xr(this),this.viewport=new Ci(this),this.bindFramebuffer=new Sr(this),this.bindRenderbuffer=new ka(this),this.bindTexture=new qr(this),this.bindVertexBuffer=new Ks(this),this.bindElementBuffer=new So(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Eo(this),this.pixelStoreUnpack=new qa(this),this.pixelStoreUnpackPremultiplyAlpha=new da(this),this.pixelStoreUnpackFlipY=new Co(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=f.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&f.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query")};Yt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Yt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Yt.prototype.createIndexBuffer=function(f,y){return new Mt(this,f,y)},Yt.prototype.createVertexBuffer=function(f,y,m){return new Pt(this,f,y,m)},Yt.prototype.createRenderbuffer=function(f,y,m){var b=this.gl,j=b.createRenderbuffer();return this.bindRenderbuffer.set(j),b.renderbufferStorage(b.RENDERBUFFER,f,y,m),this.bindRenderbuffer.set(null),j},Yt.prototype.createFramebuffer=function(f,y){return new is(this,f,y)},Yt.prototype.clear=function(f){var y=f.color,m=f.depth,b=this.gl,j=0;y&&(j|=b.COLOR_BUFFER_BIT,this.clearColor.set(y),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(j|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b.clear(j)},Yt.prototype.setCullFace=function(f){f.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))},Yt.prototype.setDepthMode=function(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)},Yt.prototype.setStencilMode=function(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)},Yt.prototype.setColorMode=function(f){a.deepEqual(f.blendFunction,Fr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)},Yt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ja=(function(f){function y(m,b,j){var P=this;f.call(this),this.id=m,this.dispatcher=j,this.on("data",(function(F){F.dataType==="source"&&F.sourceDataType==="metadata"&&(P._sourceLoaded=!0),P._sourceLoaded&&!P._paused&&F.dataType==="source"&&F.sourceDataType==="content"&&(P.reload(),P.transform&&P.update(P.transform))})),this.on("error",(function(){P._sourceErrored=!0})),this._source=(function(F,U,$,J){var te=new Ge[U.type](F,U,$,J);if(te.id!==F)throw new Error("Expected Source id to be "+F+" instead of "+te.id);return a.bindAll(["load","abort","unload","serialize","prepare"],te),te})(m,b,j,this),this._tiles={},this._cache=new At(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.onAdd=function(m){this.map=m,this._maxTileCacheSize=m?m._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(m)},y.prototype.onRemove=function(m){this._source&&this._source.onRemove&&this._source.onRemove(m)},y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var m in this._tiles){var b=this._tiles[m];if(b.state!=="loaded"&&b.state!=="errored")return!1}return!0},y.prototype.getSource=function(){return this._source},y.prototype.pause=function(){this._paused=!0},y.prototype.resume=function(){if(this._paused){var m=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,m&&this.reload(),this.transform&&this.update(this.transform)}},y.prototype._loadTile=function(m,b){return this._source.loadTile(m,b)},y.prototype._unloadTile=function(m){if(this._source.unloadTile)return this._source.unloadTile(m,(function(){}))},y.prototype._abortTile=function(m){if(this._source.abortTile)return this._source.abortTile(m,(function(){}))},y.prototype.serialize=function(){return this._source.serialize()},y.prototype.prepare=function(m){for(var b in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var j=this._tiles[b];j.upload(m),j.prepare(this.map.style.imageManager)}},y.prototype.getIds=function(){return Object.values(this._tiles).map((function(m){return m.tileID})).sort(eo).map((function(m){return m.key}))},y.prototype.getRenderableIds=function(m){var b=this,j=[];for(var P in this._tiles)this._isIdRenderable(P,m)&&j.push(this._tiles[P]);return m?j.sort((function(F,U){var $=F.tileID,J=U.tileID,te=new a.Point($.canonical.x,$.canonical.y)._rotate(b.transform.angle),ue=new a.Point(J.canonical.x,J.canonical.y)._rotate(b.transform.angle);return $.overscaledZ-J.overscaledZ||ue.y-te.y||ue.x-te.x})).map((function(F){return F.tileID.key})):j.map((function(F){return F.tileID})).sort(eo).map((function(F){return F.key}))},y.prototype.hasRenderableParent=function(m){var b=this.findLoadedParent(m,0);return!!b&&this._isIdRenderable(b.tileID.key)},y.prototype._isIdRenderable=function(m,b){return this._tiles[m]&&this._tiles[m].hasData()&&!this._coveredTiles[m]&&(b||!this._tiles[m].holdingForFade())},y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var m in this._cache.reset(),this._tiles)this._tiles[m].state!=="errored"&&this._reloadTile(m,"reloading")},y.prototype._reloadTile=function(m,b){var j=this._tiles[m];j&&(j.state!=="loading"&&(j.state=b),this._loadTile(j,this._tileLoaded.bind(this,j,m,b)))},y.prototype._tileLoaded=function(m,b,j,P){if(P)return m.state="errored",void(P.status!==404?this._source.fire(new a.ErrorEvent(P,{tile:m})):this.update(this.transform));m.timeAdded=a.browser.now(),j==="expired"&&(m.refreshedUponExpiration=!0),this._setTileReloadTimer(b,m),this.getSource().type==="raster-dem"&&m.dem&&this._backfillDEM(m),this._state.initializeTileState(m,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:m,coord:m.tileID}))},y.prototype._backfillDEM=function(m){for(var b=this.getRenderableIds(),j=0;j<b.length;j++){var P=b[j];if(m.neighboringTiles&&m.neighboringTiles[P]){var F=this.getTileByID(P);U(m,F),U(F,m)}}function U($,J){$.needsHillshadePrepare=!0;var te=J.tileID.canonical.x-$.tileID.canonical.x,ue=J.tileID.canonical.y-$.tileID.canonical.y,Te=Math.pow(2,$.tileID.canonical.z),be=J.tileID.key;te===0&&ue===0||Math.abs(ue)>1||(Math.abs(te)>1&&(Math.abs(te+Te)===1?te+=Te:Math.abs(te-Te)===1&&(te-=Te)),J.dem&&$.dem&&($.dem.backfillBorder(J.dem,te,ue),$.neighboringTiles&&$.neighboringTiles[be]&&($.neighboringTiles[be].backfilled=!0)))}},y.prototype.getTile=function(m){return this.getTileByID(m.key)},y.prototype.getTileByID=function(m){return this._tiles[m]},y.prototype._retainLoadedChildren=function(m,b,j,P){for(var F in this._tiles){var U=this._tiles[F];if(!(P[F]||!U.hasData()||U.tileID.overscaledZ<=b||U.tileID.overscaledZ>j)){for(var $=U.tileID;U&&U.tileID.overscaledZ>b+1;){var J=U.tileID.scaledTo(U.tileID.overscaledZ-1);(U=this._tiles[J.key])&&U.hasData()&&($=J)}for(var te=$;te.overscaledZ>b;)if(m[(te=te.scaledTo(te.overscaledZ-1)).key]){P[$.key]=$;break}}}},y.prototype.findLoadedParent=function(m,b){if(m.key in this._loadedParentTiles){var j=this._loadedParentTiles[m.key];return j&&j.tileID.overscaledZ>=b?j:null}for(var P=m.overscaledZ-1;P>=b;P--){var F=m.scaledTo(P),U=this._getLoadedTile(F);if(U)return U}},y.prototype._getLoadedTile=function(m){var b=this._tiles[m.key];return b&&b.hasData()?b:this._cache.getByKey(m.wrapped().key)},y.prototype.updateCacheSize=function(m){var b=(Math.ceil(m.width/this._source.tileSize)+1)*(Math.ceil(m.height/this._source.tileSize)+1),j=Math.floor(5*b),P=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,j):j;this._cache.setMaxSize(P)},y.prototype.handleWrapJump=function(m){var b=(m-(this._prevLng===void 0?m:this._prevLng))/360,j=Math.round(b);if(this._prevLng=m,j){var P={};for(var F in this._tiles){var U=this._tiles[F];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+j),P[U.tileID.key]=U}for(var $ in this._tiles=P,this._timers)clearTimeout(this._timers[$]),delete this._timers[$];for(var J in this._tiles){var te=this._tiles[J];this._setTileReloadTimer(J,te)}}},y.prototype.update=function(m){var b=this;if(this.transform=m,this._sourceLoaded&&!this._paused){var j;this.updateCacheSize(m),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?j=m.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(kt){return new a.OverscaledTileID(kt.canonical.z,kt.wrap,kt.canonical.z,kt.canonical.x,kt.canonical.y)})):(j=m.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(j=j.filter((function(kt){return b._source.hasTile(kt)})))):j=[];var P=m.coveringZoomLevel(this._source),F=Math.max(P-y.maxOverzooming,this._source.minzoom),U=Math.max(P+y.maxUnderzooming,this._source.minzoom),$=this._updateRetainedTiles(j,P);if(gi(this._source.type)){for(var J={},te={},ue=0,Te=Object.keys($);ue<Te.length;ue+=1){var be=Te[ue],_e=$[be],ve=this._tiles[be];if(ve&&!(ve.fadeEndTime&&ve.fadeEndTime<=a.browser.now())){var $e=this.findLoadedParent(_e,F);$e&&(this._addTile($e.tileID),J[$e.tileID.key]=$e.tileID),te[be]=_e}}for(var Fe in this._retainLoadedChildren(te,P,U,$),J)$[Fe]||(this._coveredTiles[Fe]=!0,$[Fe]=J[Fe])}for(var rt in $)this._tiles[rt].clearFadeHold();for(var et=0,it=a.keysDifference(this._tiles,$);et<it.length;et+=1){var ft=it[et],_t=this._tiles[ft];_t.hasSymbolBuckets&&!_t.holdingForFade()?_t.setHoldDuration(this.map._fadeDuration):_t.hasSymbolBuckets&&!_t.symbolFadeFinished()||this._removeTile(ft)}this._updateLoadedParentTileCache()}},y.prototype.releaseSymbolFadeTiles=function(){for(var m in this._tiles)this._tiles[m].holdingForFade()&&this._removeTile(m)},y.prototype._updateRetainedTiles=function(m,b){for(var j={},P={},F=Math.max(b-y.maxOverzooming,this._source.minzoom),U=Math.max(b+y.maxUnderzooming,this._source.minzoom),$={},J=0,te=m;J<te.length;J+=1){var ue=te[J],Te=this._addTile(ue);j[ue.key]=ue,Te.hasData()||b<this._source.maxzoom&&($[ue.key]=ue)}this._retainLoadedChildren($,b,U,j);for(var be=0,_e=m;be<_e.length;be+=1){var ve=_e[be],$e=this._tiles[ve.key];if(!$e.hasData()){if(b+1>this._source.maxzoom){var Fe=ve.children(this._source.maxzoom)[0],rt=this.getTile(Fe);if(rt&&rt.hasData()){j[Fe.key]=Fe;continue}}else{var et=ve.children(this._source.maxzoom);if(j[et[0].key]&&j[et[1].key]&&j[et[2].key]&&j[et[3].key])continue}for(var it=$e.wasRequested(),ft=ve.overscaledZ-1;ft>=F;--ft){var _t=ve.scaledTo(ft);if(P[_t.key]||(P[_t.key]=!0,!($e=this.getTile(_t))&&it&&($e=this._addTile(_t)),$e&&(j[_t.key]=_t,it=$e.wasRequested(),$e.hasData())))break}}}return j},y.prototype._updateLoadedParentTileCache=function(){for(var m in this._loadedParentTiles={},this._tiles){for(var b=[],j=void 0,P=this._tiles[m].tileID;P.overscaledZ>0;){if(P.key in this._loadedParentTiles){j=this._loadedParentTiles[P.key];break}b.push(P.key);var F=P.scaledTo(P.overscaledZ-1);if(j=this._getLoadedTile(F))break;P=F}for(var U=0,$=b;U<$.length;U+=1){var J=$[U];this._loadedParentTiles[J]=j}}},y.prototype._addTile=function(m){var b=this._tiles[m.key];if(b)return b;(b=this._cache.getAndRemove(m))&&(this._setTileReloadTimer(m.key,b),b.tileID=m,this._state.initializeTileState(b,this.map?this.map.painter:null),this._cacheTimers[m.key]&&(clearTimeout(this._cacheTimers[m.key]),delete this._cacheTimers[m.key],this._setTileReloadTimer(m.key,b)));var j=!!b;return j||(b=new a.Tile(m,this._source.tileSize*m.overscaleFactor()),this._loadTile(b,this._tileLoaded.bind(this,b,m.key,b.state))),b?(b.uses++,this._tiles[m.key]=b,j||this._source.fire(new a.Event("dataloading",{tile:b,coord:b.tileID,dataType:"source"})),b):null},y.prototype._setTileReloadTimer=function(m,b){var j=this;m in this._timers&&(clearTimeout(this._timers[m]),delete this._timers[m]);var P=b.getExpiryTimeout();P&&(this._timers[m]=setTimeout((function(){j._reloadTile(m,"expired"),delete j._timers[m]}),P))},y.prototype._removeTile=function(m){var b=this._tiles[m];b&&(b.uses--,delete this._tiles[m],this._timers[m]&&(clearTimeout(this._timers[m]),delete this._timers[m]),b.uses>0||(b.hasData()&&b.state!=="reloading"?this._cache.add(b.tileID,b,b.getExpiryTimeout()):(b.aborted=!0,this._abortTile(b),this._unloadTile(b))))},y.prototype.clearTiles=function(){for(var m in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(m);this._cache.reset()},y.prototype.tilesIn=function(m,b,j){var P=this,F=[],U=this.transform;if(!U)return F;for(var $=j?U.getCameraQueryGeometry(m):m,J=m.map((function(ft){return U.pointCoordinate(ft)})),te=$.map((function(ft){return U.pointCoordinate(ft)})),ue=this.getIds(),Te=1/0,be=1/0,_e=-1/0,ve=-1/0,$e=0,Fe=te;$e<Fe.length;$e+=1){var rt=Fe[$e];Te=Math.min(Te,rt.x),be=Math.min(be,rt.y),_e=Math.max(_e,rt.x),ve=Math.max(ve,rt.y)}for(var et=function(ft){var _t=P._tiles[ue[ft]];if(!_t.holdingForFade()){var kt=_t.tileID,an=Math.pow(2,U.zoom-_t.tileID.overscaledZ),Wt=b*_t.queryPadding*a.EXTENT/_t.tileSize/an,un=[kt.getTilePoint(new a.MercatorCoordinate(Te,be)),kt.getTilePoint(new a.MercatorCoordinate(_e,ve))];if(un[0].x-Wt<a.EXTENT&&un[0].y-Wt<a.EXTENT&&un[1].x+Wt>=0&&un[1].y+Wt>=0){var Zt=J.map((function(Qt){return kt.getTilePoint(Qt)})),xn=te.map((function(Qt){return kt.getTilePoint(Qt)}));F.push({tile:_t,tileID:kt,queryGeometry:Zt,cameraQueryGeometry:xn,scale:an})}}},it=0;it<ue.length;it++)et(it);return F},y.prototype.getVisibleCoordinates=function(m){for(var b=this,j=this.getRenderableIds(m).map((function($){return b._tiles[$].tileID})),P=0,F=j;P<F.length;P+=1){var U=F[P];U.posMatrix=this.transform.calculatePosMatrix(U.toUnwrapped())}return j},y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(gi(this._source.type))for(var m in this._tiles){var b=this._tiles[m];if(b.fadeEndTime!==void 0&&b.fadeEndTime>=a.browser.now())return!0}return!1},y.prototype.setFeatureState=function(m,b,j){m=m||"_geojsonTileLayer",this._state.updateState(m,b,j)},y.prototype.removeFeatureState=function(m,b,j){m=m||"_geojsonTileLayer",this._state.removeFeatureState(m,b,j)},y.prototype.getFeatureState=function(m,b){return m=m||"_geojsonTileLayer",this._state.getState(m,b)},y.prototype.setDependencies=function(m,b,j){var P=this._tiles[m];P&&P.setDependencies(b,j)},y.prototype.reloadTilesForDependencies=function(m,b){for(var j in this._tiles)this._tiles[j].hasDependency(m,b)&&this._reloadTile(j,"reloading");this._cache.filter((function(P){return!P.hasDependency(m,b)}))},y})(a.Evented);function eo(f,y){var m=Math.abs(2*f.wrap)-+(f.wrap<0),b=Math.abs(2*y.wrap)-+(y.wrap<0);return f.overscaledZ-y.overscaledZ||b-m||y.canonical.y-f.canonical.y||y.canonical.x-f.canonical.x}function gi(f){return f==="raster"||f==="image"||f==="video"}function Hr(){return new a.window.Worker(Ga.workerUrl)}Ja.maxOverzooming=10,Ja.maxUnderzooming=3;var Z=function(){this.active={}};Z.prototype.acquire=function(f){if(!this.workers)for(this.workers=[];this.workers.length<Z.workerCount;)this.workers.push(new Hr);return this.active[f]=!0,this.workers.slice()},Z.prototype.release=function(f){delete this.active[f],Object.keys(this.active).length===0&&(this.workers.forEach((function(y){y.terminate()})),this.workers=null)};var Y,ie=Math.floor(a.browser.hardwareConcurrency/2);function se(f,y){var m={};for(var b in f)b!=="ref"&&(m[b]=f[b]);return a.refProperties.forEach((function(j){j in y&&(m[j]=y[j])})),m}function je(f){f=f.slice();for(var y=Object.create(null),m=0;m<f.length;m++)y[f[m].id]=f[m];for(var b=0;b<f.length;b++)"ref"in f[b]&&(f[b]=se(f[b],y[f[b].ref]));return f}Z.workerCount=Math.max(Math.min(ie,6),1);var Ne={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ye(f,y,m){m.push({command:Ne.addSource,args:[f,y[f]]})}function He(f,y,m){y.push({command:Ne.removeSource,args:[f]}),m[f]=!0}function Be(f,y,m,b){He(f,m,b),Ye(f,y,m)}function nt(f,y,m){var b;for(b in f[m])if(f[m].hasOwnProperty(b)&&b!=="data"&&!a.deepEqual(f[m][b],y[m][b]))return!1;for(b in y[m])if(y[m].hasOwnProperty(b)&&b!=="data"&&!a.deepEqual(f[m][b],y[m][b]))return!1;return!0}function xt(f,y,m,b,j,P){var F;for(F in y=y||{},f=f||{})f.hasOwnProperty(F)&&(a.deepEqual(f[F],y[F])||m.push({command:P,args:[b,F,y[F],j]}));for(F in y)y.hasOwnProperty(F)&&!f.hasOwnProperty(F)&&(a.deepEqual(f[F],y[F])||m.push({command:P,args:[b,F,y[F],j]}))}function Ot(f){return f.id}function yt(f,y){return f[y.id]=y,f}function It(f,y){if(!f)return[{command:Ne.setStyle,args:[y]}];var m=[];try{if(!a.deepEqual(f.version,y.version))return[{command:Ne.setStyle,args:[y]}];a.deepEqual(f.center,y.center)||m.push({command:Ne.setCenter,args:[y.center]}),a.deepEqual(f.zoom,y.zoom)||m.push({command:Ne.setZoom,args:[y.zoom]}),a.deepEqual(f.bearing,y.bearing)||m.push({command:Ne.setBearing,args:[y.bearing]}),a.deepEqual(f.pitch,y.pitch)||m.push({command:Ne.setPitch,args:[y.pitch]}),a.deepEqual(f.sprite,y.sprite)||m.push({command:Ne.setSprite,args:[y.sprite]}),a.deepEqual(f.glyphs,y.glyphs)||m.push({command:Ne.setGlyphs,args:[y.glyphs]}),a.deepEqual(f.transition,y.transition)||m.push({command:Ne.setTransition,args:[y.transition]}),a.deepEqual(f.light,y.light)||m.push({command:Ne.setLight,args:[y.light]});var b={},j=[];(function(F,U,$,J){var te;for(te in U=U||{},F=F||{})F.hasOwnProperty(te)&&(U.hasOwnProperty(te)||He(te,$,J));for(te in U)U.hasOwnProperty(te)&&(F.hasOwnProperty(te)?a.deepEqual(F[te],U[te])||(F[te].type==="geojson"&&U[te].type==="geojson"&&nt(F,U,te)?$.push({command:Ne.setGeoJSONSourceData,args:[te,U[te].data]}):Be(te,U,$,J)):Ye(te,U,$))})(f.sources,y.sources,j,b);var P=[];f.layers&&f.layers.forEach((function(F){b[F.source]?m.push({command:Ne.removeLayer,args:[F.id]}):P.push(F)})),m=m.concat(j),(function(F,U,$){U=U||[];var J,te,ue,Te,be,_e,ve,$e=(F=F||[]).map(Ot),Fe=U.map(Ot),rt=F.reduce(yt,{}),et=U.reduce(yt,{}),it=$e.slice(),ft=Object.create(null);for(J=0,te=0;J<$e.length;J++)ue=$e[J],et.hasOwnProperty(ue)?te++:($.push({command:Ne.removeLayer,args:[ue]}),it.splice(it.indexOf(ue,te),1));for(J=0,te=0;J<Fe.length;J++)ue=Fe[Fe.length-1-J],it[it.length-1-J]!==ue&&(rt.hasOwnProperty(ue)?($.push({command:Ne.removeLayer,args:[ue]}),it.splice(it.lastIndexOf(ue,it.length-te),1)):te++,_e=it[it.length-J],$.push({command:Ne.addLayer,args:[et[ue],_e]}),it.splice(it.length-J,0,ue),ft[ue]=!0);for(J=0;J<Fe.length;J++)if(Te=rt[ue=Fe[J]],be=et[ue],!ft[ue]&&!a.deepEqual(Te,be))if(a.deepEqual(Te.source,be.source)&&a.deepEqual(Te["source-layer"],be["source-layer"])&&a.deepEqual(Te.type,be.type)){for(ve in xt(Te.layout,be.layout,$,ue,null,Ne.setLayoutProperty),xt(Te.paint,be.paint,$,ue,null,Ne.setPaintProperty),a.deepEqual(Te.filter,be.filter)||$.push({command:Ne.setFilter,args:[ue,be.filter]}),a.deepEqual(Te.minzoom,be.minzoom)&&a.deepEqual(Te.maxzoom,be.maxzoom)||$.push({command:Ne.setLayerZoomRange,args:[ue,be.minzoom,be.maxzoom]}),Te)Te.hasOwnProperty(ve)&&ve!=="layout"&&ve!=="paint"&&ve!=="filter"&&ve!=="metadata"&&ve!=="minzoom"&&ve!=="maxzoom"&&(ve.indexOf("paint.")===0?xt(Te[ve],be[ve],$,ue,ve.slice(6),Ne.setPaintProperty):a.deepEqual(Te[ve],be[ve])||$.push({command:Ne.setLayerProperty,args:[ue,ve,be[ve]]}));for(ve in be)be.hasOwnProperty(ve)&&!Te.hasOwnProperty(ve)&&ve!=="layout"&&ve!=="paint"&&ve!=="filter"&&ve!=="metadata"&&ve!=="minzoom"&&ve!=="maxzoom"&&(ve.indexOf("paint.")===0?xt(Te[ve],be[ve],$,ue,ve.slice(6),Ne.setPaintProperty):a.deepEqual(Te[ve],be[ve])||$.push({command:Ne.setLayerProperty,args:[ue,ve,be[ve]]}))}else $.push({command:Ne.removeLayer,args:[ue]}),_e=it[it.lastIndexOf(ue)+1],$.push({command:Ne.addLayer,args:[be,_e]})})(P,y.layers,m)}catch(F){console.warn("Unable to compute style diff:",F),m=[{command:Ne.setStyle,args:[y]}]}return m}var Lt=function(f,y,m){var b=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(f/m),this.yCellCount=Math.ceil(y/m);for(var P=0;P<this.xCellCount*this.yCellCount;P++)b.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=y,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0};function en(f,y,m,b,j){var P=a.create();return y?(a.scale(P,P,[1/j,1/j,1]),m||a.rotateZ(P,P,b.angle)):a.multiply(P,b.labelPlaneMatrix,f),P}function dn(f,y,m,b,j){if(y){var P=a.clone(f);return a.scale(P,P,[j,j,1]),m||a.rotateZ(P,P,-b.angle),P}return b.glCoordMatrix}function qt(f,y){var m=[f.x,f.y,0,1];Qi(m,m,y);var b=m[3];return{point:new a.Point(m[0]/b,m[1]/b),signedDistanceFromCamera:b}}function Dn(f,y){var m=f[0]/f[3],b=f[1]/f[3];return m>=-y[0]&&m<=y[0]&&b>=-y[1]&&b<=y[1]}function qn(f,y,m,b,j,P,F,U){var $=b?f.textSizeData:f.iconSizeData,J=a.evaluateSizeForZoom($,m.transform.zoom),te=[256/m.width*2+1,256/m.height*2+1],ue=b?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;ue.clear();for(var Te=f.lineVertexArray,be=b?f.text.placedSymbolArray:f.icon.placedSymbolArray,_e=m.transform.width/m.transform.height,ve=!1,$e=0;$e<be.length;$e++){var Fe=be.get($e);if(Fe.hidden||Fe.writingMode===a.WritingMode.vertical&&!ve)Hn(Fe.numGlyphs,ue);else{ve=!1;var rt=[Fe.anchorX,Fe.anchorY,0,1];if(a.transformMat4(rt,rt,y),Dn(rt,te)){var et=.5+rt[3]/m.transform.cameraToCenterDistance*.5,it=a.evaluateSizeForFeature($,J,Fe),ft=F?it*et:it/et,_t=new a.Point(Fe.anchorX,Fe.anchorY),kt=qt(_t,j).point,an={},Wt=Lr(Fe,ft,!1,U,y,j,P,f.glyphOffsetArray,Te,ue,kt,_t,an,_e);ve=Wt.useVertical,(Wt.notEnoughRoom||ve||Wt.needsFlipping&&Lr(Fe,ft,!0,U,y,j,P,f.glyphOffsetArray,Te,ue,kt,_t,an,_e).notEnoughRoom)&&Hn(Fe.numGlyphs,ue)}else Hn(Fe.numGlyphs,ue)}}b?f.text.dynamicLayoutVertexBuffer.updateData(ue):f.icon.dynamicLayoutVertexBuffer.updateData(ue)}function kn(f,y,m,b,j,P,F,U,$,J,te,ue){var Te=U.glyphStartIndex+U.numGlyphs,be=U.lineStartIndex,_e=U.lineStartIndex+U.lineLength,ve=y.getoffsetX(U.glyphStartIndex),$e=y.getoffsetX(Te-1),Fe=nr(f*ve,m,b,j,P,F,U.segment,be,_e,$,J,te,ue);if(!Fe)return null;var rt=nr(f*$e,m,b,j,P,F,U.segment,be,_e,$,J,te,ue);return rt?{first:Fe,last:rt}:null}function zn(f,y,m,b){return f===a.WritingMode.horizontal&&Math.abs(m.y-y.y)>Math.abs(m.x-y.x)*b?{useVertical:!0}:(f===a.WritingMode.vertical?y.y<m.y:y.x>m.x)?{needsFlipping:!0}:null}function Lr(f,y,m,b,j,P,F,U,$,J,te,ue,Te,be){var _e,ve=y/24,$e=f.lineOffsetX*ve,Fe=f.lineOffsetY*ve;if(f.numGlyphs>1){var rt=f.glyphStartIndex+f.numGlyphs,et=f.lineStartIndex,it=f.lineStartIndex+f.lineLength,ft=kn(ve,U,$e,Fe,m,te,ue,f,$,P,Te,!1);if(!ft)return{notEnoughRoom:!0};var _t=qt(ft.first.point,F).point,kt=qt(ft.last.point,F).point;if(b&&!m){var an=zn(f.writingMode,_t,kt,be);if(an)return an}_e=[ft.first];for(var Wt=f.glyphStartIndex+1;Wt<rt-1;Wt++)_e.push(nr(ve*U.getoffsetX(Wt),$e,Fe,m,te,ue,f.segment,et,it,$,P,Te,!1));_e.push(ft.last)}else{if(b&&!m){var un=qt(ue,j).point,Zt=f.lineStartIndex+f.segment+1,xn=new a.Point($.getx(Zt),$.gety(Zt)),Qt=qt(xn,j),jn=Qt.signedDistanceFromCamera>0?Qt.point:Bn(ue,xn,un,1,j),Gn=zn(f.writingMode,un,jn,be);if(Gn)return Gn}var Fn=nr(ve*U.getoffsetX(f.glyphStartIndex),$e,Fe,m,te,ue,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,$,P,Te,!1);if(!Fn)return{notEnoughRoom:!0};_e=[Fn]}for(var Rn=0,Mr=_e;Rn<Mr.length;Rn+=1){var Zn=Mr[Rn];a.addDynamicAttributes(J,Zn.point,Zn.angle)}return{}}function Bn(f,y,m,b,j){var P=qt(f.add(f.sub(y)._unit()),j).point,F=m.sub(P);return m.add(F._mult(b/F.mag()))}function nr(f,y,m,b,j,P,F,U,$,J,te,ue,Te){var be=b?f-y:f+y,_e=be>0?1:-1,ve=0;b&&(_e*=-1,ve=Math.PI),_e<0&&(ve+=Math.PI);for(var $e=_e>0?U+F:U+F+1,Fe=$e,rt=j,et=j,it=0,ft=0,_t=Math.abs(be);it+ft<=_t;){if(($e+=_e)<U||$e>=$)return null;if(et=rt,(rt=ue[$e])===void 0){var kt=new a.Point(J.getx($e),J.gety($e)),an=qt(kt,te);if(an.signedDistanceFromCamera>0)rt=ue[$e]=an.point;else{var Wt=$e-_e;rt=Bn(it===0?P:new a.Point(J.getx(Wt),J.gety(Wt)),kt,et,_t-it+1,te)}}it+=ft,ft=et.dist(rt)}var un=(_t-it)/ft,Zt=rt.sub(et),xn=Zt.mult(un)._add(et);return xn._add(Zt._unit()._perp()._mult(m*_e)),{point:xn,angle:ve+Math.atan2(rt.y-et.y,rt.x-et.x),tileDistance:Te?{prevTileDistance:$e-_e===Fe?0:J.gettileUnitDistanceFromAnchor($e-_e),lastSegmentViewportDistance:_t-it}:null}}Lt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Lt.prototype.insert=function(f,y,m,b,j){this._forEachCell(y,m,b,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(y),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(j)},Lt.prototype.insertCircle=function(f,y,m,b){this._forEachCell(y-b,m-b,y+b,m+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(y),this.circles.push(m),this.circles.push(b)},Lt.prototype._insertBoxCell=function(f,y,m,b,j,P){this.boxCells[j].push(P)},Lt.prototype._insertCircleCell=function(f,y,m,b,j,P){this.circleCells[j].push(P)},Lt.prototype._query=function(f,y,m,b,j,P){if(m<0||f>this.width||b<0||y>this.height)return!j&&[];var F=[];if(f<=0&&y<=0&&this.width<=m&&this.height<=b){if(j)return!0;for(var U=0;U<this.boxKeys.length;U++)F.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(var $=0;$<this.circleKeys.length;$++){var J=this.circles[3*$],te=this.circles[3*$+1],ue=this.circles[3*$+2];F.push({key:this.circleKeys[$],x1:J-ue,y1:te-ue,x2:J+ue,y2:te+ue})}return P?F.filter(P):F}var Te={hitTest:j,seenUids:{box:{},circle:{}}};return this._forEachCell(f,y,m,b,this._queryCell,F,Te,P),j?F.length>0:F},Lt.prototype._queryCircle=function(f,y,m,b,j){var P=f-m,F=f+m,U=y-m,$=y+m;if(F<0||P>this.width||$<0||U>this.height)return!b&&[];var J=[],te={hitTest:b,circle:{x:f,y,radius:m},seenUids:{box:{},circle:{}}};return this._forEachCell(P,U,F,$,this._queryCellCircle,J,te,j),b?J.length>0:J},Lt.prototype.query=function(f,y,m,b,j){return this._query(f,y,m,b,!1,j)},Lt.prototype.hitTest=function(f,y,m,b,j){return this._query(f,y,m,b,!0,j)},Lt.prototype.hitTestCircle=function(f,y,m,b){return this._queryCircle(f,y,m,!0,b)},Lt.prototype._queryCell=function(f,y,m,b,j,P,F,U){var $=F.seenUids,J=this.boxCells[j];if(J!==null)for(var te=this.bboxes,ue=0,Te=J;ue<Te.length;ue+=1){var be=Te[ue];if(!$.box[be]){$.box[be]=!0;var _e=4*be;if(f<=te[_e+2]&&y<=te[_e+3]&&m>=te[_e+0]&&b>=te[_e+1]&&(!U||U(this.boxKeys[be]))){if(F.hitTest)return P.push(!0),!0;P.push({key:this.boxKeys[be],x1:te[_e],y1:te[_e+1],x2:te[_e+2],y2:te[_e+3]})}}}var ve=this.circleCells[j];if(ve!==null)for(var $e=this.circles,Fe=0,rt=ve;Fe<rt.length;Fe+=1){var et=rt[Fe];if(!$.circle[et]){$.circle[et]=!0;var it=3*et;if(this._circleAndRectCollide($e[it],$e[it+1],$e[it+2],f,y,m,b)&&(!U||U(this.circleKeys[et]))){if(F.hitTest)return P.push(!0),!0;var ft=$e[it],_t=$e[it+1],kt=$e[it+2];P.push({key:this.circleKeys[et],x1:ft-kt,y1:_t-kt,x2:ft+kt,y2:_t+kt})}}}},Lt.prototype._queryCellCircle=function(f,y,m,b,j,P,F,U){var $=F.circle,J=F.seenUids,te=this.boxCells[j];if(te!==null)for(var ue=this.bboxes,Te=0,be=te;Te<be.length;Te+=1){var _e=be[Te];if(!J.box[_e]){J.box[_e]=!0;var ve=4*_e;if(this._circleAndRectCollide($.x,$.y,$.radius,ue[ve+0],ue[ve+1],ue[ve+2],ue[ve+3])&&(!U||U(this.boxKeys[_e])))return P.push(!0),!0}}var $e=this.circleCells[j];if($e!==null)for(var Fe=this.circles,rt=0,et=$e;rt<et.length;rt+=1){var it=et[rt];if(!J.circle[it]){J.circle[it]=!0;var ft=3*it;if(this._circlesCollide(Fe[ft],Fe[ft+1],Fe[ft+2],$.x,$.y,$.radius)&&(!U||U(this.circleKeys[it])))return P.push(!0),!0}}},Lt.prototype._forEachCell=function(f,y,m,b,j,P,F,U){for(var $=this._convertToXCellCoord(f),J=this._convertToYCellCoord(y),te=this._convertToXCellCoord(m),ue=this._convertToYCellCoord(b),Te=$;Te<=te;Te++)for(var be=J;be<=ue;be++){var _e=this.xCellCount*be+Te;if(j.call(this,f,y,m,b,_e,P,F,U))return}},Lt.prototype._convertToXCellCoord=function(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))},Lt.prototype._convertToYCellCoord=function(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))},Lt.prototype._circlesCollide=function(f,y,m,b,j,P){var F=b-f,U=j-y,$=m+P;return $*$>F*F+U*U},Lt.prototype._circleAndRectCollide=function(f,y,m,b,j,P,F){var U=(P-b)/2,$=Math.abs(f-(b+U));if($>U+m)return!1;var J=(F-j)/2,te=Math.abs(y-(j+J));if(te>J+m)return!1;if($<=U||te<=J)return!0;var ue=$-U,Te=te-J;return ue*ue+Te*Te<=m*m};var pr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Hn(f,y){for(var m=0;m<f;m++){var b=y.length;y.resize(b+4),y.float32.set(pr,3*b)}}function Qi(f,y,m){var b=y[0],j=y[1];return f[0]=m[0]*b+m[4]*j+m[12],f[1]=m[1]*b+m[5]*j+m[13],f[3]=m[3]*b+m[7]*j+m[15],f}var lr=function(f,y,m){y===void 0&&(y=new Lt(f.width+200,f.height+200,25)),m===void 0&&(m=new Lt(f.width+200,f.height+200,25)),this.transform=f,this.grid=y,this.ignoredGrid=m,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+100,this.screenBottomBoundary=f.height+100,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200};function Kr(f,y,m){f[y+4]=m?1:0}function Jn(f,y,m){return y*(a.EXTENT/(f.tileSize*Math.pow(2,m-f.tileID.overscaledZ)))}lr.prototype.placeCollisionBox=function(f,y,m,b,j){var P=this.projectAndGetPerspectiveRatio(b,f.anchorPointX,f.anchorPointY),F=m*P.perspectiveRatio,U=f.x1*F+P.point.x,$=f.y1*F+P.point.y,J=f.x2*F+P.point.x,te=f.y2*F+P.point.y;return!this.isInsideGrid(U,$,J,te)||!y&&this.grid.hitTest(U,$,J,te,j)?{box:[],offscreen:!1}:{box:[U,$,J,te],offscreen:this.isOffscreen(U,$,J,te)}},lr.prototype.approximateTileDistance=function(f,y,m,b,j){var P=j?1:b/this.pitchfactor,F=f.lastSegmentViewportDistance*m;return f.prevTileDistance+F+(P-1)*F*Math.abs(Math.sin(y))},lr.prototype.placeCollisionCircles=function(f,y,m,b,j,P,F,U,$,J,te,ue,Te){var be=[],_e=this.projectAnchor($,j.anchorX,j.anchorY),ve=U/24,$e=j.lineOffsetX*U,Fe=j.lineOffsetY*U,rt=new a.Point(j.anchorX,j.anchorY),et=kn(ve,F,$e,Fe,!1,qt(rt,J).point,rt,j,P,J,{},!0),it=!1,ft=!1,_t=!0,kt=_e.perspectiveRatio*b,an=1/(b*m),Wt=0,un=0;et&&(Wt=this.approximateTileDistance(et.first.tileDistance,et.first.angle,an,_e.cameraDistance,ue),un=this.approximateTileDistance(et.last.tileDistance,et.last.angle,an,_e.cameraDistance,ue));for(var Zt=0;Zt<f.length;Zt+=5){var xn=f[Zt],Qt=f[Zt+1],jn=f[Zt+2],Gn=f[Zt+3];if(!et||Gn<-Wt||Gn>un)Kr(f,Zt,!1);else{var Fn=this.projectPoint($,xn,Qt),Rn=jn*kt;if(be.length>0){var Mr=Fn.x-be[be.length-4],Zn=Fn.y-be[be.length-3];if(Rn*Rn*2>Mr*Mr+Zn*Zn&&Zt+8<f.length){var wn=f[Zt+8];if(wn>-Wt&&wn<un){Kr(f,Zt,!1);continue}}}var yi=Zt/5;be.push(Fn.x,Fn.y,Rn,yi),Kr(f,Zt,!0);var Er=Fn.x-Rn,tr=Fn.y-Rn,fa=Fn.x+Rn,Gi=Fn.y+Rn;if(_t=_t&&this.isOffscreen(Er,tr,fa,Gi),ft=ft||this.isInsideGrid(Er,tr,fa,Gi),!y&&this.grid.hitTestCircle(Fn.x,Fn.y,Rn,Te)){if(!te)return{circles:[],offscreen:!1};it=!0}}}return{circles:it||!ft?[]:be,offscreen:_t}},lr.prototype.queryRenderedSymbols=function(f){if(f.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var y=[],m=1/0,b=1/0,j=-1/0,P=-1/0,F=0,U=f;F<U.length;F+=1){var $=U[F],J=new a.Point($.x+100,$.y+100);m=Math.min(m,J.x),b=Math.min(b,J.y),j=Math.max(j,J.x),P=Math.max(P,J.y),y.push(J)}for(var te={},ue={},Te=0,be=this.grid.query(m,b,j,P).concat(this.ignoredGrid.query(m,b,j,P));Te<be.length;Te+=1){var _e=be[Te],ve=_e.key;if(te[ve.bucketInstanceId]===void 0&&(te[ve.bucketInstanceId]={}),!te[ve.bucketInstanceId][ve.featureIndex]){var $e=[new a.Point(_e.x1,_e.y1),new a.Point(_e.x2,_e.y1),new a.Point(_e.x2,_e.y2),new a.Point(_e.x1,_e.y2)];a.polygonIntersectsPolygon(y,$e)&&(te[ve.bucketInstanceId][ve.featureIndex]=!0,ue[ve.bucketInstanceId]===void 0&&(ue[ve.bucketInstanceId]=[]),ue[ve.bucketInstanceId].push(ve.featureIndex))}}return ue},lr.prototype.insertCollisionBox=function(f,y,m,b,j){var P={bucketInstanceId:m,featureIndex:b,collisionGroupID:j};(y?this.ignoredGrid:this.grid).insert(P,f[0],f[1],f[2],f[3])},lr.prototype.insertCollisionCircles=function(f,y,m,b,j){for(var P=y?this.ignoredGrid:this.grid,F={bucketInstanceId:m,featureIndex:b,collisionGroupID:j},U=0;U<f.length;U+=4)P.insertCircle(F,f[U],f[U+1],f[U+2])},lr.prototype.projectAnchor=function(f,y,m){var b=[y,m,0,1];return Qi(b,b,f),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5,cameraDistance:b[3]}},lr.prototype.projectPoint=function(f,y,m){var b=[y,m,0,1];return Qi(b,b,f),new a.Point((b[0]/b[3]+1)/2*this.transform.width+100,(-b[1]/b[3]+1)/2*this.transform.height+100)},lr.prototype.projectAndGetPerspectiveRatio=function(f,y,m){var b=[y,m,0,1];return Qi(b,b,f),{point:new a.Point((b[0]/b[3]+1)/2*this.transform.width+100,(-b[1]/b[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}},lr.prototype.isOffscreen=function(f,y,m,b){return m<100||f>=this.screenRightBoundary||b<100||y>this.screenBottomBoundary},lr.prototype.isInsideGrid=function(f,y,m,b){return m>=0&&f<this.gridRightBoundary&&b>=0&&y<this.gridBottomBoundary};var ii=function(f,y,m,b){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?y:-y))):b&&m?1:0,this.placed=m};ii.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var aa=function(f,y,m,b,j){this.text=new ii(f?f.text:null,y,m,j),this.icon=new ii(f?f.icon:null,y,b,j)};aa.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ki=function(f,y,m){this.text=f,this.icon=y,this.skipFade=m},uo=function(f,y,m,b,j){this.bucketInstanceId=f,this.featureIndex=y,this.sourceLayerIndex=m,this.bucketIndex=b,this.tileID=j},Ji=function(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}};function To(f,y,m,b,j){var P=a.getAnchorAlignment(f),F=-(P.horizontalAlign-.5)*y,U=-(P.verticalAlign-.5)*m,$=a.evaluateVariableOffset(f,b);return new a.Point(F+$[0]*j,U+$[1]*j)}function ko(f,y,m,b,j,P){var F=f.x1,U=f.x2,$=f.y1,J=f.y2,te=f.anchorPointX,ue=f.anchorPointY,Te=new a.Point(y,m);return b&&Te._rotate(j?P:-P),{x1:F+Te.x,y1:$+Te.y,x2:U+Te.x,y2:J+Te.y,anchorPointX:te,anchorPointY:ue}}Ji.prototype.get=function(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){var y=++this.maxGroupID;this.collisionGroups[f]={ID:y,predicate:function(m){return m.collisionGroupID===y}}}return this.collisionGroups[f]};var ce=function(f,y,m,b){this.transform=f.clone(),this.collisionIndex=new lr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Ji(m),this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}};function Se(f,y,m,b,j){f.emplaceBack(y?1:0,m?1:0,b||0,j||0),f.emplaceBack(y?1:0,m?1:0,b||0,j||0),f.emplaceBack(y?1:0,m?1:0,b||0,j||0),f.emplaceBack(y?1:0,m?1:0,b||0,j||0)}ce.prototype.placeLayerTile=function(f,y,m,b){var j=y.getBucket(f),P=y.latestFeatureIndex;if(j&&P&&f.id===j.layerIds[0]){var F=y.collisionBoxArray,U=j.layers[0].layout,$=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),J=y.tileSize/a.EXTENT,te=this.transform.calculatePosMatrix(y.tileID.toUnwrapped()),ue=en(te,U.get("text-pitch-alignment")==="map",U.get("text-rotation-alignment")==="map",this.transform,Jn(y,1,this.transform.zoom)),Te=en(te,U.get("icon-pitch-alignment")==="map",U.get("icon-rotation-alignment")==="map",this.transform,Jn(y,1,this.transform.zoom));this.retainedQueryData[j.bucketInstanceId]=new uo(j.bucketInstanceId,P,j.sourceLayerIndex,j.index,y.tileID),this.placeLayerBucket(j,te,ue,Te,$,J,m,y.holdingForFade(),b,F)}},ce.prototype.attemptAnchorPlacement=function(f,y,m,b,j,P,F,U,$,J,te,ue,Te,be,_e){var ve,$e=[ue.textOffset0,ue.textOffset1],Fe=To(f,m,b,$e,j),rt=this.collisionIndex.placeCollisionBox(ko(y,Fe.x,Fe.y,P,F,this.transform.angle),te,U,$,J.predicate);if(!(_e&&this.collisionIndex.placeCollisionBox(ko(_e,Fe.x,Fe.y,P,F,this.transform.angle),te,U,$,J.predicate).box.length===0)&&rt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID].text&&(ve=this.prevPlacement.variableOffsets[ue.crossTileID].anchor),this.variableOffsets[ue.crossTileID]={textOffset:$e,width:m,height:b,anchor:f,textBoxScale:j,prevAnchor:ve},this.markUsedJustification(Te,f,ue,be),Te.allowVerticalPlacement&&(this.markUsedOrientation(Te,be,ue),this.placedOrientations[ue.crossTileID]=be),{shift:Fe,placedGlyphBoxes:rt}},ce.prototype.placeLayerBucket=function(f,y,m,b,j,P,F,U,$,J){var te=this,ue=f.layers[0].layout,Te=a.evaluateSizeForZoom(f.textSizeData,this.transform.zoom),be=ue.get("text-optional"),_e=ue.get("icon-optional"),ve=ue.get("text-allow-overlap"),$e=ue.get("icon-allow-overlap"),Fe=ve&&($e||!f.hasIconData()||_e),rt=$e&&(ve||!f.hasTextData()||be),et=this.collisionGroups.get(f.sourceID),it=ue.get("text-rotation-alignment")==="map",ft=ue.get("text-pitch-alignment")==="map",_t=ue.get("icon-text-fit")!=="none",kt=ue.get("symbol-z-order")==="viewport-y";!f.collisionArrays&&J&&f.deserializeCollisionBoxes(J);var an=function(Qt,jn){if(!$[Qt.crossTileID])if(U)te.placements[Qt.crossTileID]=new ki(!1,!1,!1);else{var Gn,Fn=!1,Rn=!1,Mr=!0,Zn=null,wn={box:null,offscreen:null},yi={box:null,offscreen:null},Er=null,tr=null,fa=0,Gi=0,si=0;jn.textFeatureIndex&&(fa=jn.textFeatureIndex),jn.verticalTextFeatureIndex&&(Gi=jn.verticalTextFeatureIndex);var Za=jn.textBox;if(Za){var Oo=function(li){var kr=a.WritingMode.horizontal;if(f.allowVerticalPlacement&&!li&&te.prevPlacement){var zr=te.prevPlacement.placedOrientations[Qt.crossTileID];zr&&(te.placedOrientations[Qt.crossTileID]=zr,kr=zr,te.markUsedOrientation(f,kr,Qt))}return kr},cs=function(li,kr){if(f.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&jn.verticalTextBox)for(var zr=0,La=f.writingModes;zr<La.length&&(La[zr]===a.WritingMode.vertical?(wn=kr(),yi=wn):wn=li(),!(wn&&wn.box&&wn.box.length));zr+=1);else wn=li()};if(ue.get("text-variable-anchor")){var la=ue.get("text-variable-anchor");if(te.prevPlacement&&te.prevPlacement.variableOffsets[Qt.crossTileID]){var js=te.prevPlacement.variableOffsets[Qt.crossTileID];la.indexOf(js.anchor)>0&&(la=la.filter((function(li){return li!==js.anchor}))).unshift(js.anchor)}var Ko=function(li,kr,zr){for(var La=li.x2-li.x1,no=li.y2-li.y1,va=Qt.textBoxScale,za=_t&&!$e?kr:null,xa={box:[],offscreen:!1},Ro=ve?2*la.length:la.length,Js=0;Js<Ro;++Js){var Yl=la[Js%la.length],qc=Js>=la.length,vo=te.attemptAnchorPlacement(Yl,li,La,no,va,it,ft,P,y,et,qc,Qt,f,zr,za);if(vo&&(xa=vo.placedGlyphBoxes)&&xa.box&&xa.box.length){Fn=!0,Zn=vo.shift;break}}return xa};cs((function(){return Ko(Za,jn.iconBox,a.WritingMode.horizontal)}),(function(){var li=jn.verticalTextBox,kr=wn&&wn.box&&wn.box.length;return f.allowVerticalPlacement&&!kr&&Qt.numVerticalGlyphVertices>0&&li?Ko(li,jn.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}})),wn&&(Fn=wn.box,Mr=wn.offscreen);var Cl=Oo(wn&&wn.box);if(!Fn&&te.prevPlacement){var yo=te.prevPlacement.variableOffsets[Qt.crossTileID];yo&&(te.variableOffsets[Qt.crossTileID]=yo,te.markUsedJustification(f,yo.anchor,Qt,Cl))}}else{var Qd=function(li,kr){var zr=te.collisionIndex.placeCollisionBox(li,ue.get("text-allow-overlap"),P,y,et.predicate);return zr&&zr.box&&zr.box.length&&(te.markUsedOrientation(f,kr,Qt),te.placedOrientations[Qt.crossTileID]=kr),zr};cs((function(){return Qd(Za,a.WritingMode.horizontal)}),(function(){var li=jn.verticalTextBox;return f.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&li?Qd(li,a.WritingMode.vertical):{box:null,offscreen:null}})),Oo(wn&&wn.box&&wn.box.length)}}Fn=(Gn=wn)&&Gn.box&&Gn.box.length>0,Mr=Gn&&Gn.offscreen;var As=jn.textCircles;if(As){var Yo=f.text.placedSymbolArray.get(Qt.centerJustifiedTextSymbolIndex),Vc=a.evaluateSizeForFeature(f.textSizeData,Te,Yo);Er=te.collisionIndex.placeCollisionCircles(As,ue.get("text-allow-overlap"),j,P,Yo,f.lineVertexArray,f.glyphOffsetArray,Vc,y,m,F,ft,et.predicate),Fn=ue.get("text-allow-overlap")||Er.circles.length>0,Mr=Mr&&Er.offscreen}if(jn.iconFeatureIndex&&(si=jn.iconFeatureIndex),jn.iconBox){var Qs=function(li){var kr=_t&&Zn?ko(li,Zn.x,Zn.y,it,ft,te.transform.angle):li;return te.collisionIndex.placeCollisionBox(kr,ue.get("icon-allow-overlap"),P,y,et.predicate)};Rn=yi&&yi.box&&yi.box.length&&jn.verticalIconBox?(tr=Qs(jn.verticalIconBox)).box.length>0:(tr=Qs(jn.iconBox)).box.length>0,Mr=Mr&&tr.offscreen}var Tl=be||Qt.numHorizontalGlyphVertices===0&&Qt.numVerticalGlyphVertices===0,Ns=_e||Qt.numIconVertices===0;Tl||Ns?Ns?Tl||(Rn=Rn&&Fn):Fn=Rn&&Fn:Rn=Fn=Rn&&Fn,Fn&&Gn&&Gn.box&&(yi&&yi.box&&Gi?te.collisionIndex.insertCollisionBox(Gn.box,ue.get("text-ignore-placement"),f.bucketInstanceId,Gi,et.ID):te.collisionIndex.insertCollisionBox(Gn.box,ue.get("text-ignore-placement"),f.bucketInstanceId,fa,et.ID)),Rn&&tr&&te.collisionIndex.insertCollisionBox(tr.box,ue.get("icon-ignore-placement"),f.bucketInstanceId,si,et.ID),Fn&&Er&&te.collisionIndex.insertCollisionCircles(Er.circles,ue.get("text-ignore-placement"),f.bucketInstanceId,fa,et.ID),te.placements[Qt.crossTileID]=new ki(Fn||Fe,Rn||rt,Mr||f.justReloaded),$[Qt.crossTileID]=!0}};if(kt)for(var Wt=f.getSortedSymbolIndexes(this.transform.angle),un=Wt.length-1;un>=0;--un){var Zt=Wt[un];an(f.symbolInstances.get(Zt),f.collisionArrays[Zt])}else for(var xn=0;xn<f.symbolInstances.length;++xn)an(f.symbolInstances.get(xn),f.collisionArrays[xn]);f.justReloaded=!1},ce.prototype.markUsedJustification=function(f,y,m,b){var j,P={left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex};j=b===a.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:P[a.getAnchorJustification(y)];for(var F=0,U=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];F<U.length;F+=1){var $=U[F];$>=0&&(f.text.placedSymbolArray.get($).crossTileID=j>=0&&$!==j?0:m.crossTileID)}},ce.prototype.markUsedOrientation=function(f,y,m){for(var b=y===a.WritingMode.horizontal||y===a.WritingMode.horizontalOnly?y:0,j=y===a.WritingMode.vertical?y:0,P=0,F=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];P<F.length;P+=1){var U=F[P];f.text.placedSymbolArray.get(U).placedOrientation=b}m.verticalPlacedTextSymbolIndex&&(f.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=j)},ce.prototype.commit=function(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;var y=this.prevPlacement,m=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;var b=y?y.symbolFadeChange(f):1,j=y?y.opacities:{},P=y?y.variableOffsets:{},F=y?y.placedOrientations:{};for(var U in this.placements){var $=this.placements[U],J=j[U];J?(this.opacities[U]=new aa(J,b,$.text,$.icon),m=m||$.text!==J.text.placed||$.icon!==J.icon.placed):(this.opacities[U]=new aa(null,b,$.text,$.icon,$.skipFade),m=m||$.text||$.icon)}for(var te in j){var ue=j[te];if(!this.opacities[te]){var Te=new aa(ue,b,!1,!1);Te.isHidden()||(this.opacities[te]=Te,m=m||ue.text.placed||ue.icon.placed)}}for(var be in P)this.variableOffsets[be]||!this.opacities[be]||this.opacities[be].isHidden()||(this.variableOffsets[be]=P[be]);for(var _e in F)this.placedOrientations[_e]||!this.opacities[_e]||this.opacities[_e].isHidden()||(this.placedOrientations[_e]=F[_e]);m?this.lastPlacementChangeTime=f:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:f)},ce.prototype.updateLayerOpacities=function(f,y){for(var m={},b=0,j=y;b<j.length;b+=1){var P=j[b],F=P.getBucket(f);F&&P.latestFeatureIndex&&f.id===F.layerIds[0]&&this.updateBucketOpacities(F,m,P.collisionBoxArray)}},ce.prototype.updateBucketOpacities=function(f,y,m){var b=this;f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear(),f.hasIconCollisionCircleData()&&f.iconCollisionCircle.collisionVertexArray.clear(),f.hasTextCollisionCircleData()&&f.textCollisionCircle.collisionVertexArray.clear();var j=f.layers[0].layout,P=new aa(null,0,!1,!1,!0),F=j.get("text-allow-overlap"),U=j.get("icon-allow-overlap"),$=j.get("text-variable-anchor"),J=j.get("text-rotation-alignment")==="map",te=j.get("text-pitch-alignment")==="map",ue=j.get("icon-text-fit")!=="none",Te=new aa(null,0,F&&(U||!f.hasIconData()||j.get("icon-optional")),U&&(F||!f.hasTextData()||j.get("text-optional")),!0);!f.collisionArrays&&m&&(f.hasIconCollisionBoxData()||f.hasIconCollisionCircleData()||f.hasTextCollisionBoxData()||f.hasTextCollisionCircleData())&&f.deserializeCollisionBoxes(m);for(var be=function($e,Fe,rt){for(var et=0;et<Fe/4;et++)$e.opacityVertexArray.emplaceBack(rt)},_e=function($e){var Fe=f.symbolInstances.get($e),rt=Fe.numHorizontalGlyphVertices,et=Fe.numVerticalGlyphVertices,it=Fe.crossTileID,ft=y[it],_t=b.opacities[it];ft?_t=P:_t||(_t=Te,b.opacities[it]=_t),y[it]=!0;var kt=rt>0||et>0,an=Fe.numIconVertices>0,Wt=b.placedOrientations[Fe.crossTileID],un=Wt===a.WritingMode.vertical,Zt=Wt===a.WritingMode.horizontal||Wt===a.WritingMode.horizontalOnly;if(kt){var xn=ea(_t.text),Qt=un?$i:xn;be(f.text,rt,Qt);var jn=Zt?$i:xn;be(f.text,et,jn);var Gn=_t.text.isHidden();[Fe.rightJustifiedTextSymbolIndex,Fe.centerJustifiedTextSymbolIndex,Fe.leftJustifiedTextSymbolIndex].forEach((function(la){la>=0&&(f.text.placedSymbolArray.get(la).hidden=Gn||un?1:0)})),Fe.verticalPlacedTextSymbolIndex>=0&&(f.text.placedSymbolArray.get(Fe.verticalPlacedTextSymbolIndex).hidden=Gn||Zt?1:0);var Fn=b.variableOffsets[Fe.crossTileID];Fn&&b.markUsedJustification(f,Fn.anchor,Fe,Wt);var Rn=b.placedOrientations[Fe.crossTileID];Rn&&(b.markUsedJustification(f,"left",Fe,Rn),b.markUsedOrientation(f,Rn,Fe))}if(an){var Mr=ea(_t.icon),Zn=!(ue&&Fe.verticalPlacedIconSymbolIndex&&un);if(Fe.placedIconSymbolIndex>=0){var wn=Zn?Mr:$i;be(f.icon,Fe.numIconVertices,wn),f.icon.placedSymbolArray.get(Fe.placedIconSymbolIndex).hidden=_t.icon.isHidden()}if(Fe.verticalPlacedIconSymbolIndex>=0){var yi=Zn?$i:Mr;be(f.icon,Fe.numVerticalIconVertices,yi),f.icon.placedSymbolArray.get(Fe.verticalPlacedIconSymbolIndex).hidden=_t.icon.isHidden()}}if(f.hasIconCollisionBoxData()||f.hasIconCollisionCircleData()||f.hasTextCollisionBoxData()||f.hasTextCollisionCircleData()){var Er=f.collisionArrays[$e];if(Er){var tr=new a.Point(0,0);if(Er.textBox||Er.verticalTextBox){var fa=!0;if($){var Gi=b.variableOffsets[it];Gi?(tr=To(Gi.anchor,Gi.width,Gi.height,Gi.textOffset,Gi.textBoxScale),J&&tr._rotate(te?b.transform.angle:-b.transform.angle)):fa=!1}Er.textBox&&Se(f.textCollisionBox.collisionVertexArray,_t.text.placed,!fa||un,tr.x,tr.y),Er.verticalTextBox&&Se(f.textCollisionBox.collisionVertexArray,_t.text.placed,!fa||Zt,tr.x,tr.y)}var si=!!(!Zt&&Er.verticalIconBox);Er.iconBox&&Se(f.iconCollisionBox.collisionVertexArray,_t.icon.placed,si,ue?tr.x:0,ue?tr.y:0),Er.verticalIconBox&&Se(f.iconCollisionBox.collisionVertexArray,_t.icon.placed,!si,ue?tr.x:0,ue?tr.y:0);var Za=Er.textCircles;if(Za&&f.hasTextCollisionCircleData())for(var Oo=0;Oo<Za.length;Oo+=5){var cs=ft||Za[Oo+4]===0;Se(f.textCollisionCircle.collisionVertexArray,_t.text.placed,cs)}}}},ve=0;ve<f.symbolInstances.length;ve++)_e(ve);f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.hasIconCollisionCircleData()&&f.iconCollisionCircle.collisionVertexBuffer&&f.iconCollisionCircle.collisionVertexBuffer.updateData(f.iconCollisionCircle.collisionVertexArray),f.hasTextCollisionCircleData()&&f.textCollisionCircle.collisionVertexBuffer&&f.textCollisionCircle.collisionVertexBuffer.updateData(f.textCollisionCircle.collisionVertexArray)},ce.prototype.symbolFadeChange=function(f){return this.fadeDuration===0?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ce.prototype.zoomAdjustment=function(f){return Math.max(0,(this.transform.zoom-f)/1.5)},ce.prototype.hasTransitions=function(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration},ce.prototype.stillRecent=function(f,y){var m=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*m>f},ce.prototype.setStale=function(){this.stale=!0};var qe=Math.pow(2,25),pt=Math.pow(2,24),Ht=Math.pow(2,17),hn=Math.pow(2,16),Pn=Math.pow(2,9),Hi=Math.pow(2,8),oa=Math.pow(2,1);function ea(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;var y=f.placed?1:0,m=Math.floor(127*f.opacity);return m*qe+y*pt+m*Ht+y*hn+m*Pn+y*Hi+m*oa+y}var $i=0,Rd=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Rd.prototype.continuePlacement=function(f,y,m,b,j){for(;this._currentTileIndex<f.length;){var P=f[this._currentTileIndex];if(y.placeLayerTile(b,P,m,this._seenCrossTileIDs),this._currentTileIndex++,j())return!0}};var fl=function(f,y,m,b,j,P,F){this.placement=new ce(f,j,P,F),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1};fl.prototype.isDone=function(){return this._done},fl.prototype.continuePlacement=function(f,y,m){for(var b=this,j=a.browser.now(),P=function(){var $=a.browser.now()-j;return!b._forceFullPlacement&&$>2};this._currentPlacementIndex>=0;){var F=y[f[this._currentPlacementIndex]],U=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=U)&&(!F.maxzoom||F.maxzoom>U)){if(this._inProgressLayer||(this._inProgressLayer=new Rd),this._inProgressLayer.continuePlacement(m[F.source],this.placement,this._showCollisionBoxes,F,P))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},fl.prototype.commit=function(f){return this.placement.commit(f),this.placement};var pl=512/a.EXTENT/2,Ss=function(f,y,m){this.tileID=f,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(var b=0;b<y.length;b++){var j=y.get(b),P=j.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:j.crossTileID,coord:this.getScaledCoordinates(j,f)})}};Ss.prototype.getScaledCoordinates=function(f,y){var m=y.canonical.z-this.tileID.canonical.z,b=pl/Math.pow(2,m);return{x:Math.floor((y.canonical.x*a.EXTENT+f.anchorX)*b),y:Math.floor((y.canonical.y*a.EXTENT+f.anchorY)*b)}},Ss.prototype.findMatches=function(f,y,m){for(var b=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z),j=0;j<f.length;j++){var P=f.get(j);if(!P.crossTileID){var F=this.indexedSymbolInstances[P.key];if(F)for(var U=this.getScaledCoordinates(P,y),$=0,J=F;$<J.length;$+=1){var te=J[$];if(Math.abs(te.coord.x-U.x)<=b&&Math.abs(te.coord.y-U.y)<=b&&!m[te.crossTileID]){m[te.crossTileID]=!0,P.crossTileID=te.crossTileID;break}}}}};var Au=function(){this.maxCrossTileID=0};Au.prototype.generate=function(){return++this.maxCrossTileID};var ml=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ml.prototype.handleWrapJump=function(f){var y=Math.round((f-this.lng)/360);if(y!==0)for(var m in this.indexes){var b=this.indexes[m],j={};for(var P in b){var F=b[P];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+y),j[F.tileID.key]=F}this.indexes[m]=j}this.lng=f},ml.prototype.addBucket=function(f,y,m){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(var b=0;b<y.symbolInstances.length;b++)y.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]={});var j=this.usedCrossTileIDs[f.overscaledZ];for(var P in this.indexes){var F=this.indexes[P];if(Number(P)>f.overscaledZ)for(var U in F){var $=F[U];$.tileID.isChildOf(f)&&$.findMatches(y.symbolInstances,f,j)}else{var J=F[f.scaledTo(Number(P)).key];J&&J.findMatches(y.symbolInstances,f,j)}}for(var te=0;te<y.symbolInstances.length;te++){var ue=y.symbolInstances.get(te);ue.crossTileID||(ue.crossTileID=m.generate(),j[ue.crossTileID]=!0)}return this.indexes[f.overscaledZ]===void 0&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new Ss(f,y.symbolInstances,y.bucketInstanceId),!0},ml.prototype.removeBucketCrossTileIDs=function(f,y){for(var m in y.indexedSymbolInstances)for(var b=0,j=y.indexedSymbolInstances[m];b<j.length;b+=1){var P=j[b];delete this.usedCrossTileIDs[f][P.crossTileID]}},ml.prototype.removeStaleBuckets=function(f){var y=!1;for(var m in this.indexes){var b=this.indexes[m];for(var j in b)f[b[j].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,b[j]),delete b[j],y=!0)}return y};var jc=function(){this.layerIndexes={},this.crossTileIDs=new Au,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};jc.prototype.addLayer=function(f,y,m){var b=this.layerIndexes[f.id];b===void 0&&(b=this.layerIndexes[f.id]=new ml);var j=!1,P={};b.handleWrapJump(m);for(var F=0,U=y;F<U.length;F+=1){var $=U[F],J=$.getBucket(f);J&&f.id===J.layerIds[0]&&(J.bucketInstanceId||(J.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket($.tileID,J,this.crossTileIDs)&&(j=!0),P[J.bucketInstanceId]=!0)}return b.removeStaleBuckets(P)&&(j=!0),j},jc.prototype.pruneUnusedLayers=function(f){var y={};for(var m in f.forEach((function(b){y[b]=!0})),this.layerIndexes)y[m]||delete this.layerIndexes[m]};var gl=function(f,y){return a.emitValidationErrors(f,y&&y.filter((function(m){return m.identifier!=="source.canvas"})))},jo=a.pick(Ne,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),zl=a.pick(Ne,["setCenter","setZoom","setBearing","setPitch"]),Ac=(function(){var f={},y=a.styleSpec.$version;for(var m in a.styleSpec.$root){var b=a.styleSpec.$root[m];if(b.required){var j=null;(j=m==="version"?y:b.type==="array"?[]:{})!=null&&(f[m]=j)}}return f})(),ei=(function(f){function y(m,b){var j=this;b===void 0&&(b={}),f.call(this),this.map=m,this.dispatcher=new ze((Y||(Y=new Z),Y),this),this.imageManager=new q,this.imageManager.setEventedParent(this),this.glyphManager=new he(m._requestManager,b.localIdeographFontFamily),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new jc,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var P=this;this._rtlTextPluginCallback=y.registerForPluginStateChange((function(F){var U={pluginStatus:F.pluginStatus,pluginURL:F.pluginURL};P.dispatcher.broadcast("syncRTLPluginState",U,(function($,J){if(a.triggerPluginCompletionEvent($),J&&J.every((function(ue){return ue})))for(var te in P.sourceCaches)P.sourceCaches[te].reload()}))})),this.on("data",(function(F){if(F.dataType==="source"&&F.sourceDataType==="metadata"){var U=j.sourceCaches[F.sourceId];if(U){var $=U.getSource();if($&&$.vectorLayerIds)for(var J in j._layers){var te=j._layers[J];te.source===$.id&&j._validateLayer(te)}}}}))}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.loadURL=function(m,b){var j=this;b===void 0&&(b={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var P=typeof b.validate=="boolean"?b.validate:!a.isGoongURL(m);m=this.map._requestManager.normalizeStyleURL(m,b.accessToken);var F=this.map._requestManager.transformRequest(m,a.ResourceType.Style);this._request=a.getJSON(F,(function(U,$){j._request=null,U?j.fire(new a.ErrorEvent(U)):$&&j._load($,P)}))},y.prototype.loadJSON=function(m,b){var j=this;b===void 0&&(b={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame((function(){j._request=null,j._load(m,b.validate!==!1)}))},y.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Ac,!1)},y.prototype._load=function(m,b){var j=this;if(!b||!gl(this,a.validateStyle(m))){for(var P in this._loaded=!0,this.stylesheet=m,m.sources)this.addSource(P,m.sources[P],{validate:!1});m.sprite?this._spriteRequest=(function(te,ue,Te){var be,_e,ve,$e=a.browser.devicePixelRatio>1?"@2x":"",Fe=a.getJSON(ue.transformRequest(ue.normalizeSpriteURL(te,$e,".json"),a.ResourceType.SpriteJSON),(function(it,ft){Fe=null,ve||(ve=it,be=ft,et())})),rt=a.getImage(ue.transformRequest(ue.normalizeSpriteURL(te,$e,".png"),a.ResourceType.SpriteImage),(function(it,ft){rt=null,ve||(ve=it,_e=ft,et())}));function et(){if(ve)Te(ve);else if(be&&_e){var it=a.browser.getImageData(_e),ft={};for(var _t in be){var kt=be[_t],an=kt.width,Wt=kt.height,un=kt.x,Zt=kt.y,xn=kt.sdf,Qt=kt.pixelRatio,jn=kt.stretchX,Gn=kt.stretchY,Fn=kt.content,Rn=new a.RGBAImage({width:an,height:Wt});a.RGBAImage.copy(it,Rn,{x:un,y:Zt},{x:0,y:0},{width:an,height:Wt}),ft[_t]={data:Rn,pixelRatio:Qt,sdf:xn,stretchX:jn,stretchY:Gn,content:Fn}}Te(null,ft)}}return{cancel:function(){Fe&&(Fe.cancel(),Fe=null),rt&&(rt.cancel(),rt=null)}}})(m.sprite,this.map._requestManager,(function(te,ue){if(j._spriteRequest=null,te)j.fire(new a.ErrorEvent(te));else if(ue)for(var Te in ue)j.imageManager.addImage(Te,ue[Te]);j.imageManager.setLoaded(!0),j.dispatcher.broadcast("setImages",j.imageManager.listImages()),j.fire(new a.Event("data",{dataType:"style"}))})):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs);var F=je(this.stylesheet.layers);this._order=F.map((function(te){return te.id})),this._layers={};for(var U=0,$=F;U<$.length;U+=1){var J=$[U];(J=a.createStyleLayer(J)).setEventedParent(this,{layer:{id:J.id}}),this._layers[J.id]=J}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Pe(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},y.prototype._validateLayer=function(m){var b=this.sourceCaches[m.source];if(b){var j=m.sourceLayer;if(j){var P=b.getSource();(P.type==="geojson"||P.vectorLayerIds&&P.vectorLayerIds.indexOf(j)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+j+'" does not exist on source "'+P.id+'" as specified by style layer "'+m.id+'"')))}}},y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var m in this.sourceCaches)if(!this.sourceCaches[m].loaded())return!1;return!!this.imageManager.isLoaded()},y.prototype._serializeLayers=function(m){for(var b=[],j=0,P=m;j<P.length;j+=1){var F=P[j],U=this._layers[F];U.type!=="custom"&&b.push(U.serialize())}return b},y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(var b in this._layers)if(this._layers[b].hasTransition())return!0;return!1},y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},y.prototype.update=function(m){if(this._loaded){var b=this._changed;if(this._changed){var j=Object.keys(this._updatedLayers),P=Object.keys(this._removedLayers);for(var F in(j.length||P.length)&&this._updateWorkerLayers(j,P),this._updatedSources){var U=this._updatedSources[F];U==="reload"?this._reloadSource(F):U==="clear"&&this._clearSource(F)}for(var $ in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[$].updateTransitions(m);this.light.updateTransitions(m),this._resetUpdates()}for(var J in this.sourceCaches)this.sourceCaches[J].used=!1;for(var te=0,ue=this._order;te<ue.length;te+=1){var Te=ue[te],be=this._layers[Te];be.recalculate(m,this.imageManager.listImages()),!be.isHidden(m.zoom)&&be.source&&(this.sourceCaches[be.source].used=!0)}this.light.recalculate(m),this.z=m.zoom,b&&this.fire(new a.Event("data",{dataType:"style"}))}},y.prototype._updateTilesForChangedImages=function(){var m=Object.keys(this._changedImages);if(m.length){for(var b in this.sourceCaches)this.sourceCaches[b].reloadTilesForDependencies(["icons","patterns"],m);this._changedImages={}}},y.prototype._updateWorkerLayers=function(m,b){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(m),removedIds:b})},y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},y.prototype.setState=function(m){var b=this;if(this._checkLoaded(),gl(this,a.validateStyle(m)))return!1;(m=a.clone$1(m)).layers=je(m.layers);var j=It(this.serialize(),m).filter((function(F){return!(F.command in zl)}));if(j.length===0)return!1;var P=j.filter((function(F){return!(F.command in jo)}));if(P.length>0)throw new Error("Unimplemented: "+P.map((function(F){return F.command})).join(", ")+".");return j.forEach((function(F){F.command!=="setTransition"&&b[F.command].apply(b,F.args)})),this.stylesheet=m,!0},y.prototype.addImage=function(m,b){if(this.getImage(m))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(m,b),this._changedImages[m]=!0,this._changed=!0,this.fire(new a.Event("data",{dataType:"style"}))},y.prototype.updateImage=function(m,b){this.imageManager.updateImage(m,b)},y.prototype.getImage=function(m){return this.imageManager.getImage(m)},y.prototype.removeImage=function(m){if(!this.getImage(m))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(m),this._changedImages[m]=!0,this._changed=!0,this.fire(new a.Event("data",{dataType:"style"}))},y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},y.prototype.addSource=function(m,b,j){var P=this;if(j===void 0&&(j={}),this._checkLoaded(),this.sourceCaches[m]!==void 0)throw new Error("There is already a source with this ID");if(!b.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(b).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(b.type)>=0)||!this._validate(a.validateStyle.source,"sources."+m,b,null,j)){this.map&&this.map._collectResourceTiming&&(b.collectResourceTiming=!0);var F=this.sourceCaches[m]=new Ja(m,b,this.dispatcher);F.style=this,F.setEventedParent(this,(function(){return{isSourceLoaded:P.loaded(),source:F.serialize(),sourceId:m}})),F.onAdd(this.map),this._changed=!0}},y.prototype.removeSource=function(m){if(this._checkLoaded(),this.sourceCaches[m]===void 0)throw new Error("There is no source with this ID");for(var b in this._layers)if(this._layers[b].source===m)return this.fire(new a.ErrorEvent(new Error('Source "'+m+'" cannot be removed while layer "'+b+'" is using it.')));var j=this.sourceCaches[m];delete this.sourceCaches[m],delete this._updatedSources[m],j.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:m})),j.setEventedParent(null),j.clearTiles(),j.onRemove&&j.onRemove(this.map),this._changed=!0},y.prototype.setGeoJSONSourceData=function(m,b){this._checkLoaded(),this.sourceCaches[m].getSource().setData(b),this._changed=!0},y.prototype.getSource=function(m){return this.sourceCaches[m]&&this.sourceCaches[m].getSource()},y.prototype.addLayer=function(m,b,j){j===void 0&&(j={}),this._checkLoaded();var P=m.id;if(this.getLayer(P))this.fire(new a.ErrorEvent(new Error('Layer with id "'+P+'" already exists on this map')));else{var F;if(m.type==="custom"){if(gl(this,a.validateCustomStyleLayer(m)))return;F=a.createStyleLayer(m)}else{if(typeof m.source=="object"&&(this.addSource(P,m.source),m=a.clone$1(m),m=a.extend(m,{source:P})),this._validate(a.validateStyle.layer,"layers."+P,m,{arrayIndex:-1},j))return;F=a.createStyleLayer(m),this._validateLayer(F),F.setEventedParent(this,{layer:{id:P}})}var U=b?this._order.indexOf(b):this._order.length;if(b&&U===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+b+'" does not exist on this map.')));else{if(this._order.splice(U,0,P),this._layerOrderChanged=!0,this._layers[P]=F,this._removedLayers[P]&&F.source&&F.type!=="custom"){var $=this._removedLayers[P];delete this._removedLayers[P],$.type!==F.type?this._updatedSources[F.source]="clear":(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause())}this._updateLayer(F),F.onAdd&&F.onAdd(this.map)}}},y.prototype.moveLayer=function(m,b){if(this._checkLoaded(),this._changed=!0,this._layers[m]){if(m!==b){var j=this._order.indexOf(m);this._order.splice(j,1);var P=b?this._order.indexOf(b):this._order.length;b&&P===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+b+'" does not exist on this map.'))):(this._order.splice(P,0,m),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be moved.")))},y.prototype.removeLayer=function(m){this._checkLoaded();var b=this._layers[m];if(b){b.setEventedParent(null);var j=this._order.indexOf(m);this._order.splice(j,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[m]=b,delete this._layers[m],delete this._updatedLayers[m],delete this._updatedPaintProps[m],b.onRemove&&b.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be removed.")))},y.prototype.getLayer=function(m){return this._layers[m]},y.prototype.setLayerZoomRange=function(m,b,j){this._checkLoaded();var P=this.getLayer(m);P?P.minzoom===b&&P.maxzoom===j||(b!=null&&(P.minzoom=b),j!=null&&(P.maxzoom=j),this._updateLayer(P)):this.fire(new a.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot have zoom extent.")))},y.prototype.setFilter=function(m,b,j){j===void 0&&(j={}),this._checkLoaded();var P=this.getLayer(m);if(P){if(!a.deepEqual(P.filter,b))return b==null?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(a.validateStyle.filter,"layers."+P.id+".filter",b,null,j)||(P.filter=a.clone$1(b),this._updateLayer(P)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be filtered.")))},y.prototype.getFilter=function(m){return a.clone$1(this.getLayer(m).filter)},y.prototype.setLayoutProperty=function(m,b,j,P){P===void 0&&(P={}),this._checkLoaded();var F=this.getLayer(m);F?a.deepEqual(F.getLayoutProperty(b),j)||(F.setLayoutProperty(b,j,P),this._updateLayer(F)):this.fire(new a.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getLayoutProperty=function(m,b){var j=this.getLayer(m);if(j)return j.getLayoutProperty(b);this.fire(new a.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style.")))},y.prototype.setPaintProperty=function(m,b,j,P){P===void 0&&(P={}),this._checkLoaded();var F=this.getLayer(m);F?a.deepEqual(F.getPaintProperty(b),j)||(F.setPaintProperty(b,j,P)&&this._updateLayer(F),this._changed=!0,this._updatedPaintProps[m]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be styled.")))},y.prototype.getPaintProperty=function(m,b){return this.getLayer(m).getPaintProperty(b)},y.prototype.setFeatureState=function(m,b){this._checkLoaded();var j=m.source,P=m.sourceLayer,F=this.sourceCaches[j];if(F!==void 0){var U=F.getSource().type;U==="geojson"&&P?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):U!=="vector"||P?(m.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),F.setFeatureState(P,m.id,b)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+j+"' does not exist in the map's style.")))},y.prototype.removeFeatureState=function(m,b){this._checkLoaded();var j=m.source,P=this.sourceCaches[j];if(P!==void 0){var F=P.getSource().type,U=F==="vector"?m.sourceLayer:void 0;F!=="vector"||U?b&&typeof m.id!="string"&&typeof m.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):P.removeFeatureState(U,m.id,b):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+j+"' does not exist in the map's style.")))},y.prototype.getFeatureState=function(m){this._checkLoaded();var b=m.source,j=m.sourceLayer,P=this.sourceCaches[b];if(P!==void 0){if(P.getSource().type!=="vector"||j)return m.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),P.getFeatureState(j,m.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},y.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},y.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,(function(m){return m.serialize()})),layers:this._serializeLayers(this._order)},(function(m){return m!==void 0}))},y.prototype._updateLayer=function(m){this._updatedLayers[m.id]=!0,m.source&&!this._updatedSources[m.source]&&this.sourceCaches[m.source].getSource().type!=="raster"&&(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause()),this._changed=!0},y.prototype._flattenAndSortRenderedFeatures=function(m){for(var b=this,j=function(un){return b._layers[un].type==="fill-extrusion"},P={},F=[],U=this._order.length-1;U>=0;U--){var $=this._order[U];if(j($)){P[$]=U;for(var J=0,te=m;J<te.length;J+=1){var ue=te[J][$];if(ue)for(var Te=0,be=ue;Te<be.length;Te+=1){var _e=be[Te];F.push(_e)}}}}F.sort((function(un,Zt){return Zt.intersectionZ-un.intersectionZ}));for(var ve=[],$e=this._order.length-1;$e>=0;$e--){var Fe=this._order[$e];if(j(Fe))for(var rt=F.length-1;rt>=0;rt--){var et=F[rt].feature;if(P[et.layer.id]<$e)break;ve.push(et),F.pop()}else for(var it=0,ft=m;it<ft.length;it+=1){var _t=ft[it][Fe];if(_t)for(var kt=0,an=_t;kt<an.length;kt+=1){var Wt=an[kt];ve.push(Wt.feature)}}}return ve},y.prototype.queryRenderedFeatures=function(m,b,j){b&&b.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",b.filter,null,b);var P={};if(b&&b.layers){if(!Array.isArray(b.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var F=0,U=b.layers;F<U.length;F+=1){var $=U[F],J=this._layers[$];if(!J)return this.fire(new a.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be queried for features."))),[];P[J.source]=!0}}var te=[];for(var ue in this.sourceCaches)b.layers&&!P[ue]||te.push(We(this.sourceCaches[ue],this._layers,m,b,j));return this.placement&&te.push((function(Te,be,_e,ve,$e,Fe){for(var rt={},et=$e.queryRenderedSymbols(_e),it=[],ft=0,_t=Object.keys(et).map(Number);ft<_t.length;ft+=1){var kt=_t[ft];it.push(Fe[kt])}it.sort(Nt);for(var an=function(){var Qt=un[Wt],jn=Qt.featureIndex.lookupSymbolFeatures(et[Qt.bucketInstanceId],Qt.bucketIndex,Qt.sourceLayerIndex,ve.filter,ve.layers,Te);for(var Gn in jn){var Fn=rt[Gn]=rt[Gn]||[],Rn=jn[Gn];Rn.sort((function(yi,Er){var tr=Qt.featureSortOrder;if(tr){var fa=tr.indexOf(yi.featureIndex);return tr.indexOf(Er.featureIndex)-fa}return Er.featureIndex-yi.featureIndex}));for(var Mr=0,Zn=Rn;Mr<Zn.length;Mr+=1){var wn=Zn[Mr];Fn.push(wn)}}},Wt=0,un=it;Wt<un.length;Wt+=1)an();var Zt=function(Qt){rt[Qt].forEach((function(jn){var Gn=jn.feature,Fn=Te[Qt],Rn=be[Fn.source].getFeatureState(Gn.layer["source-layer"],Gn.id);Gn.source=Gn.layer.source,Gn.layer["source-layer"]&&(Gn.sourceLayer=Gn.layer["source-layer"]),Gn.state=Rn}))};for(var xn in rt)Zt(xn);return rt})(this._layers,this.sourceCaches,m,b,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(te)},y.prototype.querySourceFeatures=function(m,b){b&&b.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",b.filter,null,b);var j=this.sourceCaches[m];return j?(function(P,F){for(var U=P.getRenderableIds().map((function(be){return P.getTileByID(be)})),$=[],J={},te=0;te<U.length;te++){var ue=U[te],Te=ue.tileID.canonical.key;J[Te]||(J[Te]=!0,ue.querySourceFeatures($,F))}return $})(j,b):[]},y.prototype.addSourceType=function(m,b,j){return y.getSourceType(m)?j(new Error('A source type called "'+m+'" already exists.')):(y.setSourceType(m,b),b.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:m,url:b.workerSourceURL},j):j(null,null))},y.prototype.getLight=function(){return this.light.getLight()},y.prototype.setLight=function(m,b){b===void 0&&(b={}),this._checkLoaded();var j=this.light.getLight(),P=!1;for(var F in m)if(!a.deepEqual(m[F],j[F])){P=!0;break}if(P){var U={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(m,b),this.light.updateTransitions(U)}},y.prototype._validate=function(m,b,j,P,F){return F===void 0&&(F={}),(!F||F.validate!==!1)&&gl(this,m.call(a.validateStyle,a.extend({key:b,style:this.serialize(),value:j,styleSpec:a.styleSpec},P)))},y.prototype._remove=function(){for(var m in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[m].setEventedParent(null);for(var b in this.sourceCaches)this.sourceCaches[b].clearTiles(),this.sourceCaches[b].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},y.prototype._clearSource=function(m){this.sourceCaches[m].clearTiles()},y.prototype._reloadSource=function(m){this.sourceCaches[m].resume(),this.sourceCaches[m].reload()},y.prototype._updateSources=function(m){for(var b in this.sourceCaches)this.sourceCaches[b].update(m)},y.prototype._generateCollisionBoxes=function(){for(var m in this.sourceCaches)this._reloadSource(m)},y.prototype._updatePlacement=function(m,b,j,P,F){F===void 0&&(F=!1);for(var U=!1,$=!1,J={},te=0,ue=this._order;te<ue.length;te+=1){var Te=ue[te],be=this._layers[Te];if(be.type==="symbol"){if(!J[be.source]){var _e=this.sourceCaches[be.source];J[be.source]=_e.getRenderableIds(!0).map((function(it){return _e.getTileByID(it)})).sort((function(it,ft){return ft.tileID.overscaledZ-it.tileID.overscaledZ||(it.tileID.isLessThan(ft.tileID)?-1:1)}))}var ve=this.crossTileSymbolIndex.addLayer(be,J[be.source],m.center.lng);U=U||ve}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((F=F||this._layerOrderChanged||j===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),m.zoom))&&(this.pauseablePlacement=new fl(m,this._order,F,b,j,P,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,J),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),$=!0),U&&this.pauseablePlacement.placement.setStale()),$||U)for(var $e=0,Fe=this._order;$e<Fe.length;$e+=1){var rt=Fe[$e],et=this._layers[rt];et.type==="symbol"&&this.placement.updateLayerOpacities(et,J[et.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},y.prototype._releaseSymbolFadeTiles=function(){for(var m in this.sourceCaches)this.sourceCaches[m].releaseSymbolFadeTiles()},y.prototype.getImages=function(m,b,j){this.imageManager.getImages(b.icons,j),this._updateTilesForChangedImages();var P=this.sourceCaches[b.source];P&&P.setDependencies(b.tileID.key,b.type,b.icons)},y.prototype.getGlyphs=function(m,b,j){this.glyphManager.getGlyphs(b.stacks,j)},y.prototype.getResource=function(m,b,j){return a.makeRequest(b,j)},y})(a.Evented);ei.getSourceType=function(f){return Ge[f]},ei.setSourceType=function(f,y){Ge[f]=y},ei.registerForPluginStateChange=a.registerForPluginStateChange;var yl=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ao=ui(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ys=ui(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Es=ui(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Cs=ui(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),vl=ui("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ha=ui(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),xl=ui(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Nu=ui("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ts=ui("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),sg=ui("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Qh=ui(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Jh=ui(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Mu=ui(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ld=ui(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),hp=ui(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Bl=ui(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Fl=ui(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Nc=ui(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),zd=ui(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),fp=ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ef=ui(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}`),Ul=ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),tf=ui(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Mc=ui(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Vl=ui(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),pp=ui(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ui(f,y){var m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b={};return{fragmentSource:f=f.replace(m,(function(j,P,F,U,$){return b[$]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
varying `+F+" "+U+" "+$+`;
#else
uniform `+F+" "+U+" u_"+$+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+$+`
    `+F+" "+U+" "+$+" = u_"+$+`;
#endif
`})),vertexSource:y=y.replace(m,(function(j,P,F,U,$){var J=U==="float"?"vec2":"vec4",te=$.match(/color/)?"color":J;return b[$]?P==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+F+" "+J+" a_"+$+`;
varying `+F+" "+U+" "+$+`;
#else
uniform `+F+" "+U+" u_"+$+`;
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = a_"+$+`;
#else
    `+F+" "+U+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+$+" = unpack_mix_"+te+"(a_"+$+", u_"+$+`_t);
#else
    `+F+" "+U+" "+$+" = u_"+$+`;
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_`+$+`
uniform lowp float u_`+$+`_t;
attribute `+F+" "+J+" a_"+$+`;
#else
uniform `+F+" "+U+" u_"+$+`;
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_`+$+`
    `+F+" "+U+" "+$+" = a_"+$+`;
#else
    `+F+" "+U+" "+$+" = u_"+$+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+$+`
    `+F+" "+U+" "+$+" = unpack_mix_"+te+"(a_"+$+", u_"+$+`_t);
#else
    `+F+" "+U+" "+$+" = u_"+$+`;
#endif
`}))}}var di=Object.freeze({__proto__:null,prelude:Ao,background:Ys,backgroundPattern:Es,circle:Cs,clippingMask:vl,heatmap:ha,heatmapTexture:xl,collisionBox:Nu,collisionCircle:Ts,debug:sg,fill:Qh,fillOutline:Jh,fillOutlinePattern:Mu,fillPattern:Ld,fillExtrusion:hp,fillExtrusionPattern:Bl,hillshadePrepare:Fl,hillshade:Nc,line:zd,lineGradient:fp,linePattern:ef,lineSDF:Ul,raster:tf,symbolIcon:Mc,symbolSDF:Vl,symbolTextAndIcon:pp}),ql=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ql.prototype.bind=function(f,y,m,b,j,P,F,U){this.context=f;for(var $=this.boundPaintVertexBuffers.length!==b.length,J=0;!$&&J<b.length;J++)this.boundPaintVertexBuffers[J]!==b[J]&&($=!0);var te=!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==m||$||this.boundIndexBuffer!==j||this.boundVertexOffset!==P||this.boundDynamicVertexBuffer!==F||this.boundDynamicVertexBuffer2!==U;!f.extVertexArrayObject||te?this.freshBind(y,m,b,j,P,F,U):(f.bindVertexArrayOES.set(this.vao),F&&F.bind(),j&&j.dynamicDraw&&j.bind(),U&&U.bind())},ql.prototype.freshBind=function(f,y,m,b,j,P,F){var U,$=f.numAttributes,J=this.context,te=J.gl;if(J.extVertexArrayObject)this.vao&&this.destroy(),this.vao=J.extVertexArrayObject.createVertexArrayOES(),J.bindVertexArrayOES.set(this.vao),U=0,this.boundProgram=f,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=b,this.boundVertexOffset=j,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=F;else{U=J.currentNumAttributes||0;for(var ue=$;ue<U;ue++)te.disableVertexAttribArray(ue)}y.enableAttributes(te,f);for(var Te=0,be=m;Te<be.length;Te+=1)be[Te].enableAttributes(te,f);P&&P.enableAttributes(te,f),F&&F.enableAttributes(te,f),y.bind(),y.setVertexAttribPointers(te,f,j);for(var _e=0,ve=m;_e<ve.length;_e+=1){var $e=ve[_e];$e.bind(),$e.setVertexAttribPointers(te,f,j)}P&&(P.bind(),P.setVertexAttribPointers(te,f,j)),b&&b.bind(),F&&(F.bind(),F.setVertexAttribPointers(te,f,j)),J.currentNumAttributes=$},ql.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Bd=function(f,y,m,b,j){var P=f.gl;this.program=P.createProgram();var F=m.defines();j&&F.push("#define OVERDRAW_INSPECTOR;");var U=F.concat(Ao.fragmentSource,y.fragmentSource).join(`
`),$=F.concat(Ao.vertexSource,y.vertexSource).join(`
`),J=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(J,U),P.compileShader(J),P.attachShader(this.program,J);var te=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(te,$),P.compileShader(te),P.attachShader(this.program,te);for(var ue=m.layoutAttributes||[],Te=0;Te<ue.length;Te++)P.bindAttribLocation(this.program,Te,ue[Te].name);P.linkProgram(this.program),this.numAttributes=P.getProgramParameter(this.program,P.ACTIVE_ATTRIBUTES),this.attributes={};for(var be={},_e=0;_e<this.numAttributes;_e++){var ve=P.getActiveAttrib(this.program,_e);ve&&(this.attributes[ve.name]=P.getAttribLocation(this.program,ve.name))}for(var $e=P.getProgramParameter(this.program,P.ACTIVE_UNIFORMS),Fe=0;Fe<$e;Fe++){var rt=P.getActiveUniform(this.program,Fe);rt&&(be[rt.name]=P.getUniformLocation(this.program,rt.name))}this.fixedUniforms=b(f,be),this.binderUniforms=m.getUniforms(f,be)}}};function Dc(f,y,m){var b=1/Jn(m,1,y.transform.tileZoom),j=Math.pow(2,m.tileID.overscaledZ),P=m.tileSize*Math.pow(2,y.transform.tileZoom)/j,F=P*(m.tileID.canonical.x+m.tileID.wrap*j),U=P*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[a.browser.devicePixelRatio,b,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[F>>16,U>>16],u_pixel_coord_lower:[65535&F,65535&U]}}Bd.prototype.draw=function(f,y,m,b,j,P,F,U,$,J,te,ue,Te,be,_e,ve){var $e,Fe=f.gl;if(!this.failedToCreate){for(var rt in f.program.set(this.program),f.setDepthMode(m),f.setStencilMode(b),f.setColorMode(j),f.setCullFace(P),this.fixedUniforms)this.fixedUniforms[rt].set(F[rt]);be&&be.setUniforms(f,this.binderUniforms,ue,{zoom:Te});for(var et=($e={},$e[Fe.LINES]=2,$e[Fe.TRIANGLES]=3,$e[Fe.LINE_STRIP]=1,$e)[y],it=0,ft=te.get();it<ft.length;it+=1){var _t=ft[it],kt=_t.vaos||(_t.vaos={});(kt[U]||(kt[U]=new ql)).bind(f,this,$,be?be.getPaintVertexBuffers():[],J,_t.vertexOffset,_e,ve),Fe.drawElements(y,_t.primitiveLength*et,Fe.UNSIGNED_SHORT,_t.primitiveOffset*et*2)}}};var mp=function(f,y,m,b){var j=y.style.light,P=j.properties.get("position"),F=[P.x,P.y,P.z],U=a.create$1();j.properties.get("anchor")==="viewport"&&a.fromRotation(U,-y.transform.angle),a.transformMat3(F,F,U);var $=j.properties.get("color");return{u_matrix:f,u_lightpos:F,u_lightintensity:j.properties.get("intensity"),u_lightcolor:[$.r,$.g,$.b],u_vertical_gradient:+m,u_opacity:b}},lg=function(f,y,m,b,j,P,F){return a.extend(mp(f,y,m,b),Dc(P,y,F),{u_height_factor:-Math.pow(2,j.overscaledZ)/F.tileSize/8})},Fd=function(f){return{u_matrix:f}},gp=function(f,y,m,b){return a.extend(Fd(f),Dc(m,y,b))},Du=function(f,y){return{u_matrix:f,u_world:y}},Ud=function(f,y,m,b,j){return a.extend(gp(f,y,m,b),{u_world:j})},Vd=function(f,y,m,b){var j,P,F=f.transform;if(b.paint.get("circle-pitch-alignment")==="map"){var U=Jn(m,1,F.zoom);j=!0,P=[U,U]}else j=!1,P=F.pixelsToGLUnits;return{u_camera_to_center_distance:F.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(y.posMatrix,m,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+j,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:P}},Pc=function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_camera_to_center_distance:new a.Uniform1f(f,y.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(f,y.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(f,y.u_extrude_scale),u_overscale_factor:new a.Uniform1f(f,y.u_overscale_factor)}},Ic=function(f,y,m){var b=Jn(m,1,y.zoom),j=Math.pow(2,y.zoom-m.tileID.overscaledZ),P=m.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:y.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[y.pixelsToGLUnits[0]/(b*j),y.pixelsToGLUnits[1]/(b*j)],u_overscale_factor:P}},qd=function(f,y){return{u_matrix:f,u_color:y}},Oc=function(f){return{u_matrix:f}},as=function(f,y,m,b){return{u_matrix:f,u_extrude_scale:Jn(y,1,m),u_intensity:b}};function Hd(f,y){var m=Math.pow(2,y.canonical.z),b=y.canonical.y;return[new a.MercatorCoordinate(0,b/m).toLngLat().lat,new a.MercatorCoordinate(0,(b+1)/m).toLngLat().lat]}var bl=function(f,y,m){var b=f.transform;return{u_matrix:nf(f,y,m),u_ratio:1/Jn(y,1,b.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},yp=function(f,y,m){return a.extend(bl(f,y,m),{u_image:0})},Hl=function(f,y,m,b){var j=f.transform,P=Iu(y,j);return{u_matrix:nf(f,y,m),u_texsize:y.imageAtlasTexture.size,u_ratio:1/Jn(y,1,j.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[a.browser.devicePixelRatio,P,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},Pu=function(f,y,m,b,j){var P=f.transform,F=f.lineAtlas,U=Iu(y,P),$=m.layout.get("line-cap")==="round",J=F.getDash(b.from,$),te=F.getDash(b.to,$),ue=J.width*j.fromScale,Te=te.width*j.toScale;return a.extend(bl(f,y,m),{u_patternscale_a:[U/ue,-J.height/2],u_patternscale_b:[U/Te,-te.height/2],u_sdfgamma:F.width/(256*Math.min(ue,Te)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:J.y,u_tex_y_b:te.y,u_mix:j.t})};function Iu(f,y){return 1/Jn(f,1,y.tileZoom)}function nf(f,y,m){return f.translatePosMatrix(y.tileID.posMatrix,y,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}var Ou=function(f,y,m,b,j){return{u_matrix:f,u_tl_parent:y,u_scale_parent:m,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*j.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:j.paint.get("raster-brightness-min"),u_brightness_high:j.paint.get("raster-brightness-max"),u_saturation_factor:(F=j.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(P=j.paint.get("raster-contrast"),P>0?1/(1-P):1+P),u_spin_weights:Rc(j.paint.get("raster-hue-rotate"))};var P,F};function Rc(f){f*=Math.PI/180;var y=Math.sin(f),m=Math.cos(f);return[(2*m+1)/3,(-Math.sqrt(3)*y-m+1)/3,(Math.sqrt(3)*y-m+1)/3]}var Ru=function(f,y,m,b,j,P,F,U,$,J){var te=j.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:y?y.uSizeT:0,u_size:y?y.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:te.width/te.height,u_fade_change:j.options.fadeDuration?j.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:F,u_coord_matrix:U,u_is_text:+$,u_pitch_with_map:+b,u_texsize:J,u_texture:0}},$d=function(f,y,m,b,j,P,F,U,$,J,te){var ue=j.transform;return a.extend(Ru(f,y,m,b,j,P,F,U,$,J),{u_gamma_scale:b?Math.cos(ue._pitch)*ue.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:1})},vp=function(f,y,m,b,j,P,F,U,$,J){return a.extend($d(f,y,m,b,j,P,F,U,!0,$),{u_texsize_icon:J,u_texture_icon:1})},rf=function(f,y,m){return{u_matrix:f,u_opacity:y,u_color:m}},Lu=function(f,y,m,b,j,P){return a.extend((function(F,U,$,J){var te=$.imageManager.getPattern(F.from.toString()),ue=$.imageManager.getPattern(F.to.toString()),Te=$.imageManager.getPixelSize(),be=Te.width,_e=Te.height,ve=Math.pow(2,J.tileID.overscaledZ),$e=J.tileSize*Math.pow(2,$.transform.tileZoom)/ve,Fe=$e*(J.tileID.canonical.x+J.tileID.wrap*ve),rt=$e*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:ue.tl,u_pattern_br_b:ue.br,u_texsize:[be,_e],u_mix:U.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:ue.displaySize,u_scale_a:U.fromScale,u_scale_b:U.toScale,u_tile_units_to_pixels:1/Jn(J,1,$.transform.tileZoom),u_pixel_coord_upper:[Fe>>16,rt>>16],u_pixel_coord_lower:[65535&Fe,65535&rt]}})(b,P,m,j),{u_matrix:f,u_opacity:y})},$l={fillExtrusion:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_lightpos:new a.Uniform3f(f,y.u_lightpos),u_lightintensity:new a.Uniform1f(f,y.u_lightintensity),u_lightcolor:new a.Uniform3f(f,y.u_lightcolor),u_vertical_gradient:new a.Uniform1f(f,y.u_vertical_gradient),u_opacity:new a.Uniform1f(f,y.u_opacity)}},fillExtrusionPattern:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_lightpos:new a.Uniform3f(f,y.u_lightpos),u_lightintensity:new a.Uniform1f(f,y.u_lightintensity),u_lightcolor:new a.Uniform3f(f,y.u_lightcolor),u_vertical_gradient:new a.Uniform1f(f,y.u_vertical_gradient),u_height_factor:new a.Uniform1f(f,y.u_height_factor),u_image:new a.Uniform1i(f,y.u_image),u_texsize:new a.Uniform2f(f,y.u_texsize),u_pixel_coord_upper:new a.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,y.u_pixel_coord_lower),u_scale:new a.Uniform4f(f,y.u_scale),u_fade:new a.Uniform1f(f,y.u_fade),u_opacity:new a.Uniform1f(f,y.u_opacity)}},fill:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix)}},fillPattern:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_image:new a.Uniform1i(f,y.u_image),u_texsize:new a.Uniform2f(f,y.u_texsize),u_pixel_coord_upper:new a.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,y.u_pixel_coord_lower),u_scale:new a.Uniform4f(f,y.u_scale),u_fade:new a.Uniform1f(f,y.u_fade)}},fillOutline:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_world:new a.Uniform2f(f,y.u_world)}},fillOutlinePattern:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_world:new a.Uniform2f(f,y.u_world),u_image:new a.Uniform1i(f,y.u_image),u_texsize:new a.Uniform2f(f,y.u_texsize),u_pixel_coord_upper:new a.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,y.u_pixel_coord_lower),u_scale:new a.Uniform4f(f,y.u_scale),u_fade:new a.Uniform1f(f,y.u_fade)}},circle:function(f,y){return{u_camera_to_center_distance:new a.Uniform1f(f,y.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(f,y.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(f,y.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(f,y.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(f,y.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(f,y.u_matrix)}},collisionBox:Pc,collisionCircle:Pc,debug:function(f,y){return{u_color:new a.UniformColor(f,y.u_color),u_matrix:new a.UniformMatrix4f(f,y.u_matrix)}},clippingMask:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix)}},heatmap:function(f,y){return{u_extrude_scale:new a.Uniform1f(f,y.u_extrude_scale),u_intensity:new a.Uniform1f(f,y.u_intensity),u_matrix:new a.UniformMatrix4f(f,y.u_matrix)}},heatmapTexture:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_world:new a.Uniform2f(f,y.u_world),u_image:new a.Uniform1i(f,y.u_image),u_color_ramp:new a.Uniform1i(f,y.u_color_ramp),u_opacity:new a.Uniform1f(f,y.u_opacity)}},hillshade:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_image:new a.Uniform1i(f,y.u_image),u_latrange:new a.Uniform2f(f,y.u_latrange),u_light:new a.Uniform2f(f,y.u_light),u_shadow:new a.UniformColor(f,y.u_shadow),u_highlight:new a.UniformColor(f,y.u_highlight),u_accent:new a.UniformColor(f,y.u_accent)}},hillshadePrepare:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_image:new a.Uniform1i(f,y.u_image),u_dimension:new a.Uniform2f(f,y.u_dimension),u_zoom:new a.Uniform1f(f,y.u_zoom),u_maxzoom:new a.Uniform1f(f,y.u_maxzoom),u_unpack:new a.Uniform4f(f,y.u_unpack)}},line:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_ratio:new a.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,y.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(f,y.u_units_to_pixels)}},lineGradient:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_ratio:new a.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,y.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(f,y.u_units_to_pixels),u_image:new a.Uniform1i(f,y.u_image)}},linePattern:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_texsize:new a.Uniform2f(f,y.u_texsize),u_ratio:new a.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,y.u_device_pixel_ratio),u_image:new a.Uniform1i(f,y.u_image),u_units_to_pixels:new a.Uniform2f(f,y.u_units_to_pixels),u_scale:new a.Uniform4f(f,y.u_scale),u_fade:new a.Uniform1f(f,y.u_fade)}},lineSDF:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_ratio:new a.Uniform1f(f,y.u_ratio),u_device_pixel_ratio:new a.Uniform1f(f,y.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(f,y.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(f,y.u_patternscale_a),u_patternscale_b:new a.Uniform2f(f,y.u_patternscale_b),u_sdfgamma:new a.Uniform1f(f,y.u_sdfgamma),u_image:new a.Uniform1i(f,y.u_image),u_tex_y_a:new a.Uniform1f(f,y.u_tex_y_a),u_tex_y_b:new a.Uniform1f(f,y.u_tex_y_b),u_mix:new a.Uniform1f(f,y.u_mix)}},raster:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_tl_parent:new a.Uniform2f(f,y.u_tl_parent),u_scale_parent:new a.Uniform1f(f,y.u_scale_parent),u_buffer_scale:new a.Uniform1f(f,y.u_buffer_scale),u_fade_t:new a.Uniform1f(f,y.u_fade_t),u_opacity:new a.Uniform1f(f,y.u_opacity),u_image0:new a.Uniform1i(f,y.u_image0),u_image1:new a.Uniform1i(f,y.u_image1),u_brightness_low:new a.Uniform1f(f,y.u_brightness_low),u_brightness_high:new a.Uniform1f(f,y.u_brightness_high),u_saturation_factor:new a.Uniform1f(f,y.u_saturation_factor),u_contrast_factor:new a.Uniform1f(f,y.u_contrast_factor),u_spin_weights:new a.Uniform3f(f,y.u_spin_weights)}},symbolIcon:function(f,y){return{u_is_size_zoom_constant:new a.Uniform1i(f,y.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(f,y.u_is_size_feature_constant),u_size_t:new a.Uniform1f(f,y.u_size_t),u_size:new a.Uniform1f(f,y.u_size),u_camera_to_center_distance:new a.Uniform1f(f,y.u_camera_to_center_distance),u_pitch:new a.Uniform1f(f,y.u_pitch),u_rotate_symbol:new a.Uniform1i(f,y.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(f,y.u_aspect_ratio),u_fade_change:new a.Uniform1f(f,y.u_fade_change),u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(f,y.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(f,y.u_coord_matrix),u_is_text:new a.Uniform1f(f,y.u_is_text),u_pitch_with_map:new a.Uniform1i(f,y.u_pitch_with_map),u_texsize:new a.Uniform2f(f,y.u_texsize),u_texture:new a.Uniform1i(f,y.u_texture)}},symbolSDF:function(f,y){return{u_is_size_zoom_constant:new a.Uniform1i(f,y.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(f,y.u_is_size_feature_constant),u_size_t:new a.Uniform1f(f,y.u_size_t),u_size:new a.Uniform1f(f,y.u_size),u_camera_to_center_distance:new a.Uniform1f(f,y.u_camera_to_center_distance),u_pitch:new a.Uniform1f(f,y.u_pitch),u_rotate_symbol:new a.Uniform1i(f,y.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(f,y.u_aspect_ratio),u_fade_change:new a.Uniform1f(f,y.u_fade_change),u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(f,y.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(f,y.u_coord_matrix),u_is_text:new a.Uniform1f(f,y.u_is_text),u_pitch_with_map:new a.Uniform1i(f,y.u_pitch_with_map),u_texsize:new a.Uniform2f(f,y.u_texsize),u_texture:new a.Uniform1i(f,y.u_texture),u_gamma_scale:new a.Uniform1f(f,y.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(f,y.u_device_pixel_ratio),u_is_halo:new a.Uniform1f(f,y.u_is_halo)}},symbolTextAndIcon:function(f,y){return{u_is_size_zoom_constant:new a.Uniform1i(f,y.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(f,y.u_is_size_feature_constant),u_size_t:new a.Uniform1f(f,y.u_size_t),u_size:new a.Uniform1f(f,y.u_size),u_camera_to_center_distance:new a.Uniform1f(f,y.u_camera_to_center_distance),u_pitch:new a.Uniform1f(f,y.u_pitch),u_rotate_symbol:new a.Uniform1i(f,y.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(f,y.u_aspect_ratio),u_fade_change:new a.Uniform1f(f,y.u_fade_change),u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(f,y.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(f,y.u_coord_matrix),u_is_text:new a.Uniform1f(f,y.u_is_text),u_pitch_with_map:new a.Uniform1i(f,y.u_pitch_with_map),u_texsize:new a.Uniform2f(f,y.u_texsize),u_texsize_icon:new a.Uniform2f(f,y.u_texsize_icon),u_texture:new a.Uniform1i(f,y.u_texture),u_texture_icon:new a.Uniform1i(f,y.u_texture_icon),u_gamma_scale:new a.Uniform1f(f,y.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(f,y.u_device_pixel_ratio),u_is_halo:new a.Uniform1f(f,y.u_is_halo)}},background:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_opacity:new a.Uniform1f(f,y.u_opacity),u_color:new a.UniformColor(f,y.u_color)}},backgroundPattern:function(f,y){return{u_matrix:new a.UniformMatrix4f(f,y.u_matrix),u_opacity:new a.Uniform1f(f,y.u_opacity),u_image:new a.Uniform1i(f,y.u_image),u_pattern_tl_a:new a.Uniform2f(f,y.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(f,y.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(f,y.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(f,y.u_pattern_br_b),u_texsize:new a.Uniform2f(f,y.u_texsize),u_mix:new a.Uniform1f(f,y.u_mix),u_pattern_size_a:new a.Uniform2f(f,y.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(f,y.u_pattern_size_b),u_scale_a:new a.Uniform1f(f,y.u_scale_a),u_scale_b:new a.Uniform1f(f,y.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(f,y.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(f,y.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(f,y.u_tile_units_to_pixels)}}};function Gl(f,y,m,b,j,P,F,U){for(var $=f.context,J=$.gl,te=j?f.useProgram("collisionCircle"):f.useProgram("collisionBox"),ue=0;ue<b.length;ue++){var Te=b[ue],be=y.getTile(Te),_e=be.getBucket(m);if(_e){var ve=j?U?_e.textCollisionCircle:_e.iconCollisionCircle:U?_e.textCollisionBox:_e.iconCollisionBox;if(ve){var $e=Te.posMatrix;P[0]===0&&P[1]===0||($e=f.translatePosMatrix(Te.posMatrix,be,P,F)),te.draw($,j?J.TRIANGLES:J.LINES,fr.disabled,Ti.disabled,f.colorModeForRenderPass(),vt.disabled,Ic($e,f.transform,be),m.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,f.transform.zoom,null,null,ve.collisionVertexBuffer)}}}}function af(f,y,m,b,j,P,F){Gl(f,y,m,b,!1,j,P,F),Gl(f,y,m,b,!0,j,P,F)}var zu=a.identity(new Float32Array(16));function of(f,y,m,b,j,P){var F=a.getAnchorAlignment(f),U=-(F.horizontalAlign-.5)*y,$=-(F.verticalAlign-.5)*m,J=a.evaluateVariableOffset(f,b);return new a.Point((U/j+J[0])*P,($/j+J[1])*P)}function Zl(f,y,m,b,j,P,F,U,$,J,te){var ue=f.text.placedSymbolArray,Te=f.text.dynamicLayoutVertexArray,be=f.icon.dynamicLayoutVertexArray,_e={};Te.clear();for(var ve=0;ve<ue.length;ve++){var $e=ue.get(ve),Fe=f.allowVerticalPlacement&&!$e.placedOrientation,rt=$e.hidden||!$e.crossTileID||Fe?null:b[$e.crossTileID];if(rt){var et=new a.Point($e.anchorX,$e.anchorY),it=qt(et,m?U:F),ft=.5+P.cameraToCenterDistance/it.signedDistanceFromCamera*.5,_t=j.evaluateSizeForFeature(f.textSizeData,J,$e)*ft/a.ONE_EM;m&&(_t*=f.tilePixelRatio/$);for(var kt=rt.width,an=rt.height,Wt=of(rt.anchor,kt,an,rt.textOffset,rt.textBoxScale,_t),un=m?qt(et.add(Wt),F).point:it.point.add(y?Wt.rotate(-P.angle):Wt),Zt=f.allowVerticalPlacement&&$e.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,xn=0;xn<$e.numGlyphs;xn++)a.addDynamicAttributes(Te,un,Zt);te&&$e.associatedIconIndex>=0&&(_e[$e.associatedIconIndex]={shiftedAnchor:un,angle:Zt})}else Hn($e.numGlyphs,Te)}if(te){be.clear();for(var Qt=f.icon.placedSymbolArray,jn=0;jn<Qt.length;jn++){var Gn=Qt.get(jn);if(Gn.hidden)Hn(Gn.numGlyphs,be);else{var Fn=_e[jn];if(Fn)for(var Rn=0;Rn<Gn.numGlyphs;Rn++)a.addDynamicAttributes(be,Fn.shiftedAnchor,Fn.angle);else Hn(Gn.numGlyphs,be)}}f.icon.dynamicLayoutVertexBuffer.updateData(be)}f.text.dynamicLayoutVertexBuffer.updateData(Te)}function Gd(f,y,m){return m.iconsInText&&y?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Bu(f,y,m,b,j,P,F,U,$,J,te,ue){for(var Te,be,_e=f.context,ve=_e.gl,$e=f.transform,Fe=U==="map",rt=$==="map",et=Fe&&m.layout.get("symbol-placement")!=="point",it=Fe&&!rt&&!et,ft=m.layout.get("symbol-sort-key").constantOr(1)!==void 0,_t=f.depthModeForSublayer(0,fr.ReadOnly),kt=m.layout.get("text-variable-anchor"),an=[],Wt=0,un=b;Wt<un.length;Wt+=1){var Zt=un[Wt],xn=y.getTile(Zt),Qt=xn.getBucket(m);if(Qt){var jn=j?Qt.text:Qt.icon;if(jn&&jn.segments.get().length){var Gn=jn.programConfigurations.get(m.id),Fn=j||Qt.sdfIcons,Rn=j?Qt.textSizeData:Qt.iconSizeData,Mr=rt||$e.pitch!==0;Te||(Te=f.useProgram(Gd(Fn,j,Qt),Gn),be=a.evaluateSizeForZoom(Rn,$e.zoom));var Zn=void 0,wn=[0,0],yi=void 0,Er=void 0,tr=null,fa=void 0;if(j){if(yi=xn.glyphAtlasTexture,Er=ve.LINEAR,Zn=xn.glyphAtlasTexture.size,Qt.iconsInText){wn=xn.imageAtlasTexture.size,tr=xn.imageAtlasTexture;var Gi=Rn.kind==="composite"||Rn.kind==="camera";fa=Mr||f.options.rotating||f.options.zooming||Gi?ve.LINEAR:ve.NEAREST}}else{var si=m.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;yi=xn.imageAtlasTexture,Er=Fn||f.options.rotating||f.options.zooming||si||Mr?ve.LINEAR:ve.NEAREST,Zn=xn.imageAtlasTexture.size}var Za=Jn(xn,1,f.transform.zoom),Oo=en(Zt.posMatrix,rt,Fe,f.transform,Za),cs=dn(Zt.posMatrix,rt,Fe,f.transform,Za),la=kt&&Qt.hasTextData(),js=m.layout.get("icon-text-fit")!=="none"&&la&&Qt.hasIconData();et&&qn(Qt,Zt.posMatrix,f,j,Oo,cs,rt,J);var Ko=f.translatePosMatrix(Zt.posMatrix,xn,P,F),Cl=et||j&&kt||js?zu:Oo,yo=f.translatePosMatrix(cs,xn,P,F,!0),Qd=Fn&&m.paint.get(j?"text-halo-width":"icon-halo-width").constantOr(1)!==0,As={program:Te,buffers:jn,uniformValues:Fn?Qt.iconsInText?vp(Rn.kind,be,it,rt,f,Ko,Cl,yo,Zn,wn):$d(Rn.kind,be,it,rt,f,Ko,Cl,yo,j,Zn):Ru(Rn.kind,be,it,rt,f,Ko,Cl,yo,j,Zn),atlasTexture:yi,atlasTextureIcon:tr,atlasInterpolation:Er,atlasInterpolationIcon:fa,isSDF:Fn,hasHalo:Qd};if(ft)for(var Yo=0,Vc=jn.segments.get();Yo<Vc.length;Yo+=1){var Qs=Vc[Yo];an.push({segments:new a.SegmentVector([Qs]),sortKey:Qs.sortKey,state:As})}else an.push({segments:jn.segments,sortKey:0,state:As})}}}ft&&an.sort((function(La,no){return La.sortKey-no.sortKey}));for(var Tl=0,Ns=an;Tl<Ns.length;Tl+=1){var li=Ns[Tl],kr=li.state;if(_e.activeTexture.set(ve.TEXTURE0),kr.atlasTexture.bind(kr.atlasInterpolation,ve.CLAMP_TO_EDGE),kr.atlasTextureIcon&&(_e.activeTexture.set(ve.TEXTURE1),kr.atlasTextureIcon&&kr.atlasTextureIcon.bind(kr.atlasInterpolationIcon,ve.CLAMP_TO_EDGE)),kr.isSDF){var zr=kr.uniformValues;kr.hasHalo&&(zr.u_is_halo=1,Zd(kr.buffers,li.segments,m,f,kr.program,_t,te,ue,zr)),zr.u_is_halo=0}Zd(kr.buffers,li.segments,m,f,kr.program,_t,te,ue,kr.uniformValues)}}function Zd(f,y,m,b,j,P,F,U,$){var J=b.context,te=J.gl;j.draw(J,te.TRIANGLES,P,F,U,vt.disabled,$,m.id,f.layoutVertexBuffer,f.indexBuffer,y,m.paint,b.transform.zoom,f.programConfigurations.get(m.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Xd(f,y,m,b,j,P,F){var U,$,J,te,ue,Te=f.context.gl,be=m.paint.get("fill-pattern"),_e=be&&be.constantOr(1),ve=m.getCrossfadeParameters();F?($=_e&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=Te.LINES):($=_e?"fillPattern":"fill",U=Te.TRIANGLES);for(var $e=0,Fe=b;$e<Fe.length;$e+=1){var rt=Fe[$e],et=y.getTile(rt);if(!_e||et.patternsLoaded()){var it=et.getBucket(m);if(it){var ft=it.programConfigurations.get(m.id),_t=f.useProgram($,ft);_e&&(f.context.activeTexture.set(Te.TEXTURE0),et.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),ft.updatePatternPaintBuffers(ve));var kt=be.constantOr(null);if(kt&&et.imageAtlas){var an=et.imageAtlas,Wt=an.patternPositions[kt.to.toString()],un=an.patternPositions[kt.from.toString()];Wt&&un&&ft.setConstantPatternPositions(Wt,un)}var Zt=f.translatePosMatrix(rt.posMatrix,et,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(F){te=it.indexBuffer2,ue=it.segments2;var xn=[Te.drawingBufferWidth,Te.drawingBufferHeight];J=$==="fillOutlinePattern"&&_e?Ud(Zt,f,ve,et,xn):Du(Zt,xn)}else te=it.indexBuffer,ue=it.segments,J=_e?gp(Zt,f,ve,et):Fd(Zt);_t.draw(f.context,U,j,f.stencilModeForClipping(rt),P,vt.disabled,J,m.id,it.layoutVertexBuffer,te,ue,m.paint,f.transform.zoom,ft)}}}}function ho(f,y,m,b,j,P,F){for(var U=f.context,$=U.gl,J=m.paint.get("fill-extrusion-pattern"),te=J.constantOr(1),ue=m.getCrossfadeParameters(),Te=m.paint.get("fill-extrusion-opacity"),be=0,_e=b;be<_e.length;be+=1){var ve=_e[be],$e=y.getTile(ve),Fe=$e.getBucket(m);if(Fe){var rt=Fe.programConfigurations.get(m.id),et=f.useProgram(te?"fillExtrusionPattern":"fillExtrusion",rt);te&&(f.context.activeTexture.set($.TEXTURE0),$e.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),rt.updatePatternPaintBuffers(ue));var it=J.constantOr(null);if(it&&$e.imageAtlas){var ft=$e.imageAtlas,_t=ft.patternPositions[it.to.toString()],kt=ft.patternPositions[it.from.toString()];_t&&kt&&rt.setConstantPatternPositions(_t,kt)}var an=f.translatePosMatrix(ve.posMatrix,$e,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Wt=m.paint.get("fill-extrusion-vertical-gradient"),un=te?lg(an,f,Wt,Te,ve,ue,$e):mp(an,f,Wt,Te);et.draw(U,U.gl.TRIANGLES,j,P,F,vt.backCCW,un,m.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,m.paint,f.transform.zoom,rt)}}}function cg(f,y,m,b,j,P){var F=f.context,U=F.gl,$=y.fbo;if($){var J=f.useProgram("hillshade");F.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,$.colorAttachment.get());var te=(function(ue,Te,be){var _e=be.paint.get("hillshade-shadow-color"),ve=be.paint.get("hillshade-highlight-color"),$e=be.paint.get("hillshade-accent-color"),Fe=be.paint.get("hillshade-illumination-direction")*(Math.PI/180);be.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=ue.transform.angle);var rt=!ue.options.moving;return{u_matrix:ue.transform.calculatePosMatrix(Te.tileID.toUnwrapped(),rt),u_image:0,u_latrange:Hd(ue,Te.tileID),u_light:[be.paint.get("hillshade-exaggeration"),Fe],u_shadow:_e,u_highlight:ve,u_accent:$e}})(f,y,m);J.draw(F,U.TRIANGLES,b,j,P,vt.disabled,te,m.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}}function Xl(f,y,m,b,j,P,F){var U=f.context,$=U.gl,J=y.dem;if(J&&J.data){var te=J.dim,ue=J.stride,Te=J.getPixels();if(U.activeTexture.set($.TEXTURE1),U.pixelStoreUnpackPremultiplyAlpha.set(!1),y.demTexture=y.demTexture||f.getTileTexture(ue),y.demTexture){var be=y.demTexture;be.update(Te,{premultiply:!1}),be.bind($.NEAREST,$.CLAMP_TO_EDGE)}else y.demTexture=new a.Texture(U,Te,$.RGBA,{premultiply:!1}),y.demTexture.bind($.NEAREST,$.CLAMP_TO_EDGE);U.activeTexture.set($.TEXTURE0);var _e=y.fbo;if(!_e){var ve=new a.Texture(U,{width:te,height:te,data:null},$.RGBA);ve.bind($.LINEAR,$.CLAMP_TO_EDGE),(_e=y.fbo=U.createFramebuffer(te,te)).colorAttachment.set(ve.texture)}U.bindFramebuffer.set(_e.framebuffer),U.viewport.set([0,0,te,te]),f.useProgram("hillshadePrepare").draw(U,$.TRIANGLES,j,P,F,vt.disabled,(function($e,Fe,rt){var et=Fe.stride,it=a.create();return a.ortho(it,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(it,it,[0,-a.EXTENT,0]),{u_matrix:it,u_image:1,u_dimension:[et,et],u_zoom:$e.overscaledZ,u_maxzoom:rt,u_unpack:Fe.getUnpackVector()}})(y.tileID,J,b),m.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),y.needsHillshadePrepare=!1}}function xp(f,y,m,b,j){var P=b.paint.get("raster-fade-duration");if(P>0){var F=a.browser.now(),U=(F-f.timeAdded)/P,$=y?(F-y.timeAdded)/P:-1,J=m.getSource(),te=j.coveringZoomLevel({tileSize:J.tileSize,roundZoom:J.roundZoom}),ue=!y||Math.abs(y.tileID.overscaledZ-te)>Math.abs(f.tileID.overscaledZ-te),Te=ue&&f.refreshedUponExpiration?1:a.clamp(ue?U:1-$,0,1);return f.refreshedUponExpiration&&U>=1&&(f.refreshedUponExpiration=!1),y?{opacity:1,mix:1-Te}:{opacity:Te,mix:0}}return{opacity:1,mix:0}}function Lc(f,y,m){var b=f.context,j=b.gl,P=m.posMatrix,F=f.useProgram("debug"),U=fr.disabled,$=Ti.disabled,J=f.colorModeForRenderPass(),te="$debug";F.draw(b,j.LINE_STRIP,U,$,J,vt.disabled,qd(P,a.Color.red),te,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);var ue=y.getTileByID(m.key).latestRawTileData,Te=ue&&ue.byteLength||0,be=Math.floor(Te/1024),_e=y.getTile(m).tileSize,ve=512/Math.min(_e,512),$e=m.canonical.toString();m.overscaledZ!==m.canonical.z&&($e+=" => "+m.overscaledZ);for(var Fe=(function(jn,Gn,Fn,Rn){Rn=Rn||1;var Mr,Zn,wn,yi,Er,tr,fa,Gi,si=[];for(Mr=0,Zn=jn.length;Mr<Zn;Mr++)if(Er=Fu[jn[Mr]]){for(Gi=null,wn=0,yi=Er[1].length;wn<yi;wn+=2)Er[1][wn]===-1&&Er[1][wn+1]===-1?Gi=null:(tr=Gn+Er[1][wn]*Rn,fa=Fn-Er[1][wn+1]*Rn,Gi&&si.push(Gi.x,Gi.y,tr,fa),Gi={x:tr,y:fa});Gn+=Er[0]*Rn}return si})($e+" "+be+"kb",50,200*ve,5*ve),rt=new a.StructArrayLayout2i4,et=new a.StructArrayLayout2ui4,it=0;it<Fe.length;it+=2)rt.emplaceBack(Fe[it],Fe[it+1]),et.emplaceBack(it,it+1);for(var ft=b.createVertexBuffer(rt,yl.members),_t=b.createIndexBuffer(et),kt=a.SegmentVector.simpleSegment(0,0,rt.length/2,rt.length/2),an=a.EXTENT/(Math.pow(2,f.transform.zoom-m.overscaledZ)*_e*ve),Wt=[],un=-1;un<=1;un++)for(var Zt=-1;Zt<=1&&(un!==0||Zt!==0);Zt++)Wt.push([un,Zt]);for(var xn=0;xn<Wt.length;xn++){var Qt=Wt[xn];F.draw(b,j.LINES,U,$,J,vt.disabled,qd(a.translate([],P,[an*Qt[0],an*Qt[1],0]),a.Color.white),te,ft,_t,kt)}F.draw(b,j.LINES,U,$,J,vt.disabled,qd(P,a.Color.black),te,ft,_t,kt),ft.destroy(),_t.destroy(),kt.destroy()}var Fu={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},fo={symbol:function(f,y,m,b,j){if(f.renderPass==="translucent"){var P=Ti.disabled,F=f.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&(function(U,$,J,te,ue,Te,be){for(var _e=$.transform,ve=ue==="map",$e=Te==="map",Fe=0,rt=U;Fe<rt.length;Fe+=1){var et=rt[Fe],it=te.getTile(et),ft=it.getBucket(J);if(ft&&ft.text&&ft.text.segments.get().length){var _t=ft.textSizeData,kt=a.evaluateSizeForZoom(_t,_e.zoom),an=Jn(it,1,$.transform.zoom),Wt=en(et.posMatrix,$e,ve,$.transform,an),un=J.layout.get("icon-text-fit")!=="none"&&ft.hasIconData();if(kt){var Zt=Math.pow(2,_e.zoom-it.tileID.overscaledZ);Zl(ft,ve,$e,be,a.symbolSize,_e,Wt,et.posMatrix,Zt,kt,un)}}}})(b,f,m,y,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),j),m.paint.get("icon-opacity").constantOr(1)!==0&&Bu(f,y,m,b,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),P,F),m.paint.get("text-opacity").constantOr(1)!==0&&Bu(f,y,m,b,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),P,F),y.map.showCollisionBoxes&&(af(f,y,m,b,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),af(f,y,m,b,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))}},circle:function(f,y,m,b){if(f.renderPass==="translucent"){var j=m.paint.get("circle-opacity"),P=m.paint.get("circle-stroke-width"),F=m.paint.get("circle-stroke-opacity"),U=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(j.constantOr(1)!==0||P.constantOr(1)!==0&&F.constantOr(1)!==0){for(var $=f.context,J=$.gl,te=f.depthModeForSublayer(0,fr.ReadOnly),ue=Ti.disabled,Te=f.colorModeForRenderPass(),be=[],_e=0;_e<b.length;_e++){var ve=b[_e],$e=y.getTile(ve),Fe=$e.getBucket(m);if(Fe){var rt=Fe.programConfigurations.get(m.id),et={programConfiguration:rt,program:f.useProgram("circle",rt),layoutVertexBuffer:Fe.layoutVertexBuffer,indexBuffer:Fe.indexBuffer,uniformValues:Vd(f,ve,$e,m)};if(U)for(var it=0,ft=Fe.segments.get();it<ft.length;it+=1){var _t=ft[it];be.push({segments:new a.SegmentVector([_t]),sortKey:_t.sortKey,state:et})}else be.push({segments:Fe.segments,sortKey:0,state:et})}}U&&be.sort((function(Rn,Mr){return Rn.sortKey-Mr.sortKey}));for(var kt=0,an=be;kt<an.length;kt+=1){var Wt=an[kt],un=Wt.state,Zt=un.programConfiguration,xn=un.program,Qt=un.layoutVertexBuffer,jn=un.indexBuffer,Gn=un.uniformValues,Fn=Wt.segments;xn.draw($,J.TRIANGLES,te,ue,Te,vt.disabled,Gn,m.id,Qt,jn,Fn,m.paint,f.transform.zoom,Zt)}}}},heatmap:function(f,y,m,b){if(m.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){var j=f.context,P=j.gl,F=f.depthModeForSublayer(0,fr.ReadOnly),U=Ti.disabled,$=new Fr([P.ONE,P.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function($e,Fe,rt){var et=$e.gl;$e.activeTexture.set(et.TEXTURE1),$e.viewport.set([0,0,Fe.width/4,Fe.height/4]);var it=rt.heatmapFbo;if(it)et.bindTexture(et.TEXTURE_2D,it.colorAttachment.get()),$e.bindFramebuffer.set(it.framebuffer);else{var ft=et.createTexture();et.bindTexture(et.TEXTURE_2D,ft),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_S,et.CLAMP_TO_EDGE),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_WRAP_T,et.CLAMP_TO_EDGE),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MIN_FILTER,et.LINEAR),et.texParameteri(et.TEXTURE_2D,et.TEXTURE_MAG_FILTER,et.LINEAR),it=rt.heatmapFbo=$e.createFramebuffer(Fe.width/4,Fe.height/4),(function _t(kt,an,Wt,un){var Zt=kt.gl;Zt.texImage2D(Zt.TEXTURE_2D,0,Zt.RGBA,an.width/4,an.height/4,0,Zt.RGBA,kt.extTextureHalfFloat?kt.extTextureHalfFloat.HALF_FLOAT_OES:Zt.UNSIGNED_BYTE,null),un.colorAttachment.set(Wt),kt.extTextureHalfFloat&&Zt.checkFramebufferStatus(Zt.FRAMEBUFFER)!==Zt.FRAMEBUFFER_COMPLETE&&(kt.extTextureHalfFloat=null,un.colorAttachment.setDirty(),_t(kt,an,Wt,un))})($e,Fe,ft,it)}})(j,f,m),j.clear({color:a.Color.transparent});for(var J=0;J<b.length;J++){var te=b[J];if(!y.hasRenderableParent(te)){var ue=y.getTile(te),Te=ue.getBucket(m);if(Te){var be=Te.programConfigurations.get(m.id),_e=f.useProgram("heatmap",be),ve=f.transform.zoom;_e.draw(j,P.TRIANGLES,F,U,$,vt.disabled,as(te.posMatrix,ue,ve,m.paint.get("heatmap-intensity")),m.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,m.paint,f.transform.zoom,be)}}}j.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),(function($e,Fe){var rt=$e.context,et=rt.gl,it=Fe.heatmapFbo;if(it){rt.activeTexture.set(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,it.colorAttachment.get()),rt.activeTexture.set(et.TEXTURE1);var ft=Fe.colorRampTexture;ft||(ft=Fe.colorRampTexture=new a.Texture(rt,Fe.colorRamp,et.RGBA)),ft.bind(et.LINEAR,et.CLAMP_TO_EDGE),$e.useProgram("heatmapTexture").draw(rt,et.TRIANGLES,fr.disabled,Ti.disabled,$e.colorModeForRenderPass(),vt.disabled,(function(_t,kt,an,Wt){var un=a.create();a.ortho(un,0,_t.width,_t.height,0,0,1);var Zt=_t.context.gl;return{u_matrix:un,u_world:[Zt.drawingBufferWidth,Zt.drawingBufferHeight],u_image:an,u_color_ramp:Wt,u_opacity:kt.paint.get("heatmap-opacity")}})($e,Fe,0,1),Fe.id,$e.viewportBuffer,$e.quadTriangleIndexBuffer,$e.viewportSegments,Fe.paint,$e.transform.zoom)}})(f,m))},line:function(f,y,m,b){if(f.renderPass==="translucent"){var j=m.paint.get("line-opacity"),P=m.paint.get("line-width");if(j.constantOr(1)!==0&&P.constantOr(1)!==0){var F=f.depthModeForSublayer(0,fr.ReadOnly),U=f.colorModeForRenderPass(),$=m.paint.get("line-dasharray"),J=m.paint.get("line-pattern"),te=J.constantOr(1),ue=m.paint.get("line-gradient"),Te=m.getCrossfadeParameters(),be=$?"lineSDF":te?"linePattern":ue?"lineGradient":"line",_e=f.context,ve=_e.gl,$e=!0;if(ue){_e.activeTexture.set(ve.TEXTURE0);var Fe=m.gradientTexture;if(!m.gradient)return;Fe||(Fe=m.gradientTexture=new a.Texture(_e,m.gradient,ve.RGBA)),Fe.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}for(var rt=0,et=b;rt<et.length;rt+=1){var it=et[rt],ft=y.getTile(it);if(!te||ft.patternsLoaded()){var _t=ft.getBucket(m);if(_t){var kt=_t.programConfigurations.get(m.id),an=f.context.program.get(),Wt=f.useProgram(be,kt),un=$e||Wt.program!==an,Zt=J.constantOr(null);if(Zt&&ft.imageAtlas){var xn=ft.imageAtlas,Qt=xn.patternPositions[Zt.to.toString()],jn=xn.patternPositions[Zt.from.toString()];Qt&&jn&&kt.setConstantPatternPositions(Qt,jn)}var Gn=$?Pu(f,ft,m,$,Te):te?Hl(f,ft,m,Te):ue?yp(f,ft,m):bl(f,ft,m);$&&(un||f.lineAtlas.dirty)?(_e.activeTexture.set(ve.TEXTURE0),f.lineAtlas.bind(_e)):te&&(_e.activeTexture.set(ve.TEXTURE0),ft.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),kt.updatePatternPaintBuffers(Te)),Wt.draw(_e,ve.TRIANGLES,F,f.stencilModeForClipping(it),U,vt.disabled,Gn,m.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,m.paint,f.transform.zoom,kt),$e=!1}}}}}},fill:function(f,y,m,b){var j=m.paint.get("fill-color"),P=m.paint.get("fill-opacity");if(P.constantOr(1)!==0){var F=f.colorModeForRenderPass(),U=m.paint.get("fill-pattern"),$=f.opaquePassEnabledForLayer()&&!U.constantOr(1)&&j.constantOr(a.Color.transparent).a===1&&P.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===$){var J=f.depthModeForSublayer(1,f.renderPass==="opaque"?fr.ReadWrite:fr.ReadOnly);Xd(f,y,m,b,J,F,!1)}if(f.renderPass==="translucent"&&m.paint.get("fill-antialias")){var te=f.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,fr.ReadOnly);Xd(f,y,m,b,te,F,!0)}}},"fill-extrusion":function(f,y,m,b){var j=m.paint.get("fill-extrusion-opacity");if(j!==0&&f.renderPass==="translucent"){var P=new fr(f.context.gl.LEQUAL,fr.ReadWrite,f.depthRangeFor3D);if(j!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))ho(f,y,m,b,P,Ti.disabled,Fr.disabled),ho(f,y,m,b,P,f.stencilModeFor3D(),f.colorModeForRenderPass());else{var F=f.colorModeForRenderPass();ho(f,y,m,b,P,Ti.disabled,F)}}},hillshade:function(f,y,m,b){if(f.renderPass==="offscreen"||f.renderPass==="translucent"){for(var j=f.context,P=y.getSource().maxzoom,F=f.depthModeForSublayer(0,fr.ReadOnly),U=f.colorModeForRenderPass(),$=f.renderPass==="translucent"?f.stencilConfigForOverlap(b):[{},b],J=$[0],te=0,ue=$[1];te<ue.length;te+=1){var Te=ue[te],be=y.getTile(Te);be.needsHillshadePrepare&&f.renderPass==="offscreen"?Xl(f,be,m,P,F,Ti.disabled,U):f.renderPass==="translucent"&&cg(f,be,m,F,J[Te.overscaledZ],U)}j.viewport.set([0,0,f.width,f.height])}},raster:function(f,y,m,b){if(f.renderPass==="translucent"&&m.paint.get("raster-opacity")!==0&&b.length)for(var j=f.context,P=j.gl,F=y.getSource(),U=f.useProgram("raster"),$=f.colorModeForRenderPass(),J=F instanceof pe?[{},b]:f.stencilConfigForOverlap(b),te=J[0],ue=J[1],Te=ue[ue.length-1].overscaledZ,be=!f.options.moving,_e=0,ve=ue;_e<ve.length;_e+=1){var $e=ve[_e],Fe=f.depthModeForSublayer($e.overscaledZ-Te,m.paint.get("raster-opacity")===1?fr.ReadWrite:fr.ReadOnly,P.LESS),rt=y.getTile($e),et=f.transform.calculatePosMatrix($e.toUnwrapped(),be);rt.registerFadeDuration(m.paint.get("raster-fade-duration"));var it=y.findLoadedParent($e,0),ft=xp(rt,it,y,m,f.transform),_t=void 0,kt=void 0,an=m.paint.get("raster-resampling")==="nearest"?P.NEAREST:P.LINEAR;j.activeTexture.set(P.TEXTURE0),rt.texture.bind(an,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),j.activeTexture.set(P.TEXTURE1),it?(it.texture.bind(an,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),_t=Math.pow(2,it.tileID.overscaledZ-rt.tileID.overscaledZ),kt=[rt.tileID.canonical.x*_t%1,rt.tileID.canonical.y*_t%1]):rt.texture.bind(an,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST);var Wt=Ou(et,kt||[0,0],_t||1,ft,m);F instanceof pe?U.draw(j,P.TRIANGLES,Fe,Ti.disabled,$,vt.disabled,Wt,m.id,F.boundsBuffer,f.quadTriangleIndexBuffer,F.boundsSegments):U.draw(j,P.TRIANGLES,Fe,te[$e.overscaledZ],$,vt.disabled,Wt,m.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,y,m){var b=m.paint.get("background-color"),j=m.paint.get("background-opacity");if(j!==0){var P=f.context,F=P.gl,U=f.transform,$=U.tileSize,J=m.paint.get("background-pattern");if(!f.isPatternMissing(J)){var te=!J&&b.a===1&&j===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass===te){var ue=Ti.disabled,Te=f.depthModeForSublayer(0,te==="opaque"?fr.ReadWrite:fr.ReadOnly),be=f.colorModeForRenderPass(),_e=f.useProgram(J?"backgroundPattern":"background"),ve=U.coveringTiles({tileSize:$});J&&(P.activeTexture.set(F.TEXTURE0),f.imageManager.bind(f.context));for(var $e=m.getCrossfadeParameters(),Fe=0,rt=ve;Fe<rt.length;Fe+=1){var et=rt[Fe],it=f.transform.calculatePosMatrix(et.toUnwrapped()),ft=J?Lu(it,j,f,J,{tileID:et,tileSize:$},$e):rf(it,j,b);_e.draw(P,F.TRIANGLES,Te,ue,be,vt.disabled,ft,m.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}}}},debug:function(f,y,m){for(var b=0;b<m.length;b++)Lc(f,y,m[b])},custom:function(f,y,m){var b=f.context,j=m.implementation;if(f.renderPass==="offscreen"){var P=j.prerender;P&&(f.setCustomLayerDefaults(),b.setColorMode(f.colorModeForRenderPass()),P.call(j,b.gl,f.transform.customLayerMatrix()),b.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),b.setColorMode(f.colorModeForRenderPass()),b.setStencilMode(Ti.disabled);var F=j.renderingMode==="3d"?new fr(f.context.gl.LEQUAL,fr.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,fr.ReadOnly);b.setDepthMode(F),j.render(b.gl,f.transform.customLayerMatrix()),b.setDirty(),f.setBaseState(),b.bindFramebuffer.set(null)}}},ai=function(f,y){this.context=new Yt(f),this.transform=y,this._tileTextures={},this.setup(),this.numSublayers=Ja.maxUnderzooming+Ja.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new a.ProgramConfiguration,this.crossTileSymbolIndex=new jc,this.gpuTimers={}};function Kd(f,y){if(f.y>y.y){var m=f;f=y,y=m}return{x0:f.x,y0:f.y,x1:y.x,y1:y.y,dx:y.x-f.x,dy:y.y-f.y}}function Yd(f,y,m,b,j){var P=Math.max(m,Math.floor(y.y0)),F=Math.min(b,Math.ceil(y.y1));if(f.x0===y.x0&&f.y0===y.y0?f.x0+y.dy/f.dy*f.dx<y.x1:f.x1-y.dy/f.dy*f.dx<y.x0){var U=f;f=y,y=U}for(var $=f.dx/f.dy,J=y.dx/y.dy,te=f.dx>0,ue=y.dx<0,Te=P;Te<F;Te++){var be=$*Math.max(0,Math.min(f.dy,Te+te-f.y0))+f.x0,_e=J*Math.max(0,Math.min(y.dy,Te+ue-y.y0))+y.x0;j(Math.floor(_e),Math.ceil(be),Te)}}function _l(f,y,m,b,j,P){var F,U=Kd(f,y),$=Kd(y,m),J=Kd(m,f);U.dy>$.dy&&(F=U,U=$,$=F),U.dy>J.dy&&(F=U,U=J,J=F),$.dy>J.dy&&(F=$,$=J,J=F),U.dy&&Yd(J,U,b,j,P),$.dy&&Yd(J,$,b,j,P)}ai.prototype.resize=function(f,y){var m=this.context.gl;if(this.width=f*a.browser.devicePixelRatio,this.height=y*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var b=0,j=this.style._order;b<j.length;b+=1){var P=j[b];this.style._layers[P].resize()}this.depthRbo&&(m.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},ai.prototype.setup=function(){var f=this.context,y=new a.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(a.EXTENT,0),y.emplaceBack(0,a.EXTENT),y.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(y,yl.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var m=new a.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(a.EXTENT,0),m.emplaceBack(0,a.EXTENT),m.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=f.createVertexBuffer(m,yl.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var b=new a.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(a.EXTENT,0,a.EXTENT,0),b.emplaceBack(0,a.EXTENT,0,a.EXTENT),b.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=f.createVertexBuffer(b,Ce.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var j=new a.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(1,0),j.emplaceBack(0,1),j.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(j,yl.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var P=new a.StructArrayLayout1ui2;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=f.createIndexBuffer(P);var F=new a.StructArrayLayout3ui6;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(F);var U=this.context.gl;this.stencilClearMode=new Ti({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO)},ai.prototype.clearStencil=function(){var f=this.context,y=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var m=a.create();a.ortho(m,0,this.width,this.height,0,0,1),a.scale(m,m,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(f,y.TRIANGLES,fr.disabled,this.stencilClearMode,Fr.disabled,vt.disabled,Oc(m),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ai.prototype._renderTileClippingMasks=function(f,y){if(this.currentStencilSource!==f.source&&f.isTileClipped()&&y&&y.length){this.currentStencilSource=f.source;var m=this.context,b=m.gl;this.nextStencilID+y.length>256&&this.clearStencil(),m.setColorMode(Fr.disabled),m.setDepthMode(fr.disabled);var j=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var P=0,F=y;P<F.length;P+=1){var U=F[P],$=this._tileClippingMaskIDs[U.key]=this.nextStencilID++;j.draw(m,b.TRIANGLES,fr.disabled,new Ti({func:b.ALWAYS,mask:0},$,255,b.KEEP,b.KEEP,b.REPLACE),Fr.disabled,vt.disabled,Oc(U.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ai.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var f=this.nextStencilID++,y=this.context.gl;return new Ti({func:y.NOTEQUAL,mask:255},f,255,y.KEEP,y.KEEP,y.REPLACE)},ai.prototype.stencilModeForClipping=function(f){var y=this.context.gl;return new Ti({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,y.KEEP,y.KEEP,y.REPLACE)},ai.prototype.stencilConfigForOverlap=function(f){var y,m=this.context.gl,b=f.sort((function($,J){return J.overscaledZ-$.overscaledZ})),j=b[b.length-1].overscaledZ,P=b[0].overscaledZ-j+1;if(P>1){this.currentStencilSource=void 0,this.nextStencilID+P>256&&this.clearStencil();for(var F={},U=0;U<P;U++)F[U+j]=new Ti({func:m.GEQUAL,mask:255},U+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=P,[F,b]}return[(y={},y[j]=Ti.disabled,y),b]},ai.prototype.colorModeForRenderPass=function(){var f=this.context.gl;return this._showOverdrawInspector?new Fr([f.CONSTANT_COLOR,f.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Fr.unblended:Fr.alphaBlended},ai.prototype.depthModeForSublayer=function(f,y,m){if(!this.opaquePassEnabledForLayer())return fr.disabled;var b=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new fr(m||this.context.gl.LEQUAL,y,[b,b])},ai.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ai.prototype.render=function(f,y){var m=this;this.style=f,this.options=y,this.lineAtlas=f.lineAtlas,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var b=this.style._order,j=this.style.sourceCaches;for(var P in j){var F=j[P];F.used&&F.prepare(this.context)}var U,$,J={},te={},ue={};for(var Te in j){var be=j[Te];J[Te]=be.getVisibleCoordinates(),te[Te]=J[Te].slice().reverse(),ue[Te]=be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _e=0;_e<b.length;_e++){var ve=b[_e];if(this.style._layers[ve].is3D()){this.opaquePassCutoff=_e;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var $e=0,Fe=b;$e<Fe.length;$e+=1){var rt=Fe[$e],et=this.style._layers[rt];if(et.hasOffscreenPass()&&!et.isHidden(this.transform.zoom)){var it=te[et.source];(et.type==="custom"||it.length)&&this.renderLayer(this,j[et.source],et,it)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(f._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){var ft=this.style._layers[b[this.currentLayer]],_t=j[ft.source],kt=J[ft.source];this._renderTileClippingMasks(ft,kt),this.renderLayer(this,_t,ft,kt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){var an=this.style._layers[b[this.currentLayer]],Wt=j[an.source],un=(an.type==="symbol"?ue:te)[an.source];this._renderTileClippingMasks(an,J[an.source]),this.renderLayer(this,Wt,an,un)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach((function(Zt){Zt.source&&!Zt.isHidden(m.transform.zoom)&&(Zt.source!==($&&$.id)&&($=m.style.sourceCaches[Zt.source]),(!U||U.getSource().maxzoom<$.getSource().maxzoom)&&(U=$))})),U&&fo.debug(this,U,U.getVisibleCoordinates())),this.context.setDefault()},ai.prototype.setupOffscreenDepthRenderbuffer=function(){var f=this.context;this.depthRbo||(this.depthRbo=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,this.width,this.height))},ai.prototype.renderLayer=function(f,y,m,b){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||b.length)&&(this.id=m.id,this.gpuTimingStart(m),fo[m.type](f,y,m,b,this.style.placement.variableOffsets),this.gpuTimingEnd())},ai.prototype.gpuTimingStart=function(f){if(this.options.gpuTiming){var y=this.context.extTimerQuery,m=this.gpuTimers[f.id];m||(m=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:y.createQueryEXT()}),m.calls++,y.beginQueryEXT(y.TIME_ELAPSED_EXT,m.query)}},ai.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}},ai.prototype.collectGpuTimers=function(){var f=this.gpuTimers;return this.gpuTimers={},f},ai.prototype.queryGpuTimers=function(f){var y={};for(var m in f){var b=f[m],j=this.context.extTimerQuery,P=j.getQueryObjectEXT(b.query,j.QUERY_RESULT_EXT)/1e6;j.deleteQueryEXT(b.query),y[m]=P}return y},ai.prototype.translatePosMatrix=function(f,y,m,b,j){if(!m[0]&&!m[1])return f;var P=j?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(P){var F=Math.sin(P),U=Math.cos(P);m=[m[0]*U-m[1]*F,m[0]*F+m[1]*U]}var $=[j?m[0]:Jn(y,m[0],this.transform.zoom),j?m[1]:Jn(y,m[1],this.transform.zoom),0],J=new Float32Array(16);return a.translate(J,f,$),J},ai.prototype.saveTileTexture=function(f){var y=this._tileTextures[f.size[0]];y?y.push(f):this._tileTextures[f.size[0]]=[f]},ai.prototype.getTileTexture=function(f){var y=this._tileTextures[f];return y&&y.length>0?y.pop():null},ai.prototype.isPatternMissing=function(f){if(!f)return!1;var y=this.imageManager.getPattern(f.from.toString()),m=this.imageManager.getPattern(f.to.toString());return!y||!m},ai.prototype.useProgram=function(f,y){y===void 0&&(y=this.emptyProgramConfiguration),this.cache=this.cache||{};var m=""+f+(y.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[m]||(this.cache[m]=new Bd(this.context,di[f],y,$l[f],this._showOverdrawInspector)),this.cache[m]},ai.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ai.prototype.setBaseState=function(){var f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)};var xr=function(f,y,m,b,j){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=j===void 0||j,this._minZoom=f||0,this._maxZoom=y||22,this._minPitch=m??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},oi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};xr.prototype.clone=function(){var f=new xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return f.tileSize=this.tileSize,f.latRange=this.latRange,f.width=this.width,f.height=this.height,f._center=this._center,f.zoom=this.zoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._unmodified=this._unmodified,f._calcMatrices(),f},oi.minZoom.get=function(){return this._minZoom},oi.minZoom.set=function(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))},oi.maxZoom.get=function(){return this._maxZoom},oi.maxZoom.set=function(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))},oi.minPitch.get=function(){return this._minPitch},oi.minPitch.set=function(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))},oi.maxPitch.get=function(){return this._maxPitch},oi.maxPitch.set=function(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))},oi.renderWorldCopies.get=function(){return this._renderWorldCopies},oi.renderWorldCopies.set=function(f){f===void 0?f=!0:f===null&&(f=!1),this._renderWorldCopies=f},oi.worldSize.get=function(){return this.tileSize*this.scale},oi.centerPoint.get=function(){return this.size._div(2)},oi.size.get=function(){return new a.Point(this.width,this.height)},oi.bearing.get=function(){return-this.angle/Math.PI*180},oi.bearing.set=function(f){var y=-a.wrap(f,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},oi.pitch.get=function(){return this._pitch/Math.PI*180},oi.pitch.set=function(f){var y=a.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())},oi.fov.get=function(){return this._fov/Math.PI*180},oi.fov.set=function(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=f/180*Math.PI,this._calcMatrices())},oi.zoom.get=function(){return this._zoom},oi.zoom.set=function(f){var y=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.scale=this.zoomScale(y),this.tileZoom=Math.floor(y),this.zoomFraction=y-this.tileZoom,this._constrain(),this._calcMatrices())},oi.center.get=function(){return this._center},oi.center.set=function(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._constrain(),this._calcMatrices())},xr.prototype.coveringZoomLevel=function(f){var y=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,y)},xr.prototype.getVisibleUnwrappedCoordinates=function(f){var y=[new a.UnwrappedTileID(0,f)];if(this._renderWorldCopies)for(var m=this.pointCoordinate(new a.Point(0,0)),b=this.pointCoordinate(new a.Point(this.width,0)),j=this.pointCoordinate(new a.Point(this.width,this.height)),P=this.pointCoordinate(new a.Point(0,this.height)),F=Math.floor(Math.min(m.x,b.x,j.x,P.x)),U=Math.floor(Math.max(m.x,b.x,j.x,P.x)),$=F-1;$<=U+1;$++)$!==0&&y.push(new a.UnwrappedTileID($,f));return y},xr.prototype.coveringTiles=function(f){var y=this.coveringZoomLevel(f),m=y;if(f.minzoom!==void 0&&y<f.minzoom)return[];f.maxzoom!==void 0&&y>f.maxzoom&&(y=f.maxzoom);var b=a.MercatorCoordinate.fromLngLat(this.center),j=Math.pow(2,y),P=new a.Point(j*b.x-.5,j*b.y-.5);return(function(F,U,$,J){J===void 0&&(J=!0);var te=1<<F,ue={};function Te(_e,ve,$e){var Fe,rt,et,it;if($e>=0&&$e<=te)for(Fe=_e;Fe<ve;Fe++)rt=Math.floor(Fe/te),et=(Fe%te+te)%te,rt!==0&&J!==!0||(it=new a.OverscaledTileID($,rt,F,et,$e),ue[it.key]=it)}var be=U.map((function(_e){return new a.Point(_e.x,_e.y)._mult(te)}));return _l(be[0],be[1],be[2],0,te,Te),_l(be[2],be[3],be[0],0,te,Te),Object.keys(ue).map((function(_e){return ue[_e]}))})(y,[this.pointCoordinate(new a.Point(0,0)),this.pointCoordinate(new a.Point(this.width,0)),this.pointCoordinate(new a.Point(this.width,this.height)),this.pointCoordinate(new a.Point(0,this.height))],f.reparseOverscaled?m:y,this._renderWorldCopies).sort((function(F,U){return P.dist(F.canonical)-P.dist(U.canonical)}))},xr.prototype.resize=function(f,y){this.width=f,this.height=y,this.pixelsToGLUnits=[2/f,-2/y],this._constrain(),this._calcMatrices()},oi.unmodified.get=function(){return this._unmodified},xr.prototype.zoomScale=function(f){return Math.pow(2,f)},xr.prototype.scaleZoom=function(f){return Math.log(f)/Math.LN2},xr.prototype.project=function(f){var y=a.clamp(f.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(f.lng)*this.worldSize,a.mercatorYfromLat(y)*this.worldSize)},xr.prototype.unproject=function(f){return new a.MercatorCoordinate(f.x/this.worldSize,f.y/this.worldSize).toLngLat()},oi.point.get=function(){return this.project(this.center)},xr.prototype.setLocationAtPoint=function(f,y){var m=this.pointCoordinate(y),b=this.pointCoordinate(this.centerPoint),j=this.locationCoordinate(f),P=new a.MercatorCoordinate(j.x-(m.x-b.x),j.y-(m.y-b.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())},xr.prototype.locationPoint=function(f){return this.coordinatePoint(this.locationCoordinate(f))},xr.prototype.pointLocation=function(f){return this.coordinateLocation(this.pointCoordinate(f))},xr.prototype.locationCoordinate=function(f){return a.MercatorCoordinate.fromLngLat(f)},xr.prototype.coordinateLocation=function(f){return f.toLngLat()},xr.prototype.pointCoordinate=function(f){var y=[f.x,f.y,0,1],m=[f.x,f.y,1,1];a.transformMat4(y,y,this.pixelMatrixInverse),a.transformMat4(m,m,this.pixelMatrixInverse);var b=y[3],j=m[3],P=y[0]/b,F=m[0]/j,U=y[1]/b,$=m[1]/j,J=y[2]/b,te=m[2]/j,ue=J===te?0:(0-J)/(te-J);return new a.MercatorCoordinate(a.number(P,F,ue)/this.worldSize,a.number(U,$,ue)/this.worldSize)},xr.prototype.coordinatePoint=function(f){var y=[f.x*this.worldSize,f.y*this.worldSize,0,1];return a.transformMat4(y,y,this.pixelMatrix),new a.Point(y[0]/y[3],y[1]/y[3])},xr.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},xr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},xr.prototype.setMaxBounds=function(f){f?(this.lngRange=[f.getWest(),f.getEast()],this.latRange=[f.getSouth(),f.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},xr.prototype.calculatePosMatrix=function(f,y){y===void 0&&(y=!1);var m=f.key,b=y?this._alignedPosMatrixCache:this._posMatrixCache;if(b[m])return b[m];var j=f.canonical,P=this.worldSize/this.zoomScale(j.z),F=j.x+Math.pow(2,j.z)*f.wrap,U=a.identity(new Float64Array(16));return a.translate(U,U,[F*P,j.y*P,0]),a.scale(U,U,[P/a.EXTENT,P/a.EXTENT,1]),a.multiply(U,y?this.alignedProjMatrix:this.projMatrix,U),b[m]=new Float32Array(U),b[m]},xr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},xr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var f,y,m,b,j=-90,P=90,F=-180,U=180,$=this.size,J=this._unmodified;if(this.latRange){var te=this.latRange;j=a.mercatorYfromLat(te[1])*this.worldSize,f=(P=a.mercatorYfromLat(te[0])*this.worldSize)-j<$.y?$.y/(P-j):0}if(this.lngRange){var ue=this.lngRange;F=a.mercatorXfromLng(ue[0])*this.worldSize,y=(U=a.mercatorXfromLng(ue[1])*this.worldSize)-F<$.x?$.x/(U-F):0}var Te=this.point,be=Math.max(y||0,f||0);if(be)return this.center=this.unproject(new a.Point(y?(U+F)/2:Te.x,f?(P+j)/2:Te.y)),this.zoom+=this.scaleZoom(be),this._unmodified=J,void(this._constraining=!1);if(this.latRange){var _e=Te.y,ve=$.y/2;_e-ve<j&&(b=j+ve),_e+ve>P&&(b=P-ve)}if(this.lngRange){var $e=Te.x,Fe=$.x/2;$e-Fe<F&&(m=F+Fe),$e+Fe>U&&(m=U-Fe)}m===void 0&&b===void 0||(this.center=this.unproject(new a.Point(m!==void 0?m:Te.x,b!==void 0?b:Te.y))),this._unmodified=J,this._constraining=!1}},xr.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var f=this._fov/2,y=Math.PI/2+this._pitch,m=Math.sin(f)*this.cameraToCenterDistance/Math.sin(Math.PI-y-f),b=this.point,j=b.x,P=b.y,F=1.01*(Math.cos(Math.PI/2-this._pitch)*m+this.cameraToCenterDistance),U=this.height/50,$=new Float64Array(16);a.perspective($,this._fov,this.width/this.height,U,F),a.scale($,$,[1,-1,1]),a.translate($,$,[0,0,-this.cameraToCenterDistance]),a.rotateX($,$,this._pitch),a.rotateZ($,$,this.angle),a.translate($,$,[-j,-P,0]),this.mercatorMatrix=a.scale([],$,[this.worldSize,this.worldSize,this.worldSize]),a.scale($,$,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=$;var J=this.width%2/2,te=this.height%2/2,ue=Math.cos(this.angle),Te=Math.sin(this.angle),be=j-Math.round(j)+ue*J+Te*te,_e=P-Math.round(P)+ue*te+Te*J,ve=new Float64Array($);if(a.translate(ve,ve,[be>.5?be-1:be,_e>.5?_e-1:_e,0]),this.alignedProjMatrix=ve,$=a.create(),a.scale($,$,[this.width/2,-this.height/2,1]),a.translate($,$,[1,-1,0]),this.labelPlaneMatrix=$,$=a.create(),a.scale($,$,[1,-1,1]),a.translate($,$,[-1,-1,0]),a.scale($,$,[2/this.width,2/this.height,1]),this.glCoordMatrix=$,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!($=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=$,this._posMatrixCache={},this._alignedPosMatrixCache={}}},xr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var f=this.pointCoordinate(new a.Point(0,0)),y=[f.x*this.worldSize,f.y*this.worldSize,0,1];return a.transformMat4(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance},xr.prototype.getCameraPoint=function(){var f=this._pitch,y=Math.tan(f)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,y))},xr.prototype.getCameraQueryGeometry=function(f){var y=this.getCameraPoint();if(f.length===1)return[f[0],y];for(var m=y.x,b=y.y,j=y.x,P=y.y,F=0,U=f;F<U.length;F+=1){var $=U[F];m=Math.min(m,$.x),b=Math.min(b,$.y),j=Math.max(j,$.x),P=Math.max(P,$.y)}return[new a.Point(m,b),new a.Point(j,b),new a.Point(j,P),new a.Point(m,P),new a.Point(m,b)]},Object.defineProperties(xr.prototype,oi);var wl=function(f){var y,m,b,j,P;this._hashName=f&&encodeURIComponent(f),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(y=this._updateHashUnthrottled.bind(this),m=300,b=!1,j=null,P=function(){j=null,b&&(y(),j=setTimeout(P,m),b=!1)},function(){return b=!0,j||P(),j})};wl.prototype.addTo=function(f){return this._map=f,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},wl.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},wl.prototype.getHashString=function(f){var y=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,b=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),j=Math.pow(10,b),P=Math.round(y.lng*j)/j,F=Math.round(y.lat*j)/j,U=this._map.getBearing(),$=this._map.getPitch(),J="";if(J+=f?"/"+P+"/"+F+"/"+m:m+"/"+F+"/"+P,(U||$)&&(J+="/"+Math.round(10*U)/10),$&&(J+="/"+Math.round($)),this._hashName){var te=this._hashName,ue=!1,Te=a.window.location.hash.slice(1).split("&").map((function(be){var _e=be.split("=")[0];return _e===te?(ue=!0,_e+"="+J):be})).filter((function(be){return be}));return ue||Te.push(te+"="+J),"#"+Te.join("&")}return"#"+J},wl.prototype._getCurrentHash=function(){var f,y=this,m=a.window.location.hash.replace("#","");return this._hashName?(m.split("&").map((function(b){return b.split("=")})).forEach((function(b){b[0]===y._hashName&&(f=b)})),(f&&f[1]||"").split("/")):m.split("/")},wl.prototype._onHashChange=function(){var f=this._getCurrentHash();return f.length>=3&&!f.some((function(y){return isNaN(y)}))&&(this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:+(f[3]||0),pitch:+(f[4]||0)}),!0)},wl.prototype._updateHashUnthrottled=function(){var f=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",f)}catch{}};var sa=(function(f){function y(b,j,P,F){F===void 0&&(F={});var U=x.mousePos(j.getCanvasContainer(),P),$=j.unproject(U);f.call(this,b,a.extend({point:U,lngLat:$,originalEvent:P},F)),this._defaultPrevented=!1,this.target=j}f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y;var m={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,m),y})(a.Event),fn=(function(f){function y(b,j,P){var F=x.touchPos(j.getCanvasContainer(),P),U=F.map((function(te){return j.unproject(te)})),$=F.reduce((function(te,ue,Te,be){return te.add(ue.div(be.length))}),new a.Point(0,0)),J=j.unproject($);f.call(this,b,{points:F,point:$,lngLats:U,lngLat:J,originalEvent:P}),this._defaultPrevented=!1}f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y;var m={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,m),y})(a.Event),Kl=(function(f){function y(b,j,P){f.call(this,b,{originalEvent:P}),this._defaultPrevented=!1}f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y;var m={defaultPrevented:{configurable:!0}};return y.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(y.prototype,m),y})(a.Event),Ha=function(f){this._map=f,this._el=f.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ha.prototype.setZoomRate=function(f){this._defaultZoomRate=f},Ha.prototype.setWheelZoomRate=function(f){this._wheelZoomRate=f},Ha.prototype.isEnabled=function(){return!!this._enabled},Ha.prototype.isActive=function(){return!!this._active},Ha.prototype.isZooming=function(){return!!this._zooming},Ha.prototype.enable=function(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=f&&f.around==="center")},Ha.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ha.prototype.onWheel=function(f){if(this.isEnabled()){var y=f.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY,m=a.browser.now(),b=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,y!==0&&y%4.000244140625==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(b*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),f.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=f,this._delta-=y,this.isActive()||this._start(f)),f.preventDefault()}},Ha.prototype._onTimeout=function(f){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(f)},Ha.prototype._start=function(f){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new a.Event("movestart",{originalEvent:f})),this._map.fire(new a.Event("zoomstart",{originalEvent:f}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var y=x.mousePos(this._el,f);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Ha.prototype._onScrollFrame=function(){var f=this;if(this._frameId=null,this.isActive()){var y=this._map.transform;if(this._delta!==0){var m=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,b=2/(1+Math.exp(-Math.abs(this._delta*m)));this._delta<0&&b!==0&&(b=1/b);var j=typeof this._targetZoom=="number"?y.zoomScale(this._targetZoom):y.scale;this._targetZoom=Math.min(y.maxZoom,Math.max(y.minZoom,y.scaleZoom(j*b))),this._type==="wheel"&&(this._startZoom=y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var P=typeof this._targetZoom=="number"?this._targetZoom:y.zoom,F=this._startZoom,U=this._easing,$=!1;if(this._type==="wheel"&&F&&U){var J=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),te=U(J);y.zoom=a.number(F,P,te),J<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):$=!0}else y.zoom=P,$=!0;y.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new a.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new a.Event("zoom",{originalEvent:this._lastWheelEvent})),$&&(this._active=!1,this._finishTimeout=setTimeout((function(){f._zooming=!1,f._map.fire(new a.Event("zoomend",{originalEvent:f._lastWheelEvent})),f._map.fire(new a.Event("moveend",{originalEvent:f._lastWheelEvent})),delete f._targetZoom}),200))}},Ha.prototype._smoothOutEasing=function(f){var y=a.ease;if(this._prevEase){var m=this._prevEase,b=(a.browser.now()-m.start)/m.duration,j=m.easing(b+.01)-m.easing(b),P=.27/Math.sqrt(j*j+1e-4)*.01,F=Math.sqrt(.0729-P*P);y=a.bezier(P,F,.25,1)}return this._prevEase={start:a.browser.now(),duration:f,easing:y},y};var No=function(f,y){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=y.clickTolerance||1,a.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};No.prototype.isEnabled=function(){return!!this._enabled},No.prototype.isActive=function(){return!!this._active},No.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},No.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},No.prototype.onMouseDown=function(f){this.isEnabled()&&f.shiftKey&&f.button===0&&(a.window.document.addEventListener("mousemove",this._onMouseMove,!1),a.window.document.addEventListener("keydown",this._onKeyDown,!1),a.window.document.addEventListener("mouseup",this._onMouseUp,!1),x.disableDrag(),this._startPos=this._lastPos=x.mousePos(this._el,f),this._active=!0)},No.prototype._onMouseMove=function(f){var y=x.mousePos(this._el,f);if(!(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)){var m=this._startPos;this._lastPos=y,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));var b=Math.min(m.x,y.x),j=Math.max(m.x,y.x),P=Math.min(m.y,y.y),F=Math.max(m.y,y.y);x.setTransform(this._box,"translate("+b+"px,"+P+"px)"),this._box.style.width=j-b+"px",this._box.style.height=F-P+"px"}},No.prototype._onMouseUp=function(f){if(f.button===0){var y=this._startPos,m=x.mousePos(this._el,f);this._finish(),x.suppressClick(),y.x===m.x&&y.y===m.y?this._fireEvent("boxzoomcancel",f):this._map.fitScreenCoordinates(y,m,this._map.getBearing(),{linear:!0}).fire(new a.Event("boxzoomend",{originalEvent:f}))}},No.prototype._onKeyDown=function(f){f.keyCode===27&&(this._finish(),this._fireEvent("boxzoomcancel",f))},No.prototype._finish=function(){this._active=!1,a.window.document.removeEventListener("mousemove",this._onMouseMove,!1),a.window.document.removeEventListener("keydown",this._onKeyDown,!1),a.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},No.prototype._fireEvent=function(f,y){return this._map.fire(new a.Event(f,{originalEvent:y}))};var Go=a.bezier(0,0,.25,1),ji=function(f,y){this._map=f,this._el=y.element||f.getCanvasContainer(),this._state="disabled",this._button=y.button||"right",this._bearingSnap=y.bearingSnap||0,this._pitchWithRotate=y.pitchWithRotate!==!1,a.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};ji.prototype.isEnabled=function(){return this._state!=="disabled"},ji.prototype.isActive=function(){return this._state==="active"},ji.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},ji.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},ji.prototype.onMouseDown=function(f){if(this._state==="enabled"){var y=f.type==="touchstart";if(y)this._startTime=Date.now();else if(this._button==="right"){if(this._eventButton=x.mouseButton(f),this._eventButton!==(f.ctrlKey?0:2))return}else{if(f.ctrlKey||x.mouseButton(f)!==0)return;this._eventButton=0}x.disableDrag(),y?(a.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),a.window.document.addEventListener("touchend",this._onMouseUp)):(a.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),a.window.document.addEventListener("mouseup",this._onMouseUp)),a.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[a.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=x.mousePos(this._el,f),this._center=this._map.transform.centerPoint,f.preventDefault()}},ji.prototype._onMouseMove=function(f){var y=x.mousePos(this._el,f);this._lastPos.equals(y)||(this._lastMoveEvent=f,this._lastPos=y,this._state==="pending"&&(this._state="active",this._fireEvent("rotatestart",f),this._fireEvent("movestart",f),this._pitchWithRotate&&this._fireEvent("pitchstart",f)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},ji.prototype._onDragFrame=function(){this._frameId=null;var f=this._lastMoveEvent;if(f){var y=this._map.transform,m=this._prevPos,b=this._lastPos,j=.8*(m.x-b.x),P=-.5*(m.y-b.y),F=y.bearing-j,U=y.pitch-P,$=this._inertia,J=$[$.length-1];this._drainInertiaBuffer(),$.push([a.browser.now(),this._map._normalizeBearing(F,J[1])]);var te=y.bearing;if(y.bearing=F,this._pitchWithRotate){var ue=y.pitch;y.pitch=U,y.pitch!==ue&&this._fireEvent("pitch",f)}y.bearing!==te&&this._fireEvent("rotate",f),this._fireEvent("move",f),delete this._lastMoveEvent,this._prevPos=this._lastPos}},ji.prototype._onMouseUp=function(f){var y=f.type==="touchend";if(y&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),y||x.mouseButton(f)===this._eventButton)switch(this._state){case"active":this._state="enabled",x.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(f);break;case"pending":this._state="enabled",this._unbind()}},ji.prototype._onBlur=function(f){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",f),this._pitchWithRotate&&this._fireEvent("pitchend",f),this._fireEvent("moveend",f);break;case"pending":this._state="enabled",this._unbind()}},ji.prototype._unbind=function(){a.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),a.window.document.removeEventListener("mouseup",this._onMouseUp),a.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),a.window.document.removeEventListener("touchend",this._onMouseUp),a.window.removeEventListener("blur",this._onBlur),x.enableDrag()},ji.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},ji.prototype._inertialRotate=function(f){var y=this;this._fireEvent("rotateend",f),this._drainInertiaBuffer();var m=this._map,b=m.getBearing(),j=this._inertia,P=function(){Math.abs(b)<y._bearingSnap?m.resetNorth({noMoveStart:!0},{originalEvent:f}):y._fireEvent("moveend",f),y._pitchWithRotate&&y._fireEvent("pitchend",f)};if(j.length<2)P();else{var F=j[0],U=j[j.length-1],$=j[j.length-2],J=m._normalizeBearing(b,$[1]),te=U[1]-F[1],ue=te<0?-1:1,Te=(U[0]-F[0])/1e3;if(te!==0&&Te!==0){var be=Math.abs(te*(.25/Te));be>180&&(be=180);var _e=be/180;J+=ue*be*(_e/2),Math.abs(m._normalizeBearing(J,0))<this._bearingSnap&&(J=m._normalizeBearing(0,J)),m.rotateTo(J,{duration:1e3*_e,easing:Go,noMoveStart:!0},{originalEvent:f})}else P()}},ji.prototype._fireEvent=function(f,y){return this._map.fire(new a.Event(f,y?{originalEvent:y}:{}))},ji.prototype._drainInertiaBuffer=function(){for(var f=this._inertia,y=a.browser.now();f.length>0&&y-f[0][0]>160;)f.shift()};var zc={linearity:.3,easing:a.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},$t=function(f,y){this._map=f,this._el=f.getCanvasContainer(),this._state="disabled",this._clickTolerance=y.clickTolerance||1,this._inertiaOptions=zc,a.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};$t.prototype.isEnabled=function(){return this._state!=="disabled"},$t.prototype.isActive=function(){return this._state==="active"},$t.prototype.enable=function(f){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=a.extend(zc,f))},$t.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},$t.prototype.onMouseDown=function(f){this._state==="enabled"&&(f.ctrlKey||x.mouseButton(f)!==0||(x.addEventListener(a.window.document,"mousemove",this._onMove,{capture:!0}),x.addEventListener(a.window.document,"mouseup",this._onMouseUp),this._start(f)))},$t.prototype.onTouchStart=function(f){this.isEnabled()&&(f.touches&&f.touches.length>1&&(this._state==="pending"||this._state==="active")||(x.addEventListener(a.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),x.addEventListener(a.window.document,"touchend",this._onTouchEnd),this._start(f)))},$t.prototype._start=function(f){a.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=x.mousePos(this._el,f),this._startTouch=this._lastTouch=a.window.TouchEvent&&f instanceof a.window.TouchEvent?x.touchPos(this._el,f):null,this._inertia=[[a.browser.now(),this._startPos]]},$t.prototype._touchesMatch=function(f,y){return!(!f||!y||f.length!==y.length)&&f.every((function(m,b){return y[b]===m}))},$t.prototype._onMove=function(f){f.preventDefault();var y=a.window.TouchEvent&&f instanceof a.window.TouchEvent?x.touchPos(this._el,f):null,m=x.mousePos(this._el,f);(y?this._touchesMatch(this._lastTouch,y):this._lastPos.equals(m))||this._state==="pending"&&m.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=f,this._lastPos=m,this._lastTouch=y,this._drainInertiaBuffer(),this._inertia.push([a.browser.now(),this._lastPos]),this._state==="pending"&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},$t.prototype._onDragFrame=function(){this._frameId=null;var f=this._lastMoveEvent;if(f){if(this._map.touchZoomRotate.isActive())this._abort(f);else if(this._shouldStart&&(this._fireEvent("dragstart",f),this._fireEvent("movestart",f),this._shouldStart=!1),this.isActive()){var y=this._map.transform;y.setLocationAtPoint(y.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",f),this._fireEvent("move",f),this._prevPos=this._lastPos,delete this._lastMoveEvent}}},$t.prototype._onMouseUp=function(f){if(x.mouseButton(f)===0)switch(this._state){case"active":this._state="enabled",x.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(f);break;case"pending":this._state="enabled",this._unbind()}},$t.prototype._onTouchEnd=function(f){if(f.touches&&f.touches.length!==0)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(f)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(f);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},$t.prototype._abort=function(f){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",f),this._fireEvent("moveend",f)),this._unbind(),this._deactivate(),a.window.TouchEvent&&f instanceof a.window.TouchEvent&&f.touches.length>1&&x.addEventListener(a.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},$t.prototype._onBlur=function(f){this._abort(f)},$t.prototype._unbind=function(){x.removeEventListener(a.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),x.removeEventListener(a.window.document,"touchend",this._onTouchEnd),x.removeEventListener(a.window.document,"mousemove",this._onMove,{capture:!0}),x.removeEventListener(a.window.document,"mouseup",this._onMouseUp),x.removeEventListener(a.window,"blur",this._onBlur)},$t.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},$t.prototype._inertialPan=function(f){this._fireEvent("dragend",f),this._drainInertiaBuffer();var y=this._inertia;if(y.length<2)this._fireEvent("moveend",f);else{var m=y[y.length-1],b=y[0],j=m[1].sub(b[1]),P=(m[0]-b[0])/1e3;if(P===0||m[1].equals(b[1]))this._fireEvent("moveend",f);else{var F=this._inertiaOptions,U=F.linearity,$=F.easing,J=F.maxSpeed,te=F.deceleration,ue=j.mult(U/P),Te=ue.mag();Te>J&&(Te=J,ue._unit()._mult(Te));var be=Te/(te*U),_e=ue.mult(-be/2);this._map.panBy(_e,{duration:1e3*be,easing:$,noMoveStart:!0},{originalEvent:f})}}},$t.prototype._fireEvent=function(f,y){return this._map.fire(new a.Event(f,y?{originalEvent:y}:{}))},$t.prototype._drainInertiaBuffer=function(){for(var f=this._inertia,y=a.browser.now();f.length>0&&y-f[0][0]>160;)f.shift()};var Mo=function(f){this._map=f,this._el=f.getCanvasContainer(),a.bindAll(["_onKeyDown"],this)};function bp(f){return f*(2-f)}Mo.prototype.isEnabled=function(){return!!this._enabled},Mo.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Mo.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Mo.prototype._onKeyDown=function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var y=0,m=0,b=0,j=0,P=0;switch(f.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:f.shiftKey?m=-1:(f.preventDefault(),j=-1);break;case 39:f.shiftKey?m=1:(f.preventDefault(),j=1);break;case 38:f.shiftKey?b=1:(f.preventDefault(),P=-1);break;case 40:f.shiftKey?b=-1:(P=1,f.preventDefault());break;default:return}var F=this._map,U=F.getZoom(),$={duration:300,delayEndEvents:500,easing:bp,zoom:y?Math.round(U)+y*(f.shiftKey?2:1):U,bearing:F.getBearing()+15*m,pitch:F.getPitch()+10*b,offset:[100*-j,100*-P],center:F.getCenter()};F.easeTo($,{originalEvent:f})}};var Do=function(f){this._map=f,a.bindAll(["_onDblClick","_onZoomEnd"],this)};Do.prototype.isEnabled=function(){return!!this._enabled},Do.prototype.isActive=function(){return!!this._active},Do.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Do.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Do.prototype.onTouchStart=function(f){var y=this;if(this.isEnabled()&&!(f.points.length>1))if(this._tapped){var m=f.points[0],b=this._tappedPoint;if(b&&b.dist(m)<=30){f.originalEvent.preventDefault();var j=function(){y._tapped&&y._zoom(f),y._map.off("touchcancel",P),y._resetTapped()},P=function(){y._map.off("touchend",j),y._resetTapped()};this._map.once("touchend",j),this._map.once("touchcancel",P)}else this._resetTapped()}else this._tappedPoint=f.points[0],this._tapped=setTimeout((function(){y._tapped=null,y._tappedPoint=null}),300)},Do.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Do.prototype.onDblClick=function(f){this.isEnabled()&&(f.originalEvent.preventDefault(),this._zoom(f))},Do.prototype._zoom=function(f){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(f.originalEvent.shiftKey?-1:1),{around:f.lngLat},f)},Do.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var sf=a.bezier(0,0,.15,1),po=function(f){this._map=f,this._el=f.getCanvasContainer(),a.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};po.prototype.isEnabled=function(){return!!this._enabled},po.prototype.enable=function(f){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!f&&f.around==="center")},po.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},po.prototype.disableRotation=function(){this._rotationDisabled=!0},po.prototype.enableRotation=function(){this._rotationDisabled=!1},po.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},po.prototype.onStart=function(f){if(this.isEnabled()&&f.touches.length===2){var y=x.mousePos(this._el,f.touches[0]),m=x.mousePos(this._el,f.touches[1]),b=y.add(m).div(2);this._startVec=y.sub(m),this._startAround=this._map.transform.pointLocation(b),this._gestureIntent=void 0,this._inertia=[],x.addEventListener(a.window.document,"touchmove",this._onMove,{passive:!1}),x.addEventListener(a.window.document,"touchend",this._onEnd)}},po.prototype._getTouchEventData=function(f){var y=x.mousePos(this._el,f.touches[0]),m=x.mousePos(this._el,f.touches[1]),b=y.sub(m);return{vec:b,center:y.add(m).div(2),scale:b.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*b.angleWith(this._startVec)/Math.PI}},po.prototype._onMove=function(f){if(f.touches.length===2){var y=this._getTouchEventData(f),m=y.vec,b=y.scale,j=y.bearing;if(!this._gestureIntent){var P=this._rotationDisabled&&b!==1||Math.abs(1-b)>.15;Math.abs(j)>10?this._gestureIntent="rotate":P&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new a.Event(this._gestureIntent+"start",{originalEvent:f})),this._map.fire(new a.Event("movestart",{originalEvent:f})),this._startVec=m)}this._lastTouchEvent=f,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),f.preventDefault()}},po.prototype._onTouchFrame=function(){this._frameId=null;var f=this._gestureIntent;if(f){var y=this._map.transform;this._startScale||(this._startScale=y.scale,this._startBearing=y.bearing);var m=this._getTouchEventData(this._lastTouchEvent),b=m.center,j=m.bearing,P=m.scale,F=y.pointLocation(b),U=y.locationPoint(F);f==="rotate"&&(y.bearing=this._startBearing+j),y.zoom=y.scaleZoom(this._startScale*P),y.setLocationAtPoint(this._startAround,U),this._map.fire(new a.Event(f,{originalEvent:this._lastTouchEvent})),this._map.fire(new a.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([a.browser.now(),P,b])}},po.prototype._onEnd=function(f){x.removeEventListener(a.window.document,"touchmove",this._onMove,{passive:!1}),x.removeEventListener(a.window.document,"touchend",this._onEnd);var y=this._gestureIntent,m=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,y){this._map.fire(new a.Event(y+"end",{originalEvent:f})),this._drainInertiaBuffer();var b=this._inertia,j=this._map;if(b.length<2)j.snapToNorth({},{originalEvent:f});else{var P=b[b.length-1],F=b[0],U=j.transform.scaleZoom(m*P[1]),$=j.transform.scaleZoom(m*F[1]),J=U-$,te=(P[0]-F[0])/1e3,ue=P[2];if(te!==0&&U!==$){var Te=.15*J/te;Math.abs(Te)>2.5&&(Te=Te>0?2.5:-2.5);var be=1e3*Math.abs(Te/(12*.15)),_e=U+Te*be/2e3;j.easeTo({zoom:_e,duration:be,easing:sf,around:this._aroundCenter?j.getCenter():j.unproject(ue),noMoveStart:!0},{originalEvent:f})}else j.snapToNorth({},{originalEvent:f})}}},po.prototype._drainInertiaBuffer=function(){for(var f=this._inertia,y=a.browser.now();f.length>2&&y-f[0][0]>160;)f.shift()};var _p={scrollZoom:Ha,boxZoom:No,dragRotate:ji,dragPan:$t,keyboard:Mo,doubleClickZoom:Do,touchZoomRotate:po},ug=(function(f){function y(m,b){f.call(this),this._moving=!1,this._zooming=!1,this.transform=m,this._bearingSnap=b.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},y.prototype.setCenter=function(m,b){return this.jumpTo({center:m},b)},y.prototype.panBy=function(m,b,j){return m=a.Point.convert(m).mult(-1),this.panTo(this.transform.center,a.extend({offset:m},b),j)},y.prototype.panTo=function(m,b,j){return this.easeTo(a.extend({center:m},b),j)},y.prototype.getZoom=function(){return this.transform.zoom},y.prototype.setZoom=function(m,b){return this.jumpTo({zoom:m},b),this},y.prototype.zoomTo=function(m,b,j){return this.easeTo(a.extend({zoom:m},b),j)},y.prototype.zoomIn=function(m,b){return this.zoomTo(this.getZoom()+1,m,b),this},y.prototype.zoomOut=function(m,b){return this.zoomTo(this.getZoom()-1,m,b),this},y.prototype.getBearing=function(){return this.transform.bearing},y.prototype.setBearing=function(m,b){return this.jumpTo({bearing:m},b),this},y.prototype.rotateTo=function(m,b,j){return this.easeTo(a.extend({bearing:m},b),j)},y.prototype.resetNorth=function(m,b){return this.rotateTo(0,a.extend({duration:1e3},m),b),this},y.prototype.resetNorthPitch=function(m,b){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},m),b),this},y.prototype.snapToNorth=function(m,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(m,b):this},y.prototype.getPitch=function(){return this.transform.pitch},y.prototype.setPitch=function(m,b){return this.jumpTo({pitch:m},b),this},y.prototype.cameraForBounds=function(m,b){return m=a.LngLatBounds.convert(m),this._cameraForBoxAndBearing(m.getNorthWest(),m.getSouthEast(),0,b)},y.prototype._cameraForBoxAndBearing=function(m,b,j,P){if(typeof(P=a.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},P)).padding=="number"){var F=P.padding;P.padding={top:F,bottom:F,right:F,left:F}}if(a.deepEqual(Object.keys(P.padding).sort((function(_t,kt){return _t<kt?-1:_t>kt?1:0})),["bottom","left","right","top"])){var U=this.transform,$=U.project(a.LngLat.convert(m)),J=U.project(a.LngLat.convert(b)),te=$.rotate(-j*Math.PI/180),ue=J.rotate(-j*Math.PI/180),Te=new a.Point(Math.max(te.x,ue.x),Math.max(te.y,ue.y)),be=new a.Point(Math.min(te.x,ue.x),Math.min(te.y,ue.y)),_e=Te.sub(be),ve=(U.width-P.padding.left-P.padding.right)/_e.x,$e=(U.height-P.padding.top-P.padding.bottom)/_e.y;if(!($e<0||ve<0)){var Fe=Math.min(U.scaleZoom(U.scale*Math.min(ve,$e)),P.maxZoom),rt=a.Point.convert(P.offset),et=(P.padding.left-P.padding.right)/2,it=(P.padding.top-P.padding.bottom)/2,ft=new a.Point(rt.x+et,rt.y+it).mult(U.scale/U.zoomScale(Fe));return{center:U.unproject($.add(J).div(2).sub(ft)),zoom:Fe,bearing:j}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else a.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},y.prototype.fitBounds=function(m,b,j){return this._fitInternal(this.cameraForBounds(m,b),b,j)},y.prototype.fitScreenCoordinates=function(m,b,j,P,F){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(m)),this.transform.pointLocation(a.Point.convert(b)),j,P),P,F)},y.prototype._fitInternal=function(m,b,j){return m?(b=a.extend(m,b)).linear?this.easeTo(b,j):this.flyTo(b,j):this},y.prototype.jumpTo=function(m,b){this.stop();var j=this.transform,P=!1,F=!1,U=!1;return"zoom"in m&&j.zoom!==+m.zoom&&(P=!0,j.zoom=+m.zoom),m.center!==void 0&&(j.center=a.LngLat.convert(m.center)),"bearing"in m&&j.bearing!==+m.bearing&&(F=!0,j.bearing=+m.bearing),"pitch"in m&&j.pitch!==+m.pitch&&(U=!0,j.pitch=+m.pitch),this.fire(new a.Event("movestart",b)).fire(new a.Event("move",b)),P&&this.fire(new a.Event("zoomstart",b)).fire(new a.Event("zoom",b)).fire(new a.Event("zoomend",b)),F&&this.fire(new a.Event("rotatestart",b)).fire(new a.Event("rotate",b)).fire(new a.Event("rotateend",b)),U&&this.fire(new a.Event("pitchstart",b)).fire(new a.Event("pitch",b)).fire(new a.Event("pitchend",b)),this.fire(new a.Event("moveend",b))},y.prototype.easeTo=function(m,b){var j=this;this.stop(),((m=a.extend({offset:[0,0],duration:500,easing:a.ease},m)).animate===!1||!m.essential&&a.browser.prefersReducedMotion)&&(m.duration=0);var P=this.transform,F=this.getZoom(),U=this.getBearing(),$=this.getPitch(),J="zoom"in m?+m.zoom:F,te="bearing"in m?this._normalizeBearing(m.bearing,U):U,ue="pitch"in m?+m.pitch:$,Te=P.centerPoint.add(a.Point.convert(m.offset)),be=P.pointLocation(Te),_e=a.LngLat.convert(m.center||be);this._normalizeCenter(_e);var ve,$e,Fe=P.project(be),rt=P.project(_e).sub(Fe),et=P.zoomScale(J-F);return m.around&&(ve=a.LngLat.convert(m.around),$e=P.locationPoint(ve)),this._zooming=J!==F,this._rotating=U!==te,this._pitching=ue!==$,this._prepareEase(b,m.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease((function(it){if(j._zooming&&(P.zoom=a.number(F,J,it)),j._rotating&&(P.bearing=a.number(U,te,it)),j._pitching&&(P.pitch=a.number($,ue,it)),ve)P.setLocationAtPoint(ve,$e);else{var ft=P.zoomScale(P.zoom-F),_t=J>F?Math.min(2,et):Math.max(.5,et),kt=Math.pow(_t,1-it),an=P.unproject(Fe.add(rt.mult(it*kt)).mult(ft));P.setLocationAtPoint(P.renderWorldCopies?an.wrap():an,Te)}j._fireMoveEvents(b)}),(function(){m.delayEndEvents?j._easeEndTimeoutID=setTimeout((function(){return j._afterEase(b)}),m.delayEndEvents):j._afterEase(b)}),m),this},y.prototype._prepareEase=function(m,b){this._moving=!0,b||this.fire(new a.Event("movestart",m)),this._zooming&&this.fire(new a.Event("zoomstart",m)),this._rotating&&this.fire(new a.Event("rotatestart",m)),this._pitching&&this.fire(new a.Event("pitchstart",m))},y.prototype._fireMoveEvents=function(m){this.fire(new a.Event("move",m)),this._zooming&&this.fire(new a.Event("zoom",m)),this._rotating&&this.fire(new a.Event("rotate",m)),this._pitching&&this.fire(new a.Event("pitch",m))},y.prototype._afterEase=function(m){var b=this._zooming,j=this._rotating,P=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,b&&this.fire(new a.Event("zoomend",m)),j&&this.fire(new a.Event("rotateend",m)),P&&this.fire(new a.Event("pitchend",m)),this.fire(new a.Event("moveend",m))},y.prototype.flyTo=function(m,b){var j=this;if(!m.essential&&a.browser.prefersReducedMotion){var P=a.pick(m,["center","zoom","bearing","pitch","around"]);return this.jumpTo(P,b)}this.stop(),m=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},m);var F=this.transform,U=this.getZoom(),$=this.getBearing(),J=this.getPitch(),te="zoom"in m?a.clamp(+m.zoom,F.minZoom,F.maxZoom):U,ue="bearing"in m?this._normalizeBearing(m.bearing,$):$,Te="pitch"in m?+m.pitch:J,be=F.zoomScale(te-U),_e=F.centerPoint.add(a.Point.convert(m.offset)),ve=F.pointLocation(_e),$e=a.LngLat.convert(m.center||ve);this._normalizeCenter($e);var Fe=F.project(ve),rt=F.project($e).sub(Fe),et=m.curve,it=Math.max(F.width,F.height),ft=it/be,_t=rt.mag();if("minZoom"in m){var kt=a.clamp(Math.min(m.minZoom,U,te),F.minZoom,F.maxZoom),an=it/F.zoomScale(kt-U);et=Math.sqrt(an/_t*2)}var Wt=et*et;function un(Zn){var wn=(ft*ft-it*it+(Zn?-1:1)*Wt*Wt*_t*_t)/(2*(Zn?ft:it)*Wt*_t);return Math.log(Math.sqrt(wn*wn+1)-wn)}function Zt(Zn){return(Math.exp(Zn)-Math.exp(-Zn))/2}function xn(Zn){return(Math.exp(Zn)+Math.exp(-Zn))/2}var Qt=un(0),jn=function(Zn){return xn(Qt)/xn(Qt+et*Zn)},Gn=function(Zn){return it*((xn(Qt)*(Zt(wn=Qt+et*Zn)/xn(wn))-Zt(Qt))/Wt)/_t;var wn},Fn=(un(1)-Qt)/et;if(Math.abs(_t)<1e-6||!isFinite(Fn)){if(Math.abs(it-ft)<1e-6)return this.easeTo(m,b);var Rn=ft<it?-1:1;Fn=Math.abs(Math.log(ft/it))/et,Gn=function(){return 0},jn=function(Zn){return Math.exp(Rn*et*Zn)}}if("duration"in m)m.duration=+m.duration;else{var Mr="screenSpeed"in m?+m.screenSpeed/et:+m.speed;m.duration=1e3*Fn/Mr}return m.maxDuration&&m.duration>m.maxDuration&&(m.duration=0),this._zooming=!0,this._rotating=$!==ue,this._pitching=Te!==J,this._prepareEase(b,!1),this._ease((function(Zn){var wn=Zn*Fn,yi=1/jn(wn);F.zoom=Zn===1?te:U+F.scaleZoom(yi),j._rotating&&(F.bearing=a.number($,ue,Zn)),j._pitching&&(F.pitch=a.number(J,Te,Zn));var Er=Zn===1?$e:F.unproject(Fe.add(rt.mult(Gn(wn))).mult(yi));F.setLocationAtPoint(F.renderWorldCopies?Er.wrap():Er,_e),j._fireMoveEvents(b)}),(function(){return j._afterEase(b)}),m),this},y.prototype.isEasing=function(){return!!this._easeFrameId},y.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var m=this._onEaseEnd;delete this._onEaseEnd,m.call(this)}return this},y.prototype._ease=function(m,b,j){j.animate===!1||j.duration===0?(m(1),b()):(this._easeStart=a.browser.now(),this._easeOptions=j,this._onEaseFrame=m,this._onEaseEnd=b,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},y.prototype._renderFrameCallback=function(){var m=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},y.prototype._normalizeBearing=function(m,b){m=a.wrap(m,-180,180);var j=Math.abs(m-b);return Math.abs(m-360-b)<j&&(m-=360),Math.abs(m+360-b)<j&&(m+=360),m},y.prototype._normalizeCenter=function(m){var b=this.transform;if(b.renderWorldCopies&&!b.lngRange){var j=m.lng-b.center.lng;m.lng+=j>180?-360:j<-180?360:0}},y})(a.Evented),Zo=function(f){f===void 0&&(f={}),this.options=f,a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Zo.prototype.getDefaultPosition=function(){return"bottom-right"},Zo.prototype.onAdd=function(f){var y=this.options&&this.options.compact;return this._map=f,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),y===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Zo.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Zo.prototype._updateEditLink=function(){var f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));var y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(f){var m=y.reduce((function(b,j,P){return j.value&&(b+=j.key+"="+j.value+(P<y.length-1?"&":"")),b}),"?");f.href=a.config.FEEDBACK_URL+"/"+m+(this._map._hash?this._map._hash.getHashString(!0):""),f.rel="noopener nofollow"}},Zo.prototype._updateData=function(f){!f||f.sourceDataType!=="metadata"&&f.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Zo.prototype._updateAttributions=function(){if(this._map.style){var f=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=f.concat(this.options.customAttribution.map((function(U){return typeof U!="string"?"":U}))):typeof this.options.customAttribution=="string"&&f.push(this.options.customAttribution)),this._map.style.stylesheet){var y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}var m=this._map.style.sourceCaches;for(var b in m){var j=m[b];if(j.used){var P=j.getSource();P.attribution&&f.indexOf(P.attribution)<0&&f.push(P.attribution)}}f.sort((function(U,$){return U.length-$.length}));var F=(f=f.filter((function(U,$){for(var J=$+1;J<f.length;J++)if(f[J].indexOf(U)>=0)return!1;return!0}))).join(" | ");F!==this._attribHTML&&(this._attribHTML=F,f.length?(this._innerContainer.innerHTML=F,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Zo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ks=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};ks.prototype.onAdd=function(f){this._map=f,this._container=x.create("div","mapboxgl-ctrl");var y=x.create("a","mapboxgl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://goong.io/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ks.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ks.prototype.getDefaultPosition=function(){return"bottom-left"},ks.prototype._updateLogo=function(f){f&&f.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},ks.prototype._logoRequired=function(){return!0},ks.prototype._updateCompact=function(){var f=this._container.children;if(f.length){var y=f[0];this._map.getCanvasContainer().offsetWidth<250?y.classList.add("mapboxgl-compact"):y.classList.remove("mapboxgl-compact")}};var Ws=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ws.prototype.add=function(f){var y=++this._id;return this._queue.push({callback:f,id:y,cancelled:!1}),y},Ws.prototype.remove=function(f){for(var y=this._currentlyRunning,m=0,b=y?this._queue.concat(y):this._queue;m<b.length;m+=1){var j=b[m];if(j.id===f)return void(j.cancelled=!0)}},Ws.prototype.run=function(){var f=this._currentlyRunning=this._queue;this._queue=[];for(var y=0,m=f;y<m.length;y+=1){var b=m[y];if(!b.cancelled&&(b.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ws.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Po={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Goong logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ja=a.window.HTMLImageElement,ya=a.window.HTMLElement,Xo=a.window.ImageBitmap,Uu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Bc=(function(f){function y(b){var j=this;if((b=a.extend({},Uu,b)).minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var P=new xr(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies);if(f.call(this,P,b),this._interactive=b.interactive,this._maxTileCacheSize=b.maxTileCacheSize,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=b.collectResourceTiming,this._renderTaskQueue=new Ws,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Po,b.locale),this._requestManager=new a.RequestManager(b.transformRequest,b.accessToken),typeof b.container=="string"){if(this._container=a.window.document.getElementById(b.container),!this._container)throw new Error("Container '"+b.container+"' not found.")}else{if(!(b.container instanceof ya))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return j._update(!1)})),this.on("moveend",(function(){return j._update(!1)})),this.on("zoom",(function(){return j._update(!0)})),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1)),(function(U,$){var J=U.getCanvasContainer(),te=null,ue=!1,Te=null;for(var be in _p)U[be]=new _p[be](U,$),$.interactive&&$[be]&&U[be].enable($[be]);x.addEventListener(J,"mouseout",(function(_e){U.fire(new sa("mouseout",U,_e))})),x.addEventListener(J,"mousedown",(function(_e){ue=!0,Te=x.mousePos(J,_e);var ve=new sa("mousedown",U,_e);U.fire(ve),!ve.defaultPrevented&&($.interactive&&!U.doubleClickZoom.isActive()&&U.stop(),U.boxZoom.onMouseDown(_e),U.boxZoom.isActive()||U.dragPan.isActive()||U.dragRotate.onMouseDown(_e),U.boxZoom.isActive()||U.dragRotate.isActive()||U.dragPan.onMouseDown(_e))})),x.addEventListener(J,"mouseup",(function(_e){var ve=U.dragRotate.isActive();te&&!ve&&U.fire(new sa("contextmenu",U,te)),te=null,ue=!1,U.fire(new sa("mouseup",U,_e))})),x.addEventListener(J,"mousemove",(function(_e){if(!U.dragPan.isActive()&&!U.dragRotate.isActive()){for(var ve=_e.target;ve&&ve!==J;)ve=ve.parentNode;ve===J&&U.fire(new sa("mousemove",U,_e))}})),x.addEventListener(J,"mouseover",(function(_e){for(var ve=_e.target;ve&&ve!==J;)ve=ve.parentNode;ve===J&&U.fire(new sa("mouseover",U,_e))})),x.addEventListener(J,"touchstart",(function(_e){var ve=new fn("touchstart",U,_e);U.fire(ve),!ve.defaultPrevented&&($.interactive&&U.stop(),U.boxZoom.isActive()||U.dragRotate.isActive()||U.dragPan.onTouchStart(_e),U.touchZoomRotate.onStart(_e),U.doubleClickZoom.onTouchStart(ve))}),{passive:!1}),x.addEventListener(J,"touchmove",(function(_e){U.fire(new fn("touchmove",U,_e))}),{passive:!1}),x.addEventListener(J,"touchend",(function(_e){U.fire(new fn("touchend",U,_e))})),x.addEventListener(J,"touchcancel",(function(_e){U.fire(new fn("touchcancel",U,_e))})),x.addEventListener(J,"click",(function(_e){var ve=x.mousePos(J,_e);(!Te||ve.equals(Te)||ve.dist(Te)<$.clickTolerance)&&U.fire(new sa("click",U,_e))})),x.addEventListener(J,"dblclick",(function(_e){var ve=new sa("dblclick",U,_e);U.fire(ve),!ve.defaultPrevented&&U.doubleClickZoom.onDblClick(ve)})),x.addEventListener(J,"contextmenu",(function(_e){var ve=U.dragRotate.isActive();ue||ve?ue&&(te=_e):U.fire(new sa("contextmenu",U,_e)),(U.dragRotate.isEnabled()||U.listens("contextmenu"))&&_e.preventDefault()})),x.addEventListener(J,"wheel",(function(_e){$.interactive&&U.stop();var ve=new Kl("wheel",U,_e);U.fire(ve),!ve.defaultPrevented&&U.scrollZoom.onWheel(_e)}),{passive:!1})})(this,b);var F=typeof b.hash=="string"&&b.hash||void 0;this._hash=b.hash&&new wl(F).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,a.extend({},b.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=b.localIdeographFontFamily,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new Zo({customAttribution:b.customAttribution})),this.addControl(new ks,b.logoPosition),this.on("style.load",(function(){j.transform.unmodified&&j.jumpTo(j.style.stylesheet)})),this.on("data",(function(U){j._update(U.dataType==="style"),j.fire(new a.Event(U.dataType+"data",U))})),this.on("dataloading",(function(U){j.fire(new a.Event(U.dataType+"dataloading",U))}))}f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y;var m={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return y.prototype._getMapId=function(){return this._mapId},y.prototype.addControl=function(b,j){if(j===void 0&&b.getDefaultPosition&&(j=b.getDefaultPosition()),j===void 0&&(j="top-right"),!b||!b.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var P=b.onAdd(this);this._controls.push(b);var F=this._controlPositions[j];return j.indexOf("bottom")!==-1?F.insertBefore(P,F.firstChild):F.appendChild(P),this},y.prototype.removeControl=function(b){if(!b||!b.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var j=this._controls.indexOf(b);return j>-1&&this._controls.splice(j,1),b.onRemove(this),this},y.prototype.resize=function(b){var j=this._containerDimensions(),P=j[0],F=j[1];return this._resizeCanvas(P,F),this.transform.resize(P,F),this.painter.resize(P,F),this.fire(new a.Event("movestart",b)).fire(new a.Event("move",b)).fire(new a.Event("resize",b)).fire(new a.Event("moveend",b)),this},y.prototype.getBounds=function(){return this.transform.getBounds()},y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},y.prototype.setMaxBounds=function(b){return this.transform.setMaxBounds(a.LngLatBounds.convert(b)),this._update()},y.prototype.setMinZoom=function(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},y.prototype.getMinZoom=function(){return this.transform.minZoom},y.prototype.setMaxZoom=function(b){if((b=b??22)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")},y.prototype.getMaxZoom=function(){return this.transform.maxZoom},y.prototype.setMinPitch=function(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},y.prototype.getMinPitch=function(){return this.transform.minPitch},y.prototype.setMaxPitch=function(b){if((b=b??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")},y.prototype.getMaxPitch=function(){return this.transform.maxPitch},y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},y.prototype.setRenderWorldCopies=function(b){return this.transform.renderWorldCopies=b,this._update()},y.prototype.project=function(b){return this.transform.locationPoint(a.LngLat.convert(b))},y.prototype.unproject=function(b){return this.transform.pointLocation(a.Point.convert(b))},y.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},y.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},y.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},y.prototype.on=function(b,j,P){var F=this;if(P===void 0)return f.prototype.on.call(this,b,j);var U=(function(){var J;if(b==="mouseenter"||b==="mouseover"){var te=!1;return{layer:j,listener:P,delegates:{mousemove:function(Te){var be=F.getLayer(j)?F.queryRenderedFeatures(Te.point,{layers:[j]}):[];be.length?te||(te=!0,P.call(F,new sa(b,F,Te.originalEvent,{features:be}))):te=!1},mouseout:function(){te=!1}}}}if(b==="mouseleave"||b==="mouseout"){var ue=!1;return{layer:j,listener:P,delegates:{mousemove:function(Te){(F.getLayer(j)?F.queryRenderedFeatures(Te.point,{layers:[j]}):[]).length?ue=!0:ue&&(ue=!1,P.call(F,new sa(b,F,Te.originalEvent)))},mouseout:function(Te){ue&&(ue=!1,P.call(F,new sa(b,F,Te.originalEvent)))}}}}return{layer:j,listener:P,delegates:(J={},J[b]=function(Te){var be=F.getLayer(j)?F.queryRenderedFeatures(Te.point,{layers:[j]}):[];be.length&&(Te.features=be,P.call(F,Te),delete Te.features)},J)}})();for(var $ in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(U),U.delegates)this.on($,U.delegates[$]);return this},y.prototype.off=function(b,j,P){if(P===void 0)return f.prototype.off.call(this,b,j);if(this._delegatedListeners&&this._delegatedListeners[b])for(var F=this._delegatedListeners[b],U=0;U<F.length;U++){var $=F[U];if($.layer===j&&$.listener===P){for(var J in $.delegates)this.off(J,$.delegates[J]);return F.splice(U,1),this}}return this},y.prototype.queryRenderedFeatures=function(b,j){if(!this.style)return[];var P;if(j!==void 0||b===void 0||b instanceof a.Point||Array.isArray(b)||(j=b,b=void 0),j=j||{},(b=b||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof b[0]=="number")P=[a.Point.convert(b)];else{var F=a.Point.convert(b[0]),U=a.Point.convert(b[1]);P=[F,new a.Point(U.x,F.y),U,new a.Point(F.x,U.y),F]}return this.style.queryRenderedFeatures(P,j,this.transform)},y.prototype.querySourceFeatures=function(b,j){return this.style.querySourceFeatures(b,j)},y.prototype.setStyle=function(b,j){return(j=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},j)).diff!==!1&&j.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,j),this):(this._localIdeographFontFamily=j.localIdeographFontFamily,this._updateStyle(b,j))},y.prototype._getUIString=function(b){var j=this._locale[b];if(j==null)throw new Error("Missing UI string '"+b+"'");return j},y.prototype._updateStyle=function(b,j){return this.style&&(this.style.setEventedParent(null),this.style._remove()),b?(this.style=new ei(this,j||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b):this.style.loadJSON(b),this):(delete this.style,this)},y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ei(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},y.prototype._diffStyle=function(b,j){var P=this;if(typeof b=="string"){var F=this._requestManager.normalizeStyleURL(b),U=this._requestManager.transformRequest(F,a.ResourceType.Style);a.getJSON(U,(function($,J){$?P.fire(new a.ErrorEvent($)):J&&P._updateDiff(J,j)}))}else typeof b=="object"&&this._updateDiff(b,j)},y.prototype._updateDiff=function(b,j){try{this.style.setState(b)&&this._update(!0)}catch(P){a.warnOnce("Unable to perform style diff: "+(P.message||P.error||P)+".  Rebuilding the style from scratch."),this._updateStyle(b,j)}},y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},y.prototype.addSource=function(b,j){return this._lazyInitEmptyStyle(),this.style.addSource(b,j),this._update(!0)},y.prototype.isSourceLoaded=function(b){var j=this.style&&this.style.sourceCaches[b];if(j!==void 0)return j.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+b+"'")))},y.prototype.areTilesLoaded=function(){var b=this.style&&this.style.sourceCaches;for(var j in b){var P=b[j]._tiles;for(var F in P){var U=P[F];if(U.state!=="loaded"&&U.state!=="errored")return!1}}return!0},y.prototype.addSourceType=function(b,j,P){return this._lazyInitEmptyStyle(),this.style.addSourceType(b,j,P)},y.prototype.removeSource=function(b){return this.style.removeSource(b),this._update(!0)},y.prototype.getSource=function(b){return this.style.getSource(b)},y.prototype.addImage=function(b,j,P){P===void 0&&(P={});var F=P.pixelRatio;F===void 0&&(F=1);var U=P.sdf;U===void 0&&(U=!1);var $=P.stretchX,J=P.stretchY,te=P.content;if(this._lazyInitEmptyStyle(),j instanceof ja||Xo&&j instanceof Xo){var ue=a.browser.getImageData(j),Te=ue.width,be=ue.height,_e=ue.data;this.style.addImage(b,{data:new a.RGBAImage({width:Te,height:be},_e),pixelRatio:F,stretchX:$,stretchY:J,content:te,sdf:U,version:0})}else{if(j.width===void 0||j.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ve=j.width,$e=j.height,Fe=j.data,rt=j;this.style.addImage(b,{data:new a.RGBAImage({width:ve,height:$e},new Uint8Array(Fe)),pixelRatio:F,stretchX:$,stretchY:J,content:te,sdf:U,version:0,userImage:rt}),rt.onAdd&&rt.onAdd(this,b)}},y.prototype.updateImage=function(b,j){var P=this.style.getImage(b);if(!P)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var F=j instanceof ja||Xo&&j instanceof Xo?a.browser.getImageData(j):j,U=F.width,$=F.height,J=F.data;if(U===void 0||$===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(U!==P.data.width||$!==P.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var te=!(j instanceof ja||Xo&&j instanceof Xo);P.data.replace(J,te),this.style.updateImage(b,P)},y.prototype.hasImage=function(b){return b?!!this.style.getImage(b):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},y.prototype.removeImage=function(b){this.style.removeImage(b)},y.prototype.loadImage=function(b,j){a.getImage(this._requestManager.transformRequest(b,a.ResourceType.Image),j)},y.prototype.listImages=function(){return this.style.listImages()},y.prototype.addLayer=function(b,j){return this._lazyInitEmptyStyle(),this.style.addLayer(b,j),this._update(!0)},y.prototype.moveLayer=function(b,j){return this.style.moveLayer(b,j),this._update(!0)},y.prototype.removeLayer=function(b){return this.style.removeLayer(b),this._update(!0)},y.prototype.getLayer=function(b){return this.style.getLayer(b)},y.prototype.setLayerZoomRange=function(b,j,P){return this.style.setLayerZoomRange(b,j,P),this._update(!0)},y.prototype.setFilter=function(b,j,P){return P===void 0&&(P={}),this.style.setFilter(b,j,P),this._update(!0)},y.prototype.getFilter=function(b){return this.style.getFilter(b)},y.prototype.setPaintProperty=function(b,j,P,F){return F===void 0&&(F={}),this.style.setPaintProperty(b,j,P,F),this._update(!0)},y.prototype.getPaintProperty=function(b,j){return this.style.getPaintProperty(b,j)},y.prototype.setLayoutProperty=function(b,j,P,F){return F===void 0&&(F={}),this.style.setLayoutProperty(b,j,P,F),this._update(!0)},y.prototype.getLayoutProperty=function(b,j){return this.style.getLayoutProperty(b,j)},y.prototype.setLight=function(b,j){return j===void 0&&(j={}),this._lazyInitEmptyStyle(),this.style.setLight(b,j),this._update(!0)},y.prototype.getLight=function(){return this.style.getLight()},y.prototype.setFeatureState=function(b,j){return this.style.setFeatureState(b,j),this._update()},y.prototype.removeFeatureState=function(b,j){return this.style.removeFeatureState(b,j),this._update()},y.prototype.getFeatureState=function(b){return this.style.getFeatureState(b)},y.prototype.getContainer=function(){return this._container},y.prototype.getCanvasContainer=function(){return this._canvasContainer},y.prototype.getCanvas=function(){return this._canvas},y.prototype._containerDimensions=function(){var b=0,j=0;return this._container&&(b=this._container.clientWidth||400,j=this._container.clientHeight||300),[b,j]},y.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Goong GL JS, which may cause the map to display incorrectly. Please ensure your page includes goong-js.css, as described in https://docs.goong.io/javascript/.")},y.prototype._setupContainer=function(){var b=this._container;b.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",b)).style.visibility="hidden",this._detectMissingCSS();var j=this._canvasContainer=x.create("div","mapboxgl-canvas-container",b);this._interactive&&j.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",j),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var P=this._containerDimensions();this._resizeCanvas(P[0],P[1]);var F=this._controlContainer=x.create("div","mapboxgl-control-container",b),U=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function($){U[$]=x.create("div","mapboxgl-ctrl-"+$,F)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},y.prototype._resizeCanvas=function(b,j){var P=a.browser.devicePixelRatio||1;this._canvas.width=P*b,this._canvas.height=P*j,this._canvas.style.width=b+"px",this._canvas.style.height=j+"px"},y.prototype._setupPainter=function(){var b=a.extend({},g.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),j=this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b);j?(this.painter=new ai(j,this.transform),a.webpSupported.testSupport(j)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},y.prototype._contextLost=function(b){b.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:b}))},y.prototype._contextRestored=function(b){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:b}))},y.prototype._onMapScroll=function(b){if(b.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},y.prototype._update=function(b){return this.style?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this},y.prototype._requestRenderFrame=function(b){return this._update(),this._renderTaskQueue.add(b)},y.prototype._cancelRenderFrame=function(b){this._renderTaskQueue.remove(b)},y.prototype._render=function(){var b,j=this,P=0,F=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(b=F.createQueryEXT(),F.beginQueryEXT(F.TIME_ELAPSED_EXT,b),P=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var U=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $=this.transform.zoom,J=a.browser.now();this.style.zoomHistory.update($,J);var te=new a.EvaluationParameters($,{now:J,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ue=te.crossFadingFactor();ue===1&&ue===this._crossFadingFactor||(U=!0,this._crossFadingFactor=ue),this.style.update(te)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),gpuTiming:!!this.listens("gpu-timing-layer"),fadeDuration:this._fadeDuration}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||U)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Te=a.browser.now()-P;F.endQueryEXT(F.TIME_ELAPSED_EXT,b),setTimeout((function(){var _e=F.getQueryObjectEXT(b,F.QUERY_RESULT_EXT)/1e6;F.deleteQueryEXT(b),j.fire(new a.Event("gpu-timing-frame",{cpuTime:Te,gpuTime:_e}))}),50)}if(this.listens("gpu-timing-layer")){var be=this.painter.collectGpuTimers();setTimeout((function(){var _e=j.painter.queryGpuTimers(be);j.fire(new a.Event("gpu-timing-layer",{layerTimes:_e}))}),50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this},y.prototype.remove=function(){this._hash&&this._hash.remove();for(var b=0,j=this._controls;b<j.length;b+=1)j[b].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var P=this.painter.context.gl.getExtension("WEBGL_lose_context");P&&P.loseContext(),Sl(this._canvasContainer),Sl(this._controlContainer),Sl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new a.Event("remove"))},y.prototype.triggerRepaint=function(){var b=this;this.style&&!this._frame&&(this._frame=a.browser.frame((function(j){b._frame=null,b._render()})))},y.prototype._onWindowOnline=function(){this._update()},y.prototype._onWindowResize=function(b){this._trackResize&&this.resize({originalEvent:b})._update()},m.showTileBoundaries.get=function(){return!!this._showTileBoundaries},m.showTileBoundaries.set=function(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())},m.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},m.showCollisionBoxes.set=function(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())},m.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},m.showOverdrawInspector.set=function(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())},m.repaint.get=function(){return!!this._repaint},m.repaint.set=function(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())},m.vertices.get=function(){return!!this._vertices},m.vertices.set=function(b){this._vertices=b,this._update()},y.prototype._setCacheLimits=function(b,j){a.setCacheLimits(b,j)},m.version.get=function(){return a.version},Object.defineProperties(y.prototype,m),y})(ug);function Sl(f){f.parentNode&&f.parentNode.removeChild(f)}var Wd={showCompass:!0,showZoom:!0,visualizePitch:!1},Pi=function(f){var y=this;this.options=a.extend({},Wd,f),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(m){return m.preventDefault()})),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(m){return y._map.zoomIn({},{originalEvent:m})})),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(m){return y._map.zoomOut({},{originalEvent:m})})),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(m){y.options.visualizePitch?y._map.resetNorthPitch({},{originalEvent:m}):y._map.resetNorth({},{originalEvent:m})})),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function ti(f,y,m){if(f=new a.LngLat(f.lng,f.lat),y){var b=new a.LngLat(f.lng-360,f.lat),j=new a.LngLat(f.lng+360,f.lat),P=m.locationPoint(f).distSqr(y);m.locationPoint(b).distSqr(y)<P?f=b:m.locationPoint(j).distSqr(y)<P&&(f=j)}for(;Math.abs(f.lng-m.center.lng)>180;){var F=m.locationPoint(f);if(F.x>=0&&F.y>=0&&F.x<=m.width&&F.y<=m.height)break;f.lng>m.center.lng?f.lng-=360:f.lng+=360}return f}Pi.prototype._updateZoomButtons=function(){var f=this._map.getZoom();this._zoomInButton.disabled=f===this._map.getMaxZoom(),this._zoomOutButton.disabled=f===this._map.getMinZoom()},Pi.prototype._rotateCompassArrow=function(){var f=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=f},Pi.prototype.onAdd=function(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ji(f,{button:"left",element:this._compass}),x.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),x.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},Pi.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),x.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),x.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},Pi.prototype._createButton=function(f,y){var m=x.create("button",f,this._container);return m.type="button",m.addEventListener("click",y),m},Pi.prototype._setButtonTitle=function(f,y){var m=this._map._getUIString("NavigationControl."+y);f.title=m,f.setAttribute("aria-label",m)};var os={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ss(f,y,m){var b=f.classList;for(var j in os)b.remove("mapboxgl-"+m+"-anchor-"+j);b.add("mapboxgl-"+m+"-anchor-"+y)}var mo,$a=(function(f){function y(m,b){if(f.call(this),(m instanceof a.window.HTMLElement||b)&&(m=a.extend({element:m},b)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=m&&m.anchor||"center",this._color=m&&m.color||"#3FB1CE",this._scale=m&&m.scale||1,this._draggable=m&&m.draggable||!1,this._state="inactive",this._rotation=m&&m.rotation||0,this._rotationAlignment=m&&m.rotationAlignment||"auto",this._pitchAlignment=m&&m.pitchAlignment&&m.pitchAlignment!=="auto"?m.pitchAlignment:this._rotationAlignment,m&&m.element)this._element=m.element,this._offset=a.Point.convert(m&&m.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var j=x.createNS("http://www.w3.org/2000/svg","svg");j.setAttributeNS(null,"display","block"),j.setAttributeNS(null,"height","41px"),j.setAttributeNS(null,"width","27px"),j.setAttributeNS(null,"viewBox","0 0 27 41");var P=x.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");var F=x.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");var U=x.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"transform","translate(3.0, 29.0)"),U.setAttributeNS(null,"fill","#000000");for(var $=0,J=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];$<J.length;$+=1){var te=J[$],ue=x.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",te.rx),ue.setAttributeNS(null,"ry",te.ry),U.appendChild(ue)}var Te=x.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"fill",this._color);var be=x.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Te.appendChild(be);var _e=x.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"fill","#000000");var ve=x.createNS("http://www.w3.org/2000/svg","path");ve.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),_e.appendChild(ve);var $e=x.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$e.setAttributeNS(null,"fill","#FFFFFF");var Fe=x.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var rt=x.createNS("http://www.w3.org/2000/svg","circle");rt.setAttributeNS(null,"fill","#000000"),rt.setAttributeNS(null,"opacity","0.25"),rt.setAttributeNS(null,"cx","5.5"),rt.setAttributeNS(null,"cy","5.5"),rt.setAttributeNS(null,"r","5.4999962");var et=x.createNS("http://www.w3.org/2000/svg","circle");et.setAttributeNS(null,"fill","#FFFFFF"),et.setAttributeNS(null,"cx","5.5"),et.setAttributeNS(null,"cy","5.5"),et.setAttributeNS(null,"r","5.4999962"),Fe.appendChild(rt),Fe.appendChild(et),F.appendChild(U),F.appendChild(Te),F.appendChild(_e),F.appendChild($e),F.appendChild(Fe),j.appendChild(F),j.setAttributeNS(null,"height",41*this._scale+"px"),j.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(j),this._offset=a.Point.convert(m&&m.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(it){it.preventDefault()})),this._element.addEventListener("mousedown",(function(it){it.preventDefault()})),ss(this._element,this._anchor,"marker"),this._popup=null}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.addTo=function(m){return this.remove(),this._map=m,m.getCanvasContainer().appendChild(this._element),m.on("move",this._update),m.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(m){return this._lngLat=a.LngLat.convert(m),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},y.prototype.getElement=function(){return this._element},y.prototype.setPopup=function(m){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),m){if(!("offset"in m.options)){var b=Math.sqrt(Math.pow(13.5,2)/2);m.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=m,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},y.prototype._onKeyPress=function(m){var b=m.code,j=m.charCode||m.keyCode;b!=="Space"&&b!=="Enter"&&j!==32&&j!==13||this.togglePopup()},y.prototype._onMapClick=function(m){var b=m.originalEvent.target,j=this._element;this._popup&&(b===j||j.contains(b))&&this.togglePopup()},y.prototype.getPopup=function(){return this._popup},y.prototype.togglePopup=function(){var m=this._popup;return m?(m.isOpen()?m.remove():m.addTo(this._map),this):this},y.prototype._update=function(m){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ti(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(b="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var j="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?j="rotateX(0deg)":this._pitchAlignment==="map"&&(j="rotateX("+this._map.getPitch()+"deg)"),m&&m.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,os[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+j+" "+b)}},y.prototype.getOffset=function(){return this._offset},y.prototype.setOffset=function(m){return this._offset=a.Point.convert(m),this._update(),this},y.prototype._onMove=function(m){this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))},y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},y.prototype._addDragHandler=function(m){this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},y.prototype.setDraggable=function(m){return this._draggable=!!m,this._map&&(m?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},y.prototype.isDraggable=function(){return this._draggable},y.prototype.setRotation=function(m){return this._rotation=m||0,this._update(),this},y.prototype.getRotation=function(){return this._rotation},y.prototype.setRotationAlignment=function(m){return this._rotationAlignment=m||"auto",this._update(),this},y.prototype.getRotationAlignment=function(){return this._rotationAlignment},y.prototype.setPitchAlignment=function(m){return this._pitchAlignment=m&&m!=="auto"?m:this._rotationAlignment,this._update(),this},y.prototype.getPitchAlignment=function(){return this._pitchAlignment},y})(a.Evented),Fc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Io=(function(f){function y(m){f.call(this),this.options=a.extend({},Fc,m),a.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.onAdd=function(m){var b;return this._map=m,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),b=this._setupUI,mo!==void 0?b(mo):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then((function(j){mo=j.state!=="denied",b(mo)})):(mo=!!a.window.navigator.geolocation,b(mo)),this._container},y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),x.remove(this._container),this._map=void 0},y.prototype._isOutOfMapMaxBounds=function(m){var b=this._map.getMaxBounds(),j=m.coords;return b&&(j.longitude<b.getWest()||j.longitude>b.getEast()||j.latitude<b.getSouth()||j.latitude>b.getNorth())},y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},y.prototype._onSuccess=function(m){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",m)),this._finish()},y.prototype._updateCamera=function(m){var b=new a.LngLat(m.coords.longitude,m.coords.latitude),j=m.coords.accuracy,P=this._map.getBearing(),F=a.extend({bearing:P},this.options.fitBoundsOptions);this._map.fitBounds(b.toBounds(j),F,{geolocateSource:!0})},y.prototype._updateMarker=function(m){m?this._userLocationDotMarker.setLngLat([m.coords.longitude,m.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},y.prototype._onError=function(m){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var b=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b),this._geolocationWatchID!==void 0&&this._clearWatch()}else this._setErrorState();this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",m)),this._finish()},y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},y.prototype._setupUI=function(m){var b=this;if(this._container.addEventListener("contextmenu",(function(F){return F.preventDefault()})),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",m===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var j=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=j,this._geolocateButton.setAttribute("aria-label",j)}else{var P=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=P,this._geolocateButton.setAttribute("aria-label",P)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new $a(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(F){var U=F.originalEvent&&F.originalEvent.type==="resize";F.geolocateSource||b._watchState!=="ACTIVE_LOCK"||U||(b._watchState="BACKGROUND",b._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),b._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),b.fire(new a.Event("trackuserlocationend")))}))},y.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}this._watchState==="OFF"&&this._geolocationWatchID!==void 0?this._clearWatch():this._geolocationWatchID===void 0&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},y.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},y})(a.Evented),to={maxWidth:100,unit:"metric"},ls=function(f){this.options=a.extend({},to,f),a.bindAll(["_onMove","setUnit"],this)};function pn(f,y,m){var b,j,P,F,U,$,J=m&&m.maxWidth||100,te=f._container.clientHeight/2,ue=(b=f.unproject([0,te]),j=f.unproject([J,te]),P=Math.PI/180,F=b.lat*P,U=j.lat*P,$=Math.sin(F)*Math.sin(U)+Math.cos(F)*Math.cos(U)*Math.cos((j.lng-b.lng)*P),6371e3*Math.acos(Math.min($,1)));if(m&&m.unit==="imperial"){var Te=3.2808*ue;Te>5280?_n(y,J,Te/5280,f._getUIString("ScaleControl.Miles")):_n(y,J,Te,f._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?_n(y,J,ue/1852,f._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?_n(y,J,ue/1e3,f._getUIString("ScaleControl.Kilometers")):_n(y,J,ue,f._getUIString("ScaleControl.Meters"))}function _n(f,y,m,b){var j,P,F,U=(j=m,P=Math.pow(10,(""+Math.floor(j)).length-1),F=(F=j/P)>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:(function(J){var te=Math.pow(10,Math.ceil(-Math.log(J)/Math.LN10));return Math.round(J*te)/te})(F),P*F),$=U/m;f.style.width=y*$+"px",f.innerHTML=U+b}ls.prototype.getDefaultPosition=function(){return"bottom-left"},ls.prototype._onMove=function(){pn(this._map,this._container,this.options)},ls.prototype.onAdd=function(f){return this._map=f,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ls.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ls.prototype.setUnit=function(f){this.options.unit=f,pn(this._map,this._container,this.options)};var go=function(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof a.window.HTMLElement?this._container=f.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};go.prototype.onAdd=function(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},go.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},go.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},go.prototype._setupUI=function(){var f=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden",!0),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},go.prototype._updateTitle=function(){var f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f},go.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},go.prototype._isFullscreen=function(){return this._fullscreen},go.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},go.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var El={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Uc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ii=(function(f){function y(m){f.call(this),this.options=a.extend(Object.create(El),m),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return f&&(y.__proto__=f),y.prototype=Object.create(f&&f.prototype),y.prototype.constructor=y,y.prototype.addTo=function(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},y.prototype.isOpen=function(){return!!this._map},y.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},y.prototype.getLngLat=function(){return this._lngLat},y.prototype.setLngLat=function(m){return this._lngLat=a.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},y.prototype.getElement=function(){return this._container},y.prototype.setText=function(m){return this.setDOMContent(a.window.document.createTextNode(m))},y.prototype.setHTML=function(m){var b,j=a.window.document.createDocumentFragment(),P=a.window.document.createElement("body");for(P.innerHTML=m;b=P.firstChild;)j.appendChild(b);return this.setDOMContent(j)},y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},y.prototype.setMaxWidth=function(m){return this.options.maxWidth=m,this._update(),this},y.prototype.setDOMContent=function(m){return this._createContent(),this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this},y.prototype.addClassName=function(m){this._container&&this._container.classList.add(m)},y.prototype.removeClassName=function(m){this._container&&this._container.classList.remove(m)},y.prototype.setOffset=function(m){return this.options.offset=m,this._update(),this},y.prototype.toggleClassName=function(m){if(this._container)return this._container.classList.toggle(m)},y.prototype._createContent=function(){this._content&&x.remove(this._content),this._content=x.create("div","mapboxgl-popup-content",this._container)},y.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},y.prototype._onMouseUp=function(m){this._update(m.point)},y.prototype._onMouseMove=function(m){this._update(m.point)},y.prototype._onDrag=function(m){this._update(m.point)},y.prototype._update=function(m){var b=this,j=this._lngLat||this._trackPointer;if(this._map&&j&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(Te){return b._container.classList.add(Te)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ti(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||m)){var P=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat),F=this.options.anchor,U=(function Te(be){if(be){if(typeof be=="number"){var _e=Math.round(Math.sqrt(.5*Math.pow(be,2)));return{center:new a.Point(0,0),top:new a.Point(0,be),"top-left":new a.Point(_e,_e),"top-right":new a.Point(-_e,_e),bottom:new a.Point(0,-be),"bottom-left":new a.Point(_e,-_e),"bottom-right":new a.Point(-_e,-_e),left:new a.Point(be,0),right:new a.Point(-be,0)}}if(be instanceof a.Point||Array.isArray(be)){var ve=a.Point.convert(be);return{center:ve,top:ve,"top-left":ve,"top-right":ve,bottom:ve,"bottom-left":ve,"bottom-right":ve,left:ve,right:ve}}return{center:a.Point.convert(be.center||[0,0]),top:a.Point.convert(be.top||[0,0]),"top-left":a.Point.convert(be["top-left"]||[0,0]),"top-right":a.Point.convert(be["top-right"]||[0,0]),bottom:a.Point.convert(be.bottom||[0,0]),"bottom-left":a.Point.convert(be["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(be["bottom-right"]||[0,0]),left:a.Point.convert(be.left||[0,0]),right:a.Point.convert(be.right||[0,0])}}return Te(new a.Point(0,0))})(this.options.offset);if(!F){var $,J=this._container.offsetWidth,te=this._container.offsetHeight;$=P.y+U.bottom.y<te?["top"]:P.y>this._map.transform.height-te?["bottom"]:[],P.x<J/2?$.push("left"):P.x>this._map.transform.width-J/2&&$.push("right"),F=$.length===0?"bottom":$.join("-")}var ue=P.add(U[F]).round();x.setTransform(this._container,os[F]+" translate("+ue.x+"px,"+ue.y+"px)"),ss(this._container,F,"popup")}},y.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var m=this._container.querySelector(Uc);m&&m.focus()}},y.prototype._onClose=function(){this.remove()},y})(a.Evented),Ga={version:a.version,supported:g,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Bc,NavigationControl:Pi,GeolocateControl:Io,AttributionControl:Zo,ScaleControl:ls,FullscreenControl:go,Popup:Ii,Marker:$a,Style:ei,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(f){a.config.ACCESS_TOKEN=f},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(f){a.config.API_URL=f},get workerCount(){return Z.workerCount},set workerCount(f){Z.workerCount=f},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){a.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage:function(f){a.clearTileCache(f)},workerUrl:""};return Ga})),l}))})(p0)),p0.exports}var uW=cW();const Tu=rp(uW);var dW=1e-7;function fw(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function k4(e,t){if(e===t)return!0;if(fw(e)&&fw(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!k4(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=dW}function Jx(e,t,n){return Math.max(t,Math.min(n,e))}function U0(e,t,n){return fw(e)?e.map(function(i,l){return U0(i,t[l],n)}):n*t+(1-n)*e}function pc(e,t){if(!e)throw new Error(t||"react-map-gl: assertion failed.")}function qT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function HT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qT(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var qf={minZoom:0,maxZoom:24,minPitch:0,maxPitch:85},r1={pitch:0,bearing:0,altitude:1.5},$T=5,hW=1.2,Pm=(function(){function e(t){var n=t.width,i=t.height,l=t.latitude,d=t.longitude,a=t.zoom,g=t.bearing,x=g===void 0?r1.bearing:g,_=t.pitch,C=_===void 0?r1.pitch:_,E=t.altitude,A=E===void 0?r1.altitude:E,D=t.maxZoom,I=D===void 0?qf.maxZoom:D,L=t.minZoom,B=L===void 0?qf.minZoom:L,z=t.maxPitch,q=z===void 0?qf.maxPitch:z,H=t.minPitch,W=H===void 0?qf.minPitch:H,ne=t.transitionDuration,re=t.transitionEasing,ee=t.transitionInterpolator,oe=t.transitionInterruption,he=t.startPanLngLat,we=t.startZoomLngLat,ye=t.startRotatePos,Pe=t.startBearing,Ke=t.startPitch,ze=t.startZoom;Zh(this,e),pc(Number.isFinite(n),"`width` must be supplied"),pc(Number.isFinite(i),"`height` must be supplied"),pc(Number.isFinite(d),"`longitude` must be supplied"),pc(Number.isFinite(l),"`latitude` must be supplied"),pc(Number.isFinite(a),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:i,latitude:l,longitude:d,zoom:a,bearing:x,pitch:C,altitude:A,maxZoom:I,minZoom:B,maxPitch:q,minPitch:W,transitionDuration:ne,transitionEasing:re,transitionInterpolator:ee,transitionInterruption:oe}),this._state={startPanLngLat:he,startZoomLngLat:we,startRotatePos:ye,startBearing:Pe,startPitch:Ke,startZoom:ze}}return Xh(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(n){var i=n.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(i)})}},{key:"pan",value:function(n){var i=n.pos,l=n.startPos,d=this._state.startPanLngLat||this._unproject(l);if(!d)return this;var a=this._calculateNewLngLat({startPanLngLat:d,pos:i}),g=Qa(a,2),x=g[0],_=g[1];return this._getUpdatedMapState({longitude:x,latitude:_})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(n){var i=n.pos;return this._getUpdatedMapState({startRotatePos:i,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(n){var i=n.pos,l=n.deltaAngleX,d=l===void 0?0:l,a=n.deltaAngleY,g=a===void 0?0:a,x=this._state,_=x.startRotatePos,C=x.startBearing,E=x.startPitch;if(!Number.isFinite(C)||!Number.isFinite(E))return this;var A;return i?A=this._calculateNewPitchAndBearing(HT(HT({},this._getRotationParams(i,_)),{},{startBearing:C,startPitch:E})):A={bearing:C+d,pitch:E+g},this._getUpdatedMapState(A)}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(n){var i=n.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(i),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(n){var i=n.pos,l=n.startPos,d=n.scale;pc(d>0,"`scale` must be a positive number");var a=this._state,g=a.startZoom,x=a.startZoomLngLat;Number.isFinite(g)||(g=this._viewportProps.zoom,x=this._unproject(l)||this._unproject(i)),pc(x,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var _=this._calculateNewZoom({scale:d,startZoom:g||0}),C=new xu(Object.assign({},this._viewportProps,{zoom:_})),E=C.getMapCenterByLngLatPosition({lngLat:x,pos:i}),A=Qa(E,2),D=A[0],I=A[1];return this._getUpdatedMapState({zoom:_,longitude:D,latitude:I})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(n){return new e(Object.assign({},this._viewportProps,this._state,n))}},{key:"_applyConstraints",value:function(n){var i=n.maxZoom,l=n.minZoom,d=n.zoom;n.zoom=Jx(d,l,i);var a=n.maxPitch,g=n.minPitch,x=n.pitch;return n.pitch=Jx(x,g,a),Object.assign(n,IY(n)),n}},{key:"_unproject",value:function(n){var i=new xu(this._viewportProps);return n&&i.unproject(n)}},{key:"_calculateNewLngLat",value:function(n){var i=n.startPanLngLat,l=n.pos,d=new xu(this._viewportProps);return d.getMapCenterByLngLatPosition({lngLat:i,pos:l})}},{key:"_calculateNewZoom",value:function(n){var i=n.scale,l=n.startZoom,d=this._viewportProps,a=d.maxZoom,g=d.minZoom,x=l+Math.log2(i);return Jx(x,g,a)}},{key:"_calculateNewPitchAndBearing",value:function(n){var i=n.deltaScaleX,l=n.deltaScaleY,d=n.startBearing,a=n.startPitch;l=Jx(l,-1,1);var g=this._viewportProps,x=g.minPitch,_=g.maxPitch,C=d+180*i,E=a;return l>0?E=a+l*(_-a):l<0&&(E=a-l*(x-a)),{pitch:E,bearing:C}}},{key:"_getRotationParams",value:function(n,i){var l=n[0]-i[0],d=n[1]-i[1],a=n[1],g=i[1],x=this._viewportProps,_=x.width,C=x.height,E=l/_,A=0;return d>0?Math.abs(C-g)>$T&&(A=d/(g-C)*hW):d<0&&g>$T&&(A=1-a/g),A=Math.min(1,Math.max(-1,A)),{deltaScaleX:E,deltaScaleY:A}}}]),e})();function fW(e){return e[0].toLowerCase()+e.slice(1)}function pW(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qf;for(var n in t){var i=n.slice(0,3),l=fW(n.slice(3));if(i==="min"&&e[l]<t[n]||i==="max"&&e[l]>t[n])return!1}return!0}function GT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function ZT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GT(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var ag=k.createContext({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),rS=ag.Provider;function mW(e){var t=e.value,n=e.children,i=k.useState(null),l=Qa(i,2),d=l[0],a=l[1],g=k.useContext(ag);return t=ZT(ZT({setMap:a},g),{},{map:g&&g.map||d},t),k.createElement(rS,{value:t},n)}ag.Provider=mW;var pw=typeof window<"u"?k.useLayoutEffect:k.useEffect;function Vb(e,t){var n=t.longitude,i=t.latitude;return e&&e.queryTerrainElevation&&e.queryTerrainElevation([n,i])||0}function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var gW="https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens",j4="A valid API access token is required to use Mapbox data";function yW(){}function A4(e){var t=e.map,n=e.props,i=e.width,l=e.height,d=fc(fc(fc({},n),n.viewState),{},{width:i,height:l});return d.position=[0,0,Vb(t,d)],new xu(d)}var vW=401,KT={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},xW=Object.assign({},dp.propTypes,{width:ht.oneOfType([ht.number,ht.string]),height:ht.oneOfType([ht.number,ht.string]),onResize:ht.func,disableTokenWarning:ht.bool,visible:ht.bool,className:ht.string,style:ht.object,visibilityConstraints:ht.object}),bW=Object.assign({},dp.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:yW,className:"",style:null,visibilityConstraints:qf});function _W(){var e={position:"absolute",left:0,top:0};return k.createElement("div",{key:"warning",id:"no-token-warning",style:e},k.createElement("h3",{key:"header"},j4),k.createElement("div",{key:"text"},"For information on setting up your basemap, read"),k.createElement("a",{key:"link",href:gW},"Note on Map Tokens"))}function wW(e){return{getMap:function(){return e.current&&e.current.getMap()},queryRenderedFeatures:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=e.current&&e.current.getMap();return l&&l.queryRenderedFeatures(n,i)}}}var Kh=k.forwardRef(function(e,t){var n=k.useState(!0),i=Qa(n,2),l=i[0],d=i[1],a=k.useState({width:0,height:0}),g=Qa(a,2),x=g[0],_=g[1],C=k.useRef(null),E=k.useRef(null),A=k.useRef(null),D=k.useRef(null),I=k.useContext(ag);pw(function(){if(Kh.supported()){var we=new dp(fc(fc(fc({},e),x),{},{mapboxgl:Tu,container:E.current,onError:function(Ke){var ze=Ke.error&&Ke.error.status||Ke.status;ze===vW&&l&&(console.error(j4),d(!1)),e.onError(Ke)}}));C.current=we,I&&I.setMap&&I.setMap(we.getMap());var ye=new tW(function(Pe){if(Pe[0].contentRect){var Ke=Pe[0].contentRect,ze=Ke.width,Je=Ke.height;_({width:ze,height:Je}),e.onResize({width:ze,height:Je})}});return ye.observe(A.current),function(){we.finalize(),C.current=null,ye.disconnect()}}},[]),pw(function(){C.current&&C.current.setProps(fc(fc({},e),x))});var L=C.current&&C.current.getMap();k.useImperativeHandle(t,function(){return wW(C)},[]);var B=k.useCallback(function(we){var ye=we.target;ye===D.current&&ye.scrollTo(0,0)},[]),z=L&&k.createElement(rS,{value:fc(fc({},I),{},{viewport:I.viewport||A4(fc({map:L,props:e},x)),map:L,container:I.container||A.current})},k.createElement("div",{key:"map-overlays",className:"overlays",ref:D,style:KT,onScroll:B},e.children)),q=e.className,H=e.width,W=e.height,ne=e.style,re=e.visibilityConstraints,ee=Object.assign({position:"relative"},ne,{width:H,height:W}),oe=e.visible&&pW(e.viewState||e,re),he=Object.assign({},KT,{visibility:oe?"inherit":"hidden"});return k.createElement("div",{key:"map-container",ref:A,style:ee},k.createElement("div",{key:"map-mapbox",ref:E,style:he,className:q}),z,!l&&!e.disableTokenWarning&&k.createElement(_W,null))});Kh.supported=function(){return Tu&&Tu.supported()};Kh.propTypes=xW;Kh.defaultProps=bW;function SW(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=EW(e))||t){n&&(e=n);var i=0,l=function(){};return{s:l,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(_){throw _},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,a=!1,g;return{s:function(){n=n.call(e)},n:function(){var _=n.next();return d=_.done,_},e:function(_){a=!0,g=_},f:function(){try{!d&&n.return!=null&&n.return()}finally{if(a)throw g}}}}function EW(e,t){if(e){if(typeof e=="string")return YT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YT(e,t)}}function YT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var N4=(function(){function e(){Zh(this,e),bn(this,"propNames",[])}return Xh(e,[{key:"arePropsEqual",value:function(n,i){var l=SW(this.propNames||[]),d;try{for(l.s();!(d=l.n()).done;){var a=d.value;if(!k4(n[a],i[a]))return!1}}catch(g){l.e(g)}finally{l.f()}return!0}},{key:"initializeProps",value:function(n,i){return{start:n,end:i}}},{key:"interpolateProps",value:function(n,i,l){pc(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(n,i){return i.transitionDuration}}]),e})();function _d(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mw(e,t){return mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mw(e,t)}function iS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mw(e,t)}function aS(e,t){if(t&&(Bm(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _d(e)}function Vh(e){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vh(e)}var CW={longitude:1,bearing:1};function V0(e){return Number.isFinite(e)||Array.isArray(e)}function TW(e){return e in CW}function gw(e,t,n){return TW(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}function kW(e){var t=jW();return function(){var i=Vh(e),l;if(t){var d=Vh(this).constructor;l=Reflect.construct(i,arguments,d)}else l=i.apply(this,arguments);return aS(this,l)}}function jW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AW=["longitude","latitude","zoom","bearing","pitch"],NW=["latitude","longitude","zoom","width","height"],WT=["bearing","pitch"],MW={speed:1.2,curve:1.414};(function(e){iS(n,e);var t=kW(n);function n(){var i,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zh(this,n),i=t.call(this),bn(_d(i),"propNames",AW),i.props=Object.assign({},MW,l),i}return Xh(n,[{key:"initializeProps",value:function(l,d){for(var a={},g={},x=0,_=NW;x<_.length;x++){var C=_[x],E=l[C],A=d[C];pc(V0(E)&&V0(A),"".concat(C," must be supplied for transition")),a[C]=E,g[C]=gw(C,E,A)}for(var D=0,I=WT;D<I.length;D++){var L=I[D],B=l[L]||0,z=d[L]||0;a[L]=B,g[L]=gw(L,B,z)}return{start:a,end:g}}},{key:"interpolateProps",value:function(l,d,a){for(var g=RY(l,d,a,this.props),x=0,_=WT;x<_.length;x++){var C=_[x];g[C]=U0(l[C],d[C],a)}return g}},{key:"getDuration",value:function(l,d){var a=d.transitionDuration;return a==="auto"&&(a=LY(l,d,this.props)),a}}]),n})(N4);function QT(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=DW(e))||t){n&&(e=n);var i=0,l=function(){};return{s:l,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(_){throw _},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,a=!1,g;return{s:function(){n=n.call(e)},n:function(){var _=n.next();return d=_.done,_},e:function(_){a=!0,g=_},f:function(){try{!d&&n.return!=null&&n.return()}finally{if(a)throw g}}}}function DW(e,t){if(e){if(typeof e=="string")return JT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JT(e,t)}}function JT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function PW(e){var t=IW();return function(){var i=Vh(e),l;if(t){var d=Vh(this).constructor;l=Reflect.construct(i,arguments,d)}else l=i.apply(this,arguments);return aS(this,l)}}function IW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var OW=["longitude","latitude","zoom","bearing","pitch"],Ny=(function(e){iS(n,e);var t=PW(n);function n(){var i,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zh(this,n),i=t.call(this),Array.isArray(l)&&(l={transitionProps:l}),i.propNames=l.transitionProps||OW,l.around&&(i.around=l.around),i}return Xh(n,[{key:"initializeProps",value:function(l,d){var a={},g={};if(this.around){a.around=this.around;var x=new xu(l).unproject(this.around);Object.assign(g,d,{around:new xu(d).project(x),aroundLngLat:x})}var _=QT(this.propNames),C;try{for(_.s();!(C=_.n()).done;){var E=C.value,A=l[E],D=d[E];pc(V0(A)&&V0(D),"".concat(E," must be supplied for transition")),a[E]=A,g[E]=gw(E,A,D)}}catch(I){_.e(I)}finally{_.f()}return{start:a,end:g}}},{key:"interpolateProps",value:function(l,d,a){var g={},x=QT(this.propNames),_;try{for(x.s();!(_=x.n()).done;){var C=_.value;g[C]=U0(l[C],d[C],a)}}catch(L){x.e(L)}finally{x.f()}if(d.around){var E=new xu(Object.assign({},d,g)).getMapCenterByLngLatPosition({lngLat:d.aroundLngLat,pos:U0(l.around,d.around,a)}),A=Qa(E,2),D=A[0],I=A[1];g.longitude=D,g.latitude=I}return g}}]),n})(N4),My=function(){};function RW(e,t){var n=e(t);return function(i){return 1/(1-n)*(e(i*(1-t)+t)-n)}}var Dy={BREAK:1,SNAP_TO_END:2,IGNORE:3,UPDATE:4},LW={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new Ny,transitionInterruption:Dy.BREAK,onTransitionStart:My,onTransitionInterrupt:My,onTransitionEnd:My},oS=(function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Zh(this,e),bn(this,"_animationFrame",null),bn(this,"_onTransitionFrame",function(){t._animationFrame=requestAnimationFrame(t._onTransitionFrame),t._updateViewport()}),this.props=null,this.onViewportChange=n.onViewportChange||My,this.onStateChange=n.onStateChange||My,this.time=n.getTime||Date.now}return Xh(e,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(n){var i=this.props;if(this.props=n,!i||this._shouldIgnoreViewportChange(i,n))return!1;if(this._isTransitionEnabled(n)){var l=Object.assign({},i),d=Object.assign({},n);if(this._isTransitionInProgress()&&(i.onTransitionInterrupt(),this.state.interruption===Dy.SNAP_TO_END?Object.assign(l,this.state.endProps):Object.assign(l,this.state.propsInTransition),this.state.interruption===Dy.UPDATE)){var a=this.time(),g=(a-this.state.startTime)/this.state.duration;d.transitionDuration=this.state.duration-(a-this.state.startTime),d.transitionEasing=RW(this.state.easing,g),d.transitionInterpolator=l.transitionInterpolator}return d.onTransitionStart(),this._triggerTransition(l,d),!0}return this._isTransitionInProgress()&&(i.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return!!this._animationFrame}},{key:"_isTransitionEnabled",value:function(n){var i=n.transitionDuration,l=n.transitionInterpolator;return(i>0||i==="auto")&&!!l}},{key:"_isUpdateDueToCurrentTransition",value:function(n){return this.state.propsInTransition?this.state.interpolator.arePropsEqual(n,this.state.propsInTransition):!1}},{key:"_shouldIgnoreViewportChange",value:function(n,i){return n?this._isTransitionInProgress()?this.state.interruption===Dy.IGNORE||this._isUpdateDueToCurrentTransition(i):this._isTransitionEnabled(i)?i.transitionInterpolator.arePropsEqual(n,i):!0:!0}},{key:"_triggerTransition",value:function(n,i){pc(this._isTransitionEnabled(i)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var l=i.transitionInterpolator,d=l.getDuration?l.getDuration(n,i):i.transitionDuration;if(d!==0){var a=i.transitionInterpolator.initializeProps(n,i),g={inTransition:!0,isZooming:n.zoom!==i.zoom,isPanning:n.longitude!==i.longitude||n.latitude!==i.latitude,isRotating:n.bearing!==i.bearing||n.pitch!==i.pitch};this.state={duration:d,easing:i.transitionEasing,interpolator:i.transitionInterpolator,interruption:i.transitionInterruption,startTime:this.time(),startProps:a.start,endProps:a.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(g)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var n=this.time(),i=this.state,l=i.startTime,d=i.duration,a=i.easing,g=i.interpolator,x=i.startProps,_=i.endProps,C=!1,E=(n-l)/d;E>=1&&(E=1,C=!0),E=a(E);var A=g.interpolateProps(x,_,E),D=new Pm(Object.assign({},this.props,A));this.state.propsInTransition=D.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),C&&(this._endTransition(),this.props.onTransitionEnd())}}]),e})();bn(oS,"defaultProps",LW);var i1={exports:{}};var ek;function zW(){return ek||(ek=1,(function(e){(function(t,n,i,l){var d=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),g="function",x=Math.round,_=Math.abs,C=Date.now;function E(ce,Se,qe){return setTimeout(H(ce,qe),Se)}function A(ce,Se,qe){return Array.isArray(ce)?(D(ce,qe[Se],qe),!0):!1}function D(ce,Se,qe){var pt;if(ce)if(ce.forEach)ce.forEach(Se,qe);else if(ce.length!==l)for(pt=0;pt<ce.length;)Se.call(qe,ce[pt],pt,ce),pt++;else for(pt in ce)ce.hasOwnProperty(pt)&&Se.call(qe,ce[pt],pt,ce)}function I(ce,Se,qe){var pt="DEPRECATED METHOD: "+Se+`
`+qe+` AT 
`;return function(){var Ht=new Error("get-stack-trace"),hn=Ht&&Ht.stack?Ht.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Pn=t.console&&(t.console.warn||t.console.log);return Pn&&Pn.call(t.console,pt,hn),ce.apply(this,arguments)}}var L;typeof Object.assign!="function"?L=function(Se){if(Se===l||Se===null)throw new TypeError("Cannot convert undefined or null to object");for(var qe=Object(Se),pt=1;pt<arguments.length;pt++){var Ht=arguments[pt];if(Ht!==l&&Ht!==null)for(var hn in Ht)Ht.hasOwnProperty(hn)&&(qe[hn]=Ht[hn])}return qe}:L=Object.assign;var B=I(function(Se,qe,pt){for(var Ht=Object.keys(qe),hn=0;hn<Ht.length;)(!pt||pt&&Se[Ht[hn]]===l)&&(Se[Ht[hn]]=qe[Ht[hn]]),hn++;return Se},"extend","Use `assign`."),z=I(function(Se,qe){return B(Se,qe,!0)},"merge","Use `assign`.");function q(ce,Se,qe){var pt=Se.prototype,Ht;Ht=ce.prototype=Object.create(pt),Ht.constructor=ce,Ht._super=pt,qe&&L(Ht,qe)}function H(ce,Se){return function(){return ce.apply(Se,arguments)}}function W(ce,Se){return typeof ce==g?ce.apply(Se&&Se[0]||l,Se):ce}function ne(ce,Se){return ce===l?Se:ce}function re(ce,Se,qe){D(we(Se),function(pt){ce.addEventListener(pt,qe,!1)})}function ee(ce,Se,qe){D(we(Se),function(pt){ce.removeEventListener(pt,qe,!1)})}function oe(ce,Se){for(;ce;){if(ce==Se)return!0;ce=ce.parentNode}return!1}function he(ce,Se){return ce.indexOf(Se)>-1}function we(ce){return ce.trim().split(/\s+/g)}function ye(ce,Se,qe){if(ce.indexOf&&!qe)return ce.indexOf(Se);for(var pt=0;pt<ce.length;){if(qe&&ce[pt][qe]==Se||!qe&&ce[pt]===Se)return pt;pt++}return-1}function Pe(ce){return Array.prototype.slice.call(ce,0)}function Ke(ce,Se,qe){for(var pt=[],Ht=[],hn=0;hn<ce.length;){var Pn=ce[hn][Se];ye(Ht,Pn)<0&&pt.push(ce[hn]),Ht[hn]=Pn,hn++}return pt=pt.sort(function(oa,ea){return oa[Se]>ea[Se]}),pt}function ze(ce,Se){for(var qe,pt,Ht=Se[0].toUpperCase()+Se.slice(1),hn=0;hn<d.length;){if(qe=d[hn],pt=qe?qe+Ht:Se,pt in ce)return pt;hn++}return l}var Je=1;function Ae(){return Je++}function De(ce){var Se=ce.ownerDocument||ce;return Se.defaultView||Se.parentWindow||t}var ke=/mobile|tablet|ip(ad|hone|od)|android/i,st="ontouchstart"in t,me=ze(t,"PointerEvent")!==l,Ce=st&&ke.test(navigator.userAgent),pe="touch",Q="pen",Ee="mouse",Ge="kinect",lt=25,We=1,Nt=2,At=4,Mt=8,Ut=1,Pt=2,Rt=4,vn=8,er=16,$n=Pt|Rt,ir=vn|er,dt=$n|ir,Xe=["x","y"],xe=["clientX","clientY"];function Re(ce,Se){var qe=this;this.manager=ce,this.callback=Se,this.element=ce.element,this.target=ce.options.inputTarget,this.domHandler=function(pt){W(ce.options.enable,[ce])&&qe.handler(pt)},this.init()}Re.prototype={handler:function(){},init:function(){this.evEl&&re(this.element,this.evEl,this.domHandler),this.evTarget&&re(this.target,this.evTarget,this.domHandler),this.evWin&&re(De(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ee(this.element,this.evEl,this.domHandler),this.evTarget&&ee(this.target,this.evTarget,this.domHandler),this.evWin&&ee(De(this.element),this.evWin,this.domHandler)}};function Ve(ce){var Se,qe=ce.options.inputClass;return qe?Se=qe:me?Se=da:Ce?Se=Fr:st?Se=eo:Se=qr,new Se(ce,Vt)}function Vt(ce,Se,qe){var pt=qe.pointers.length,Ht=qe.changedPointers.length,hn=Se&We&&pt-Ht===0,Pn=Se&(At|Mt)&&pt-Ht===0;qe.isFirst=!!hn,qe.isFinal=!!Pn,hn&&(ce.session={}),qe.eventType=Se,Oe(ce,qe),ce.emit("hammer.input",qe),ce.recognize(qe),ce.session.prevInput=qe}function Oe(ce,Se){var qe=ce.session,pt=Se.pointers,Ht=pt.length;qe.firstInput||(qe.firstInput=Tt(Se)),Ht>1&&!qe.firstMultiple?qe.firstMultiple=Tt(Se):Ht===1&&(qe.firstMultiple=!1);var hn=qe.firstInput,Pn=qe.firstMultiple,Hi=Pn?Pn.center:hn.center,oa=Se.center=on(pt);Se.timeStamp=C(),Se.deltaTime=Se.timeStamp-hn.timeStamp,Se.angle=Bi(Hi,oa),Se.distance=wr(Hi,oa),Le(qe,Se),Se.offsetDirection=Xn(Se.deltaX,Se.deltaY);var ea=Mn(Se.deltaTime,Se.deltaX,Se.deltaY);Se.overallVelocityX=ea.x,Se.overallVelocityY=ea.y,Se.overallVelocity=_(ea.x)>_(ea.y)?ea.x:ea.y,Se.scale=Pn?Xr(Pn.pointers,pt):1,Se.rotation=Pn?Jr(Pn.pointers,pt):0,Se.maxPointers=qe.prevInput?Se.pointers.length>qe.prevInput.maxPointers?Se.pointers.length:qe.prevInput.maxPointers:Se.pointers.length,Qe(qe,Se);var $i=ce.element;oe(Se.srcEvent.target,$i)&&($i=Se.srcEvent.target),Se.target=$i}function Le(ce,Se){var qe=Se.center,pt=ce.offsetDelta||{},Ht=ce.prevDelta||{},hn=ce.prevInput||{};(Se.eventType===We||hn.eventType===At)&&(Ht=ce.prevDelta={x:hn.deltaX||0,y:hn.deltaY||0},pt=ce.offsetDelta={x:qe.x,y:qe.y}),Se.deltaX=Ht.x+(qe.x-pt.x),Se.deltaY=Ht.y+(qe.y-pt.y)}function Qe(ce,Se){var qe=ce.lastInterval||Se,pt=Se.timeStamp-qe.timeStamp,Ht,hn,Pn,Hi;if(Se.eventType!=Mt&&(pt>lt||qe.velocity===l)){var oa=Se.deltaX-qe.deltaX,ea=Se.deltaY-qe.deltaY,$i=Mn(pt,oa,ea);hn=$i.x,Pn=$i.y,Ht=_($i.x)>_($i.y)?$i.x:$i.y,Hi=Xn(oa,ea),ce.lastInterval=Se}else Ht=qe.velocity,hn=qe.velocityX,Pn=qe.velocityY,Hi=qe.direction;Se.velocity=Ht,Se.velocityX=hn,Se.velocityY=Pn,Se.direction=Hi}function Tt(ce){for(var Se=[],qe=0;qe<ce.pointers.length;)Se[qe]={clientX:x(ce.pointers[qe].clientX),clientY:x(ce.pointers[qe].clientY)},qe++;return{timeStamp:C(),pointers:Se,center:on(Se),deltaX:ce.deltaX,deltaY:ce.deltaY}}function on(ce){var Se=ce.length;if(Se===1)return{x:x(ce[0].clientX),y:x(ce[0].clientY)};for(var qe=0,pt=0,Ht=0;Ht<Se;)qe+=ce[Ht].clientX,pt+=ce[Ht].clientY,Ht++;return{x:x(qe/Se),y:x(pt/Se)}}function Mn(ce,Se,qe){return{x:Se/ce||0,y:qe/ce||0}}function Xn(ce,Se){return ce===Se?Ut:_(ce)>=_(Se)?ce<0?Pt:Rt:Se<0?vn:er}function wr(ce,Se,qe){qe||(qe=Xe);var pt=Se[qe[0]]-ce[qe[0]],Ht=Se[qe[1]]-ce[qe[1]];return Math.sqrt(pt*pt+Ht*Ht)}function Bi(ce,Se,qe){qe||(qe=Xe);var pt=Se[qe[0]]-ce[qe[0]],Ht=Se[qe[1]]-ce[qe[1]];return Math.atan2(Ht,pt)*180/Math.PI}function Jr(ce,Se){return Bi(Se[1],Se[0],xe)+Bi(ce[1],ce[0],xe)}function Xr(ce,Se){return wr(Se[0],Se[1],xe)/wr(ce[0],ce[1],xe)}var Ci={mousedown:We,mousemove:Nt,mouseup:At},Sr="mousedown",ka="mousemove mouseup";function qr(){this.evEl=Sr,this.evWin=ka,this.pressed=!1,Re.apply(this,arguments)}q(qr,Re,{handler:function(Se){var qe=Ci[Se.type];qe&We&&Se.button===0&&(this.pressed=!0),qe&Nt&&Se.which!==1&&(qe=At),this.pressed&&(qe&At&&(this.pressed=!1),this.callback(this.manager,qe,{pointers:[Se],changedPointers:[Se],pointerType:Ee,srcEvent:Se}))}});var Ks={pointerdown:We,pointermove:Nt,pointerup:At,pointercancel:Mt,pointerout:Mt},So={2:pe,3:Q,4:Ee,5:Ge},Eo="pointerdown",qa="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Eo="MSPointerDown",qa="MSPointerMove MSPointerUp MSPointerCancel");function da(){this.evEl=Eo,this.evWin=qa,Re.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}q(da,Re,{handler:function(Se){var qe=this.store,pt=!1,Ht=Se.type.toLowerCase().replace("ms",""),hn=Ks[Ht],Pn=So[Se.pointerType]||Se.pointerType,Hi=Pn==pe,oa=ye(qe,Se.pointerId,"pointerId");hn&We&&(Se.button===0||Hi)?oa<0&&(qe.push(Se),oa=qe.length-1):hn&(At|Mt)&&(pt=!0),!(oa<0)&&(qe[oa]=Se,this.callback(this.manager,hn,{pointers:qe,changedPointers:[Se],pointerType:Pn,srcEvent:Se}),pt&&qe.splice(oa,1))}});var Co={touchstart:We,touchmove:Nt,touchend:At,touchcancel:Mt},Ra="touchstart",ws="touchstart touchmove touchend touchcancel";function $o(){this.evTarget=Ra,this.evWin=ws,this.started=!1,Re.apply(this,arguments)}q($o,Re,{handler:function(Se){var qe=Co[Se.type];if(qe===We&&(this.started=!0),!!this.started){var pt=is.call(this,Se,qe);qe&(At|Mt)&&pt[0].length-pt[1].length===0&&(this.started=!1),this.callback(this.manager,qe,{pointers:pt[0],changedPointers:pt[1],pointerType:pe,srcEvent:Se})}}});function is(ce,Se){var qe=Pe(ce.touches),pt=Pe(ce.changedTouches);return Se&(At|Mt)&&(qe=Ke(qe.concat(pt),"identifier")),[qe,pt]}var fr={touchstart:We,touchmove:Nt,touchend:At,touchcancel:Mt},Ti="touchstart touchmove touchend touchcancel";function Fr(){this.evTarget=Ti,this.targetIds={},Re.apply(this,arguments)}q(Fr,Re,{handler:function(Se){var qe=fr[Se.type],pt=vt.call(this,Se,qe);pt&&this.callback(this.manager,qe,{pointers:pt[0],changedPointers:pt[1],pointerType:pe,srcEvent:Se})}});function vt(ce,Se){var qe=Pe(ce.touches),pt=this.targetIds;if(Se&(We|Nt)&&qe.length===1)return pt[qe[0].identifier]=!0,[qe,qe];var Ht,hn,Pn=Pe(ce.changedTouches),Hi=[],oa=this.target;if(hn=qe.filter(function(ea){return oe(ea.target,oa)}),Se===We)for(Ht=0;Ht<hn.length;)pt[hn[Ht].identifier]=!0,Ht++;for(Ht=0;Ht<Pn.length;)pt[Pn[Ht].identifier]&&Hi.push(Pn[Ht]),Se&(At|Mt)&&delete pt[Pn[Ht].identifier],Ht++;if(Hi.length)return[Ke(hn.concat(Hi),"identifier"),Hi]}var Yt=2500,Ja=25;function eo(){Re.apply(this,arguments);var ce=H(this.handler,this);this.touch=new Fr(this.manager,ce),this.mouse=new qr(this.manager,ce),this.primaryTouch=null,this.lastTouches=[]}q(eo,Re,{handler:function(Se,qe,pt){var Ht=pt.pointerType==pe,hn=pt.pointerType==Ee;if(!(hn&&pt.sourceCapabilities&&pt.sourceCapabilities.firesTouchEvents)){if(Ht)gi.call(this,qe,pt);else if(hn&&Z.call(this,pt))return;this.callback(Se,qe,pt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function gi(ce,Se){ce&We?(this.primaryTouch=Se.changedPointers[0].identifier,Hr.call(this,Se)):ce&(At|Mt)&&Hr.call(this,Se)}function Hr(ce){var Se=ce.changedPointers[0];if(Se.identifier===this.primaryTouch){var qe={x:Se.clientX,y:Se.clientY};this.lastTouches.push(qe);var pt=this.lastTouches,Ht=function(){var hn=pt.indexOf(qe);hn>-1&&pt.splice(hn,1)};setTimeout(Ht,Yt)}}function Z(ce){for(var Se=ce.srcEvent.clientX,qe=ce.srcEvent.clientY,pt=0;pt<this.lastTouches.length;pt++){var Ht=this.lastTouches[pt],hn=Math.abs(Se-Ht.x),Pn=Math.abs(qe-Ht.y);if(hn<=Ja&&Pn<=Ja)return!0}return!1}var Y=ze(a.style,"touchAction"),ie=Y!==l,se="compute",je="auto",Ne="manipulation",Ye="none",He="pan-x",Be="pan-y",nt=yt();function xt(ce,Se){this.manager=ce,this.set(Se)}xt.prototype={set:function(ce){ce==se&&(ce=this.compute()),ie&&this.manager.element.style&&nt[ce]&&(this.manager.element.style[Y]=ce),this.actions=ce.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ce=[];return D(this.manager.recognizers,function(Se){W(Se.options.enable,[Se])&&(ce=ce.concat(Se.getTouchAction()))}),Ot(ce.join(" "))},preventDefaults:function(ce){var Se=ce.srcEvent,qe=ce.offsetDirection;if(this.manager.session.prevented){Se.preventDefault();return}var pt=this.actions,Ht=he(pt,Ye)&&!nt[Ye],hn=he(pt,Be)&&!nt[Be],Pn=he(pt,He)&&!nt[He];if(Ht){var Hi=ce.pointers.length===1,oa=ce.distance<2,ea=ce.deltaTime<250;if(Hi&&oa&&ea)return}if(!(Pn&&hn)&&(Ht||hn&&qe&$n||Pn&&qe&ir))return this.preventSrc(Se)},preventSrc:function(ce){this.manager.session.prevented=!0,ce.preventDefault()}};function Ot(ce){if(he(ce,Ye))return Ye;var Se=he(ce,He),qe=he(ce,Be);return Se&&qe?Ye:Se||qe?Se?He:Be:he(ce,Ne)?Ne:je}function yt(){if(!ie)return!1;var ce={},Se=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(qe){ce[qe]=Se?t.CSS.supports("touch-action",qe):!0}),ce}var It=1,Lt=2,en=4,dn=8,qt=dn,Dn=16,qn=32;function kn(ce){this.options=L({},this.defaults,ce||{}),this.id=Ae(),this.manager=null,this.options.enable=ne(this.options.enable,!0),this.state=It,this.simultaneous={},this.requireFail=[]}kn.prototype={defaults:{},set:function(ce){return L(this.options,ce),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ce){if(A(ce,"recognizeWith",this))return this;var Se=this.simultaneous;return ce=Bn(ce,this),Se[ce.id]||(Se[ce.id]=ce,ce.recognizeWith(this)),this},dropRecognizeWith:function(ce){return A(ce,"dropRecognizeWith",this)?this:(ce=Bn(ce,this),delete this.simultaneous[ce.id],this)},requireFailure:function(ce){if(A(ce,"requireFailure",this))return this;var Se=this.requireFail;return ce=Bn(ce,this),ye(Se,ce)===-1&&(Se.push(ce),ce.requireFailure(this)),this},dropRequireFailure:function(ce){if(A(ce,"dropRequireFailure",this))return this;ce=Bn(ce,this);var Se=ye(this.requireFail,ce);return Se>-1&&this.requireFail.splice(Se,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ce){return!!this.simultaneous[ce.id]},emit:function(ce){var Se=this,qe=this.state;function pt(Ht){Se.manager.emit(Ht,ce)}qe<dn&&pt(Se.options.event+zn(qe)),pt(Se.options.event),ce.additionalEvent&&pt(ce.additionalEvent),qe>=dn&&pt(Se.options.event+zn(qe))},tryEmit:function(ce){if(this.canEmit())return this.emit(ce);this.state=qn},canEmit:function(){for(var ce=0;ce<this.requireFail.length;){if(!(this.requireFail[ce].state&(qn|It)))return!1;ce++}return!0},recognize:function(ce){var Se=L({},ce);if(!W(this.options.enable,[this,Se])){this.reset(),this.state=qn;return}this.state&(qt|Dn|qn)&&(this.state=It),this.state=this.process(Se),this.state&(Lt|en|dn|Dn)&&this.tryEmit(Se)},process:function(ce){},getTouchAction:function(){},reset:function(){}};function zn(ce){return ce&Dn?"cancel":ce&dn?"end":ce&en?"move":ce&Lt?"start":""}function Lr(ce){return ce==er?"down":ce==vn?"up":ce==Pt?"left":ce==Rt?"right":""}function Bn(ce,Se){var qe=Se.manager;return qe?qe.get(ce):ce}function nr(){kn.apply(this,arguments)}q(nr,kn,{defaults:{pointers:1},attrTest:function(ce){var Se=this.options.pointers;return Se===0||ce.pointers.length===Se},process:function(ce){var Se=this.state,qe=ce.eventType,pt=Se&(Lt|en),Ht=this.attrTest(ce);return pt&&(qe&Mt||!Ht)?Se|Dn:pt||Ht?qe&At?Se|dn:Se&Lt?Se|en:Lt:qn}});function pr(){nr.apply(this,arguments),this.pX=null,this.pY=null}q(pr,nr,{defaults:{event:"pan",threshold:10,pointers:1,direction:dt},getTouchAction:function(){var ce=this.options.direction,Se=[];return ce&$n&&Se.push(Be),ce&ir&&Se.push(He),Se},directionTest:function(ce){var Se=this.options,qe=!0,pt=ce.distance,Ht=ce.direction,hn=ce.deltaX,Pn=ce.deltaY;return Ht&Se.direction||(Se.direction&$n?(Ht=hn===0?Ut:hn<0?Pt:Rt,qe=hn!=this.pX,pt=Math.abs(ce.deltaX)):(Ht=Pn===0?Ut:Pn<0?vn:er,qe=Pn!=this.pY,pt=Math.abs(ce.deltaY))),ce.direction=Ht,qe&&pt>Se.threshold&&Ht&Se.direction},attrTest:function(ce){return nr.prototype.attrTest.call(this,ce)&&(this.state&Lt||!(this.state&Lt)&&this.directionTest(ce))},emit:function(ce){this.pX=ce.deltaX,this.pY=ce.deltaY;var Se=Lr(ce.direction);Se&&(ce.additionalEvent=this.options.event+Se),this._super.emit.call(this,ce)}});function Hn(){nr.apply(this,arguments)}q(Hn,nr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(ce){return this._super.attrTest.call(this,ce)&&(Math.abs(ce.scale-1)>this.options.threshold||this.state&Lt)},emit:function(ce){if(ce.scale!==1){var Se=ce.scale<1?"in":"out";ce.additionalEvent=this.options.event+Se}this._super.emit.call(this,ce)}});function Qi(){kn.apply(this,arguments),this._timer=null,this._input=null}q(Qi,kn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[je]},process:function(ce){var Se=this.options,qe=ce.pointers.length===Se.pointers,pt=ce.distance<Se.threshold,Ht=ce.deltaTime>Se.time;if(this._input=ce,!pt||!qe||ce.eventType&(At|Mt)&&!Ht)this.reset();else if(ce.eventType&We)this.reset(),this._timer=E(function(){this.state=qt,this.tryEmit()},Se.time,this);else if(ce.eventType&At)return qt;return qn},reset:function(){clearTimeout(this._timer)},emit:function(ce){this.state===qt&&(ce&&ce.eventType&At?this.manager.emit(this.options.event+"up",ce):(this._input.timeStamp=C(),this.manager.emit(this.options.event,this._input)))}});function lr(){nr.apply(this,arguments)}q(lr,nr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(ce){return this._super.attrTest.call(this,ce)&&(Math.abs(ce.rotation)>this.options.threshold||this.state&Lt)}});function Kr(){nr.apply(this,arguments)}q(Kr,nr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$n|ir,pointers:1},getTouchAction:function(){return pr.prototype.getTouchAction.call(this)},attrTest:function(ce){var Se=this.options.direction,qe;return Se&($n|ir)?qe=ce.overallVelocity:Se&$n?qe=ce.overallVelocityX:Se&ir&&(qe=ce.overallVelocityY),this._super.attrTest.call(this,ce)&&Se&ce.offsetDirection&&ce.distance>this.options.threshold&&ce.maxPointers==this.options.pointers&&_(qe)>this.options.velocity&&ce.eventType&At},emit:function(ce){var Se=Lr(ce.offsetDirection);Se&&this.manager.emit(this.options.event+Se,ce),this.manager.emit(this.options.event,ce)}});function Jn(){kn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}q(Jn,kn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ne]},process:function(ce){var Se=this.options,qe=ce.pointers.length===Se.pointers,pt=ce.distance<Se.threshold,Ht=ce.deltaTime<Se.time;if(this.reset(),ce.eventType&We&&this.count===0)return this.failTimeout();if(pt&&Ht&&qe){if(ce.eventType!=At)return this.failTimeout();var hn=this.pTime?ce.timeStamp-this.pTime<Se.interval:!0,Pn=!this.pCenter||wr(this.pCenter,ce.center)<Se.posThreshold;this.pTime=ce.timeStamp,this.pCenter=ce.center,!Pn||!hn?this.count=1:this.count+=1,this._input=ce;var Hi=this.count%Se.taps;if(Hi===0)return this.hasRequireFailures()?(this._timer=E(function(){this.state=qt,this.tryEmit()},Se.interval,this),Lt):qt}return qn},failTimeout:function(){return this._timer=E(function(){this.state=qn},this.options.interval,this),qn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==qt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ii(ce,Se){return Se=Se||{},Se.recognizers=ne(Se.recognizers,ii.defaults.preset),new uo(ce,Se)}ii.VERSION="2.0.7",ii.defaults={domEvents:!1,touchAction:se,enable:!0,inputTarget:null,inputClass:null,preset:[[lr,{enable:!1}],[Hn,{enable:!1},["rotate"]],[Kr,{direction:$n}],[pr,{direction:$n},["swipe"]],[Jn],[Jn,{event:"doubletap",taps:2},["tap"]],[Qi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var aa=1,ki=2;function uo(ce,Se){this.options=L({},ii.defaults,Se||{}),this.options.inputTarget=this.options.inputTarget||ce,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ce,this.input=Ve(this),this.touchAction=new xt(this,this.options.touchAction),Ji(this,!0),D(this.options.recognizers,function(qe){var pt=this.add(new qe[0](qe[1]));qe[2]&&pt.recognizeWith(qe[2]),qe[3]&&pt.requireFailure(qe[3])},this)}uo.prototype={set:function(ce){return L(this.options,ce),ce.touchAction&&this.touchAction.update(),ce.inputTarget&&(this.input.destroy(),this.input.target=ce.inputTarget,this.input.init()),this},stop:function(ce){this.session.stopped=ce?ki:aa},recognize:function(ce){var Se=this.session;if(!Se.stopped){this.touchAction.preventDefaults(ce);var qe,pt=this.recognizers,Ht=Se.curRecognizer;(!Ht||Ht&&Ht.state&qt)&&(Ht=Se.curRecognizer=null);for(var hn=0;hn<pt.length;)qe=pt[hn],Se.stopped!==ki&&(!Ht||qe==Ht||qe.canRecognizeWith(Ht))?qe.recognize(ce):qe.reset(),!Ht&&qe.state&(Lt|en|dn)&&(Ht=Se.curRecognizer=qe),hn++}},get:function(ce){if(ce instanceof kn)return ce;for(var Se=this.recognizers,qe=0;qe<Se.length;qe++)if(Se[qe].options.event==ce)return Se[qe];return null},add:function(ce){if(A(ce,"add",this))return this;var Se=this.get(ce.options.event);return Se&&this.remove(Se),this.recognizers.push(ce),ce.manager=this,this.touchAction.update(),ce},remove:function(ce){if(A(ce,"remove",this))return this;if(ce=this.get(ce),ce){var Se=this.recognizers,qe=ye(Se,ce);qe!==-1&&(Se.splice(qe,1),this.touchAction.update())}return this},on:function(ce,Se){if(ce!==l&&Se!==l){var qe=this.handlers;return D(we(ce),function(pt){qe[pt]=qe[pt]||[],qe[pt].push(Se)}),this}},off:function(ce,Se){if(ce!==l){var qe=this.handlers;return D(we(ce),function(pt){Se?qe[pt]&&qe[pt].splice(ye(qe[pt],Se),1):delete qe[pt]}),this}},emit:function(ce,Se){this.options.domEvents&&To(ce,Se);var qe=this.handlers[ce]&&this.handlers[ce].slice();if(!(!qe||!qe.length)){Se.type=ce,Se.preventDefault=function(){Se.srcEvent.preventDefault()};for(var pt=0;pt<qe.length;)qe[pt](Se),pt++}},destroy:function(){this.element&&Ji(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Ji(ce,Se){var qe=ce.element;if(qe.style){var pt;D(ce.options.cssProps,function(Ht,hn){pt=ze(qe.style,hn),Se?(ce.oldCssProps[pt]=qe.style[pt],qe.style[pt]=Ht):qe.style[pt]=ce.oldCssProps[pt]||""}),Se||(ce.oldCssProps={})}}function To(ce,Se){var qe=n.createEvent("Event");qe.initEvent(ce,!0,!0),qe.gesture=Se,Se.target.dispatchEvent(qe)}L(ii,{INPUT_START:We,INPUT_MOVE:Nt,INPUT_END:At,INPUT_CANCEL:Mt,STATE_POSSIBLE:It,STATE_BEGAN:Lt,STATE_CHANGED:en,STATE_ENDED:dn,STATE_RECOGNIZED:qt,STATE_CANCELLED:Dn,STATE_FAILED:qn,DIRECTION_NONE:Ut,DIRECTION_LEFT:Pt,DIRECTION_RIGHT:Rt,DIRECTION_UP:vn,DIRECTION_DOWN:er,DIRECTION_HORIZONTAL:$n,DIRECTION_VERTICAL:ir,DIRECTION_ALL:dt,Manager:uo,Input:Re,TouchAction:xt,TouchInput:Fr,MouseInput:qr,PointerEventInput:da,TouchMouseInput:eo,SingleTouchInput:$o,Recognizer:kn,AttrRecognizer:nr,Tap:Jn,Pan:pr,Swipe:Kr,Pinch:Hn,Rotate:lr,Press:Qi,on:re,off:ee,each:D,merge:z,extend:B,assign:L,inherit:q,bindFn:H,prefixed:ze});var ko=typeof t<"u"?t:typeof self<"u"?self:{};ko.Hammer=ii,e.exports?e.exports=ii:t[i]=ii})(window,document,"Hammer")})(i1)),i1.exports}var jv=zW();const BW=rp(jv),du=Hk({__proto__:null,default:BW},[jv]),M4=1,D4=2,yw=4,FW={mousedown:M4,mousemove:D4,mouseup:yw};function UW(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function VW(e){const t=e.prototype.handler;e.prototype.handler=function(i){const l=this.store;i.button>0&&i.type==="pointerdown"&&(UW(l,d=>d.pointerId===i.pointerId)||l.push(i)),t.call(this,i)}}function qW(e){e.prototype.handler=function(n){let i=FW[n.type];i&M4&&n.button>=0&&(this.pressed=!0),i&D4&&n.buttons===0&&(i=yw),this.pressed&&(i&yw&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}VW(jv.PointerEventInput);qW(jv.MouseInput);const HW=jv.Manager;class qb{constructor(t,n,i){this.element=t,this.callback=n,this.options={enable:!0,...i}}}const $W=du?[[du.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[du.Rotate,{enable:!1}],[du.Pinch,{enable:!1}],[du.Swipe,{enable:!1}],[du.Pan,{threshold:0,enable:!1}],[du.Press,{enable:!1}],[du.Tap,{event:"doubletap",taps:2,enable:!1}],[du.Tap,{event:"anytap",enable:!1}],[du.Tap,{enable:!1}]]:null,tk={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},GW={doubletap:["tap"]},ZW={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},sS={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},XW={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},nk={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},KW=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Tm=typeof window<"u"?window:global;let vw=!1;try{const e={get passive(){return vw=!0,!0}};Tm.addEventListener("test",null,e),Tm.removeEventListener("test",null)}catch{vw=!1}const YW=KW.indexOf("firefox")!==-1,{WHEEL_EVENTS:WW}=sS,rk="wheel",ik=4.000244140625,QW=40,JW=.25;class eQ extends qb{constructor(t,n,i){super(t,n,i),this.handleEvent=l=>{if(!this.options.enable)return;let d=l.deltaY;Tm.WheelEvent&&(YW&&l.deltaMode===Tm.WheelEvent.DOM_DELTA_PIXEL&&(d/=Tm.devicePixelRatio),l.deltaMode===Tm.WheelEvent.DOM_DELTA_LINE&&(d*=QW)),d!==0&&d%ik===0&&(d=Math.floor(d/ik)),l.shiftKey&&d&&(d=d*JW),this.callback({type:rk,center:{x:l.clientX,y:l.clientY},delta:-d,srcEvent:l,pointerType:"mouse",target:l.target})},this.events=(this.options.events||[]).concat(WW),this.events.forEach(l=>t.addEventListener(l,this.handleEvent,vw?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,n){t===rk&&(this.options.enable=n)}}const{MOUSE_EVENTS:tQ}=sS,ak="pointermove",ok="pointerover",sk="pointerout",lk="pointerenter",ck="pointerleave";class nQ extends qb{constructor(t,n,i){super(t,n,i),this.handleEvent=d=>{this.handleOverEvent(d),this.handleOutEvent(d),this.handleEnterEvent(d),this.handleLeaveEvent(d),this.handleMoveEvent(d)},this.pressed=!1;const{enable:l}=this.options;this.enableMoveEvent=l,this.enableLeaveEvent=l,this.enableEnterEvent=l,this.enableOutEvent=l,this.enableOverEvent=l,this.events=(this.options.events||[]).concat(tQ),this.events.forEach(d=>t.addEventListener(d,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,n){t===ak&&(this.enableMoveEvent=n),t===ok&&(this.enableOverEvent=n),t===sk&&(this.enableOutEvent=n),t===lk&&(this.enableEnterEvent=n),t===ck&&(this.enableLeaveEvent=n)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(ok,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(sk,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(lk,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(ck,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.buttons===0&&(this.pressed=!1),this.pressed||this._emit(ak,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,n){this.callback({type:t,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:rQ}=sS,uk="keydown",dk="keyup";class iQ extends qb{constructor(t,n,i){super(t,n,i),this.handleEvent=l=>{const d=l.target||l.srcElement;d.tagName==="INPUT"&&d.type==="text"||d.tagName==="TEXTAREA"||(this.enableDownEvent&&l.type==="keydown"&&this.callback({type:uk,srcEvent:l,key:l.key,target:l.target}),this.enableUpEvent&&l.type==="keyup"&&this.callback({type:dk,srcEvent:l,key:l.key,target:l.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(rQ),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(l=>t.addEventListener(l,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,n){t===uk&&(this.enableDownEvent=n),t===dk&&(this.enableUpEvent=n)}}const hk="contextmenu";class aQ extends qb{constructor(t,n,i){super(t,n,i),this.handleEvent=l=>{this.options.enable&&this.callback({type:hk,center:{x:l.clientX,y:l.clientY},srcEvent:l,pointerType:"mouse",target:l.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,n){t===hk&&(this.options.enable=n)}}const fk=1,xw=2,pk=4,oQ={pointerdown:fk,pointermove:xw,pointerup:pk,mousedown:fk,mousemove:xw,mouseup:pk},sQ=0,lQ=1,cQ=2,uQ=1,dQ=2,hQ=4;function fQ(e){const t=oQ[e.srcEvent.type];if(!t)return null;const{buttons:n,button:i}=e.srcEvent;let l=!1,d=!1,a=!1;return t===xw?(l=!!(n&uQ),d=!!(n&hQ),a=!!(n&dQ)):(l=i===sQ,d=i===lQ,a=i===cQ),{leftButton:l,middleButton:d,rightButton:a}}function pQ(e,t){const n=e.center;if(!n)return null;const i=t.getBoundingClientRect(),l=i.width/t.offsetWidth||1,d=i.height/t.offsetHeight||1,a={x:(n.x-i.left-t.clientLeft)/l,y:(n.y-i.top-t.clientTop)/d};return{center:n,offsetCenter:a}}const a1={srcElement:"root",priority:0};class mQ{constructor(t){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let l=n.srcEvent.target;for(;l&&l!==i.rootElement;){if(this._emit(i,l),i.handled)return;l=l.parentNode}this._emit(i,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,n,i,l=!1,d=!1){const{handlers:a,handlersByElement:g}=this;let x=a1;typeof i=="string"||i&&i.addEventListener?x={...a1,srcElement:i}:i&&(x={...a1,...i});let _=g.get(x.srcElement);_||(_=[],g.set(x.srcElement,_));const C={type:t,handler:n,srcElement:x.srcElement,priority:x.priority};l&&(C.once=!0),d&&(C.passive=!0),a.push(C),this._active=this._active||!C.passive;let E=_.length-1;for(;E>=0&&!(_[E].priority>=C.priority);)E--;_.splice(E+1,0,C)}remove(t,n){const{handlers:i,handlersByElement:l}=this;for(let d=i.length-1;d>=0;d--){const a=i[d];if(a.type===t&&a.handler===n){i.splice(d,1);const g=l.get(a.srcElement);g.splice(g.indexOf(a),1),g.length===0&&l.delete(a.srcElement)}}this._active=i.some(d=>!d.passive)}_emit(t,n){const i=this.handlersByElement.get(n);if(i){let l=!1;const d=()=>{t.handled=!0},a=()=>{t.handled=!0,l=!0},g=[];for(let x=0;x<i.length;x++){const{type:_,handler:C,once:E}=i[x];if(C({...t,type:_,stopPropagation:d,stopImmediatePropagation:a}),E&&g.push(i[x]),l)break}for(let x=0;x<g.length;x++){const{type:_,handler:C}=g[x];this.remove(_,C)}}}_normalizeEvent(t){const n=this.eventManager.getElement();return{...t,...fQ(t),...pQ(t,n),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const gQ={events:null,recognizers:null,recognizerOptions:{},Manager:HW,touchAction:"none",tabIndex:0};class yQ{constructor(t=null,n){this._onBasicInput=l=>{const{srcEvent:d}=l,a=ZW[d.type];a&&this.manager.emit(a,l)},this._onOtherEvent=l=>{this.manager.emit(l.type,l)},this.options={...gQ,...n},this.events=new Map,this.setElement(t);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:n}=this,i=n.Manager;this.manager=new i(t,{touchAction:n.touchAction,recognizers:n.recognizers||$W}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(tk).forEach(l=>{const d=this.manager.get(l);d&&tk[l].forEach(a=>{d.recognizeWith(a)})});for(const l in n.recognizerOptions){const d=this.manager.get(l);if(d){const a=n.recognizerOptions[l];delete a.enable,d.set(a)}}this.wheelInput=new eQ(t,this._onOtherEvent,{enable:!1}),this.moveInput=new nQ(t,this._onOtherEvent,{enable:!1}),this.keyInput=new iQ(t,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new aQ(t,this._onOtherEvent,{enable:!1});for(const[l,d]of this.events)d.isEmpty()||(this._toggleRecognizer(d.recognizerName,!0),this.manager.on(l,d.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,n,i){this._addEventHandler(t,n,i,!1)}once(t,n,i){this._addEventHandler(t,n,i,!0)}watch(t,n,i){this._addEventHandler(t,n,i,!1,!0)}off(t,n){this._removeEventHandler(t,n)}_toggleRecognizer(t,n){const{manager:i}=this;if(!i)return;const l=i.get(t);if(l&&l.options.enable!==n){l.set({enable:n});const d=GW[t];d&&!this.options.recognizers&&d.forEach(a=>{const g=i.get(a);n?(g.requireFailure(t),l.dropRequireFailure(a)):g.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,n),this.moveInput.enableEventType(t,n),this.keyInput.enableEventType(t,n),this.contextmenuInput.enableEventType(t,n)}_addEventHandler(t,n,i,l,d){if(typeof t!="string"){i=n;for(const C in t)this._addEventHandler(C,t[C],i,l,d);return}const{manager:a,events:g}=this,x=nk[t]||t;let _=g.get(x);_||(_=new mQ(this),g.set(x,_),_.recognizerName=XW[x]||x,a&&a.on(x,_.handleEvent)),_.add(t,n,i,l,d),_.isEmpty()||this._toggleRecognizer(_.recognizerName,!0)}_removeEventHandler(t,n){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:i}=this,l=nk[t]||t,d=i.get(l);if(d&&(d.remove(t,n),d.isEmpty())){const{recognizerName:a}=d;let g=!1;for(const x of i.values())if(x.recognizerName===a&&!x.isEmpty()){g=!0;break}g||this._toggleRecognizer(a,!1)}}}function mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mk(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var Lf={transitionDuration:0},wd={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new Ny,transitionInterruption:Dy.BREAK},e0=300,t0=function(t){return 1-(1-t)*(1-t)},_m={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},P4=(function(){function e(){var t=this;Zh(this,e),bn(this,"events",[]),bn(this,"scrollZoom",!0),bn(this,"dragPan",!0),bn(this,"dragRotate",!0),bn(this,"doubleClickZoom",!0),bn(this,"touchZoom",!0),bn(this,"touchRotate",!1),bn(this,"keyboard",!0),bn(this,"_interactionState",{isDragging:!1}),bn(this,"_events",{}),bn(this,"_setInteractionState",function(n){Object.assign(t._interactionState,n),t.onStateChange&&t.onStateChange(t._interactionState)}),bn(this,"_onTransition",function(n,i){t.onViewportChange(n,t._interactionState,i)}),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new oS({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return Xh(e,[{key:"handleEvent",value:function(n){this.mapState=this.getMapState();var i=this._eventStartBlocked;switch(n.type){case"panstart":return i?!1:this._onPanStart(n);case"panmove":return this._onPan(n);case"panend":return this._onPanEnd(n);case"pinchstart":return i?!1:this._onPinchStart(n);case"pinchmove":return this._onPinch(n);case"pinchend":return this._onPinchEnd(n);case"tripanstart":return i?!1:this._onTriplePanStart(n);case"tripanmove":return this._onTriplePan(n);case"tripanend":return this._onTriplePanEnd(n);case"doubletap":return this._onDoubleTap(n);case"wheel":return this._onWheel(n);case"keydown":return this._onKeyDown(n);default:return!1}}},{key:"getCenter",value:function(n){var i=n.offsetCenter,l=i.x,d=i.y;return[l,d]}},{key:"isFunctionKeyPressed",value:function(n){var i=n.srcEvent;return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}},{key:"blockEvents",value:function(n){var i=this,l=setTimeout(function(){i._eventStartBlocked===l&&(i._eventStartBlocked=null)},n);this._eventStartBlocked=l}},{key:"updateViewport",value:function(n,i,l){var d=this.mapState instanceof Pm?this.mapState.getViewportProps():this.mapState,a=gs(gs({},n.getViewportProps()),i),g=Object.keys(a).some(function(x){return d[x]!==a[x]});this._state=n.getState(),this._setInteractionState(l),g&&this.onViewportChange(a,this._interactionState,d)}},{key:"getMapState",value:function(n){return new Pm(gs(gs(gs({},this.mapStateProps),this._state),n))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(n){var i=n.onViewportChange,l=n.onStateChange,d=n.eventManager,a=d===void 0?this.eventManager:d,g=n.isInteractive,x=g===void 0?!0:g,_=n.scrollZoom,C=_===void 0?this.scrollZoom:_,E=n.dragPan,A=E===void 0?this.dragPan:E,D=n.dragRotate,I=D===void 0?this.dragRotate:D,L=n.doubleClickZoom,B=L===void 0?this.doubleClickZoom:L,z=n.touchZoom,q=z===void 0?this.touchZoom:z,H=n.touchRotate,W=H===void 0?this.touchRotate:H,ne=n.keyboard,re=ne===void 0?this.keyboard:ne;this.onViewportChange=i,this.onStateChange=l;var ee=this.mapStateProps||{},oe=ee.height!==n.height||ee.width!==n.width;this.mapStateProps=n,oe&&(this.mapState=ee,this.updateViewport(new Pm(n))),this._transitionManager.processViewportChange(n),this.eventManager!==a&&(this.eventManager=a,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(_m.WHEEL,x&&!!C),this.toggleEvents(_m.PAN,x&&!!(A||I)),this.toggleEvents(_m.PINCH,x&&!!(q||W)),this.toggleEvents(_m.TRIPLE_PAN,x&&!!W),this.toggleEvents(_m.DOUBLE_TAP,x&&!!B),this.toggleEvents(_m.KEYBOARD,x&&!!re),this.scrollZoom=C,this.dragPan=A,this.dragRotate=I,this.doubleClickZoom=B,this.touchZoom=q,this.touchRotate=W,this.keyboard=re}},{key:"toggleEvents",value:function(n,i){var l=this;this.eventManager&&n.forEach(function(d){l._events[d]!==i&&(l._events[d]=i,i?l.eventManager.on(d,l.handleEvent):l.eventManager.off(d,l.handleEvent))})}},{key:"_onPanStart",value:function(n){var i=this.getCenter(n);this._panRotate=this.isFunctionKeyPressed(n)||n.rightButton;var l=this._panRotate?this.mapState.rotateStart({pos:i}):this.mapState.panStart({pos:i});return this.updateViewport(l,Lf,{isDragging:!0}),!0}},{key:"_onPan",value:function(n){return this.isDragging()?this._panRotate?this._onPanRotate(n):this._onPanMove(n):!1}},{key:"_onPanEnd",value:function(n){return this.isDragging()?this._panRotate?this._onPanRotateEnd(n):this._onPanMoveEnd(n):!1}},{key:"_onPanMove",value:function(n){if(!this.dragPan)return!1;var i=this.getCenter(n),l=this.mapState.pan({pos:i});return this.updateViewport(l,Lf,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(n){if(this.dragPan){var i=this.dragPan.inertia,l=i===void 0?e0:i;if(l&&n.velocity){var d=this.getCenter(n),a=[d[0]+n.velocityX*l/2,d[1]+n.velocityY*l/2],g=this.mapState.pan({pos:a}).panEnd();return this.updateViewport(g,gs(gs({},wd),{},{transitionDuration:l,transitionEasing:t0}),{isDragging:!1,isPanning:!0}),!0}}var x=this.mapState.panEnd();return this.updateViewport(x,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(n){if(!this.dragRotate)return!1;var i=this.getCenter(n),l=this.mapState.rotate({pos:i});return this.updateViewport(l,Lf,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(n){if(this.dragRotate){var i=this.dragRotate.inertia,l=i===void 0?e0:i;if(l&&n.velocity){var d=this.getCenter(n),a=[d[0]+n.velocityX*l/2,d[1]+n.velocityY*l/2],g=this.mapState.rotate({pos:a}).rotateEnd();return this.updateViewport(g,gs(gs({},wd),{},{transitionDuration:l,transitionEasing:t0}),{isDragging:!1,isRotating:!0}),!0}}var x=this.mapState.panEnd();return this.updateViewport(x,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(n){if(!this.scrollZoom)return!1;var i=this.scrollZoom,l=i.speed,d=l===void 0?.01:l,a=i.smooth,g=a===void 0?!1:a;n.preventDefault();var x=this.getCenter(n),_=n.delta,C=2/(1+Math.exp(-Math.abs(_*d)));_<0&&C!==0&&(C=1/C);var E=this.mapState.zoom({pos:x,scale:C});return this.updateViewport(E,gs(gs({},wd),{},{transitionInterpolator:new Ny({around:x}),transitionDuration:g?250:1}),{isPanning:!0,isZooming:!0}),!0}},{key:"_onPinchStart",value:function(n){var i=this.getCenter(n),l=this.mapState.zoomStart({pos:i}).rotateStart({pos:i});return this._startPinchRotation=n.rotation,this._lastPinchEvent=n,this.updateViewport(l,Lf,{isDragging:!0}),!0}},{key:"_onPinch",value:function(n){if(!this.isDragging()||!this.touchZoom&&!this.touchRotate)return!1;var i=this.mapState;if(this.touchZoom){var l=n.scale,d=this.getCenter(n);i=i.zoom({pos:d,scale:l})}if(this.touchRotate){var a=n.rotation;i=i.rotate({deltaAngleX:this._startPinchRotation-a})}return this.updateViewport(i,Lf,{isDragging:!0,isPanning:!!this.touchZoom,isZooming:!!this.touchZoom,isRotating:!!this.touchRotate}),this._lastPinchEvent=n,!0}},{key:"_onPinchEnd",value:function(n){if(!this.isDragging())return!1;if(this.touchZoom){var i=this.touchZoom.inertia,l=i===void 0?e0:i,d=this._lastPinchEvent;if(l&&d&&n.scale!==d.scale){var a=this.getCenter(n),g=this.mapState.rotateEnd(),x=Math.log2(n.scale),_=(x-Math.log2(d.scale))/(n.deltaTime-d.deltaTime),C=Math.pow(2,x+_*l/2);return g=g.zoom({pos:a,scale:C}).zoomEnd(),this.updateViewport(g,gs(gs({},wd),{},{transitionInterpolator:new Ny({around:a}),transitionDuration:l,transitionEasing:t0}),{isDragging:!1,isPanning:!!this.touchZoom,isZooming:!!this.touchZoom,isRotating:!1}),this.blockEvents(l),!0}}var E=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(E,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(n){var i=this.getCenter(n),l=this.mapState.rotateStart({pos:i});return this.updateViewport(l,Lf,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(n){if(!this.isDragging()||!this.touchRotate)return!1;var i=this.getCenter(n);i[0]-=n.deltaX;var l=this.mapState.rotate({pos:i});return this.updateViewport(l,Lf,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(n){if(!this.isDragging())return!1;if(this.touchRotate){var i=this.touchRotate.inertia,l=i===void 0?e0:i;if(l&&n.velocityY){var d=this.getCenter(n),a=[d[0],d[1]+=n.velocityY*l/2],g=this.mapState.rotate({pos:a});return this.updateViewport(g,gs(gs({},wd),{},{transitionDuration:l,transitionEasing:t0}),{isDragging:!1,isRotating:!0}),this.blockEvents(l),!1}}var x=this.mapState.rotateEnd();return this.updateViewport(x,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(n){if(!this.doubleClickZoom)return!1;var i=this.getCenter(n),l=this.isFunctionKeyPressed(n),d=this.mapState.zoom({pos:i,scale:l?.5:2});return this.updateViewport(d,Object.assign({},wd,{transitionInterpolator:new Ny({around:i})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(n){if(!this.keyboard)return!1;var i=this.isFunctionKeyPressed(n),l=this.keyboard,d=l.zoomSpeed,a=d===void 0?2:d,g=l.moveSpeed,x=g===void 0?100:g,_=l.rotateSpeedX,C=_===void 0?15:_,E=l.rotateSpeedY,A=E===void 0?10:E,D=this.mapStateProps,I;switch(n.srcEvent.keyCode){case 189:i?I=this.getMapState({zoom:D.zoom-Math.log2(a)-1}):I=this.getMapState({zoom:D.zoom-Math.log2(a)});break;case 187:i?I=this.getMapState({zoom:D.zoom+Math.log2(a)+1}):I=this.getMapState({zoom:D.zoom+Math.log2(a)});break;case 37:i?I=this.getMapState({bearing:D.bearing-C}):I=this.mapState.pan({pos:[x,0],startPos:[0,0]});break;case 39:i?I=this.getMapState({bearing:D.bearing+C}):I=this.mapState.pan({pos:[-x,0],startPos:[0,0]});break;case 38:i?I=this.getMapState({pitch:D.pitch+A}):I=this.mapState.pan({pos:[0,x],startPos:[0,0]});break;case 40:i?I=this.getMapState({pitch:D.pitch-A}):I=this.mapState.pan({pos:[0,-x],startPos:[0,0]});break;default:return!1}return this.updateViewport(I,wd)}}]),e})();function gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var vQ=Object.assign({},Kh.propTypes,{maxZoom:ht.number,minZoom:ht.number,maxPitch:ht.number,minPitch:ht.number,onViewStateChange:ht.func,onViewportChange:ht.func,onInteractionStateChange:ht.func,transitionDuration:ht.oneOfType([ht.number,ht.string]),transitionInterpolator:ht.object,transitionInterruption:ht.number,transitionEasing:ht.func,onTransitionStart:ht.func,onTransitionInterrupt:ht.func,onTransitionEnd:ht.func,scrollZoom:ht.oneOfType([ht.bool,ht.object]),dragPan:ht.oneOfType([ht.bool,ht.object]),dragRotate:ht.oneOfType([ht.bool,ht.object]),doubleClickZoom:ht.bool,touchZoom:ht.oneOfType([ht.bool,ht.object]),touchRotate:ht.oneOfType([ht.bool,ht.object]),keyboard:ht.oneOfType([ht.bool,ht.object]),onHover:ht.func,onClick:ht.func,onDblClick:ht.func,onContextMenu:ht.func,onMouseDown:ht.func,onMouseMove:ht.func,onMouseUp:ht.func,onTouchStart:ht.func,onTouchMove:ht.func,onTouchEnd:ht.func,onMouseEnter:ht.func,onMouseLeave:ht.func,onMouseOut:ht.func,onWheel:ht.func,touchAction:ht.string,eventRecognizerOptions:ht.object,clickRadius:ht.number,interactiveLayerIds:ht.array,getCursor:ht.func,controller:ht.instanceOf(P4)}),xQ=function(t){var n=t.isDragging,i=t.isHovering;return n?"grabbing":i?"pointer":"grab"},bQ=Object.assign({},Kh.defaultProps,qf,oS.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:xQ});function lS(e){if(e.lngLat||!e.offsetCenter)return e;var t=e.offsetCenter,n=t.x,i=t.y;if(!Number.isFinite(n)||!Number.isFinite(i))return e;var l=[n,i];e.point=l;var d=this.viewport,a=d.unproject(l,{targetZ:d.meterOffset[2]});return e.lngLat=[a[0],a[1]],e}function I4(e){var t=this.map;if(!t||!e)return null;var n={},i=this.props.clickRadius;this.props.interactiveLayerIds&&(n.layers=this.props.interactiveLayerIds);try{return t.queryRenderedFeatures(i?[[e[0]-i,e[1]+i],[e[0]+i,e[1]-i]]:e,n)}catch{return null}}function Cd(e,t){var n=this.props[e];n&&n(lS.call(this,t))}function _Q(e){Cd.call(this,e.pointerType==="touch"?"onTouchStart":"onMouseDown",e)}function wQ(e){Cd.call(this,e.pointerType==="touch"?"onTouchEnd":"onMouseUp",e)}function SQ(e){if(Cd.call(this,e.pointerType==="touch"?"onTouchMove":"onMouseMove",e),!this.state.isDragging){var t=this.props,n=t.onHover,i=t.interactiveLayerIds,l;e=lS.call(this,e),(i||n)&&(l=I4.call(this,e.point));var d=!!(i&&l&&l.length>0),a=d&&!this.state.isHovering,g=!d&&this.state.isHovering;(n||a)&&(e.features=l,n&&n(e)),a&&Cd.call(this,"onMouseEnter",e),g&&Cd.call(this,"onMouseLeave",e),(a||g)&&this.setState({isHovering:d})}}function yk(e){var t=this.props,n=t.onClick,i=t.onNativeClick,l=t.onDblClick,d=t.doubleClickZoom,a=[],g=l||d;switch(e.type){case"anyclick":a.push(i),g||a.push(n);break;case"click":g&&a.push(n);break}a=a.filter(Boolean),a.length&&(e=lS.call(this,e),e.features=I4.call(this,e.point),a.forEach(function(x){return x(e)}))}function EQ(e){return{getMap:e.current&&e.current.getMap,queryRenderedFeatures:e.current&&e.current.queryRenderedFeatures}}var Av=k.forwardRef(function(e,t){var n=k.useContext(ag),i=k.useMemo(function(){return e.controller||new P4},[]),l=k.useMemo(function(){return new yQ(null,{touchAction:e.touchAction,recognizerOptions:e.eventRecognizerOptions})},[]),d=k.useRef(null),a=k.useRef(null),g=k.useRef({width:0,height:0,state:{isHovering:!1,isDragging:!1}}),x=g.current;x.props=e,x.map=a.current&&a.current.getMap(),x.setState=function(re){x.state=bd(bd({},x.state),re),d.current.style.cursor=e.getCursor(x.state)};var _=!0,C,E,A=function(ee,oe,he){if(_){C=[ee,oe,he];return}var we=x.props,ye=we.onViewStateChange,Pe=we.onViewportChange;Object.defineProperty(ee,"position",{get:function(){return[0,0,Vb(x.map,ee)]}}),ye&&ye({viewState:ee,interactionState:oe,oldViewState:he}),Pe&&Pe(ee,oe,he)};k.useImperativeHandle(t,function(){return EQ(a)},[]);var D=k.useMemo(function(){return bd(bd({},n),{},{eventManager:l,container:n.container||d.current})},[n,d.current]);D.onViewportChange=A,D.viewport=n.viewport||A4(x),x.viewport=D.viewport;var I=function(ee){var oe=ee.isDragging,he=oe===void 0?!1:oe;if(he!==x.state.isDragging&&x.setState({isDragging:he}),_){E=ee;return}var we=x.props.onInteractionStateChange;we&&we(ee)},L=function(){x.width&&x.height&&i.setOptions(bd(bd(bd({},x.props),x.props.viewState),{},{isInteractive:!!(x.props.onViewStateChange||x.props.onViewportChange),onViewportChange:A,onStateChange:I,eventManager:l,width:x.width,height:x.height}))},B=function(ee){var oe=ee.width,he=ee.height;x.width=oe,x.height=he,L(),x.props.onResize({width:oe,height:he})};k.useEffect(function(){return l.setElement(d.current),l.on({pointerdown:_Q.bind(x),pointermove:SQ.bind(x),pointerup:wQ.bind(x),pointerleave:Cd.bind(x,"onMouseOut"),click:yk.bind(x),anyclick:yk.bind(x),dblclick:Cd.bind(x,"onDblClick"),wheel:Cd.bind(x,"onWheel"),contextmenu:Cd.bind(x,"onContextMenu")}),function(){l.destroy()}},[]),pw(function(){C&&A.apply(void 0,YK(C)),E&&I(E)}),L();var z=e.width,q=e.height,H=e.style,W=e.getCursor,ne=k.useMemo(function(){return bd(bd({position:"relative"},H),{},{width:z,height:q,cursor:W(x.state)})},[H,z,q,W,x.state]);return(!C||!x._child)&&(x._child=k.createElement(rS,{value:D},k.createElement("div",{key:"event-canvas",ref:d,style:ne},k.createElement(Kh,L0({},e,{width:"100%",height:"100%",style:null,onResize:B,ref:a}))))),_=!1,x._child});Av.supported=Kh.supported;Av.propTypes=vQ;Av.defaultProps=bQ;ht.string.isRequired;var CQ=["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade","sky"];ht.oneOf(CQ).isRequired;var Yh={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},kc={captureScroll:ht.bool,captureDrag:ht.bool,captureClick:ht.bool,captureDoubleClick:ht.bool,capturePointerMove:ht.bool};function TQ(e){var t=e.containerRef.current,n=e.context.eventManager;if(!(!t||!n)){var i={wheel:function(d){var a=e.props;a.captureScroll&&d.stopPropagation(),a.onScroll&&a.onScroll(d,e)},panstart:function(d){var a=e.props;a.captureDrag&&d.stopPropagation(),a.onDragStart&&a.onDragStart(d,e)},anyclick:function(d){var a=e.props;a.captureClick&&d.stopPropagation(),a.onClick&&a.onClick(d,e)},click:function(d){var a=e.props;a.captureClick&&d.stopPropagation(),a.onClick&&a.onClick(d,e)},dblclick:function(d){var a=e.props;a.captureDoubleClick&&d.stopPropagation(),a.onDoubleClick&&a.onDoubleClick(d,e)},pointermove:function(d){var a=e.props;a.capturePointerMove&&d.stopPropagation(),a.onPointerMove&&a.onPointerMove(d,e)}};return n.watch(i,t),function(){n.off(i)}}}function Wh(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=k.useContext(ag),n=k.useRef(null),i=k.useRef({props:e,state:{},context:t,containerRef:n}),l=i.current;return l.props=e,l.context=t,k.useEffect(function(){return TQ(l)},[t.eventManager]),l}function kQ(e){var t=jQ();return function(){var i=Vh(e),l;if(t){var d=Vh(this).constructor;l=Reflect.construct(i,arguments,d)}else l=i.apply(this,arguments);return aS(this,l)}}function jQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function AQ(e){var t=e.instance,n=Wh(e),i=n.context,l=n.containerRef;return t._context=i,t._containerRef=l,t._render()}var O4=(function(e){iS(n,e);var t=kQ(n);function n(){var i;Zh(this,n);for(var l=arguments.length,d=new Array(l),a=0;a<l;a++)d[a]=arguments[a];return i=t.call.apply(t,[this].concat(d)),bn(_d(i),"_context",{}),bn(_d(i),"_containerRef",k.createRef()),bn(_d(i),"_onScroll",function(g){}),bn(_d(i),"_onDragStart",function(g){}),bn(_d(i),"_onDblClick",function(g){}),bn(_d(i),"_onClick",function(g){}),bn(_d(i),"_onPointerMove",function(g){}),i}return Xh(n,[{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){return k.createElement(AQ,L0({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),n})(k.PureComponent);bn(O4,"propTypes",kc);bn(O4,"defaultProps",Yh);function vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function xk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var NQ=Object.assign({},kc,{draggable:ht.bool,onDrag:ht.func,onDragEnd:ht.func,onDragStart:ht.func,offsetLeft:ht.number,offsetTop:ht.number}),MQ=Object.assign({},Yh,{draggable:!1,offsetLeft:0,offsetTop:0});function R4(e){var t=e.offsetCenter,n=t.x,i=t.y;return[n,i]}function DQ(e,t){var n=e.center,i=n.x,l=n.y;if(t){var d=t.getBoundingClientRect();return[d.left-i,d.top-l]}return null}function cS(e,t,n,i){var l=e[0]+t[0]-n.offsetLeft,d=e[1]+t[1]-n.offsetTop;return i.viewport.unproject([l,d])}function PQ(e,t){var n=t.props,i=t.callbacks,l=t.state,d=t.context,a=t.containerRef,g=n.draggable;if(g){e.stopPropagation();var x=R4(e),_=DQ(e,a.current);if(l.setDragPos(x),l.setDragOffset(_),i.onDragStart&&_){var C=Object.assign({},e);C.lngLat=cS(x,_,n,d),i.onDragStart(C)}}}function IQ(e,t){var n=t.props,i=t.callbacks,l=t.state,d=t.context;e.stopPropagation();var a=R4(e);l.setDragPos(a);var g=l.dragOffset;if(i.onDrag&&g){var x=Object.assign({},e);x.lngLat=cS(a,g,n,d),i.onDrag(x)}}function OQ(e,t){var n=t.props,i=t.callbacks,l=t.state,d=t.context;e.stopPropagation();var a=l.dragPos,g=l.dragOffset;if(l.setDragPos(null),l.setDragOffset(null),i.onDragEnd&&a&&g){var x=Object.assign({},e);x.lngLat=cS(a,g,n,d),i.onDragEnd(x)}}function RQ(e,t){var n=t.state;e.stopPropagation(),n.setDragPos(null),n.setDragOffset(null)}function LQ(e){var t=e.context.eventManager;if(!(!t||!e.state.dragPos)){var n={panmove:function(l){return IQ(l,e)},panend:function(l){return OQ(l,e)},pancancel:function(l){return RQ(l,e)}};return t.watch(n),function(){t.off(n)}}}function zQ(e){var t=k.useState(null),n=Qa(t,2),i=n[0],l=n[1],d=k.useState(null),a=Qa(d,2),g=a[0],x=a[1],_=Wh(xk(xk({},e),{},{onDragStart:PQ}));return _.callbacks=e,_.state.dragPos=i,_.state.setDragPos=l,_.state.dragOffset=g,_.state.setDragOffset=x,k.useEffect(function(){return LQ(_)},[_.context.eventManager,!!i]),_}var bk=typeof window<"u"&&window.devicePixelRatio||1,ev=function(t){return Math.round(t*bk)/bk},_k=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"x";if(t===null)return n;var l=i==="x"?t.offsetWidth:t.offsetHeight;return ev(n/100*l)/l*100},BQ=Object.assign({},NQ,{className:ht.string,longitude:ht.number.isRequired,latitude:ht.number.isRequired}),FQ=Object.assign({},MQ,{className:""});function UQ(e){var t=e.props,n=e.state,i=e.context,l=t.longitude,d=t.latitude,a=t.offsetLeft,g=t.offsetTop,x=n.dragPos,_=n.dragOffset,C=i.viewport,E=i.map;if(x&&_)return[x[0]+_[0],x[1]+_[1]];var A=Vb(E,{longitude:l,latitude:d}),D=C.project([l,d,A]),I=Qa(D,2),L=I[0],B=I[1];return L+=a,B+=g,[L,B]}function uS(e){var t=zQ(e),n=t.state,i=t.containerRef,l=e.children,d=e.className,a=e.draggable,g=n.dragPos,x=UQ(t),_=Qa(x,2),C=_[0],E=_[1],A="translate(".concat(ev(C),"px, ").concat(ev(E),"px)"),D=a?g?"grabbing":"grab":"auto",I=k.useMemo(function(){var B={position:"absolute",left:0,top:0,transform:A,cursor:D};return k.createElement("div",{className:"mapboxgl-marker ".concat(d),ref:t.containerRef,style:B},l)},[l,d]),L=i.current;return L&&(L.style.transform=A,L.style.cursor=D),I}uS.defaultProps=FQ;uS.propTypes=BQ;const L4=k.memo(uS);var tv={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},VQ=Object.keys(tv);function qQ(e){var t=e.x,n=e.y,i=e.width,l=e.height,d=e.selfWidth,a=e.selfHeight,g=e.anchor,x=e.padding,_=x===void 0?0:x,C=tv[g],E=C.x,A=C.y,D=n-A*a,I=D+a,L=Math.max(0,_-D)+Math.max(0,I-l+_);if(L>0){var B=A,z=L;for(A=0;A<=1;A+=.5)D=n-A*a,I=D+a,L=Math.max(0,_-D)+Math.max(0,I-l+_),L<z&&(z=L,B=A);A=B}var q=.5;A===.5&&(E=Math.floor(E),q=1);var H=t-E*d,W=H+d,ne=Math.max(0,_-H)+Math.max(0,W-i+_);if(ne>0){var re=E,ee=ne;for(E=0;E<=1;E+=q)H=t-E*d,W=H+d,ne=Math.max(0,_-H)+Math.max(0,W-i+_),ne<ee&&(ee=ne,re=E);E=re}return VQ.find(function(oe){var he=tv[oe];return he.x===E&&he.y===A})||g}function wk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function Sk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var HQ=Object.assign({},kc,{className:ht.string,longitude:ht.number.isRequired,latitude:ht.number.isRequired,altitude:ht.number,offsetLeft:ht.number,offsetTop:ht.number,tipSize:ht.number,closeButton:ht.bool,closeOnClick:ht.bool,anchor:ht.oneOf(Object.keys(tv)),dynamicPosition:ht.bool,sortByDepth:ht.bool,onClose:ht.func}),$Q=Object.assign({},Yh,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function GQ(e,t,n,i){var l=Qa(i,2),d=l[0],a=l[1],g=e.anchor,x=e.dynamicPosition,_=e.tipSize;return n&&x?qQ({x:d,y:a,anchor:g,padding:_,width:t.width,height:t.height,selfWidth:n.clientWidth,selfHeight:n.clientHeight}):g}function ZQ(e,t,n,i,l){var d=Qa(i,3),a=d[0],g=d[1],x=d[2],_=e.offsetLeft,C=e.offsetTop,E=e.sortByDepth,A=tv[l],D=a+_,I=g+C,L=_k(n,-A.x*100),B=_k(n,-A.y*100,"y"),z={position:"absolute",transform:`
      translate(`.concat(L,"%, ").concat(B,`%)
      translate(`).concat(ev(D),"px, ").concat(ev(I),`px)
    `),display:void 0,zIndex:void 0};return E&&(x>1||x<-1||a<0||a>t.width||g<0||g>t.height?z.display="none":z.zIndex=Math.floor((1-x)/2*1e5)),z}function Ek(e,t){var n=t.props,i=t.context;(n.closeOnClick||e.target.className==="mapboxgl-popup-close-button")&&(n.onClose(),i.eventManager&&i.eventManager.once("click",function(l){return l.stopPropagation()},e.target))}function dS(e){var t=k.useRef(null),n=Wh(Sk(Sk({},e),{},{onClick:Ek})),i=n.context,l=n.containerRef,d=k.useState(!1),a=Qa(d,2),g=a[1];k.useEffect(function(){g(!0)},[t.current]);var x=i.viewport,_=i.map,C=e.className,E=e.longitude,A=e.latitude,D=e.tipSize,I=e.closeButton,L=e.children,B=e.altitude;B===void 0&&(B=Vb(_,{longitude:E,latitude:A}));var z=x.project([E,A,B]),q=GQ(e,x,t.current,z),H=ZQ(e,x,l.current,z,q),W=k.useCallback(function(ne){return!i.eventManager&&Ek(ne,n)},[i.eventManager]);return k.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(q," ").concat(C),style:H,ref:l},k.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:D}}),k.createElement("div",{key:"content",ref:t,className:"mapboxgl-popup-content",onClick:W},I&&k.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},""),L))}dS.propTypes=HQ;dS.defaultProps=$Q;k.memo(dS);function Ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function XQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var KQ=Object.assign({},kc,{toggleLabel:ht.string,className:ht.string,style:ht.object,compact:ht.bool,customAttribution:ht.oneOfType([ht.string,ht.arrayOf(ht.string)])}),YQ=Object.assign({},Yh,{className:"",toggleLabel:"Toggle Attribution"});function WQ(e,t,n,i){var l=new Tu.AttributionControl(e);return l._map=t,l._container=n,l._innerContainer=i,l._updateAttributions(),l._updateEditLink(),t.on("styledata",l._updateData),t.on("sourcedata",l._updateData),l}function QQ(e){e._map.off("styledata",e._updateData),e._map.off("sourcedata",e._updateData)}function hS(e){var t=Wh(e),n=t.context,i=t.containerRef,l=k.useRef(null),d=k.useState(!1),a=Qa(d,2),g=a[0],x=a[1];k.useEffect(function(){var A;return n.map&&(A=WQ({customAttribution:e.customAttribution},n.map,i.current,l.current)),function(){return A&&QQ(A)}},[n.map]);var _=e.compact===void 0?n.viewport.width<=640:e.compact;k.useEffect(function(){!_&&g&&x(!1)},[_]);var C=k.useCallback(function(){return x(function(A){return!A})},[]),E=k.useMemo(function(){return XQ({position:"absolute"},e.style)},[e.style]);return k.createElement("div",{style:E,className:e.className},k.createElement("div",{ref:i,"aria-pressed":g,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(_?"mapboxgl-compact":""," ").concat(g?"mapboxgl-compact-show":"")},k.createElement("button",{type:"button",className:"mapboxgl-ctrl-attrib-button",title:e.toggleLabel,onClick:C}),k.createElement("div",{ref:l,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}hS.propTypes=KQ;hS.defaultProps=YQ;k.memo(hS);function Tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function JQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var eJ=Object.assign({},kc,{className:ht.string,style:ht.object,container:ht.object,label:ht.string}),tJ=Object.assign({},Yh,{className:"",container:null,label:"Toggle fullscreen"});function fS(e){var t=Wh(e),n=t.context,i=t.containerRef,l=k.useState(!1),d=Qa(l,2),a=d[0],g=d[1],x=k.useState(!1),_=Qa(x,2),C=_[0],E=_[1],A=k.useState(null),D=Qa(A,2),I=D[0],L=D[1];k.useEffect(function(){var ne=new Tu.FullscreenControl;L(ne),E(ne._checkFullscreenSupport());var re=function(){var oe=!ne._fullscreen;ne._fullscreen=oe,g(oe)};return Ed.addEventListener(ne._fullscreenchange,re),function(){Ed.removeEventListener(ne._fullscreenchange,re)}},[]);var B=function(){I&&(I._container=e.container||n.container,I._onClickFullscreen())},z=k.useMemo(function(){return JQ({position:"absolute"},e.style)},[e.style]);if(!C)return null;var q=e.className,H=e.label,W=a?"shrink":"fullscreen";return k.createElement("div",{style:z,className:q},k.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},k.createElement("button",{key:W,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(W),type:"button",title:H,onClick:B},k.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}fS.propTypes=eJ;fS.defaultProps=tJ;k.memo(fS);var wm;function nJ(){return wm!==void 0?Promise.resolve(wm):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(function(e){return wm=e.state!=="denied",wm}):(wm=!!window.navigator.geolocation,Promise.resolve(wm))}function kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function rJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var jk=function(){},iJ=Object.assign({},kc,{className:ht.string,style:ht.object,label:ht.string,disabledLabel:ht.string,auto:ht.bool,positionOptions:ht.object,fitBoundsOptions:ht.object,trackUserLocation:ht.bool,showUserLocation:ht.bool,showAccuracyCircle:ht.bool,onViewStateChange:ht.func,onViewportChange:ht.func,onGeolocate:ht.func}),aJ=Object.assign({},Yh,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showAccuracyCircle:!0,onGeolocate:function(){}});function oJ(e){var t=new Tu.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,i=t.toBounds(n);return[[i._ne.lng,i._ne.lat],[i._sw.lng,i._sw.lat]]}function sJ(e,t,n){var i=new Tu.GeolocateControl(t);i._container=Ed.createElement("div"),i._map={on:function(){},_getUIString:function(){return""}},i._setupUI(!0),i._map=e.map,i._geolocateButton=n;var l=e.eventManager;return i.options.trackUserLocation&&l&&l.on("panstart",function(){i._watchState==="ACTIVE_LOCK"&&(i._watchState="BACKGROUND",n.classList.add("mapboxgl-ctrl-geolocate-background"),n.classList.remove("mapboxgl-ctrl-geolocate-active"))}),i.on("geolocate",t.onGeolocate),i}function lJ(e,t){var n=t.context,i=t.props,l=oJ(e),d=n.viewport.fitBounds(l,i.fitBoundsOptions),a=d.longitude,g=d.latitude,x=d.zoom,_=Object.assign({},n.viewport,{longitude:a,latitude:g,zoom:x}),C=new Pm(_),E=Object.assign({},C.getViewportProps(),wd),A=i.onViewportChange||n.onViewportChange||jk,D=i.onViewStateChange||n.onViewStateChange||jk;D({viewState:E}),A(E)}function pS(e){var t=Wh(e),n=t.context,i=t.containerRef,l=k.useRef(null),d=k.useState(null),a=Qa(d,2),g=a[0],x=a[1],_=k.useState(!1),C=Qa(_,2),E=C[0],A=C[1];k.useEffect(function(){var H;return n.map&&nJ().then(function(W){A(W),l.current&&(H=sJ(n,e,l.current),H._updateCamera=function(ne){return lJ(ne,t)},x(H))}),function(){H&&H._clearWatch()}},[n.map]);var D=k.useCallback(function(){g&&(g.options=t.props,g.trigger())},[g]);k.useEffect(function(){e.auto&&D()},[g,e.auto]),k.useEffect(function(){},[n.viewport.zoom]);var I=e.className,L=e.label,B=e.disabledLabel,z=e.trackUserLocation,q=k.useMemo(function(){return rJ({position:"absolute"},e.style)},[e.style]);return k.createElement("div",{style:q,className:I},k.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},k.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:l,disabled:!E,"aria-pressed":!z,type:"button",title:E?L:B,"aria-label":E?L:B,onClick:D},k.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}pS.propTypes=iJ;pS.defaultProps=aJ;k.memo(pS);function Ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function cJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var Nk=function(){},uJ=Object.assign({},kc,{className:ht.string,style:ht.object,onViewStateChange:ht.func,onViewportChange:ht.func,showCompass:ht.bool,showZoom:ht.bool,zoomInLabel:ht.string,zoomOutLabel:ht.string,compassLabel:ht.string}),dJ=Object.assign({},Yh,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function o1(e,t,n){var i=e.viewport,l=new Pm(Object.assign({},i,n)),d=Object.assign({},l.getViewportProps(),wd),a=t.onViewportChange||e.onViewportChange||Nk,g=t.onViewStateChange||e.onViewStateChange||Nk;g({viewState:d}),a(d)}function s1(e,t,n,i){return k.createElement("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(e),type:"button",title:t,onClick:n},i||k.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function hJ(e){var t=e.viewport.bearing,n={transform:"rotate(".concat(-t,"deg)")};return k.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:n})}function mS(e){var t=Wh(e),n=t.context,i=t.containerRef,l=function(){o1(n,e,{zoom:n.viewport.zoom+1})},d=function(){o1(n,e,{zoom:n.viewport.zoom-1})},a=function(){o1(n,e,{bearing:0,pitch:0})},g=e.className,x=e.showCompass,_=e.showZoom,C=e.zoomInLabel,E=e.zoomOutLabel,A=e.compassLabel,D=k.useMemo(function(){return cJ({position:"absolute"},e.style)},[e.style]);return k.createElement("div",{style:D,className:g},k.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:i},_&&s1("zoom-in",C,l),_&&s1("zoom-out",E,d),x&&s1("compass",A,a,hJ(n))))}mS.propTypes=uJ;mS.defaultProps=dJ;const z4=k.memo(mS);function Mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,i)}return n}function fJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mk(Object(n),!0).forEach(function(i){bn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var pJ=Object.assign({},kc,{className:ht.string,style:ht.object,maxWidth:ht.number,unit:ht.oneOf(["imperial","metric","nautical"])}),mJ=Object.assign({},Yh,{className:"",maxWidth:100,unit:"metric"});function gS(e){var t=Wh(e),n=t.context,i=t.containerRef,l=k.useState(null),d=Qa(l,2),a=d[0],g=d[1];k.useEffect(function(){if(n.map){var _=new Tu.ScaleControl;_._map=n.map,_._container=i.current,g(_)}},[n.map]),a&&(a.options=e,a._onMove());var x=k.useMemo(function(){return fJ({position:"absolute"},e.style)},[e.style]);return k.createElement("div",{style:x,className:e.className},k.createElement("div",{ref:i,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}gS.propTypes=pJ;gS.defaultProps=mJ;k.memo(gS);Object.assign({},kc,{redraw:ht.func.isRequired});Object.assign({},kc,{redraw:ht.func.isRequired,style:ht.object});Object.assign({},kc,{redraw:ht.func.isRequired,style:ht.object});Tu&&Tu.setRTLTextPlugin;const yS=({location:e,onLocationChange:t,defaultZoom:n=15,height:i="100%",width:l="100%",mapStyle:d="https://tiles.goong.io/assets/goong_map_web.json",showNavigation:a=!0,disabled:g=!1})=>{const[x,_]=k.useState({latitude:e.latitude,longitude:e.longitude,zoom:n,bearing:0,pitch:0}),[C,E]=k.useState({latitude:e.latitude,longitude:e.longitude}),[A,D]=k.useState(!1),[I,L]=k.useState(!1),B=g?"default":A?"grabbing":I?"grab":"default",z="jxbjl5LdQr3AkflTqe77j5mPtDDrUl5Uke1CFScK",q=k.useRef({latitude:e.latitude,longitude:e.longitude,address:e.address}),H=k.useCallback(()=>{g||D(!0)},[g]),W=k.useCallback(he=>{if(!g){const{lngLat:we}=he;E({latitude:we[1],longitude:we[0]})}},[g]),ne=k.useCallback(he=>{if(!g){D(!1);const{lngLat:we}=he,ye={latitude:we[1],longitude:we[0],address:e.address};E({latitude:we[1],longitude:we[0]}),t(ye)}},[g,e.address,t]),re=()=>{E({latitude:q.current.latitude,longitude:q.current.longitude}),_(we=>({...we,latitude:q.current.latitude,longitude:q.current.longitude}));const he={...q.current};t(he)},ee=()=>{_(he=>({...he,latitude:C.latitude,longitude:C.longitude}))},oe=C.latitude!==e.latitude||C.longitude!==e.longitude;return c.jsxs("div",{className:"relative",style:{width:l,height:i},children:[c.jsxs(Av,{...x,width:"100%",height:"100%",mapStyle:d,onViewportChange:_,goongApiAccessToken:z,getCursor:()=>B,onResize:()=>{},touchAction:"pan-y",children:[a&&c.jsx("div",{style:{position:"absolute",top:10,right:10},children:c.jsx(z4,{})}),c.jsx(L4,{latitude:C.latitude,longitude:C.longitude,offsetLeft:-18,offsetTop:-36,draggable:!g,onDragStart:H,onDrag:W,onDragEnd:ne,children:c.jsx("div",{onMouseEnter:()=>!g&&L(!0),onMouseLeave:()=>L(!1),className:"cursor-grab active:cursor-grabbing",children:c.jsx(bs,{size:36,className:`drop-shadow-2xl transition-all duration-200 ${g?"text-gray-400 fill-gray-300":A?"text-red-600 fill-red-500 scale-110":I?"text-red-600 fill-red-500 scale-105":"text-red-600 fill-red-500"}`})})})]}),c.jsxs("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-xl p-4 max-w-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:`rounded-full p-1.5 ${g?"bg-gray-400":"bg-red-500"}`,children:c.jsx(bs,{size:16,className:"text-white"})}),c.jsx("h4",{className:"font-bold text-sm text-gray-800",children:g?"V tr c nh":"Ko marker  chn v tr"})]}),c.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[c.jsx("p",{className:"font-medium",children:e.address}),c.jsxs("div",{className:"bg-gray-50 rounded p-2 font-mono",children:[c.jsxs("p",{children:["V : ",C.latitude.toFixed(6)]}),c.jsxs("p",{children:["Kinh : ",C.longitude.toFixed(6)]})]}),oe&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:c.jsx("p",{className:"text-blue-700 font-medium",children:"V tr  thay i"})})]}),!A&&c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx(Nr,{type:"button",variant:"outline",size:"sm",className:"w-full cursor-pointer",onClick:re,children:"t li v tr ban u"}),c.jsx(Nr,{type:"button",size:"sm",className:"w-full cursor-pointer bg-[#008DDA] hover:bg-[#0064A6]",onClick:ee,children:"Cn gia marker"})]}),!g&&c.jsx("p",{className:"text-xs text-gray-500 mt-3 italic",children:" Ko th marker mu   chn v tr chnh xc"})]}),A&&c.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/75 text-white px-4 py-2 rounded-lg shadow-lg",children:c.jsx("p",{className:"text-sm font-medium",children:"ang di chuyn marker..."})})]})},vS=(e,t,n,i)=>{const d=e*Math.PI/180,a=n*Math.PI/180,g=(n-e)*Math.PI/180,x=(i-t)*Math.PI/180,_=Math.sin(g/2)*Math.sin(g/2)+Math.cos(d)*Math.cos(a)*Math.sin(x/2)*Math.sin(x/2);return 6371e3*(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)))},gJ=()=>{const e=Ta(),[t]=iv(),{setEstimationData:n}=Jm(),i=k.useMemo(()=>({latitude:parseFloat(t.get("lat")??""),longitude:parseFloat(t.get("lon")??""),address:t.get("address")??""}),[t]),[l,d]=k.useState({latitude:parseFloat(t.get("lat")??""),longitude:parseFloat(t.get("lon")??""),address:t.get("address")??""}),g=k.useMemo(()=>vS(i.latitude,i.longitude,l.latitude,l.longitude),[i,l])<=eS,x=C=>{console.log("Location changed:",C),d(C)},_=()=>{console.log("Location confirmed:",l),n({latitude:l.latitude,longitude:l.longitude}),e(`/dinh-gia-nha/ket-qua?lat=${l.latitude}&lon=${l.longitude}&address=${l.address}`)};return c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-8",children:c.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8 sm:p-10 w-full max-w-6xl",children:c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsx("div",{className:"w-full text-center",children:c.jsx("h2",{className:"text-3xl sm:text-4xl font-semibold",children:"NH GI NH"})}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-lg sm:text-xl text-gray-700",children:"y c phi v tr ca bn?"})}),c.jsx("div",{className:"w-full rounded-lg overflow-hidden border-2 border-gray-300",style:{height:"600px"},children:c.jsx(yS,{location:l,onLocationChange:x,defaultZoom:16,height:"600px",showNavigation:!0})}),!g&&c.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Iy,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsx("div",{className:"flex-1",children:c.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"V tr khng trng khp vi a ch ban u"})})]})}),c.jsx(Nr,{onClick:_,disabled:!g,className:"w-full h-12 transition-colors duration-200 bg-[#008DDA] cursor-pointer hover:bg-[#0064A6] text-base sm:text-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-[#008DDA]",children:"ng, y l v tr ca ti"})]})})})},xS=({value:e,size:t=120,strokeWidth:n=8,className:i,showValue:l=!0})=>{const d=(t-n)/2,a=2*Math.PI*d,g=a-e/100*a,_=(C=>C>=80?"#22c55e":C>=60?"#008DDA":C>=40?"#f59e0b":"#ef4444")(e);return c.jsxs("div",{className:Kt("relative inline-flex items-center justify-center",i),children:[c.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[c.jsx("circle",{cx:t/2,cy:t/2,r:d,stroke:"#e5e7eb",strokeWidth:n,fill:"none"}),c.jsx("circle",{cx:t/2,cy:t/2,r:d,stroke:_,strokeWidth:n,fill:"none",strokeDasharray:a,strokeDashoffset:g,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),l&&c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[c.jsx("span",{className:"text-3xl font-bold",style:{color:_},children:e.toFixed(1)}),c.jsx("span",{className:"text-sm text-gray-500",children:"/ 100"})]})]})};function yJ(e,t=[]){let n=[];function i(d,a){const g=k.createContext(a);g.displayName=d+"Context";const x=n.length;n=[...n,a];const _=E=>{const{scope:A,children:D,...I}=E,L=A?.[e]?.[x]||g,B=k.useMemo(()=>I,Object.values(I));return c.jsx(L.Provider,{value:B,children:D})};_.displayName=d+"Provider";function C(E,A){const D=A?.[e]?.[x]||g,I=k.useContext(D);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${E}\` must be used within \`${d}\``)}return[_,C]}const l=()=>{const d=n.map(a=>k.createContext(a));return function(g){const x=g?.[e]||d;return k.useMemo(()=>({[`__scope${e}`]:{...g,[e]:x}}),[g,x])}};return l.scopeName=e,[i,vJ(l,...t)]}function vJ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(d){const a=i.reduce((g,{useScope:x,scopeName:_})=>{const E=x(d)[`__scope${_}`];return{...g,...E}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var xJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],B4=xJ.reduce((e,t)=>{const n=K0(`Primitive.${t}`),i=k.forwardRef((l,d)=>{const{asChild:a,...g}=l,x=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(x,{...g,ref:d})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),bS="Progress",_S=100,[bJ]=yJ(bS),[_J,wJ]=bJ(bS),F4=k.forwardRef((e,t)=>{const{__scopeProgress:n,value:i=null,max:l,getValueLabel:d=SJ,...a}=e;(l||l===0)&&!Dk(l)&&console.error(EJ(`${l}`,"Progress"));const g=Dk(l)?l:_S;i!==null&&!Pk(i,g)&&console.error(CJ(`${i}`,"Progress"));const x=Pk(i,g)?i:null,_=q0(x)?d(x,g):void 0;return c.jsx(_J,{scope:n,value:x,max:g,children:c.jsx(B4.div,{"aria-valuemax":g,"aria-valuemin":0,"aria-valuenow":q0(x)?x:void 0,"aria-valuetext":_,role:"progressbar","data-state":q4(x,g),"data-value":x??void 0,"data-max":g,...a,ref:t})})});F4.displayName=bS;var U4="ProgressIndicator",V4=k.forwardRef((e,t)=>{const{__scopeProgress:n,...i}=e,l=wJ(U4,n);return c.jsx(B4.div,{"data-state":q4(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...i,ref:t})});V4.displayName=U4;function SJ(e,t){return`${Math.round(e/t*100)}%`}function q4(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function q0(e){return typeof e=="number"}function Dk(e){return q0(e)&&!isNaN(e)&&e>0}function Pk(e,t){return q0(e)&&!isNaN(e)&&e<=t&&e>=0}function EJ(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${_S}\`.`}function CJ(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${_S} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var H4=F4,TJ=V4;const Hb=k.forwardRef(({className:e,value:t,indicatorColor:n,...i},l)=>c.jsx(H4,{ref:l,className:Kt("relative h-2 w-full overflow-hidden rounded-full bg-gray-200",e),...i,children:c.jsx(TJ,{className:"h-full w-full flex-1 transition-all bg-primary",style:{transform:`translateX(-${100-(t||0)}%)`,backgroundColor:n}})}));Hb.displayName=H4.displayName;const kJ=()=>{const e=Ta(),[t]=iv(),{clearEstimationData:n,latitude:i,longitude:l,area:d,propertyType:a,address_district:g,legal_status:x,house_direction:_,balcony_direction:C,furniture_status:E,num_bedrooms:A,num_bathrooms:D,num_floors:I,facade_width_m:L,road_width_m:B}=Jm(),[z,q]=k.useState(!0),[H,W]=k.useState(null);k.useEffect(()=>{(async()=>{try{q(!0);const oe={latitude:i,longitude:l,address_district:g,area:d,property_type:a};A&&(oe.num_bedrooms=A),D&&(oe.num_bathrooms=D),I&&(oe.num_floors=I),L&&(oe.facade_width_m=L),B&&(oe.road_width_m=B),x&&(oe.legal_status=x),_&&(oe.house_direction=_),C&&(oe.balcony_direction=C),E&&(oe.furniture_status=E);const he=await oG(oe);he.status==="200"&&he.data?W(he.data):mn.error("Khng th nh gi bt ng sn")}catch(oe){console.error("Error predicting price:",oe)}finally{q(!1)}})()},[i,l,d,a,g,x,_,C,E,A,D,I,L,B]);const ne=()=>{n(),e("/dinh-gia-nha/dia-chi")},re=[{key:"score_public_safety",label:"An ninh",icon:cv,color:"#f97316",bgColor:"bg-blue-500"},{key:"score_healthcare",label:"Y t",icon:bc,color:"#ef4444",bgColor:"bg-red-500"},{key:"score_education",label:"Gio dc",icon:Zm,color:"#8b5cf6",bgColor:"bg-purple-500"},{key:"score_shopping",label:"Tin ch",icon:uv,color:"#22c55e",bgColor:"bg-green-500"},{key:"score_transportation",label:"Giao thng",icon:ov,color:"#eab308",bgColor:"bg-yellow-500"},{key:"score_environment",label:"Mi trng",icon:sv,color:"#14b8a6",bgColor:"bg-teal-500"},{key:"score_entertainment",label:"Gii tr",icon:lv,color:"#ec4899",bgColor:"bg-pink-500"}];return z?c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-8",children:c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx(xs,{className:"w-12 h-12 animate-spin text-[#008DDA]"}),c.jsx("p",{className:"text-gray-600",children:"ang phn tch v nh gi bt ng sn..."})]})}):H?c.jsx("div",{className:"min-h-[calc(100vh-200px)] px-4 py-8",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl font-semibold mb-2",children:"NH GI NH"}),c.jsx("p",{className:"text-sm text-gray-500",children:t.get("address")??""})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[c.jsx(Gw,{className:"w-5 h-5 text-[#008DDA]"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-medium",children:"Gi c tnh"})]}),c.jsxs("p",{className:"text-4xl sm:text-5xl font-bold text-[#008DDA] mb-2",children:[H.predicted_price_billions.toFixed(2)," t VN"]}),d&&c.jsxs("p",{className:"text-sm text-gray-500",children:[" ",op(H.predicted_price/d),"/m"]})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-medium mb-4",children:"Ch s sng"}),c.jsx(xS,{value:H.livability_score,size:140,strokeWidth:10})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6 text-center",children:"Cc ch s chi tit"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:re.map(({key:ee,label:oe,icon:he,color:we})=>{const ye=H.component_scores[ee];return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(he,{className:"w-5 h-5",style:{color:we}}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:oe})]}),c.jsx("span",{className:"text-sm font-semibold",style:{color:we},children:ye.toFixed(1)})]}),c.jsx(Hb,{value:ye,className:"h-2",indicatorColor:we})]},ee)})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Phn tch chi tit t AI"}),c.jsx("div",{className:"prose prose-sm sm:prose max-w-none text-gray-700",children:c.jsx(Ab,{components:{h2:({children:ee})=>c.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",children:ee}),h3:({children:ee})=>c.jsx("h3",{className:"text-base font-semibold mt-3 mb-2",children:ee}),p:({children:ee})=>c.jsx("p",{className:"mb-3 leading-relaxed",children:ee}),strong:({children:ee})=>c.jsx("strong",{className:"font-semibold text-gray-900",children:ee}),ul:({children:ee})=>c.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:ee}),ol:({children:ee})=>c.jsx("ol",{className:"list-decimal list-inside mb-3 space-y-1",children:ee}),li:({children:ee})=>c.jsx("li",{className:"ml-2",children:ee})},children:H.ai_insight})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[c.jsx(Nr,{className:"w-full h-11",variant:"outline",children:"Xem lch s nh gi"}),c.jsx(Nr,{onClick:ne,className:"w-full h-11 transition-colors duration-200 bg-[#008DDA] cursor-pointer hover:bg-[#0064A6] text-base",children:"Tip tc nh gi"})]})]})}):c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-8",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-2xl text-center",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"Khng th ti d liu nh gi"}),c.jsx(Nr,{onClick:ne,className:"bg-[#008DDA] hover:bg-[#0064A6]",children:"Th li"})]})})},jJ=({predictionId:e,fullAddress:t,predictedPriceBillions:n,livabilityScore:i,area:l,propertyType:d,createdAt:a})=>{const g=_=>Id.find(C=>C.id===_)?.name||_,x=_=>_>=80?"#22c55e":_>=60?"#008DDA":_>=40?"#f59e0b":"#ef4444";return c.jsx(wi,{to:`/dinh-gia-nha/ket-qua/${e}`,className:"block bg-white rounded-lg border border-gray-200 hover:border-[#008DDA] hover:shadow-md transition-all duration-200 overflow-hidden",children:c.jsx("div",{className:"p-4 sm:p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex sm:flex-col justify-between sm:justify-start gap-4 sm:gap-3 sm:min-w-[180px] sm:border-r sm:pr-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Gi nh gi"}),c.jsxs("p",{className:"text-xl sm:text-2xl font-semibold text-[#008DDA]",children:[n.toFixed(2)," t"]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Ch s sng"}),c.jsxs("p",{className:"text-xl sm:text-2xl font-semibold",style:{color:x(i)},children:[i,"/100"]})]})]}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bs,{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-700 line-clamp-2 break-words",children:t})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Gf,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:g(d)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Fj,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600",children:eg(l)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[c.jsx(p5,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-xs text-gray-500",children:bM(a)})]})]})]})})})};function AJ(){const[e,t]=k.useState([]),[n,i]=k.useState(!0);return k.useEffect(()=>{(async()=>{try{i(!0);const d=await sG();if(d.status==="200"&&d.data?.items){const a=d.data.items.map(g=>({predictionId:g.prediction_id,fullAddress:g.address_district||"a ch khng xc nh",predictedPriceBillions:g.predicted_price_billions,livabilityScore:Math.round(g.livability_score),area:g.area,propertyType:g.property_type,createdAt:g.created_at}));t(a)}}catch(d){console.error("Error fetching prediction history:",d),t([])}finally{i(!1)}})()},[]),c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white border-b",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[c.jsx("div",{className:"flex items-center gap-3 mb-2",children:c.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Lch s nh gi"})}),c.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-3xl",children:"Xem li cc ln nh gi bt ng sn ca bn. Theo di xu hng gi v ch s sng  a ra quyt nh tt nht."})]})}),c.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:n?c.jsxs("div",{className:"space-y-4",children:[c.jsx(Xt,{className:"h-6 w-48"}),[...Array(3)].map((l,d)=>c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex sm:flex-col justify-between sm:justify-start gap-4 sm:gap-3 sm:min-w-[180px] sm:border-r sm:pr-4",children:[c.jsxs("div",{children:[c.jsx(Xt,{className:"h-4 w-20 mb-2"}),c.jsx(Xt,{className:"h-8 w-24"})]}),c.jsxs("div",{children:[c.jsx(Xt,{className:"h-4 w-20 mb-2"}),c.jsx(Xt,{className:"h-8 w-24"})]})]}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsx(Xt,{className:"h-5 w-full"}),c.jsxs("div",{className:"flex gap-6",children:[c.jsx(Xt,{className:"h-4 w-24"}),c.jsx(Xt,{className:"h-4 w-24"})]}),c.jsx(Xt,{className:"h-4 w-32"})]})]})},d))]}):e.length===0?c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-8 sm:p-12 text-center",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:c.jsx(Oy,{className:"w-8 h-8 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Cha c lch s nh gi"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Bn cha thc hin nh gi no. Hy bt u nh gi bt ng sn ca bn ngay!"}),c.jsx("a",{href:"/dinh-gia-nha/dia-chi",className:"inline-flex items-center justify-center px-6 py-3 bg-[#008DDA] text-white rounded-lg hover:bg-[#0064A6] transition-colors",children:"nh gi ngay"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsxs("p",{className:"text-sm text-gray-600",children:["Tng s: ",c.jsx("span",{className:"font-medium",children:e.length})," ln nh gi"]})}),e.map(l=>c.jsx(jJ,{predictionId:l.predictionId,fullAddress:l.fullAddress,predictedPriceBillions:l.predictedPriceBillions,livabilityScore:l.livabilityScore,area:l.area,propertyType:l.propertyType,createdAt:l.createdAt},l.predictionId))]})})]})}const NJ={prediction_id:"2f8e6e9e-d419-4117-badf-d4f1a506ce6b",created_at:"2025-12-16T10:34:06.164523Z",address_district:"123/45 L Thi T, Phng 2, Qun 3, TP. H Ch Minh",area:50,property_type:"alley_house",predicted_price_billions:5.07,livability_score:58.72508293725,ai_insight:`Cho bn, vi vai tr chuyn gia nh gi bt ng sn, ti xin phn tch mc gi d on 5.07 t VN cho cn nh bn cung cp nh sau:

Mc gi **5.07 t VN** cho cn nh hm (alley_house) ti Qun 4, vi din tch 50m2, 4 tng, 4 phng ng, 5 phng v sinh, mt tin 8m v ng trc nh 7m, c th c xem l **kh hp l, thm ch c phn nhnh** so vi cc tiu chun thng thng cho nh hm.

Cc yu t "t gi" nht ca bt ng sn ny bao gm:

*   **V tr c a ti Qun 4:** Mc d l nh hm, Qun 4 l khu vc trung tm sm ut, c kt ni giao thng thun tin vi cc qun khc, mang li tim nng tng gi v cho thu tt.
*   **Ch s "Y t" vt tri (90.1/100):** Gn cc c s y t quan trng nh Nh Thuc S 48 - Cng Ty DP Khnh Hi (148m) l mt im cng ln v tin ch cuc sng, c bit vi nhng gia nh c ngi gi hoc tr nh.
*   **ng trc nh rng 7m, mt tin 8m:** y l mt li th ng k cho nh hm, gip vic ra vo thun tin, d dng  xe v to cm gic thng thong hn so vi cc con hm nh hp thng thng.
*   **Ni tht y :** Gim thiu chi ph ban u cho ngi mua v vic trang b ni tht.

Tuy nhin, cn nh vn cn mt vi im tr cn cn nhc:

*   **Ch s "Tin ch" kh thp (6.67/100):** D c tin ch y t tt, ch s ny cho thy cc tin ch khc nh mua sm, gii tr, dch v c th cha a dng hoc  xa, nh hng n tri nghim sng hng ngy.
*   **Ch s "An ninh" l None:** Vic thiu thng tin v ch s an ninh l mt im tr, bi an ninh l yu t c nhiu ngi mua quan tm hng u khi chn nh.

Nhn chung, mc gi ny phn nh s cn bng gia li th v tr, kt cu nh v tin ch y t ni bt, b p phn no cho nhng hn ch v tin ch khc v s thiu vng d liu an ninh.`,longitude:106.71599746,latitude:10.75791036,num_bedrooms:4,num_bathrooms:5,num_floors:4,facade_width_m:8,road_width_m:7,legal_status:"S /S hng",house_direction:"ng",balcony_direction:"Nam",furniture_status:"y ",component_scores:{score_healthcare:90.10018488333333,score_education:69.686503351,score_transportation:99.087717426,score_environment:50.95948058799999,score_public_safety:0,score_shopping:6.666666666666667,score_entertainment:75}};function MJ(){const e=Ta(),{id:t}=Aw(),[n,i]=k.useState(!0),[l,d]=k.useState(null),{switchToPrediction:a}=w2(),{loadHistory:g}=S2(),x=Wi(z=>z.setIsOpen);k.useEffect(()=>{(async()=>{try{i(!0),await new Promise(q=>setTimeout(q,1e3)),d(NJ)}catch(q){console.error("Error fetching prediction detail:",q)}finally{i(!1)}})()},[t]);const _=z=>Id.find(q=>q.id===z)?.name||z,C=z=>Bb.find(q=>q.id===z)?.name||z,E=z=>np.find(q=>q.id===z)?.name||z,A=z=>Fb.find(q=>q.id===z)?.name||z,D=async()=>{if(t)try{a(t),await g("prediction",{predictionId:t}),x(!0)}catch(z){console.error("Failed to open chat:",z),mn.error("Khng th m chat. Vui lng th li.")}},I=[{key:"score_public_safety",label:"An ninh",icon:cv,color:"#f97316",bgColor:"bg-blue-500"},{key:"score_healthcare",label:"Y t",icon:bc,color:"#ef4444",bgColor:"bg-red-500"},{key:"score_education",label:"Gio dc",icon:Zm,color:"#8b5cf6",bgColor:"bg-purple-500"},{key:"score_shopping",label:"Tin ch",icon:uv,color:"#22c55e",bgColor:"bg-green-500"},{key:"score_transportation",label:"Giao thng",icon:ov,color:"#eab308",bgColor:"bg-yellow-500"},{key:"score_environment",label:"Mi trng",icon:sv,color:"#14b8a6",bgColor:"bg-teal-500"},{key:"score_entertainment",label:"Gii tr",icon:lv,color:"#ec4899",bgColor:"bg-pink-500"}];if(n)return c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-8",children:c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx(xs,{className:"w-12 h-12 animate-spin text-[#008DDA]"}),c.jsx("p",{className:"text-gray-600",children:"ang ti thng tin nh gi..."})]})});if(!l)return c.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center px-4 py-8",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-2xl text-center",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"Khng tm thy thng tin nh gi"}),c.jsx(Nr,{onClick:()=>e("/dinh-gia-nha/lich-su"),className:"bg-[#008DDA] hover:bg-[#0064A6]",children:"Quay li lch s"})]})});const B=[{key:"area",label:"Din tch",value:l.area?`${l.area} m`:null,icon:Gf},{key:"property_type",label:"Loi bt ng sn",value:l.property_type?_(l.property_type):null,icon:Gf},{key:"num_bedrooms",label:"S phng ng",value:l.num_bedrooms?`${l.num_bedrooms} phng`:null,icon:s5},{key:"num_bathrooms",label:"S phng tm",value:l.num_bathrooms?`${l.num_bathrooms} phng`:null,icon:a5},{key:"num_floors",label:"S tng",value:l.num_floors?`${l.num_floors} tng`:null,icon:zj},{key:"facade_width_m",label:"Mt tin",value:l.facade_width_m?`${l.facade_width_m} m`:null,icon:_E},{key:"road_width_m",label:"ng vo",value:l.road_width_m?`${l.road_width_m} m`:null,icon:_E},{key:"legal_status",label:"Giy t php l",value:l.legal_status?C(l.legal_status):null,icon:Oy},{key:"house_direction",label:"Hng nh",value:l.house_direction&&l.house_direction!=="Khng xc nh"?E(l.house_direction):null,icon:N5},{key:"balcony_direction",label:"Hng ban cng",value:l.balcony_direction&&l.balcony_direction!=="Khng xc nh"?E(l.balcony_direction):null,icon:J3},{key:"furniture_status",label:"Ni tht",value:l.furniture_status?A(l.furniture_status):null,icon:L3}].filter(z=>z.value!==null);return c.jsx("div",{className:"min-h-[calc(100vh-200px)] px-4 py-8",children:c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl font-semibold mb-2",children:"CHI TIT NH GI"}),c.jsx("p",{className:"text-sm text-gray-500",children:l.address_district})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[c.jsx(Gw,{className:"w-5 h-5 text-[#008DDA]"}),c.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-medium",children:"Gi c tnh"})]}),c.jsxs("p",{className:"text-4xl sm:text-5xl font-bold text-[#008DDA] mb-2",children:[l.predicted_price_billions.toFixed(2)," t VN"]}),l.area&&c.jsxs("p",{className:"text-sm text-gray-500",children:[" ",op(l.predicted_price_billions*1e9/l.area),"/m"]})]}),c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-medium mb-4",children:"Ch s sng"}),c.jsx(xS,{value:Math.round(l.livability_score),size:140,strokeWidth:10})]})]})]}),B.length>0&&c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Thng tin chi tit"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(z=>{const q=z.icon;return c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[c.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-[#008DDA]/10 rounded-lg flex items-center justify-center",children:c.jsx(q,{className:"w-5 h-5 text-[#008DDA]"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-0.5",children:z.label}),c.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:z.value})]})]},z.key)})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[c.jsx("h3",{className:"text-xl font-semibold mb-6 text-center",children:"Cc ch s chi tit"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:I.map(({key:z,label:q,icon:H,color:W})=>{const ne=l.component_scores[z];return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(H,{className:"w-5 h-5",style:{color:W}}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:q})]}),c.jsx("span",{className:"text-sm font-semibold",style:{color:W},children:ne.toFixed(1)})]}),c.jsx(Hb,{value:ne,className:"h-2",indicatorColor:W})]},z)})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Phn tch chi tit t AI"}),c.jsx("div",{className:"prose prose-sm sm:prose max-w-none text-gray-700",children:c.jsx(Ab,{components:{h2:({children:z})=>c.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",children:z}),h3:({children:z})=>c.jsx("h3",{className:"text-base font-semibold mt-3 mb-2",children:z}),p:({children:z})=>c.jsx("p",{className:"mb-3 leading-relaxed",children:z}),strong:({children:z})=>c.jsx("strong",{className:"font-semibold text-gray-900",children:z}),ul:({children:z})=>c.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:z}),ol:({children:z})=>c.jsx("ol",{className:"list-decimal list-inside mb-3 space-y-1",children:z}),li:({children:z})=>c.jsx("li",{className:"ml-2",children:z})},children:l.ai_insight})}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#008DDA] to-[#00B4D8] rounded-xl blur opacity-20 group-hover:opacity-30 transition-opacity"}),c.jsx(Nr,{onClick:D,className:"relative w-full h-14 text-base font-semibold bg-gradient-to-r from-[#008DDA] to-[#00B4D8] hover:from-[#0064A6] hover:to-[#008DDA] text-white shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group",children:c.jsxs("div",{className:"flex items-center justify-center gap-3",children:[c.jsx("div",{className:"relative",children:c.jsx(W0,{className:"w-5 h-5 transition-transform group-hover:scale-110 duration-300"})}),c.jsx("span",{className:"bg-gradient-to-r from-white to-blue-50 bg-clip-text text-transparent font-bold",children:"Tip tc tr chuyn vi AI"}),c.jsx("div",{className:"ml-1 transition-transform group-hover:translate-x-1 duration-300",children:""})]})})]}),c.jsx("p",{className:"text-center text-xs text-gray-500 mt-3",children:"t cu hi v bt ng sn ny v nhn t vn chi tit t AI"})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-3",children:[c.jsx(Nr,{onClick:()=>e("/dinh-gia-nha/lich-su"),className:"w-full h-11 cursor-pointer",variant:"outline",children:"Quay li lch s"}),c.jsx(Nr,{onClick:()=>e("/dinh-gia-nha/dia-chi"),className:"w-full h-11 transition-colors duration-200 bg-[#008DDA] cursor-pointer hover:bg-[#0064A6] text-base",children:"nh gi mi"})]})]})})}const Ik=({icon:e,label:t,path:n,isActive:i,isDanger:l=!1,onClick:d})=>{const a=Ta(),g=()=>{d?d():a(n)};return c.jsxs("button",{onClick:g,className:Kt("w-full flex items-center cursor-pointer gap-3 px-4 py-3 rounded-lg transition-all duration-200","hover:bg-gray-100 active:scale-[0.98]",i&&!l&&"bg-[#008DDA]/10 text-[#008DDA] font-medium shadow-sm",l&&"text-red-600 hover:bg-red-600 hover:text-white",!i&&!l&&"text-gray-700 hover:text-gray-900"),children:[c.jsx("span",{className:Kt("flex-shrink-0 transition-transform duration-200",i&&!l&&"text-[#008DDA]",l&&"group-hover:text-white"),children:e}),c.jsx("span",{className:"text-left text-[15px]",children:t})]})},DJ=({icon:e,label:t,path:n,isActive:i,isCentral:l=!1,onClick:d})=>{const a=Ta(),g=()=>{d?d():a(n)};return c.jsxs("button",{onClick:g,className:Kt("flex flex-col items-center justify-center transition-all duration-200 cursor-pointer",l?"relative -mt-6 w-16 h-16 rounded-full bg-[#008DDA] text-white shadow-lg hover:bg-[#0064A6] active:scale-95":Kt("flex-1 py-2 px-1",i&&"text-[#008DDA]",!i&&"text-gray-600 hover:text-gray-900")),children:[c.jsx("span",{className:Kt("transition-transform duration-200",l?"text-white":""),children:e}),c.jsx("span",{className:Kt("text-[10px] mt-1 font-medium",l&&"sr-only"),children:t})]})},PJ=()=>{const e=Ta(),t=Zs(),n=Li(x=>x.logout),i=Li(x=>x.clearUserInfo),{clearEstimationData:l}=Jm(),d=()=>{n(),i(),l(),e("/"),mn.success("ng xut thnh cng!"),console.log("Logging out...")},a=[{icon:c.jsx(Oy,{size:20}),label:"Tin ng",path:"/tin-dang"},{icon:c.jsx(E3,{size:20}),label:"ng tin",path:"/dang-tin"},{icon:c.jsx(bc,{size:20}),label:"Tin yu thch",path:"/tin-yeu-thich"},{icon:c.jsx(y1,{size:20}),label:"Lch s nh gi",path:"/dinh-gia-nha/lich-su"},{icon:c.jsx(dv,{size:20}),label:"Thng tin c nhn",path:"/thong-tin-ca-nhan"},{icon:c.jsx(v1,{size:20}),label:"i mt khu",path:"/doi-mat-khau"}],g=[a[0],a[2],a[1],a[3],a[4]];return c.jsxs(c.Fragment,{children:[c.jsxs("aside",{className:"hidden sm:flex w-64 bg-white border-r border-gray-200 h-screen sticky top-0 flex-col shadow-sm",children:[c.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-br from-white to-gray-50",children:c.jsx("button",{onClick:()=>e("/"),className:"flex items-center justify-center w-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[#008DDA] focus:ring-offset-2 rounded-lg p-2 cursor-pointer",children:c.jsx("img",{src:"/src/assets/timnha-icon.png",alt:"TimNha Logo",className:"h-16 w-auto drop-shadow-sm"})})}),c.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:a.map(x=>c.jsx(Ik,{icon:x.icon,label:x.label,path:x.path,isActive:t.pathname===x.path},x.path))}),c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gradient-to-br from-white to-gray-50",children:c.jsx(Ik,{icon:c.jsx(x1,{size:20}),label:"ng xut",path:"",isActive:!1,isDanger:!0,onClick:d})})]}),c.jsx("nav",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50",children:c.jsx("div",{className:"flex items-center justify-around px-2 pb-safe",children:g.map((x,_)=>c.jsx(DJ,{icon:x.icon,label:x.label,path:x.path,isActive:t.pathname===x.path,isCentral:_===2},x.path))})})]})},IJ=()=>{const{showExpiredDialog:e,handleLoginRedirect:t,handleHomeRedirect:n,checkTokenExpired:i}=XN();return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[c.jsx(PJ,{}),c.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden w-full sm:w-auto",children:[c.jsx("main",{className:"flex-1 overflow-auto pb-20 sm:pb-0",children:c.jsx("div",{className:"container mx-auto p-4 sm:p-6",children:c.jsx($0,{})})}),c.jsx("div",{className:"hidden sm:block",children:c.jsx(ZN,{})})]})]}),c.jsx(nD,{checkTokenExpired:i}),c.jsx(vM,{open:e,onLoginRedirect:t,onHomeRedirect:n})]})},OJ=e=>{switch(e){case"ang hin th":return"bg-green-100 text-green-700 border-green-300";case"Ch duyt":return"bg-yellow-100 text-yellow-700 border-yellow-300";case" g":return"bg-gray-100 text-gray-700 border-gray-300";case"Khng duyt":return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},RJ=({id:e,title:t,price:n,area:i,address:l,imageUrl:d,createdAt:a,status:g,onDelete:x})=>{const[_,C]=k.useState(!1),E=A=>{A.preventDefault(),A.stopPropagation(),x&&x(e)};return c.jsxs("div",{className:"group flex gap-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 p-3 relative",onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:[c.jsx("button",{onClick:E,className:"cursor-pointer absolute top-3 right-3 z-10 p-2 rounded-full bg-white/90 hover:bg-red-500 text-gray-600 hover:text-white transition-all duration-200 shadow-md hover:shadow-lg group/delete",title:"Xa tin ng",children:c.jsx(V3,{className:"w-5 h-5"})}),c.jsxs(wi,{to:`/bat-dong-san/${e}/chinh-sua`,className:"flex gap-4 flex-1",children:[c.jsxs("div",{className:"relative w-48 h-36 flex-shrink-0 overflow-hidden rounded-lg",children:[c.jsx("img",{src:d,alt:t,className:`w-full h-full object-cover transition-transform duration-300 ${_?"scale-110":"scale-100"}`}),c.jsx("div",{className:"absolute top-2 left-2",children:c.jsx("span",{className:Kt("text-xs font-semibold px-2 py-1 rounded-md border",OJ(g)),children:g})})]}),c.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[c.jsx("div",{className:"flex items-center justify-between mb-1",children:c.jsxs("span",{className:"text-[11px] font-mono tracking-wide px-2 py-1 rounded bg-gray-100 text-gray-600 border border-gray-200",children:["M tin: #TN-",e]})}),c.jsx("h3",{className:"text-gray-900 font-semibold text-lg line-clamp-2 break-words leading-tight mb-2",children:t}),c.jsx("div",{className:"flex items-start gap-1 text-gray-500 mb-2",children:c.jsx("p",{className:"line-clamp-1 text-sm",children:l})}),c.jsxs("div",{className:"flex items-center gap-5 text-sm mb-2",children:[c.jsx("span",{className:"text-[#008DDA] font-bold text-lg",children:op(n)}),c.jsx("span",{className:"text-gray-600",children:eg(i)})]}),c.jsx("div",{className:"flex flex-wrap gap-3 mt-auto pt-2",children:c.jsxs("span",{className:"text-gray-500 text-xs",children:["Ngy ng: ",bM(a)]})})]})]})]})};var LJ=Symbol("radix.slottable");function zJ(e){const t=({children:n})=>c.jsx(c.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=LJ,t}var $4="AlertDialog",[BJ]=Cc($4,[YN]),Od=YN(),G4=e=>{const{__scopeAlertDialog:t,...n}=e,i=Od(t);return c.jsx(hM,{...i,...n,modal:!0})};G4.displayName=$4;var FJ="AlertDialogTrigger",UJ=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,l=Od(n);return c.jsx(SV,{...l,...i,ref:t})});UJ.displayName=FJ;var VJ="AlertDialogPortal",Z4=e=>{const{__scopeAlertDialog:t,...n}=e,i=Od(t);return c.jsx(fM,{...i,...n})};Z4.displayName=VJ;var qJ="AlertDialogOverlay",X4=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,l=Od(n);return c.jsx(pM,{...l,...i,ref:t})});X4.displayName=qJ;var Im="AlertDialogContent",[HJ,$J]=BJ(Im),GJ=zJ("AlertDialogContent"),K4=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:i,...l}=e,d=Od(n),a=k.useRef(null),g=Vr(t,a),x=k.useRef(null);return c.jsx(xV,{contentName:Im,titleName:Y4,docsSlug:"alert-dialog",children:c.jsx(HJ,{scope:n,cancelRef:x,children:c.jsxs(mM,{role:"alertdialog",...d,...l,ref:g,onOpenAutoFocus:Tn(l.onOpenAutoFocus,_=>{_.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:_=>_.preventDefault(),onInteractOutside:_=>_.preventDefault(),children:[c.jsx(GJ,{children:i}),c.jsx(XJ,{contentRef:a})]})})})});K4.displayName=Im;var Y4="AlertDialogTitle",W4=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,l=Od(n);return c.jsx(gM,{...l,...i,ref:t})});W4.displayName=Y4;var Q4="AlertDialogDescription",J4=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,l=Od(n);return c.jsx(yM,{...l,...i,ref:t})});J4.displayName=Q4;var ZJ="AlertDialogAction",eP=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,l=Od(n);return c.jsx(_2,{...l,...i,ref:t})});eP.displayName=ZJ;var tP="AlertDialogCancel",nP=k.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...i}=e,{cancelRef:l}=$J(tP,n),d=Od(n),a=Vr(t,l);return c.jsx(_2,{...d,...i,ref:a})});nP.displayName=tP;var XJ=({contentRef:e})=>{const t=`\`${Im}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Im}\` by passing a \`${Q4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Im}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return k.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},KJ=G4,YJ=Z4,WJ=X4,QJ=K4,JJ=eP,eee=nP,tee=W4,nee=J4;function rP({...e}){return c.jsx(KJ,{"data-slot":"alert-dialog",...e})}function ree({...e}){return c.jsx(YJ,{"data-slot":"alert-dialog-portal",...e})}function iee({className:e,...t}){return c.jsx(WJ,{"data-slot":"alert-dialog-overlay",className:Kt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function iP({className:e,...t}){return c.jsxs(ree,{children:[c.jsx(iee,{}),c.jsx(QJ,{"data-slot":"alert-dialog-content",className:Kt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function aP({className:e,...t}){return c.jsx("div",{"data-slot":"alert-dialog-header",className:Kt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function oP({className:e,...t}){return c.jsx("div",{"data-slot":"alert-dialog-footer",className:Kt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function sP({className:e,...t}){return c.jsx(tee,{"data-slot":"alert-dialog-title",className:Kt("text-lg font-semibold",e),...t})}function lP({className:e,...t}){return c.jsx(nee,{"data-slot":"alert-dialog-description",className:Kt("text-muted-foreground text-sm",e),...t})}function cP({className:e,...t}){return c.jsx(JJ,{className:Kt(Y0(),e),...t})}function aee({className:e,...t}){return c.jsx(eee,{className:Kt(Y0({variant:"outline"}),e),...t})}const uP=()=>{const{setUserInfo:e,userId:t,avatarUrl:n}=Li(),[i,l]=k.useState(!1),[d,a]=k.useState(!1),g=async()=>{l(!0);try{await j6(),e(t,n,"PENDING"),mn.success("Yu cu tr thnh ngi bn  c gi thnh cng!")}catch(x){console.error("Error requesting to become seller:",x),a(!0)}finally{l(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-4",children:c.jsxs("div",{className:"max-w-md w-full p-8 text-center space-y-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"rounded-full bg-yellow-100 p-4",children:c.jsx(Iy,{className:"w-12 h-12 text-yellow-600"})})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Bn cha phi l ngi bn"}),c.jsx("p",{className:"text-gray-600",children:" ng tin bn hoc cho thu bt ng sn, bn cn ng k tr thnh ngi bn. Qu trnh xt duyt s din ra trong vng 24-48 gi."})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Nr,{onClick:g,className:`w-full transition-colors duration-200 ${i?"bg-[#0064A6]":"bg-[#008DDA] cursor-pointer"} hover:bg-[#0064A6] `,size:"lg",children:i?c.jsxs(c.Fragment,{children:[c.jsx(Xm,{className:"mr-2"}),"ang x l..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Y3,{className:"w-5 h-5 mr-2"}),"ng k tr thnh ngi bn"]})}),c.jsx("p",{className:"text-xs text-gray-500",children:"Bng vic ng k, bn ng  vi iu khon v chnh sch ca chng ti"})]})]})}),c.jsx(rP,{open:d,onOpenChange:a,children:c.jsxs(iP,{className:"max-w-md",children:[c.jsxs(aP,{children:[c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"rounded-full bg-blue-100 p-3",children:c.jsx(Iy,{className:"w-8 h-8 text-[#008DDA]"})})}),c.jsx(sP,{className:"text-center text-xl",children:"Thng bo"}),c.jsx(lP,{className:"text-center text-base",children:"Bn  ng k lm ngi bn trc . Vui lng i qu trnh xt duyt hon tt."})]}),c.jsx(oP,{className:"sm:justify-center",children:c.jsx(cP,{className:"bg-[#008DDA] hover:bg-[#007BC0] w-full sm:w-auto",onClick:()=>a(!1),children:" hiu"})})]})})]})},dP=()=>c.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-4",children:c.jsxs("div",{className:"max-w-md w-full p-8 text-center space-y-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"rounded-full bg-blue-100 p-4 relative",children:c.jsx(g1,{className:"w-12 h-12 text-[#008DDA] animate-pulse"})})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Yu cu ang ch ph duyt"}),c.jsx("p",{className:"text-gray-600",children:"Yu cu tr thnh ngi bn ca bn ang c xem xt. Qu trnh ny thng mt 24-48 gi lm vic."})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(E5,{className:"w-5 h-5 text-[#008DDA] flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-gray-700 text-left",children:"Chng ti  nhn c yu cu ca bn"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(g1,{className:"w-5 h-5 text-[#008DDA] flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-gray-700 text-left",children:"i ng ca chng ti ang xem xt h s"})]})]}),c.jsxs("div",{className:"pt-4 space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Bn s nhn c thng bo qua email khi yu cu c ph duyt."}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Nu c thc mc, vui lng lin h: ",c.jsx("span",{className:"font-medium text-[#008DDA]",children:"support@timnha.vn"})]})]})]})}),oee=RJ,see=()=>{const[e,t]=Bt.useState(1),[n,i]=Bt.useState(1),l=8,[d,a]=Bt.useState(""),[g,x]=Bt.useState("all"),[_,C]=Bt.useState(!1),[E,A]=Bt.useState(null),[D,I]=Bt.useState(!1),L=Li(ke=>ke.userId),[B,z]=Bt.useState([]),[q,H]=Bt.useState(!1),{filters:W,setFilter:ne}=Q2(),re=Li(ke=>ke.becomeSellerApproveStatus),ee=Bt.useCallback(async()=>{if(L)try{H(!0);const ke=[{key:"userId",operator:"equal",value:String(L)}],st=W.find(pe=>pe.key==="approvalStatus"&&pe.operator==="eq");st&&ke.push({key:"approvalStatus",operator:"equal",value:st.value});const me=W.find(pe=>pe.key==="title"&&pe.operator==="lk");me&&ke.push({key:"title",operator:"like",value:me.value});const Ce=await Wy({filters:ke,sorts:[{key:"createdAt",type:"DESC"}],rpp:l,page:e});z(Ce.data.items),i(Ce.data.pages||1)}catch(ke){console.error("Error fetching my properties:",ke)}finally{H(!1)}},[L,W,e,l]);Bt.useEffect(()=>{ee()},[ee]),Bt.useEffect(()=>{const ke=W.find(st=>st.key==="approvalStatus"&&st.operator==="eq");if(ke){const me={APPROVED:"ang hin th",PENDING:"Ch duyt",REJECTED:"Khng duyt"}[ke.value]||"all";x(me)}else x("all")},[W]);const oe=ke=>{if(ke==="all")ne("approvalStatus","eq","");else{const me={all:"","ang hin th":"APPROVED","Ch duyt":"PENDING","Khng duyt":"REJECTED"}[ke];me&&ne("approvalStatus","eq",me)}};Bt.useEffect(()=>{const ke=W.find(st=>st.key==="title"&&st.operator==="lk");a(ke?ke.value:"")},[W]);const he=ke=>{if(ke.key==="Enter"){ke.preventDefault();const st=d.trim();st?ne("title","lk",st):ne("title","lk","")}},we=ke=>{switch(ke){case"APPROVED":return"ang hin th";case"PENDING":return"Ch duyt";case"REJECTED":return"Khng duyt";default:return"Ch duyt"}},ye=B.map(ke=>({id:String(ke.id),title:ke.title,price:ke.price,area:ke.area,address:`${ke.addressStreet}, ${ke.addressWard}, ${ke.addressDistrict}, ${ke.addressCity}`,imageUrl:ke.imageUrls?.[0]||"",createdAt:ke.createdAt||"",status:we(ke.approvalStatus||"")})),Pe=ye,Ke=[{label:"Tt c",value:"all",color:"text-blue-600 border-blue-600"},{label:"ang hin th",value:"ang hin th",color:"text-green-600 border-green-600"},{label:"Ch duyt",value:"Ch duyt",color:"text-yellow-600 border-yellow-600"},{label:"Khng duyt",value:"Khng duyt",color:"text-red-600 border-red-600"}];Bt.useEffect(()=>{t(1)},[W]);const ze=Pe,Je=ke=>{A(ke),C(!0)},Ae=async()=>{if(E)try{I(!0),await aG(Number(E)),mn.success("Xa tin ng thnh cng!"),await ee(),C(!1),A(null)}catch(ke){console.error("Error deleting property:",ke),mn.error("C li xy ra khi xa tin ng. Vui lng th li!")}finally{I(!1)}},De=()=>{C(!1),A(null)};return c.jsxs(c.Fragment,{children:[["NONE","REJECTED"].includes(String(re))&&c.jsx(uP,{}),re==="PENDING"&&c.jsx(dP,{}),re==="APPROVED"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"Tin ng ca ti"}),c.jsx("p",{className:"text-gray-600",children:q?"ang ti...":c.jsxs(c.Fragment,{children:["Qun l ",ye.length," tin ng bt ng sn ca bn",Pe.length!==ye.length&&` (Hin th ${Pe.length} kt qu)`]})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Ry,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx(Dr,{type:"text",placeholder:"Tm kim theo tiu  tin...",value:d,onChange:ke=>a(ke.target.value),onKeyDown:he,className:"pl-10 focus-visible:ring-[#008DDA]"})]}),c.jsx("div",{className:"flex flex-wrap gap-5",children:Ke.map(ke=>c.jsx("button",{onClick:()=>oe(ke.value),className:Kt("px-4 py-2 rounded-lg border-2 transition-all duration-200 font-medium text-sm","hover:shadow-md active:scale-95 cursor-pointer",g===ke.value?`${ke.color} bg-opacity-10`:"border-gray-200 text-gray-600 hover:border-gray-300"),children:ke.label},ke.value))})]}),c.jsx("div",{className:"space-y-3",children:q?c.jsx(c.Fragment,{children:[...Array(l)].map((ke,st)=>c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex gap-4",children:[c.jsx(Xt,{className:"w-64 h-48 rounded-lg flex-shrink-0"}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsx(Xt,{className:"h-6 w-3/4"}),c.jsx(Xt,{className:"h-4 w-1/2"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx(Xt,{className:"h-4 w-24"}),c.jsx(Xt,{className:"h-4 w-24"})]}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx(Xt,{className:"h-4 w-32"}),c.jsx(Xt,{className:"h-6 w-24 rounded-full"})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(Xt,{className:"h-4 w-24"}),c.jsx(Xt,{className:"h-4 w-24"})]})]})]},st))}):ze.map(ke=>c.jsx(oee,{id:ke.id,title:ke.title,price:ke.price,area:ke.area,address:ke.address,imageUrl:ke.imageUrl,createdAt:ke.createdAt,status:ke.status,onDelete:Je},ke.id))}),!q&&n>=1&&ye.length!==0&&c.jsx("div",{className:"flex justify-center pt-2",children:c.jsx(Rb,{currentPage:e,totalPages:n,onPageChange:ke=>{t(ke),window.scrollTo({top:0,behavior:"smooth"})}})}),!q&&ye.length===0&&c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[c.jsx("p",{className:"text-gray-500 text-lg",children:"Bn cha c tin ng no"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Hy bt u ng tin bt ng sn ca bn"})]}),!q&&ye.length>0&&Pe.length===0&&c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[c.jsx(Ry,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 text-lg",children:"Khng tm thy kt qu ph hp"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Th tm kim vi t kha khc hoc thay i b lc"})]})]}),c.jsx(rP,{open:_,onOpenChange:C,children:c.jsxs(iP,{children:[c.jsxs(aP,{children:[c.jsx(sP,{children:"Xc nhn xa tin ng"}),c.jsx(lP,{children:"Bn c chc chn mun xa tin ng ny khng? Hnh ng ny khng th hon tc."})]}),c.jsxs(oP,{children:[c.jsx(aee,{className:"cursor-pointer",onClick:De,disabled:D,children:"Hy"}),c.jsx(cP,{onClick:Ae,disabled:D,className:"cursor-pointer bg-red-500 hover:bg-red-700",children:D?"ang xa...":"Xa"})]})]})})]})},wS=async e=>{const t=new FormData;return t.append("file",e),(await zi.post("media/upload-image",t)).data},lee=()=>{const e=Ta(),[t,n]=k.useState("for_sale"),[i,l]=k.useState(null),[d,a]=k.useState(null),[g,x]=k.useState([]),[_,C]=k.useState(!1),[E,A]=k.useState([]),[D,I]=k.useState(!1),[L,B]=k.useState(!1),[z,q]=k.useState(-1),[H,W]=k.useState(!1),ne=k.useRef(null),re=k.useRef(null),ee=k.useRef(""),oe=bu({defaultValues:{title:"",description:"",listingType:"for_sale",price:void 0,priceUnit:"VND",area:void 0,propertyType:void 0,legalStatus:null,numBedrooms:null,numBathrooms:null,numFloors:null,facadeWidthM:null,roadWidthM:null,houseDirection:null,balconyDirection:null,furnitureStatus:null,projectName:null,buildingBlock:null,floorNumber:null,addressStreet:null,addressWard:"",addressDistrict:"",addressCity:"TPHCM",location:{type:"Point",coordinates:[0,0]},imageUrls:null,features:null,tagNames:null,addressInput:"",images:[]},mode:"onSubmit"}),he=oe.watch("addressInput"),[we]=ig(he,300);k.useEffect(()=>{const pe=Q=>{ne.current&&!ne.current.contains(Q.target)&&re.current&&!re.current.contains(Q.target)&&B(!1)};return document.addEventListener("mousedown",pe),()=>document.removeEventListener("mousedown",pe)},[]);const ye=k.useCallback(async pe=>{I(!0);try{const Q=await zb(pe,10);Q.predictions&&Q.predictions.length>0?(A(Q.predictions),B(!0),q(-1)):(A([]),B(!1))}catch(Q){console.error("Error fetching autocomplete:",Q),A([])}finally{I(!1)}},[]);k.useEffect(()=>{const pe=we.trim();if(!pe||pe.length<3||H){A([]),B(!1),ee.current="";return}pe!==ee.current&&(ee.current=pe,ye(pe))},[we,ye,H]),k.useEffect(()=>{!H&&i&&(l(null),a(null),oe.setValue("location",{type:"Point",coordinates:[0,0]}))},[H,i,oe]);const Pe=async pe=>{I(!0);try{const Q=await tS(pe);if(Q.result&&Q.result.geometry&&Q.result.geometry.location){const{lat:Ee,lng:Ge}=Q.result.geometry.location,lt={latitude:Ee,longitude:Ge,address:Q.result.formatted_address};return l(lt),a(lt),oe.setValue("location",{type:"Point",coordinates:[Ge,Ee]}),{lat:Ee,lng:Ge}}}catch(Q){console.error("Error fetching place details:",Q),alert("Khng th ly ta  ca a ch ny")}finally{I(!1)}return null},Ke=async pe=>{W(!0),oe.setValue("addressInput",pe.description),B(!1),A([]);const Q=pe.description.split(",").map(Ee=>Ee.trim());if(Q.length>=3){const Ee=Q[0],Ge=Q[1],lt=Q[2];oe.setValue("addressStreet",Ee),oe.setValue("addressWard",Ge),oe.setValue("addressDistrict",lt)}await Pe(pe.place_id)},ze=pe=>{if(!(!L||E.length===0))switch(pe.key){case"ArrowDown":pe.preventDefault(),q(Q=>Q<E.length-1?Q+1:Q);break;case"ArrowUp":pe.preventDefault(),q(Q=>Q>0?Q-1:-1);break;case"Enter":z>=0&&(pe.preventDefault(),Ke(E[z]));break;case"Escape":B(!1);break}},Je=pe=>{l(pe),oe.setValue("location",{type:"Point",coordinates:[pe.longitude,pe.latitude]})},Ae=k.useMemo(()=>!d||!i?0:vS(d.latitude,d.longitude,i.latitude,i.longitude),[d,i]),De=Ae<=eS,ke=pe=>{const Q=pe.target.files;if(!Q)return;const Ee=Array.from(Q),lt=10-oe.getValues("images").length;if(lt<=0){alert("Bn ch c th ti ln ti a 10 nh");return}const We=Ee.slice(0,lt),Nt=["image/jpeg","image/jpg","image/png","image/webp"];if(We.filter(Pt=>!Nt.includes(Pt.type)).length>0){alert("Ch chp nhn file nh nh dng JPG, PNG, WEBP");return}if(We.filter(Pt=>Pt.size>5*1024*1024).length>0){alert("Kch thc mi nh khng c vt qu 5MB");return}const Ut=[...oe.getValues("images"),...We];oe.setValue("images",Ut),We.forEach(Pt=>{const Rt=new FileReader;Rt.onloadend=()=>{x(vn=>[...vn,Rt.result])},Rt.readAsDataURL(Pt)}),pe.target.value=""},st=pe=>{const Q=oe.getValues("images").filter((Ge,lt)=>lt!==pe),Ee=g.filter((Ge,lt)=>lt!==pe);oe.setValue("images",Q),x(Ee)},me=async pe=>{try{C(!0);const{images:Q,...Ee}=pe,Ge=Q.map(At=>wS(At)),We=(await Promise.all(Ge)).map(At=>At.data.mediaUrl),Nt={...Ee,imageUrls:We};await rG(Nt),mn.success("ng tin thnh cng!"),setTimeout(()=>{e("/tin-dang")},500)}catch(Q){console.error("Error creating property:",Q),mn.error("C li xy ra. Vui lng th li!")}finally{C(!1)}},Ce=Li(pe=>pe.becomeSellerApproveStatus);return c.jsxs(c.Fragment,{children:[["NONE","REJECTED"].includes(String(Ce))&&c.jsx(uP,{}),Ce==="PENDING"&&c.jsx(dP,{}),Ce==="APPROVED"&&c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"ng tin mi"}),c.jsx("p",{className:"text-gray-600",children:"in thng tin chi tit v bt ng sn ca bn"})]}),c.jsx(_u,{...oe,children:c.jsxs("form",{onSubmit:oe.handleSubmit(me),className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Nhu cu ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Bn mun ng tin mua hay cho thu?"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx("button",{type:"button",onClick:()=>{n("for_sale"),oe.setValue("listingType","for_sale")},className:Kt("p-6 rounded-lg border-2 transition-all duration-200 cursor-pointer","hover:shadow-lg active:scale-[0.98]",t==="for_sale"?"border-[#008DDA] bg-[#008DDA]/5 shadow-md":"border-gray-200 hover:border-gray-300"),children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx("div",{className:Kt("w-16 h-16 rounded-full flex items-center justify-center transition-colors",t==="for_sale"?"bg-[#008DDA] text-white":"bg-gray-100 text-gray-600"),children:c.jsx(Gf,{className:"w-8 h-8"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:Kt("text-lg font-semibold",t==="for_sale"?"text-[#008DDA]":"text-gray-700"),children:"Mua"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ng tin bn bt ng sn"})]})]})}),c.jsx("button",{type:"button",onClick:()=>{n("for_rent"),oe.setValue("listingType","for_rent")},className:Kt("p-6 rounded-lg border-2 transition-all duration-200 cursor-pointer","hover:shadow-lg active:scale-[0.98]",t==="for_rent"?"border-[#008DDA] bg-[#008DDA]/5 shadow-md":"border-gray-200 hover:border-gray-300"),children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx("div",{className:Kt("w-16 h-16 rounded-full flex items-center justify-center transition-colors",t==="for_rent"?"bg-[#008DDA] text-white":"bg-gray-100 text-gray-600"),children:c.jsx($w,{className:"w-8 h-8"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:Kt("text-lg font-semibold",t==="for_rent"?"text-[#008DDA]":"text-gray-700"),children:"Cho thu"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ng tin cho thu bt ng sn"})]})]})})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["a ch ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Nhp a ch ca bt ng sn v chn v tr chnh xc trn bn "}),c.jsx(Sn,{control:oe.control,name:"addressInput",rules:{required:"a ch khng c  trng",validate:()=>H?!0:"Vui lng chn a ch t gi "},render:({field:pe})=>c.jsxs(En,{className:"mb-6",children:[c.jsx(An,{className:"text-base",children:"a ch bt ng sn"}),c.jsx(Cn,{children:c.jsxs("div",{className:"relative",children:[c.jsx(Dr,{className:"focus-visible:ring-[#008DDA] h-11",placeholder:"Nhp a ch (VD: 123 Nguyn Hu, Qun 1, TP.HCM)",...pe,ref:Q=>{pe.ref(Q),re.current=Q},onKeyDown:ze,autoComplete:"off",onChange:Q=>{pe.onChange(Q),W(!1),i&&(l(null),a(null),oe.setValue("location",{type:"Point",coordinates:[0,0]}))}}),D&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:c.jsx(xs,{className:"w-5 h-5 animate-spin text-[#008DDA]"})}),L&&E.length>0&&c.jsx("div",{ref:ne,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:E.map((Q,Ee)=>c.jsxs("div",{onClick:()=>Ke(Q),className:Kt("flex items-start gap-3 p-3 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",z===Ee?"bg-blue-50":"hover:bg-gray-50"),children:[c.jsx(bs,{className:"w-5 h-5 text-[#008DDA] flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.structured_formatting.main_text}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:Q.structured_formatting.secondary_text})]})]},Q.place_id))})]})}),c.jsx(Vn,{})]})}),i&&c.jsxs("div",{className:"mt-6 pt-6 border-t space-y-4",children:[c.jsx("div",{children:c.jsxs("h3",{className:"text-base font-semibold mb-1",children:["Chn v tr chnh xc trn bn  ",c.jsx("span",{className:"text-red-500",children:"*"})]})}),c.jsx("div",{className:Kt("rounded-lg overflow-hidden border-2",De?"border-gray-300":"border-red-300"),children:c.jsx(yS,{location:i,onLocationChange:Je,defaultZoom:16,height:"500px",showNavigation:!0})}),!De&&Ae>0&&c.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mt-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Iy,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsx("div",{className:"flex-1",children:c.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"V tr khng trng khp vi a ch ban u"})})]})})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Thng tin chnh"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Cung cp thng tin chi tit v bt ng sn ca bn"}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Sn,{control:oe.control,name:"propertyType",rules:{required:"Vui lng chn loi bt ng sn"},render:({field:pe})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Loi bt ng sn ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs(wa,{value:pe.value,onValueChange:pe.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0",children:c.jsx(Sa,{placeholder:"Chn loi bt ng sn"})})}),c.jsx(Ca,{children:Id.map(Q=>c.jsx(Si,{value:Q.id,children:Q.name},Q.id))})]}),c.jsx(Vn,{})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:oe.control,name:"area",rules:{required:"Vui lng nhp din tch",pattern:{value:/^[0-9]+(\.[0-9]+)?$/,message:"Din tch phi l s hp l"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Din tch ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp din tch",className:"focus-visible:ring-[#008DDA] pr-16",value:pe.value||"",onChange:Q=>{const Ee=Q.target.value.replace(/\D/g,"");pe.onChange(Ee?Number(Ee):0)}})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"m"})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:oe.control,name:"price",rules:{required:"Vui lng nhp mc gi",pattern:{value:/^[0-9]+$/,message:"Mc gi ch c nhp s"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Mc gi ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp mc gi",className:"focus-visible:ring-[#008DDA] pr-16",value:pe.value||"",onChange:Q=>{const Ee=Q.target.value.replace(/\D/g,"");pe.onChange(Ee?Number(Ee):0)},onBlur:Q=>{Q.target.value=pe.value?Number(pe.value).toLocaleString("vi-VN"):""},onFocus:Q=>{Q.target.value=String(pe.value||0)}})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"VND"})]}),c.jsx(Vn,{})]})})]}),c.jsx(Sn,{control:oe.control,name:"title",rules:{required:"Vui lng nhp tiu ",minLength:{value:10,message:"Tiu  phi c t nht 10 k t"},maxLength:{value:100,message:"Tiu  khng c vt qu 100 k t"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Tiu  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Cn,{children:c.jsx(Dr,{placeholder:"VD: Cn h 2 phng ng view sng, full ni tht, gi tt",className:"focus-visible:ring-[#008DDA]",...pe})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[pe.value.length,"/100 k t"]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:oe.control,name:"description",rules:{required:"Vui lng nhp m t",minLength:{value:50,message:"M t phi c t nht 50 k t"},maxLength:{value:2e3,message:"M t khng c vt qu 2000 k t"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsxs(An,{children:["M t ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Cn,{children:c.jsx(Nb,{placeholder:"VD: Cn h nm ti tng cao, view thong mt hng sng. Ni tht y  bao gm: phng khch, bp, 2 phng ng c ging t, my lnh. Khu vc an ninh 24/7, c h bi, phng gym...",className:"focus-visible:ring-[#008DDA] min-h-32 resize-y",...pe})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[pe.value.length,"/2000 k t"]}),c.jsx(Vn,{})]})})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Thng tin khc"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Cc thng tin b sung gip m t chi tit hn v bt ng sn (khng bt buc)"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:oe.control,name:"legalStatus",render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"Giy t php l"}),c.jsxs(wa,{value:pe.value||"Khng xc nh",onValueChange:pe.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 w-full",children:c.jsx(Sa,{placeholder:"Chn loi giy t"})})}),c.jsx(Ca,{children:Bb.map(Q=>c.jsx(Si,{value:Q.name,children:Q.name},Q.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:oe.control,name:"furnitureStatus",render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"Ni tht"}),c.jsxs(wa,{value:pe.value||"Khng c",onValueChange:pe.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 w-full",children:c.jsx(Sa,{placeholder:"Chn tnh trng ni tht"})})}),c.jsx(Ca,{children:Fb.map(Q=>c.jsx(Si,{value:Q.name,children:Q.name},Q.id))})]}),c.jsx(Vn,{})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(Sn,{control:oe.control,name:"numBedrooms",rules:{pattern:{value:/^[0-9]*$/,message:"Ch c nhp s"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"S phng ng"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp s phng ng",className:"focus-visible:ring-[#008DDA]",onChange:Q=>{const Ee=Q.target.value.replace(/[^0-9]/g,"");pe.onChange(Ee?Number(Ee):null)},value:pe.value??""})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:oe.control,name:"numBathrooms",rules:{pattern:{value:/^[0-9]*$/,message:"Ch c nhp s"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"S phng tm"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp s phng tm",className:"focus-visible:ring-[#008DDA]",onChange:Q=>{const Ee=Q.target.value.replace(/[^0-9]/g,"");pe.onChange(Ee?Number(Ee):null)},value:pe.value??""})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:oe.control,name:"numFloors",rules:{pattern:{value:/^[0-9]*$/,message:"Ch c nhp s"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"S tng"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp s tng",className:"focus-visible:ring-[#008DDA]",onChange:Q=>{const Ee=Q.target.value.replace(/[^0-9]/g,"");pe.onChange(Ee?Number(Ee):null)},value:pe.value??""})}),c.jsx(Vn,{})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:oe.control,name:"houseDirection",render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"Hng nh"}),c.jsxs(wa,{value:pe.value||"Khng xc nh",onValueChange:pe.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 w-full",children:c.jsx(Sa,{placeholder:"Chn hng nh"})})}),c.jsx(Ca,{children:np.map(Q=>c.jsx(Si,{value:Q.name,children:Q.name},Q.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:oe.control,name:"balconyDirection",render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"Hng ban cng"}),c.jsxs(wa,{value:pe.value||"Khng xc nh",onValueChange:pe.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"w-full cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0",children:c.jsx(Sa,{placeholder:"Chn hng ban cng"})})}),c.jsx(Ca,{children:np.map(Q=>c.jsx(Si,{value:Q.name,children:Q.name},Q.id))})]}),c.jsx(Vn,{})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:oe.control,name:"roadWidthM",rules:{pattern:{value:/^[0-9]*\.?[0-9]*$/,message:"Ch c nhp s"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"ng vo"}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp  rng ng vo",className:"focus-visible:ring-[#008DDA] pr-10",onChange:Q=>{const Ee=Q.target.value.replace(/[^0-9.]/g,"");pe.onChange(Ee?Number(Ee):null)},value:pe.value??""})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"m"})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:oe.control,name:"facadeWidthM",rules:{pattern:{value:/^[0-9]*\.?[0-9]*$/,message:"Ch c nhp s"}},render:({field:pe})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt tin"}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp  rng mt tin",className:"focus-visible:ring-[#008DDA] pr-10",onChange:Q=>{const Ee=Q.target.value.replace(/[^0-9.]/g,"");pe.onChange(Ee?Number(Ee):null)},value:pe.value??""})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"m"})]}),c.jsx(Vn,{})]})})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Hnh nh ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Ti ln t nht 1 nh v ti a 10 nh. nh u tin s l nh i din."}),c.jsx(Sn,{control:oe.control,name:"images",rules:{required:"Vui lng ti ln t nht 1 nh",validate:pe=>pe.length===0?"Vui lng ti ln t nht 1 nh":pe.length>10?"Ch c ti ln ti a 10 nh":!0},render:({field:pe})=>c.jsxs(En,{children:[c.jsx(Cn,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[g.map((Q,Ee)=>c.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border-2 border-gray-200 group",children:[c.jsx("img",{src:Q,alt:`Preview ${Ee+1}`,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded",children:Ee===0?"nh i din":`${Ee+1}`}),c.jsx("button",{type:"button",onClick:()=>st(Ee),className:"cursor-pointer absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Zf,{className:"w-4 h-4"})})]},Ee)),pe.value.length<10&&c.jsxs("label",{className:"aspect-square rounded-lg border-2 border-dashed border-gray-300 hover:border-[#008DDA] cursor-pointer transition-all duration-200 flex flex-col items-center justify-center gap-2 bg-gray-50 hover:bg-blue-50",children:[c.jsx("input",{type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:ke,className:"hidden"}),c.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center",children:c.jsx(Zw,{className:"w-6 h-6 text-gray-600"})}),c.jsxs("div",{className:"text-center px-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ti nh ln"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[pe.value.length,"/10"]})]})]})]}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lj,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("p",{className:"font-medium mb-1",children:"Lu  khi ti nh:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"nh dng: JPG, PNG, WEBP"}),c.jsx("li",{children:"Kch thc ti a: 5MB/nh"}),c.jsx("li",{children:"nh u tin s l nh i din"}),c.jsx("li",{children:"Nn chp nh r nt, y  gc nhn"})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[" ti: ",c.jsx("span",{className:"font-semibold text-[#008DDA]",children:pe.value.length})," nh"]}),c.jsxs("span",{className:"text-gray-500",children:["Cn li: ",10-pe.value.length," nh"]})]})]})}),c.jsx(Vn,{})]})})]}),c.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t shadow-lg rounded-lg p-4 z-50",children:c.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[c.jsx("p",{className:"text-sm text-gray-600 hidden sm:block",children:_?"ang x l...":"Vui lng kim tra k thng tin trc khi ng tin"}),c.jsx(Nr,{type:"submit",disabled:_,className:"cursor-pointer w-full sm:w-auto px-8 py-6 text-base font-semibold transition-all duration-200 bg-[#008DDA] hover:bg-[#0064A6] shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:_?c.jsxs(c.Fragment,{children:[c.jsx(xs,{className:"w-5 h-5 mr-2 animate-spin inline"}),"ang ng tin..."]}):"ng tin"})]})})]})})]})]})},cee=()=>{const[e,t]=k.useState(1),[n,i]=k.useState(1),[l,d]=k.useState([]),[a,g]=k.useState(!1),[x,_]=k.useState(0),C=async()=>{try{g(!0);const D=await A6({filters:[],sorts:[{key:"createdAt",type:"DESC"}],rpp:5,page:e});d(D.data.items),i(D.data.pages||1),_(D.data.records||0)}catch(D){console.error("Error fetching favorite properties:",D)}finally{g(!1)}},E=async(D,I)=>{if(I)try{const L=Number(D);await vv(L),C()}catch(L){console.error("Error removing favorite:",L)}};k.useEffect(()=>{C()},[e]);const A=D=>{t(D),window.scrollTo({top:0,behavior:"smooth"})};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("div",{className:"flex items-center gap-3 mb-2",children:c.jsx("h1",{className:"text-3xl font-semibold",children:"Tin yu thch"})}),c.jsx("p",{className:"text-gray-600",children:a?c.jsx(Xt,{className:"h-5 w-64"}):`Bn ang theo di ${x} bt ng sn`})]}),c.jsx("div",{className:"space-y-3",children:a?c.jsx(c.Fragment,{children:[...Array(5)].map((D,I)=>c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex gap-4",children:[c.jsx(Xt,{className:"w-64 h-48 rounded-lg flex-shrink-0"}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsx(Xt,{className:"h-6 w-3/4"}),c.jsx(Xt,{className:"h-4 w-1/2"}),c.jsx(Xt,{className:"h-4 w-1/3"}),c.jsx(Xt,{className:"h-4 w-1/4"}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx(Xt,{className:"h-4 w-24"}),c.jsx(Xt,{className:"h-8 w-8 rounded-full"})]})]})]},I))}):l.length>0?l.map(D=>c.jsx($2,{id:String(D.id),title:D.title,price:D.price,area:D.area,address:`${D.addressStreet}, ${D.addressWard}, ${D.addressDistrict}, ${D.addressCity}`,imageUrl:D.imageUrls?.[0]||"",createdAt:D.createdAt||"",isLiked:!0,onFavoriteClick:E},D.id)):c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[c.jsx("p",{className:"text-gray-500 text-lg",children:"Bn cha c tin yu thch no"}),c.jsx("p",{className:"text-gray-400 mt-2",children:"Hy bt u lu cc bt ng sn bn quan tm"})]})}),!a&&c.jsx("div",{className:"flex justify-center pt-2",children:c.jsx(Rb,{currentPage:e,totalPages:n,onPageChange:A})})]})};var hP=["PageUp","PageDown"],fP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},og="Slider",[bw,uee,dee]=cb(og),[mP]=Cc(og,[dee]),[hee,$b]=mP(og),gP=k.forwardRef((e,t)=>{const{name:n,min:i=0,max:l=100,step:d=1,orientation:a="horizontal",disabled:g=!1,minStepsBetweenThumbs:x=0,defaultValue:_=[i],value:C,onValueChange:E=()=>{},onValueCommit:A=()=>{},inverted:D=!1,form:I,...L}=e,B=k.useRef(new Set),z=k.useRef(0),H=a==="horizontal"?fee:pee,[W=[],ne]=zh({prop:C,defaultProp:_,onChange:ye=>{[...B.current][z.current]?.focus(),E(ye)}}),re=k.useRef(W);function ee(ye){const Pe=xee(W,ye);we(ye,Pe)}function oe(ye){we(ye,z.current)}function he(){const ye=re.current[z.current];W[z.current]!==ye&&A(W)}function we(ye,Pe,{commit:Ke}={commit:!1}){const ze=See(d),Je=Eee(Math.round((ye-i)/d)*d+i,ze),Ae=D0(Je,[i,l]);ne((De=[])=>{const ke=yee(De,Ae,Pe);if(wee(ke,x*d)){z.current=ke.indexOf(Ae);const st=String(ke)!==String(De);return st&&Ke&&A(ke),st?ke:De}else return De})}return c.jsx(hee,{scope:e.__scopeSlider,name:n,disabled:g,min:i,max:l,valueIndexToChangeRef:z,thumbs:B.current,values:W,orientation:a,form:I,children:c.jsx(bw.Provider,{scope:e.__scopeSlider,children:c.jsx(bw.Slot,{scope:e.__scopeSlider,children:c.jsx(H,{"aria-disabled":g,"data-disabled":g?"":void 0,...L,ref:t,onPointerDown:Tn(L.onPointerDown,()=>{g||(re.current=W)}),min:i,max:l,inverted:D,onSlideStart:g?void 0:ee,onSlideMove:g?void 0:oe,onSlideEnd:g?void 0:he,onHomeKeyDown:()=>!g&&we(i,0,{commit:!0}),onEndKeyDown:()=>!g&&we(l,W.length-1,{commit:!0}),onStepKeyDown:({event:ye,direction:Pe})=>{if(!g){const Je=hP.includes(ye.key)||ye.shiftKey&&fP.includes(ye.key)?10:1,Ae=z.current,De=W[Ae],ke=d*Je*Pe;we(De+ke,Ae,{commit:!0})}}})})})})});gP.displayName=og;var[yP,vP]=mP(og,{startEdge:"left",endEdge:"right",size:"width",direction:1}),fee=k.forwardRef((e,t)=>{const{min:n,max:i,dir:l,inverted:d,onSlideStart:a,onSlideMove:g,onSlideEnd:x,onStepKeyDown:_,...C}=e,[E,A]=k.useState(null),D=Vr(t,H=>A(H)),I=k.useRef(void 0),L=xv(l),B=L==="ltr",z=B&&!d||!B&&d;function q(H){const W=I.current||E.getBoundingClientRect(),ne=[0,W.width],ee=SS(ne,z?[n,i]:[i,n]);return I.current=W,ee(H-W.left)}return c.jsx(yP,{scope:e.__scopeSlider,startEdge:z?"left":"right",endEdge:z?"right":"left",direction:z?1:-1,size:"width",children:c.jsx(xP,{dir:L,"data-orientation":"horizontal",...C,ref:D,style:{...C.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:H=>{const W=q(H.clientX);a?.(W)},onSlideMove:H=>{const W=q(H.clientX);g?.(W)},onSlideEnd:()=>{I.current=void 0,x?.()},onStepKeyDown:H=>{const ne=pP[z?"from-left":"from-right"].includes(H.key);_?.({event:H,direction:ne?-1:1})}})})}),pee=k.forwardRef((e,t)=>{const{min:n,max:i,inverted:l,onSlideStart:d,onSlideMove:a,onSlideEnd:g,onStepKeyDown:x,..._}=e,C=k.useRef(null),E=Vr(t,C),A=k.useRef(void 0),D=!l;function I(L){const B=A.current||C.current.getBoundingClientRect(),z=[0,B.height],H=SS(z,D?[i,n]:[n,i]);return A.current=B,H(L-B.top)}return c.jsx(yP,{scope:e.__scopeSlider,startEdge:D?"bottom":"top",endEdge:D?"top":"bottom",size:"height",direction:D?1:-1,children:c.jsx(xP,{"data-orientation":"vertical",..._,ref:E,style:{..._.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:L=>{const B=I(L.clientY);d?.(B)},onSlideMove:L=>{const B=I(L.clientY);a?.(B)},onSlideEnd:()=>{A.current=void 0,g?.()},onStepKeyDown:L=>{const z=pP[D?"from-bottom":"from-top"].includes(L.key);x?.({event:L,direction:z?-1:1})}})})}),xP=k.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:l,onSlideEnd:d,onHomeKeyDown:a,onEndKeyDown:g,onStepKeyDown:x,..._}=e,C=$b(og,n);return c.jsx(gr.span,{..._,ref:t,onKeyDown:Tn(e.onKeyDown,E=>{E.key==="Home"?(a(E),E.preventDefault()):E.key==="End"?(g(E),E.preventDefault()):hP.concat(fP).includes(E.key)&&(x(E),E.preventDefault())}),onPointerDown:Tn(e.onPointerDown,E=>{const A=E.target;A.setPointerCapture(E.pointerId),E.preventDefault(),C.thumbs.has(A)?A.focus():i(E)}),onPointerMove:Tn(e.onPointerMove,E=>{E.target.hasPointerCapture(E.pointerId)&&l(E)}),onPointerUp:Tn(e.onPointerUp,E=>{const A=E.target;A.hasPointerCapture(E.pointerId)&&(A.releasePointerCapture(E.pointerId),d(E))})})}),bP="SliderTrack",_P=k.forwardRef((e,t)=>{const{__scopeSlider:n,...i}=e,l=$b(bP,n);return c.jsx(gr.span,{"data-disabled":l.disabled?"":void 0,"data-orientation":l.orientation,...i,ref:t})});_P.displayName=bP;var _w="SliderRange",wP=k.forwardRef((e,t)=>{const{__scopeSlider:n,...i}=e,l=$b(_w,n),d=vP(_w,n),a=k.useRef(null),g=Vr(t,a),x=l.values.length,_=l.values.map(A=>CP(A,l.min,l.max)),C=x>1?Math.min(..._):0,E=100-Math.max(..._);return c.jsx(gr.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...i,ref:g,style:{...e.style,[d.startEdge]:C+"%",[d.endEdge]:E+"%"}})});wP.displayName=_w;var ww="SliderThumb",SP=k.forwardRef((e,t)=>{const n=uee(e.__scopeSlider),[i,l]=k.useState(null),d=Vr(t,g=>l(g)),a=k.useMemo(()=>i?n().findIndex(g=>g.ref.current===i):-1,[n,i]);return c.jsx(mee,{...e,ref:d,index:a})}),mee=k.forwardRef((e,t)=>{const{__scopeSlider:n,index:i,name:l,...d}=e,a=$b(ww,n),g=vP(ww,n),[x,_]=k.useState(null),C=Vr(t,q=>_(q)),E=x?a.form||!!x.closest("form"):!0,A=s2(x),D=a.values[i],I=D===void 0?0:CP(D,a.min,a.max),L=vee(i,a.values.length),B=A?.[g.size],z=B?bee(B,I,g.direction):0;return k.useEffect(()=>{if(x)return a.thumbs.add(x),()=>{a.thumbs.delete(x)}},[x,a.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[g.startEdge]:`calc(${I}% + ${z}px)`},children:[c.jsx(bw.ItemSlot,{scope:e.__scopeSlider,children:c.jsx(gr.span,{role:"slider","aria-label":e["aria-label"]||L,"aria-valuemin":a.min,"aria-valuenow":D,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...d,ref:C,style:D===void 0?{display:"none"}:e.style,onFocus:Tn(e.onFocus,()=>{a.valueIndexToChangeRef.current=i})})}),E&&c.jsx(EP,{name:l??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:D},i)]})});SP.displayName=ww;var gee="RadioBubbleInput",EP=k.forwardRef(({__scopeSlider:e,value:t,...n},i)=>{const l=k.useRef(null),d=Vr(l,i),a=q2(t);return k.useEffect(()=>{const g=l.current;if(!g)return;const x=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(x,"value").set;if(a!==t&&C){const E=new Event("input",{bubbles:!0});C.call(g,t),g.dispatchEvent(E)}},[a,t]),c.jsx(gr.input,{style:{display:"none"},...n,ref:d,defaultValue:t})});EP.displayName=gee;function yee(e=[],t,n){const i=[...e];return i[n]=t,i.sort((l,d)=>l-d)}function CP(e,t,n){const d=100/(n-t)*(e-t);return D0(d,[0,100])}function vee(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function xee(e,t){if(e.length===1)return 0;const n=e.map(l=>Math.abs(l-t)),i=Math.min(...n);return n.indexOf(i)}function bee(e,t,n){const i=e/2,d=SS([0,50],[0,i]);return(i-d(t)*n)*n}function _ee(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function wee(e,t){if(t>0){const n=_ee(e);return Math.min(...n)>=t}return!0}function SS(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const i=(t[1]-t[0])/(e[1]-e[0]);return t[0]+i*(n-e[0])}}function See(e){return(String(e).split(".")[1]||"").length}function Eee(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Cee=gP,Tee=_P,kee=wP,jee=SP;function zf({className:e,defaultValue:t,value:n,min:i=0,max:l=100,...d}){const a=k.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[i,l],[n,t,i,l]);return c.jsxs(Cee,{"data-slot":"slider",defaultValue:t,value:n,min:i,max:l,className:Kt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...d,children:[c.jsx(Tee,{"data-slot":"slider-track",className:Kt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:c.jsx(kee,{"data-slot":"slider-range",className:Kt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(g,x)=>c.jsx(jee,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},x))]})}var Gb="Tabs",[Aee]=Cc(Gb,[vb]),TP=vb(),[Nee,ES]=Aee(Gb),kP=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:l,defaultValue:d,orientation:a="horizontal",dir:g,activationMode:x="automatic",..._}=e,C=xv(g),[E,A]=zh({prop:i,onChange:l,defaultProp:d??"",caller:Gb});return c.jsx(Nee,{scope:n,baseId:gu(),value:E,onValueChange:A,orientation:a,dir:C,activationMode:x,children:c.jsx(gr.div,{dir:C,"data-orientation":a,..._,ref:t})})});kP.displayName=Gb;var jP="TabsList",AP=k.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...l}=e,d=ES(jP,n),a=TP(n);return c.jsx(aN,{asChild:!0,...a,orientation:d.orientation,dir:d.dir,loop:i,children:c.jsx(gr.div,{role:"tablist","aria-orientation":d.orientation,...l,ref:t})})});AP.displayName=jP;var NP="TabsTrigger",MP=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:l=!1,...d}=e,a=ES(NP,n),g=TP(n),x=IP(a.baseId,i),_=OP(a.baseId,i),C=i===a.value;return c.jsx(oN,{asChild:!0,...g,focusable:!l,active:C,children:c.jsx(gr.button,{type:"button",role:"tab","aria-selected":C,"aria-controls":_,"data-state":C?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:x,...d,ref:t,onMouseDown:Tn(e.onMouseDown,E=>{!l&&E.button===0&&E.ctrlKey===!1?a.onValueChange(i):E.preventDefault()}),onKeyDown:Tn(e.onKeyDown,E=>{[" ","Enter"].includes(E.key)&&a.onValueChange(i)}),onFocus:Tn(e.onFocus,()=>{const E=a.activationMode!=="manual";!C&&!l&&E&&a.onValueChange(i)})})})});MP.displayName=NP;var DP="TabsContent",PP=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:l,children:d,...a}=e,g=ES(DP,n),x=IP(g.baseId,i),_=OP(g.baseId,i),C=i===g.value,E=k.useRef(C);return k.useEffect(()=>{const A=requestAnimationFrame(()=>E.current=!1);return()=>cancelAnimationFrame(A)},[]),c.jsx(ju,{present:l||C,children:({present:A})=>c.jsx(gr.div,{"data-state":C?"active":"inactive","data-orientation":g.orientation,role:"tabpanel","aria-labelledby":x,hidden:!A,id:_,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:E.current?"0s":void 0},children:A&&d})})});PP.displayName=DP;function IP(e,t){return`${e}-trigger-${t}`}function OP(e,t){return`${e}-content-${t}`}var Mee=kP,Dee=AP,Pee=MP,Iee=PP;function Oee({className:e,...t}){return c.jsx(Mee,{"data-slot":"tabs",className:Kt("flex flex-col gap-2",e),...t})}function Ree({className:e,...t}){return c.jsx(Dee,{"data-slot":"tabs-list",className:Kt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Ok({className:e,...t}){return c.jsx(Pee,{"data-slot":"tabs-trigger",className:Kt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Rk({className:e,...t}){return c.jsx(Iee,{"data-slot":"tabs-content",className:Kt("flex-1 outline-none",e),...t})}const Lee=[{key:"preferenceSafety",label:"An ninh",icon:cv,color:"bg-orange-100 text-orange-600",barColor:"bg-orange-500"},{key:"preferenceHealthcare",label:"Y t",icon:bc,color:"bg-red-100 text-red-600",barColor:"bg-red-500"},{key:"preferenceEducation",label:"Gio dc",icon:Zm,color:"bg-purple-100 text-purple-600",barColor:"bg-purple-500"},{key:"preferenceShopping",label:"Tin ch",icon:uv,color:"bg-green-100 text-green-600",barColor:"bg-green-500"},{key:"preferenceTransportation",label:"Giao thng",icon:ov,color:"bg-yellow-100 text-yellow-600",barColor:"bg-yellow-500"},{key:"preferenceEnvironment",label:"Mi trng",icon:sv,color:"bg-teal-100 text-teal-600",barColor:"bg-teal-500"},{key:"preferenceEntertainment",label:"Gii tr",icon:lv,color:"bg-pink-100 text-pink-600",barColor:"bg-pink-500"}],zee=({preset:e,isSelected:t=!1,onSelect:n})=>c.jsxs("div",{onClick:n,className:Kt("bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 cursor-pointer group","hover:shadow-xl hover:-translate-y-1",t&&"ring-4 ring-[#008DDA] shadow-xl"),children:[c.jsxs("div",{className:"relative h-40 overflow-hidden",children:[c.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:c.jsx("h3",{className:"text-xl font-bold text-white drop-shadow-lg",children:e.name})}),t&&c.jsx("div",{className:"absolute top-3 right-3 bg-[#008DDA] text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg",children:"  chn"})]}),c.jsxs("div",{className:"p-5 space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600 leading-relaxed min-h-[60px]",children:e.description}),c.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"u tin ca mu ny:"}),Lee.map(i=>{const l=e[i.key],d=i.icon;return c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:Kt("w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0",i.color),children:c.jsx(d,{className:"w-4 h-4"})}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:i.label})]}),c.jsxs("span",{className:"text-xs font-semibold text-gray-500",children:[l,"%"]})]}),c.jsx("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:c.jsx("div",{className:Kt("h-full rounded-full transition-all duration-500",i.barColor),style:{width:`${l}%`}})})]},i.key)})]}),c.jsx("div",{className:"pt-2",children:c.jsx("div",{className:Kt("text-center py-2 rounded-lg font-medium text-sm transition-colors duration-200",t?"bg-[#008DDA] text-white":"bg-gray-100 text-gray-600 group-hover:bg-[#008DDA] group-hover:text-white"),children:t?"ang s dng mu ny":"Chn mu ny"})})]})]}),Bee=async()=>(await zi.get("user/preference-presets")).data,RP=k.forwardRef(({className:e,checked:t,onCheckedChange:n,onChange:i,...l},d)=>{const a=g=>{i?.(g),n?.(g.target.checked)};return c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",ref:d,checked:t,onChange:a,...l}),c.jsx("div",{className:Kt("w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#008DDA]",e)})]})});RP.displayName="Switch";const Fee="https://kltn-api-staging.sonata.io.vn/api/v1/location/ping",Uee=async(e,t)=>{try{const n=Li.getState().token;if(!n){console.warn(" No access token found. Cannot send location.");return}const i=await Di.post(Fee,{latitude:e,longitude:t},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});console.log(" Location sent successfully:",i.data)}catch(n){console.error(" Failed to send location:",n)}},Lk=up("BackgroundGeolocation"),xy="is_location_tracking_enabled",Vee=()=>{const[e,t]=k.useState(()=>localStorage.getItem(xy)==="true"),n=k.useRef(null),i=async()=>{try{const a=await Lk.addWatcher({backgroundMessage:"ang tm kim BS ph hp gn bn...",backgroundTitle:"Real Estate Tracker",requestPermissions:!0,stale:!1,distanceFilter:2},(g,x)=>{if(x){x.code==="NOT_AUTHORIZED"&&console.error("Location permission missing");return}g&&(console.log(" Location update:",g.latitude,g.longitude),Uee(g.latitude,g.longitude))});return n.current=a,!0}catch(a){return console.error("Failed to add watcher:",a),!1}},l=async()=>{if(!Cu.isNativePlatform()){mn.warning("Tnh nng ny ch hot ng trn Mobile App!");return}if(n.current)return;await i()?(t(!0),localStorage.setItem(xy,"true"),mn.success(" bt theo di v tr nn!")):mn.error("Khng th khi ng theo di v tr.")},d=async()=>{n.current&&(await Lk.removeWatcher({id:n.current}),n.current=null),t(!1),localStorage.removeItem(xy),mn.info(" tt theo di.")};return k.useEffect(()=>(localStorage.getItem(xy)==="true"&&Cu.isNativePlatform()&&!n.current&&(console.log(" Restoring background tracking from storage..."),i().then(g=>{g?t(!0):(t(!1),localStorage.removeItem(xy))})),()=>{}),[]),{isTracking:e,startTracking:l,stopTracking:d}},qee=()=>{const e=Ta(),[t,n]=k.useState(!0),[i,l]=k.useState(!1),[d,a]=k.useState(null),[g,x]=k.useState(null),[_,C]=k.useState(null),[E,A]=k.useState([]),[D,I]=k.useState(!0),[L,B]=k.useState(""),[z,q]=k.useState(""),[H,W]=k.useState(""),[ne,re]=k.useState(""),[ee,oe]=k.useState({safety:50,healthcare:50,education:50,shopping:50,transportation:50,environment:50,entertainment:50}),he=Li(Oe=>Oe.setUserInfo),we=Li(Oe=>Oe.userId),{isTracking:ye,startTracking:Pe,stopTracking:Ke}=Vee(),[ze,Je]=k.useState([]),[Ae,De]=k.useState(!1),[ke,st]=k.useState(!1),[me,Ce]=k.useState(-1),[pe,Q]=k.useState(!1),Ee=k.useRef(null),Ge=k.useRef(null),lt=k.useRef(""),We=k.useRef(!1),Nt=async()=>{try{I(!0);const Le=(await Bee()).data.map(Qe=>({id:String(Qe.id),name:Qe.name,image:Qe.image,description:Qe.description,preferenceSafety:Math.round((Qe.preferenceSafety??.5)*100),preferenceHealthcare:Math.round((Qe.preferenceHealthcare??.5)*100),preferenceEducation:Math.round((Qe.preferenceEducation??.5)*100),preferenceShopping:Math.round((Qe.preferenceShopping??.5)*100),preferenceTransportation:Math.round((Qe.preferenceTransportation??.5)*100),preferenceEnvironment:Math.round((Qe.preferenceEnvironment??.5)*100),preferenceEntertainment:Math.round((Qe.preferenceEntertainment??.5)*100)}));console.log("Processed presets:",Le),A(Le)}catch(Oe){console.error("Error fetching presets:",Oe),mn.error("Khng th ti danh sch b u tin!")}finally{I(!1)}},At=async()=>{try{n(!0);const Oe=await EA();B(Oe?.data.fullName),q(Oe?.data.email),W(Oe?.data.phoneNumber),re(Oe?.data.liveAddress),a(Oe?.data.avatarUrl),he(we,Oe?.data.avatarUrl,Oe?.data.becomeSellerApproveStatus),oe({safety:Math.round((Oe?.data.preferenceSafety??.5)*100),healthcare:Math.round((Oe?.data.preferenceHealthcare??.5)*100),education:Math.round((Oe?.data.preferenceEducation??.5)*100),shopping:Math.round((Oe?.data.preferenceShopping??.5)*100),transportation:Math.round((Oe?.data.preferenceTransportation??.5)*100),environment:Math.round((Oe?.data.preferenceEnvironment??.5)*100),entertainment:Math.round((Oe?.data.preferenceEntertainment??.5)*100)});const Le=Oe?.data.preferencePresetId;if(Le!=null){const Qe=String(Le);console.log("Setting selectedPresetId to:",Qe),C(Qe)}else console.log("No preferencePresetId found in response (null or undefined)"),C(null)}catch(Oe){console.log(Oe)}finally{n(!1)}},Mt=bu({defaultValues:{fullName:L,email:z,phoneNumber:H,address:ne},mode:"onSubmit"}),Ut=bu({defaultValues:{safety:ee.safety,healthcare:ee.healthcare,education:ee.education,shopping:ee.shopping,transportation:ee.transportation,environment:ee.environment,entertainment:ee.entertainment},mode:"onChange"});k.useEffect(()=>{At(),Nt()},[]),k.useEffect(()=>{(L||z||H||ne)&&Mt.reset({fullName:L,email:z,phoneNumber:H,address:ne})},[L,z,H,ne]),k.useEffect(()=>{ee.safety!==void 0&&Ut.reset({safety:ee.safety,healthcare:ee.healthcare,education:ee.education,shopping:ee.shopping,transportation:ee.transportation,environment:ee.environment,entertainment:ee.entertainment})},[ee.safety,ee.healthcare,ee.education,ee.shopping,ee.transportation,ee.environment,ee.entertainment]);const Pt=Mt.watch("address"),[Rt]=ig(Pt,300);k.useEffect(()=>{const Oe=Le=>{Ee.current&&!Ee.current.contains(Le.target)&&Ge.current&&!Ge.current.contains(Le.target)&&st(!1)};return document.addEventListener("mousedown",Oe),()=>document.removeEventListener("mousedown",Oe)},[]);const vn=k.useCallback(async Oe=>{De(!0);try{const Le=await zb(Oe,10);Le.predictions&&Le.predictions.length>0?(Je(Le.predictions),st(!0),Ce(-1)):(Je([]),st(!1))}catch(Le){console.error("Error fetching autocomplete:",Le),Je([])}finally{De(!1)}},[]);k.useEffect(()=>{if(!pe)return;const Oe=Rt.trim();if(!Oe||Oe.length<3){Je([]),st(!1),lt.current="";return}Oe!==lt.current&&(lt.current=Oe,vn(Oe))},[Rt,vn,pe]);const er=Oe=>{Mt.setValue("address",Oe.description),st(!1),Je([])},$n=Oe=>{if(!(!ke||ze.length===0))switch(Oe.key){case"ArrowDown":Oe.preventDefault(),Ce(Le=>Le<ze.length-1?Le+1:Le);break;case"ArrowUp":Oe.preventDefault(),Ce(Le=>Le>0?Le-1:-1);break;case"Enter":me>=0&&(Oe.preventDefault(),er(ze[me]));break;case"Escape":st(!1);break}},ir=Ut.watch();k.useEffect(()=>{if(!We.current&&_){const Oe=E.find(Le=>Le.id===_);Oe&&(ir.safety!==Oe.preferenceSafety||ir.healthcare!==Oe.preferenceHealthcare||ir.education!==Oe.preferenceEducation||ir.shopping!==Oe.preferenceShopping||ir.transportation!==Oe.preferenceTransportation||ir.environment!==Oe.preferenceEnvironment||ir.entertainment!==Oe.preferenceEntertainment)&&C(null)}},[ir,_]);const dt=Oe=>Oe===0?"Khng quan trng":Oe<=25?"t quan trng":Oe<=50?"Bnh thng":Oe<=75?"Quan trng":"Rt quan trng",Xe=Oe=>Oe===0?"text-gray-400":Oe<=25?"text-gray-500":Oe<=50?"text-black":Oe<=75?"text-orange-500":"text-[#008DDA]",xe=Oe=>{const Le=Oe.target.files?.[0];if(Le){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(Le.type)){mn.error("Ch chp nhn file .png, .jpg, .jpeg, .webp");return}if(Le.size>5*1024*1024){mn.error("Kch thc nh khng c vt qu 5MB");return}x(Le);const Tt=new FileReader;Tt.onloadend=()=>{a(Tt.result)},Tt.readAsDataURL(Le)}},Re=Oe=>{We.current=!0,C(Oe);const Le=E.find(Qe=>Qe.id===Oe);Le&&(Ut.setValue("safety",Le.preferenceSafety),Ut.setValue("healthcare",Le.preferenceHealthcare),Ut.setValue("education",Le.preferenceEducation),Ut.setValue("shopping",Le.preferenceShopping),Ut.setValue("transportation",Le.preferenceTransportation),Ut.setValue("environment",Le.preferenceEnvironment),Ut.setValue("entertainment",Le.preferenceEntertainment)),setTimeout(()=>{We.current=!1},100)},Ve=()=>{C(null),Ut.reset({safety:50,healthcare:50,education:50,shopping:50,transportation:50,environment:50,entertainment:50})},Vt=async()=>{try{l(!0);const Oe=Mt.getValues(),Le=Ut.getValues();let Qe=d||void 0;if(g)try{Qe=(await wS(g)).data.mediaUrl}catch(Tt){console.error("Error uploading avatar:",Tt),mn.error("Khng th ti nh ln. Vui lng th li!"),l(!1);return}await T6({fullName:Oe.fullName,avatarUrl:Qe,liveAddress:Oe.address,preferencePresetId:_?Number(_):null,preferenceSafety:Le.safety/100,preferenceHealthcare:Le.healthcare/100,preferenceEducation:Le.education/100,preferenceShopping:Le.shopping/100,preferenceTransportation:Le.transportation/100,preferenceEnvironment:Le.environment/100,preferenceEntertainment:Le.entertainment/100}),mn.success("Cp nht thng tin thnh cng!"),await At(),x(null)}catch(Oe){console.error("Error updating profile:",Oe);const Le=Oe?.response?.data?.error||"C li xy ra khi cp nht thng tin!";mn.error(Le)}finally{l(!1)}};return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"H s c nhn"}),c.jsx("div",{className:"flex flex-col sm:flex-row items-center gap-6 mb-8 pb-6 border-b",children:t?c.jsxs(c.Fragment,{children:[c.jsx(Xt,{className:"w-32 h-32 rounded-full"}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx(Xt,{className:"h-10 w-32"}),c.jsx(Xt,{className:"h-4 w-48"})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"relative",children:c.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-4 border-gray-200 flex items-center justify-center",children:d?c.jsx("img",{src:d,alt:"Avatar preview",className:"w-full h-full object-cover"}):c.jsx(dv,{className:"w-16 h-16 text-gray-400"})})}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("input",{type:"file",id:"avatar-upload",accept:".png,.jpg,.jpeg,.webp",onChange:xe,className:"hidden"}),c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx("label",{htmlFor:"avatar-upload",children:c.jsxs(Nr,{type:"button",variant:"outline",className:"cursor-pointer",onClick:()=>document.getElementById("avatar-upload")?.click(),children:[c.jsx(Zw,{className:"w-4 h-4 mr-2"}),"Ti nh"]})}),c.jsx("p",{className:"text-xs text-gray-500",children:"Chp nhn: PNG, JPG, JPEG, WEBP"})]})]})]})}),t?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Xt,{className:"h-4 w-20"}),c.jsx(Xt,{className:"h-10 w-full"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Xt,{className:"h-4 w-20"}),c.jsx(Xt,{className:"h-10 w-full"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Xt,{className:"h-4 w-28"}),c.jsx(Xt,{className:"h-10 w-full"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Xt,{className:"h-4 w-16"}),c.jsx(Xt,{className:"h-10 w-full"})]}),c.jsx("div",{className:"pt-4",children:c.jsx(Xt,{className:"h-10 w-32"})})]}):c.jsx(_u,{...Mt,children:c.jsxs("form",{className:"space-y-6",children:[c.jsx(Sn,{control:Mt.control,name:"fullName",render:({field:Oe})=>c.jsxs(En,{children:[c.jsx(An,{children:"H tn"}),c.jsx(Cn,{children:c.jsx(Dr,{className:"focus-visible:ring-[#008DDA]",...Oe})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:Mt.control,name:"email",rules:{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email khng ng nh dng"}},render:({field:Oe})=>c.jsxs(En,{children:[c.jsx(An,{children:"Email"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"email",disabled:!0,className:"focus-visible:ring-[#008DDA]",...Oe})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:Mt.control,name:"phoneNumber",rules:{pattern:{value:/^[0-9]{10}$/,message:"S in thoi phi gm ng 10 ch s"}},render:({field:Oe})=>c.jsxs(En,{children:[c.jsx(An,{children:"S in thoi"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"tel",disabled:!0,className:"focus-visible:ring-[#008DDA] cursor-not-allowed",maxLength:10,...Oe})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:Mt.control,name:"address",render:({field:Oe})=>c.jsxs(En,{children:[c.jsx(An,{children:"a ch"}),c.jsx(Cn,{children:c.jsxs("div",{className:"relative",children:[c.jsx(Dr,{className:"focus-visible:ring-[#008DDA]",...Oe,ref:Le=>{Oe.ref(Le),Ge.current=Le},onKeyDown:$n,onFocus:()=>Q(!0),onChange:Le=>{Q(!0),Oe.onChange(Le)},autoComplete:"off"}),Ae&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:c.jsx(xs,{className:"w-4 h-4 animate-spin text-[#008DDA]"})}),ke&&ze.length>0&&c.jsx("div",{ref:Ee,className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ze.map((Le,Qe)=>c.jsxs("div",{className:Kt("px-4 py-2 cursor-pointer hover:bg-gray-100 transition-colors",me===Qe&&"bg-gray-100"),onClick:()=>er(Le),children:[c.jsx("div",{className:"text-sm text-gray-900",children:Le.structured_formatting?.main_text||Le.description}),Le.structured_formatting?.secondary_text&&c.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Le.structured_formatting.secondary_text})]},Le.place_id))})]})}),c.jsx(Vn,{})]})})]})})]}),Cu.isNativePlatform()&&c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1 pr-4",children:[c.jsxs("h2",{className:"text-xl sm:text-2xl font-semibold flex items-center gap-2",children:[c.jsx(bs,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#008DDA]"}),"Ci t theo di v tr"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Bt tnh nng ny  nhn thng bo v cc bt ng sn ph hp khi bn i ngang qua. ng dng s s dng v tr nn tit kim pin."})]}),c.jsx(RP,{checked:ye,onCheckedChange:Oe=>{Oe?Pe():Ke()}})]})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 sm:hidden",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:"Mt khu"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Thay i mt khu  bo mt ti khon ca bn"}),c.jsx(Nr,{type:"button",onClick:()=>e("/doi-mat-khau"),className:"cursor-pointer w-full transition-colors duration-200 bg-[#008DDA] hover:bg-[#0064A6]",children:"i mt khu"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Ci t u tin"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Hy cho chng ti bit iu g l quan trng nht vi bn. H thng s s dng cc u tin ny  tnh ton v gi  cc bt ng sn ph hp nht vi bn."}),t||D?c.jsxs("div",{className:"space-y-6",children:[c.jsx(Xt,{className:"h-10 w-full"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Xt,{className:"h-64 w-full"}),c.jsx(Xt,{className:"h-64 w-full"}),c.jsx(Xt,{className:"h-64 w-full"}),c.jsx(Xt,{className:"h-64 w-full"})]})]}):c.jsxs(Oee,{defaultValue:"presets",className:"w-full",children:[c.jsxs(Ree,{className:"grid w-full grid-cols-2 mb-6",children:[c.jsx(Ok,{value:"presets",className:"cursor-pointer",children:"B c sn"}),c.jsx(Ok,{value:"custom",className:"cursor-pointer",children:"Ty chnh"})]}),c.jsxs(Rk,{value:"presets",className:"space-y-6",children:[c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-sm text-gray-600",children:'Chn mt mu u tin ph hp vi nhu cu ca bn. Bn c th chnh sa chi tit  tab "Ty chnh".'})}),E.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E.map(Oe=>{const Le=_===Oe.id;return console.log("Comparing preset.id:",Oe.id,"with selectedPresetId:",_,"Result:",Le),c.jsx(zee,{preset:Oe,isSelected:Le,onSelect:()=>Re(Oe.id)},Oe.id)})}):c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500",children:"Khng c b u tin no c tm thy."})}),_&&c.jsx("div",{className:"pt-6 border-t",children:c.jsxs("p",{className:"text-sm text-gray-600",children:[" chn:"," ",c.jsx("span",{className:"font-semibold text-[#008DDA]",children:E.find(Oe=>Oe.id===_)?.name})]})})]}),c.jsx(Rk,{value:"custom",children:c.jsx(_u,{...Ut,children:c.jsxs("form",{className:"space-y-8",children:[c.jsx(Sn,{control:Ut.control,name:"safety",render:({field:Oe})=>c.jsxs(En,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0",children:c.jsx(cv,{className:"w-5 h-5 text-orange-600"})}),c.jsxs("div",{children:[c.jsx(An,{className:"text-base font-semibold",children:"An ninh"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:" an ton ca khu vc, camera, bo v"})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("div",{className:`text-sm font-semibold ${Xe(Oe.value)}`,children:dt(Oe.value)}),c.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[Oe.value,"%"]})]})]}),c.jsx(Cn,{children:c.jsx(zf,{min:0,max:100,step:1,value:[Oe.value],onValueChange:Le=>Oe.onChange(Le[0]),className:"cursor-pointer"})})]})}),c.jsx(Sn,{control:Ut.control,name:"healthcare",render:({field:Oe})=>c.jsxs(En,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:c.jsx(bc,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx(An,{className:"text-base font-semibold",children:"Y t"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Bnh vin, phng khm gn khu vc"})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("div",{className:`text-sm font-semibold ${Xe(Oe.value)}`,children:dt(Oe.value)}),c.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[Oe.value,"%"]})]})]}),c.jsx(Cn,{children:c.jsx(zf,{min:0,max:100,step:1,value:[Oe.value],onValueChange:Le=>Oe.onChange(Le[0]),className:"cursor-pointer"})})]})}),c.jsx(Sn,{control:Ut.control,name:"education",render:({field:Oe})=>c.jsxs(En,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0",children:c.jsx(Zm,{className:"w-5 h-5 text-purple-600"})}),c.jsxs("div",{children:[c.jsx(An,{className:"text-base font-semibold",children:"Gio dc"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Trng hc, trung tm o to"})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("div",{className:`text-sm font-semibold ${Xe(Oe.value)}`,children:dt(Oe.value)}),c.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[Oe.value,"%"]})]})]}),c.jsx(Cn,{children:c.jsx(zf,{min:0,max:100,step:1,value:[Oe.value],onValueChange:Le=>Oe.onChange(Le[0]),className:"cursor-pointer"})})]})}),c.jsx(Sn,{control:Ut.control,name:"shopping",render:({field:Oe})=>c.jsxs(En,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0",children:c.jsx(uv,{className:"w-5 h-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx(An,{className:"text-base font-semibold",children:"Tin ch"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Ch, siu th, nh hng, ca hng"})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("div",{className:`text-sm font-semibold ${Xe(Oe.value)}`,children:dt(Oe.value)}),c.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[Oe.value,"%"]})]})]}),c.jsx(Cn,{children:c.jsx(zf,{min:0,max:100,step:1,value:[Oe.value],onValueChange:Le=>Oe.onChange(Le[0]),className:"cursor-pointer"})})]})}),c.jsx(Sn,{control:Ut.control,name:"transportation",render:({field:Oe})=>c.jsxs(En,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0",children:c.jsx(ov,{className:"w-5 h-5 text-yellow-600"})}),c.jsxs("div",{children:[c.jsx(An,{className:"text-base font-semibold",children:"Giao thng"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Xe but, metro, gn trc ng chnh"})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("div",{className:`text-sm font-semibold ${Xe(Oe.value)}`,children:dt(Oe.value)}),c.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[Oe.value,"%"]})]})]}),c.jsx(Cn,{children:c.jsx(zf,{min:0,max:100,step:1,value:[Oe.value],onValueChange:Le=>Oe.onChange(Le[0]),className:"cursor-pointer"})})]})}),c.jsx(Sn,{control:Ut.control,name:"environment",render:({field:Oe})=>c.jsxs(En,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-teal-100 flex items-center justify-center flex-shrink-0",children:c.jsx(sv,{className:"w-5 h-5 text-teal-600"})}),c.jsxs("div",{children:[c.jsx(An,{className:"text-base font-semibold",children:"Mi trng"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Cng vin, cy xanh, khng kh trong lnh"})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("div",{className:`text-sm font-semibold ${Xe(Oe.value)}`,children:dt(Oe.value)}),c.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[Oe.value,"%"]})]})]}),c.jsx(Cn,{children:c.jsx(zf,{min:0,max:100,step:1,value:[Oe.value],onValueChange:Le=>Oe.onChange(Le[0]),className:"cursor-pointer"})})]})}),c.jsx(Sn,{control:Ut.control,name:"entertainment",render:({field:Oe})=>c.jsxs(En,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center flex-shrink-0",children:c.jsx(lv,{className:"w-5 h-5 text-pink-600"})}),c.jsxs("div",{children:[c.jsx(An,{className:"text-base font-semibold",children:"Gii tr"}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Rp chiu phim, khu vui chi, gym"})]})]}),c.jsxs("div",{className:"text-right flex-shrink-0",children:[c.jsx("div",{className:`text-sm font-semibold ${Xe(Oe.value)}`,children:dt(Oe.value)}),c.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[Oe.value,"%"]})]})]}),c.jsx(Cn,{children:c.jsx(zf,{min:0,max:100,step:1,value:[Oe.value],onValueChange:Le=>Oe.onChange(Le[0]),className:"cursor-pointer"})})]})}),c.jsx("div",{className:"pt-4 border-t",children:c.jsx(Nr,{type:"button",variant:"outline",className:"cursor-pointer w-full sm:w-auto",onClick:Ve,children:"t li mc nh"})})]})})})]})]}),!t&&c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 sticky bottom-0 lg:flex lg:justify-end md:flex md:justify-end",children:c.jsx(Nr,{type:"button",onClick:Vt,disabled:i,className:"cursor-pointer w-full sm:w-auto transition-colors duration-200 bg-[#008DDA] hover:bg-[#0064A6] text-base px-8 py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:i?c.jsxs(c.Fragment,{children:[c.jsx(xs,{className:"w-5 h-5 mr-2 animate-spin inline"}),"ang lu..."]}):"Lu thay i"})})]})},Hee=()=>{const[e,t]=k.useState(!1),n=bu({defaultValues:{oldPassword:"",newPassword:"",confirmPassword:""},mode:"onSubmit"}),i=async l=>{try{t(!0),await k6({oldPassword:l.oldPassword,newPassword:l.newPassword}),mn.success("Mt khu  c thay i thnh cng!"),n.reset()}catch(d){console.error("Change password error:",d);const a=d?.response?.data?.error?.code,g=d?.response?.data?.error?.message;let x="i mt khu tht bi. Vui lng th li.";a==="PASSWORD_INCORRECT"?x="Mt khu hin ti khng ng. Vui lng kim tra li.":g&&(x=g),mn.error(x)}finally{t(!1)}};return c.jsx("div",{className:"max-w-2xl mx-auto my-20",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8",children:[c.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"i mt khu"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Vui lng nhp mt khu hin ti v mt khu mi ca bn"}),c.jsx(_u,{...n,children:c.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-6",children:[c.jsx(Sn,{control:n.control,name:"oldPassword",rules:{required:"Mt khu hin ti khng c  trng"},render:({field:l})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt khu hin ti"}),c.jsx(Cn,{children:c.jsx(Hf,{placeholder:"Nhp mt khu hin ti",className:"focus-visible:ring-[#008DDA]",...l})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:n.control,name:"newPassword",rules:{required:"Mt khu mi khng c  trng",minLength:{value:8,message:"Mt khu phi c t nht 8 k t"},maxLength:{value:30,message:"Mt khu ti a 30 k t"},validate:{hasDigit:l=>/\d/.test(l)||"Mt khu phi cha t nht 1 ch s",hasUppercase:l=>/[A-Z]/.test(l)||"Mt khu phi cha t nht 1 ch in hoa",noNewline:l=>!/[\n\r]/.test(l)||"Mt khu khng c cha k t xung dng"}},render:({field:l})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt khu mi"}),c.jsx(Cn,{children:c.jsx(Hf,{placeholder:"Nhp mt khu mi",className:"focus-visible:ring-[#008DDA]",...l})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:n.control,name:"confirmPassword",rules:{required:"Mt khu xc nhn khng c  trng",validate:l=>{const d=n.getValues("newPassword");return l===d||"Mt khu xc nhn khng khp"}},render:({field:l})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt khu xc nhn"}),c.jsx(Cn,{children:c.jsx(Hf,{placeholder:"Nhp li mt khu mi",className:"focus-visible:ring-[#008DDA]",...l})}),c.jsx(Vn,{})]})}),c.jsx("div",{className:"pt-4",children:c.jsx(Nr,{type:"submit",disabled:e,className:"cursor-pointer w-full sm:w-auto transition-colors duration-200 bg-[#008DDA] hover:bg-[#0064A6] disabled:opacity-50 disabled:cursor-not-allowed",children:e?"ang x l...":"Lu thay i"})})]})})]})})},$ee=({location:e,defaultZoom:t=15,height:n="100%",width:i="100%",mapStyle:l="https://tiles.goong.io/assets/goong_map_web.json",showNavigation:d=!0})=>{const[a,g]=k.useState({latitude:e.latitude,longitude:e.longitude,zoom:t,bearing:0,pitch:0}),[x]=k.useState(!1),[_]=k.useState(!1),C=x?"grabbing":_?"pointer":"default";return c.jsxs("div",{className:"relative",style:{width:i,height:n},children:[c.jsxs(Av,{...a,width:"100%",height:"100%",mapStyle:l,onViewportChange:g,goongApiAccessToken:"jxbjl5LdQr3AkflTqe77j5mPtDDrUl5Uke1CFScK",getCursor:()=>C,onResize:()=>{},touchAction:"pan-y",onClick:()=>{},children:[d&&c.jsx("div",{style:{position:"absolute",top:10,right:10},children:c.jsx(z4,{})}),c.jsx(L4,{latitude:e.latitude,longitude:e.longitude,offsetLeft:-25,offsetTop:-50,children:c.jsx(bs,{size:36,className:"text-red-600 fill-red-500 drop-shadow-2xl"})})]}),c.jsxs("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-xl p-4 max-w-sm border border-gray-200 hidden md:block",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"bg-red-500 rounded-full p-1.5",children:c.jsx(bs,{size:16,className:"text-white"})}),c.jsx("h4",{className:"font-bold text-sm text-gray-800",children:e.address})]}),c.jsxs("p",{className:"text-xs text-gray-600",children:[e.latitude,", ",e.longitude]}),c.jsx(Nr,{className:"mt-4 w-full cursor-pointer",onClick:()=>window.open(`https://www.google.com/maps/search/?api=1&query=${e.latitude},${e.longitude}`,"_blank"),children:"Xem bn  ln"})]})]})},Gee=()=>{const{id:e}=Aw(),[t,n]=k.useState(!1),[i,l]=k.useState(!1),[d,a]=k.useState(!1),[g,x]=k.useState(1),[_,C]=k.useState(),[E,A]=k.useState(null),[D,I]=k.useState(!0),[L,B]=k.useState(null),[z,q]=k.useState(!1),H=Li(pe=>pe.isLoggedIn),{switchToInsight:W}=w2(),{loadHistory:ne}=S2(),re=Wi(pe=>pe.setIsOpen),[ee,oe]=k.useState([]),[he,we]=k.useState(!1),[ye,Pe]=k.useState(""),[Ke,ze]=k.useState(!1);k.useEffect(()=>{(async()=>{if(e)try{I(!0);const Q=await lD(e);A(Q.data)}catch(Q){console.error("Error fetching property details:",Q)}finally{I(!1)}})()},[e]),k.useEffect(()=>{(async()=>{if(!(!H||!E?.id))try{l(!0);const Q=await lb(E.id);Q.status==="200"&&Q.data!==void 0&&n(Q.data)}catch(Q){console.error("Error checking if property is liked:",Q)}finally{l(!1)}})()},[H,E?.id]),k.useEffect(()=>{(async()=>{if(E?.id)try{q(!0);const Q=await cG({propertyIds:[E.id]});Q.status==="200"&&Q.data?.items?.length>0&&B(Q.data.items[0])}catch(Q){console.error("Error fetching livability score:",Q)}finally{q(!1)}})()},[E?.id]),k.useEffect(()=>{(async()=>{if(E?.id)try{ze(!0),Pe("");let Q="";await RV(E.id,Ee=>{Ee.type==="content"&&Ee.text&&(Q+=Ee.text)},()=>{Pe(Q),ze(!1)},Ee=>{console.error("Error fetching property insight:",Ee),ze(!1)})}catch(Q){console.error("Error fetching property insight:",Q),ze(!1)}})()},[E?.id]);const Je=E?{latitude:E.location.coordinates[1],longitude:E.location.coordinates[0],address:`${E.addressStreet||""}, ${E.addressWard||""}, ${E.addressDistrict||""}, ${E.addressCity||""}`.trim()}:null,Ae=pe=>{navigator.clipboard.writeText(pe),mn.success(" copy s in thoi!")},De=async()=>{if(E?.id&&!d)try{a(!0),t?(await vv(E.id)).status==="200"&&(n(!1),mn.success(" b yu thch!")):(await sb(E.id)).status==="200"&&(n(!0),mn.success(" thm vo yu thch!"))}catch(pe){console.error("Error toggling favorite:",pe),mn.error("C li xy ra. Vui lng th li!")}finally{a(!1)}},ke=async()=>{if(E?.id)try{W(E.id),await ne("insight",{propertyId:E.id}),re(!0)}catch(pe){console.error("Failed to open chat:",pe),mn.error("Khng th m chat. Vui lng th li.")}},st=[{key:"score_safety",label:"An ninh",icon:cv,color:"#3b82f6"},{key:"score_healthcare",label:"Y t",icon:bc,color:"#ef4444"},{key:"score_education",label:"Gio dc",icon:Zm,color:"#8b5cf6"},{key:"score_shopping",label:"Tin ch",icon:uv,color:"#22c55e"},{key:"score_transportation",label:"Giao thng",icon:ov,color:"#eab308"},{key:"score_environment",label:"Mi trng",icon:sv,color:"#14b8a6"},{key:"score_entertainment",label:"Gii tr",icon:lv,color:"#ec4899"}],me=pe=>{const Q=Id.find(Ee=>Ee.id===pe);return Q?Q.name:pe},Ce=k.useCallback(async()=>{if(E?.id)try{we(!0);const pe=await lG(E.id,6,20);if(pe.status==="200"&&pe.data?.items){const Q=pe.data.items.map(Ee=>({id:Ee.id,title:Ee.title,price:Ee.price,priceUnit:Ee.price_unit,area:Ee.area,addressDistrict:Ee.address.split(",").map(Ge=>Ge.trim()).find(Ge=>Ge.includes("Qun")||Ge.includes("Huyn"))||"",addressStreet:Ee.address.split(",")[0]?.trim()||"",addressWard:Ee.address.split(",").map(Ge=>Ge.trim()).find(Ge=>Ge.includes("Phng")||Ge.includes("X"))||"",addressCity:"TPHCM",numBedrooms:Ee.num_bedrooms,numBathrooms:Ee.num_bathrooms,imageUrls:Ee.thumbnail_url?[Ee.thumbnail_url]:[],listingType:"for_sale",propertyType:"house",approvalStatus:"APPROVED",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:0,location:{type:"Point",coordinates:[0,0]}}));oe(Q)}else oe([])}catch(pe){console.error("Error fetching recommended properties:",pe),oe([])}finally{we(!1)}},[E?.id]);return Bt.useEffect(()=>{if(!_)return;const pe=()=>{x(_.selectedScrollSnap()+1)};return _.on("select",pe),pe(),()=>{_.off("select",pe)}},[_]),k.useEffect(()=>{Ce()},[Ce]),D||!E?c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 lg:w-3/4 space-y-6",children:[c.jsx(Xt,{className:"w-full aspect-video rounded-lg"}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[c.jsx(Xt,{className:"h-8 w-3/4"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsxs("div",{className:"flex gap-6 pt-4 border-t",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Xt,{className:"h-4 w-20"}),c.jsx(Xt,{className:"h-10 w-32"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Xt,{className:"h-4 w-20"}),c.jsx(Xt,{className:"h-10 w-24"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-3",children:[c.jsx(Xt,{className:"h-6 w-48"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsx(Xt,{className:"h-4 w-3/4"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[c.jsx(Xt,{className:"h-6 w-56"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:[...Array(10)].map((pe,Q)=>c.jsx(Xt,{className:"h-12 w-full"},Q))})]})]}),c.jsx("div",{className:"lg:w-1/4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:[c.jsx(Xt,{className:"h-6 w-32"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Xt,{className:"w-16 h-16 rounded-full"}),c.jsxs("div",{className:"space-y-2 flex-1",children:[c.jsx(Xt,{className:"h-4 w-24"}),c.jsx(Xt,{className:"h-3 w-20"})]})]}),c.jsx(Xt,{className:"h-12 w-full"})]})})]})})}):c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[c.jsxs("div",{className:"flex-1 lg:w-3/4 space-y-6",children:[c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsx(Gy,{setApi:C,opts:{align:"start",loop:!1},className:"w-full",children:c.jsxs("div",{className:"relative",children:[c.jsx(Zy,{children:E.imageUrls?.map((pe,Q)=>c.jsx(Xy,{children:c.jsxs("div",{className:"relative aspect-video",children:[c.jsx("img",{src:pe,alt:`${E.title} - nh ${Q+1}`,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/60 text-white px-3 py-1.5 rounded-lg text-sm font-medium",children:[g,"/",E.imageUrls?.length]})]})},Q))}),c.jsx(Ky,{className:"left-4 cursor-pointer"}),c.jsx(Yy,{className:"right-4 cursor-pointer"})]})})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4",children:E.title}),c.jsxs("div",{className:"flex items-start gap-2 text-gray-600 mb-4",children:[c.jsx(bs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-base",children:Je?.address})]}),c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 pt-4 border-t",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Mc gi"}),c.jsx("p",{className:"text-3xl font-bold text-[#008DDA]",children:op(E.price)})]}),c.jsx("div",{className:"h-12 w-px bg-gray-200"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Din tch"}),c.jsx("div",{className:"flex items-center gap-1",children:c.jsx("p",{className:"text-xl font-semibold text-gray-900",children:eg(E.area)})})]})]}),H&&c.jsx("button",{onClick:De,disabled:i||d,className:Kt("cursor-pointer p-3 rounded-full transition-all duration-200 bg-white","disabled:opacity-50 disabled:cursor-not-allowed",t?"text-red-500":"text-gray-400 hover:text-red-500"),children:d?c.jsx(xs,{className:"w-6 h-6 animate-spin"}):c.jsx(bc,{className:Kt("w-6 h-6",t&&"fill-current")})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-6 pt-4 border-t mt-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"M tin"}),c.jsxs("p",{className:"text-sm font-semibold text-gray-900 font-mono",children:["#TN-",E.id]})]}),c.jsx("div",{className:"h-8 w-px bg-gray-200"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Ngy ng"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:D_(E?.createdAt||"")})]}),c.jsx("div",{className:"h-8 w-px bg-gray-200"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Cp nht ln cui"}),c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:D_(E?.updatedAt||"")})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Thng tin m t"}),c.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:E.description})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"c im bt ng sn"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"Loi bt ng sn"}),c.jsx("span",{className:"font-semibold text-gray-900",children:me(E.propertyType)})]}),E.legalStatus&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"Giy t php l"}),c.jsx("span",{className:"font-semibold text-gray-900",children:E.legalStatus})]}),E.furnitureStatus&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"Ni tht"}),c.jsx("span",{className:"font-semibold text-gray-900",children:E.furnitureStatus})]}),E.numBedrooms&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"S phng ng"}),c.jsxs("span",{className:"font-semibold text-gray-900",children:[E.numBedrooms," phng"]})]}),E.numBathrooms&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"S phng tm"}),c.jsxs("span",{className:"font-semibold text-gray-900",children:[E.numBathrooms," phng"]})]}),E.numFloors&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"S tng"}),c.jsxs("span",{className:"font-semibold text-gray-900",children:[E.numFloors," tng"]})]}),E.houseDirection&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"Hng nh"}),c.jsx("span",{className:"font-semibold text-gray-900",children:E.houseDirection})]}),E.balconyDirection&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"Hng ban cng"}),c.jsx("span",{className:"font-semibold text-gray-900",children:E.balconyDirection})]}),E.roadWidthM&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"ng vo"}),c.jsxs("span",{className:"font-semibold text-gray-900",children:[E.roadWidthM," m"]})]}),E.facadeWidthM&&c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[c.jsx("span",{className:"text-gray-600",children:"Mt tin"}),c.jsxs("span",{className:"font-semibold text-gray-900",children:[E.facadeWidthM," m"]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"V tr trn bn "}),c.jsx("div",{className:"w-full h-96 rounded-lg bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center relative overflow-hidden border border-gray-200",children:c.jsx($ee,{location:Je,defaultZoom:16})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Ch s sng"}),z?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(xs,{className:"w-8 h-8 animate-spin text-[#008DDA]"})}):L?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col items-center pb-6 border-b",children:[c.jsx("p",{className:"text-sm text-gray-600 font-medium mb-4",children:"Tng quan ch s sng"}),c.jsx(xS,{value:L.livability_score,size:140,strokeWidth:10}),c.jsxs("p",{className:"text-sm text-gray-500 mt-3",children:["Cp nht: ",D_(L.update_at)]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cc ch s chi tit"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:st.map(({key:pe,label:Q,icon:Ee,color:Ge})=>{const lt=L[pe];return typeof lt!="number"?null:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ee,{className:"w-5 h-5",style:{color:Ge}}),c.jsx("span",{className:"text-sm font-medium text-gray-700",children:Q})]}),c.jsx("span",{className:"text-sm font-semibold",style:{color:Ge},children:lt.toFixed(1)})]}),c.jsx(Hb,{value:lt,className:"h-2",indicatorColor:Ge})]},pe)})})]}),(()=>{const pe=["id","property_id","score_healthcare","score_education","score_shopping","score_transportation","score_environment","score_entertainment","score_safety","livability_score","update_at"],Q=Object.entries(L).filter(([Ee,Ge])=>!pe.includes(Ee)&&Ge!==null&&Ge!==void 0&&(Ee.startsWith("dist_")||Ee.startsWith("count_"))).map(([Ee,Ge])=>{const lt=Ee.startsWith("dist_"),We=Ee.replace("dist_","").replace("count_",""),Nt={healthcare:"bnh vin",education:"trng hc",shopping:"mua sm",transportation:"giao thng",environment:"cng vin",entertainment:"gii tr",safety:"an ninh"},At=lt?`Khong cch n ${Nt[We]||We}`:`S im ${Nt[We]||We} gn y`,Mt=lt?`${Ge.toFixed(0)} m`:`${Ge}`;return{label:At,value:Mt}});return Q.length===0?null:c.jsxs("div",{className:"pt-6 border-t",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Thng tin b sung"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Q.map((Ee,Ge)=>c.jsxs("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-sm text-gray-600",children:Ee.label}),c.jsx("span",{className:"font-semibold text-gray-900",children:Ee.value})]},Ge))})]})})()]}):c.jsx("div",{className:"text-center py-12 text-gray-500",children:c.jsx("p",{children:"Khng c d liu ch s sng cho bt ng sn ny"})}),Ke?c.jsxs("div",{className:"mt-6 pt-6 border-t",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Phn tch t AI"}),c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx(xs,{className:"w-6 h-6 animate-spin text-[#008DDA]"}),c.jsx("p",{className:"text-sm text-gray-500",children:"ang phn tch bt ng sn..."})]})})]}):ye?c.jsxs("div",{className:"mt-6 pt-6 border-t",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Phn tch t AI"}),c.jsx("div",{className:"prose prose-sm max-w-none mb-4 text-gray-700",children:c.jsx(Ab,{children:ye})}),c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#008DDA] to-[#00B4D8] rounded-xl blur opacity-20 group-hover:opacity-30 transition-opacity"}),c.jsx(Nr,{onClick:ke,className:"relative w-full h-14 text-base font-semibold bg-gradient-to-r from-[#008DDA] to-[#00B4D8] hover:from-[#0064A6] hover:to-[#008DDA] text-white shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group",children:c.jsxs("div",{className:"flex items-center justify-center gap-3",children:[c.jsx("div",{className:"relative",children:c.jsx(W0,{className:"w-5 h-5 transition-transform group-hover:scale-110 duration-300"})}),c.jsx("span",{className:"bg-gradient-to-r from-white to-blue-50 bg-clip-text text-transparent font-bold",children:"Tip tc tr chuyn vi AI"}),c.jsx("div",{className:"ml-1 transition-transform group-hover:translate-x-1 duration-300",children:""})]})})]}),c.jsx("p",{className:"text-center text-xs text-gray-500 mt-3",children:"t cu hi v bt ng sn ny v nhn t vn chi tit t AI"})]})]}):null]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Bt ng sn gi "}),he?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((pe,Q)=>c.jsxs("div",{className:"space-y-3",children:[c.jsx(Xt,{className:"h-48 w-full rounded-lg"}),c.jsx(Xt,{className:"h-4 w-3/4"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(Xt,{className:"h-4 w-1/3"}),c.jsx(Xt,{className:"h-4 w-1/3"})]}),c.jsx(Xt,{className:"h-4 w-1/2"})]},Q))}):ee.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"hidden sm:block",children:c.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:ee.map(pe=>c.jsx(Mm,{id:String(pe.id),title:pe.title,price:pe.price,area:pe.area,address:`${pe.addressStreet}, ${pe.addressWard}, ${pe.addressDistrict}, ${pe.addressCity}`,imageUrl:pe.imageUrls?.[0]||"",createdAt:pe.createdAt||"",onFavoriteClick:Q=>console.log("Favorite clicked:",Q)},pe.id))})}),c.jsx("div",{className:"block sm:hidden",children:c.jsxs(Gy,{opts:{align:"start",loop:!0},className:"w-full",children:[c.jsx(Zy,{className:"-ml-2 md:-ml-4",children:ee.map(pe=>c.jsx(Xy,{className:"pl-2 md:pl-4",children:c.jsx(Mm,{id:String(pe.id),title:pe.title,price:pe.price,area:pe.area,address:`${pe.addressStreet}, ${pe.addressWard}, ${pe.addressDistrict}, ${pe.addressCity}`,imageUrl:pe.imageUrls?.[0]||"",createdAt:pe.createdAt||"",onFavoriteClick:Q=>console.log("Favorite clicked:",Q)})},pe.id))}),c.jsx(Ky,{className:"left-2 cursor-pointer hidden md:block"}),c.jsx(Yy,{className:"right-2 cursor-pointer hidden md:block"})]})})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"Khng tm thy bt ng sn gi  ph hp"})})]})]}),c.jsx("aside",{className:"lg:w-1/4 space-y-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Thng tin lin h"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-100 flex-shrink-0",children:E?.sellerProfile?.avatarUrl?c.jsx("img",{src:E.sellerProfile.avatarUrl,alt:"avatar",className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#008DDA]",children:c.jsx(dv,{className:"w-8 h-8 text-white"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-semibold text-gray-900 truncate",children:E?.sellerProfile?.fullName}),c.jsx("p",{className:"text-sm text-gray-500",children:"Ngi ng tin"})]})]}),c.jsxs(Nr,{onClick:()=>{Ae(String(E?.sellerProfile?.phoneNumber))},className:"w-full bg-[#008DDA] hover:bg-[#0064A6] text-white font-semibold py-6 transition-colors duration-200 cursor-pointer",children:[c.jsx(Uj,{className:"w-5 h-5 mr-2"}),FV(String(E?.sellerProfile?.phoneNumber))]}),c.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:"Click  copy s in thoi"})]})})]})})})},Zee=()=>{const{id:e}=Aw(),t=Ta(),[n,i]=k.useState("for_sale"),[l,d]=k.useState(null),[a,g]=k.useState(null),[x,_]=k.useState([]),[C,E]=k.useState(!0),[A,D]=k.useState(!1),[I,L]=k.useState([]),[B,z]=k.useState(!1),[q,H]=k.useState(!1),[W,ne]=k.useState(-1),[re,ee]=k.useState(!1),oe=k.useRef(null),he=k.useRef(null),we=k.useRef(""),ye=bu({defaultValues:{title:"",description:"",listingType:"for_sale",price:0,priceUnit:"VND",area:0,propertyType:"house",legalStatus:null,numBedrooms:null,numBathrooms:null,numFloors:null,facadeWidthM:null,roadWidthM:null,houseDirection:null,balconyDirection:null,furnitureStatus:null,projectName:null,buildingBlock:null,floorNumber:null,addressStreet:null,addressWard:"",addressDistrict:"",addressCity:"TPHCM",location:{type:"Point",coordinates:[0,0]},imageUrls:null,features:null,tagNames:null,addressInput:"",newImages:[],existingImageUrls:[]},mode:"onSubmit"}),Pe=ye.watch("addressInput"),[Ke]=ig(Pe,300);k.useEffect(()=>{const Ee=Ge=>{oe.current&&!oe.current.contains(Ge.target)&&he.current&&!he.current.contains(Ge.target)&&H(!1)};return document.addEventListener("mousedown",Ee),()=>document.removeEventListener("mousedown",Ee)},[]);const ze=k.useCallback(async Ee=>{z(!0);try{const Ge=await zb(Ee,10);Ge.predictions&&Ge.predictions.length>0?(L(Ge.predictions),H(!0),ne(-1)):(L([]),H(!1))}catch(Ge){console.error("Error fetching autocomplete:",Ge),L([])}finally{z(!1)}},[]);k.useEffect(()=>{const Ee=Ke.trim();if(!Ee||Ee.length<3||re){L([]),H(!1),we.current="";return}Ee!==we.current&&(we.current=Ee,ze(Ee))},[Ke,ze,re]),k.useEffect(()=>{!re&&l&&(d(null),g(null),ye.setValue("location",{type:"Point",coordinates:[0,0]}))},[re,l,ye]);const Je=async Ee=>{z(!0);try{const Ge=await tS(Ee);if(Ge.result&&Ge.result.geometry&&Ge.result.geometry.location){const{lat:lt,lng:We}=Ge.result.geometry.location,Nt={latitude:lt,longitude:We,address:Ge.result.formatted_address};return d(Nt),g(Nt),ye.setValue("location",{type:"Point",coordinates:[We,lt]}),{lat:lt,lng:We}}}catch(Ge){console.error("Error fetching place details:",Ge),alert("Khng th ly ta  ca a ch ny")}finally{z(!1)}return null},Ae=async Ee=>{ee(!0),ye.setValue("addressInput",Ee.description),H(!1),L([]);const Ge=Ee.description.split(",").map(lt=>lt.trim());if(Ge.length>=3){const lt=Ge[0],We=Ge[1],Nt=Ge[2];ye.setValue("addressStreet",lt),ye.setValue("addressWard",We),ye.setValue("addressDistrict",Nt)}await Je(Ee.place_id)},De=Ee=>{if(!(!q||I.length===0))switch(Ee.key){case"ArrowDown":Ee.preventDefault(),ne(Ge=>Ge<I.length-1?Ge+1:Ge);break;case"ArrowUp":Ee.preventDefault(),ne(Ge=>Ge>0?Ge-1:-1);break;case"Enter":W>=0&&(Ee.preventDefault(),Ae(I[W]));break;case"Escape":H(!1);break}},ke=Ee=>{d(Ee),ye.setValue("location",{type:"Point",coordinates:[Ee.longitude,Ee.latitude]})},st=k.useMemo(()=>!a||!l?0:vS(a.latitude,a.longitude,l.latitude,l.longitude),[a,l]),me=st<=eS;k.useEffect(()=>{e&&(async()=>{if(!e){mn.error("ID bi ng khng hp l"),t("/tin-dang");return}try{E(!0);const lt=(await lD(e)).data;console.log("Loaded property data:",lt),i(lt.listingType);const We=`${lt.addressStreet||""}, ${lt.addressWard}, ${lt.addressDistrict}, ${lt.addressCity}`.trim();if(lt.location&&lt.location.coordinates){const Nt={latitude:lt.location.coordinates[1],longitude:lt.location.coordinates[0],address:We};d(Nt),g(Nt),ee(!0)}ye.reset({...lt,addressInput:We,newImages:[],existingImageUrls:lt.imageUrls||[]})}catch(Ge){console.error("Error loading post data:",Ge),mn.error("Khng th ti d liu tin ng"),setTimeout(()=>{t("/tin-dang")},2e3)}finally{E(!1)}})()},[e,t,ye]);const Ce=Ee=>{const Ge=Ee.target.files;if(!Ge)return;const lt=Array.from(Ge),We=ye.getValues("existingImageUrls"),Nt=ye.getValues("newImages"),Mt=10-(We.length+Nt.length);if(Mt<=0){mn.error("Bn ch c th ti ln ti a 10 nh");return}const Ut=lt.slice(0,Mt),Pt=["image/jpeg","image/jpg","image/png","image/webp"];if(Ut.filter($n=>!Pt.includes($n.type)).length>0){mn.error("Ch chp nhn file nh nh dng JPG, PNG, WEBP");return}if(Ut.filter($n=>$n.size>5*1024*1024).length>0){mn.error("Kch thc mi nh khng c vt qu 5MB");return}const er=[...Nt,...Ut];ye.setValue("newImages",er),Ut.forEach($n=>{const ir=new FileReader;ir.onloadend=()=>{_(dt=>[...dt,ir.result])},ir.readAsDataURL($n)}),Ee.target.value=""},pe=(Ee,Ge)=>{if(Ge){const lt=ye.getValues("existingImageUrls").filter((We,Nt)=>Nt!==Ee);ye.setValue("existingImageUrls",lt)}else{const lt=ye.getValues("existingImageUrls"),We=Ee-lt.length,Nt=ye.getValues("newImages").filter((Mt,Ut)=>Ut!==We),At=x.filter((Mt,Ut)=>Ut!==We);ye.setValue("newImages",Nt),_(At)}},Q=async Ee=>{try{D(!0);const{newImages:Ge,existingImageUrls:lt,...We}=Ee;let Nt=[...lt];if(Ge.length>0){const Mt=Ge.map(Rt=>wS(Rt)),Pt=(await Promise.all(Mt)).map(Rt=>Rt.data.mediaUrl);Nt=[...lt,...Pt]}const At={...We,imageUrls:Nt};await iG(Number(e),At),mn.success("Cp nht tin ng thnh cng!"),setTimeout(()=>{t("/tin-dang")},500)}catch(Ge){console.error("Error updating property:",Ge),mn.error("C li xy ra. Vui lng th li!")}finally{D(!1)}};return C?c.jsx("div",{className:"max-w-5xl mx-auto space-y-6 py-8",children:c.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:c.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[c.jsx(xs,{className:"w-12 h-12 animate-spin text-[#008DDA]"}),c.jsx("p",{className:"text-lg text-gray-600",children:"ang ti d liu tin ng..."}),c.jsx("p",{className:"text-sm text-gray-500",children:"Vui lng i trong giy lt"})]})})}):c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"Chnh sa tin ng"}),c.jsx("p",{className:"text-gray-600",children:"Cp nht thng tin chi tit v bt ng sn ca bn"})]}),c.jsx(_u,{...ye,children:c.jsxs("form",{onSubmit:ye.handleSubmit(Q),className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Nhu cu ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Bn mun ng tin mua hay cho thu?"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx("button",{type:"button",onClick:()=>{i("for_sale"),ye.setValue("listingType","for_sale")},className:Kt("p-6 rounded-lg border-2 transition-all duration-200 cursor-pointer","hover:shadow-lg active:scale-[0.98]",n==="for_sale"?"border-[#008DDA] bg-[#008DDA]/5 shadow-md":"border-gray-200 hover:border-gray-300"),children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx("div",{className:Kt("w-16 h-16 rounded-full flex items-center justify-center transition-colors",n==="for_sale"?"bg-[#008DDA] text-white":"bg-gray-100 text-gray-600"),children:c.jsx(Gf,{className:"w-8 h-8"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:Kt("text-lg font-semibold",n==="for_sale"?"text-[#008DDA]":"text-gray-700"),children:"Mua"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ng tin bn bt ng sn"})]})]})}),c.jsx("button",{type:"button",onClick:()=>{i("for_rent"),ye.setValue("listingType","for_rent")},className:Kt("p-6 rounded-lg border-2 transition-all duration-200 cursor-pointer","hover:shadow-lg active:scale-[0.98]",n==="for_rent"?"border-[#008DDA] bg-[#008DDA]/5 shadow-md":"border-gray-200 hover:border-gray-300"),children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx("div",{className:Kt("w-16 h-16 rounded-full flex items-center justify-center transition-colors",n==="for_rent"?"bg-[#008DDA] text-white":"bg-gray-100 text-gray-600"),children:c.jsx($w,{className:"w-8 h-8"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:Kt("text-lg font-semibold",n==="for_rent"?"text-[#008DDA]":"text-gray-700"),children:"Cho thu"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ng tin cho thu bt ng sn"})]})]})})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["a ch ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Nhp a ch ca bt ng sn v chn v tr chnh xc trn bn "}),c.jsx(Sn,{control:ye.control,name:"addressInput",rules:{required:"a ch khng c  trng",validate:()=>re?!0:"Vui lng chn a ch t gi "},render:({field:Ee})=>c.jsxs(En,{className:"mb-6",children:[c.jsx(An,{className:"text-base",children:"a ch bt ng sn"}),c.jsx(Cn,{children:c.jsxs("div",{className:"relative",children:[c.jsx(Dr,{className:"focus-visible:ring-[#008DDA] h-11",placeholder:"Nhp a ch (VD: 123 Nguyn Hu, Qun 1, TP.HCM)",...Ee,ref:Ge=>{Ee.ref(Ge),he.current=Ge},onKeyDown:De,autoComplete:"off",onChange:Ge=>{Ee.onChange(Ge),ee(!1),l&&(d(null),g(null),ye.setValue("location",{type:"Point",coordinates:[0,0]}))}}),B&&c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:c.jsx(xs,{className:"w-5 h-5 animate-spin text-[#008DDA]"})}),q&&I.length>0&&c.jsx("div",{ref:oe,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:I.map((Ge,lt)=>c.jsxs("div",{onClick:()=>Ae(Ge),className:Kt("flex items-start gap-3 p-3 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",W===lt?"bg-blue-50":"hover:bg-gray-50"),children:[c.jsx(bs,{className:"w-5 h-5 text-[#008DDA] flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:Ge.structured_formatting.main_text}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:Ge.structured_formatting.secondary_text})]})]},Ge.place_id))})]})}),c.jsx(Vn,{})]})}),l&&c.jsxs("div",{className:"mt-6 pt-6 border-t space-y-4",children:[c.jsx("div",{children:c.jsxs("h3",{className:"text-base font-semibold mb-1",children:["Chn v tr chnh xc trn bn  ",c.jsx("span",{className:"text-red-500",children:"*"})]})}),c.jsx("div",{className:Kt("rounded-lg overflow-hidden border-2",me?"border-gray-300":"border-red-300"),children:c.jsx(yS,{location:l,onLocationChange:ke,defaultZoom:16,height:"500px",showNavigation:!0})}),!me&&st>0&&c.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mt-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Iy,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsx("div",{className:"flex-1",children:c.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"V tr khng trng khp vi a ch ban u"})})]})})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Thng tin chnh"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Cung cp thng tin chi tit v bt ng sn ca bn"}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Sn,{control:ye.control,name:"propertyType",rules:{required:"Vui lng chn loi bt ng sn"},render:({field:Ee})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Loi bt ng sn ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs(wa,{value:Ee.value,onValueChange:Ee.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0",children:c.jsx(Sa,{placeholder:"Chn loi bt ng sn"})})}),c.jsx(Ca,{children:Id.map(Ge=>c.jsx(Si,{value:Ge.id,children:Ge.name},Ge.id))})]}),c.jsx(Vn,{})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:ye.control,name:"area",rules:{required:"Vui lng nhp din tch",pattern:{value:/^[0-9]+(\.[0-9]+)?$/,message:"Din tch phi l s hp l"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Din tch ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp din tch",className:"focus-visible:ring-[#008DDA] pr-16",value:Ee.value||"",onChange:Ge=>{const lt=Ge.target.value.replace(/\D/g,"");Ee.onChange(lt?Number(lt):0)}})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"m"})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:ye.control,name:"price",rules:{required:"Vui lng nhp mc gi",pattern:{value:/^[0-9]+$/,message:"Mc gi ch c nhp s"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Mc gi ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp mc gi",className:"focus-visible:ring-[#008DDA] pr-16",value:Ee.value||"",onChange:Ge=>{const lt=Ge.target.value.replace(/\D/g,"");Ee.onChange(lt?Number(lt):0)},onBlur:Ge=>{Ge.target.value=Ee.value?Number(Ee.value).toLocaleString("vi-VN"):""},onFocus:Ge=>{Ge.target.value=String(Ee.value||0)}})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"VND"})]}),c.jsx(Vn,{})]})})]}),c.jsx(Sn,{control:ye.control,name:"title",rules:{required:"Vui lng nhp tiu ",minLength:{value:10,message:"Tiu  phi c t nht 10 k t"},maxLength:{value:100,message:"Tiu  khng c vt qu 100 k t"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsxs(An,{children:["Tiu  ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Cn,{children:c.jsx(Dr,{placeholder:"VD: Cn h 2 phng ng view sng, full ni tht, gi tt",className:"focus-visible:ring-[#008DDA]",...Ee})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Ee.value.length,"/100 k t"]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:ye.control,name:"description",rules:{required:"Vui lng nhp m t",minLength:{value:50,message:"M t phi c t nht 50 k t"},maxLength:{value:2e3,message:"M t khng c vt qu 2000 k t"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsxs(An,{children:["M t ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Cn,{children:c.jsx(Nb,{placeholder:"VD: Cn h nm ti tng cao, view thong mt hng sng. Ni tht y  bao gm: phng khch, bp, 2 phng ng c ging t, my lnh. Khu vc an ninh 24/7, c h bi, phng gym...",className:"focus-visible:ring-[#008DDA] min-h-32 resize-y",...Ee})}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Ee.value.length,"/2000 k t"]}),c.jsx(Vn,{})]})})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Thng tin khc"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Cc thng tin b sung gip m t chi tit hn v bt ng sn (khng bt buc)"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:ye.control,name:"legalStatus",render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"Giy t php l"}),c.jsxs(wa,{value:Ee.value??void 0,onValueChange:Ee.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 w-full",children:c.jsx(Sa,{placeholder:"Chn loi giy t"})})}),c.jsx(Ca,{children:Bb.map(Ge=>c.jsx(Si,{value:Ge.name,children:Ge.name},Ge.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:ye.control,name:"furnitureStatus",render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"Ni tht"}),c.jsxs(wa,{value:Ee.value??void 0,onValueChange:Ee.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 w-full",children:c.jsx(Sa,{placeholder:"Chn tnh trng ni tht"})})}),c.jsx(Ca,{children:Fb.map(Ge=>c.jsx(Si,{value:Ge.name,children:Ge.name},Ge.id))})]}),c.jsx(Vn,{})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(Sn,{control:ye.control,name:"numBedrooms",rules:{pattern:{value:/^[0-9]*$/,message:"Ch c nhp s"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"S phng ng"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp s phng ng",className:"focus-visible:ring-[#008DDA]",onChange:Ge=>{const lt=Ge.target.value.replace(/[^0-9]/g,"");Ee.onChange(lt?Number(lt):null)},value:Ee.value??""})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:ye.control,name:"numBathrooms",rules:{pattern:{value:/^[0-9]*$/,message:"Ch c nhp s"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"S phng tm"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp s phng tm",className:"focus-visible:ring-[#008DDA]",onChange:Ge=>{const lt=Ge.target.value.replace(/[^0-9]/g,"");Ee.onChange(lt?Number(lt):null)},value:Ee.value??""})}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:ye.control,name:"numFloors",rules:{pattern:{value:/^[0-9]*$/,message:"Ch c nhp s"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"S tng"}),c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp s tng",className:"focus-visible:ring-[#008DDA]",onChange:Ge=>{const lt=Ge.target.value.replace(/[^0-9]/g,"");Ee.onChange(lt?Number(lt):null)},value:Ee.value??""})}),c.jsx(Vn,{})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:ye.control,name:"houseDirection",render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"Hng nh"}),c.jsxs(wa,{value:Ee.value??void 0,onValueChange:Ee.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 w-full",children:c.jsx(Sa,{placeholder:"Chn hng nh"})})}),c.jsx(Ca,{children:np.map(Ge=>c.jsx(Si,{value:Ge.name,children:Ge.name},Ge.id))})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:ye.control,name:"balconyDirection",render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"Hng ban cng"}),c.jsxs(wa,{value:Ee.value??void 0,onValueChange:Ee.onChange,children:[c.jsx(Cn,{children:c.jsx(Ea,{className:"w-full cursor-pointer focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0",children:c.jsx(Sa,{placeholder:"Chn hng ban cng"})})}),c.jsx(Ca,{children:np.map(Ge=>c.jsx(Si,{value:Ge.name,children:Ge.name},Ge.id))})]}),c.jsx(Vn,{})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(Sn,{control:ye.control,name:"roadWidthM",rules:{pattern:{value:/^[0-9]*\.?[0-9]*$/,message:"Ch c nhp s"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"ng vo"}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp  rng ng vo",className:"focus-visible:ring-[#008DDA] pr-10",onChange:Ge=>{const lt=Ge.target.value.replace(/[^0-9.]/g,"");Ee.onChange(lt?Number(lt):null)},value:Ee.value??""})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"m"})]}),c.jsx(Vn,{})]})}),c.jsx(Sn,{control:ye.control,name:"facadeWidthM",rules:{pattern:{value:/^[0-9]*\.?[0-9]*$/,message:"Ch c nhp s"}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(An,{children:"Mt tin"}),c.jsxs("div",{className:"relative",children:[c.jsx(Cn,{children:c.jsx(Dr,{type:"text",placeholder:"Nhp  rng mt tin",className:"focus-visible:ring-[#008DDA] pr-10",onChange:Ge=>{const lt=Ge.target.value.replace(/[^0-9.]/g,"");Ee.onChange(lt?Number(lt):null)},value:Ee.value??""})}),c.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-medium",children:"m"})]}),c.jsx(Vn,{})]})})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Hnh nh ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Ti ln t nht 1 nh v ti a 10 nh. nh u tin s l nh i din."}),c.jsx(Sn,{control:ye.control,name:"newImages",rules:{validate:()=>{const Ee=ye.getValues("existingImageUrls"),Ge=ye.getValues("newImages"),lt=Ee.length+Ge.length;return lt===0?"Vui lng gi li hoc ti ln t nht 1 nh":lt>10?"Ch c c ti a 10 nh":!0}},render:({field:Ee})=>c.jsxs(En,{children:[c.jsx(Cn,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[ye.watch("existingImageUrls").map((Ge,lt)=>c.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border-2 border-gray-200 group",children:[c.jsx("img",{src:Ge,alt:`Existing ${lt+1}`,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded",children:lt===0?"nh i din":`${lt+1}`}),c.jsx("button",{type:"button",onClick:()=>pe(lt,!0),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Zf,{className:"w-4 h-4"})})]},`existing-${lt}`)),x.map((Ge,lt)=>c.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border-2 border-blue-300 group",children:[c.jsx("img",{src:Ge,alt:`New ${lt+1}`,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded",children:["Mi ",ye.watch("existingImageUrls").length+lt+1]}),c.jsx("button",{type:"button",onClick:()=>pe(ye.getValues("existingImageUrls").length+lt,!1),className:"cursor-pointer absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Zf,{className:"w-4 h-4"})})]},`new-${lt}`)),ye.watch("existingImageUrls").length+Ee.value.length<10&&c.jsxs("label",{className:"aspect-square rounded-lg border-2 border-dashed border-gray-300 hover:border-[#008DDA] cursor-pointer transition-all duration-200 flex flex-col items-center justify-center gap-2 bg-gray-50 hover:bg-blue-50",children:[c.jsx("input",{type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:Ce,className:"hidden"}),c.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center",children:c.jsx(Zw,{className:"w-6 h-6 text-gray-600"})}),c.jsxs("div",{className:"text-center px-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ti nh ln"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ye.watch("existingImageUrls").length+Ee.value.length,"/10"]})]})]})]}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Lj,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("p",{className:"font-medium mb-1",children:"Lu  khi ti nh:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"nh dng: JPG, PNG, WEBP"}),c.jsx("li",{children:"Kch thc ti a: 5MB/nh"}),c.jsx("li",{children:"nh u tin s l nh i din"}),c.jsx("li",{children:"Nn chp nh r nt, y  gc nhn"}),c.jsx("li",{children:"nh c c vin xm, nh mi c vin xanh"})]})]})]})}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"text-gray-600",children:["Tng: ",c.jsx("span",{className:"font-semibold text-[#008DDA]",children:ye.watch("existingImageUrls").length+Ee.value.length})," nh"]}),c.jsxs("span",{className:"text-gray-500",children:["(C: ",ye.watch("existingImageUrls").length,", Mi: ",Ee.value.length,")"]})]}),c.jsxs("span",{className:"text-gray-500",children:["Cn li: ",10-ye.watch("existingImageUrls").length-Ee.value.length," nh"]})]})]})}),c.jsx(Vn,{})]})})]}),c.jsx("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t shadow-lg rounded-lg p-4 z-50",children:c.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[c.jsx("p",{className:"text-sm text-gray-600 hidden sm:block",children:A?"ang x l...":"Vui lng kim tra k thng tin trc khi cp nht"}),c.jsx(Nr,{type:"submit",disabled:A,className:"cursor-pointer w-full sm:w-auto px-8 py-6 text-base font-semibold transition-all duration-200 bg-[#008DDA] hover:bg-[#0064A6] shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:A?c.jsxs(c.Fragment,{children:[c.jsx(xs,{className:"w-5 h-5 mr-2 animate-spin inline"}),"ang cp nht..."]}):"Cp nht tin ng"})]})})]})})]})},Xee=()=>{const[e,t]=k.useState(""),[n,i]=k.useState("all"),[l,d]=k.useState("all"),[a,g]=k.useState("all"),[x,_]=k.useState("default"),[C,E]=k.useState(1),[A,D]=k.useState(1),[I,L]=k.useState(!1),[B,z]=k.useState([]),[q,H]=k.useState(!1),[W,ne]=k.useState(new Set),{filters:re,setFilter:ee}=Q2(),[oe,he]=iv(),{userId:we,isLoggedIn:ye}=Li(),[Pe,Ke]=k.useState(null),[ze,Je]=k.useState(null),[Ae,De]=k.useState([]),[ke,st]=k.useState(!1),me=k.useCallback(()=>{if(!navigator.geolocation){console.error("Geolocation is not supported by this browser"),Je("denied");return}navigator.geolocation.getCurrentPosition(dt=>{const Xe={lat:dt.coords.latitude,lng:dt.coords.longitude};Ke(Xe),Je("granted"),console.log("User location obtained:",dt.coords.latitude,dt.coords.longitude)},dt=>{console.error("Error getting location:",dt),Je("denied")})},[]),Ce=B.filter(dt=>dt.location?.coordinates).map(dt=>({id:String(dt.id),location:{latitude:dt.location.coordinates[1],longitude:dt.location.coordinates[0],address:`${dt.addressStreet}, ${dt.addressWard}, ${dt.addressDistrict}, ${dt.addressCity}`},title:dt.title,image:dt.imageUrls?.[0]||"",price:dt.price,area:dt.area})),pe=dt=>{dt.key==="Enter"&&(dt.preventDefault(),Q())},Q=()=>{const dt=e.trim();dt?(ee("title","lk",dt),console.log("Searching for:",dt)):ee("title","lk","")},Ee=()=>{L(!I)},Ge=k.useCallback(async dt=>{if(!(!we||!ye))try{const Xe=new Set;await Promise.all(dt.map(async xe=>{try{(await lb(Number(xe.id))).data&&Xe.add(String(xe.id))}catch(Re){console.error(`Error checking liked status for property ${xe.id}:`,Re)}})),ne(Xe)}catch(Xe){console.error("Error checking liked properties:",Xe)}},[we,ye]),lt=k.useRef(""),We=k.useRef(!1),Nt=k.useCallback(async dt=>{if(dt.zoom<10)return;const Xe=`${dt.minLat.toFixed(4)}-${dt.minLng.toFixed(4)}-${dt.maxLat.toFixed(4)}-${dt.maxLng.toFixed(4)}-${dt.zoom.toFixed(1)}`;if(!(Xe===lt.current||We.current))try{We.current=!0,lt.current=Xe;const xe=await sD(dt.minLat,dt.minLng,dt.maxLat,dt.maxLng);if(xe.status==="200"&&xe.data){const Re=xe.data.filter(Ve=>(Ve.listingType||Ve.listing_type)==="for_rent").map(Ve=>({id:Ve.id,userId:Ve.user_id||0,approvalStatus:"APPROVED",title:Ve.title,description:Ve.description||"",listingType:Ve.listingType||Ve.listing_type||"for_sale",price:Ve.price,priceUnit:Ve.priceUnit||Ve.price_unit||"VND",area:Ve.area,propertyType:Ve.propertyType||Ve.property_type||"house",legalStatus:Ve.legalStatus||Ve.legal_status||null,numBedrooms:Ve.numBedrooms||Ve.num_bedrooms||null,numBathrooms:Ve.numBathrooms||Ve.num_bathrooms||null,numFloors:Ve.numFloors||Ve.num_floors||null,facadeWidthM:Ve.facadeWidthM||Ve.facade_width_m||null,roadWidthM:Ve.roadWidthM||Ve.road_width_m||null,houseDirection:Ve.houseDirection||Ve.house_direction||null,balconyDirection:Ve.balconyDirection||Ve.balcony_direction||null,furnitureStatus:Ve.furnitureStatus||Ve.furniture_status||null,addressStreet:Ve.addressStreet||Ve.address_street||"",addressWard:Ve.addressWard||Ve.address_ward||"",addressDistrict:Ve.addressDistrict||Ve.address_district||"",addressCity:Ve.addressCity||Ve.address_city||"TPHCM",location:Ve.location,imageUrls:Ve.thumbnailUrl?[Ve.thumbnailUrl]:Ve.imageUrls||Ve.image_urls||[],createdAt:Ve.createdAt||Ve.created_at||new Date().toISOString(),updatedAt:Ve.updatedAt||Ve.updated_at||new Date().toISOString()}));z(Re),D(1),we&&await Ge(Re)}}catch(xe){console.error("Error fetching viewport properties:",xe)}finally{We.current=!1}},[]),[At]=ig(Nt,500),Mt=k.useCallback(dt=>{At(dt)},[At]),Ut=async(dt,Xe)=>{try{const xe=Number(dt);Xe?(await vv(xe),ne(Re=>{const Ve=new Set(Re);return Ve.delete(dt),Ve})):(await sb(xe),ne(Re=>new Set(Re).add(dt)))}catch(xe){console.error("Error toggling favorite:",xe)}},Pt=dt=>{if(i(dt),dt==="all")ee("addressDistrict","eq","");else{const Xe=jd.find(xe=>xe.id===dt)?.name;Xe&&ee("addressDistrict","eq",Xe)}},Rt=k.useCallback(async()=>{try{if(st(!0),ze==="granted"&&Pe){let dt;if(we?dt=await Lm(Pe.lat,Pe.lng,8,20,we):dt=await Lm(Pe.lat,Pe.lng,8,20),dt.status==="200"&&dt.data?.items){const Xe=dt.data.items.map(xe=>({id:xe.id,title:xe.title,price:xe.price,priceUnit:xe.price_unit,area:xe.area,addressDistrict:xe.address.split(",").map(Re=>Re.trim()).find(Re=>Re.includes("Qun")||Re.includes("Huyn"))||"",addressStreet:xe.address.split(",")[0]?.trim()||"",addressWard:xe.address.split(",").map(Re=>Re.trim()).find(Re=>Re.includes("Phng")||Re.includes("X"))||"",addressCity:"TPHCM",numBedrooms:xe.num_bedrooms,numBathrooms:xe.num_bathrooms,imageUrls:xe.thumbnail_url?[xe.thumbnail_url]:[],listingType:"for_sale",propertyType:"house",approvalStatus:"APPROVED",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:0,location:{type:"Point",coordinates:[0,0]}}));De(Xe)}else De([])}else De([])}catch(dt){console.error("Error fetching recommended properties:",dt),De([])}finally{st(!1)}},[ze,Pe,we]),vn=dt=>{d(dt),dt==="all"?ee("propertyType","eq",""):ee("propertyType","eq",dt)},er=dt=>{_(dt);const Xe=new URLSearchParams(oe);dt==="default"?Xe.delete("sort"):Xe.set("sort",dt),he(Xe)},$n=dt=>{if(g(dt),dt==="all")ee("price","rng","");else{const Xe=Y2(dt);Xe&&ee("price","rng",Xe)}},ir=dt=>{E(dt),window.scrollTo({top:0,behavior:"smooth"})};return k.useEffect(()=>{const dt=re.find(Xe=>Xe.key==="addressDistrict"&&Xe.operator==="eq");if(dt){const Xe=jd.find(xe=>xe.name===dt.value)?.id;Xe&&i(Xe)}else i("all")},[re]),k.useEffect(()=>{const dt=re.find(Xe=>Xe.key==="propertyType"&&Xe.operator==="eq");d(dt?dt.value:"all")},[re]),k.useEffect(()=>{const dt=oe.get("sort");_(dt||"default")},[oe]),k.useEffect(()=>{const dt=re.find(Xe=>Xe.key==="price"&&Xe.operator==="rng");if(dt){const Xe=W2(dt.value);Xe&&g(Xe)}else g("all")},[re]),k.useEffect(()=>{E(1)},[re]),k.useEffect(()=>{(async()=>{try{H(!0);const xe=[...re.map(Oe=>({key:Oe.key,operator:Oe.operator==="eq"?"equal":Oe.operator==="gt"?"greater":Oe.operator==="lt"?"less":Oe.operator==="gte"?"greater_equal":Oe.operator==="lte"?"less_equal":Oe.operator==="lk"?"like":Oe.operator==="rng"?"range":"equal",value:Oe.value})),{key:"listingType",operator:"equal",value:"for_rent"},{key:"approvalStatus",operator:"equal",value:"APPROVED"}];let Re=[{key:"createdAt",type:"DESC"}];const Ve=oe.get("sort");if(Ve&&Ve!=="default"){const Oe=u4(Ve);Oe&&(Re=[Oe])}const Vt=await Wy({filters:xe,sorts:Re,rpp:10,page:C});z(Vt.data.items),D(Vt.data.pages||1)}catch(Xe){console.error("Error fetching properties:",Xe)}finally{H(!1)}})()},[re,C,oe]),k.useEffect(()=>{Rt()},[Rt]),k.useEffect(()=>{ze===null&&me()},[ze,me]),k.useEffect(()=>{B.length>0&&Ge(B)},[B,Ge]),k.useEffect(()=>()=>{document.body.style.overflow=""},[]),k.useEffect(()=>(I?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[I]),c.jsx("div",{className:`min-h-screen bg-gray-50 ${I?"h-screen overflow-hidden":""}`,children:c.jsx("div",{className:I?"w-full":"max-w-7xl mx-auto px-4 py-6",children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-6",children:[c.jsxs("div",{className:I?"lg:w-[40%] overflow-y-auto px-4 py-6 h-screen":"flex-1 lg:w-3/4",children:[c.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-4",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center",children:[c.jsxs("div",{className:"flex flex-1",children:[c.jsx(Dr,{type:"text",value:e,onChange:dt=>t(dt.target.value),onKeyDown:pe,placeholder:"Tm kim theo a im, d n...",className:"h-[48px] bg-white text-gray-600 flex-1 rounded-r-none border-r-0 focus-visible:ring-[#008DDA] focus-visible:ring-2 focus-visible:ring-offset-0"}),c.jsx(Nr,{type:"button",onClick:Q,className:"h-[48px] rounded-l-none px-3 bg-[#008DDA] hover:bg-[#0072b0] cursor-pointer",children:c.jsx(Ry,{className:"w-4 h-4 text-white"})})]}),c.jsxs(Nr,{onClick:Ee,variant:"outline",className:"flex items-center justify-center gap-2 border-[#008DDA] text-[#008DDA] hover:bg-[#008DDA] hover:text-white transition-colors cursor-pointer",children:[c.jsx(Bj,{className:"w-4 h-4"}),I?"ng bn ":"M bn "]})]})}),c.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-4",children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[c.jsxs(wa,{value:n,onValueChange:Pt,children:[c.jsx(Ea,{className:"w-full focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 cursor-pointer",children:c.jsx(Sa,{placeholder:"Khu vc"})}),c.jsxs(Ca,{children:[c.jsx(Si,{className:"cursor-pointer",value:"all",children:"Tt c khu vc"}),jd.map(dt=>c.jsx(Si,{value:dt.id,className:"cursor-pointer",children:dt.name},dt.id))]})]}),c.jsxs(wa,{value:l,onValueChange:vn,children:[c.jsx(Ea,{className:"w-full focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 cursor-pointer",children:c.jsx(Sa,{placeholder:"Loi bt ng sn"})}),c.jsxs(Ca,{children:[c.jsx(Si,{className:"cursor-pointer",value:"all",children:"Tt c loi"}),Id.map(dt=>c.jsx(Si,{value:dt.id,className:"cursor-pointer",children:dt.name},dt.id))]})]}),c.jsxs(wa,{value:a,onValueChange:$n,children:[c.jsx(Ea,{className:"w-full focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 cursor-pointer",children:c.jsx(Sa,{placeholder:"Gi bn"})}),c.jsxs(Ca,{children:[c.jsx(Si,{value:"all",className:"cursor-pointer",children:"Tt c"}),RD.map(dt=>c.jsx(Si,{value:dt.id,className:"cursor-pointer",children:dt.title},dt.id))]})]})]})}),c.jsx("h2",{className:"text-2xl font-semibold text-gray-900 my-8",children:"Thu nh t  Thnh ph H Ch Minh"}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("p",{className:"text-gray-600 text-sm",children:["Hin c ",B.length," bt ng sn"]}),c.jsx("div",{className:"flex items-center lg:w-1/3",children:c.jsxs(wa,{value:x,onValueChange:er,children:[c.jsx(Ea,{className:"w-full bg-white focus:ring-[#008DDA] focus:ring-2 focus:ring-offset-0 cursor-pointer",children:c.jsx(Sa,{placeholder:"Mc nh"})}),c.jsxs(Ca,{children:[c.jsx(Si,{value:"default",className:"cursor-pointer",children:"Mc nh"}),LD.map(dt=>c.jsx(Si,{value:dt.id,className:"cursor-pointer",children:dt.title},dt.id))]})]})})]}),c.jsx("div",{className:"space-y-4 mb-6",children:q?c.jsx(c.Fragment,{children:[...Array(5)].map((dt,Xe)=>c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex gap-4",children:[c.jsx(Xt,{className:"w-64 h-48 rounded-lg flex-shrink-0"}),c.jsxs("div",{className:"flex-1 space-y-3",children:[c.jsx(Xt,{className:"h-6 w-3/4"}),c.jsx(Xt,{className:"h-4 w-1/2"}),c.jsx(Xt,{className:"h-4 w-1/3"}),c.jsx(Xt,{className:"h-4 w-1/4"}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsx(Xt,{className:"h-4 w-24"}),c.jsx(Xt,{className:"h-8 w-8 rounded-full"})]})]})]},Xe))}):B.length>0?B.map(dt=>c.jsx($2,{id:String(dt.id),title:dt.title,price:dt.price,area:dt.area,address:`${dt.addressStreet}, ${dt.addressWard}, ${dt.addressDistrict}, ${dt.addressCity}`,imageUrl:dt.imageUrls?.[0]||"",createdAt:dt.createdAt||"",isLiked:W.has(String(dt.id)),onFavoriteClick:Ut},dt.id)):c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"Khng tm thy bt ng sn no"})})}),!q&&B.length>0&&c.jsx("div",{className:"flex justify-center mb-6",children:c.jsx(Rb,{currentPage:C,onPageChange:ir,totalPages:A})}),ze==="granted"&&Pe&&c.jsxs("section",{className:I?"py-8":"py-12 px-4 max-w-7xl mx-auto",children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-8",children:"Bt ng sn gi "}),ke?c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((dt,Xe)=>c.jsxs("div",{className:"space-y-3",children:[c.jsx(Xt,{className:"h-48 w-full rounded-lg"}),c.jsx(Xt,{className:"h-4 w-3/4"}),c.jsx(Xt,{className:"h-4 w-full"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(Xt,{className:"h-4 w-1/3"}),c.jsx(Xt,{className:"h-4 w-1/3"})]}),c.jsx(Xt,{className:"h-4 w-1/2"})]},Xe))}):Ae.length>0?c.jsx(Gy,{opts:{align:"start",loop:!0},className:"w-full",children:c.jsxs("div",{className:"relative",children:[c.jsx(Zy,{className:"-ml-2 md:-ml-4",children:Ae.map(dt=>c.jsx(Xy,{className:`pl-2 md:pl-4 ${I?"basis-full md:basis-1/2 lg:basis-1/2":"sm:basis-1/2 md:basis-1/2 lg:basis-1/3"}`,children:c.jsx("div",{className:"h-[420px]",children:c.jsx(Mm,{id:String(dt.id),title:dt.title,price:dt.price,area:dt.area,address:`${dt.addressStreet} ${dt.addressWard} ${dt.addressDistrict} ${dt.addressCity}`,imageUrl:dt.imageUrls?.[0]||"",createdAt:dt.createdAt||"",onFavoriteClick:Xe=>console.log("Favorite clicked:",Xe)})})},dt.id))}),c.jsxs("div",{className:"hidden sm:block",children:[c.jsx(Ky,{className:"-left-4 sm:-left-5 lg:-left-6 cursor-pointer"}),c.jsx(Yy,{className:"-right-4 sm:-right-5 lg:-right-6 cursor-pointer"})]})]})}):null]})]}),c.jsx("aside",{className:I?"lg:w-[60%] hidden md:block":"lg:w-1/4 hidden md:block",children:I?c.jsx("div",{className:"fixed top-0 right-0 h-screen",style:{width:"60%"},children:c.jsx(c4,{properties:Ce,defaultZoom:11,onMapInteraction:Mt})}):c.jsxs("div",{className:"space-y-4",children:[c.jsx(zD,{}),c.jsx(BD,{})]})})]})})})},Kee=({children:e})=>{const t=Li(i=>i.token),{pathname:n}=Zs();return n!=="/dang-nhap"&&!t?c.jsx(YI,{to:"/",replace:!0}):e},Yee="modulepreload",Wee=function(e){return"/"+e},zk={},LP=function(t,n,i){let l=Promise.resolve();if(n&&n.length>0){let x=function(_){return Promise.all(_.map(C=>Promise.resolve(C).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),g=a?.nonce||a?.getAttribute("nonce");l=x(n.map(_=>{if(_=Wee(_),_ in zk)return;zk[_]=!0;const C=_.endsWith(".css"),E=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${E}`))return;const A=document.createElement("link");if(A.rel=C?"stylesheet":Yee,C||(A.as="script"),A.crossOrigin="",A.href=_,g&&A.setAttribute("nonce",g),document.head.appendChild(A),C)return new Promise((D,I)=>{A.addEventListener("load",D),A.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${_}`)))})}))}function d(a){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=a,window.dispatchEvent(g),!g.defaultPrevented)throw a}return l.then(a=>{for(const g of a||[])g.status==="rejected"&&d(g.reason);return t().catch(d)})};var Bk;(function(e){e[e.Min=1]="Min",e[e.Low=2]="Low",e[e.Default=3]="Default",e[e.High=4]="High",e[e.Max=5]="Max"})(Bk||(Bk={}));var Fk;(function(e){e[e.Secret=-1]="Secret",e[e.Private=0]="Private",e[e.Public=1]="Public"})(Fk||(Fk={}));const Sm=up("FirebaseMessaging",{web:()=>LP(()=>import("./web-DeV3-OmW.js"),[]).then(e=>new e.FirebaseMessagingWeb)}),Qee="https://kltn-api-staging.sonata.io.vn/api/v1/location/user/fcm",Uk=async e=>{try{const t=Li.getState().token;if(!t){console.warn(" Cha ng nhp, khng th lu FCM Token.");return}console.log(" ang gi FCM Token ln server...",e.substring(0,10)+"...");const n=await Di.post(Qee,{token:e},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log("  lu FCM Token thnh cng:",n.data)}catch(t){console.error(" Li khi lu FCM Token:",t)}},Jee=()=>{const e=Ta();k.useEffect(()=>{if(!Cu.isNativePlatform())return;(async()=>{try{if((await Sm.requestPermissions()).receive==="granted"){const{token:i}=await Sm.getToken();i&&await Uk(i)}else console.warn("User t chi quyn nhn thng bo");await Sm.removeAllListeners(),await Sm.addListener("tokenReceived",async i=>{console.log("New FCM Token received"),await Uk(i.token)}),await Sm.addListener("notificationReceived",i=>{console.log("Push received:",i),mn.info(` ${i.notification.title}: ${i.notification.body}`)}),await Sm.addListener("notificationActionPerformed",i=>{console.log("Push action:",i);const l=i.notification.data;l&&l.property_id&&e(`/bat-dong-san/${l.property_id}`)})}catch(n){console.error("FCM Init Error:",n)}})()},[e])};var Sw;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Sw||(Sw={}));var Vk;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(Vk||(Vk={}));const qk=up("StatusBar"),l1=up("App",{web:()=>LP(()=>import("./web-bBQHo6y8.js"),[]).then(e=>new e.AppWeb)});function ete(){const e=Ta(),t=Zs();return Jee(),k.useEffect(()=>{if(Cu.isNativePlatform())return(async()=>{await l1.addListener("backButton",({})=>{["/","/dang-nhap"].includes(t.pathname)?l1.exitApp():e(-1)})})(),()=>{l1.removeAllListeners()}},[e,t.pathname]),c.jsxs(c.Fragment,{children:[c.jsx(fG,{}),c.jsxs(QI,{children:[c.jsx(_i,{path:"/dang-nhap",element:c.jsx(M6,{})}),c.jsxs(_i,{path:"/dang-ky",element:c.jsx(D6,{}),children:[c.jsx(_i,{index:!0,element:c.jsx(P6,{})}),c.jsx(_i,{path:"otp",element:c.jsx(qE,{from:"register"})})]}),c.jsxs(_i,{path:"/quen-mat-khau",element:c.jsx(O6,{}),children:[c.jsx(_i,{index:!0,element:c.jsx(I6,{})}),c.jsx(_i,{path:"otp",element:c.jsx(qE,{from:"forgot"})})]}),c.jsxs(_i,{path:"/",element:c.jsx(y$,{}),children:[c.jsx(_i,{index:!0,element:c.jsx(dG,{})}),c.jsx(_i,{path:"/ve-chung-toi",element:c.jsx(hG,{})}),c.jsx(_i,{path:"/cau-hoi-thuong-gap",element:c.jsx(pG,{})}),c.jsx(_i,{path:"/dieu-khoan-su-dung",element:c.jsx(mG,{})}),c.jsx(_i,{path:"/quy-che-hoat-dong",element:c.jsx(gG,{})}),c.jsx(_i,{path:"/chinh-sach-bao-mat",element:c.jsx(yG,{})}),c.jsx(_i,{path:"/quy-dinh-dang-tin",element:c.jsx(vG,{})}),c.jsx(_i,{path:"/mua-nha",element:c.jsx(VK,{})}),c.jsx(_i,{path:"/thue-nha",element:c.jsx(Xee,{})}),c.jsx(_i,{path:"/bat-dong-san/:id",element:c.jsx(Gee,{})}),c.jsx(_i,{path:"/dinh-gia-nha/dia-chi",element:c.jsx(GK,{})}),c.jsx(_i,{path:"/dinh-gia-nha/ban-do",element:c.jsx(gJ,{})}),c.jsx(_i,{path:"/dinh-gia-nha/ket-qua",element:c.jsx(kJ,{})})]}),c.jsxs(_i,{path:"/",element:c.jsx(Kee,{children:c.jsx(IJ,{})}),children:[c.jsx(_i,{path:"/tin-dang",element:c.jsx(see,{})}),c.jsx(_i,{path:"/dang-tin",element:c.jsx(lee,{})}),c.jsx(_i,{path:"/bat-dong-san/:id/chinh-sua",element:c.jsx(Zee,{})}),c.jsx(_i,{path:"/tin-yeu-thich",element:c.jsx(cee,{})}),c.jsx(_i,{path:"/thong-tin-ca-nhan",element:c.jsx(qee,{})}),c.jsx(_i,{path:"/doi-mat-khau",element:c.jsx(Hee,{})}),c.jsx(_i,{path:"/dinh-gia-nha/lich-su",element:c.jsx(AJ,{})}),c.jsx(_i,{path:"/dinh-gia-nha/ket-qua/:id",element:c.jsx(MJ,{})})]})]})]})}function tte(){return k.useEffect(()=>{Cu.isNativePlatform()&&(async()=>{try{await qk.setOverlaysWebView({overlay:!0}),await qk.setStyle({style:Sw.Light})}catch(t){console.error("StatusBar error:",t)}})()},[]),c.jsx(wO,{children:c.jsx(ete,{})})}iI.createRoot(document.getElementById("root")).render(c.jsxs(c.Fragment,{children:[c.jsx(tte,{}),c.jsx(E6,{position:"top-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,style:{zIndex:1e3}})]}));export{J2 as W};
